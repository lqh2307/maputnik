var RN=Object.defineProperty;var DN=(n,e,t)=>e in n?RN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Pn=(n,e,t)=>DN(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function yl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function j6(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var g3={exports:{}},uv={},y3={exports:{}},hs={},i8;function FN(){if(i8)return hs;i8=1;/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),B=Symbol.iterator;function T(Re){return Re===null||typeof Re!="object"?null:(Re=B&&Re[B]||Re["@@iterator"],typeof Re=="function"?Re:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,j={};function N(Re,He,_t){this.props=Re,this.context=He,this.refs=j,this.updater=_t||P}N.prototype.isReactComponent={},N.prototype.setState=function(Re,He){if(typeof Re!="object"&&typeof Re!="function"&&Re!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Re,He,"setState")},N.prototype.forceUpdate=function(Re){this.updater.enqueueForceUpdate(this,Re,"forceUpdate")};function q(){}q.prototype=N.prototype;function H(Re,He,_t){this.props=Re,this.context=He,this.refs=j,this.updater=_t||P}var oe=H.prototype=new q;oe.constructor=H,U(oe,N.prototype),oe.isPureReactComponent=!0;var te=Array.isArray,V=Object.prototype.hasOwnProperty,ne={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function ie(Re,He,_t){var Gt,yt={},Ft=null,Tt=null;if(He!=null)for(Gt in He.ref!==void 0&&(Tt=He.ref),He.key!==void 0&&(Ft=""+He.key),He)V.call(He,Gt)&&!W.hasOwnProperty(Gt)&&(yt[Gt]=He[Gt]);var Le=arguments.length-2;if(Le===1)yt.children=_t;else if(1<Le){for(var Pe=Array(Le),Be=0;Be<Le;Be++)Pe[Be]=arguments[Be+2];yt.children=Pe}if(Re&&Re.defaultProps)for(Gt in Le=Re.defaultProps,Le)yt[Gt]===void 0&&(yt[Gt]=Le[Gt]);return{$$typeof:n,type:Re,key:Ft,ref:Tt,props:yt,_owner:ne.current}}function he(Re,He){return{$$typeof:n,type:Re.type,key:He,ref:Re.ref,props:Re.props,_owner:Re._owner}}function fe(Re){return typeof Re=="object"&&Re!==null&&Re.$$typeof===n}function Ee(Re){var He={"=":"=0",":":"=2"};return"$"+Re.replace(/[=:]/g,function(_t){return He[_t]})}var me=/\/+/g;function Me(Re,He){return typeof Re=="object"&&Re!==null&&Re.key!=null?Ee(""+Re.key):He.toString(36)}function De(Re,He,_t,Gt,yt){var Ft=typeof Re;(Ft==="undefined"||Ft==="boolean")&&(Re=null);var Tt=!1;if(Re===null)Tt=!0;else switch(Ft){case"string":case"number":Tt=!0;break;case"object":switch(Re.$$typeof){case n:case e:Tt=!0}}if(Tt)return Tt=Re,yt=yt(Tt),Re=Gt===""?"."+Me(Tt,0):Gt,te(yt)?(_t="",Re!=null&&(_t=Re.replace(me,"$&/")+"/"),De(yt,He,_t,"",function(Be){return Be})):yt!=null&&(fe(yt)&&(yt=he(yt,_t+(!yt.key||Tt&&Tt.key===yt.key?"":(""+yt.key).replace(me,"$&/")+"/")+Re)),He.push(yt)),1;if(Tt=0,Gt=Gt===""?".":Gt+":",te(Re))for(var Le=0;Le<Re.length;Le++){Ft=Re[Le];var Pe=Gt+Me(Ft,Le);Tt+=De(Ft,He,_t,Pe,yt)}else if(Pe=T(Re),typeof Pe=="function")for(Re=Pe.call(Re),Le=0;!(Ft=Re.next()).done;)Ft=Ft.value,Pe=Gt+Me(Ft,Le++),Tt+=De(Ft,He,_t,Pe,yt);else if(Ft==="object")throw He=String(Re),Error("Objects are not valid as a React child (found: "+(He==="[object Object]"?"object with keys {"+Object.keys(Re).join(", ")+"}":He)+"). If you meant to render a collection of children, use an array instead.");return Tt}function xe(Re,He,_t){if(Re==null)return Re;var Gt=[],yt=0;return De(Re,Gt,"","",function(Ft){return He.call(_t,Ft,yt++)}),Gt}function At(Re){if(Re._status===-1){var He=Re._result;He=He(),He.then(function(_t){(Re._status===0||Re._status===-1)&&(Re._status=1,Re._result=_t)},function(_t){(Re._status===0||Re._status===-1)&&(Re._status=2,Re._result=_t)}),Re._status===-1&&(Re._status=0,Re._result=He)}if(Re._status===1)return Re._result.default;throw Re._result}var Ze={current:null},Xe={transition:null},Ne={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:Xe,ReactCurrentOwner:ne};function Se(){throw Error("act(...) is not supported in production builds of React.")}return hs.Children={map:xe,forEach:function(Re,He,_t){xe(Re,function(){He.apply(this,arguments)},_t)},count:function(Re){var He=0;return xe(Re,function(){He++}),He},toArray:function(Re){return xe(Re,function(He){return He})||[]},only:function(Re){if(!fe(Re))throw Error("React.Children.only expected to receive a single React element child.");return Re}},hs.Component=N,hs.Fragment=t,hs.Profiler=i,hs.PureComponent=H,hs.StrictMode=r,hs.Suspense=p,hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ne,hs.act=Se,hs.cloneElement=function(Re,He,_t){if(Re==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Re+".");var Gt=U({},Re.props),yt=Re.key,Ft=Re.ref,Tt=Re._owner;if(He!=null){if(He.ref!==void 0&&(Ft=He.ref,Tt=ne.current),He.key!==void 0&&(yt=""+He.key),Re.type&&Re.type.defaultProps)var Le=Re.type.defaultProps;for(Pe in He)V.call(He,Pe)&&!W.hasOwnProperty(Pe)&&(Gt[Pe]=He[Pe]===void 0&&Le!==void 0?Le[Pe]:He[Pe])}var Pe=arguments.length-2;if(Pe===1)Gt.children=_t;else if(1<Pe){Le=Array(Pe);for(var Be=0;Be<Pe;Be++)Le[Be]=arguments[Be+2];Gt.children=Le}return{$$typeof:n,type:Re.type,key:yt,ref:Ft,props:Gt,_owner:Tt}},hs.createContext=function(Re){return Re={$$typeof:l,_currentValue:Re,_currentValue2:Re,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Re.Provider={$$typeof:s,_context:Re},Re.Consumer=Re},hs.createElement=ie,hs.createFactory=function(Re){var He=ie.bind(null,Re);return He.type=Re,He},hs.createRef=function(){return{current:null}},hs.forwardRef=function(Re){return{$$typeof:o,render:Re}},hs.isValidElement=fe,hs.lazy=function(Re){return{$$typeof:x,_payload:{_status:-1,_result:Re},_init:At}},hs.memo=function(Re,He){return{$$typeof:v,type:Re,compare:He===void 0?null:He}},hs.startTransition=function(Re){var He=Xe.transition;Xe.transition={};try{Re()}finally{Xe.transition=He}},hs.unstable_act=Se,hs.useCallback=function(Re,He){return Ze.current.useCallback(Re,He)},hs.useContext=function(Re){return Ze.current.useContext(Re)},hs.useDebugValue=function(){},hs.useDeferredValue=function(Re){return Ze.current.useDeferredValue(Re)},hs.useEffect=function(Re,He){return Ze.current.useEffect(Re,He)},hs.useId=function(){return Ze.current.useId()},hs.useImperativeHandle=function(Re,He,_t){return Ze.current.useImperativeHandle(Re,He,_t)},hs.useInsertionEffect=function(Re,He){return Ze.current.useInsertionEffect(Re,He)},hs.useLayoutEffect=function(Re,He){return Ze.current.useLayoutEffect(Re,He)},hs.useMemo=function(Re,He){return Ze.current.useMemo(Re,He)},hs.useReducer=function(Re,He,_t){return Ze.current.useReducer(Re,He,_t)},hs.useRef=function(Re){return Ze.current.useRef(Re)},hs.useState=function(Re){return Ze.current.useState(Re)},hs.useSyncExternalStore=function(Re,He,_t){return Ze.current.useSyncExternalStore(Re,He,_t)},hs.useTransition=function(){return Ze.current.useTransition()},hs.version="18.3.1",hs}var o8;function Na(){return o8||(o8=1,y3.exports=FN()),y3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s8;function LN(){if(s8)return uv;s8=1;var n=Na(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(o,p,v){var x,B={},T=null,P=null;v!==void 0&&(T=""+v),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(P=p.ref);for(x in p)r.call(p,x)&&!s.hasOwnProperty(x)&&(B[x]=p[x]);if(o&&o.defaultProps)for(x in p=o.defaultProps,p)B[x]===void 0&&(B[x]=p[x]);return{$$typeof:e,type:o,key:T,ref:P,props:B,_owner:i.current}}return uv.Fragment=t,uv.jsx=l,uv.jsxs=l,uv}var a8;function UN(){return a8||(a8=1,g3.exports=LN()),g3.exports}var le=UN(),Ai=Na();const sr=yl(Ai);var CD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},EE=sr.createContext&&sr.createContext(CD),zN=["attr","size","title"];function jN(n,e){if(n==null)return{};var t=NN(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function NN(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Kb(){return Kb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kb.apply(this,arguments)}function l8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Rb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?l8(Object(t),!0).forEach(function(r){WN(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l8(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function WN(n,e,t){return e=GN(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function GN(n){var e=QN(n,"string");return typeof e=="symbol"?e:e+""}function QN(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _D(n){return n&&n.map((e,t)=>sr.createElement(e.tag,Rb({key:t},e.attr),_D(e.child)))}function ou(n){return e=>sr.createElement(YN,Kb({attr:Rb({},n.attr)},e),_D(n.child))}function YN(n){var e=t=>{var{attr:r,size:i,title:s}=n,l=jN(n,zN),o=i||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),sr.createElement("svg",Kb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:p,style:Rb(Rb({color:n.color||t.color},t.style),n.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&sr.createElement("title",null,s),n.children)};return EE!==void 0?sr.createElement(EE.Consumer,null,t=>e(t)):e(CD)}var k_={},v3={exports:{}},Ah={},C3={exports:{}},_3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u8;function qN(){return u8||(u8=1,function(n){function e(Xe,Ne){var Se=Xe.length;Xe.push(Ne);e:for(;0<Se;){var Re=Se-1>>>1,He=Xe[Re];if(0<i(He,Ne))Xe[Re]=Ne,Xe[Se]=He,Se=Re;else break e}}function t(Xe){return Xe.length===0?null:Xe[0]}function r(Xe){if(Xe.length===0)return null;var Ne=Xe[0],Se=Xe.pop();if(Se!==Ne){Xe[0]=Se;e:for(var Re=0,He=Xe.length,_t=He>>>1;Re<_t;){var Gt=2*(Re+1)-1,yt=Xe[Gt],Ft=Gt+1,Tt=Xe[Ft];if(0>i(yt,Se))Ft<He&&0>i(Tt,yt)?(Xe[Re]=Tt,Xe[Ft]=Se,Re=Ft):(Xe[Re]=yt,Xe[Gt]=Se,Re=Gt);else if(Ft<He&&0>i(Tt,Se))Xe[Re]=Tt,Xe[Ft]=Se,Re=Ft;else break e}}return Ne}function i(Xe,Ne){var Se=Xe.sortIndex-Ne.sortIndex;return Se!==0?Se:Xe.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();n.unstable_now=function(){return l.now()-o}}var p=[],v=[],x=1,B=null,T=3,P=!1,U=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(Xe){for(var Ne=t(v);Ne!==null;){if(Ne.callback===null)r(v);else if(Ne.startTime<=Xe)r(v),Ne.sortIndex=Ne.expirationTime,e(p,Ne);else break;Ne=t(v)}}function te(Xe){if(j=!1,oe(Xe),!U)if(t(p)!==null)U=!0,At(V);else{var Ne=t(v);Ne!==null&&Ze(te,Ne.startTime-Xe)}}function V(Xe,Ne){U=!1,j&&(j=!1,q(ie),ie=-1),P=!0;var Se=T;try{for(oe(Ne),B=t(p);B!==null&&(!(B.expirationTime>Ne)||Xe&&!Ee());){var Re=B.callback;if(typeof Re=="function"){B.callback=null,T=B.priorityLevel;var He=Re(B.expirationTime<=Ne);Ne=n.unstable_now(),typeof He=="function"?B.callback=He:B===t(p)&&r(p),oe(Ne)}else r(p);B=t(p)}if(B!==null)var _t=!0;else{var Gt=t(v);Gt!==null&&Ze(te,Gt.startTime-Ne),_t=!1}return _t}finally{B=null,T=Se,P=!1}}var ne=!1,W=null,ie=-1,he=5,fe=-1;function Ee(){return!(n.unstable_now()-fe<he)}function me(){if(W!==null){var Xe=n.unstable_now();fe=Xe;var Ne=!0;try{Ne=W(!0,Xe)}finally{Ne?Me():(ne=!1,W=null)}}else ne=!1}var Me;if(typeof H=="function")Me=function(){H(me)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,xe=De.port2;De.port1.onmessage=me,Me=function(){xe.postMessage(null)}}else Me=function(){N(me,0)};function At(Xe){W=Xe,ne||(ne=!0,Me())}function Ze(Xe,Ne){ie=N(function(){Xe(n.unstable_now())},Ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Xe){Xe.callback=null},n.unstable_continueExecution=function(){U||P||(U=!0,At(V))},n.unstable_forceFrameRate=function(Xe){0>Xe||125<Xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<Xe?Math.floor(1e3/Xe):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(Xe){switch(T){case 1:case 2:case 3:var Ne=3;break;default:Ne=T}var Se=T;T=Ne;try{return Xe()}finally{T=Se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Xe,Ne){switch(Xe){case 1:case 2:case 3:case 4:case 5:break;default:Xe=3}var Se=T;T=Xe;try{return Ne()}finally{T=Se}},n.unstable_scheduleCallback=function(Xe,Ne,Se){var Re=n.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Re+Se:Re):Se=Re,Xe){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=Se+He,Xe={id:x++,callback:Ne,priorityLevel:Xe,startTime:Se,expirationTime:He,sortIndex:-1},Se>Re?(Xe.sortIndex=Se,e(v,Xe),t(p)===null&&Xe===t(v)&&(j?(q(ie),ie=-1):j=!0,Ze(te,Se-Re))):(Xe.sortIndex=He,e(p,Xe),U||P||(U=!0,At(V))),Xe},n.unstable_shouldYield=Ee,n.unstable_wrapCallback=function(Xe){var Ne=T;return function(){var Se=T;T=Ne;try{return Xe.apply(this,arguments)}finally{T=Se}}}}(_3)),_3}var A8;function VN(){return A8||(A8=1,C3.exports=qN()),C3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c8;function $N(){if(c8)return Ah;c8=1;var n=Na(),e=VN();function t(m){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+m,D=1;D<arguments.length;D++)_+="&args[]="+encodeURIComponent(arguments[D]);return"Minified React error #"+m+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(m,_){l(m,_),l(m+"Capture",_)}function l(m,_){for(i[m]=_,m=0;m<_.length;m++)r.add(_[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},B={};function T(m){return p.call(B,m)?!0:p.call(x,m)?!1:v.test(m)?B[m]=!0:(x[m]=!0,!1)}function P(m,_,D,Q){if(D!==null&&D.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return Q?!1:D!==null?!D.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function U(m,_,D,Q){if(_===null||typeof _>"u"||P(m,_,D,Q))return!0;if(Q)return!1;if(D!==null)switch(D.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function j(m,_,D,Q,ue,ge,nt){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=Q,this.attributeNamespace=ue,this.mustUseProperty=D,this.propertyName=m,this.type=_,this.sanitizeURL=ge,this.removeEmptyString=nt}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){N[m]=new j(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var _=m[0];N[_]=new j(_,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){N[m]=new j(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){N[m]=new j(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){N[m]=new j(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){N[m]=new j(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){N[m]=new j(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){N[m]=new j(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){N[m]=new j(m,5,!1,m.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function H(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var _=m.replace(q,H);N[_]=new j(_,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var _=m.replace(q,H);N[_]=new j(_,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var _=m.replace(q,H);N[_]=new j(_,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){N[m]=new j(m,1,!1,m.toLowerCase(),null,!1,!1)}),N.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){N[m]=new j(m,1,!1,m.toLowerCase(),null,!0,!0)});function oe(m,_,D,Q){var ue=N.hasOwnProperty(_)?N[_]:null;(ue!==null?ue.type!==0:Q||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(U(_,D,ue,Q)&&(D=null),Q||ue===null?T(_)&&(D===null?m.removeAttribute(_):m.setAttribute(_,""+D)):ue.mustUseProperty?m[ue.propertyName]=D===null?ue.type===3?!1:"":D:(_=ue.attributeName,Q=ue.attributeNamespace,D===null?m.removeAttribute(_):(ue=ue.type,D=ue===3||ue===4&&D===!0?"":""+D,Q?m.setAttributeNS(Q,_,D):m.setAttribute(_,D))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),ne=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),Ze=Symbol.for("react.offscreen"),Xe=Symbol.iterator;function Ne(m){return m===null||typeof m!="object"?null:(m=Xe&&m[Xe]||m["@@iterator"],typeof m=="function"?m:null)}var Se=Object.assign,Re;function He(m){if(Re===void 0)try{throw Error()}catch(D){var _=D.stack.trim().match(/\n( *(at )?)/);Re=_&&_[1]||""}return`
`+Re+m}var _t=!1;function Gt(m,_){if(!m||_t)return"";_t=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(Mn){var Q=Mn}Reflect.construct(m,[],_)}else{try{_.call()}catch(Mn){Q=Mn}m.call(_.prototype)}else{try{throw Error()}catch(Mn){Q=Mn}m()}}catch(Mn){if(Mn&&Q&&typeof Mn.stack=="string"){for(var ue=Mn.stack.split(`
`),ge=Q.stack.split(`
`),nt=ue.length-1,Ot=ge.length-1;1<=nt&&0<=Ot&&ue[nt]!==ge[Ot];)Ot--;for(;1<=nt&&0<=Ot;nt--,Ot--)if(ue[nt]!==ge[Ot]){if(nt!==1||Ot!==1)do if(nt--,Ot--,0>Ot||ue[nt]!==ge[Ot]){var Nt=`
`+ue[nt].replace(" at new "," at ");return m.displayName&&Nt.includes("<anonymous>")&&(Nt=Nt.replace("<anonymous>",m.displayName)),Nt}while(1<=nt&&0<=Ot);break}}}finally{_t=!1,Error.prepareStackTrace=D}return(m=m?m.displayName||m.name:"")?He(m):""}function yt(m){switch(m.tag){case 5:return He(m.type);case 16:return He("Lazy");case 13:return He("Suspense");case 19:return He("SuspenseList");case 0:case 2:case 15:return m=Gt(m.type,!1),m;case 11:return m=Gt(m.type.render,!1),m;case 1:return m=Gt(m.type,!0),m;default:return""}}function Ft(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case W:return"Fragment";case ne:return"Portal";case he:return"Profiler";case ie:return"StrictMode";case Me:return"Suspense";case De:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case Ee:return(m.displayName||"Context")+".Consumer";case fe:return(m._context.displayName||"Context")+".Provider";case me:var _=m.render;return m=m.displayName,m||(m=_.displayName||_.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case xe:return _=m.displayName||null,_!==null?_:Ft(m.type)||"Memo";case At:_=m._payload,m=m._init;try{return Ft(m(_))}catch{}}return null}function Tt(m){var _=m.type;switch(m.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=_.render,m=m.displayName||m.name||"",_.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ft(_);case 8:return _===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Le(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function Pe(m){var _=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Be(m){var _=Pe(m)?"checked":"value",D=Object.getOwnPropertyDescriptor(m.constructor.prototype,_),Q=""+m[_];if(!m.hasOwnProperty(_)&&typeof D<"u"&&typeof D.get=="function"&&typeof D.set=="function"){var ue=D.get,ge=D.set;return Object.defineProperty(m,_,{configurable:!0,get:function(){return ue.call(this)},set:function(nt){Q=""+nt,ge.call(this,nt)}}),Object.defineProperty(m,_,{enumerable:D.enumerable}),{getValue:function(){return Q},setValue:function(nt){Q=""+nt},stopTracking:function(){m._valueTracker=null,delete m[_]}}}}function it(m){m._valueTracker||(m._valueTracker=Be(m))}function Ct(m){if(!m)return!1;var _=m._valueTracker;if(!_)return!0;var D=_.getValue(),Q="";return m&&(Q=Pe(m)?m.checked?"true":"false":m.value),m=Q,m!==D?(_.setValue(m),!0):!1}function ft(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Lt(m,_){var D=_.checked;return Se({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:D??m._wrapperState.initialChecked})}function Zt(m,_){var D=_.defaultValue==null?"":_.defaultValue,Q=_.checked!=null?_.checked:_.defaultChecked;D=Le(_.value!=null?_.value:D),m._wrapperState={initialChecked:Q,initialValue:D,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function Rt(m,_){_=_.checked,_!=null&&oe(m,"checked",_,!1)}function _n(m,_){Rt(m,_);var D=Le(_.value),Q=_.type;if(D!=null)Q==="number"?(D===0&&m.value===""||m.value!=D)&&(m.value=""+D):m.value!==""+D&&(m.value=""+D);else if(Q==="submit"||Q==="reset"){m.removeAttribute("value");return}_.hasOwnProperty("value")?rn(m,_.type,D):_.hasOwnProperty("defaultValue")&&rn(m,_.type,Le(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(m.defaultChecked=!!_.defaultChecked)}function qn(m,_,D){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var Q=_.type;if(!(Q!=="submit"&&Q!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+m._wrapperState.initialValue,D||_===m.value||(m.value=_),m.defaultValue=_}D=m.name,D!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,D!==""&&(m.name=D)}function rn(m,_,D){(_!=="number"||ft(m.ownerDocument)!==m)&&(D==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+D&&(m.defaultValue=""+D))}var ar=Array.isArray;function kn(m,_,D,Q){if(m=m.options,_){_={};for(var ue=0;ue<D.length;ue++)_["$"+D[ue]]=!0;for(D=0;D<m.length;D++)ue=_.hasOwnProperty("$"+m[D].value),m[D].selected!==ue&&(m[D].selected=ue),ue&&Q&&(m[D].defaultSelected=!0)}else{for(D=""+Le(D),_=null,ue=0;ue<m.length;ue++){if(m[ue].value===D){m[ue].selected=!0,Q&&(m[ue].defaultSelected=!0);return}_!==null||m[ue].disabled||(_=m[ue])}_!==null&&(_.selected=!0)}}function mn(m,_){if(_.dangerouslySetInnerHTML!=null)throw Error(t(91));return Se({},_,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function zn(m,_){var D=_.value;if(D==null){if(D=_.children,_=_.defaultValue,D!=null){if(_!=null)throw Error(t(92));if(ar(D)){if(1<D.length)throw Error(t(93));D=D[0]}_=D}_==null&&(_=""),D=_}m._wrapperState={initialValue:Le(D)}}function br(m,_){var D=Le(_.value),Q=Le(_.defaultValue);D!=null&&(D=""+D,D!==m.value&&(m.value=D),_.defaultValue==null&&m.defaultValue!==D&&(m.defaultValue=D)),Q!=null&&(m.defaultValue=""+Q)}function gr(m){var _=m.textContent;_===m._wrapperState.initialValue&&_!==""&&_!==null&&(m.value=_)}function tr(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ge(m,_){return m==null||m==="http://www.w3.org/1999/xhtml"?tr(_):m==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var ce,pe=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,D,Q,ue){MSApp.execUnsafeLocalFunction(function(){return m(_,D,Q,ue)})}:m}(function(m,_){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=_;else{for(ce=ce||document.createElement("div"),ce.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=ce.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;_.firstChild;)m.appendChild(_.firstChild)}});function rt(m,_){if(_){var D=m.firstChild;if(D&&D===m.lastChild&&D.nodeType===3){D.nodeValue=_;return}}m.textContent=_}var St={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ht=["Webkit","ms","Moz","O"];Object.keys(St).forEach(function(m){Ht.forEach(function(_){_=_+m.charAt(0).toUpperCase()+m.substring(1),St[_]=St[m]})});function sn(m,_,D){return _==null||typeof _=="boolean"||_===""?"":D||typeof _!="number"||_===0||St.hasOwnProperty(m)&&St[m]?(""+_).trim():_+"px"}function nr(m,_){m=m.style;for(var D in _)if(_.hasOwnProperty(D)){var Q=D.indexOf("--")===0,ue=sn(D,_[D],Q);D==="float"&&(D="cssFloat"),Q?m.setProperty(D,ue):m[D]=ue}}var $e=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ae(m,_){if(_){if($e[m]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(t(137,m));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(t(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(t(61))}if(_.style!=null&&typeof _.style!="object")throw Error(t(62))}}function Ce(m,_){if(m.indexOf("-")===-1)return typeof _.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var f=null;function je(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var qe=null,Je=null,ut=null;function dt(m){if(m=Ti(m)){if(typeof qe!="function")throw Error(t(280));var _=m.stateNode;_&&(_=Go(_),qe(m.stateNode,m.type,_))}}function Qt(m){Je?ut?ut.push(m):ut=[m]:Je=m}function Wt(){if(Je){var m=Je,_=ut;if(ut=Je=null,dt(m),_)for(m=0;m<_.length;m++)dt(_[m])}}function jt(m,_){return m(_)}function tn(){}var Dn=!1;function Fn(m,_,D){if(Dn)return m(_,D);Dn=!0;try{return jt(m,_,D)}finally{Dn=!1,(Je!==null||ut!==null)&&(tn(),Wt())}}function on(m,_){var D=m.stateNode;if(D===null)return null;var Q=Go(D);if(Q===null)return null;D=Q[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Q=!Q.disabled)||(m=m.type,Q=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!Q;break e;default:m=!1}if(m)return null;if(D&&typeof D!="function")throw Error(t(231,_,typeof D));return D}var Sr=!1;if(o)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){Sr=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch{Sr=!1}function xr(m,_,D,Q,ue,ge,nt,Ot,Nt){var Mn=Array.prototype.slice.call(arguments,3);try{_.apply(D,Mn)}catch(ur){this.onError(ur)}}var qr=!1,Bn=null,$n=!1,Yn=null,Qr={onError:function(m){qr=!0,Bn=m}};function co(m,_,D,Q,ue,ge,nt,Ot,Nt){qr=!1,Bn=null,xr.apply(Qr,arguments)}function ma(m,_,D,Q,ue,ge,nt,Ot,Nt){if(co.apply(this,arguments),qr){if(qr){var Mn=Bn;qr=!1,Bn=null}else throw Error(t(198));$n||($n=!0,Yn=Mn)}}function Mr(m){var _=m,D=m;if(m.alternate)for(;_.return;)_=_.return;else{m=_;do _=m,(_.flags&4098)!==0&&(D=_.return),m=_.return;while(m)}return _.tag===3?D:null}function wi(m){if(m.tag===13){var _=m.memoizedState;if(_===null&&(m=m.alternate,m!==null&&(_=m.memoizedState)),_!==null)return _.dehydrated}return null}function Zi(m){if(Mr(m)!==m)throw Error(t(188))}function Ts(m){var _=m.alternate;if(!_){if(_=Mr(m),_===null)throw Error(t(188));return _!==m?null:m}for(var D=m,Q=_;;){var ue=D.return;if(ue===null)break;var ge=ue.alternate;if(ge===null){if(Q=ue.return,Q!==null){D=Q;continue}break}if(ue.child===ge.child){for(ge=ue.child;ge;){if(ge===D)return Zi(ue),m;if(ge===Q)return Zi(ue),_;ge=ge.sibling}throw Error(t(188))}if(D.return!==Q.return)D=ue,Q=ge;else{for(var nt=!1,Ot=ue.child;Ot;){if(Ot===D){nt=!0,D=ue,Q=ge;break}if(Ot===Q){nt=!0,Q=ue,D=ge;break}Ot=Ot.sibling}if(!nt){for(Ot=ge.child;Ot;){if(Ot===D){nt=!0,D=ge,Q=ue;break}if(Ot===Q){nt=!0,Q=ge,D=ue;break}Ot=Ot.sibling}if(!nt)throw Error(t(189))}}if(D.alternate!==Q)throw Error(t(190))}if(D.tag!==3)throw Error(t(188));return D.stateNode.current===D?m:_}function xs(m){return m=Ts(m),m!==null?aa(m):null}function aa(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var _=aa(m);if(_!==null)return _;m=m.sibling}return null}var ps=e.unstable_scheduleCallback,bi=e.unstable_cancelCallback,Il=e.unstable_shouldYield,kl=e.unstable_requestPaint,io=e.unstable_now,vl=e.unstable_getCurrentPriorityLevel,ol=e.unstable_ImmediatePriority,bo=e.unstable_UserBlockingPriority,Kr=e.unstable_NormalPriority,Wa=e.unstable_LowPriority,Vo=e.unstable_IdlePriority,Gs=null,Ye=null;function xt(m){if(Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Gs,m,void 0,(m.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:lr,Zn=Math.log,dn=Math.LN2;function lr(m){return m>>>=0,m===0?32:31-(Zn(m)/dn|0)|0}var Pi=64,xo=4194304;function as(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function la(m,_){var D=m.pendingLanes;if(D===0)return 0;var Q=0,ue=m.suspendedLanes,ge=m.pingedLanes,nt=D&268435455;if(nt!==0){var Ot=nt&~ue;Ot!==0?Q=as(Ot):(ge&=nt,ge!==0&&(Q=as(ge)))}else nt=D&~ue,nt!==0?Q=as(nt):ge!==0&&(Q=as(ge));if(Q===0)return 0;if(_!==0&&_!==Q&&(_&ue)===0&&(ue=Q&-Q,ge=_&-_,ue>=ge||ue===16&&(ge&4194240)!==0))return _;if((Q&4)!==0&&(Q|=D&16),_=m.entangledLanes,_!==0)for(m=m.entanglements,_&=Q;0<_;)D=31-yn(_),ue=1<<D,Q|=m[D],_&=~ue;return Q}function Wu(m,_){switch(m){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ei(m,_){for(var D=m.suspendedLanes,Q=m.pingedLanes,ue=m.expirationTimes,ge=m.pendingLanes;0<ge;){var nt=31-yn(ge),Ot=1<<nt,Nt=ue[nt];Nt===-1?((Ot&D)===0||(Ot&Q)!==0)&&(ue[nt]=Wu(Ot,_)):Nt<=_&&(m.expiredLanes|=Ot),ge&=~Ot}}function ki(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function zl(){var m=Pi;return Pi<<=1,(Pi&4194240)===0&&(Pi=64),m}function na(m){for(var _=[],D=0;31>D;D++)_.push(m);return _}function Ms(m,_,D){m.pendingLanes|=_,_!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,_=31-yn(_),m[_]=D}function Mu(m,_){var D=m.pendingLanes&~_;m.pendingLanes=_,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=_,m.mutableReadLanes&=_,m.entangledLanes&=_,_=m.entanglements;var Q=m.eventTimes;for(m=m.expirationTimes;0<D;){var ue=31-yn(D),ge=1<<ue;_[ue]=0,Q[ue]=-1,m[ue]=-1,D&=~ge}}function Si(m,_){var D=m.entangledLanes|=_;for(m=m.entanglements;D;){var Q=31-yn(D),ue=1<<Q;ue&_|m[Q]&_&&(m[Q]|=_),D&=~ue}}var ti=0;function ls(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var ka,Us,ho,Do,Gu,Qs=!1,ra=[],No=null,Fo=null,es=null,Mo=new Map,ga=new Map,zs=[],Ga="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ta(m,_){switch(m){case"focusin":case"focusout":No=null;break;case"dragenter":case"dragleave":Fo=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Mo.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":ga.delete(_.pointerId)}}function ao(m,_,D,Q,ue,ge){return m===null||m.nativeEvent!==ge?(m={blockedOn:_,domEventName:D,eventSystemFlags:Q,nativeEvent:ge,targetContainers:[ue]},_!==null&&(_=Ti(_),_!==null&&Us(_)),m):(m.eventSystemFlags|=Q,_=m.targetContainers,ue!==null&&_.indexOf(ue)===-1&&_.push(ue),m)}function sl(m,_,D,Q,ue){switch(_){case"focusin":return No=ao(No,m,_,D,Q,ue),!0;case"dragenter":return Fo=ao(Fo,m,_,D,Q,ue),!0;case"mouseover":return es=ao(es,m,_,D,Q,ue),!0;case"pointerover":var ge=ue.pointerId;return Mo.set(ge,ao(Mo.get(ge)||null,m,_,D,Q,ue)),!0;case"gotpointercapture":return ge=ue.pointerId,ga.set(ge,ao(ga.get(ge)||null,m,_,D,Q,ue)),!0}return!1}function Hi(m){var _=Ss(m.target);if(_!==null){var D=Mr(_);if(D!==null){if(_=D.tag,_===13){if(_=wi(D),_!==null){m.blockedOn=_,Gu(m.priority,function(){ho(D)});return}}else if(_===3&&D.stateNode.current.memoizedState.isDehydrated){m.blockedOn=D.tag===3?D.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Hr(m){if(m.blockedOn!==null)return!1;for(var _=m.targetContainers;0<_.length;){var D=Zr(m.domEventName,m.eventSystemFlags,_[0],m.nativeEvent);if(D===null){D=m.nativeEvent;var Q=new D.constructor(D.type,D);f=Q,D.target.dispatchEvent(Q),f=null}else return _=Ti(D),_!==null&&Us(_),m.blockedOn=D,!1;_.shift()}return!0}function jl(m,_,D){Hr(m)&&D.delete(_)}function Wi(){Qs=!1,No!==null&&Hr(No)&&(No=null),Fo!==null&&Hr(Fo)&&(Fo=null),es!==null&&Hr(es)&&(es=null),Mo.forEach(jl),ga.forEach(jl)}function oo(m,_){m.blockedOn===_&&(m.blockedOn=null,Qs||(Qs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Wi)))}function Ki(m){function _(ue){return oo(ue,m)}if(0<ra.length){oo(ra[0],m);for(var D=1;D<ra.length;D++){var Q=ra[D];Q.blockedOn===m&&(Q.blockedOn=null)}}for(No!==null&&oo(No,m),Fo!==null&&oo(Fo,m),es!==null&&oo(es,m),Mo.forEach(_),ga.forEach(_),D=0;D<zs.length;D++)Q=zs[D],Q.blockedOn===m&&(Q.blockedOn=null);for(;0<zs.length&&(D=zs[0],D.blockedOn===null);)Hi(D),D.blockedOn===null&&zs.shift()}var ee=te.ReactCurrentBatchConfig,Oe=!0;function st(m,_,D,Q){var ue=ti,ge=ee.transition;ee.transition=null;try{ti=1,Ir(m,_,D,Q)}finally{ti=ue,ee.transition=ge}}function $t(m,_,D,Q){var ue=ti,ge=ee.transition;ee.transition=null;try{ti=4,Ir(m,_,D,Q)}finally{ti=ue,ee.transition=ge}}function Ir(m,_,D,Q){if(Oe){var ue=Zr(m,_,D,Q);if(ue===null)Xd(m,_,Q,Vn,D),Ta(m,Q);else if(sl(ue,m,_,D,Q))Q.stopPropagation();else if(Ta(m,Q),_&4&&-1<Ga.indexOf(m)){for(;ue!==null;){var ge=Ti(ue);if(ge!==null&&ka(ge),ge=Zr(m,_,D,Q),ge===null&&Xd(m,_,Q,Vn,D),ge===ue)break;ue=ge}ue!==null&&Q.stopPropagation()}else Xd(m,_,Q,null,D)}}var Vn=null;function Zr(m,_,D,Q){if(Vn=null,m=je(Q),m=Ss(m),m!==null)if(_=Mr(m),_===null)m=null;else if(D=_.tag,D===13){if(m=wi(_),m!==null)return m;m=null}else if(D===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;m=null}else _!==m&&(m=null);return Vn=m,null}function di(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vl()){case ol:return 1;case bo:return 4;case Kr:case Wa:return 16;case Vo:return 536870912;default:return 16}default:return 16}}var Br=null,Rr=null,Vi=null;function Wo(){if(Vi)return Vi;var m,_=Rr,D=_.length,Q,ue="value"in Br?Br.value:Br.textContent,ge=ue.length;for(m=0;m<D&&_[m]===ue[m];m++);var nt=D-m;for(Q=1;Q<=nt&&_[D-Q]===ue[ge-Q];Q++);return Vi=ue.slice(m,1<Q?1-Q:void 0)}function si(m){var _=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&_===13&&(m=13)):m=_,m===10&&(m=13),32<=m||m===13?m:0}function zr(){return!0}function Ui(){return!1}function Gi(m){function _(D,Q,ue,ge,nt){this._reactName=D,this._targetInst=ue,this.type=Q,this.nativeEvent=ge,this.target=nt,this.currentTarget=null;for(var Ot in m)m.hasOwnProperty(Ot)&&(D=m[Ot],this[Ot]=D?D(ge):ge[Ot]);return this.isDefaultPrevented=(ge.defaultPrevented!=null?ge.defaultPrevented:ge.returnValue===!1)?zr:Ui,this.isPropagationStopped=Ui,this}return Se(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var D=this.nativeEvent;D&&(D.preventDefault?D.preventDefault():typeof D.returnValue!="unknown"&&(D.returnValue=!1),this.isDefaultPrevented=zr)},stopPropagation:function(){var D=this.nativeEvent;D&&(D.stopPropagation?D.stopPropagation():typeof D.cancelBubble!="unknown"&&(D.cancelBubble=!0),this.isPropagationStopped=zr)},persist:function(){},isPersistent:zr}),_}var $o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Gi($o),Ys=Se({},$o,{view:0,detail:0}),wu=Gi(Ys),qs,Yd,al,su=Se({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Df,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==al&&(al&&m.type==="mousemove"?(qs=m.screenX-al.screenX,Yd=m.screenY-al.screenY):Yd=qs=0,al=m),qs)},movementY:function(m){return"movementY"in m?m.movementY:Yd}}),vh=Gi(su),Su=Se({},su,{dataTransfer:0}),qd=Gi(Su),Yc=Se({},Ys,{relatedTarget:0}),ws=Gi(Yc),LA=Se({},$o,{animationName:0,elapsedTime:0,pseudoElement:0}),mA=Gi(LA),xp=Se({},$o,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),UA=Gi(xp),lc=Se({},$o,{data:0}),gd=Gi(lc),Mp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ms(m){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(m):(m=bc[m])?!!_[m]:!1}function Df(){return ms}var Zh=Se({},Ys,{key:function(m){if(m.key){var _=Mp[m.key]||m.key;if(_!=="Unidentified")return _}return m.type==="keypress"?(m=si(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Ch[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Df,charCode:function(m){return m.type==="keypress"?si(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?si(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Vd=Gi(Zh),Xh=Se({},su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qc=Gi(Xh),Jh=Se({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Df}),_h=Gi(Jh),bh=Se({},$o,{propertyName:0,elapsedTime:0,pseudoElement:0}),ef=Gi(bh),yd=Se({},su,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),$d=Gi(yd),au=[9,13,27,32],xc=o&&"CompositionEvent"in window,Qu=null;o&&"documentMode"in document&&(Qu=document.documentMode);var Eu=o&&"TextEvent"in window&&!Qu,vd=o&&(!xc||Qu&&8<Qu&&11>=Qu),tf=" ",nf=!1;function Yu(m,_){switch(m){case"keyup":return au.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uc(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Ac=!1;function Cd(m,_){switch(m){case"compositionend":return uc(_);case"keypress":return _.which!==32?null:(nf=!0,tf);case"textInput":return m=_.data,m===tf&&nf?null:m;default:return null}}function xh(m,_){if(Ac)return m==="compositionend"||!xc&&Yu(m,_)?(m=Wo(),Vi=Rr=Br=null,Ac=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return vd&&_.locale!=="ko"?null:_.data;default:return null}}var cc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _d(m){var _=m&&m.nodeName&&m.nodeName.toLowerCase();return _==="input"?!!cc[m.type]:_==="textarea"}function bd(m,_,D,Q){Qt(Q),_=Ic(_,"onChange"),0<_.length&&(D=new ua("onChange","change",null,D,Q),m.push({event:D,listeners:_}))}var ll=null,Cl=null;function ko(m){wd(m,0)}function zA(m){var _=ri(m);if(Ct(_))return m}function Ff(m,_){if(m==="change")return _}var xd=!1;if(o){var qu;if(o){var Mh="oninput"in document;if(!Mh){var Lf=document.createElement("div");Lf.setAttribute("oninput","return;"),Mh=typeof Lf.oninput=="function"}qu=Mh}else qu=!1;xd=qu&&(!document.documentMode||9<document.documentMode)}function Md(){ll&&(ll.detachEvent("onpropertychange",Uf),Cl=ll=null)}function Uf(m){if(m.propertyName==="value"&&zA(Cl)){var _=[];bd(_,Cl,m,je(m)),Fn(ko,_)}}function zf(m,_,D){m==="focusin"?(Md(),ll=_,Cl=D,ll.attachEvent("onpropertychange",Uf)):m==="focusout"&&Md()}function Hd(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return zA(Cl)}function gA(m,_){if(m==="click")return zA(_)}function en(m,_){if(m==="input"||m==="change")return zA(_)}function Tn(m,_){return m===_&&(m!==0||1/m===1/_)||m!==m&&_!==_}var un=typeof Object.is=="function"?Object.is:Tn;function Tr(m,_){if(un(m,_))return!0;if(typeof m!="object"||m===null||typeof _!="object"||_===null)return!1;var D=Object.keys(m),Q=Object.keys(_);if(D.length!==Q.length)return!1;for(Q=0;Q<D.length;Q++){var ue=D[Q];if(!p.call(_,ue)||!un(m[ue],_[ue]))return!1}return!0}function ci(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function To(m,_){var D=ci(m);m=0;for(var Q;D;){if(D.nodeType===3){if(Q=m+D.textContent.length,m<=_&&Q>=_)return{node:D,offset:_-m};m=Q}e:{for(;D;){if(D.nextSibling){D=D.nextSibling;break e}D=D.parentNode}D=void 0}D=ci(D)}}function ya(m,_){return m&&_?m===_?!0:m&&m.nodeType===3?!1:_&&_.nodeType===3?ya(m,_.parentNode):"contains"in m?m.contains(_):m.compareDocumentPosition?!!(m.compareDocumentPosition(_)&16):!1:!1}function ts(){for(var m=window,_=ft();_ instanceof m.HTMLIFrameElement;){try{var D=typeof _.contentWindow.location.href=="string"}catch{D=!1}if(D)m=_.contentWindow;else break;_=ft(m.document)}return _}function Vu(m){var _=m&&m.nodeName&&m.nodeName.toLowerCase();return _&&(_==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||_==="textarea"||m.contentEditable==="true")}function rf(m){var _=ts(),D=m.focusedElem,Q=m.selectionRange;if(_!==D&&D&&D.ownerDocument&&ya(D.ownerDocument.documentElement,D)){if(Q!==null&&Vu(D)){if(_=Q.start,m=Q.end,m===void 0&&(m=_),"selectionStart"in D)D.selectionStart=_,D.selectionEnd=Math.min(m,D.value.length);else if(m=(_=D.ownerDocument||document)&&_.defaultView||window,m.getSelection){m=m.getSelection();var ue=D.textContent.length,ge=Math.min(Q.start,ue);Q=Q.end===void 0?ge:Math.min(Q.end,ue),!m.extend&&ge>Q&&(ue=Q,Q=ge,ge=ue),ue=To(D,ge);var nt=To(D,Q);ue&&nt&&(m.rangeCount!==1||m.anchorNode!==ue.node||m.anchorOffset!==ue.offset||m.focusNode!==nt.node||m.focusOffset!==nt.offset)&&(_=_.createRange(),_.setStart(ue.node,ue.offset),m.removeAllRanges(),ge>Q?(m.addRange(_),m.extend(nt.node,nt.offset)):(_.setEnd(nt.node,nt.offset),m.addRange(_)))}}for(_=[],m=D;m=m.parentNode;)m.nodeType===1&&_.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<_.length;D++)m=_[D],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var lu=o&&"documentMode"in document&&11>=document.documentMode,$u=null,yA=null,Nl=null,Wl=!1;function vA(m,_,D){var Q=D.window===D?D.document:D.nodeType===9?D:D.ownerDocument;Wl||$u==null||$u!==ft(Q)||(Q=$u,"selectionStart"in Q&&Vu(Q)?Q={start:Q.selectionStart,end:Q.selectionEnd}:(Q=(Q.ownerDocument&&Q.ownerDocument.defaultView||window).getSelection(),Q={anchorNode:Q.anchorNode,anchorOffset:Q.anchorOffset,focusNode:Q.focusNode,focusOffset:Q.focusOffset}),Nl&&Tr(Nl,Q)||(Nl=Q,Q=Ic(yA,"onSelect"),0<Q.length&&(_=new ua("onSelect","select",null,_,D),m.push({event:_,listeners:Q}),_.target=$u)))}function Po(m,_){var D={};return D[m.toLowerCase()]=_.toLowerCase(),D["Webkit"+m]="webkit"+_,D["Moz"+m]="moz"+_,D}var Mc={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionend:Po("Transition","TransitionEnd")},lo={},Bu={};o&&(Bu=document.createElement("div").style,"AnimationEvent"in window||(delete Mc.animationend.animation,delete Mc.animationiteration.animation,delete Mc.animationstart.animation),"TransitionEvent"in window||delete Mc.transitionend.transition);function CA(m){if(lo[m])return lo[m];if(!Mc[m])return m;var _=Mc[m],D;for(D in _)if(_.hasOwnProperty(D)&&D in Bu)return lo[m]=_[D];return m}var Tl=CA("animationend"),Hu=CA("animationiteration"),_A=CA("animationstart"),Zu=CA("transitionend"),Zd=new Map,of="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qa(m,_){Zd.set(m,_),s(_,[m])}for(var wc=0;wc<of.length;wc++){var Sc=of[wc],Ec=Sc.toLowerCase(),sf=Sc[0].toUpperCase()+Sc.slice(1);Qa(Ec,"on"+sf)}Qa(Tl,"onAnimationEnd"),Qa(Hu,"onAnimationIteration"),Qa(_A,"onAnimationStart"),Qa("dblclick","onDoubleClick"),Qa("focusin","onFocus"),Qa("focusout","onBlur"),Qa(Zu,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jA=new Set("cancel close invalid load scroll toggle".split(" ").concat(bA));function NA(m,_,D){var Q=m.type||"unknown-event";m.currentTarget=D,ma(Q,_,void 0,m),m.currentTarget=null}function wd(m,_){_=(_&4)!==0;for(var D=0;D<m.length;D++){var Q=m[D],ue=Q.event;Q=Q.listeners;e:{var ge=void 0;if(_)for(var nt=Q.length-1;0<=nt;nt--){var Ot=Q[nt],Nt=Ot.instance,Mn=Ot.currentTarget;if(Ot=Ot.listener,Nt!==ge&&ue.isPropagationStopped())break e;NA(ue,Ot,Mn),ge=Nt}else for(nt=0;nt<Q.length;nt++){if(Ot=Q[nt],Nt=Ot.instance,Mn=Ot.currentTarget,Ot=Ot.listener,Nt!==ge&&ue.isPropagationStopped())break e;NA(ue,Ot,Mn),ge=Nt}}}if($n)throw m=Yn,$n=!1,Yn=null,m}function us(m,_){var D=_[wh];D===void 0&&(D=_[wh]=new Set);var Q=m+"__bubble";D.has(Q)||($c(_,m,2,!1),D.add(Q))}function Vc(m,_,D){var Q=0;_&&(Q|=4),$c(D,m,Q,_)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function Xu(m){if(!m[Bc]){m[Bc]=!0,r.forEach(function(D){D!=="selectionchange"&&(jA.has(D)||Vc(D,!1,m),Vc(D,!0,m))});var _=m.nodeType===9?m:m.ownerDocument;_===null||_[Bc]||(_[Bc]=!0,Vc("selectionchange",!1,_))}}function $c(m,_,D,Q){switch(di(_)){case 1:var ue=st;break;case 4:ue=$t;break;default:ue=Ir}D=ue.bind(null,_,D,m),ue=void 0,!Sr||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(ue=!0),Q?ue!==void 0?m.addEventListener(_,D,{capture:!0,passive:ue}):m.addEventListener(_,D,!0):ue!==void 0?m.addEventListener(_,D,{passive:ue}):m.addEventListener(_,D,!1)}function Xd(m,_,D,Q,ue){var ge=Q;if((_&1)===0&&(_&2)===0&&Q!==null)e:for(;;){if(Q===null)return;var nt=Q.tag;if(nt===3||nt===4){var Ot=Q.stateNode.containerInfo;if(Ot===ue||Ot.nodeType===8&&Ot.parentNode===ue)break;if(nt===4)for(nt=Q.return;nt!==null;){var Nt=nt.tag;if((Nt===3||Nt===4)&&(Nt=nt.stateNode.containerInfo,Nt===ue||Nt.nodeType===8&&Nt.parentNode===ue))return;nt=nt.return}for(;Ot!==null;){if(nt=Ss(Ot),nt===null)return;if(Nt=nt.tag,Nt===5||Nt===6){Q=ge=nt;continue e}Ot=Ot.parentNode}}Q=Q.return}Fn(function(){var Mn=ge,ur=je(D),mr=[];e:{var ir=Zd.get(m);if(ir!==void 0){var Yr=ua,ii=m;switch(m){case"keypress":if(si(D)===0)break e;case"keydown":case"keyup":Yr=Vd;break;case"focusin":ii="focus",Yr=ws;break;case"focusout":ii="blur",Yr=ws;break;case"beforeblur":case"afterblur":Yr=ws;break;case"click":if(D.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Yr=vh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Yr=qd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Yr=_h;break;case Tl:case Hu:case _A:Yr=mA;break;case Zu:Yr=ef;break;case"scroll":Yr=wu;break;case"wheel":Yr=$d;break;case"copy":case"cut":case"paste":Yr=UA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Yr=qc}var ai=(_&4)!==0,fl=!ai&&m==="scroll",cn=ai?ir!==null?ir+"Capture":null:ir;ai=[];for(var Jt=Mn,pn;Jt!==null;){pn=Jt;var vr=pn.stateNode;if(pn.tag===5&&vr!==null&&(pn=vr,cn!==null&&(vr=on(Jt,cn),vr!=null&&ai.push(Oc(Jt,vr,pn)))),fl)break;Jt=Jt.return}0<ai.length&&(ir=new Yr(ir,ii,null,D,ur),mr.push({event:ir,listeners:ai}))}}if((_&7)===0){e:{if(ir=m==="mouseover"||m==="pointerover",Yr=m==="mouseout"||m==="pointerout",ir&&D!==f&&(ii=D.relatedTarget||D.fromElement)&&(Ss(ii)||ii[Iu]))break e;if((Yr||ir)&&(ir=ur.window===ur?ur:(ir=ur.ownerDocument)?ir.defaultView||ir.parentWindow:window,Yr?(ii=D.relatedTarget||D.toElement,Yr=Mn,ii=ii?Ss(ii):null,ii!==null&&(fl=Mr(ii),ii!==fl||ii.tag!==5&&ii.tag!==6)&&(ii=null)):(Yr=null,ii=Mn),Yr!==ii)){if(ai=vh,vr="onMouseLeave",cn="onMouseEnter",Jt="mouse",(m==="pointerout"||m==="pointerover")&&(ai=qc,vr="onPointerLeave",cn="onPointerEnter",Jt="pointer"),fl=Yr==null?ir:ri(Yr),pn=ii==null?ir:ri(ii),ir=new ai(vr,Jt+"leave",Yr,D,ur),ir.target=fl,ir.relatedTarget=pn,vr=null,Ss(ur)===Mn&&(ai=new ai(cn,Jt+"enter",ii,D,ur),ai.target=pn,ai.relatedTarget=fl,vr=ai),fl=vr,Yr&&ii)t:{for(ai=Yr,cn=ii,Jt=0,pn=ai;pn;pn=Ju(pn))Jt++;for(pn=0,vr=cn;vr;vr=Ju(vr))pn++;for(;0<Jt-pn;)ai=Ju(ai),Jt--;for(;0<pn-Jt;)cn=Ju(cn),pn--;for(;Jt--;){if(ai===cn||cn!==null&&ai===cn.alternate)break t;ai=Ju(ai),cn=Ju(cn)}ai=null}else ai=null;Yr!==null&&As(mr,ir,Yr,ai,!1),ii!==null&&fl!==null&&As(mr,fl,ii,ai,!0)}}e:{if(ir=Mn?ri(Mn):window,Yr=ir.nodeName&&ir.nodeName.toLowerCase(),Yr==="select"||Yr==="input"&&ir.type==="file")var li=Ff;else if(_d(ir))if(xd)li=en;else{li=Hd;var Ii=zf}else(Yr=ir.nodeName)&&Yr.toLowerCase()==="input"&&(ir.type==="checkbox"||ir.type==="radio")&&(li=gA);if(li&&(li=li(m,Mn))){bd(mr,li,D,ur);break e}Ii&&Ii(m,ir,Mn),m==="focusout"&&(Ii=ir._wrapperState)&&Ii.controlled&&ir.type==="number"&&rn(ir,"number",ir.value)}switch(Ii=Mn?ri(Mn):window,m){case"focusin":(_d(Ii)||Ii.contentEditable==="true")&&($u=Ii,yA=Mn,Nl=null);break;case"focusout":Nl=yA=$u=null;break;case"mousedown":Wl=!0;break;case"contextmenu":case"mouseup":case"dragend":Wl=!1,vA(mr,D,ur);break;case"selectionchange":if(lu)break;case"keydown":case"keyup":vA(mr,D,ur)}var yi;if(xc)e:{switch(m){case"compositionstart":var ji="onCompositionStart";break e;case"compositionend":ji="onCompositionEnd";break e;case"compositionupdate":ji="onCompositionUpdate";break e}ji=void 0}else Ac?Yu(m,D)&&(ji="onCompositionEnd"):m==="keydown"&&D.keyCode===229&&(ji="onCompositionStart");ji&&(vd&&D.locale!=="ko"&&(Ac||ji!=="onCompositionStart"?ji==="onCompositionEnd"&&Ac&&(yi=Wo()):(Br=ur,Rr="value"in Br?Br.value:Br.textContent,Ac=!0)),Ii=Ic(Mn,ji),0<Ii.length&&(ji=new gd(ji,m,null,D,ur),mr.push({event:ji,listeners:Ii}),yi?ji.data=yi:(yi=uc(D),yi!==null&&(ji.data=yi)))),(yi=Eu?Cd(m,D):xh(m,D))&&(Mn=Ic(Mn,"onBeforeInput"),0<Mn.length&&(ur=new gd("onBeforeInput","beforeinput",null,D,ur),mr.push({event:ur,listeners:Mn}),ur.data=yi))}wd(mr,_)})}function Oc(m,_,D){return{instance:m,listener:_,currentTarget:D}}function Ic(m,_){for(var D=_+"Capture",Q=[];m!==null;){var ue=m,ge=ue.stateNode;ue.tag===5&&ge!==null&&(ue=ge,ge=on(m,D),ge!=null&&Q.unshift(Oc(m,ge,ue)),ge=on(m,_),ge!=null&&Q.push(Oc(m,ge,ue))),m=m.return}return Q}function Ju(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function As(m,_,D,Q,ue){for(var ge=_._reactName,nt=[];D!==null&&D!==Q;){var Ot=D,Nt=Ot.alternate,Mn=Ot.stateNode;if(Nt!==null&&Nt===Q)break;Ot.tag===5&&Mn!==null&&(Ot=Mn,ue?(Nt=on(D,ge),Nt!=null&&nt.unshift(Oc(D,Nt,Ot))):ue||(Nt=on(D,ge),Nt!=null&&nt.push(Oc(D,Nt,Ot)))),D=D.return}nt.length!==0&&m.push({event:_,listeners:nt})}var Ya=/\r\n?/g,wp=/\u0000|\uFFFD/g;function js(m){return(typeof m=="string"?m:""+m).replace(Ya,`
`).replace(wp,"")}function xA(m,_,D){if(_=js(_),js(m)!==_&&D)throw Error(t(425))}function ul(){}var Hc=null,Gl=null;function WA(m,_){return m==="textarea"||m==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var va=typeof setTimeout=="function"?setTimeout:void 0,eA=typeof clearTimeout=="function"?clearTimeout:void 0,Ou=typeof Promise=="function"?Promise:void 0,Sd=typeof queueMicrotask=="function"?queueMicrotask:typeof Ou<"u"?function(m){return Ou.resolve(null).then(m).catch(Zc)}:va;function Zc(m){setTimeout(function(){throw m})}function Jd(m,_){var D=_,Q=0;do{var ue=D.nextSibling;if(m.removeChild(D),ue&&ue.nodeType===8)if(D=ue.data,D==="/$"){if(Q===0){m.removeChild(ue),Ki(_);return}Q--}else D!=="$"&&D!=="$?"&&D!=="$!"||Q++;D=ue}while(D);Ki(_)}function dc(m){for(;m!=null;m=m.nextSibling){var _=m.nodeType;if(_===1||_===3)break;if(_===8){if(_=m.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return m}function tA(m){m=m.previousSibling;for(var _=0;m;){if(m.nodeType===8){var D=m.data;if(D==="$"||D==="$!"||D==="$?"){if(_===0)return m;_--}else D==="/$"&&_++}m=m.previousSibling}return null}var _l=Math.random().toString(36).slice(2),GA="__reactFiber$"+_l,kc="__reactProps$"+_l,Iu="__reactContainer$"+_l,wh="__reactEvents$"+_l,ot="__reactListeners$"+_l,QA="__reactHandles$"+_l;function Ss(m){var _=m[GA];if(_)return _;for(var D=m.parentNode;D;){if(_=D[Iu]||D[GA]){if(D=_.alternate,_.child!==null||D!==null&&D.child!==null)for(m=tA(m);m!==null;){if(D=m[GA])return D;m=tA(m)}return _}m=D,D=m.parentNode}return null}function Ti(m){return m=m[GA]||m[Iu],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function ri(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(t(33))}function Go(m){return m[kc]||null}var Ql=[],Ed=-1;function cs(m){return{current:m}}function ns(m){0>Ed||(m.current=Ql[Ed],Ql[Ed]=null,Ed--)}function Es(m,_){Ed++,Ql[Ed]=m.current,m.current=_}var Xc={},qa=cs(Xc),uu=cs(!1),Ca=Xc;function hc(m,_){var D=m.type.contextTypes;if(!D)return Xc;var Q=m.stateNode;if(Q&&Q.__reactInternalMemoizedUnmaskedChildContext===_)return Q.__reactInternalMemoizedMaskedChildContext;var ue={},ge;for(ge in D)ue[ge]=_[ge];return Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=_,m.__reactInternalMemoizedMaskedChildContext=ue),ue}function Bs(m){return m=m.childContextTypes,m!=null}function wr(){ns(uu),ns(qa)}function af(m,_,D){if(qa.current!==Xc)throw Error(t(168));Es(qa,_),Es(uu,D)}function Jc(m,_,D){var Q=m.stateNode;if(_=_.childContextTypes,typeof Q.getChildContext!="function")return D;Q=Q.getChildContext();for(var ue in Q)if(!(ue in _))throw Error(t(108,Tt(m)||"Unknown",ue));return Se({},D,Q)}function Au(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Xc,Ca=qa.current,Es(qa,m),Es(uu,uu.current),!0}function Tc(m,_,D){var Q=m.stateNode;if(!Q)throw Error(t(169));D?(m=Jc(m,_,Ca),Q.__reactInternalMemoizedMergedChildContext=m,ns(uu),ns(qa),Es(qa,m)):ns(uu),Es(uu,D)}var Va=null,eh=!1,Qi=!1;function nA(m){Va===null?Va=[m]:Va.push(m)}function Pc(m){eh=!0,nA(m)}function MA(){if(!Qi&&Va!==null){Qi=!0;var m=0,_=ti;try{var D=Va;for(ti=1;m<D.length;m++){var Q=D[m];do Q=Q(!0);while(Q!==null)}Va=null,eh=!1}catch(ue){throw Va!==null&&(Va=Va.slice(m+1)),ps(ol,MA),ue}finally{ti=_,Qi=!1}}return null}var ed=[],Os=0,wo=null,Yl=0,Pa=[],$a=0,fc=null,wA=1,YA="";function cu(m,_){ed[Os++]=Yl,ed[Os++]=wo,wo=m,Yl=_}function gs(m,_,D){Pa[$a++]=wA,Pa[$a++]=YA,Pa[$a++]=fc,fc=m;var Q=wA;m=YA;var ue=32-yn(Q)-1;Q&=~(1<<ue),D+=1;var ge=32-yn(_)+ue;if(30<ge){var nt=ue-ue%5;ge=(Q&(1<<nt)-1).toString(32),Q>>=nt,ue-=nt,wA=1<<32-yn(_)+ue|D<<ue|Q,YA=ge+m}else wA=1<<ge|D<<ue|Q,YA=m}function rA(m){m.return!==null&&(cu(m,1),gs(m,1,0))}function qA(m){for(;m===wo;)wo=ed[--Os],ed[Os]=null,Yl=ed[--Os],ed[Os]=null;for(;m===fc;)fc=Pa[--$a],Pa[$a]=null,YA=Pa[--$a],Pa[$a]=null,wA=Pa[--$a],Pa[$a]=null}var _a=null,Ka=null,ys=!1,SA=null;function Al(m,_){var D=Lc(5,null,null,0);D.elementType="DELETED",D.stateNode=_,D.return=m,_=m.deletions,_===null?(m.deletions=[D],m.flags|=16):_.push(D)}function VA(m,_){switch(m.tag){case 5:var D=m.type;return _=_.nodeType!==1||D.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(m.stateNode=_,_a=m,Ka=dc(_.firstChild),!0):!1;case 6:return _=m.pendingProps===""||_.nodeType!==3?null:_,_!==null?(m.stateNode=_,_a=m,Ka=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(D=fc!==null?{id:wA,overflow:YA}:null,m.memoizedState={dehydrated:_,treeContext:D,retryLane:1073741824},D=Lc(18,null,null,0),D.stateNode=_,D.return=m,m.child=D,_a=m,Ka=null,!0):!1;default:return!1}}function Dr(m){return(m.mode&1)!==0&&(m.flags&128)===0}function Lr(m){if(ys){var _=Ka;if(_){var D=_;if(!VA(m,_)){if(Dr(m))throw Error(t(418));_=dc(D.nextSibling);var Q=_a;_&&VA(m,_)?Al(Q,D):(m.flags=m.flags&-4097|2,ys=!1,_a=m)}}else{if(Dr(m))throw Error(t(418));m.flags=m.flags&-4097|2,ys=!1,_a=m}}}function Sh(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;_a=m}function td(m){if(m!==_a)return!1;if(!ys)return Sh(m),ys=!0,!1;var _;if((_=m.tag!==3)&&!(_=m.tag!==5)&&(_=m.type,_=_!=="head"&&_!=="body"&&!WA(m.type,m.memoizedProps)),_&&(_=Ka)){if(Dr(m))throw Eh(),Error(t(418));for(;_;)Al(m,_),_=dc(_.nextSibling)}if(Sh(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));e:{for(m=m.nextSibling,_=0;m;){if(m.nodeType===8){var D=m.data;if(D==="/$"){if(_===0){Ka=dc(m.nextSibling);break e}_--}else D!=="$"&&D!=="$!"&&D!=="$?"||_++}m=m.nextSibling}Ka=null}}else Ka=_a?dc(m.stateNode.nextSibling):null;return!0}function Eh(){for(var m=Ka;m;)m=dc(m.nextSibling)}function Aa(){Ka=_a=null,ys=!1}function ku(m){SA===null?SA=[m]:SA.push(m)}var Pl=te.ReactCurrentBatchConfig;function Bh(m,_,D){if(m=D.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(D._owner){if(D=D._owner,D){if(D.tag!==1)throw Error(t(309));var Q=D.stateNode}if(!Q)throw Error(t(147,m));var ue=Q,ge=""+m;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===ge?_.ref:(_=function(nt){var Ot=ue.refs;nt===null?delete Ot[ge]:Ot[ge]=nt},_._stringRef=ge,_)}if(typeof m!="string")throw Error(t(284));if(!D._owner)throw Error(t(290,m))}return m}function $A(m,_){throw m=Object.prototype.toString.call(_),Error(t(31,m==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":m))}function Vs(m){var _=m._init;return _(m._payload)}function vs(m){function _(cn,Jt){if(m){var pn=cn.deletions;pn===null?(cn.deletions=[Jt],cn.flags|=16):pn.push(Jt)}}function D(cn,Jt){if(!m)return null;for(;Jt!==null;)_(cn,Jt),Jt=Jt.sibling;return null}function Q(cn,Jt){for(cn=new Map;Jt!==null;)Jt.key!==null?cn.set(Jt.key,Jt):cn.set(Jt.index,Jt),Jt=Jt.sibling;return cn}function ue(cn,Jt){return cn=ec(cn,Jt),cn.index=0,cn.sibling=null,cn}function ge(cn,Jt,pn){return cn.index=pn,m?(pn=cn.alternate,pn!==null?(pn=pn.index,pn<Jt?(cn.flags|=2,Jt):pn):(cn.flags|=2,Jt)):(cn.flags|=1048576,Jt)}function nt(cn){return m&&cn.alternate===null&&(cn.flags|=2),cn}function Ot(cn,Jt,pn,vr){return Jt===null||Jt.tag!==6?(Jt=q0(pn,cn.mode,vr),Jt.return=cn,Jt):(Jt=ue(Jt,pn),Jt.return=cn,Jt)}function Nt(cn,Jt,pn,vr){var li=pn.type;return li===W?ur(cn,Jt,pn.props.children,vr,pn.key):Jt!==null&&(Jt.elementType===li||typeof li=="object"&&li!==null&&li.$$typeof===At&&Vs(li)===Jt.type)?(vr=ue(Jt,pn.props),vr.ref=Bh(cn,Jt,pn),vr.return=cn,vr):(vr=Rh(pn.type,pn.key,pn.props,null,cn.mode,vr),vr.ref=Bh(cn,Jt,pn),vr.return=cn,vr)}function Mn(cn,Jt,pn,vr){return Jt===null||Jt.tag!==4||Jt.stateNode.containerInfo!==pn.containerInfo||Jt.stateNode.implementation!==pn.implementation?(Jt=V0(pn,cn.mode,vr),Jt.return=cn,Jt):(Jt=ue(Jt,pn.children||[]),Jt.return=cn,Jt)}function ur(cn,Jt,pn,vr,li){return Jt===null||Jt.tag!==7?(Jt=sh(pn,cn.mode,vr,li),Jt.return=cn,Jt):(Jt=ue(Jt,pn),Jt.return=cn,Jt)}function mr(cn,Jt,pn){if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number")return Jt=q0(""+Jt,cn.mode,pn),Jt.return=cn,Jt;if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case V:return pn=Rh(Jt.type,Jt.key,Jt.props,null,cn.mode,pn),pn.ref=Bh(cn,null,Jt),pn.return=cn,pn;case ne:return Jt=V0(Jt,cn.mode,pn),Jt.return=cn,Jt;case At:var vr=Jt._init;return mr(cn,vr(Jt._payload),pn)}if(ar(Jt)||Ne(Jt))return Jt=sh(Jt,cn.mode,pn,null),Jt.return=cn,Jt;$A(cn,Jt)}return null}function ir(cn,Jt,pn,vr){var li=Jt!==null?Jt.key:null;if(typeof pn=="string"&&pn!==""||typeof pn=="number")return li!==null?null:Ot(cn,Jt,""+pn,vr);if(typeof pn=="object"&&pn!==null){switch(pn.$$typeof){case V:return pn.key===li?Nt(cn,Jt,pn,vr):null;case ne:return pn.key===li?Mn(cn,Jt,pn,vr):null;case At:return li=pn._init,ir(cn,Jt,li(pn._payload),vr)}if(ar(pn)||Ne(pn))return li!==null?null:ur(cn,Jt,pn,vr,null);$A(cn,pn)}return null}function Yr(cn,Jt,pn,vr,li){if(typeof vr=="string"&&vr!==""||typeof vr=="number")return cn=cn.get(pn)||null,Ot(Jt,cn,""+vr,li);if(typeof vr=="object"&&vr!==null){switch(vr.$$typeof){case V:return cn=cn.get(vr.key===null?pn:vr.key)||null,Nt(Jt,cn,vr,li);case ne:return cn=cn.get(vr.key===null?pn:vr.key)||null,Mn(Jt,cn,vr,li);case At:var Ii=vr._init;return Yr(cn,Jt,pn,Ii(vr._payload),li)}if(ar(vr)||Ne(vr))return cn=cn.get(pn)||null,ur(Jt,cn,vr,li,null);$A(Jt,vr)}return null}function ii(cn,Jt,pn,vr){for(var li=null,Ii=null,yi=Jt,ji=Jt=0,tu=null;yi!==null&&ji<pn.length;ji++){yi.index>ji?(tu=yi,yi=null):tu=yi.sibling;var _s=ir(cn,yi,pn[ji],vr);if(_s===null){yi===null&&(yi=tu);break}m&&yi&&_s.alternate===null&&_(cn,yi),Jt=ge(_s,Jt,ji),Ii===null?li=_s:Ii.sibling=_s,Ii=_s,yi=tu}if(ji===pn.length)return D(cn,yi),ys&&cu(cn,ji),li;if(yi===null){for(;ji<pn.length;ji++)yi=mr(cn,pn[ji],vr),yi!==null&&(Jt=ge(yi,Jt,ji),Ii===null?li=yi:Ii.sibling=yi,Ii=yi);return ys&&cu(cn,ji),li}for(yi=Q(cn,yi);ji<pn.length;ji++)tu=Yr(yi,cn,ji,pn[ji],vr),tu!==null&&(m&&tu.alternate!==null&&yi.delete(tu.key===null?ji:tu.key),Jt=ge(tu,Jt,ji),Ii===null?li=tu:Ii.sibling=tu,Ii=tu);return m&&yi.forEach(function(Dh){return _(cn,Dh)}),ys&&cu(cn,ji),li}function ai(cn,Jt,pn,vr){var li=Ne(pn);if(typeof li!="function")throw Error(t(150));if(pn=li.call(pn),pn==null)throw Error(t(151));for(var Ii=li=null,yi=Jt,ji=Jt=0,tu=null,_s=pn.next();yi!==null&&!_s.done;ji++,_s=pn.next()){yi.index>ji?(tu=yi,yi=null):tu=yi.sibling;var Dh=ir(cn,yi,_s.value,vr);if(Dh===null){yi===null&&(yi=tu);break}m&&yi&&Dh.alternate===null&&_(cn,yi),Jt=ge(Dh,Jt,ji),Ii===null?li=Dh:Ii.sibling=Dh,Ii=Dh,yi=tu}if(_s.done)return D(cn,yi),ys&&cu(cn,ji),li;if(yi===null){for(;!_s.done;ji++,_s=pn.next())_s=mr(cn,_s.value,vr),_s!==null&&(Jt=ge(_s,Jt,ji),Ii===null?li=_s:Ii.sibling=_s,Ii=_s);return ys&&cu(cn,ji),li}for(yi=Q(cn,yi);!_s.done;ji++,_s=pn.next())_s=Yr(yi,cn,ji,_s.value,vr),_s!==null&&(m&&_s.alternate!==null&&yi.delete(_s.key===null?ji:_s.key),Jt=ge(_s,Jt,ji),Ii===null?li=_s:Ii.sibling=_s,Ii=_s);return m&&yi.forEach(function(r1){return _(cn,r1)}),ys&&cu(cn,ji),li}function fl(cn,Jt,pn,vr){if(typeof pn=="object"&&pn!==null&&pn.type===W&&pn.key===null&&(pn=pn.props.children),typeof pn=="object"&&pn!==null){switch(pn.$$typeof){case V:e:{for(var li=pn.key,Ii=Jt;Ii!==null;){if(Ii.key===li){if(li=pn.type,li===W){if(Ii.tag===7){D(cn,Ii.sibling),Jt=ue(Ii,pn.props.children),Jt.return=cn,cn=Jt;break e}}else if(Ii.elementType===li||typeof li=="object"&&li!==null&&li.$$typeof===At&&Vs(li)===Ii.type){D(cn,Ii.sibling),Jt=ue(Ii,pn.props),Jt.ref=Bh(cn,Ii,pn),Jt.return=cn,cn=Jt;break e}D(cn,Ii);break}else _(cn,Ii);Ii=Ii.sibling}pn.type===W?(Jt=sh(pn.props.children,cn.mode,vr,pn.key),Jt.return=cn,cn=Jt):(vr=Rh(pn.type,pn.key,pn.props,null,cn.mode,vr),vr.ref=Bh(cn,Jt,pn),vr.return=cn,cn=vr)}return nt(cn);case ne:e:{for(Ii=pn.key;Jt!==null;){if(Jt.key===Ii)if(Jt.tag===4&&Jt.stateNode.containerInfo===pn.containerInfo&&Jt.stateNode.implementation===pn.implementation){D(cn,Jt.sibling),Jt=ue(Jt,pn.children||[]),Jt.return=cn,cn=Jt;break e}else{D(cn,Jt);break}else _(cn,Jt);Jt=Jt.sibling}Jt=V0(pn,cn.mode,vr),Jt.return=cn,cn=Jt}return nt(cn);case At:return Ii=pn._init,fl(cn,Jt,Ii(pn._payload),vr)}if(ar(pn))return ii(cn,Jt,pn,vr);if(Ne(pn))return ai(cn,Jt,pn,vr);$A(cn,pn)}return typeof pn=="string"&&pn!==""||typeof pn=="number"?(pn=""+pn,Jt!==null&&Jt.tag===6?(D(cn,Jt.sibling),Jt=ue(Jt,pn),Jt.return=cn,cn=Jt):(D(cn,Jt),Jt=q0(pn,cn.mode,vr),Jt.return=cn,cn=Jt),nt(cn)):D(cn,Jt)}return fl}var $s=vs(!0),HA=vs(!1),du=cs(null),bl=null,iA=null,Kc=null;function ql(){Kc=iA=bl=null}function ba(m){var _=du.current;ns(du),m._currentValue=_}function Hs(m,_,D){for(;m!==null;){var Q=m.alternate;if((m.childLanes&_)!==_?(m.childLanes|=_,Q!==null&&(Q.childLanes|=_)):Q!==null&&(Q.childLanes&_)!==_&&(Q.childLanes|=_),m===D)break;m=m.return}}function hu(m,_){bl=m,Kc=iA=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&_)!==0&&(Zl=!0),m.firstContext=null)}function fu(m){var _=m._currentValue;if(Kc!==m)if(m={context:m,memoizedValue:_,next:null},iA===null){if(bl===null)throw Error(t(308));iA=m,bl.dependencies={lanes:0,firstContext:m}}else iA=iA.next=m;return _}var ZA=null;function Tu(m){ZA===null?ZA=[m]:ZA.push(m)}function Rc(m,_,D,Q){var ue=_.interleaved;return ue===null?(D.next=D,Tu(_)):(D.next=ue.next,ue.next=D),_.interleaved=D,EA(m,Q)}function EA(m,_){m.lanes|=_;var D=m.alternate;for(D!==null&&(D.lanes|=_),D=m,m=m.return;m!==null;)m.childLanes|=_,D=m.alternate,D!==null&&(D.childLanes|=_),D=m,m=m.return;return D.tag===3?D.stateNode:null}var Kl=!1;function Bd(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O(m,_){m=m.updateQueue,_.updateQueue===m&&(_.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function a(m,_){return{eventTime:m,lane:_,tag:0,payload:null,callback:null,next:null}}function c(m,_,D){var Q=m.updateQueue;if(Q===null)return null;if(Q=Q.shared,(gi&2)!==0){var ue=Q.pending;return ue===null?_.next=_:(_.next=ue.next,ue.next=_),Q.pending=_,EA(m,D)}return ue=Q.interleaved,ue===null?(_.next=_,Tu(Q)):(_.next=ue.next,ue.next=_),Q.interleaved=_,EA(m,D)}function C(m,_,D){if(_=_.updateQueue,_!==null&&(_=_.shared,(D&4194240)!==0)){var Q=_.lanes;Q&=m.pendingLanes,D|=Q,_.lanes=D,Si(m,D)}}function M(m,_){var D=m.updateQueue,Q=m.alternate;if(Q!==null&&(Q=Q.updateQueue,D===Q)){var ue=null,ge=null;if(D=D.firstBaseUpdate,D!==null){do{var nt={eventTime:D.eventTime,lane:D.lane,tag:D.tag,payload:D.payload,callback:D.callback,next:null};ge===null?ue=ge=nt:ge=ge.next=nt,D=D.next}while(D!==null);ge===null?ue=ge=_:ge=ge.next=_}else ue=ge=_;D={baseState:Q.baseState,firstBaseUpdate:ue,lastBaseUpdate:ge,shared:Q.shared,effects:Q.effects},m.updateQueue=D;return}m=D.lastBaseUpdate,m===null?D.firstBaseUpdate=_:m.next=_,D.lastBaseUpdate=_}function k(m,_,D,Q){var ue=m.updateQueue;Kl=!1;var ge=ue.firstBaseUpdate,nt=ue.lastBaseUpdate,Ot=ue.shared.pending;if(Ot!==null){ue.shared.pending=null;var Nt=Ot,Mn=Nt.next;Nt.next=null,nt===null?ge=Mn:nt.next=Mn,nt=Nt;var ur=m.alternate;ur!==null&&(ur=ur.updateQueue,Ot=ur.lastBaseUpdate,Ot!==nt&&(Ot===null?ur.firstBaseUpdate=Mn:Ot.next=Mn,ur.lastBaseUpdate=Nt))}if(ge!==null){var mr=ue.baseState;nt=0,ur=Mn=Nt=null,Ot=ge;do{var ir=Ot.lane,Yr=Ot.eventTime;if((Q&ir)===ir){ur!==null&&(ur=ur.next={eventTime:Yr,lane:0,tag:Ot.tag,payload:Ot.payload,callback:Ot.callback,next:null});e:{var ii=m,ai=Ot;switch(ir=_,Yr=D,ai.tag){case 1:if(ii=ai.payload,typeof ii=="function"){mr=ii.call(Yr,mr,ir);break e}mr=ii;break e;case 3:ii.flags=ii.flags&-65537|128;case 0:if(ii=ai.payload,ir=typeof ii=="function"?ii.call(Yr,mr,ir):ii,ir==null)break e;mr=Se({},mr,ir);break e;case 2:Kl=!0}}Ot.callback!==null&&Ot.lane!==0&&(m.flags|=64,ir=ue.effects,ir===null?ue.effects=[Ot]:ir.push(Ot))}else Yr={eventTime:Yr,lane:ir,tag:Ot.tag,payload:Ot.payload,callback:Ot.callback,next:null},ur===null?(Mn=ur=Yr,Nt=mr):ur=ur.next=Yr,nt|=ir;if(Ot=Ot.next,Ot===null){if(Ot=ue.shared.pending,Ot===null)break;ir=Ot,Ot=ir.next,ir.next=null,ue.lastBaseUpdate=ir,ue.shared.pending=null}}while(!0);if(ur===null&&(Nt=mr),ue.baseState=Nt,ue.firstBaseUpdate=Mn,ue.lastBaseUpdate=ur,_=ue.shared.interleaved,_!==null){ue=_;do nt|=ue.lane,ue=ue.next;while(ue!==_)}else ge===null&&(ue.shared.lanes=0);yu|=nt,m.lanes=nt,m.memoizedState=mr}}function z(m,_,D){if(m=_.effects,_.effects=null,m!==null)for(_=0;_<m.length;_++){var Q=m[_],ue=Q.callback;if(ue!==null){if(Q.callback=null,Q=D,typeof ue!="function")throw Error(t(191,ue));ue.call(Q)}}}var Y={},J=cs(Y),se=cs(Y),ye=cs(Y);function Te(m){if(m===Y)throw Error(t(174));return m}function ke(m,_){switch(Es(ye,_),Es(se,m),Es(J,Y),m=_.nodeType,m){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:Ge(null,"");break;default:m=m===8?_.parentNode:_,_=m.namespaceURI||null,m=m.tagName,_=Ge(_,m)}ns(J),Es(J,_)}function Qe(){ns(J),ns(se),ns(ye)}function et(m){Te(ye.current);var _=Te(J.current),D=Ge(_,m.type);_!==D&&(Es(se,m),Es(J,D))}function mt(m){se.current===m&&(ns(J),ns(se))}var lt=cs(0);function pt(m){for(var _=m;_!==null;){if(_.tag===13){var D=_.memoizedState;if(D!==null&&(D=D.dehydrated,D===null||D.data==="$?"||D.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var bt=[];function Bt(){for(var m=0;m<bt.length;m++)bt[m]._workInProgressVersionPrimary=null;bt.length=0}var kt=te.ReactCurrentDispatcher,Kt=te.ReactCurrentBatchConfig,Ut=0,It=null,nn=null,qt=null,xn=!1,Sn=!1,Cn=0,In=0;function Nn(){throw Error(t(321))}function Rn(m,_){if(_===null)return!1;for(var D=0;D<_.length&&D<m.length;D++)if(!un(m[D],_[D]))return!1;return!0}function kr(m,_,D,Q,ue,ge){if(Ut=ge,It=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,kt.current=m===null||m.memoizedState===null?jf:nd,m=D(Q,ue),Sn){ge=0;do{if(Sn=!1,Cn=0,25<=ge)throw Error(t(301));ge+=1,qt=nn=null,_.updateQueue=null,kt.current=aA,m=D(Q,ue)}while(Sn)}if(kt.current=OA,_=nn!==null&&nn.next!==null,Ut=0,qt=nn=It=null,xn=!1,_)throw Error(t(300));return m}function Ri(){var m=Cn!==0;return Cn=0,m}function Xi(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?It.memoizedState=qt=m:qt=qt.next=m,qt}function _i(){if(nn===null){var m=It.alternate;m=m!==null?m.memoizedState:null}else m=nn.next;var _=qt===null?It.memoizedState:qt.next;if(_!==null)qt=_,nn=m;else{if(m===null)throw Error(t(310));nn=m,m={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},qt===null?It.memoizedState=qt=m:qt=qt.next=m}return qt}function Bi(m,_){return typeof _=="function"?_(m):_}function Qo(m){var _=_i(),D=_.queue;if(D===null)throw Error(t(311));D.lastRenderedReducer=m;var Q=nn,ue=Q.baseQueue,ge=D.pending;if(ge!==null){if(ue!==null){var nt=ue.next;ue.next=ge.next,ge.next=nt}Q.baseQueue=ue=ge,D.pending=null}if(ue!==null){ge=ue.next,Q=Q.baseState;var Ot=nt=null,Nt=null,Mn=ge;do{var ur=Mn.lane;if((Ut&ur)===ur)Nt!==null&&(Nt=Nt.next={lane:0,action:Mn.action,hasEagerState:Mn.hasEagerState,eagerState:Mn.eagerState,next:null}),Q=Mn.hasEagerState?Mn.eagerState:m(Q,Mn.action);else{var mr={lane:ur,action:Mn.action,hasEagerState:Mn.hasEagerState,eagerState:Mn.eagerState,next:null};Nt===null?(Ot=Nt=mr,nt=Q):Nt=Nt.next=mr,It.lanes|=ur,yu|=ur}Mn=Mn.next}while(Mn!==null&&Mn!==ge);Nt===null?nt=Q:Nt.next=Ot,un(Q,_.memoizedState)||(Zl=!0),_.memoizedState=Q,_.baseState=nt,_.baseQueue=Nt,D.lastRenderedState=Q}if(m=D.interleaved,m!==null){ue=m;do ge=ue.lane,It.lanes|=ge,yu|=ge,ue=ue.next;while(ue!==m)}else ue===null&&(D.lanes=0);return[_.memoizedState,D.dispatch]}function Lo(m){var _=_i(),D=_.queue;if(D===null)throw Error(t(311));D.lastRenderedReducer=m;var Q=D.dispatch,ue=D.pending,ge=_.memoizedState;if(ue!==null){D.pending=null;var nt=ue=ue.next;do ge=m(ge,nt.action),nt=nt.next;while(nt!==ue);un(ge,_.memoizedState)||(Zl=!0),_.memoizedState=ge,_.baseQueue===null&&(_.baseState=ge),D.lastRenderedState=ge}return[ge,Q]}function So(){}function fo(m,_){var D=It,Q=_i(),ue=_(),ge=!un(Q.memoizedState,ue);if(ge&&(Q.memoizedState=ue,Zl=!0),Q=Q.queue,xa(rs.bind(null,D,Q,m),[m]),Q.getSnapshot!==_||ge||qt!==null&&qt.memoizedState.tag&1){if(D.flags|=2048,Vl(9,Ho.bind(null,D,Q,ue,_),void 0,null),os===null)throw Error(t(349));(Ut&30)!==0||ca(D,_,ue)}return ue}function ca(m,_,D){m.flags|=16384,m={getSnapshot:_,value:D},_=It.updateQueue,_===null?(_={lastEffect:null,stores:null},It.updateQueue=_,_.stores=[m]):(D=_.stores,D===null?_.stores=[m]:D.push(m))}function Ho(m,_,D,Q){_.value=D,_.getSnapshot=Q,xl(_)&&BA(m)}function rs(m,_,D){return D(function(){xl(_)&&BA(m)})}function xl(m){var _=m.getSnapshot;m=m.value;try{var D=_();return!un(m,D)}catch{return!0}}function BA(m){var _=EA(m,1);_!==null&&ad(_,m,1,-1)}function pu(m){var _=Xi();return typeof m=="function"&&(m=m()),_.memoizedState=_.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:m},_.queue=m,m=m.dispatch=Oh.bind(null,It,m),[_.memoizedState,m]}function Vl(m,_,D,Q){return m={tag:m,create:_,destroy:D,deps:Q,next:null},_=It.updateQueue,_===null?(_={lastEffect:null,stores:null},It.updateQueue=_,_.lastEffect=m.next=m):(D=_.lastEffect,D===null?_.lastEffect=m.next=m:(Q=D.next,D.next=m,m.next=Q,_.lastEffect=m)),m}function $l(){return _i().memoizedState}function oA(m,_,D,Q){var ue=Xi();It.flags|=m,ue.memoizedState=Vl(1|_,D,void 0,Q===void 0?null:Q)}function Rl(m,_,D,Q){var ue=_i();Q=Q===void 0?null:Q;var ge=void 0;if(nn!==null){var nt=nn.memoizedState;if(ge=nt.destroy,Q!==null&&Rn(Q,nt.deps)){ue.memoizedState=Vl(_,D,ge,Q);return}}It.flags|=m,ue.memoizedState=Vl(1|_,D,ge,Q)}function Pu(m,_){return oA(8390656,8,m,_)}function xa(m,_){return Rl(2048,8,m,_)}function Ku(m,_){return Rl(4,2,m,_)}function Hl(m,_){return Rl(4,4,m,_)}function Dc(m,_){if(typeof _=="function")return m=m(),_(m),function(){_(null)};if(_!=null)return m=m(),_.current=m,function(){_.current=null}}function Ns(m,_,D){return D=D!=null?D.concat([m]):null,Rl(4,4,Dc.bind(null,_,m),D)}function ds(){}function Ra(m,_){var D=_i();_=_===void 0?null:_;var Q=D.memoizedState;return Q!==null&&_!==null&&Rn(_,Q[1])?Q[0]:(D.memoizedState=[m,_],m)}function Cs(m,_){var D=_i();_=_===void 0?null:_;var Q=D.memoizedState;return Q!==null&&_!==null&&Rn(_,Q[1])?Q[0]:(m=m(),D.memoizedState=[m,_],m)}function sA(m,_,D){return(Ut&21)===0?(m.baseState&&(m.baseState=!1,Zl=!0),m.memoizedState=D):(un(D,_)||(D=zl(),It.lanes|=D,yu|=D,m.baseState=!0),_)}function lf(m,_){var D=ti;ti=D!==0&&4>D?D:4,m(!0);var Q=Kt.transition;Kt.transition={};try{m(!1),_()}finally{ti=D,Kt.transition=Q}}function pc(){return _i().memoizedState}function sm(m,_,D){var Q=mf(m);if(D={lane:Q,action:D,hasEagerState:!1,eagerState:null,next:null},th(m))Ma(_,D);else if(D=Rc(m,_,D,Q),D!==null){var ue=JA();ad(D,m,Q,ue),cl(D,_,Q)}}function Oh(m,_,D){var Q=mf(m),ue={lane:Q,action:D,hasEagerState:!1,eagerState:null,next:null};if(th(m))Ma(_,ue);else{var ge=m.alternate;if(m.lanes===0&&(ge===null||ge.lanes===0)&&(ge=_.lastRenderedReducer,ge!==null))try{var nt=_.lastRenderedState,Ot=ge(nt,D);if(ue.hasEagerState=!0,ue.eagerState=Ot,un(Ot,nt)){var Nt=_.interleaved;Nt===null?(ue.next=ue,Tu(_)):(ue.next=Nt.next,Nt.next=ue),_.interleaved=ue;return}}catch{}finally{}D=Rc(m,_,ue,Q),D!==null&&(ue=JA(),ad(D,m,Q,ue),cl(D,_,Q))}}function th(m){var _=m.alternate;return m===It||_!==null&&_===It}function Ma(m,_){Sn=xn=!0;var D=m.pending;D===null?_.next=_:(_.next=D.next,D.next=_),m.pending=_}function cl(m,_,D){if((D&4194240)!==0){var Q=_.lanes;Q&=m.pendingLanes,D|=Q,_.lanes=D,Si(m,D)}}var OA={readContext:fu,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},jf={readContext:fu,useCallback:function(m,_){return Xi().memoizedState=[m,_===void 0?null:_],m},useContext:fu,useEffect:Pu,useImperativeHandle:function(m,_,D){return D=D!=null?D.concat([m]):null,oA(4194308,4,Dc.bind(null,_,m),D)},useLayoutEffect:function(m,_){return oA(4194308,4,m,_)},useInsertionEffect:function(m,_){return oA(4,2,m,_)},useMemo:function(m,_){var D=Xi();return _=_===void 0?null:_,m=m(),D.memoizedState=[m,_],m},useReducer:function(m,_,D){var Q=Xi();return _=D!==void 0?D(_):_,Q.memoizedState=Q.baseState=_,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:_},Q.queue=m,m=m.dispatch=sm.bind(null,It,m),[Q.memoizedState,m]},useRef:function(m){var _=Xi();return m={current:m},_.memoizedState=m},useState:pu,useDebugValue:ds,useDeferredValue:function(m){return Xi().memoizedState=m},useTransition:function(){var m=pu(!1),_=m[0];return m=lf.bind(null,m[1]),Xi().memoizedState=m,[_,m]},useMutableSource:function(){},useSyncExternalStore:function(m,_,D){var Q=It,ue=Xi();if(ys){if(D===void 0)throw Error(t(407));D=D()}else{if(D=_(),os===null)throw Error(t(349));(Ut&30)!==0||ca(Q,_,D)}ue.memoizedState=D;var ge={value:D,getSnapshot:_};return ue.queue=ge,Pu(rs.bind(null,Q,ge,m),[m]),Q.flags|=2048,Vl(9,Ho.bind(null,Q,ge,D,_),void 0,null),D},useId:function(){var m=Xi(),_=os.identifierPrefix;if(ys){var D=YA,Q=wA;D=(Q&~(1<<32-yn(Q)-1)).toString(32)+D,_=":"+_+"R"+D,D=Cn++,0<D&&(_+="H"+D.toString(32)),_+=":"}else D=In++,_=":"+_+"r"+D.toString(32)+":";return m.memoizedState=_},unstable_isNewReconciler:!1},nd={readContext:fu,useCallback:Ra,useContext:fu,useEffect:xa,useImperativeHandle:Ns,useInsertionEffect:Ku,useLayoutEffect:Hl,useMemo:Cs,useReducer:Qo,useRef:$l,useState:function(){return Qo(Bi)},useDebugValue:ds,useDeferredValue:function(m){var _=_i();return sA(_,nn.memoizedState,m)},useTransition:function(){var m=Qo(Bi)[0],_=_i().memoizedState;return[m,_]},useMutableSource:So,useSyncExternalStore:fo,useId:pc,unstable_isNewReconciler:!1},aA={readContext:fu,useCallback:Ra,useContext:fu,useEffect:xa,useImperativeHandle:Ns,useInsertionEffect:Ku,useLayoutEffect:Hl,useMemo:Cs,useReducer:Lo,useRef:$l,useState:function(){return Lo(Bi)},useDebugValue:ds,useDeferredValue:function(m){var _=_i();return nn===null?_.memoizedState=m:sA(_,nn.memoizedState,m)},useTransition:function(){var m=Lo(Bi)[0],_=_i().memoizedState;return[m,_]},useMutableSource:So,useSyncExternalStore:fo,useId:pc,unstable_isNewReconciler:!1};function dl(m,_){if(m&&m.defaultProps){_=Se({},_),m=m.defaultProps;for(var D in m)_[D]===void 0&&(_[D]=m[D]);return _}return _}function Sp(m,_,D,Q){_=m.memoizedState,D=D(Q,_),D=D==null?_:Se({},_,D),m.memoizedState=D,m.lanes===0&&(m.updateQueue.baseState=D)}var uf={isMounted:function(m){return(m=m._reactInternals)?Mr(m)===m:!1},enqueueSetState:function(m,_,D){m=m._reactInternals;var Q=JA(),ue=mf(m),ge=a(Q,ue);ge.payload=_,D!=null&&(ge.callback=D),_=c(m,ge,ue),_!==null&&(ad(_,m,ue,Q),C(_,m,ue))},enqueueReplaceState:function(m,_,D){m=m._reactInternals;var Q=JA(),ue=mf(m),ge=a(Q,ue);ge.tag=1,ge.payload=_,D!=null&&(ge.callback=D),_=c(m,ge,ue),_!==null&&(ad(_,m,ue,Q),C(_,m,ue))},enqueueForceUpdate:function(m,_){m=m._reactInternals;var D=JA(),Q=mf(m),ue=a(D,Q);ue.tag=2,_!=null&&(ue.callback=_),_=c(m,ue,Q),_!==null&&(ad(_,m,Q,D),C(_,m,Q))}};function am(m,_,D,Q,ue,ge,nt){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(Q,ge,nt):_.prototype&&_.prototype.isPureReactComponent?!Tr(D,Q)||!Tr(ue,ge):!0}function Od(m,_,D){var Q=!1,ue=Xc,ge=_.contextType;return typeof ge=="object"&&ge!==null?ge=fu(ge):(ue=Bs(_)?Ca:qa.current,Q=_.contextTypes,ge=(Q=Q!=null)?hc(m,ue):Xc),_=new _(D,ge),m.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=uf,m.stateNode=_,_._reactInternals=m,Q&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=ue,m.__reactInternalMemoizedMaskedChildContext=ge),_}function Af(m,_,D,Q){m=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(D,Q),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(D,Q),_.state!==m&&uf.enqueueReplaceState(_,_.state,null)}function Nf(m,_,D,Q){var ue=m.stateNode;ue.props=D,ue.state=m.memoizedState,ue.refs={},Bd(m);var ge=_.contextType;typeof ge=="object"&&ge!==null?ue.context=fu(ge):(ge=Bs(_)?Ca:qa.current,ue.context=hc(m,ge)),ue.state=m.memoizedState,ge=_.getDerivedStateFromProps,typeof ge=="function"&&(Sp(m,_,ge,D),ue.state=m.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof ue.getSnapshotBeforeUpdate=="function"||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(_=ue.state,typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount(),_!==ue.state&&uf.enqueueReplaceState(ue,ue.state,null),k(m,D,ue,Q),ue.state=m.memoizedState),typeof ue.componentDidMount=="function"&&(m.flags|=4194308)}function Id(m,_){try{var D="",Q=_;do D+=yt(Q),Q=Q.return;while(Q);var ue=D}catch(ge){ue=`
Error generating stack: `+ge.message+`
`+ge.stack}return{value:m,source:_,stack:ue,digest:null}}function Wf(m,_,D){return{value:m,source:null,stack:D??null,digest:_??null}}function mc(m,_){try{console.error(_.value)}catch(D){setTimeout(function(){throw D})}}var lm=typeof WeakMap=="function"?WeakMap:Map;function Fc(m,_,D){D=a(-1,D),D.tag=3,D.payload={element:null};var Q=_.value;return D.callback=function(){dm||(dm=!0,Wm=Q),mc(m,_)},D}function nh(m,_,D){D=a(-1,D),D.tag=3;var Q=m.type.getDerivedStateFromError;if(typeof Q=="function"){var ue=_.value;D.payload=function(){return Q(ue)},D.callback=function(){mc(m,_)}}var ge=m.stateNode;return ge!==null&&typeof ge.componentDidCatch=="function"&&(D.callback=function(){mc(m,_),typeof Q!="function"&&(pf===null?pf=new Set([this]):pf.add(this));var nt=_.stack;this.componentDidCatch(_.value,{componentStack:nt!==null?nt:""})}),D}function rh(m,_,D){var Q=m.pingCache;if(Q===null){Q=m.pingCache=new lm;var ue=new Set;Q.set(_,ue)}else ue=Q.get(_),ue===void 0&&(ue=new Set,Q.set(_,ue));ue.has(D)||(ue.add(D),m=Wy.bind(null,m,_,D),_.then(m,m))}function Ep(m){do{var _;if((_=m.tag===13)&&(_=m.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return m;m=m.return}while(m!==null);return null}function kd(m,_,D,Q,ue){return(m.mode&1)===0?(m===_?m.flags|=65536:(m.flags|=128,D.flags|=131072,D.flags&=-52805,D.tag===1&&(D.alternate===null?D.tag=17:(_=a(-1,1),_.tag=2,c(D,_,1))),D.lanes|=1),m):(m.flags|=65536,m.lanes=ue,m)}var Gf=te.ReactCurrentOwner,Zl=!1;function Xl(m,_,D,Q){_.child=m===null?HA(_,null,D,Q):$s(_,m.child,D,Q)}function um(m,_,D,Q,ue){D=D.render;var ge=_.ref;return hu(_,ue),Q=kr(m,_,D,Q,ge,ue),D=Ri(),m!==null&&!Zl?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~ue,Ml(m,_,ue)):(ys&&D&&rA(_),_.flags|=1,Xl(m,_,Q,ue),_.child)}function Bp(m,_,D,Q,ue){if(m===null){var ge=D.type;return typeof ge=="function"&&!Rd(ge)&&ge.defaultProps===void 0&&D.compare===null&&D.defaultProps===void 0?(_.tag=15,_.type=ge,Zo(m,_,ge,Q,ue)):(m=Rh(D.type,null,Q,_,_.mode,ue),m.ref=_.ref,m.return=_,_.child=m)}if(ge=m.child,(m.lanes&ue)===0){var nt=ge.memoizedProps;if(D=D.compare,D=D!==null?D:Tr,D(nt,Q)&&m.ref===_.ref)return Ml(m,_,ue)}return _.flags|=1,m=ec(ge,Q),m.ref=_.ref,m.return=_,_.child=m}function Zo(m,_,D,Q,ue){if(m!==null){var ge=m.memoizedProps;if(Tr(ge,Q)&&m.ref===_.ref)if(Zl=!1,_.pendingProps=Q=ge,(m.lanes&ue)!==0)(m.flags&131072)!==0&&(Zl=!0);else return _.lanes=m.lanes,Ml(m,_,ue)}return Td(m,_,D,Q,ue)}function Qf(m,_,D){var Q=_.pendingProps,ue=Q.children,ge=m!==null?m.memoizedState:null;if(Q.mode==="hidden")if((_.mode&1)===0)_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Es(eu,Is),Is|=D;else{if((D&1073741824)===0)return m=ge!==null?ge.baseLanes|D:D,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:m,cachePool:null,transitions:null},_.updateQueue=null,Es(eu,Is),Is|=m,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q=ge!==null?ge.baseLanes:D,Es(eu,Is),Is|=Q}else ge!==null?(Q=ge.baseLanes|D,_.memoizedState=null):Q=D,Es(eu,Is),Is|=Q;return Xl(m,_,ue,D),_.child}function cf(m,_){var D=_.ref;(m===null&&D!==null||m!==null&&m.ref!==D)&&(_.flags|=512,_.flags|=2097152)}function Td(m,_,D,Q,ue){var ge=Bs(D)?Ca:qa.current;return ge=hc(_,ge),hu(_,ue),D=kr(m,_,D,Q,ge,ue),Q=Ri(),m!==null&&!Zl?(_.updateQueue=m.updateQueue,_.flags&=-2053,m.lanes&=~ue,Ml(m,_,ue)):(ys&&Q&&rA(_),_.flags|=1,Xl(m,_,D,ue),_.child)}function mu(m,_,D,Q,ue){if(Bs(D)){var ge=!0;Au(_)}else ge=!1;if(hu(_,ue),_.stateNode===null)id(m,_),Od(_,D,Q),Nf(_,D,Q,ue),Q=!0;else if(m===null){var nt=_.stateNode,Ot=_.memoizedProps;nt.props=Ot;var Nt=nt.context,Mn=D.contextType;typeof Mn=="object"&&Mn!==null?Mn=fu(Mn):(Mn=Bs(D)?Ca:qa.current,Mn=hc(_,Mn));var ur=D.getDerivedStateFromProps,mr=typeof ur=="function"||typeof nt.getSnapshotBeforeUpdate=="function";mr||typeof nt.UNSAFE_componentWillReceiveProps!="function"&&typeof nt.componentWillReceiveProps!="function"||(Ot!==Q||Nt!==Mn)&&Af(_,nt,Q,Mn),Kl=!1;var ir=_.memoizedState;nt.state=ir,k(_,Q,nt,ue),Nt=_.memoizedState,Ot!==Q||ir!==Nt||uu.current||Kl?(typeof ur=="function"&&(Sp(_,D,ur,Q),Nt=_.memoizedState),(Ot=Kl||am(_,D,Ot,Q,ir,Nt,Mn))?(mr||typeof nt.UNSAFE_componentWillMount!="function"&&typeof nt.componentWillMount!="function"||(typeof nt.componentWillMount=="function"&&nt.componentWillMount(),typeof nt.UNSAFE_componentWillMount=="function"&&nt.UNSAFE_componentWillMount()),typeof nt.componentDidMount=="function"&&(_.flags|=4194308)):(typeof nt.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=Q,_.memoizedState=Nt),nt.props=Q,nt.state=Nt,nt.context=Mn,Q=Ot):(typeof nt.componentDidMount=="function"&&(_.flags|=4194308),Q=!1)}else{nt=_.stateNode,O(m,_),Ot=_.memoizedProps,Mn=_.type===_.elementType?Ot:dl(_.type,Ot),nt.props=Mn,mr=_.pendingProps,ir=nt.context,Nt=D.contextType,typeof Nt=="object"&&Nt!==null?Nt=fu(Nt):(Nt=Bs(D)?Ca:qa.current,Nt=hc(_,Nt));var Yr=D.getDerivedStateFromProps;(ur=typeof Yr=="function"||typeof nt.getSnapshotBeforeUpdate=="function")||typeof nt.UNSAFE_componentWillReceiveProps!="function"&&typeof nt.componentWillReceiveProps!="function"||(Ot!==mr||ir!==Nt)&&Af(_,nt,Q,Nt),Kl=!1,ir=_.memoizedState,nt.state=ir,k(_,Q,nt,ue);var ii=_.memoizedState;Ot!==mr||ir!==ii||uu.current||Kl?(typeof Yr=="function"&&(Sp(_,D,Yr,Q),ii=_.memoizedState),(Mn=Kl||am(_,D,Mn,Q,ir,ii,Nt)||!1)?(ur||typeof nt.UNSAFE_componentWillUpdate!="function"&&typeof nt.componentWillUpdate!="function"||(typeof nt.componentWillUpdate=="function"&&nt.componentWillUpdate(Q,ii,Nt),typeof nt.UNSAFE_componentWillUpdate=="function"&&nt.UNSAFE_componentWillUpdate(Q,ii,Nt)),typeof nt.componentDidUpdate=="function"&&(_.flags|=4),typeof nt.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof nt.componentDidUpdate!="function"||Ot===m.memoizedProps&&ir===m.memoizedState||(_.flags|=4),typeof nt.getSnapshotBeforeUpdate!="function"||Ot===m.memoizedProps&&ir===m.memoizedState||(_.flags|=1024),_.memoizedProps=Q,_.memoizedState=ii),nt.props=Q,nt.state=ii,nt.context=Nt,Q=Mn):(typeof nt.componentDidUpdate!="function"||Ot===m.memoizedProps&&ir===m.memoizedState||(_.flags|=4),typeof nt.getSnapshotBeforeUpdate!="function"||Ot===m.memoizedProps&&ir===m.memoizedState||(_.flags|=1024),Q=!1)}return Jl(m,_,D,Q,ge,ue)}function Jl(m,_,D,Q,ue,ge){cf(m,_);var nt=(_.flags&128)!==0;if(!Q&&!nt)return ue&&Tc(_,D,!1),Ml(m,_,ge);Q=_.stateNode,Gf.current=_;var Ot=nt&&typeof D.getDerivedStateFromError!="function"?null:Q.render();return _.flags|=1,m!==null&&nt?(_.child=$s(_,m.child,null,ge),_.child=$s(_,null,Ot,ge)):Xl(m,_,Ot,ge),_.memoizedState=Q.state,ue&&Tc(_,D,!0),_.child}function Yf(m){var _=m.stateNode;_.pendingContext?af(m,_.pendingContext,_.pendingContext!==_.context):_.context&&af(m,_.context,!1),ke(m,_.containerInfo)}function XA(m,_,D,Q,ue){return Aa(),ku(ue),_.flags|=256,Xl(m,_,D,Q),_.child}var df={dehydrated:null,treeContext:null,retryLane:0};function Ih(m){return{baseLanes:m,cachePool:null,transitions:null}}function hf(m,_,D){var Q=_.pendingProps,ue=lt.current,ge=!1,nt=(_.flags&128)!==0,Ot;if((Ot=nt)||(Ot=m!==null&&m.memoizedState===null?!1:(ue&2)!==0),Ot?(ge=!0,_.flags&=-129):(m===null||m.memoizedState!==null)&&(ue|=1),Es(lt,ue&1),m===null)return Lr(_),m=_.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((_.mode&1)===0?_.lanes=1:m.data==="$!"?_.lanes=8:_.lanes=1073741824,null):(nt=Q.children,m=Q.fallback,ge?(Q=_.mode,ge=_.child,nt={mode:"hidden",children:nt},(Q&1)===0&&ge!==null?(ge.childLanes=0,ge.pendingProps=nt):ge=Xf(nt,Q,0,null),m=sh(m,Q,D,null),ge.return=_,m.return=_,ge.sibling=m,_.child=ge,_.child.memoizedState=Ih(D),_.memoizedState=df,m):kh(_,nt));if(ue=m.memoizedState,ue!==null&&(Ot=ue.dehydrated,Ot!==null))return Oi(m,_,nt,Q,Ot,ue,D);if(ge){ge=Q.fallback,nt=_.mode,ue=m.child,Ot=ue.sibling;var Nt={mode:"hidden",children:Q.children};return(nt&1)===0&&_.child!==ue?(Q=_.child,Q.childLanes=0,Q.pendingProps=Nt,_.deletions=null):(Q=ec(ue,Nt),Q.subtreeFlags=ue.subtreeFlags&14680064),Ot!==null?ge=ec(Ot,ge):(ge=sh(ge,nt,D,null),ge.flags|=2),ge.return=_,Q.return=_,Q.sibling=ge,_.child=Q,Q=ge,ge=_.child,nt=m.child.memoizedState,nt=nt===null?Ih(D):{baseLanes:nt.baseLanes|D,cachePool:null,transitions:nt.transitions},ge.memoizedState=nt,ge.childLanes=m.childLanes&~D,_.memoizedState=df,Q}return ge=m.child,m=ge.sibling,Q=ec(ge,{mode:"visible",children:Q.children}),(_.mode&1)===0&&(Q.lanes=D),Q.return=_,Q.sibling=null,m!==null&&(D=_.deletions,D===null?(_.deletions=[m],_.flags|=16):D.push(m)),_.child=Q,_.memoizedState=null,Q}function kh(m,_){return _=Xf({mode:"visible",children:_},m.mode,0,null),_.return=m,m.child=_}function Pd(m,_,D,Q){return Q!==null&&ku(Q),$s(_,m.child,null,D),m=kh(_,_.pendingProps.children),m.flags|=2,_.memoizedState=null,m}function Oi(m,_,D,Q,ue,ge,nt){if(D)return _.flags&256?(_.flags&=-257,Q=Wf(Error(t(422))),Pd(m,_,nt,Q)):_.memoizedState!==null?(_.child=m.child,_.flags|=128,null):(ge=Q.fallback,ue=_.mode,Q=Xf({mode:"visible",children:Q.children},ue,0,null),ge=sh(ge,ue,nt,null),ge.flags|=2,Q.return=_,ge.return=_,Q.sibling=ge,_.child=Q,(_.mode&1)!==0&&$s(_,m.child,null,nt),_.child.memoizedState=Ih(nt),_.memoizedState=df,ge);if((_.mode&1)===0)return Pd(m,_,nt,null);if(ue.data==="$!"){if(Q=ue.nextSibling&&ue.nextSibling.dataset,Q)var Ot=Q.dgst;return Q=Ot,ge=Error(t(419)),Q=Wf(ge,Q,void 0),Pd(m,_,nt,Q)}if(Ot=(nt&m.childLanes)!==0,Zl||Ot){if(Q=os,Q!==null){switch(nt&-nt){case 4:ue=2;break;case 16:ue=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ue=32;break;case 536870912:ue=268435456;break;default:ue=0}ue=(ue&(Q.suspendedLanes|nt))!==0?0:ue,ue!==0&&ue!==ge.retryLane&&(ge.retryLane=ue,EA(m,ue),ad(Q,m,ue,-1))}return N0(),Q=Wf(Error(t(421))),Pd(m,_,nt,Q)}return ue.data==="$?"?(_.flags|=128,_.child=m.child,_=Gy.bind(null,m),ue._reactRetry=_,null):(m=ge.treeContext,Ka=dc(ue.nextSibling),_a=_,ys=!0,SA=null,m!==null&&(Pa[$a++]=wA,Pa[$a++]=YA,Pa[$a++]=fc,wA=m.id,YA=m.overflow,fc=_),_=kh(_,Q.children),_.flags|=4096,_)}function ih(m,_,D){m.lanes|=_;var Q=m.alternate;Q!==null&&(Q.lanes|=_),Hs(m.return,_,D)}function Uo(m,_,D,Q,ue){var ge=m.memoizedState;ge===null?m.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:Q,tail:D,tailMode:ue}:(ge.isBackwards=_,ge.rendering=null,ge.renderingStartTime=0,ge.last=Q,ge.tail=D,ge.tailMode=ue)}function rd(m,_,D){var Q=_.pendingProps,ue=Q.revealOrder,ge=Q.tail;if(Xl(m,_,Q.children,D),Q=lt.current,(Q&2)!==0)Q=Q&1|2,_.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=_.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&ih(m,D,_);else if(m.tag===19)ih(m,D,_);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===_)break e;for(;m.sibling===null;){if(m.return===null||m.return===_)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}Q&=1}if(Es(lt,Q),(_.mode&1)===0)_.memoizedState=null;else switch(ue){case"forwards":for(D=_.child,ue=null;D!==null;)m=D.alternate,m!==null&&pt(m)===null&&(ue=D),D=D.sibling;D=ue,D===null?(ue=_.child,_.child=null):(ue=D.sibling,D.sibling=null),Uo(_,!1,ue,D,ge);break;case"backwards":for(D=null,ue=_.child,_.child=null;ue!==null;){if(m=ue.alternate,m!==null&&pt(m)===null){_.child=ue;break}m=ue.sibling,ue.sibling=D,D=ue,ue=m}Uo(_,!0,D,null,ge);break;case"together":Uo(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function id(m,_){(_.mode&1)===0&&m!==null&&(m.alternate=null,_.alternate=null,_.flags|=2)}function Ml(m,_,D){if(m!==null&&(_.dependencies=m.dependencies),yu|=_.lanes,(D&_.childLanes)===0)return null;if(m!==null&&_.child!==m.child)throw Error(t(153));if(_.child!==null){for(m=_.child,D=ec(m,m.pendingProps),_.child=D,D.return=_;m.sibling!==null;)m=m.sibling,D=D.sibling=ec(m,m.pendingProps),D.return=_;D.sibling=null}return _.child}function Nm(m,_,D){switch(_.tag){case 3:Yf(_),Aa();break;case 5:et(_);break;case 1:Bs(_.type)&&Au(_);break;case 4:ke(_,_.stateNode.containerInfo);break;case 10:var Q=_.type._context,ue=_.memoizedProps.value;Es(du,Q._currentValue),Q._currentValue=ue;break;case 13:if(Q=_.memoizedState,Q!==null)return Q.dehydrated!==null?(Es(lt,lt.current&1),_.flags|=128,null):(D&_.child.childLanes)!==0?hf(m,_,D):(Es(lt,lt.current&1),m=Ml(m,_,D),m!==null?m.sibling:null);Es(lt,lt.current&1);break;case 19:if(Q=(D&_.childLanes)!==0,(m.flags&128)!==0){if(Q)return rd(m,_,D);_.flags|=128}if(ue=_.memoizedState,ue!==null&&(ue.rendering=null,ue.tail=null,ue.lastEffect=null),Es(lt,lt.current),Q)break;return null;case 22:case 23:return _.lanes=0,Qf(m,_,D)}return Ml(m,_,D)}var wl,Am,Da,cm;wl=function(m,_){for(var D=_.child;D!==null;){if(D.tag===5||D.tag===6)m.appendChild(D.stateNode);else if(D.tag!==4&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===_)break;for(;D.sibling===null;){if(D.return===null||D.return===_)return;D=D.return}D.sibling.return=D.return,D=D.sibling}},Am=function(){},Da=function(m,_,D,Q){var ue=m.memoizedProps;if(ue!==Q){m=_.stateNode,Te(J.current);var ge=null;switch(D){case"input":ue=Lt(m,ue),Q=Lt(m,Q),ge=[];break;case"select":ue=Se({},ue,{value:void 0}),Q=Se({},Q,{value:void 0}),ge=[];break;case"textarea":ue=mn(m,ue),Q=mn(m,Q),ge=[];break;default:typeof ue.onClick!="function"&&typeof Q.onClick=="function"&&(m.onclick=ul)}ae(D,Q);var nt;D=null;for(Mn in ue)if(!Q.hasOwnProperty(Mn)&&ue.hasOwnProperty(Mn)&&ue[Mn]!=null)if(Mn==="style"){var Ot=ue[Mn];for(nt in Ot)Ot.hasOwnProperty(nt)&&(D||(D={}),D[nt]="")}else Mn!=="dangerouslySetInnerHTML"&&Mn!=="children"&&Mn!=="suppressContentEditableWarning"&&Mn!=="suppressHydrationWarning"&&Mn!=="autoFocus"&&(i.hasOwnProperty(Mn)?ge||(ge=[]):(ge=ge||[]).push(Mn,null));for(Mn in Q){var Nt=Q[Mn];if(Ot=ue!=null?ue[Mn]:void 0,Q.hasOwnProperty(Mn)&&Nt!==Ot&&(Nt!=null||Ot!=null))if(Mn==="style")if(Ot){for(nt in Ot)!Ot.hasOwnProperty(nt)||Nt&&Nt.hasOwnProperty(nt)||(D||(D={}),D[nt]="");for(nt in Nt)Nt.hasOwnProperty(nt)&&Ot[nt]!==Nt[nt]&&(D||(D={}),D[nt]=Nt[nt])}else D||(ge||(ge=[]),ge.push(Mn,D)),D=Nt;else Mn==="dangerouslySetInnerHTML"?(Nt=Nt?Nt.__html:void 0,Ot=Ot?Ot.__html:void 0,Nt!=null&&Ot!==Nt&&(ge=ge||[]).push(Mn,Nt)):Mn==="children"?typeof Nt!="string"&&typeof Nt!="number"||(ge=ge||[]).push(Mn,""+Nt):Mn!=="suppressContentEditableWarning"&&Mn!=="suppressHydrationWarning"&&(i.hasOwnProperty(Mn)?(Nt!=null&&Mn==="onScroll"&&us("scroll",m),ge||Ot===Nt||(ge=[])):(ge=ge||[]).push(Mn,Nt))}D&&(ge=ge||[]).push("style",D);var Mn=ge;(_.updateQueue=Mn)&&(_.flags|=4)}},cm=function(m,_,D,Q){D!==Q&&(_.flags|=4)};function qf(m,_){if(!ys)switch(m.tailMode){case"hidden":_=m.tail;for(var D=null;_!==null;)_.alternate!==null&&(D=_),_=_.sibling;D===null?m.tail=null:D.sibling=null;break;case"collapsed":D=m.tail;for(var Q=null;D!==null;)D.alternate!==null&&(Q=D),D=D.sibling;Q===null?_||m.tail===null?m.tail=null:m.tail.sibling=null:Q.sibling=null}}function gu(m){var _=m.alternate!==null&&m.alternate.child===m.child,D=0,Q=0;if(_)for(var ue=m.child;ue!==null;)D|=ue.lanes|ue.childLanes,Q|=ue.subtreeFlags&14680064,Q|=ue.flags&14680064,ue.return=m,ue=ue.sibling;else for(ue=m.child;ue!==null;)D|=ue.lanes|ue.childLanes,Q|=ue.subtreeFlags,Q|=ue.flags,ue.return=m,ue=ue.sibling;return m.subtreeFlags|=Q,m.childLanes=D,_}function ff(m,_,D){var Q=_.pendingProps;switch(qA(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gu(_),null;case 1:return Bs(_.type)&&wr(),gu(_),null;case 3:return Q=_.stateNode,Qe(),ns(uu),ns(qa),Bt(),Q.pendingContext&&(Q.context=Q.pendingContext,Q.pendingContext=null),(m===null||m.child===null)&&(td(_)?_.flags|=4:m===null||m.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,SA!==null&&(qm(SA),SA=null))),Am(m,_),gu(_),null;case 5:mt(_);var ue=Te(ye.current);if(D=_.type,m!==null&&_.stateNode!=null)Da(m,_,D,Q,ue),m.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!Q){if(_.stateNode===null)throw Error(t(166));return gu(_),null}if(m=Te(J.current),td(_)){Q=_.stateNode,D=_.type;var ge=_.memoizedProps;switch(Q[GA]=_,Q[kc]=ge,m=(_.mode&1)!==0,D){case"dialog":us("cancel",Q),us("close",Q);break;case"iframe":case"object":case"embed":us("load",Q);break;case"video":case"audio":for(ue=0;ue<bA.length;ue++)us(bA[ue],Q);break;case"source":us("error",Q);break;case"img":case"image":case"link":us("error",Q),us("load",Q);break;case"details":us("toggle",Q);break;case"input":Zt(Q,ge),us("invalid",Q);break;case"select":Q._wrapperState={wasMultiple:!!ge.multiple},us("invalid",Q);break;case"textarea":zn(Q,ge),us("invalid",Q)}ae(D,ge),ue=null;for(var nt in ge)if(ge.hasOwnProperty(nt)){var Ot=ge[nt];nt==="children"?typeof Ot=="string"?Q.textContent!==Ot&&(ge.suppressHydrationWarning!==!0&&xA(Q.textContent,Ot,m),ue=["children",Ot]):typeof Ot=="number"&&Q.textContent!==""+Ot&&(ge.suppressHydrationWarning!==!0&&xA(Q.textContent,Ot,m),ue=["children",""+Ot]):i.hasOwnProperty(nt)&&Ot!=null&&nt==="onScroll"&&us("scroll",Q)}switch(D){case"input":it(Q),qn(Q,ge,!0);break;case"textarea":it(Q),gr(Q);break;case"select":case"option":break;default:typeof ge.onClick=="function"&&(Q.onclick=ul)}Q=ue,_.updateQueue=Q,Q!==null&&(_.flags|=4)}else{nt=ue.nodeType===9?ue:ue.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=tr(D)),m==="http://www.w3.org/1999/xhtml"?D==="script"?(m=nt.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof Q.is=="string"?m=nt.createElement(D,{is:Q.is}):(m=nt.createElement(D),D==="select"&&(nt=m,Q.multiple?nt.multiple=!0:Q.size&&(nt.size=Q.size))):m=nt.createElementNS(m,D),m[GA]=_,m[kc]=Q,wl(m,_,!1,!1),_.stateNode=m;e:{switch(nt=Ce(D,Q),D){case"dialog":us("cancel",m),us("close",m),ue=Q;break;case"iframe":case"object":case"embed":us("load",m),ue=Q;break;case"video":case"audio":for(ue=0;ue<bA.length;ue++)us(bA[ue],m);ue=Q;break;case"source":us("error",m),ue=Q;break;case"img":case"image":case"link":us("error",m),us("load",m),ue=Q;break;case"details":us("toggle",m),ue=Q;break;case"input":Zt(m,Q),ue=Lt(m,Q),us("invalid",m);break;case"option":ue=Q;break;case"select":m._wrapperState={wasMultiple:!!Q.multiple},ue=Se({},Q,{value:void 0}),us("invalid",m);break;case"textarea":zn(m,Q),ue=mn(m,Q),us("invalid",m);break;default:ue=Q}ae(D,ue),Ot=ue;for(ge in Ot)if(Ot.hasOwnProperty(ge)){var Nt=Ot[ge];ge==="style"?nr(m,Nt):ge==="dangerouslySetInnerHTML"?(Nt=Nt?Nt.__html:void 0,Nt!=null&&pe(m,Nt)):ge==="children"?typeof Nt=="string"?(D!=="textarea"||Nt!=="")&&rt(m,Nt):typeof Nt=="number"&&rt(m,""+Nt):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(i.hasOwnProperty(ge)?Nt!=null&&ge==="onScroll"&&us("scroll",m):Nt!=null&&oe(m,ge,Nt,nt))}switch(D){case"input":it(m),qn(m,Q,!1);break;case"textarea":it(m),gr(m);break;case"option":Q.value!=null&&m.setAttribute("value",""+Le(Q.value));break;case"select":m.multiple=!!Q.multiple,ge=Q.value,ge!=null?kn(m,!!Q.multiple,ge,!1):Q.defaultValue!=null&&kn(m,!!Q.multiple,Q.defaultValue,!0);break;default:typeof ue.onClick=="function"&&(m.onclick=ul)}switch(D){case"button":case"input":case"select":case"textarea":Q=!!Q.autoFocus;break e;case"img":Q=!0;break e;default:Q=!1}}Q&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return gu(_),null;case 6:if(m&&_.stateNode!=null)cm(m,_,m.memoizedProps,Q);else{if(typeof Q!="string"&&_.stateNode===null)throw Error(t(166));if(D=Te(ye.current),Te(J.current),td(_)){if(Q=_.stateNode,D=_.memoizedProps,Q[GA]=_,(ge=Q.nodeValue!==D)&&(m=_a,m!==null))switch(m.tag){case 3:xA(Q.nodeValue,D,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&xA(Q.nodeValue,D,(m.mode&1)!==0)}ge&&(_.flags|=4)}else Q=(D.nodeType===9?D:D.ownerDocument).createTextNode(Q),Q[GA]=_,_.stateNode=Q}return gu(_),null;case 13:if(ns(lt),Q=_.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(ys&&Ka!==null&&(_.mode&1)!==0&&(_.flags&128)===0)Eh(),Aa(),_.flags|=98560,ge=!1;else if(ge=td(_),Q!==null&&Q.dehydrated!==null){if(m===null){if(!ge)throw Error(t(318));if(ge=_.memoizedState,ge=ge!==null?ge.dehydrated:null,!ge)throw Error(t(317));ge[GA]=_}else Aa(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;gu(_),ge=!1}else SA!==null&&(qm(SA),SA=null),ge=!0;if(!ge)return _.flags&65536?_:null}return(_.flags&128)!==0?(_.lanes=D,_):(Q=Q!==null,Q!==(m!==null&&m.memoizedState!==null)&&Q&&(_.child.flags|=8192,(_.mode&1)!==0&&(m===null||(lt.current&1)!==0?Bo===0&&(Bo=3):N0())),_.updateQueue!==null&&(_.flags|=4),gu(_),null);case 4:return Qe(),Am(m,_),m===null&&Xu(_.stateNode.containerInfo),gu(_),null;case 10:return ba(_.type._context),gu(_),null;case 17:return Bs(_.type)&&wr(),gu(_),null;case 19:if(ns(lt),ge=_.memoizedState,ge===null)return gu(_),null;if(Q=(_.flags&128)!==0,nt=ge.rendering,nt===null)if(Q)qf(ge,!1);else{if(Bo!==0||m!==null&&(m.flags&128)!==0)for(m=_.child;m!==null;){if(nt=pt(m),nt!==null){for(_.flags|=128,qf(ge,!1),Q=nt.updateQueue,Q!==null&&(_.updateQueue=Q,_.flags|=4),_.subtreeFlags=0,Q=D,D=_.child;D!==null;)ge=D,m=Q,ge.flags&=14680066,nt=ge.alternate,nt===null?(ge.childLanes=0,ge.lanes=m,ge.child=null,ge.subtreeFlags=0,ge.memoizedProps=null,ge.memoizedState=null,ge.updateQueue=null,ge.dependencies=null,ge.stateNode=null):(ge.childLanes=nt.childLanes,ge.lanes=nt.lanes,ge.child=nt.child,ge.subtreeFlags=0,ge.deletions=null,ge.memoizedProps=nt.memoizedProps,ge.memoizedState=nt.memoizedState,ge.updateQueue=nt.updateQueue,ge.type=nt.type,m=nt.dependencies,ge.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),D=D.sibling;return Es(lt,lt.current&1|2),_.child}m=m.sibling}ge.tail!==null&&io()>Vf&&(_.flags|=128,Q=!0,qf(ge,!1),_.lanes=4194304)}else{if(!Q)if(m=pt(nt),m!==null){if(_.flags|=128,Q=!0,D=m.updateQueue,D!==null&&(_.updateQueue=D,_.flags|=4),qf(ge,!0),ge.tail===null&&ge.tailMode==="hidden"&&!nt.alternate&&!ys)return gu(_),null}else 2*io()-ge.renderingStartTime>Vf&&D!==1073741824&&(_.flags|=128,Q=!0,qf(ge,!1),_.lanes=4194304);ge.isBackwards?(nt.sibling=_.child,_.child=nt):(D=ge.last,D!==null?D.sibling=nt:_.child=nt,ge.last=nt)}return ge.tail!==null?(_=ge.tail,ge.rendering=_,ge.tail=_.sibling,ge.renderingStartTime=io(),_.sibling=null,D=lt.current,Es(lt,Q?D&1|2:D&1),_):(gu(_),null);case 22:case 23:return z0(),Q=_.memoizedState!==null,m!==null&&m.memoizedState!==null!==Q&&(_.flags|=8192),Q&&(_.mode&1)!==0?(Is&1073741824)!==0&&(gu(_),_.subtreeFlags&6&&(_.flags|=8192)):gu(_),null;case 24:return null;case 25:return null}throw Error(t(156,_.tag))}function A(m,_){switch(qA(_),_.tag){case 1:return Bs(_.type)&&wr(),m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 3:return Qe(),ns(uu),ns(qa),Bt(),m=_.flags,(m&65536)!==0&&(m&128)===0?(_.flags=m&-65537|128,_):null;case 5:return mt(_),null;case 13:if(ns(lt),m=_.memoizedState,m!==null&&m.dehydrated!==null){if(_.alternate===null)throw Error(t(340));Aa()}return m=_.flags,m&65536?(_.flags=m&-65537|128,_):null;case 19:return ns(lt),null;case 4:return Qe(),null;case 10:return ba(_.type._context),null;case 22:case 23:return z0(),null;case 24:return null;default:return null}}var g=!1,E=!1,S=typeof WeakSet=="function"?WeakSet:Set,K=null;function Z(m,_){var D=m.ref;if(D!==null)if(typeof D=="function")try{D(null)}catch(Q){Ua(m,_,Q)}else D.current=null}function Ae(m,_,D){try{D()}catch(Q){Ua(m,_,Q)}}var _e=!1;function Ie(m,_){if(Hc=Oe,m=ts(),Vu(m)){if("selectionStart"in m)var D={start:m.selectionStart,end:m.selectionEnd};else e:{D=(D=m.ownerDocument)&&D.defaultView||window;var Q=D.getSelection&&D.getSelection();if(Q&&Q.rangeCount!==0){D=Q.anchorNode;var ue=Q.anchorOffset,ge=Q.focusNode;Q=Q.focusOffset;try{D.nodeType,ge.nodeType}catch{D=null;break e}var nt=0,Ot=-1,Nt=-1,Mn=0,ur=0,mr=m,ir=null;t:for(;;){for(var Yr;mr!==D||ue!==0&&mr.nodeType!==3||(Ot=nt+ue),mr!==ge||Q!==0&&mr.nodeType!==3||(Nt=nt+Q),mr.nodeType===3&&(nt+=mr.nodeValue.length),(Yr=mr.firstChild)!==null;)ir=mr,mr=Yr;for(;;){if(mr===m)break t;if(ir===D&&++Mn===ue&&(Ot=nt),ir===ge&&++ur===Q&&(Nt=nt),(Yr=mr.nextSibling)!==null)break;mr=ir,ir=mr.parentNode}mr=Yr}D=Ot===-1||Nt===-1?null:{start:Ot,end:Nt}}else D=null}D=D||{start:0,end:0}}else D=null;for(Gl={focusedElem:m,selectionRange:D},Oe=!1,K=_;K!==null;)if(_=K,m=_.child,(_.subtreeFlags&1028)!==0&&m!==null)m.return=_,K=m;else for(;K!==null;){_=K;try{var ii=_.alternate;if((_.flags&1024)!==0)switch(_.tag){case 0:case 11:case 15:break;case 1:if(ii!==null){var ai=ii.memoizedProps,fl=ii.memoizedState,cn=_.stateNode,Jt=cn.getSnapshotBeforeUpdate(_.elementType===_.type?ai:dl(_.type,ai),fl);cn.__reactInternalSnapshotBeforeUpdate=Jt}break;case 3:var pn=_.stateNode.containerInfo;pn.nodeType===1?pn.textContent="":pn.nodeType===9&&pn.documentElement&&pn.removeChild(pn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(vr){Ua(_,_.return,vr)}if(m=_.sibling,m!==null){m.return=_.return,K=m;break}K=_.return}return ii=_e,_e=!1,ii}function Ue(m,_,D){var Q=_.updateQueue;if(Q=Q!==null?Q.lastEffect:null,Q!==null){var ue=Q=Q.next;do{if((ue.tag&m)===m){var ge=ue.destroy;ue.destroy=void 0,ge!==void 0&&Ae(_,D,ge)}ue=ue.next}while(ue!==Q)}}function gt(m,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var D=_=_.next;do{if((D.tag&m)===m){var Q=D.create;D.destroy=Q()}D=D.next}while(D!==_)}}function wt(m){var _=m.ref;if(_!==null){var D=m.stateNode;switch(m.tag){case 5:m=D;break;default:m=D}typeof _=="function"?_(m):_.current=m}}function Xt(m){var _=m.alternate;_!==null&&(m.alternate=null,Xt(_)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(_=m.stateNode,_!==null&&(delete _[GA],delete _[kc],delete _[wh],delete _[ot],delete _[QA])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Yt(m){return m.tag===5||m.tag===3||m.tag===4}function bn(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Yt(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Ln(m,_,D){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,_?D.nodeType===8?D.parentNode.insertBefore(m,_):D.insertBefore(m,_):(D.nodeType===8?(_=D.parentNode,_.insertBefore(m,D)):(_=D,_.appendChild(m)),D=D._reactRootContainer,D!=null||_.onclick!==null||(_.onclick=ul));else if(Q!==4&&(m=m.child,m!==null))for(Ln(m,_,D),m=m.sibling;m!==null;)Ln(m,_,D),m=m.sibling}function rr(m,_,D){var Q=m.tag;if(Q===5||Q===6)m=m.stateNode,_?D.insertBefore(m,_):D.appendChild(m);else if(Q!==4&&(m=m.child,m!==null))for(rr(m,_,D),m=m.sibling;m!==null;)rr(m,_,D),m=m.sibling}var er=null,Cr=!1;function pr(m,_,D){for(D=D.child;D!==null;)Or(m,_,D),D=D.sibling}function Or(m,_,D){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Gs,D)}catch{}switch(D.tag){case 5:E||Z(D,_);case 6:var Q=er,ue=Cr;er=null,pr(m,_,D),er=Q,Cr=ue,er!==null&&(Cr?(m=er,D=D.stateNode,m.nodeType===8?m.parentNode.removeChild(D):m.removeChild(D)):er.removeChild(D.stateNode));break;case 18:er!==null&&(Cr?(m=er,D=D.stateNode,m.nodeType===8?Jd(m.parentNode,D):m.nodeType===1&&Jd(m,D),Ki(m)):Jd(er,D.stateNode));break;case 4:Q=er,ue=Cr,er=D.stateNode.containerInfo,Cr=!0,pr(m,_,D),er=Q,Cr=ue;break;case 0:case 11:case 14:case 15:if(!E&&(Q=D.updateQueue,Q!==null&&(Q=Q.lastEffect,Q!==null))){ue=Q=Q.next;do{var ge=ue,nt=ge.destroy;ge=ge.tag,nt!==void 0&&((ge&2)!==0||(ge&4)!==0)&&Ae(D,_,nt),ue=ue.next}while(ue!==Q)}pr(m,_,D);break;case 1:if(!E&&(Z(D,_),Q=D.stateNode,typeof Q.componentWillUnmount=="function"))try{Q.props=D.memoizedProps,Q.state=D.memoizedState,Q.componentWillUnmount()}catch(Ot){Ua(D,_,Ot)}pr(m,_,D);break;case 21:pr(m,_,D);break;case 22:D.mode&1?(E=(Q=E)||D.memoizedState!==null,pr(m,_,D),E=Q):pr(m,_,D);break;default:pr(m,_,D)}}function oi(m){var _=m.updateQueue;if(_!==null){m.updateQueue=null;var D=m.stateNode;D===null&&(D=m.stateNode=new S),_.forEach(function(Q){var ue=Qy.bind(null,m,Q);D.has(Q)||(D.add(Q),Q.then(ue,ue))})}}function jr(m,_){var D=_.deletions;if(D!==null)for(var Q=0;Q<D.length;Q++){var ue=D[Q];try{var ge=m,nt=_,Ot=nt;e:for(;Ot!==null;){switch(Ot.tag){case 5:er=Ot.stateNode,Cr=!1;break e;case 3:er=Ot.stateNode.containerInfo,Cr=!0;break e;case 4:er=Ot.stateNode.containerInfo,Cr=!0;break e}Ot=Ot.return}if(er===null)throw Error(t(160));Or(ge,nt,ue),er=null,Cr=!1;var Nt=ue.alternate;Nt!==null&&(Nt.return=null),ue.return=null}catch(Mn){Ua(ue,_,Mn)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)zi(_,m),_=_.sibling}function zi(m,_){var D=m.alternate,Q=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(jr(_,m),yo(m),Q&4){try{Ue(3,m,m.return),gt(3,m)}catch(ai){Ua(m,m.return,ai)}try{Ue(5,m,m.return)}catch(ai){Ua(m,m.return,ai)}}break;case 1:jr(_,m),yo(m),Q&512&&D!==null&&Z(D,D.return);break;case 5:if(jr(_,m),yo(m),Q&512&&D!==null&&Z(D,D.return),m.flags&32){var ue=m.stateNode;try{rt(ue,"")}catch(ai){Ua(m,m.return,ai)}}if(Q&4&&(ue=m.stateNode,ue!=null)){var ge=m.memoizedProps,nt=D!==null?D.memoizedProps:ge,Ot=m.type,Nt=m.updateQueue;if(m.updateQueue=null,Nt!==null)try{Ot==="input"&&ge.type==="radio"&&ge.name!=null&&Rt(ue,ge),Ce(Ot,nt);var Mn=Ce(Ot,ge);for(nt=0;nt<Nt.length;nt+=2){var ur=Nt[nt],mr=Nt[nt+1];ur==="style"?nr(ue,mr):ur==="dangerouslySetInnerHTML"?pe(ue,mr):ur==="children"?rt(ue,mr):oe(ue,ur,mr,Mn)}switch(Ot){case"input":_n(ue,ge);break;case"textarea":br(ue,ge);break;case"select":var ir=ue._wrapperState.wasMultiple;ue._wrapperState.wasMultiple=!!ge.multiple;var Yr=ge.value;Yr!=null?kn(ue,!!ge.multiple,Yr,!1):ir!==!!ge.multiple&&(ge.defaultValue!=null?kn(ue,!!ge.multiple,ge.defaultValue,!0):kn(ue,!!ge.multiple,ge.multiple?[]:"",!1))}ue[kc]=ge}catch(ai){Ua(m,m.return,ai)}}break;case 6:if(jr(_,m),yo(m),Q&4){if(m.stateNode===null)throw Error(t(162));ue=m.stateNode,ge=m.memoizedProps;try{ue.nodeValue=ge}catch(ai){Ua(m,m.return,ai)}}break;case 3:if(jr(_,m),yo(m),Q&4&&D!==null&&D.memoizedState.isDehydrated)try{Ki(_.containerInfo)}catch(ai){Ua(m,m.return,ai)}break;case 4:jr(_,m),yo(m);break;case 13:jr(_,m),yo(m),ue=m.child,ue.flags&8192&&(ge=ue.memoizedState!==null,ue.stateNode.isHidden=ge,!ge||ue.alternate!==null&&ue.alternate.memoizedState!==null||(Th=io())),Q&4&&oi(m);break;case 22:if(ur=D!==null&&D.memoizedState!==null,m.mode&1?(E=(Mn=E)||ur,jr(_,m),E=Mn):jr(_,m),yo(m),Q&8192){if(Mn=m.memoizedState!==null,(m.stateNode.isHidden=Mn)&&!ur&&(m.mode&1)!==0)for(K=m,ur=m.child;ur!==null;){for(mr=K=ur;K!==null;){switch(ir=K,Yr=ir.child,ir.tag){case 0:case 11:case 14:case 15:Ue(4,ir,ir.return);break;case 1:Z(ir,ir.return);var ii=ir.stateNode;if(typeof ii.componentWillUnmount=="function"){Q=ir,D=ir.return;try{_=Q,ii.props=_.memoizedProps,ii.state=_.memoizedState,ii.componentWillUnmount()}catch(ai){Ua(Q,D,ai)}}break;case 5:Z(ir,ir.return);break;case 22:if(ir.memoizedState!==null){Ha(mr);continue}}Yr!==null?(Yr.return=ir,K=Yr):Ha(mr)}ur=ur.sibling}e:for(ur=null,mr=m;;){if(mr.tag===5){if(ur===null){ur=mr;try{ue=mr.stateNode,Mn?(ge=ue.style,typeof ge.setProperty=="function"?ge.setProperty("display","none","important"):ge.display="none"):(Ot=mr.stateNode,Nt=mr.memoizedProps.style,nt=Nt!=null&&Nt.hasOwnProperty("display")?Nt.display:null,Ot.style.display=sn("display",nt))}catch(ai){Ua(m,m.return,ai)}}}else if(mr.tag===6){if(ur===null)try{mr.stateNode.nodeValue=Mn?"":mr.memoizedProps}catch(ai){Ua(m,m.return,ai)}}else if((mr.tag!==22&&mr.tag!==23||mr.memoizedState===null||mr===m)&&mr.child!==null){mr.child.return=mr,mr=mr.child;continue}if(mr===m)break e;for(;mr.sibling===null;){if(mr.return===null||mr.return===m)break e;ur===mr&&(ur=null),mr=mr.return}ur===mr&&(ur=null),mr.sibling.return=mr.return,mr=mr.sibling}}break;case 19:jr(_,m),yo(m),Q&4&&oi(m);break;case 21:break;default:jr(_,m),yo(m)}}function yo(m){var _=m.flags;if(_&2){try{e:{for(var D=m.return;D!==null;){if(Yt(D)){var Q=D;break e}D=D.return}throw Error(t(160))}switch(Q.tag){case 5:var ue=Q.stateNode;Q.flags&32&&(rt(ue,""),Q.flags&=-33);var ge=bn(m);rr(m,ge,ue);break;case 3:case 4:var nt=Q.stateNode.containerInfo,Ot=bn(m);Ln(m,Ot,nt);break;default:throw Error(t(161))}}catch(Nt){Ua(m,m.return,Nt)}m.flags&=-3}_&4096&&(m.flags&=-4097)}function Fa(m,_,D){K=m,Zs(m)}function Zs(m,_,D){for(var Q=(m.mode&1)!==0;K!==null;){var ue=K,ge=ue.child;if(ue.tag===22&&Q){var nt=ue.memoizedState!==null||g;if(!nt){var Ot=ue.alternate,Nt=Ot!==null&&Ot.memoizedState!==null||E;Ot=g;var Mn=E;if(g=nt,(E=Nt)&&!Mn)for(K=ue;K!==null;)nt=K,Nt=nt.child,nt.tag===22&&nt.memoizedState!==null?Za(ue):Nt!==null?(Nt.return=nt,K=Nt):Za(ue);for(;ge!==null;)K=ge,Zs(ge),ge=ge.sibling;K=ue,g=Ot,E=Mn}wa(m)}else(ue.subtreeFlags&8772)!==0&&ge!==null?(ge.return=ue,K=ge):wa(m)}}function wa(m){for(;K!==null;){var _=K;if((_.flags&8772)!==0){var D=_.alternate;try{if((_.flags&8772)!==0)switch(_.tag){case 0:case 11:case 15:E||gt(5,_);break;case 1:var Q=_.stateNode;if(_.flags&4&&!E)if(D===null)Q.componentDidMount();else{var ue=_.elementType===_.type?D.memoizedProps:dl(_.type,D.memoizedProps);Q.componentDidUpdate(ue,D.memoizedState,Q.__reactInternalSnapshotBeforeUpdate)}var ge=_.updateQueue;ge!==null&&z(_,ge,Q);break;case 3:var nt=_.updateQueue;if(nt!==null){if(D=null,_.child!==null)switch(_.child.tag){case 5:D=_.child.stateNode;break;case 1:D=_.child.stateNode}z(_,nt,D)}break;case 5:var Ot=_.stateNode;if(D===null&&_.flags&4){D=Ot;var Nt=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":Nt.autoFocus&&D.focus();break;case"img":Nt.src&&(D.src=Nt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var Mn=_.alternate;if(Mn!==null){var ur=Mn.memoizedState;if(ur!==null){var mr=ur.dehydrated;mr!==null&&Ki(mr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}E||_.flags&512&&wt(_)}catch(ir){Ua(_,_.return,ir)}}if(_===m){K=null;break}if(D=_.sibling,D!==null){D.return=_.return,K=D;break}K=_.return}}function Ha(m){for(;K!==null;){var _=K;if(_===m){K=null;break}var D=_.sibling;if(D!==null){D.return=_.return,K=D;break}K=_.return}}function Za(m){for(;K!==null;){var _=K;try{switch(_.tag){case 0:case 11:case 15:var D=_.return;try{gt(4,_)}catch(Nt){Ua(_,D,Nt)}break;case 1:var Q=_.stateNode;if(typeof Q.componentDidMount=="function"){var ue=_.return;try{Q.componentDidMount()}catch(Nt){Ua(_,ue,Nt)}}var ge=_.return;try{wt(_)}catch(Nt){Ua(_,ge,Nt)}break;case 5:var nt=_.return;try{wt(_)}catch(Nt){Ua(_,nt,Nt)}}}catch(Nt){Ua(_,_.return,Nt)}if(_===m){K=null;break}var Ot=_.sibling;if(Ot!==null){Ot.return=_.return,K=Ot;break}K=_.return}}var Ru=Math.ceil,hl=te.ReactCurrentDispatcher,Sa=te.ReactCurrentOwner,is=te.ReactCurrentBatchConfig,gi=0,os=null,Xs=null,da=0,Is=0,eu=cs(0),Bo=0,oh=null,yu=0,lA=0,od=0,Xa=null,La=null,Th=0,Vf=1/0,Ph=null,dm=!1,Wm=null,pf=null,Gm=!1,sd=null,IA=0,hm=0,U0=null,Qm=-1,fm=0;function JA(){return(gi&6)!==0?io():Qm!==-1?Qm:Qm=io()}function mf(m){return(m.mode&1)===0?1:(gi&2)!==0&&da!==0?da&-da:Pl.transition!==null?(fm===0&&(fm=zl()),fm):(m=ti,m!==0||(m=window.event,m=m===void 0?16:di(m.type)),m)}function ad(m,_,D,Q){if(50<hm)throw hm=0,U0=null,Error(t(185));Ms(m,D,Q),((gi&2)===0||m!==os)&&(m===os&&((gi&2)===0&&(lA|=D),Bo===4&&Kd(m,da)),kA(m,Q),D===1&&gi===0&&(_.mode&1)===0&&(Vf=io()+500,eh&&MA()))}function kA(m,_){var D=m.callbackNode;ei(m,_);var Q=la(m,m===os?da:0);if(Q===0)D!==null&&bi(D),m.callbackNode=null,m.callbackPriority=0;else if(_=Q&-Q,m.callbackPriority!==_){if(D!=null&&bi(D),_===1)m.tag===0?Pc(Vg.bind(null,m)):nA(Vg.bind(null,m)),Sd(function(){(gi&6)===0&&MA()}),D=null;else{switch(ls(Q)){case 1:D=ol;break;case 4:D=bo;break;case 16:D=Kr;break;case 536870912:D=Vo;break;default:D=Kr}D=TA(D,pm.bind(null,m))}m.callbackPriority=_,m.callbackNode=D}}function pm(m,_){if(Qm=-1,fm=0,(gi&6)!==0)throw Error(t(327));var D=m.callbackNode;if(Zf()&&m.callbackNode!==D)return null;var Q=la(m,m===os?da:0);if(Q===0)return null;if((Q&30)!==0||(Q&m.expiredLanes)!==0||_)_=gf(m,Q);else{_=Q;var ue=gi;gi|=2;var ge=$g();(os!==m||da!==_)&&(Ph=null,Vf=io()+500,Hf(m,_));do try{W0();break}catch(Ot){j0(m,Ot)}while(!0);ql(),hl.current=ge,gi=ue,Xs!==null?_=0:(os=null,da=0,_=Bo)}if(_!==0){if(_===2&&(ue=ki(m),ue!==0&&(Q=ue,_=Ym(m,ue))),_===1)throw D=oh,Hf(m,0),Kd(m,Q),kA(m,io()),D;if(_===6)Kd(m,Q);else{if(ue=m.current.alternate,(Q&30)===0&&!jy(ue)&&(_=gf(m,Q),_===2&&(ge=ki(m),ge!==0&&(Q=ge,_=Ym(m,ge))),_===1))throw D=oh,Hf(m,0),Kd(m,Q),kA(m,io()),D;switch(m.finishedWork=ue,m.finishedLanes=Q,_){case 0:case 1:throw Error(t(345));case 2:Kh(m,La,Ph);break;case 3:if(Kd(m,Q),(Q&130023424)===Q&&(_=Th+500-io(),10<_)){if(la(m,0)!==0)break;if(ue=m.suspendedLanes,(ue&Q)!==Q){JA(),m.pingedLanes|=m.suspendedLanes&ue;break}m.timeoutHandle=va(Kh.bind(null,m,La,Ph),_);break}Kh(m,La,Ph);break;case 4:if(Kd(m,Q),(Q&4194240)===Q)break;for(_=m.eventTimes,ue=-1;0<Q;){var nt=31-yn(Q);ge=1<<nt,nt=_[nt],nt>ue&&(ue=nt),Q&=~ge}if(Q=ue,Q=io()-Q,Q=(120>Q?120:480>Q?480:1080>Q?1080:1920>Q?1920:3e3>Q?3e3:4320>Q?4320:1960*Ru(Q/1960))-Q,10<Q){m.timeoutHandle=va(Kh.bind(null,m,La,Ph),Q);break}Kh(m,La,Ph);break;case 5:Kh(m,La,Ph);break;default:throw Error(t(329))}}}return kA(m,io()),m.callbackNode===D?pm.bind(null,m):null}function Ym(m,_){var D=Xa;return m.current.memoizedState.isDehydrated&&(Hf(m,_).flags|=256),m=gf(m,_),m!==2&&(_=La,La=D,_!==null&&qm(_)),m}function qm(m){La===null?La=m:La.push.apply(La,m)}function jy(m){for(var _=m;;){if(_.flags&16384){var D=_.updateQueue;if(D!==null&&(D=D.stores,D!==null))for(var Q=0;Q<D.length;Q++){var ue=D[Q],ge=ue.getSnapshot;ue=ue.value;try{if(!un(ge(),ue))return!1}catch{return!1}}}if(D=_.child,_.subtreeFlags&16384&&D!==null)D.return=_,_=D;else{if(_===m)break;for(;_.sibling===null;){if(_.return===null||_.return===m)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Kd(m,_){for(_&=~od,_&=~lA,m.suspendedLanes|=_,m.pingedLanes&=~_,m=m.expirationTimes;0<_;){var D=31-yn(_),Q=1<<D;m[D]=-1,_&=~Q}}function Vg(m){if((gi&6)!==0)throw Error(t(327));Zf();var _=la(m,0);if((_&1)===0)return kA(m,io()),null;var D=gf(m,_);if(m.tag!==0&&D===2){var Q=ki(m);Q!==0&&(_=Q,D=Ym(m,Q))}if(D===1)throw D=oh,Hf(m,0),Kd(m,_),kA(m,io()),D;if(D===6)throw Error(t(345));return m.finishedWork=m.current.alternate,m.finishedLanes=_,Kh(m,La,Ph),kA(m,io()),null}function Vm(m,_){var D=gi;gi|=1;try{return m(_)}finally{gi=D,gi===0&&(Vf=io()+500,eh&&MA())}}function $f(m){sd!==null&&sd.tag===0&&(gi&6)===0&&Zf();var _=gi;gi|=1;var D=is.transition,Q=ti;try{if(is.transition=null,ti=1,m)return m()}finally{ti=Q,is.transition=D,gi=_,(gi&6)===0&&MA()}}function z0(){Is=eu.current,ns(eu)}function Hf(m,_){m.finishedWork=null,m.finishedLanes=0;var D=m.timeoutHandle;if(D!==-1&&(m.timeoutHandle=-1,eA(D)),Xs!==null)for(D=Xs.return;D!==null;){var Q=D;switch(qA(Q),Q.tag){case 1:Q=Q.type.childContextTypes,Q!=null&&wr();break;case 3:Qe(),ns(uu),ns(qa),Bt();break;case 5:mt(Q);break;case 4:Qe();break;case 13:ns(lt);break;case 19:ns(lt);break;case 10:ba(Q.type._context);break;case 22:case 23:z0()}D=D.return}if(os=m,Xs=m=ec(m.current,null),da=Is=_,Bo=0,oh=null,od=lA=yu=0,La=Xa=null,ZA!==null){for(_=0;_<ZA.length;_++)if(D=ZA[_],Q=D.interleaved,Q!==null){D.interleaved=null;var ue=Q.next,ge=D.pending;if(ge!==null){var nt=ge.next;ge.next=ue,Q.next=nt}D.pending=Q}ZA=null}return m}function j0(m,_){do{var D=Xs;try{if(ql(),kt.current=OA,xn){for(var Q=It.memoizedState;Q!==null;){var ue=Q.queue;ue!==null&&(ue.pending=null),Q=Q.next}xn=!1}if(Ut=0,qt=nn=It=null,Sn=!1,Cn=0,Sa.current=null,D===null||D.return===null){Bo=1,oh=_,Xs=null;break}e:{var ge=m,nt=D.return,Ot=D,Nt=_;if(_=da,Ot.flags|=32768,Nt!==null&&typeof Nt=="object"&&typeof Nt.then=="function"){var Mn=Nt,ur=Ot,mr=ur.tag;if((ur.mode&1)===0&&(mr===0||mr===11||mr===15)){var ir=ur.alternate;ir?(ur.updateQueue=ir.updateQueue,ur.memoizedState=ir.memoizedState,ur.lanes=ir.lanes):(ur.updateQueue=null,ur.memoizedState=null)}var Yr=Ep(nt);if(Yr!==null){Yr.flags&=-257,kd(Yr,nt,Ot,ge,_),Yr.mode&1&&rh(ge,Mn,_),_=Yr,Nt=Mn;var ii=_.updateQueue;if(ii===null){var ai=new Set;ai.add(Nt),_.updateQueue=ai}else ii.add(Nt);break e}else{if((_&1)===0){rh(ge,Mn,_),N0();break e}Nt=Error(t(426))}}else if(ys&&Ot.mode&1){var fl=Ep(nt);if(fl!==null){(fl.flags&65536)===0&&(fl.flags|=256),kd(fl,nt,Ot,ge,_),ku(Id(Nt,Ot));break e}}ge=Nt=Id(Nt,Ot),Bo!==4&&(Bo=2),Xa===null?Xa=[ge]:Xa.push(ge),ge=nt;do{switch(ge.tag){case 3:ge.flags|=65536,_&=-_,ge.lanes|=_;var cn=Fc(ge,Nt,_);M(ge,cn);break e;case 1:Ot=Nt;var Jt=ge.type,pn=ge.stateNode;if((ge.flags&128)===0&&(typeof Jt.getDerivedStateFromError=="function"||pn!==null&&typeof pn.componentDidCatch=="function"&&(pf===null||!pf.has(pn)))){ge.flags|=65536,_&=-_,ge.lanes|=_;var vr=nh(ge,Ot,_);M(ge,vr);break e}}ge=ge.return}while(ge!==null)}Sl(D)}catch(li){_=li,Xs===D&&D!==null&&(Xs=D=D.return);continue}break}while(!0)}function $g(){var m=hl.current;return hl.current=OA,m===null?OA:m}function N0(){(Bo===0||Bo===3||Bo===2)&&(Bo=4),os===null||(yu&268435455)===0&&(lA&268435455)===0||Kd(os,da)}function gf(m,_){var D=gi;gi|=2;var Q=$g();(os!==m||da!==_)&&(Ph=null,Hf(m,_));do try{Hg();break}catch(ue){j0(m,ue)}while(!0);if(ql(),gi=D,hl.current=Q,Xs!==null)throw Error(t(261));return os=null,da=0,Bo}function Hg(){for(;Xs!==null;)G0(Xs)}function W0(){for(;Xs!==null&&!Il();)G0(Xs)}function G0(m){var _=Q0(m.alternate,m,Is);m.memoizedProps=m.pendingProps,_===null?Sl(m):Xs=_,Sa.current=null}function Sl(m){var _=m;do{var D=_.alternate;if(m=_.return,(_.flags&32768)===0){if(D=ff(D,_,Is),D!==null){Xs=D;return}}else{if(D=A(D,_),D!==null){D.flags&=32767,Xs=D;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Bo=6,Xs=null;return}}if(_=_.sibling,_!==null){Xs=_;return}Xs=_=m}while(_!==null);Bo===0&&(Bo=5)}function Kh(m,_,D){var Q=ti,ue=is.transition;try{is.transition=null,ti=1,Ny(m,_,D,Q)}finally{is.transition=ue,ti=Q}return null}function Ny(m,_,D,Q){do Zf();while(sd!==null);if((gi&6)!==0)throw Error(t(327));D=m.finishedWork;var ue=m.finishedLanes;if(D===null)return null;if(m.finishedWork=null,m.finishedLanes=0,D===m.current)throw Error(t(177));m.callbackNode=null,m.callbackPriority=0;var ge=D.lanes|D.childLanes;if(Mu(m,ge),m===os&&(Xs=os=null,da=0),(D.subtreeFlags&2064)===0&&(D.flags&2064)===0||Gm||(Gm=!0,TA(Kr,function(){return Zf(),null})),ge=(D.flags&15990)!==0,(D.subtreeFlags&15990)!==0||ge){ge=is.transition,is.transition=null;var nt=ti;ti=1;var Ot=gi;gi|=4,Sa.current=null,Ie(m,D),zi(D,m),rf(Gl),Oe=!!Hc,Gl=Hc=null,m.current=D,Fa(D),kl(),gi=Ot,ti=nt,is.transition=ge}else m.current=D;if(Gm&&(Gm=!1,sd=m,IA=ue),ge=m.pendingLanes,ge===0&&(pf=null),xt(D.stateNode),kA(m,io()),_!==null)for(Q=m.onRecoverableError,D=0;D<_.length;D++)ue=_[D],Q(ue.value,{componentStack:ue.stack,digest:ue.digest});if(dm)throw dm=!1,m=Wm,Wm=null,m;return(IA&1)!==0&&m.tag!==0&&Zf(),ge=m.pendingLanes,(ge&1)!==0?m===U0?hm++:(hm=0,U0=m):hm=0,MA(),null}function Zf(){if(sd!==null){var m=ls(IA),_=is.transition,D=ti;try{if(is.transition=null,ti=16>m?16:m,sd===null)var Q=!1;else{if(m=sd,sd=null,IA=0,(gi&6)!==0)throw Error(t(331));var ue=gi;for(gi|=4,K=m.current;K!==null;){var ge=K,nt=ge.child;if((K.flags&16)!==0){var Ot=ge.deletions;if(Ot!==null){for(var Nt=0;Nt<Ot.length;Nt++){var Mn=Ot[Nt];for(K=Mn;K!==null;){var ur=K;switch(ur.tag){case 0:case 11:case 15:Ue(8,ur,ge)}var mr=ur.child;if(mr!==null)mr.return=ur,K=mr;else for(;K!==null;){ur=K;var ir=ur.sibling,Yr=ur.return;if(Xt(ur),ur===Mn){K=null;break}if(ir!==null){ir.return=Yr,K=ir;break}K=Yr}}}var ii=ge.alternate;if(ii!==null){var ai=ii.child;if(ai!==null){ii.child=null;do{var fl=ai.sibling;ai.sibling=null,ai=fl}while(ai!==null)}}K=ge}}if((ge.subtreeFlags&2064)!==0&&nt!==null)nt.return=ge,K=nt;else e:for(;K!==null;){if(ge=K,(ge.flags&2048)!==0)switch(ge.tag){case 0:case 11:case 15:Ue(9,ge,ge.return)}var cn=ge.sibling;if(cn!==null){cn.return=ge.return,K=cn;break e}K=ge.return}}var Jt=m.current;for(K=Jt;K!==null;){nt=K;var pn=nt.child;if((nt.subtreeFlags&2064)!==0&&pn!==null)pn.return=nt,K=pn;else e:for(nt=Jt;K!==null;){if(Ot=K,(Ot.flags&2048)!==0)try{switch(Ot.tag){case 0:case 11:case 15:gt(9,Ot)}}catch(li){Ua(Ot,Ot.return,li)}if(Ot===nt){K=null;break e}var vr=Ot.sibling;if(vr!==null){vr.return=Ot.return,K=vr;break e}K=Ot.return}}if(gi=ue,MA(),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Gs,m)}catch{}Q=!0}return Q}finally{ti=D,is.transition=_}}return!1}function Op(m,_,D){_=Id(D,_),_=Fc(m,_,1),m=c(m,_,1),_=JA(),m!==null&&(Ms(m,1,_),kA(m,_))}function Ua(m,_,D){if(m.tag===3)Op(m,m,D);else for(;_!==null;){if(_.tag===3){Op(_,m,D);break}else if(_.tag===1){var Q=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(pf===null||!pf.has(Q))){m=Id(D,m),m=nh(_,m,1),_=c(_,m,1),m=JA(),_!==null&&(Ms(_,1,m),kA(_,m));break}}_=_.return}}function Wy(m,_,D){var Q=m.pingCache;Q!==null&&Q.delete(_),_=JA(),m.pingedLanes|=m.suspendedLanes&D,os===m&&(da&D)===D&&(Bo===4||Bo===3&&(da&130023424)===da&&500>io()-Th?Hf(m,0):od|=D),kA(m,_)}function Zg(m,_){_===0&&((m.mode&1)===0?_=1:(_=xo,xo<<=1,(xo&130023424)===0&&(xo=4194304)));var D=JA();m=EA(m,_),m!==null&&(Ms(m,_,D),kA(m,D))}function Gy(m){var _=m.memoizedState,D=0;_!==null&&(D=_.retryLane),Zg(m,D)}function Qy(m,_){var D=0;switch(m.tag){case 13:var Q=m.stateNode,ue=m.memoizedState;ue!==null&&(D=ue.retryLane);break;case 19:Q=m.stateNode;break;default:throw Error(t(314))}Q!==null&&Q.delete(_),Zg(m,D)}var Q0;Q0=function(m,_,D){if(m!==null)if(m.memoizedProps!==_.pendingProps||uu.current)Zl=!0;else{if((m.lanes&D)===0&&(_.flags&128)===0)return Zl=!1,Nm(m,_,D);Zl=(m.flags&131072)!==0}else Zl=!1,ys&&(_.flags&1048576)!==0&&gs(_,Yl,_.index);switch(_.lanes=0,_.tag){case 2:var Q=_.type;id(m,_),m=_.pendingProps;var ue=hc(_,qa.current);hu(_,D),ue=kr(null,_,Q,m,ue,D);var ge=Ri();return _.flags|=1,typeof ue=="object"&&ue!==null&&typeof ue.render=="function"&&ue.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Bs(Q)?(ge=!0,Au(_)):ge=!1,_.memoizedState=ue.state!==null&&ue.state!==void 0?ue.state:null,Bd(_),ue.updater=uf,_.stateNode=ue,ue._reactInternals=_,Nf(_,Q,m,D),_=Jl(null,_,Q,!0,ge,D)):(_.tag=0,ys&&ge&&rA(_),Xl(null,_,ue,D),_=_.child),_;case 16:Q=_.elementType;e:{switch(id(m,_),m=_.pendingProps,ue=Q._init,Q=ue(Q._payload),_.type=Q,ue=_.tag=$m(Q),m=dl(Q,m),ue){case 0:_=Td(null,_,Q,m,D);break e;case 1:_=mu(null,_,Q,m,D);break e;case 11:_=um(null,_,Q,m,D);break e;case 14:_=Bp(null,_,Q,dl(Q.type,m),D);break e}throw Error(t(306,Q,""))}return _;case 0:return Q=_.type,ue=_.pendingProps,ue=_.elementType===Q?ue:dl(Q,ue),Td(m,_,Q,ue,D);case 1:return Q=_.type,ue=_.pendingProps,ue=_.elementType===Q?ue:dl(Q,ue),mu(m,_,Q,ue,D);case 3:e:{if(Yf(_),m===null)throw Error(t(387));Q=_.pendingProps,ge=_.memoizedState,ue=ge.element,O(m,_),k(_,Q,null,D);var nt=_.memoizedState;if(Q=nt.element,ge.isDehydrated)if(ge={element:Q,isDehydrated:!1,cache:nt.cache,pendingSuspenseBoundaries:nt.pendingSuspenseBoundaries,transitions:nt.transitions},_.updateQueue.baseState=ge,_.memoizedState=ge,_.flags&256){ue=Id(Error(t(423)),_),_=XA(m,_,Q,D,ue);break e}else if(Q!==ue){ue=Id(Error(t(424)),_),_=XA(m,_,Q,D,ue);break e}else for(Ka=dc(_.stateNode.containerInfo.firstChild),_a=_,ys=!0,SA=null,D=HA(_,null,Q,D),_.child=D;D;)D.flags=D.flags&-3|4096,D=D.sibling;else{if(Aa(),Q===ue){_=Ml(m,_,D);break e}Xl(m,_,Q,D)}_=_.child}return _;case 5:return et(_),m===null&&Lr(_),Q=_.type,ue=_.pendingProps,ge=m!==null?m.memoizedProps:null,nt=ue.children,WA(Q,ue)?nt=null:ge!==null&&WA(Q,ge)&&(_.flags|=32),cf(m,_),Xl(m,_,nt,D),_.child;case 6:return m===null&&Lr(_),null;case 13:return hf(m,_,D);case 4:return ke(_,_.stateNode.containerInfo),Q=_.pendingProps,m===null?_.child=$s(_,null,Q,D):Xl(m,_,Q,D),_.child;case 11:return Q=_.type,ue=_.pendingProps,ue=_.elementType===Q?ue:dl(Q,ue),um(m,_,Q,ue,D);case 7:return Xl(m,_,_.pendingProps,D),_.child;case 8:return Xl(m,_,_.pendingProps.children,D),_.child;case 12:return Xl(m,_,_.pendingProps.children,D),_.child;case 10:e:{if(Q=_.type._context,ue=_.pendingProps,ge=_.memoizedProps,nt=ue.value,Es(du,Q._currentValue),Q._currentValue=nt,ge!==null)if(un(ge.value,nt)){if(ge.children===ue.children&&!uu.current){_=Ml(m,_,D);break e}}else for(ge=_.child,ge!==null&&(ge.return=_);ge!==null;){var Ot=ge.dependencies;if(Ot!==null){nt=ge.child;for(var Nt=Ot.firstContext;Nt!==null;){if(Nt.context===Q){if(ge.tag===1){Nt=a(-1,D&-D),Nt.tag=2;var Mn=ge.updateQueue;if(Mn!==null){Mn=Mn.shared;var ur=Mn.pending;ur===null?Nt.next=Nt:(Nt.next=ur.next,ur.next=Nt),Mn.pending=Nt}}ge.lanes|=D,Nt=ge.alternate,Nt!==null&&(Nt.lanes|=D),Hs(ge.return,D,_),Ot.lanes|=D;break}Nt=Nt.next}}else if(ge.tag===10)nt=ge.type===_.type?null:ge.child;else if(ge.tag===18){if(nt=ge.return,nt===null)throw Error(t(341));nt.lanes|=D,Ot=nt.alternate,Ot!==null&&(Ot.lanes|=D),Hs(nt,D,_),nt=ge.sibling}else nt=ge.child;if(nt!==null)nt.return=ge;else for(nt=ge;nt!==null;){if(nt===_){nt=null;break}if(ge=nt.sibling,ge!==null){ge.return=nt.return,nt=ge;break}nt=nt.return}ge=nt}Xl(m,_,ue.children,D),_=_.child}return _;case 9:return ue=_.type,Q=_.pendingProps.children,hu(_,D),ue=fu(ue),Q=Q(ue),_.flags|=1,Xl(m,_,Q,D),_.child;case 14:return Q=_.type,ue=dl(Q,_.pendingProps),ue=dl(Q.type,ue),Bp(m,_,Q,ue,D);case 15:return Zo(m,_,_.type,_.pendingProps,D);case 17:return Q=_.type,ue=_.pendingProps,ue=_.elementType===Q?ue:dl(Q,ue),id(m,_),_.tag=1,Bs(Q)?(m=!0,Au(_)):m=!1,hu(_,D),Od(_,Q,ue),Nf(_,Q,ue,D),Jl(null,_,Q,!0,m,D);case 19:return rd(m,_,D);case 22:return Qf(m,_,D)}throw Error(t(156,_.tag))};function TA(m,_){return ps(m,_)}function Y0(m,_,D,Q){this.tag=m,this.key=D,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(m,_,D,Q){return new Y0(m,_,D,Q)}function Rd(m){return m=m.prototype,!(!m||!m.isReactComponent)}function $m(m){if(typeof m=="function")return Rd(m)?1:0;if(m!=null){if(m=m.$$typeof,m===me)return 11;if(m===xe)return 14}return 2}function ec(m,_){var D=m.alternate;return D===null?(D=Lc(m.tag,_,m.key,m.mode),D.elementType=m.elementType,D.type=m.type,D.stateNode=m.stateNode,D.alternate=m,m.alternate=D):(D.pendingProps=_,D.type=m.type,D.flags=0,D.subtreeFlags=0,D.deletions=null),D.flags=m.flags&14680064,D.childLanes=m.childLanes,D.lanes=m.lanes,D.child=m.child,D.memoizedProps=m.memoizedProps,D.memoizedState=m.memoizedState,D.updateQueue=m.updateQueue,_=m.dependencies,D.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},D.sibling=m.sibling,D.index=m.index,D.ref=m.ref,D}function Rh(m,_,D,Q,ue,ge){var nt=2;if(Q=m,typeof m=="function")Rd(m)&&(nt=1);else if(typeof m=="string")nt=5;else e:switch(m){case W:return sh(D.children,ue,ge,_);case ie:nt=8,ue|=8;break;case he:return m=Lc(12,D,_,ue|2),m.elementType=he,m.lanes=ge,m;case Me:return m=Lc(13,D,_,ue),m.elementType=Me,m.lanes=ge,m;case De:return m=Lc(19,D,_,ue),m.elementType=De,m.lanes=ge,m;case Ze:return Xf(D,ue,ge,_);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case fe:nt=10;break e;case Ee:nt=9;break e;case me:nt=11;break e;case xe:nt=14;break e;case At:nt=16,Q=null;break e}throw Error(t(130,m==null?m:typeof m,""))}return _=Lc(nt,D,_,ue),_.elementType=m,_.type=Q,_.lanes=ge,_}function sh(m,_,D,Q){return m=Lc(7,m,Q,_),m.lanes=D,m}function Xf(m,_,D,Q){return m=Lc(22,m,Q,_),m.elementType=Ze,m.lanes=D,m.stateNode={isHidden:!1},m}function q0(m,_,D){return m=Lc(6,m,null,_),m.lanes=D,m}function V0(m,_,D){return _=Lc(4,m.children!==null?m.children:[],m.key,_),_.lanes=D,_.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},_}function Xg(m,_,D,Q,ue){this.tag=_,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=na(0),this.expirationTimes=na(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=na(0),this.identifierPrefix=Q,this.onRecoverableError=ue,this.mutableSourceEagerHydrationData=null}function Hm(m,_,D,Q,ue,ge,nt,Ot,Nt){return m=new Xg(m,_,D,Ot,Nt),_===1?(_=1,ge===!0&&(_|=8)):_=0,ge=Lc(3,null,null,_),m.current=ge,ge.stateNode=m,ge.memoizedState={element:Q,isDehydrated:D,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bd(ge),m}function Yy(m,_,D){var Q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:Q==null?null:""+Q,children:m,containerInfo:_,implementation:D}}function $0(m){if(!m)return Xc;m=m._reactInternals;e:{if(Mr(m)!==m||m.tag!==1)throw Error(t(170));var _=m;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Bs(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(t(171))}if(m.tag===1){var D=m.type;if(Bs(D))return Jc(m,D,_)}return _}function H0(m,_,D,Q,ue,ge,nt,Ot,Nt){return m=Hm(D,Q,!0,m,ue,ge,nt,Ot,Nt),m.context=$0(null),D=m.current,Q=JA(),ue=mf(D),ge=a(Q,ue),ge.callback=_??null,c(D,ge,ue),m.current.lanes=ue,Ms(m,ue,Q),kA(m,Q),m}function Ip(m,_,D,Q){var ue=_.current,ge=JA(),nt=mf(ue);return D=$0(D),_.context===null?_.context=D:_.pendingContext=D,_=a(ge,nt),_.payload={element:m},Q=Q===void 0?null:Q,Q!==null&&(_.callback=Q),m=c(ue,_,nt),m!==null&&(ad(m,ue,nt,ge),C(m,ue,nt)),nt}function kp(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function Jg(m,_){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var D=m.retryLane;m.retryLane=D!==0&&D<_?D:_}}function Zm(m,_){Jg(m,_),(m=m.alternate)&&Jg(m,_)}var e1=typeof reportError=="function"?reportError:function(m){console.error(m)};function Z0(m){this._internalRoot=m}mm.prototype.render=Z0.prototype.render=function(m){var _=this._internalRoot;if(_===null)throw Error(t(409));Ip(m,_,null,null)},mm.prototype.unmount=Z0.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var _=m.containerInfo;$f(function(){Ip(null,m,null,null)}),_[Iu]=null}};function mm(m){this._internalRoot=m}mm.prototype.unstable_scheduleHydration=function(m){if(m){var _=Do();m={blockedOn:null,target:m,priority:_};for(var D=0;D<zs.length&&_!==0&&_<zs[D].priority;D++);zs.splice(D,0,m),D===0&&Hi(m)}};function Xm(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function Jm(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function X0(){}function t1(m,_,D,Q,ue){if(ue){if(typeof Q=="function"){var ge=Q;Q=function(){var Mn=kp(nt);ge.call(Mn)}}var nt=H0(_,Q,m,0,null,!1,!1,"",X0);return m._reactRootContainer=nt,m[Iu]=nt.current,Xu(m.nodeType===8?m.parentNode:m),$f(),nt}for(;ue=m.lastChild;)m.removeChild(ue);if(typeof Q=="function"){var Ot=Q;Q=function(){var Mn=kp(Nt);Ot.call(Mn)}}var Nt=Hm(m,0,!1,null,null,!1,!1,"",X0);return m._reactRootContainer=Nt,m[Iu]=Nt.current,Xu(m.nodeType===8?m.parentNode:m),$f(function(){Ip(_,Nt,D,Q)}),Nt}function yf(m,_,D,Q,ue){var ge=D._reactRootContainer;if(ge){var nt=ge;if(typeof ue=="function"){var Ot=ue;ue=function(){var Nt=kp(nt);Ot.call(Nt)}}Ip(_,nt,m,ue)}else nt=t1(D,_,m,ue,Q);return kp(nt)}ka=function(m){switch(m.tag){case 3:var _=m.stateNode;if(_.current.memoizedState.isDehydrated){var D=as(_.pendingLanes);D!==0&&(Si(_,D|1),kA(_,io()),(gi&6)===0&&(Vf=io()+500,MA()))}break;case 13:$f(function(){var Q=EA(m,1);if(Q!==null){var ue=JA();ad(Q,m,1,ue)}}),Zm(m,1)}},Us=function(m){if(m.tag===13){var _=EA(m,134217728);if(_!==null){var D=JA();ad(_,m,134217728,D)}Zm(m,134217728)}},ho=function(m){if(m.tag===13){var _=mf(m),D=EA(m,_);if(D!==null){var Q=JA();ad(D,m,_,Q)}Zm(m,_)}},Do=function(){return ti},Gu=function(m,_){var D=ti;try{return ti=m,_()}finally{ti=D}},qe=function(m,_,D){switch(_){case"input":if(_n(m,D),_=D.name,D.type==="radio"&&_!=null){for(D=m;D.parentNode;)D=D.parentNode;for(D=D.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<D.length;_++){var Q=D[_];if(Q!==m&&Q.form===m.form){var ue=Go(Q);if(!ue)throw Error(t(90));Ct(Q),_n(Q,ue)}}}break;case"textarea":br(m,D);break;case"select":_=D.value,_!=null&&kn(m,!!D.multiple,_,!1)}},jt=Vm,tn=$f;var Uc={usingClientEntryPoint:!1,Events:[Ti,ri,Go,Qt,Wt,Vm]},ld={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},n1={bundleType:ld.bundleType,version:ld.version,rendererPackageName:ld.rendererPackageName,rendererConfig:ld.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=xs(m),m===null?null:m.stateNode},findFiberByHostInstance:ld.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tp.isDisabled&&Tp.supportsFiber)try{Gs=Tp.inject(n1),Ye=Tp}catch{}}return Ah.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uc,Ah.createPortal=function(m,_){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xm(_))throw Error(t(200));return Yy(m,_,null,D)},Ah.createRoot=function(m,_){if(!Xm(m))throw Error(t(299));var D=!1,Q="",ue=e1;return _!=null&&(_.unstable_strictMode===!0&&(D=!0),_.identifierPrefix!==void 0&&(Q=_.identifierPrefix),_.onRecoverableError!==void 0&&(ue=_.onRecoverableError)),_=Hm(m,1,!1,null,null,D,!1,Q,ue),m[Iu]=_.current,Xu(m.nodeType===8?m.parentNode:m),new Z0(_)},Ah.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var _=m._reactInternals;if(_===void 0)throw typeof m.render=="function"?Error(t(188)):(m=Object.keys(m).join(","),Error(t(268,m)));return m=xs(_),m=m===null?null:m.stateNode,m},Ah.flushSync=function(m){return $f(m)},Ah.hydrate=function(m,_,D){if(!Jm(_))throw Error(t(200));return yf(null,m,_,!0,D)},Ah.hydrateRoot=function(m,_,D){if(!Xm(m))throw Error(t(405));var Q=D!=null&&D.hydratedSources||null,ue=!1,ge="",nt=e1;if(D!=null&&(D.unstable_strictMode===!0&&(ue=!0),D.identifierPrefix!==void 0&&(ge=D.identifierPrefix),D.onRecoverableError!==void 0&&(nt=D.onRecoverableError)),_=H0(_,null,m,1,D??null,ue,!1,ge,nt),m[Iu]=_.current,Xu(m),Q)for(m=0;m<Q.length;m++)D=Q[m],ue=D._getVersion,ue=ue(D._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[D,ue]:_.mutableSourceEagerHydrationData.push(D,ue);return new mm(_)},Ah.render=function(m,_,D){if(!Jm(_))throw Error(t(200));return yf(null,m,_,!1,D)},Ah.unmountComponentAtNode=function(m){if(!Jm(m))throw Error(t(40));return m._reactRootContainer?($f(function(){yf(null,null,m,!1,function(){m._reactRootContainer=null,m[Iu]=null})}),!0):!1},Ah.unstable_batchedUpdates=Vm,Ah.unstable_renderSubtreeIntoContainer=function(m,_,D,Q){if(!Jm(D))throw Error(t(200));if(m==null||m._reactInternals===void 0)throw Error(t(38));return yf(m,_,D,!1,Q)},Ah.version="18.3.1-next-f1338f8080-20240426",Ah}var d8;function RC(){if(d8)return v3.exports;d8=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),v3.exports=$N(),v3.exports}var h8;function HN(){if(h8)return k_;h8=1;var n=RC();return k_.createRoot=n.createRoot,k_.hydrateRoot=n.hydrateRoot,k_}var ZN=HN();const XN="modulepreload",JN=function(n){return"/maputnik/"+n},f8={},s1=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(t.map(p=>{if(p=JN(p),p in f8)return;f8[p]=!0;const v=p.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${x}`))return;const B=document.createElement("link");if(B.rel=v?"stylesheet":XN,v||(B.as="script"),B.crossOrigin="",B.href=p,o&&B.setAttribute("nonce",o),document.head.appendChild(B),v)return new Promise((T,P)=>{B.addEventListener("load",T),B.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${p}`)))})}))}function s(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},eW=(n,e,t)=>{const r=n[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((i,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Eo=n=>typeof n=="string",Av=()=>{let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t},p8=n=>n==null?"":""+n,tW=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},nW=/###/g,m8=n=>n&&n.indexOf("###")>-1?n.replace(nW,"."):n,g8=n=>!n||Eo(n),Wv=(n,e,t)=>{const r=Eo(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(g8(n))return{};const s=m8(r[i]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++i}return g8(n)?{}:{obj:n,k:m8(r[i])}},y8=(n,e,t)=>{const{obj:r,k:i}=Wv(n,e,Object);if(r!==void 0||e.length===1){r[i]=t;return}let s=e[e.length-1],l=e.slice(0,e.length-1),o=Wv(n,l,Object);for(;o.obj===void 0&&l.length;)s=`${l[l.length-1]}.${s}`,l=l.slice(0,l.length-1),o=Wv(n,l,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},rW=(n,e,t,r)=>{const{obj:i,k:s}=Wv(n,e,Object);i[s]=i[s]||[],i[s].push(t)},Db=(n,e)=>{const{obj:t,k:r}=Wv(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,r))return t[r]},iW=(n,e,t)=>{const r=Db(n,t);return r!==void 0?r:Db(e,t)},bD=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?Eo(n[r])||n[r]instanceof String||Eo(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):bD(n[r],e[r],t):n[r]=e[r]);return n},a1=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var oW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const sW=n=>Eo(n)?n.replace(/[&<>"'\/]/g,e=>oW[e]):n;class aW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const lW=[" ",",","?","!",";"],uW=new aW(20),AW=(n,e,t)=>{e=e||"",t=t||"";const r=lW.filter(l=>e.indexOf(l)<0&&t.indexOf(l)<0);if(r.length===0)return!0;const i=uW.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let s=!i.test(n);if(!s){const l=n.indexOf(t);l>0&&!i.test(n.substring(0,l))&&(s=!0)}return s},BE=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const r=e.split(t);let i=n;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let l,o="";for(let p=s;p<r.length;++p)if(p!==s&&(o+=t),o+=r[p],l=i[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&p<r.length-1)continue;s+=p-s+1;break}i=l}return i},Fb=n=>n==null?void 0:n.replace("_","-"),cW={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,r;(r=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||r.call(t,console,e)}};class Lb{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||cW,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,i){return i&&!this.debug?null:(Eo(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Lb(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Lb(this.logger,e)}}var Wp=new Lb;class z2{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(t)||0;this.observers[r].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(l=>{let[o,p]=l;for(let v=0;v<p;v++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(l=>{let[o,p]=l;for(let v=0;v<p;v++)o.apply(o,[e,...r])})}}class v8 extends z2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){var v,x;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):Eo(r)&&s?o.push(...r.split(s)):o.push(r)));const p=Db(this.data,o);return!p&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),p||!l||!Eo(r)?p:BE((x=(v=this.data)==null?void 0:v[e])==null?void 0:x[t],r,s)}addResource(e,t,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(o=e.split("."),i=t,t=o[1]),this.addNamespaces(t),y8(this.data,o,i),s.silent||this.emit("added",e,t,r,i)}addResources(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(Eo(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});i.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,i,s){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),i=r,r=t,t=o[1]),this.addNamespaces(t);let p=Db(this.data,o)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?bD(p,r,s):p={...p,...r},y8(this.data,o,p),l.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var xD={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,i){return n.forEach(s=>{var l;e=((l=this.processors[s])==null?void 0:l.process(e,t,r,i))??e}),e}};const C8={},_8=n=>!Eo(n)&&typeof n!="boolean"&&typeof n!="number";class Ub extends z2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),tW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Wp.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return(r==null?void 0:r.res)!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!AW(e,r,i);if(l&&!o){const p=e.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:e,namespaces:Eo(s)?[s]:s};const v=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(v[0])>-1)&&(s=v.shift()),e=v.join(i)}return{key:e,namespaces:Eo(s)?[s]:s}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:l,namespaces:o}=this.extractFromKey(e[e.length-1],t),p=o[o.length-1],v=t.lng||this.language,x=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((v==null?void 0:v.toLowerCase())==="cimode"){if(x){const Ee=t.nsSeparator||this.options.nsSeparator;return i?{res:`${p}${Ee}${l}`,usedKey:l,exactUsedKey:l,usedLng:v,usedNS:p,usedParams:this.getUsedParamsDetails(t)}:`${p}${Ee}${l}`}return i?{res:l,usedKey:l,exactUsedKey:l,usedLng:v,usedNS:p,usedParams:this.getUsedParamsDetails(t)}:l}const B=this.resolve(e,t);let T=B==null?void 0:B.res;const P=(B==null?void 0:B.usedKey)||l,U=(B==null?void 0:B.exactUsedKey)||l,j=["[object Number]","[object Function]","[object RegExp]"],N=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,q=!this.i18nFormat||this.i18nFormat.handleAsObject,H=t.count!==void 0&&!Eo(t.count),oe=Ub.hasDefaultValue(t),te=H?this.pluralResolver.getSuffix(v,t.count,t):"",V=t.ordinal&&H?this.pluralResolver.getSuffix(v,t.count,{ordinal:!1}):"",ne=H&&!t.ordinal&&t.count===0,W=ne&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${te}`]||t[`defaultValue${V}`]||t.defaultValue;let ie=T;q&&!T&&oe&&(ie=W);const he=_8(ie),fe=Object.prototype.toString.apply(ie);if(q&&ie&&he&&j.indexOf(fe)<0&&!(Eo(N)&&Array.isArray(ie))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Ee=this.options.returnedObjectHandler?this.options.returnedObjectHandler(P,ie,{...t,ns:o}):`key '${l} (${this.language})' returned an object instead of string.`;return i?(B.res=Ee,B.usedParams=this.getUsedParamsDetails(t),B):Ee}if(s){const Ee=Array.isArray(ie),me=Ee?[]:{},Me=Ee?U:P;for(const De in ie)if(Object.prototype.hasOwnProperty.call(ie,De)){const xe=`${Me}${s}${De}`;oe&&!T?me[De]=this.translate(xe,{...t,defaultValue:_8(W)?W[De]:void 0,joinArrays:!1,ns:o}):me[De]=this.translate(xe,{...t,joinArrays:!1,ns:o}),me[De]===xe&&(me[De]=ie[De])}T=me}}else if(q&&Eo(N)&&Array.isArray(T))T=T.join(N),T&&(T=this.extendTranslation(T,e,t,r));else{let Ee=!1,me=!1;!this.isValidLookup(T)&&oe&&(Ee=!0,T=W),this.isValidLookup(T)||(me=!0,T=l);const De=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&me?void 0:T,xe=oe&&W!==T&&this.options.updateMissing;if(me||Ee||xe){if(this.logger.log(xe?"updateKey":"missingKey",v,p,l,xe?W:T),s){const Ne=this.resolve(l,{...t,keySeparator:!1});Ne&&Ne.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let At=[];const Ze=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Ze&&Ze[0])for(let Ne=0;Ne<Ze.length;Ne++)At.push(Ze[Ne]);else this.options.saveMissingTo==="all"?At=this.languageUtils.toResolveHierarchy(t.lng||this.language):At.push(t.lng||this.language);const Xe=(Ne,Se,Re)=>{var _t;const He=oe&&Re!==T?Re:De;this.options.missingKeyHandler?this.options.missingKeyHandler(Ne,p,Se,He,xe,t):(_t=this.backendConnector)!=null&&_t.saveMissing&&this.backendConnector.saveMissing(Ne,p,Se,He,xe,t),this.emit("missingKey",Ne,p,Se,T)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?At.forEach(Ne=>{const Se=this.pluralResolver.getSuffixes(Ne,t);ne&&t[`defaultValue${this.options.pluralSeparator}zero`]&&Se.indexOf(`${this.options.pluralSeparator}zero`)<0&&Se.push(`${this.options.pluralSeparator}zero`),Se.forEach(Re=>{Xe([Ne],l+Re,t[`defaultValue${Re}`]||W)})}):Xe(At,l,W))}T=this.extendTranslation(T,e,t,B,r),me&&T===l&&this.options.appendNamespaceToMissingKey&&(T=`${p}:${l}`),(me||Ee)&&this.options.parseMissingKeyHandler&&(T=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${p}:${l}`:l,Ee?T:void 0))}return i?(B.res=T,B.usedParams=this.getUsedParamsDetails(t),B):T}extendTranslation(e,t,r,i,s){var v,x;var l=this;if((v=this.i18nFormat)!=null&&v.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const B=Eo(e)&&(((x=r==null?void 0:r.interpolation)==null?void 0:x.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let T;if(B){const U=e.match(this.interpolator.nestingRegexp);T=U&&U.length}let P=r.replace&&!Eo(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(P={...this.options.interpolation.defaultVariables,...P}),e=this.interpolator.interpolate(e,P,r.lng||this.language||i.usedLng,r),B){const U=e.match(this.interpolator.nestingRegexp),j=U&&U.length;T<j&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var U=arguments.length,j=new Array(U),N=0;N<U;N++)j[N]=arguments[N];return(s==null?void 0:s[0])===j[0]&&!r.context?(l.logger.warn(`It seems you are nesting recursively key: ${j[0]} in key: ${t[0]}`),null):l.translate(...j,t)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,p=Eo(o)?[o]:o;return e!=null&&(p!=null&&p.length)&&r.applyPostProcessor!==!1&&(e=xD.handle(p,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,l,o;return Eo(e)&&(e=[e]),e.forEach(p=>{if(this.isValidLookup(r))return;const v=this.extractFromKey(p,t),x=v.key;i=x;let B=v.namespaces;this.options.fallbackNS&&(B=B.concat(this.options.fallbackNS));const T=t.count!==void 0&&!Eo(t.count),P=T&&!t.ordinal&&t.count===0,U=t.context!==void 0&&(Eo(t.context)||typeof t.context=="number")&&t.context!=="",j=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);B.forEach(N=>{var q,H;this.isValidLookup(r)||(o=N,!C8[`${j[0]}-${N}`]&&((q=this.utils)!=null&&q.hasLoadedNamespace)&&!((H=this.utils)!=null&&H.hasLoadedNamespace(o))&&(C8[`${j[0]}-${N}`]=!0,this.logger.warn(`key "${i}" for languages "${j.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(oe=>{var ne;if(this.isValidLookup(r))return;l=oe;const te=[x];if((ne=this.i18nFormat)!=null&&ne.addLookupKeys)this.i18nFormat.addLookupKeys(te,x,oe,N,t);else{let W;T&&(W=this.pluralResolver.getSuffix(oe,t.count,t));const ie=`${this.options.pluralSeparator}zero`,he=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(T&&(te.push(x+W),t.ordinal&&W.indexOf(he)===0&&te.push(x+W.replace(he,this.options.pluralSeparator)),P&&te.push(x+ie)),U){const fe=`${x}${this.options.contextSeparator}${t.context}`;te.push(fe),T&&(te.push(fe+W),t.ordinal&&W.indexOf(he)===0&&te.push(fe+W.replace(he,this.options.pluralSeparator)),P&&te.push(fe+ie))}}let V;for(;V=te.pop();)this.isValidLookup(r)||(s=V,r=this.getResource(oe,N,V,t))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:l,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){var s;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,r,i):this.resourceStore.getResource(e,t,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Eo(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of t)delete i[s]}return i}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}class b8{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Wp.create("languageUtils")}getScriptPartFromCode(e){if(e=Fb(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Fb(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Eo(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Eo(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],s=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Eo(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Eo(e)&&s(this.formatLanguageCode(e)),r.forEach(l=>{i.indexOf(l)<0&&s(this.formatLanguageCode(l))}),i}}const x8={zero:0,one:1,two:2,few:3,many:4,other:5},M8={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class dW{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Wp.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Fb(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let l;try{l=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),M8;if(!e.match(/-|_/))return M8;const p=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(p,t)}return this.pluralRulesCache[s]=l,l}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${t}${i}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>x8[i]-x8[s]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const w8=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=iW(n,e,t);return!s&&i&&Eo(t)&&(s=BE(n,t,r),s===void 0&&(s=BE(e,t,r))),s},b3=n=>n.replace(/\$/g,"$$$$");class hW{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Wp.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:l,suffix:o,suffixEscaped:p,formatSeparator:v,unescapeSuffix:x,unescapePrefix:B,nestingPrefix:T,nestingPrefixEscaped:P,nestingSuffix:U,nestingSuffixEscaped:j,nestingOptionsSeparator:N,maxReplaces:q,alwaysFormat:H}=e.interpolation;this.escape=t!==void 0?t:sW,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?a1(s):l||"{{",this.suffix=o?a1(o):p||"}}",this.formatSeparator=v||",",this.unescapePrefix=x?"":B||"-",this.unescapeSuffix=this.unescapePrefix?"":x||"",this.nestingPrefix=T?a1(T):P||a1("$t("),this.nestingSuffix=U?a1(U):j||a1(")"),this.nestingOptionsSeparator=N||",",this.maxReplaces=q||1e3,this.alwaysFormat=H!==void 0?H:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>(t==null?void 0:t.source)===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,i){var P;let s,l,o;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},v=U=>{if(U.indexOf(this.formatSeparator)<0){const H=w8(t,p,U,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(H,void 0,r,{...i,...t,interpolationkey:U}):H}const j=U.split(this.formatSeparator),N=j.shift().trim(),q=j.join(this.formatSeparator).trim();return this.format(w8(t,p,N,this.options.keySeparator,this.options.ignoreJSONStructure),q,r,{...i,...t,interpolationkey:N})};this.resetRegExp();const x=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,B=((P=i==null?void 0:i.interpolation)==null?void 0:P.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:U=>b3(U)},{regex:this.regexp,safeValue:U=>this.escapeValue?b3(this.escape(U)):b3(U)}].forEach(U=>{for(o=0;s=U.regex.exec(e);){const j=s[1].trim();if(l=v(j),l===void 0)if(typeof x=="function"){const q=x(e,s,i);l=Eo(q)?q:""}else if(i&&Object.prototype.hasOwnProperty.call(i,j))l="";else if(B){l=s[0];continue}else this.logger.warn(`missed to pass in variable ${j} for interpolating ${e}`),l="";else!Eo(l)&&!this.useRawValueToEscape&&(l=p8(l));const N=U.safeValue(l);if(e=e.replace(s[0],N),B?(U.regex.lastIndex+=l.length,U.regex.lastIndex-=s[0].length):U.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,l;const o=(p,v)=>{const x=this.nestingOptionsSeparator;if(p.indexOf(x)<0)return p;const B=p.split(new RegExp(`${x}[ ]*{`));let T=`{${B[1]}`;p=B[0],T=this.interpolate(T,l);const P=T.match(/'/g),U=T.match(/"/g);(((P==null?void 0:P.length)??0)%2===0&&!U||U.length%2!==0)&&(T=T.replace(/'/g,'"'));try{l=JSON.parse(T),v&&(l={...v,...l})}catch(j){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,j),`${p}${x}${T}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,p};for(;i=this.nestingRegexp.exec(e);){let p=[];l={...r},l=l.replace&&!Eo(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let v=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const x=i[1].split(this.formatSeparator).map(B=>B.trim());i[1]=x.shift(),p=x,v=!0}if(s=t(o.call(this,i[1].trim(),l),l),s&&i[0]===e&&!Eo(s))return s;Eo(s)||(s=p8(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),v&&(s=p.reduce((x,B)=>this.format(x,B,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const fW=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(l=>{if(l){const[o,...p]=l.split(":"),v=p.join(":").trim().replace(/^'+|'+$/g,""),x=o.trim();t[x]||(t[x]=v),v==="false"&&(t[x]=!1),v==="true"&&(t[x]=!0),isNaN(v)||(t[x]=parseInt(v,10))}})}return{formatName:e,formatOptions:t}},l1=n=>{const e={};return(t,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const l=r+JSON.stringify(s);let o=e[l];return o||(o=n(Fb(r),i),e[l]=o),o(t)}};class pW{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Wp.create("formatter"),this.options=e,this.formats={number:l1((t,r)=>{const i=new Intl.NumberFormat(t,{...r});return s=>i.format(s)}),currency:l1((t,r)=>{const i=new Intl.NumberFormat(t,{...r,style:"currency"});return s=>i.format(s)}),datetime:l1((t,r)=>{const i=new Intl.DateTimeFormat(t,{...r});return s=>i.format(s)}),relativetime:l1((t,r)=>{const i=new Intl.RelativeTimeFormat(t,{...r});return s=>i.format(s,r.range||"day")}),list:l1((t,r)=>{const i=new Intl.ListFormat(t,{...r});return s=>i.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=l1(t)}format(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(p=>p.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,p)=>{var B;const{formatName:v,formatOptions:x}=fW(p);if(this.formats[v]){let T=o;try{const P=((B=i==null?void 0:i.formatParams)==null?void 0:B[i.interpolationkey])||{},U=P.locale||P.lng||i.locale||i.lng||r;T=this.formats[v](o,U,{...x,...i,...P})}catch(P){this.logger.warn(P)}return T}else this.logger.warn(`there was no format function for ${v}`);return o},e)}}const mW=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class gW extends z2{constructor(e,t,r){var s,l;let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Wp.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(l=(s=this.backend)==null?void 0:s.init)==null||l.call(s,r,i.backend,i)}queueLoad(e,t,r,i){const s={},l={},o={},p={};return e.forEach(v=>{let x=!0;t.forEach(B=>{const T=`${v}|${B}`;!r.reload&&this.store.hasResourceBundle(v,B)?this.state[T]=2:this.state[T]<0||(this.state[T]===1?l[T]===void 0&&(l[T]=!0):(this.state[T]=1,x=!1,l[T]===void 0&&(l[T]=!0),s[T]===void 0&&(s[T]=!0),p[B]===void 0&&(p[B]=!0)))}),x||(o[v]=!0)}),(Object.keys(s).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(p)}}loaded(e,t,r){const i=e.split("|"),s=i[0],l=i[1];t&&this.emit("failedLoading",s,l,t),!t&&r&&this.store.addResourceBundle(s,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(p=>{rW(p.loaded,[s],l),mW(p,e),t&&p.errors.push(t),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(v=>{o[v]||(o[v]={});const x=p.loaded[v];x.length&&x.forEach(B=>{o[v][B]===void 0&&(o[v][B]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(p=>!p.done)}read(e,t,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:i,wait:s,callback:l});return}this.readingCalls++;const o=(v,x)=>{if(this.readingCalls--,this.waitingReads.length>0){const B=this.waitingReads.shift();this.read(B.lng,B.ns,B.fcName,B.tried,B.wait,B.callback)}if(v&&x&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,i+1,s*2,l)},s);return}l(v,x)},p=this.backend[r].bind(this.backend);if(p.length===2){try{const v=p(e,t);v&&typeof v.then=="function"?v.then(x=>o(null,x)).catch(o):o(null,v)}catch(v){o(v)}return}return p(e,t,o)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Eo(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Eo(t)&&(t=[t]);const s=this.queueLoad(e,t,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(l=>{this.loadOne(l)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${t}loading namespace ${s} for language ${i} failed`,l),!l&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${i}`,o),this.loaded(e,l,o)})}saveMissing(e,t,r,i,s){var p,v,x,B,T;let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((v=(p=this.services)==null?void 0:p.utils)!=null&&v.hasLoadedNamespace&&!((B=(x=this.services)==null?void 0:x.utils)!=null&&B.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((T=this.backend)!=null&&T.create){const P={...l,isUpdate:s},U=this.backend.create.bind(this.backend);if(U.length<6)try{let j;U.length===5?j=U(e,t,r,i,P):j=U(e,t,r,i),j&&typeof j.then=="function"?j.then(N=>o(null,N)).catch(o):o(null,j)}catch(j){o(j)}else U(e,t,r,i,o,P)}!e||!e[0]||this.store.addResource(e[0],t,r,i)}}}const S8=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Eo(n[1])&&(e.defaultValue=n[1]),Eo(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),E8=n=>{var e,t;return Eo(n.ns)&&(n.ns=[n.ns]),Eo(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Eo(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},T_=()=>{},yW=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class rC extends z2{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=E8(e),this.services={},this.logger=Wp,this.modules={external:[]},yW(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Eo(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=S8();this.options={...i,...this.options,...E8(t)},this.options.interpolation={...i.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=x=>x?typeof x=="function"?new x:x:null;if(!this.options.isClone){this.modules.logger?Wp.init(s(this.modules.logger),this.options):Wp.init(null,this.options);let x;this.modules.formatter?x=this.modules.formatter:x=pW;const B=new b8(this.options);this.store=new v8(this.options.resources,this.options);const T=this.services;T.logger=Wp,T.resourceStore=this.store,T.languageUtils=B,T.pluralResolver=new dW(B,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),x&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(T.formatter=s(x),T.formatter.init(T,this.options),this.options.interpolation.format=T.formatter.format.bind(T.formatter)),T.interpolator=new hW(this.options),T.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},T.backendConnector=new gW(s(this.modules.backend),T.resourceStore,T,this.options),T.backendConnector.on("*",function(P){for(var U=arguments.length,j=new Array(U>1?U-1:0),N=1;N<U;N++)j[N-1]=arguments[N];e.emit(P,...j)}),this.modules.languageDetector&&(T.languageDetector=s(this.modules.languageDetector),T.languageDetector.init&&T.languageDetector.init(T,this.options.detection,this.options)),this.modules.i18nFormat&&(T.i18nFormat=s(this.modules.i18nFormat),T.i18nFormat.init&&T.i18nFormat.init(this)),this.translator=new Ub(this.services,this.options),this.translator.on("*",function(P){for(var U=arguments.length,j=new Array(U>1?U-1:0),N=1;N<U;N++)j[N-1]=arguments[N];e.emit(P,...j)}),this.modules.external.forEach(P=>{P.init&&P.init(this)})}if(this.format=this.options.interpolation.format,r||(r=T_),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const x=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);x.length>0&&x[0]!=="dev"&&(this.options.lng=x[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(x=>{this[x]=function(){return e.store[x](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(x=>{this[x]=function(){return e.store[x](...arguments),e}});const p=Av(),v=()=>{const x=(B,T)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),p.resolve(T),r(B,T)};if(this.languages&&!this.isInitialized)return x(null,this.t.bind(this));this.changeLanguage(this.options.lng,x)};return this.options.resources||!this.options.initAsync?v():setTimeout(v,0),p}loadResources(e){var s,l;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T_;const i=Eo(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],p=v=>{if(!v||v==="cimode")return;this.services.languageUtils.toResolveHierarchy(v).forEach(B=>{B!=="cimode"&&o.indexOf(B)<0&&o.push(B)})};i?p(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(x=>p(x)),(l=(s=this.options.preload)==null?void 0:s.forEach)==null||l.call(s,v=>p(v)),this.services.backendConnector.load(o,this.options.ns,v=>{!v&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(v)})}else r(null)}reloadResources(e,t,r){const i=Av();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=T_),this.services.backendConnector.reload(e,t,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&xD.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const i=Av();this.emit("languageChanging",e);const s=p=>{this.language=p,this.languages=this.services.languageUtils.toResolveHierarchy(p),this.resolvedLanguage=void 0,this.setResolvedLanguage(p)},l=(p,v)=>{v?(s(v),this.translator.changeLanguage(v),this.isLanguageChangingTo=void 0,this.emit("languageChanged",v),this.logger.log("languageChanged",v)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),t&&t(p,function(){return r.t(...arguments)})},o=p=>{var x,B;!e&&!p&&this.services.languageDetector&&(p=[]);const v=Eo(p)?p:this.services.languageUtils.getBestMatchFromCodes(p);v&&(this.language||s(v),this.translator.language||this.translator.changeLanguage(v),(B=(x=this.services.languageDetector)==null?void 0:x.cacheUserLanguage)==null||B.call(x,v)),this.loadResources(v,T=>{l(T,v)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),i}getFixedT(e,t,r){var i=this;const s=function(l,o){let p;if(typeof o!="object"){for(var v=arguments.length,x=new Array(v>2?v-2:0),B=2;B<v;B++)x[B-2]=arguments[B];p=i.options.overloadTranslationOptionHandler([l,o].concat(x))}else p={...o};p.lng=p.lng||s.lng,p.lngs=p.lngs||s.lngs,p.ns=p.ns||s.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||r||s.keyPrefix);const T=i.options.keySeparator||".";let P;return p.keyPrefix&&Array.isArray(l)?P=l.map(U=>`${p.keyPrefix}${T}${U}`):P=p.keyPrefix?`${p.keyPrefix}${T}${l}`:l,i.t(P,p)};return Eo(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.translate(...t)}exists(){var i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(i=this.translator)==null?void 0:i.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(o,p)=>{const v=this.services.backendConnector.state[`${o}|${p}`];return v===-1||v===0||v===2};if(t.precheck){const o=t.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!i||l(s,e)))}loadNamespaces(e,t){const r=Av();return this.options.ns?(Eo(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),t&&t(i)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=Av();Eo(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return s.length?(this.options.preload=i.concat(s),this.loadResources(l=>{r.resolve(),t&&t(l)}),r):(t&&t(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new b8(S8());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new rC(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T_;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new rC(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const o=Object.keys(this.store.data).reduce((p,v)=>(p[v]={...this.store.data[v]},Object.keys(p[v]).reduce((x,B)=>(x[B]={...p[v][B]},x),{})),{});s.store=new v8(o,i),s.services.resourceStore=s.store}return s.translator=new Ub(s.services,i),s.translator.on("*",function(o){for(var p=arguments.length,v=new Array(p>1?p-1:0),x=1;x<p;x++)v[x-1]=arguments[x];s.emit(o,...v)}),s.init(i,t),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Qc=rC.createInstance();Qc.createInstance=rC.createInstance;Qc.createInstance;Qc.dir;Qc.init;Qc.loadResources;Qc.reloadResources;Qc.use;Qc.changeLanguage;Qc.getFixedT;Qc.t;Qc.exists;Qc.setDefaultNamespace;Qc.hasLoadedNamespace;Qc.loadNamespaces;Qc.loadLanguages;const{slice:vW,forEach:CW}=[];function _W(n){return CW.call(vW.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}const B8=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,bW=function(n,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${n}=${i}`;if(r.maxAge>0){const l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(l)}`}if(r.domain){if(!B8.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!B8.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},O8={create(n,e,t,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+t*60*1e3)),r&&(i.domain=r),document.cookie=bW(n,encodeURIComponent(e),i)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let r=0;r<t.length;r++){let i=t[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(n){this.create(n,"",-1)}};var xW={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return O8.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;t&&typeof document<"u"&&O8.create(t,n,r,i,s)}},MW={name:"querystring",lookup(n){var r;let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const l=i.substring(1).split("&");for(let o=0;o<l.length;o++){const p=l[o].indexOf("=");p>0&&l[o].substring(0,p)===e&&(t=l[o].substring(p+1))}}return t}};let u1=null;const I8=()=>{if(u1!==null)return u1;try{if(u1=typeof window<"u"&&window.localStorage!==null,!u1)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{u1=!1}return u1};var wW={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&I8())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&I8()&&window.localStorage.setItem(t,n)}};let A1=null;const k8=()=>{if(A1!==null)return A1;try{if(A1=typeof window<"u"&&window.sessionStorage!==null,!A1)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{A1=!1}return A1};var SW={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&k8())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&k8()&&window.sessionStorage.setItem(t,n)}},EW={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:r,language:i}=navigator;if(t)for(let s=0;s<t.length;s++)e.push(t[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},BW={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},OW={name:"path",lookup(n){var i;let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?(i=t[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},IW={name:"subdomain",lookup(n){var i,s;let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[t]}};let MD=!1;try{document.cookie,MD=!0}catch{}const wD=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];MD||wD.splice(1,1);const kW=()=>({order:wD,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class SD{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=_W(t,this.options||{},kW()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(xW),this.addDetector(MW),this.addDetector(wW),this.addDetector(SW),this.addDetector(EW),this.addDetector(BW),this.addDetector(OW),this.addDetector(IW)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(t=t.concat(i))}}),t=t.map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}SD.type="languageDetector";var TW=function(e){return{type:"backend",init:function(r,i,s){},read:function(r,i,s){if(typeof e=="function"){if(e.length<3){try{var l=e(r,i);l&&typeof l.then=="function"?l.then(function(o){return s(null,o&&o.default||o)}).catch(s):s(null,l)}catch(o){s(o)}return}e(r,i,s);return}s(null,e[r]&&e[r][i])}}},x3,T8;function PW(){return T8||(T8=1,x3={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),x3}var KW=PW();const RW=yl(KW);var DW=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function P8(n){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=n.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(e.name=t[1],(RW[t[1]]||n.charAt(n.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=n.indexOf("-->");return{type:"comment",comment:r!==-1?n.slice(4,r):""}}for(var i=new RegExp(DW),s=null;(s=i.exec(n))!==null;)if(s[0].trim())if(s[1]){var l=s[1].trim(),o=[l,""];l.indexOf("=")>-1&&(o=l.split("=")),e.attrs[o[0]]=o[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var FW=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,LW=/^\s*$/,UW=Object.create(null);function ED(n,e){switch(e.type){case"text":return n+e.content;case"tag":return n+="<"+e.name+(e.attrs?function(t){var r=[];for(var i in t)r.push(i+'="'+t[i]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?n:n+e.children.reduce(ED,"")+"</"+e.name+">";case"comment":return n+"<!--"+e.comment+"-->"}}var zW={parse:function(n,e){e||(e={}),e.components||(e.components=UW);var t,r=[],i=[],s=-1,l=!1;if(n.indexOf("<")!==0){var o=n.indexOf("<");r.push({type:"text",content:o===-1?n:n.substring(0,o)})}return n.replace(FW,function(p,v){if(l){if(p!=="</"+t.name+">")return;l=!1}var x,B=p.charAt(1)!=="/",T=p.startsWith("<!--"),P=v+p.length,U=n.charAt(P);if(T){var j=P8(p);return s<0?(r.push(j),r):((x=i[s]).children.push(j),r)}if(B&&(s++,(t=P8(p)).type==="tag"&&e.components[t.name]&&(t.type="component",l=!0),t.voidElement||l||!U||U==="<"||t.children.push({type:"text",content:n.slice(P,n.indexOf("<",P))}),s===0&&r.push(t),(x=i[s-1])&&x.children.push(t),i[s]=t),(!B||t.voidElement)&&(s>-1&&(t.voidElement||t.name===p.slice(2,-1))&&(s--,t=s===-1?r:i[s]),!l&&U!=="<"&&U)){x=s===-1?r:i[s].children;var N=n.indexOf("<",P),q=n.slice(P,N===-1?void 0:N);LW.test(q)&&(q=" "),(N>-1&&s+x.length>=0||q!==" ")&&x.push({type:"text",content:q})}}),r},stringify:function(n){return n.reduce(function(e,t){return e+ED("",t)},"")}};const _b=(n,e,t,r)=>{var s,l,o,p;const i=[t,{code:e,...r||{}}];if((l=(s=n==null?void 0:n.services)==null?void 0:s.logger)!=null&&l.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);$h(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(p=(o=n==null?void 0:n.services)==null?void 0:o.logger)!=null&&p.warn?n.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},K8={},iC=(n,e,t,r)=>{$h(t)&&K8[t]||($h(t)&&(K8[t]=new Date),_b(n,e,t,r))},BD=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},OE=(n,e,t)=>{n.loadNamespaces(e,BD(n,t))},R8=(n,e,t,r)=>{if($h(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return OE(n,t,r);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,BD(n,r))},jW=(n,e,t={})=>!e.languages||!e.languages.length?(iC(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,i)=>{var s;if(((s=t.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,n))return!1}}),NW=n=>n.displayName||n.name||($h(n)&&n.length>0?n:"Unknown"),$h=n=>typeof n=="string",gg=n=>typeof n=="object"&&n!==null,WW=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,GW={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},QW=n=>GW[n],YW=n=>n.replace(WW,QW);let IE={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:YW};const qW=(n={})=>{IE={...IE,...n}},OD=()=>IE;let ID;const VW=n=>{ID=n},N6=()=>ID,M3=(n,e)=>{var r;if(!n)return!1;const t=((r=n.props)==null?void 0:r.children)??n.children;return e?t.length>0:!!t},w3=n=>{var t,r;if(!n)return[];const e=((t=n.props)==null?void 0:t.children)??n.children;return(r=n.props)!=null&&r.i18nIsDynamicList?V1(e):e},$W=n=>Array.isArray(n)&&n.every(Ai.isValidElement),V1=n=>Array.isArray(n)?n:[n],HW=(n,e)=>{const t={...e};return t.props=Object.assign(n.props,e.props),t},kD=(n,e,t,r)=>{if(!n)return"";let i="";const s=V1(n),l=e!=null&&e.transSupportBasicHtmlNodes?e.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((o,p)=>{if($h(o)){i+=`${o}`;return}if(Ai.isValidElement(o)){const{props:v,type:x}=o,B=Object.keys(v).length,T=l.indexOf(x)>-1,P=v.children;if(!P&&T&&!B){i+=`<${x}/>`;return}if(!P&&(!T||B)||v.i18nIsDynamicList){i+=`<${p}></${p}>`;return}if(T&&B===1&&$h(P)){i+=`<${x}>${P}</${x}>`;return}const U=kD(P,e,t,r);i+=`<${p}>${U}</${p}>`;return}if(o===null){_b(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(gg(o)){const{format:v,...x}=o,B=Object.keys(x);if(B.length===1){const T=v?`${B[0]}, ${v}`:B[0];i+=`{{${T}}}`;return}_b(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:o});return}_b(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:o})}),i},ZW=(n,e,t,r,i,s)=>{if(e==="")return[];const l=r.transKeepBasicHtmlNodesFor||[],o=e&&new RegExp(l.map(N=>`<${N}`).join("|")).test(e);if(!n&&!o&&!s)return[e];const p={},v=N=>{V1(N).forEach(H=>{$h(H)||(M3(H)?v(w3(H)):gg(H)&&!Ai.isValidElement(H)&&Object.assign(p,H))})};v(n);const x=zW.parse(`<0>${e}</0>`),B={...p,...i},T=(N,q,H)=>{var V;const oe=w3(N),te=U(oe,q.children,H);return $W(oe)&&te.length===0||(V=N.props)!=null&&V.i18nIsDynamicList?oe:te},P=(N,q,H,oe,te)=>{N.dummy?(N.children=q,H.push(Ai.cloneElement(N,{key:oe},te?void 0:q))):H.push(...Ai.Children.map([N],V=>{const ne={...V.props};return delete ne.i18nIsDynamicList,Ai.createElement(V.type,{...ne,key:oe,ref:V.ref},te?null:q)}))},U=(N,q,H)=>{const oe=V1(N);return V1(q).reduce((V,ne,W)=>{var he,fe;const ie=((fe=(he=ne.children)==null?void 0:he[0])==null?void 0:fe.content)&&t.services.interpolator.interpolate(ne.children[0].content,B,t.language);if(ne.type==="tag"){let Ee=oe[parseInt(ne.name,10)];H.length===1&&!Ee&&(Ee=H[0][ne.name]),Ee||(Ee={});const me=Object.keys(ne.attrs).length!==0?HW({props:ne.attrs},Ee):Ee,Me=Ai.isValidElement(me),De=Me&&M3(ne,!0)&&!ne.voidElement,xe=o&&gg(me)&&me.dummy&&!Me,At=gg(n)&&Object.hasOwnProperty.call(n,ne.name);if($h(me)){const Ze=t.services.interpolator.interpolate(me,B,t.language);V.push(Ze)}else if(M3(me)||De){const Ze=T(me,ne,H);P(me,Ze,V,W)}else if(xe){const Ze=U(oe,ne.children,H);P(me,Ze,V,W)}else if(Number.isNaN(parseFloat(ne.name)))if(At){const Ze=T(me,ne,H);P(me,Ze,V,W,ne.voidElement)}else if(r.transSupportBasicHtmlNodes&&l.indexOf(ne.name)>-1)if(ne.voidElement)V.push(Ai.createElement(ne.name,{key:`${ne.name}-${W}`}));else{const Ze=U(oe,ne.children,H);V.push(Ai.createElement(ne.name,{key:`${ne.name}-${W}`},Ze))}else if(ne.voidElement)V.push(`<${ne.name} />`);else{const Ze=U(oe,ne.children,H);V.push(`<${ne.name}>${Ze}</${ne.name}>`)}else if(gg(me)&&!Me){const Ze=ne.children[0]?ie:null;Ze&&V.push(Ze)}else P(me,ie,V,W,ne.children.length!==1||!ie)}else if(ne.type==="text"){const Ee=r.transWrapTextNodes,me=s?r.unescape(t.services.interpolator.interpolate(ne.content,B,t.language)):t.services.interpolator.interpolate(ne.content,B,t.language);Ee?V.push(Ai.createElement(Ee,{key:`${ne.name}-${W}`},me)):V.push(me)}return V},[])},j=U([{dummy:!0,children:n||[]}],x,V1(n||[]));return w3(j[0])},TD=(n,e,t)=>{const r=n.key||e,i=Ai.cloneElement(n,{key:r});if(!i.props||!i.props.children||t.indexOf(`${e}/>`)<0&&t.indexOf(`${e} />`)<0)return i;function s(){return Ai.createElement(Ai.Fragment,null,i)}return Ai.createElement(s,{key:r})},XW=(n,e)=>n.map((t,r)=>TD(t,r,e)),JW=(n,e)=>{const t={};return Object.keys(n).forEach(r=>{Object.assign(t,{[r]:TD(n[r],r,e)})}),t},eG=(n,e,t,r)=>n?Array.isArray(n)?XW(n,e):gg(n)?JW(n,e):(iC(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null;function tG({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:p,ns:v,i18n:x,t:B,shouldUnescape:T,...P}){var me,Me,De,xe,At,Ze;const U=x||N6();if(!U)return iC(U,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),n;const j=B||U.t.bind(U)||(Xe=>Xe),N={...OD(),...(me=U.options)==null?void 0:me.react};let q=v||j.ns||((Me=U.options)==null?void 0:Me.defaultNS);q=$h(q)?[q]:q||["translation"];const H=kD(n,N,U,r),oe=o||H||N.transEmptyNodeValue||r,{hashTransKey:te}=N,V=r||(te?te(H||oe):H||oe);(xe=(De=U.options)==null?void 0:De.interpolation)!=null&&xe.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...U.options.interpolation.defaultVariables}:{...U.options.interpolation.defaultVariables});const ne=l||e!==void 0&&!((Ze=(At=U.options)==null?void 0:At.interpolation)!=null&&Ze.alwaysFormat)||!n?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},W={...s,context:i||s.context,count:e,...l,...ne,defaultValue:oe,ns:q},ie=V?j(V,W):oe,he=eG(p,ie,U,r),fe=ZW(he||n,ie,U,N,W,T),Ee=t??N.defaultTransParent;return Ee?Ai.createElement(Ee,P,fe):fe}const nG={type:"3rdParty",init(n){qW(n.options.react),VW(n)}},PD=Ai.createContext();class rG{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function E0({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s={},values:l,defaults:o,components:p,ns:v,i18n:x,t:B,shouldUnescape:T,...P}){var H;const{i18n:U,defaultNS:j}=Ai.useContext(PD)||{},N=x||U||N6(),q=B||(N==null?void 0:N.t.bind(N));return tG({children:n,count:e,parent:t,i18nKey:r,context:i,tOptions:s,values:l,defaults:o,components:p,ns:v||(q==null?void 0:q.ns)||j||((H=N==null?void 0:N.options)==null?void 0:H.defaultNS),i18n:N,t:B,shouldUnescape:T,...P})}const iG=(n,e)=>{const t=Ai.useRef();return Ai.useEffect(()=>{t.current=n},[n,e]),t.current},KD=(n,e,t,r)=>n.getFixedT(e,t,r),oG=(n,e,t,r)=>Ai.useCallback(KD(n,e,t,r),[n,e,t,r]),sG=(n,e={})=>{var te,V,ne,W;const{i18n:t}=e,{i18n:r,defaultNS:i}=Ai.useContext(PD)||{},s=t||r||N6();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new rG),!s){iC(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const ie=(fe,Ee)=>$h(Ee)?Ee:gg(Ee)&&$h(Ee.defaultValue)?Ee.defaultValue:Array.isArray(fe)?fe[fe.length-1]:fe,he=[ie,{},!1];return he.t=ie,he.i18n={},he.ready=!1,he}(te=s.options.react)!=null&&te.wait&&iC(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...OD(),...s.options.react,...e},{useSuspense:o,keyPrefix:p}=l;let v=i||((V=s.options)==null?void 0:V.defaultNS);v=$h(v)?[v]:v||["translation"],(W=(ne=s.reportNamespaces).addUsedNamespaces)==null||W.call(ne,v);const x=(s.isInitialized||s.initializedStoreOnce)&&v.every(ie=>jW(ie,s,l)),B=oG(s,e.lng||null,l.nsMode==="fallback"?v:v[0],p),T=()=>B,P=()=>KD(s,e.lng||null,l.nsMode==="fallback"?v:v[0],p),[U,j]=Ai.useState(T);let N=v.join();e.lng&&(N=`${e.lng}${N}`);const q=iG(N),H=Ai.useRef(!0);Ai.useEffect(()=>{const{bindI18n:ie,bindI18nStore:he}=l;H.current=!0,!x&&!o&&(e.lng?R8(s,e.lng,v,()=>{H.current&&j(P)}):OE(s,v,()=>{H.current&&j(P)})),x&&q&&q!==N&&H.current&&j(P);const fe=()=>{H.current&&j(P)};return ie&&(s==null||s.on(ie,fe)),he&&(s==null||s.store.on(he,fe)),()=>{H.current=!1,s&&(ie==null||ie.split(" ").forEach(Ee=>s.off(Ee,fe))),he&&s&&he.split(" ").forEach(Ee=>s.store.off(Ee,fe))}},[s,N]),Ai.useEffect(()=>{H.current&&x&&j(T)},[s,p,x]);const oe=[U,s,x];if(oe.t=U,oe.i18n=s,oe.ready=x,x||!x&&!o)return oe;throw new Promise(ie=>{e.lng?R8(s,e.lng,v,()=>ie()):OE(s,v,()=>ie())})},Ws=(n,e={})=>function(r){function i({forwardedRef:l,...o}){const[p,v,x]=sG(n,{...o,keyPrefix:e.keyPrefix}),B={...o,t:p,i18n:v,tReady:x};return e.withRef&&l?B.ref=l:!e.withRef&&l&&(B.forwardedRef=l),Ai.createElement(r,B)}i.displayName=`withI18nextTranslation(${NW(r)})`,i.WrappedComponent=r;const s=(l,o)=>Ai.createElement(i,Object.assign({},l,{forwardedRef:o}));return e.withRef?Ai.forwardRef(s):i};function nl(){var n="/home/runner/work/maputnik/maputnik/src/i18n.ts",e="f69d9d8f41edfbc571efe934ba014df41eed434c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/i18n.ts",statementMap:{0:{start:{line:5,column:34},end:{line:13,column:1}},1:{start:{line:14,column:0},end:{line:40,column:3}},2:{start:{line:16,column:4},end:{line:18,column:5}},3:{start:{line:17,column:6},end:{line:17,column:16}},4:{start:{line:19,column:4},end:{line:19,column:593}},5:{start:{line:19,column:119},end:{line:19,column:158}},6:{start:{line:19,column:198},end:{line:19,column:237}},7:{start:{line:19,column:277},end:{line:19,column:316}},8:{start:{line:19,column:356},end:{line:19,column:395}},9:{start:{line:19,column:435},end:{line:19,column:474}},10:{start:{line:19,column:514},end:{line:19,column:553}},11:{start:{line:35,column:4},end:{line:37,column:5}},12:{start:{line:36,column:6},end:{line:36,column:13}},13:{start:{line:38,column:4},end:{line:38,column:77}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:21},end:{line:15,column:22}},loc:{start:{line:15,column:35},end:{line:20,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:19,column:113},end:{line:19,column:114}},loc:{start:{line:19,column:119},end:{line:19,column:158}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:19,column:192},end:{line:19,column:193}},loc:{start:{line:19,column:198},end:{line:19,column:237}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:271},end:{line:19,column:272}},loc:{start:{line:19,column:277},end:{line:19,column:316}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:350},end:{line:19,column:351}},loc:{start:{line:19,column:356},end:{line:19,column:395}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:19,column:429},end:{line:19,column:430}},loc:{start:{line:19,column:435},end:{line:19,column:474}},line:19},6:{name:"(anonymous_6)",decl:{start:{line:19,column:508},end:{line:19,column:509}},loc:{start:{line:19,column:514},end:{line:19,column:553}},line:19},7:{name:"(anonymous_7)",decl:{start:{line:34,column:21},end:{line:34,column:22}},loc:{start:{line:34,column:41},end:{line:39,column:3}},line:34}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:35,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:37,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/i18n.ts"],names:[],mappings:"AAAA,MAAA,CAAA,oCAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,CAAA,CAAA,MAAA,CAAO,IAAU,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA;AACjB,MAAA,CAAO,QAAc,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,OAAA,CAAA,gBAAA,CAAA;AACrB,MAAA,CAAO,kBAAwB,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA;AAC/B,MAAA,CAAA,CAAA,CAAS,gBAAwB,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AAE1B,MAAA,CAAA,KAAA,CAAM,kBAAqB,CAAA,CAAA,CAAA;AAAA,CAAA,CAChC,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACN,CAAM,EAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACR,CAAA;AAEA,IACG,CAAA,GAAA,CAAI,QAAQ,CACZ,CAAA,GAAA;AAAA,CACC,CAAA,kBAAA,CAAmB,CAAC,IAAA,CAAA,CAAc,EAAe,CAAA,CAAA,CAAA,CAAA,CAAA;AAC/C,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAI,SAAS,CAAM,EAAA,CAAA,CAAA,CAAA;AAEjB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,CAAC,CAAA;AAAA,CACV,CAAA,CAAA,CAAA;AACA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAO,oCAA8B,CAAA,CAAA,0fAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CACvC,CAAC;AACH,CACC,CAAA,GAAA,CAAI,gBAAgB,CAAA,CACpB,IAAK,CAAA;AAAA,CACJ,CAAA,aAAA,CAAA,CAAe,MAAO,CAAA,IAAA,CAAK,kBAAkB,CAAA;AAAA,CAAA,CAC7C,YAAc,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAAA,CAAA,CACd,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CACb,aAAe,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CACb,WAAa,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AAAA,CACf,CAAA,CAAA;AAAA,CAAA,CACA,WAAa,CAAA,CAAA,IAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,iBAAA,CAAA,EAAA,CAAA;AAAA,CAAA,CACb,WAAa,CAAA,CAAA,KAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,QAAA,CAAA,EAAA,CAAA,KAAA,CAAA,EAAA,CAAA,EAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,GAAA,CAAA;AAAA,CAAA,CACb,iBAAmB,CAAA,CAAA,CAAC,IAAM,CAAA,CAAA,GAAA,CAAA,CAAK,GAAQ,CAAA,CAAA,CAAA,CAAA,CAAA;AACrC,CAAI,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAK,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,CAAM,EAAA,CAAA,CAAA,CAAA;AAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AAAA,CAAQ,CAAA,CAAA,CAAA;AAChC,CAAQ,CAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAK,4BAA4B,GAAG,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAS,KAAK,IAAK,CAAA,CAAA,CAAA,CAAA,CAAI,CAAC,CAAG,CAAA,CAAA,CAAA;AAAA,CACzE,CAAA;AACF,CAAC,CAAA;AAEH,MAAe,CAAA,OAAA,CAAA,IAAA;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f69d9d8f41edfbc571efe934ba014df41eed434c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return nl=function(){return l},l}nl();const RD=(nl().s[0]++,{de:"Deutsch",en:"English",fr:"Franais",he:"",it:"Italiano",ja:"",zh:""});nl().s[1]++;Qc.use(SD).use(TW((n,e)=>(nl().f[0]++,nl().s[2]++,n==="en"?(nl().b[0][0]++,nl().s[3]++,{}):(nl().b[0][1]++,nl().s[4]++,eW(Object.assign({"./locales/de/translation.json":()=>(nl().f[1]++,nl().s[5]++,s1(()=>import("./translation-BA-hEPLm.js"),[])),"./locales/fr/translation.json":()=>(nl().f[2]++,nl().s[6]++,s1(()=>import("./translation-J1EAmmGD.js"),[])),"./locales/he/translation.json":()=>(nl().f[3]++,nl().s[7]++,s1(()=>import("./translation-B80Cngny.js"),[])),"./locales/it/translation.json":()=>(nl().f[4]++,nl().s[8]++,s1(()=>import("./translation-Ckdsp6Ku.js"),[])),"./locales/ja/translation.json":()=>(nl().f[5]++,nl().s[9]++,s1(()=>import("./translation-C8OpQe1w.js"),[])),"./locales/zh/translation.json":()=>(nl().f[6]++,nl().s[10]++,s1(()=>import("./translation-zqWUd59b.js"),[]))}),`./locales/${n}/${e}.json`,4))))).use(nG).init({supportedLngs:Object.keys(RD),keySeparator:!1,nsSeparator:!1,interpolation:{escapeValue:!1},saveMissing:!0,fallbackLng:!1,missingKeyHandler:(n,e,t)=>{if(nl().f[7]++,nl().s[11]++,n[0]==="en"){nl().b[1][0]++,nl().s[12]++;return}else nl().b[1][1]++;nl().s[13]++,console.warn(`Missing translation for "${t}" in "${n.join(", ")}"`)}});var P_={exports:{}},D8;function aG(){return D8||(D8=1,function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=["constructor","render","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"],r=[];function i(l){if(l===void 0){console.error("Autobind error: No context provided.");return}var o=Object.getPrototypeOf(l);arguments.length>1?r=Array.prototype.slice.call(arguments,1):r=Object.getOwnPropertyNames(o),r.forEach(function(p){var v=Object.getOwnPropertyDescriptor(o,p);if(v===void 0){console.warn('Autobind: "'+p+'" method not found in class.');return}t.indexOf(p)!==-1||typeof v.value!="function"||Object.defineProperty(o,p,s(o,p,v))})}function s(l,o,p){var v=p.value;return{configurable:!0,get:function(){if(this===l||this.hasOwnProperty(o))return v;var B=v.bind(this);return Object.defineProperty(this,o,{value:B,configurable:!0,writable:!0}),B}}}n.exports=e.default}(P_,P_.exports)),P_.exports}var S3,F8;function lG(){return F8||(F8=1,S3=aG()),S3}var uG=lG();const AG=yl(uG);var Mv={exports:{}};Mv.exports;var L8;function cG(){return L8||(L8=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",l="[object Array]",o="[object Boolean]",p="[object Date]",v="[object Error]",x="[object Function]",B="[object GeneratorFunction]",T="[object Map]",P="[object Number]",U="[object Object]",j="[object Promise]",N="[object RegExp]",q="[object Set]",H="[object String]",oe="[object Symbol]",te="[object WeakMap]",V="[object ArrayBuffer]",ne="[object DataView]",W="[object Float32Array]",ie="[object Float64Array]",he="[object Int8Array]",fe="[object Int16Array]",Ee="[object Int32Array]",me="[object Uint8Array]",Me="[object Uint8ClampedArray]",De="[object Uint16Array]",xe="[object Uint32Array]",At=/[\\^$.*+?()[\]{}|]/g,Ze=/\w*$/,Xe=/^\[object .+?Constructor\]$/,Ne=/^(?:0|[1-9]\d*)$/,Se={};Se[s]=Se[l]=Se[V]=Se[ne]=Se[o]=Se[p]=Se[W]=Se[ie]=Se[he]=Se[fe]=Se[Ee]=Se[T]=Se[P]=Se[U]=Se[N]=Se[q]=Se[H]=Se[oe]=Se[me]=Se[Me]=Se[De]=Se[xe]=!0,Se[v]=Se[x]=Se[te]=!1;var Re=typeof window=="object"&&window&&window.Object===Object&&window,He=typeof self=="object"&&self&&self.Object===Object&&self,_t=Re||He||Function("return this")(),Gt=e&&!e.nodeType&&e,yt=Gt&&!0&&n&&!n.nodeType&&n,Ft=yt&&yt.exports===Gt;function Tt(ee,Oe){return ee.set(Oe[0],Oe[1]),ee}function Le(ee,Oe){return ee.add(Oe),ee}function Pe(ee,Oe){for(var st=-1,$t=ee?ee.length:0;++st<$t&&Oe(ee[st],st,ee)!==!1;);return ee}function Be(ee,Oe){for(var st=-1,$t=Oe.length,Ir=ee.length;++st<$t;)ee[Ir+st]=Oe[st];return ee}function it(ee,Oe,st,$t){for(var Ir=-1,Vn=ee?ee.length:0;++Ir<Vn;)st=Oe(st,ee[Ir],Ir,ee);return st}function Ct(ee,Oe){for(var st=-1,$t=Array(ee);++st<ee;)$t[st]=Oe(st);return $t}function ft(ee,Oe){return ee==null?void 0:ee[Oe]}function Lt(ee){var Oe=!1;if(ee!=null&&typeof ee.toString!="function")try{Oe=!!(ee+"")}catch{}return Oe}function Zt(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function($t,Ir){st[++Oe]=[Ir,$t]}),st}function Rt(ee,Oe){return function(st){return ee(Oe(st))}}function _n(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function($t){st[++Oe]=$t}),st}var qn=Array.prototype,rn=Function.prototype,ar=Object.prototype,kn=_t["__core-js_shared__"],mn=function(){var ee=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),zn=rn.toString,br=ar.hasOwnProperty,gr=ar.toString,tr=RegExp("^"+zn.call(br).replace(At,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=Ft?_t.Buffer:void 0,ce=_t.Symbol,pe=_t.Uint8Array,rt=Rt(Object.getPrototypeOf,Object),St=Object.create,Ht=ar.propertyIsEnumerable,sn=qn.splice,nr=Object.getOwnPropertySymbols,$e=Ge?Ge.isBuffer:void 0,ae=Rt(Object.keys,Object),Ce=ti(_t,"DataView"),f=ti(_t,"Map"),je=ti(_t,"Promise"),qe=ti(_t,"Set"),Je=ti(_t,"WeakMap"),ut=ti(Object,"create"),dt=Fo(Ce),Qt=Fo(f),Wt=Fo(je),jt=Fo(qe),tn=Fo(Je),Dn=ce?ce.prototype:void 0,Fn=Dn?Dn.valueOf:void 0;function on(ee){var Oe=-1,st=ee?ee.length:0;for(this.clear();++Oe<st;){var $t=ee[Oe];this.set($t[0],$t[1])}}function Sr(){this.__data__=ut?ut(null):{}}function Hn(ee){return this.has(ee)&&delete this.__data__[ee]}function xr(ee){var Oe=this.__data__;if(ut){var st=Oe[ee];return st===r?void 0:st}return br.call(Oe,ee)?Oe[ee]:void 0}function qr(ee){var Oe=this.__data__;return ut?Oe[ee]!==void 0:br.call(Oe,ee)}function Bn(ee,Oe){var st=this.__data__;return st[ee]=ut&&Oe===void 0?r:Oe,this}on.prototype.clear=Sr,on.prototype.delete=Hn,on.prototype.get=xr,on.prototype.has=qr,on.prototype.set=Bn;function $n(ee){var Oe=-1,st=ee?ee.length:0;for(this.clear();++Oe<st;){var $t=ee[Oe];this.set($t[0],$t[1])}}function Yn(){this.__data__=[]}function Qr(ee){var Oe=this.__data__,st=Wa(Oe,ee);if(st<0)return!1;var $t=Oe.length-1;return st==$t?Oe.pop():sn.call(Oe,st,1),!0}function co(ee){var Oe=this.__data__,st=Wa(Oe,ee);return st<0?void 0:Oe[st][1]}function ma(ee){return Wa(this.__data__,ee)>-1}function Mr(ee,Oe){var st=this.__data__,$t=Wa(st,ee);return $t<0?st.push([ee,Oe]):st[$t][1]=Oe,this}$n.prototype.clear=Yn,$n.prototype.delete=Qr,$n.prototype.get=co,$n.prototype.has=ma,$n.prototype.set=Mr;function wi(ee){var Oe=-1,st=ee?ee.length:0;for(this.clear();++Oe<st;){var $t=ee[Oe];this.set($t[0],$t[1])}}function Zi(){this.__data__={hash:new on,map:new(f||$n),string:new on}}function Ts(ee){return Si(this,ee).delete(ee)}function xs(ee){return Si(this,ee).get(ee)}function aa(ee){return Si(this,ee).has(ee)}function ps(ee,Oe){return Si(this,ee).set(ee,Oe),this}wi.prototype.clear=Zi,wi.prototype.delete=Ts,wi.prototype.get=xs,wi.prototype.has=aa,wi.prototype.set=ps;function bi(ee){this.__data__=new $n(ee)}function Il(){this.__data__=new $n}function kl(ee){return this.__data__.delete(ee)}function io(ee){return this.__data__.get(ee)}function vl(ee){return this.__data__.has(ee)}function ol(ee,Oe){var st=this.__data__;if(st instanceof $n){var $t=st.__data__;if(!f||$t.length<t-1)return $t.push([ee,Oe]),this;st=this.__data__=new wi($t)}return st.set(ee,Oe),this}bi.prototype.clear=Il,bi.prototype.delete=kl,bi.prototype.get=io,bi.prototype.has=vl,bi.prototype.set=ol;function bo(ee,Oe){var st=zs(ee)||ga(ee)?Ct(ee.length,String):[],$t=st.length,Ir=!!$t;for(var Vn in ee)br.call(ee,Vn)&&!(Ir&&(Vn=="length"||Gu(Vn,$t)))&&st.push(Vn);return st}function Kr(ee,Oe,st){var $t=ee[Oe];(!(br.call(ee,Oe)&&Mo($t,st))||st===void 0&&!(Oe in ee))&&(ee[Oe]=st)}function Wa(ee,Oe){for(var st=ee.length;st--;)if(Mo(ee[st][0],Oe))return st;return-1}function Vo(ee,Oe){return ee&&na(Oe,Wi(Oe),ee)}function Gs(ee,Oe,st,$t,Ir,Vn,Zr){var di;if($t&&(di=Vn?$t(ee,Ir,Vn,Zr):$t(ee)),di!==void 0)return di;if(!Hr(ee))return ee;var Br=zs(ee);if(Br){if(di=Us(ee),!Oe)return zl(ee,di)}else{var Rr=ka(ee),Vi=Rr==x||Rr==B;if(ao(ee))return lr(ee,Oe);if(Rr==U||Rr==s||Vi&&!Vn){if(Lt(ee))return Vn?ee:{};if(di=ho(Vi?{}:ee),!Oe)return Ms(ee,Vo(di,ee))}else{if(!Se[Rr])return Vn?ee:{};di=Do(ee,Rr,Gs,Oe)}}Zr||(Zr=new bi);var Wo=Zr.get(ee);if(Wo)return Wo;if(Zr.set(ee,di),!Br)var si=st?Mu(ee):Wi(ee);return Pe(si||ee,function(zr,Ui){si&&(Ui=zr,zr=ee[Ui]),Kr(di,Ui,Gs(zr,Oe,st,$t,Ui,ee,Zr))}),di}function Ye(ee){return Hr(ee)?St(ee):{}}function xt(ee,Oe,st){var $t=Oe(ee);return zs(ee)?$t:Be($t,st(ee))}function yn(ee){return gr.call(ee)}function Zn(ee){if(!Hr(ee)||ra(ee))return!1;var Oe=sl(ee)||Lt(ee)?tr:Xe;return Oe.test(Fo(ee))}function dn(ee){if(!No(ee))return ae(ee);var Oe=[];for(var st in Object(ee))br.call(ee,st)&&st!="constructor"&&Oe.push(st);return Oe}function lr(ee,Oe){if(Oe)return ee.slice();var st=new ee.constructor(ee.length);return ee.copy(st),st}function Pi(ee){var Oe=new ee.constructor(ee.byteLength);return new pe(Oe).set(new pe(ee)),Oe}function xo(ee,Oe){var st=Oe?Pi(ee.buffer):ee.buffer;return new ee.constructor(st,ee.byteOffset,ee.byteLength)}function as(ee,Oe,st){var $t=Oe?st(Zt(ee),!0):Zt(ee);return it($t,Tt,new ee.constructor)}function la(ee){var Oe=new ee.constructor(ee.source,Ze.exec(ee));return Oe.lastIndex=ee.lastIndex,Oe}function Wu(ee,Oe,st){var $t=Oe?st(_n(ee),!0):_n(ee);return it($t,Le,new ee.constructor)}function ei(ee){return Fn?Object(Fn.call(ee)):{}}function ki(ee,Oe){var st=Oe?Pi(ee.buffer):ee.buffer;return new ee.constructor(st,ee.byteOffset,ee.length)}function zl(ee,Oe){var st=-1,$t=ee.length;for(Oe||(Oe=Array($t));++st<$t;)Oe[st]=ee[st];return Oe}function na(ee,Oe,st,$t){st||(st={});for(var Ir=-1,Vn=Oe.length;++Ir<Vn;){var Zr=Oe[Ir],di=void 0;Kr(st,Zr,di===void 0?ee[Zr]:di)}return st}function Ms(ee,Oe){return na(ee,ls(ee),Oe)}function Mu(ee){return xt(ee,Wi,ls)}function Si(ee,Oe){var st=ee.__data__;return Qs(Oe)?st[typeof Oe=="string"?"string":"hash"]:st.map}function ti(ee,Oe){var st=ft(ee,Oe);return Zn(st)?st:void 0}var ls=nr?Rt(nr,Object):oo,ka=yn;(Ce&&ka(new Ce(new ArrayBuffer(1)))!=ne||f&&ka(new f)!=T||je&&ka(je.resolve())!=j||qe&&ka(new qe)!=q||Je&&ka(new Je)!=te)&&(ka=function(ee){var Oe=gr.call(ee),st=Oe==U?ee.constructor:void 0,$t=st?Fo(st):void 0;if($t)switch($t){case dt:return ne;case Qt:return T;case Wt:return j;case jt:return q;case tn:return te}return Oe});function Us(ee){var Oe=ee.length,st=ee.constructor(Oe);return Oe&&typeof ee[0]=="string"&&br.call(ee,"index")&&(st.index=ee.index,st.input=ee.input),st}function ho(ee){return typeof ee.constructor=="function"&&!No(ee)?Ye(rt(ee)):{}}function Do(ee,Oe,st,$t){var Ir=ee.constructor;switch(Oe){case V:return Pi(ee);case o:case p:return new Ir(+ee);case ne:return xo(ee,$t);case W:case ie:case he:case fe:case Ee:case me:case Me:case De:case xe:return ki(ee,$t);case T:return as(ee,$t,st);case P:case H:return new Ir(ee);case N:return la(ee);case q:return Wu(ee,$t,st);case oe:return ei(ee)}}function Gu(ee,Oe){return Oe=Oe??i,!!Oe&&(typeof ee=="number"||Ne.test(ee))&&ee>-1&&ee%1==0&&ee<Oe}function Qs(ee){var Oe=typeof ee;return Oe=="string"||Oe=="number"||Oe=="symbol"||Oe=="boolean"?ee!=="__proto__":ee===null}function ra(ee){return!!mn&&mn in ee}function No(ee){var Oe=ee&&ee.constructor,st=typeof Oe=="function"&&Oe.prototype||ar;return ee===st}function Fo(ee){if(ee!=null){try{return zn.call(ee)}catch{}try{return ee+""}catch{}}return""}function es(ee){return Gs(ee,!0,!0)}function Mo(ee,Oe){return ee===Oe||ee!==ee&&Oe!==Oe}function ga(ee){return Ta(ee)&&br.call(ee,"callee")&&(!Ht.call(ee,"callee")||gr.call(ee)==s)}var zs=Array.isArray;function Ga(ee){return ee!=null&&Hi(ee.length)&&!sl(ee)}function Ta(ee){return jl(ee)&&Ga(ee)}var ao=$e||Ki;function sl(ee){var Oe=Hr(ee)?gr.call(ee):"";return Oe==x||Oe==B}function Hi(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=i}function Hr(ee){var Oe=typeof ee;return!!ee&&(Oe=="object"||Oe=="function")}function jl(ee){return!!ee&&typeof ee=="object"}function Wi(ee){return Ga(ee)?bo(ee):dn(ee)}function oo(){return[]}function Ki(){return!1}n.exports=es}(Mv,Mv.exports)),Mv.exports}var dG=cG();const U8=yl(dG);var E3,z8;function hG(){if(z8)return E3;z8=1;var n=NaN,e="[object Symbol]",t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,o=Object.prototype,p=o.toString;function v(j,N,q){return j===j&&(q!==void 0&&(j=j<=q?j:q),N!==void 0&&(j=j>=N?j:N)),j}function x(j){var N=typeof j;return!!j&&(N=="object"||N=="function")}function B(j){return!!j&&typeof j=="object"}function T(j){return typeof j=="symbol"||B(j)&&p.call(j)==e}function P(j){if(typeof j=="number")return j;if(T(j))return n;if(x(j)){var N=typeof j.valueOf=="function"?j.valueOf():j;j=x(N)?N+"":N}if(typeof j!="string")return j===0?j:+j;j=j.replace(t,"");var q=i.test(j);return q||s.test(j)?l(j.slice(2),q?2:8):r.test(j)?n:+j}function U(j,N,q){return q===void 0&&(q=N,N=void 0),q!==void 0&&(q=P(q),q=q===q?q:0),N!==void 0&&(N=P(N),N=N===N?N:0),v(P(j),N,q)}return E3=U,E3}var fG=hG();const j8=yl(fG);var B3={},cv={},N8;function pG(){if(N8)return cv;N8=1,cv.byteLength=o,cv.toByteArray=v,cv.fromByteArray=T;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function l(P){var U=P.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=P.indexOf("=");j===-1&&(j=U);var N=j===U?0:4-j%4;return[j,N]}function o(P){var U=l(P),j=U[0],N=U[1];return(j+N)*3/4-N}function p(P,U,j){return(U+j)*3/4-j}function v(P){var U,j=l(P),N=j[0],q=j[1],H=new t(p(P,N,q)),oe=0,te=q>0?N-4:N,V;for(V=0;V<te;V+=4)U=e[P.charCodeAt(V)]<<18|e[P.charCodeAt(V+1)]<<12|e[P.charCodeAt(V+2)]<<6|e[P.charCodeAt(V+3)],H[oe++]=U>>16&255,H[oe++]=U>>8&255,H[oe++]=U&255;return q===2&&(U=e[P.charCodeAt(V)]<<2|e[P.charCodeAt(V+1)]>>4,H[oe++]=U&255),q===1&&(U=e[P.charCodeAt(V)]<<10|e[P.charCodeAt(V+1)]<<4|e[P.charCodeAt(V+2)]>>2,H[oe++]=U>>8&255,H[oe++]=U&255),H}function x(P){return n[P>>18&63]+n[P>>12&63]+n[P>>6&63]+n[P&63]}function B(P,U,j){for(var N,q=[],H=U;H<j;H+=3)N=(P[H]<<16&16711680)+(P[H+1]<<8&65280)+(P[H+2]&255),q.push(x(N));return q.join("")}function T(P){for(var U,j=P.length,N=j%3,q=[],H=16383,oe=0,te=j-N;oe<te;oe+=H)q.push(B(P,oe,oe+H>te?te:oe+H));return N===1?(U=P[j-1],q.push(n[U>>2]+n[U<<4&63]+"==")):N===2&&(U=(P[j-2]<<8)+P[j-1],q.push(n[U>>10]+n[U>>4&63]+n[U<<2&63]+"=")),q.join("")}return cv}var K_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var W8;function mG(){return W8||(W8=1,K_.read=function(n,e,t,r,i){var s,l,o=i*8-r-1,p=(1<<o)-1,v=p>>1,x=-7,B=t?i-1:0,T=t?-1:1,P=n[e+B];for(B+=T,s=P&(1<<-x)-1,P>>=-x,x+=o;x>0;s=s*256+n[e+B],B+=T,x-=8);for(l=s&(1<<-x)-1,s>>=-x,x+=r;x>0;l=l*256+n[e+B],B+=T,x-=8);if(s===0)s=1-v;else{if(s===p)return l?NaN:(P?-1:1)*(1/0);l=l+Math.pow(2,r),s=s-v}return(P?-1:1)*l*Math.pow(2,s-r)},K_.write=function(n,e,t,r,i,s){var l,o,p,v=s*8-i-1,x=(1<<v)-1,B=x>>1,T=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=r?0:s-1,U=r?1:-1,j=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,l=x):(l=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-l))<1&&(l--,p*=2),l+B>=1?e+=T/p:e+=T*Math.pow(2,1-B),e*p>=2&&(l++,p/=2),l+B>=x?(o=0,l=x):l+B>=1?(o=(e*p-1)*Math.pow(2,i),l=l+B):(o=e*Math.pow(2,B-1)*Math.pow(2,i),l=0));i>=8;n[t+P]=o&255,P+=U,o/=256,i-=8);for(l=l<<i|o,v+=i;v>0;n[t+P]=l&255,P+=U,l/=256,v-=8);n[t+P-U]|=j*128}),K_}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var G8;function gG(){return G8||(G8=1,function(n){const e=pG(),t=mG(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=o,n.SlowBuffer=H,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const Ge=new Uint8Array(1),ce={foo:function(){return 42}};return Object.setPrototypeOf(ce,Uint8Array.prototype),Object.setPrototypeOf(Ge,ce),Ge.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function l(Ge){if(Ge>i)throw new RangeError('The value "'+Ge+'" is invalid for option "size"');const ce=new Uint8Array(Ge);return Object.setPrototypeOf(ce,o.prototype),ce}function o(Ge,ce,pe){if(typeof Ge=="number"){if(typeof ce=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(Ge)}return p(Ge,ce,pe)}o.poolSize=8192;function p(Ge,ce,pe){if(typeof Ge=="string")return T(Ge,ce);if(ArrayBuffer.isView(Ge))return U(Ge);if(Ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge);if(mn(Ge,ArrayBuffer)||Ge&&mn(Ge.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(mn(Ge,SharedArrayBuffer)||Ge&&mn(Ge.buffer,SharedArrayBuffer)))return j(Ge,ce,pe);if(typeof Ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const rt=Ge.valueOf&&Ge.valueOf();if(rt!=null&&rt!==Ge)return o.from(rt,ce,pe);const St=N(Ge);if(St)return St;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ge[Symbol.toPrimitive]=="function")return o.from(Ge[Symbol.toPrimitive]("string"),ce,pe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge)}o.from=function(Ge,ce,pe){return p(Ge,ce,pe)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function v(Ge){if(typeof Ge!="number")throw new TypeError('"size" argument must be of type number');if(Ge<0)throw new RangeError('The value "'+Ge+'" is invalid for option "size"')}function x(Ge,ce,pe){return v(Ge),Ge<=0?l(Ge):ce!==void 0?typeof pe=="string"?l(Ge).fill(ce,pe):l(Ge).fill(ce):l(Ge)}o.alloc=function(Ge,ce,pe){return x(Ge,ce,pe)};function B(Ge){return v(Ge),l(Ge<0?0:q(Ge)|0)}o.allocUnsafe=function(Ge){return B(Ge)},o.allocUnsafeSlow=function(Ge){return B(Ge)};function T(Ge,ce){if((typeof ce!="string"||ce==="")&&(ce="utf8"),!o.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);const pe=oe(Ge,ce)|0;let rt=l(pe);const St=rt.write(Ge,ce);return St!==pe&&(rt=rt.slice(0,St)),rt}function P(Ge){const ce=Ge.length<0?0:q(Ge.length)|0,pe=l(ce);for(let rt=0;rt<ce;rt+=1)pe[rt]=Ge[rt]&255;return pe}function U(Ge){if(mn(Ge,Uint8Array)){const ce=new Uint8Array(Ge);return j(ce.buffer,ce.byteOffset,ce.byteLength)}return P(Ge)}function j(Ge,ce,pe){if(ce<0||Ge.byteLength<ce)throw new RangeError('"offset" is outside of buffer bounds');if(Ge.byteLength<ce+(pe||0))throw new RangeError('"length" is outside of buffer bounds');let rt;return ce===void 0&&pe===void 0?rt=new Uint8Array(Ge):pe===void 0?rt=new Uint8Array(Ge,ce):rt=new Uint8Array(Ge,ce,pe),Object.setPrototypeOf(rt,o.prototype),rt}function N(Ge){if(o.isBuffer(Ge)){const ce=q(Ge.length)|0,pe=l(ce);return pe.length===0||Ge.copy(pe,0,0,ce),pe}if(Ge.length!==void 0)return typeof Ge.length!="number"||zn(Ge.length)?l(0):P(Ge);if(Ge.type==="Buffer"&&Array.isArray(Ge.data))return P(Ge.data)}function q(Ge){if(Ge>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return Ge|0}function H(Ge){return+Ge!=Ge&&(Ge=0),o.alloc(+Ge)}o.isBuffer=function(ce){return ce!=null&&ce._isBuffer===!0&&ce!==o.prototype},o.compare=function(ce,pe){if(mn(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),mn(pe,Uint8Array)&&(pe=o.from(pe,pe.offset,pe.byteLength)),!o.isBuffer(ce)||!o.isBuffer(pe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===pe)return 0;let rt=ce.length,St=pe.length;for(let Ht=0,sn=Math.min(rt,St);Ht<sn;++Ht)if(ce[Ht]!==pe[Ht]){rt=ce[Ht],St=pe[Ht];break}return rt<St?-1:St<rt?1:0},o.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(ce,pe){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(ce.length===0)return o.alloc(0);let rt;if(pe===void 0)for(pe=0,rt=0;rt<ce.length;++rt)pe+=ce[rt].length;const St=o.allocUnsafe(pe);let Ht=0;for(rt=0;rt<ce.length;++rt){let sn=ce[rt];if(mn(sn,Uint8Array))Ht+sn.length>St.length?(o.isBuffer(sn)||(sn=o.from(sn)),sn.copy(St,Ht)):Uint8Array.prototype.set.call(St,sn,Ht);else if(o.isBuffer(sn))sn.copy(St,Ht);else throw new TypeError('"list" argument must be an Array of Buffers');Ht+=sn.length}return St};function oe(Ge,ce){if(o.isBuffer(Ge))return Ge.length;if(ArrayBuffer.isView(Ge)||mn(Ge,ArrayBuffer))return Ge.byteLength;if(typeof Ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ge);const pe=Ge.length,rt=arguments.length>2&&arguments[2]===!0;if(!rt&&pe===0)return 0;let St=!1;for(;;)switch(ce){case"ascii":case"latin1":case"binary":return pe;case"utf8":case"utf-8":return _n(Ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe*2;case"hex":return pe>>>1;case"base64":return ar(Ge).length;default:if(St)return rt?-1:_n(Ge).length;ce=(""+ce).toLowerCase(),St=!0}}o.byteLength=oe;function te(Ge,ce,pe){let rt=!1;if((ce===void 0||ce<0)&&(ce=0),ce>this.length||((pe===void 0||pe>this.length)&&(pe=this.length),pe<=0)||(pe>>>=0,ce>>>=0,pe<=ce))return"";for(Ge||(Ge="utf8");;)switch(Ge){case"hex":return Ne(this,ce,pe);case"utf8":case"utf-8":return De(this,ce,pe);case"ascii":return Ze(this,ce,pe);case"latin1":case"binary":return Xe(this,ce,pe);case"base64":return Me(this,ce,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,ce,pe);default:if(rt)throw new TypeError("Unknown encoding: "+Ge);Ge=(Ge+"").toLowerCase(),rt=!0}}o.prototype._isBuffer=!0;function V(Ge,ce,pe){const rt=Ge[ce];Ge[ce]=Ge[pe],Ge[pe]=rt}o.prototype.swap16=function(){const ce=this.length;if(ce%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let pe=0;pe<ce;pe+=2)V(this,pe,pe+1);return this},o.prototype.swap32=function(){const ce=this.length;if(ce%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let pe=0;pe<ce;pe+=4)V(this,pe,pe+3),V(this,pe+1,pe+2);return this},o.prototype.swap64=function(){const ce=this.length;if(ce%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let pe=0;pe<ce;pe+=8)V(this,pe,pe+7),V(this,pe+1,pe+6),V(this,pe+2,pe+5),V(this,pe+3,pe+4);return this},o.prototype.toString=function(){const ce=this.length;return ce===0?"":arguments.length===0?De(this,0,ce):te.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(ce){if(!o.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce?!0:o.compare(this,ce)===0},o.prototype.inspect=function(){let ce="";const pe=n.INSPECT_MAX_BYTES;return ce=this.toString("hex",0,pe).replace(/(.{2})/g,"$1 ").trim(),this.length>pe&&(ce+=" ... "),"<Buffer "+ce+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(ce,pe,rt,St,Ht){if(mn(ce,Uint8Array)&&(ce=o.from(ce,ce.offset,ce.byteLength)),!o.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ce);if(pe===void 0&&(pe=0),rt===void 0&&(rt=ce?ce.length:0),St===void 0&&(St=0),Ht===void 0&&(Ht=this.length),pe<0||rt>ce.length||St<0||Ht>this.length)throw new RangeError("out of range index");if(St>=Ht&&pe>=rt)return 0;if(St>=Ht)return-1;if(pe>=rt)return 1;if(pe>>>=0,rt>>>=0,St>>>=0,Ht>>>=0,this===ce)return 0;let sn=Ht-St,nr=rt-pe;const $e=Math.min(sn,nr),ae=this.slice(St,Ht),Ce=ce.slice(pe,rt);for(let f=0;f<$e;++f)if(ae[f]!==Ce[f]){sn=ae[f],nr=Ce[f];break}return sn<nr?-1:nr<sn?1:0};function ne(Ge,ce,pe,rt,St){if(Ge.length===0)return-1;if(typeof pe=="string"?(rt=pe,pe=0):pe>2147483647?pe=2147483647:pe<-2147483648&&(pe=-2147483648),pe=+pe,zn(pe)&&(pe=St?0:Ge.length-1),pe<0&&(pe=Ge.length+pe),pe>=Ge.length){if(St)return-1;pe=Ge.length-1}else if(pe<0)if(St)pe=0;else return-1;if(typeof ce=="string"&&(ce=o.from(ce,rt)),o.isBuffer(ce))return ce.length===0?-1:W(Ge,ce,pe,rt,St);if(typeof ce=="number")return ce=ce&255,typeof Uint8Array.prototype.indexOf=="function"?St?Uint8Array.prototype.indexOf.call(Ge,ce,pe):Uint8Array.prototype.lastIndexOf.call(Ge,ce,pe):W(Ge,[ce],pe,rt,St);throw new TypeError("val must be string, number or Buffer")}function W(Ge,ce,pe,rt,St){let Ht=1,sn=Ge.length,nr=ce.length;if(rt!==void 0&&(rt=String(rt).toLowerCase(),rt==="ucs2"||rt==="ucs-2"||rt==="utf16le"||rt==="utf-16le")){if(Ge.length<2||ce.length<2)return-1;Ht=2,sn/=2,nr/=2,pe/=2}function $e(Ce,f){return Ht===1?Ce[f]:Ce.readUInt16BE(f*Ht)}let ae;if(St){let Ce=-1;for(ae=pe;ae<sn;ae++)if($e(Ge,ae)===$e(ce,Ce===-1?0:ae-Ce)){if(Ce===-1&&(Ce=ae),ae-Ce+1===nr)return Ce*Ht}else Ce!==-1&&(ae-=ae-Ce),Ce=-1}else for(pe+nr>sn&&(pe=sn-nr),ae=pe;ae>=0;ae--){let Ce=!0;for(let f=0;f<nr;f++)if($e(Ge,ae+f)!==$e(ce,f)){Ce=!1;break}if(Ce)return ae}return-1}o.prototype.includes=function(ce,pe,rt){return this.indexOf(ce,pe,rt)!==-1},o.prototype.indexOf=function(ce,pe,rt){return ne(this,ce,pe,rt,!0)},o.prototype.lastIndexOf=function(ce,pe,rt){return ne(this,ce,pe,rt,!1)};function ie(Ge,ce,pe,rt){pe=Number(pe)||0;const St=Ge.length-pe;rt?(rt=Number(rt),rt>St&&(rt=St)):rt=St;const Ht=ce.length;rt>Ht/2&&(rt=Ht/2);let sn;for(sn=0;sn<rt;++sn){const nr=parseInt(ce.substr(sn*2,2),16);if(zn(nr))return sn;Ge[pe+sn]=nr}return sn}function he(Ge,ce,pe,rt){return kn(_n(ce,Ge.length-pe),Ge,pe,rt)}function fe(Ge,ce,pe,rt){return kn(qn(ce),Ge,pe,rt)}function Ee(Ge,ce,pe,rt){return kn(ar(ce),Ge,pe,rt)}function me(Ge,ce,pe,rt){return kn(rn(ce,Ge.length-pe),Ge,pe,rt)}o.prototype.write=function(ce,pe,rt,St){if(pe===void 0)St="utf8",rt=this.length,pe=0;else if(rt===void 0&&typeof pe=="string")St=pe,rt=this.length,pe=0;else if(isFinite(pe))pe=pe>>>0,isFinite(rt)?(rt=rt>>>0,St===void 0&&(St="utf8")):(St=rt,rt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ht=this.length-pe;if((rt===void 0||rt>Ht)&&(rt=Ht),ce.length>0&&(rt<0||pe<0)||pe>this.length)throw new RangeError("Attempt to write outside buffer bounds");St||(St="utf8");let sn=!1;for(;;)switch(St){case"hex":return ie(this,ce,pe,rt);case"utf8":case"utf-8":return he(this,ce,pe,rt);case"ascii":case"latin1":case"binary":return fe(this,ce,pe,rt);case"base64":return Ee(this,ce,pe,rt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,ce,pe,rt);default:if(sn)throw new TypeError("Unknown encoding: "+St);St=(""+St).toLowerCase(),sn=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Me(Ge,ce,pe){return ce===0&&pe===Ge.length?e.fromByteArray(Ge):e.fromByteArray(Ge.slice(ce,pe))}function De(Ge,ce,pe){pe=Math.min(Ge.length,pe);const rt=[];let St=ce;for(;St<pe;){const Ht=Ge[St];let sn=null,nr=Ht>239?4:Ht>223?3:Ht>191?2:1;if(St+nr<=pe){let $e,ae,Ce,f;switch(nr){case 1:Ht<128&&(sn=Ht);break;case 2:$e=Ge[St+1],($e&192)===128&&(f=(Ht&31)<<6|$e&63,f>127&&(sn=f));break;case 3:$e=Ge[St+1],ae=Ge[St+2],($e&192)===128&&(ae&192)===128&&(f=(Ht&15)<<12|($e&63)<<6|ae&63,f>2047&&(f<55296||f>57343)&&(sn=f));break;case 4:$e=Ge[St+1],ae=Ge[St+2],Ce=Ge[St+3],($e&192)===128&&(ae&192)===128&&(Ce&192)===128&&(f=(Ht&15)<<18|($e&63)<<12|(ae&63)<<6|Ce&63,f>65535&&f<1114112&&(sn=f))}}sn===null?(sn=65533,nr=1):sn>65535&&(sn-=65536,rt.push(sn>>>10&1023|55296),sn=56320|sn&1023),rt.push(sn),St+=nr}return At(rt)}const xe=4096;function At(Ge){const ce=Ge.length;if(ce<=xe)return String.fromCharCode.apply(String,Ge);let pe="",rt=0;for(;rt<ce;)pe+=String.fromCharCode.apply(String,Ge.slice(rt,rt+=xe));return pe}function Ze(Ge,ce,pe){let rt="";pe=Math.min(Ge.length,pe);for(let St=ce;St<pe;++St)rt+=String.fromCharCode(Ge[St]&127);return rt}function Xe(Ge,ce,pe){let rt="";pe=Math.min(Ge.length,pe);for(let St=ce;St<pe;++St)rt+=String.fromCharCode(Ge[St]);return rt}function Ne(Ge,ce,pe){const rt=Ge.length;(!ce||ce<0)&&(ce=0),(!pe||pe<0||pe>rt)&&(pe=rt);let St="";for(let Ht=ce;Ht<pe;++Ht)St+=br[Ge[Ht]];return St}function Se(Ge,ce,pe){const rt=Ge.slice(ce,pe);let St="";for(let Ht=0;Ht<rt.length-1;Ht+=2)St+=String.fromCharCode(rt[Ht]+rt[Ht+1]*256);return St}o.prototype.slice=function(ce,pe){const rt=this.length;ce=~~ce,pe=pe===void 0?rt:~~pe,ce<0?(ce+=rt,ce<0&&(ce=0)):ce>rt&&(ce=rt),pe<0?(pe+=rt,pe<0&&(pe=0)):pe>rt&&(pe=rt),pe<ce&&(pe=ce);const St=this.subarray(ce,pe);return Object.setPrototypeOf(St,o.prototype),St};function Re(Ge,ce,pe){if(Ge%1!==0||Ge<0)throw new RangeError("offset is not uint");if(Ge+ce>pe)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(ce,pe,rt){ce=ce>>>0,pe=pe>>>0,rt||Re(ce,pe,this.length);let St=this[ce],Ht=1,sn=0;for(;++sn<pe&&(Ht*=256);)St+=this[ce+sn]*Ht;return St},o.prototype.readUintBE=o.prototype.readUIntBE=function(ce,pe,rt){ce=ce>>>0,pe=pe>>>0,rt||Re(ce,pe,this.length);let St=this[ce+--pe],Ht=1;for(;pe>0&&(Ht*=256);)St+=this[ce+--pe]*Ht;return St},o.prototype.readUint8=o.prototype.readUInt8=function(ce,pe){return ce=ce>>>0,pe||Re(ce,1,this.length),this[ce]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(ce,pe){return ce=ce>>>0,pe||Re(ce,2,this.length),this[ce]|this[ce+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(ce,pe){return ce=ce>>>0,pe||Re(ce,2,this.length),this[ce]<<8|this[ce+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(ce,pe){return ce=ce>>>0,pe||Re(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+this[ce+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(ce,pe){return ce=ce>>>0,pe||Re(ce,4,this.length),this[ce]*16777216+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},o.prototype.readBigUInt64LE=gr(function(ce){ce=ce>>>0,ft(ce,"offset");const pe=this[ce],rt=this[ce+7];(pe===void 0||rt===void 0)&&Lt(ce,this.length-8);const St=pe+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24,Ht=this[++ce]+this[++ce]*2**8+this[++ce]*2**16+rt*2**24;return BigInt(St)+(BigInt(Ht)<<BigInt(32))}),o.prototype.readBigUInt64BE=gr(function(ce){ce=ce>>>0,ft(ce,"offset");const pe=this[ce],rt=this[ce+7];(pe===void 0||rt===void 0)&&Lt(ce,this.length-8);const St=pe*2**24+this[++ce]*2**16+this[++ce]*2**8+this[++ce],Ht=this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+rt;return(BigInt(St)<<BigInt(32))+BigInt(Ht)}),o.prototype.readIntLE=function(ce,pe,rt){ce=ce>>>0,pe=pe>>>0,rt||Re(ce,pe,this.length);let St=this[ce],Ht=1,sn=0;for(;++sn<pe&&(Ht*=256);)St+=this[ce+sn]*Ht;return Ht*=128,St>=Ht&&(St-=Math.pow(2,8*pe)),St},o.prototype.readIntBE=function(ce,pe,rt){ce=ce>>>0,pe=pe>>>0,rt||Re(ce,pe,this.length);let St=pe,Ht=1,sn=this[ce+--St];for(;St>0&&(Ht*=256);)sn+=this[ce+--St]*Ht;return Ht*=128,sn>=Ht&&(sn-=Math.pow(2,8*pe)),sn},o.prototype.readInt8=function(ce,pe){return ce=ce>>>0,pe||Re(ce,1,this.length),this[ce]&128?(255-this[ce]+1)*-1:this[ce]},o.prototype.readInt16LE=function(ce,pe){ce=ce>>>0,pe||Re(ce,2,this.length);const rt=this[ce]|this[ce+1]<<8;return rt&32768?rt|4294901760:rt},o.prototype.readInt16BE=function(ce,pe){ce=ce>>>0,pe||Re(ce,2,this.length);const rt=this[ce+1]|this[ce]<<8;return rt&32768?rt|4294901760:rt},o.prototype.readInt32LE=function(ce,pe){return ce=ce>>>0,pe||Re(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},o.prototype.readInt32BE=function(ce,pe){return ce=ce>>>0,pe||Re(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},o.prototype.readBigInt64LE=gr(function(ce){ce=ce>>>0,ft(ce,"offset");const pe=this[ce],rt=this[ce+7];(pe===void 0||rt===void 0)&&Lt(ce,this.length-8);const St=this[ce+4]+this[ce+5]*2**8+this[ce+6]*2**16+(rt<<24);return(BigInt(St)<<BigInt(32))+BigInt(pe+this[++ce]*2**8+this[++ce]*2**16+this[++ce]*2**24)}),o.prototype.readBigInt64BE=gr(function(ce){ce=ce>>>0,ft(ce,"offset");const pe=this[ce],rt=this[ce+7];(pe===void 0||rt===void 0)&&Lt(ce,this.length-8);const St=(pe<<24)+this[++ce]*2**16+this[++ce]*2**8+this[++ce];return(BigInt(St)<<BigInt(32))+BigInt(this[++ce]*2**24+this[++ce]*2**16+this[++ce]*2**8+rt)}),o.prototype.readFloatLE=function(ce,pe){return ce=ce>>>0,pe||Re(ce,4,this.length),t.read(this,ce,!0,23,4)},o.prototype.readFloatBE=function(ce,pe){return ce=ce>>>0,pe||Re(ce,4,this.length),t.read(this,ce,!1,23,4)},o.prototype.readDoubleLE=function(ce,pe){return ce=ce>>>0,pe||Re(ce,8,this.length),t.read(this,ce,!0,52,8)},o.prototype.readDoubleBE=function(ce,pe){return ce=ce>>>0,pe||Re(ce,8,this.length),t.read(this,ce,!1,52,8)};function He(Ge,ce,pe,rt,St,Ht){if(!o.isBuffer(Ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(ce>St||ce<Ht)throw new RangeError('"value" argument is out of bounds');if(pe+rt>Ge.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(ce,pe,rt,St){if(ce=+ce,pe=pe>>>0,rt=rt>>>0,!St){const nr=Math.pow(2,8*rt)-1;He(this,ce,pe,rt,nr,0)}let Ht=1,sn=0;for(this[pe]=ce&255;++sn<rt&&(Ht*=256);)this[pe+sn]=ce/Ht&255;return pe+rt},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(ce,pe,rt,St){if(ce=+ce,pe=pe>>>0,rt=rt>>>0,!St){const nr=Math.pow(2,8*rt)-1;He(this,ce,pe,rt,nr,0)}let Ht=rt-1,sn=1;for(this[pe+Ht]=ce&255;--Ht>=0&&(sn*=256);)this[pe+Ht]=ce/sn&255;return pe+rt},o.prototype.writeUint8=o.prototype.writeUInt8=function(ce,pe,rt){return ce=+ce,pe=pe>>>0,rt||He(this,ce,pe,1,255,0),this[pe]=ce&255,pe+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(ce,pe,rt){return ce=+ce,pe=pe>>>0,rt||He(this,ce,pe,2,65535,0),this[pe]=ce&255,this[pe+1]=ce>>>8,pe+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(ce,pe,rt){return ce=+ce,pe=pe>>>0,rt||He(this,ce,pe,2,65535,0),this[pe]=ce>>>8,this[pe+1]=ce&255,pe+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(ce,pe,rt){return ce=+ce,pe=pe>>>0,rt||He(this,ce,pe,4,4294967295,0),this[pe+3]=ce>>>24,this[pe+2]=ce>>>16,this[pe+1]=ce>>>8,this[pe]=ce&255,pe+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(ce,pe,rt){return ce=+ce,pe=pe>>>0,rt||He(this,ce,pe,4,4294967295,0),this[pe]=ce>>>24,this[pe+1]=ce>>>16,this[pe+2]=ce>>>8,this[pe+3]=ce&255,pe+4};function _t(Ge,ce,pe,rt,St){Ct(ce,rt,St,Ge,pe,7);let Ht=Number(ce&BigInt(4294967295));Ge[pe++]=Ht,Ht=Ht>>8,Ge[pe++]=Ht,Ht=Ht>>8,Ge[pe++]=Ht,Ht=Ht>>8,Ge[pe++]=Ht;let sn=Number(ce>>BigInt(32)&BigInt(4294967295));return Ge[pe++]=sn,sn=sn>>8,Ge[pe++]=sn,sn=sn>>8,Ge[pe++]=sn,sn=sn>>8,Ge[pe++]=sn,pe}function Gt(Ge,ce,pe,rt,St){Ct(ce,rt,St,Ge,pe,7);let Ht=Number(ce&BigInt(4294967295));Ge[pe+7]=Ht,Ht=Ht>>8,Ge[pe+6]=Ht,Ht=Ht>>8,Ge[pe+5]=Ht,Ht=Ht>>8,Ge[pe+4]=Ht;let sn=Number(ce>>BigInt(32)&BigInt(4294967295));return Ge[pe+3]=sn,sn=sn>>8,Ge[pe+2]=sn,sn=sn>>8,Ge[pe+1]=sn,sn=sn>>8,Ge[pe]=sn,pe+8}o.prototype.writeBigUInt64LE=gr(function(ce,pe=0){return _t(this,ce,pe,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=gr(function(ce,pe=0){return Gt(this,ce,pe,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(ce,pe,rt,St){if(ce=+ce,pe=pe>>>0,!St){const $e=Math.pow(2,8*rt-1);He(this,ce,pe,rt,$e-1,-$e)}let Ht=0,sn=1,nr=0;for(this[pe]=ce&255;++Ht<rt&&(sn*=256);)ce<0&&nr===0&&this[pe+Ht-1]!==0&&(nr=1),this[pe+Ht]=(ce/sn>>0)-nr&255;return pe+rt},o.prototype.writeIntBE=function(ce,pe,rt,St){if(ce=+ce,pe=pe>>>0,!St){const $e=Math.pow(2,8*rt-1);He(this,ce,pe,rt,$e-1,-$e)}let Ht=rt-1,sn=1,nr=0;for(this[pe+Ht]=ce&255;--Ht>=0&&(sn*=256);)ce<0&&nr===0&&this[pe+Ht+1]!==0&&(nr=1),this[pe+Ht]=(ce/sn>>0)-nr&255;return pe+rt},o.prototype.writeInt8=function(ce,pe,rt){return ce=+ce,pe=pe>>>0,rt||He(this,ce,pe,1,127,-128),ce<0&&(ce=255+ce+1),this[pe]=ce&255,pe+1},o.prototype.writeInt16LE=function(ce,pe,rt){return ce=+ce,pe=pe>>>0,rt||He(this,ce,pe,2,32767,-32768),this[pe]=ce&255,this[pe+1]=ce>>>8,pe+2},o.prototype.writeInt16BE=function(ce,pe,rt){return ce=+ce,pe=pe>>>0,rt||He(this,ce,pe,2,32767,-32768),this[pe]=ce>>>8,this[pe+1]=ce&255,pe+2},o.prototype.writeInt32LE=function(ce,pe,rt){return ce=+ce,pe=pe>>>0,rt||He(this,ce,pe,4,2147483647,-2147483648),this[pe]=ce&255,this[pe+1]=ce>>>8,this[pe+2]=ce>>>16,this[pe+3]=ce>>>24,pe+4},o.prototype.writeInt32BE=function(ce,pe,rt){return ce=+ce,pe=pe>>>0,rt||He(this,ce,pe,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[pe]=ce>>>24,this[pe+1]=ce>>>16,this[pe+2]=ce>>>8,this[pe+3]=ce&255,pe+4},o.prototype.writeBigInt64LE=gr(function(ce,pe=0){return _t(this,ce,pe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=gr(function(ce,pe=0){return Gt(this,ce,pe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function yt(Ge,ce,pe,rt,St,Ht){if(pe+rt>Ge.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("Index out of range")}function Ft(Ge,ce,pe,rt,St){return ce=+ce,pe=pe>>>0,St||yt(Ge,ce,pe,4),t.write(Ge,ce,pe,rt,23,4),pe+4}o.prototype.writeFloatLE=function(ce,pe,rt){return Ft(this,ce,pe,!0,rt)},o.prototype.writeFloatBE=function(ce,pe,rt){return Ft(this,ce,pe,!1,rt)};function Tt(Ge,ce,pe,rt,St){return ce=+ce,pe=pe>>>0,St||yt(Ge,ce,pe,8),t.write(Ge,ce,pe,rt,52,8),pe+8}o.prototype.writeDoubleLE=function(ce,pe,rt){return Tt(this,ce,pe,!0,rt)},o.prototype.writeDoubleBE=function(ce,pe,rt){return Tt(this,ce,pe,!1,rt)},o.prototype.copy=function(ce,pe,rt,St){if(!o.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(rt||(rt=0),!St&&St!==0&&(St=this.length),pe>=ce.length&&(pe=ce.length),pe||(pe=0),St>0&&St<rt&&(St=rt),St===rt||ce.length===0||this.length===0)return 0;if(pe<0)throw new RangeError("targetStart out of bounds");if(rt<0||rt>=this.length)throw new RangeError("Index out of range");if(St<0)throw new RangeError("sourceEnd out of bounds");St>this.length&&(St=this.length),ce.length-pe<St-rt&&(St=ce.length-pe+rt);const Ht=St-rt;return this===ce&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(pe,rt,St):Uint8Array.prototype.set.call(ce,this.subarray(rt,St),pe),Ht},o.prototype.fill=function(ce,pe,rt,St){if(typeof ce=="string"){if(typeof pe=="string"?(St=pe,pe=0,rt=this.length):typeof rt=="string"&&(St=rt,rt=this.length),St!==void 0&&typeof St!="string")throw new TypeError("encoding must be a string");if(typeof St=="string"&&!o.isEncoding(St))throw new TypeError("Unknown encoding: "+St);if(ce.length===1){const sn=ce.charCodeAt(0);(St==="utf8"&&sn<128||St==="latin1")&&(ce=sn)}}else typeof ce=="number"?ce=ce&255:typeof ce=="boolean"&&(ce=Number(ce));if(pe<0||this.length<pe||this.length<rt)throw new RangeError("Out of range index");if(rt<=pe)return this;pe=pe>>>0,rt=rt===void 0?this.length:rt>>>0,ce||(ce=0);let Ht;if(typeof ce=="number")for(Ht=pe;Ht<rt;++Ht)this[Ht]=ce;else{const sn=o.isBuffer(ce)?ce:o.from(ce,St),nr=sn.length;if(nr===0)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(Ht=0;Ht<rt-pe;++Ht)this[Ht+pe]=sn[Ht%nr]}return this};const Le={};function Pe(Ge,ce,pe){Le[Ge]=class extends pe{constructor(){super(),Object.defineProperty(this,"message",{value:ce.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ge}]`,this.stack,delete this.name}get code(){return Ge}set code(St){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:St,writable:!0})}toString(){return`${this.name} [${Ge}]: ${this.message}`}}}Pe("ERR_BUFFER_OUT_OF_BOUNDS",function(Ge){return Ge?`${Ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pe("ERR_INVALID_ARG_TYPE",function(Ge,ce){return`The "${Ge}" argument must be of type number. Received type ${typeof ce}`},TypeError),Pe("ERR_OUT_OF_RANGE",function(Ge,ce,pe){let rt=`The value of "${Ge}" is out of range.`,St=pe;return Number.isInteger(pe)&&Math.abs(pe)>2**32?St=Be(String(pe)):typeof pe=="bigint"&&(St=String(pe),(pe>BigInt(2)**BigInt(32)||pe<-(BigInt(2)**BigInt(32)))&&(St=Be(St)),St+="n"),rt+=` It must be ${ce}. Received ${St}`,rt},RangeError);function Be(Ge){let ce="",pe=Ge.length;const rt=Ge[0]==="-"?1:0;for(;pe>=rt+4;pe-=3)ce=`_${Ge.slice(pe-3,pe)}${ce}`;return`${Ge.slice(0,pe)}${ce}`}function it(Ge,ce,pe){ft(ce,"offset"),(Ge[ce]===void 0||Ge[ce+pe]===void 0)&&Lt(ce,Ge.length-(pe+1))}function Ct(Ge,ce,pe,rt,St,Ht){if(Ge>pe||Ge<ce){const sn=typeof ce=="bigint"?"n":"";let nr;throw ce===0||ce===BigInt(0)?nr=`>= 0${sn} and < 2${sn} ** ${(Ht+1)*8}${sn}`:nr=`>= -(2${sn} ** ${(Ht+1)*8-1}${sn}) and < 2 ** ${(Ht+1)*8-1}${sn}`,new Le.ERR_OUT_OF_RANGE("value",nr,Ge)}it(rt,St,Ht)}function ft(Ge,ce){if(typeof Ge!="number")throw new Le.ERR_INVALID_ARG_TYPE(ce,"number",Ge)}function Lt(Ge,ce,pe){throw Math.floor(Ge)!==Ge?(ft(Ge,pe),new Le.ERR_OUT_OF_RANGE("offset","an integer",Ge)):ce<0?new Le.ERR_BUFFER_OUT_OF_BOUNDS:new Le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${ce}`,Ge)}const Zt=/[^+/0-9A-Za-z-_]/g;function Rt(Ge){if(Ge=Ge.split("=")[0],Ge=Ge.trim().replace(Zt,""),Ge.length<2)return"";for(;Ge.length%4!==0;)Ge=Ge+"=";return Ge}function _n(Ge,ce){ce=ce||1/0;let pe;const rt=Ge.length;let St=null;const Ht=[];for(let sn=0;sn<rt;++sn){if(pe=Ge.charCodeAt(sn),pe>55295&&pe<57344){if(!St){if(pe>56319){(ce-=3)>-1&&Ht.push(239,191,189);continue}else if(sn+1===rt){(ce-=3)>-1&&Ht.push(239,191,189);continue}St=pe;continue}if(pe<56320){(ce-=3)>-1&&Ht.push(239,191,189),St=pe;continue}pe=(St-55296<<10|pe-56320)+65536}else St&&(ce-=3)>-1&&Ht.push(239,191,189);if(St=null,pe<128){if((ce-=1)<0)break;Ht.push(pe)}else if(pe<2048){if((ce-=2)<0)break;Ht.push(pe>>6|192,pe&63|128)}else if(pe<65536){if((ce-=3)<0)break;Ht.push(pe>>12|224,pe>>6&63|128,pe&63|128)}else if(pe<1114112){if((ce-=4)<0)break;Ht.push(pe>>18|240,pe>>12&63|128,pe>>6&63|128,pe&63|128)}else throw new Error("Invalid code point")}return Ht}function qn(Ge){const ce=[];for(let pe=0;pe<Ge.length;++pe)ce.push(Ge.charCodeAt(pe)&255);return ce}function rn(Ge,ce){let pe,rt,St;const Ht=[];for(let sn=0;sn<Ge.length&&!((ce-=2)<0);++sn)pe=Ge.charCodeAt(sn),rt=pe>>8,St=pe%256,Ht.push(St),Ht.push(rt);return Ht}function ar(Ge){return e.toByteArray(Rt(Ge))}function kn(Ge,ce,pe,rt){let St;for(St=0;St<rt&&!(St+pe>=ce.length||St>=Ge.length);++St)ce[St+pe]=Ge[St];return St}function mn(Ge,ce){return Ge instanceof ce||Ge!=null&&Ge.constructor!=null&&Ge.constructor.name!=null&&Ge.constructor.name===ce.name}function zn(Ge){return Ge!==Ge}const br=function(){const Ge="0123456789abcdef",ce=new Array(256);for(let pe=0;pe<16;++pe){const rt=pe*16;for(let St=0;St<16;++St)ce[rt+St]=Ge[pe]+Ge[St]}return ce}();function gr(Ge){return typeof BigInt>"u"?tr:Ge}function tr(){throw new Error("BigInt not supported")}}(B3)),B3}var yG=gG();const vG=yl(yG);var O3,Q8;function CG(){if(Q8)return O3;Q8=1;var n="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",r="[object GeneratorFunction]",i="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,o=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/[\\^$.*+?()[\]{}|]/g,x=/\\(\\)?/g,B=/^\[object .+?Constructor\]$/,T=typeof window=="object"&&window&&window.Object===Object&&window,P=typeof self=="object"&&self&&self.Object===Object&&self,U=T||P||Function("return this")();function j(ae,Ce){return ae==null?void 0:ae[Ce]}function N(ae){var Ce=!1;if(ae!=null&&typeof ae.toString!="function")try{Ce=!!(ae+"")}catch{}return Ce}var q=Array.prototype,H=Function.prototype,oe=Object.prototype,te=U["__core-js_shared__"],V=function(){var ae=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||"");return ae?"Symbol(src)_1."+ae:""}(),ne=H.toString,W=oe.hasOwnProperty,ie=oe.toString,he=RegExp("^"+ne.call(W).replace(v,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fe=U.Symbol,Ee=q.splice,me=ar(U,"Map"),Me=ar(Object,"create"),De=fe?fe.prototype:void 0,xe=De?De.toString:void 0;function At(ae){var Ce=-1,f=ae?ae.length:0;for(this.clear();++Ce<f;){var je=ae[Ce];this.set(je[0],je[1])}}function Ze(){this.__data__=Me?Me(null):{}}function Xe(ae){return this.has(ae)&&delete this.__data__[ae]}function Ne(ae){var Ce=this.__data__;if(Me){var f=Ce[ae];return f===e?void 0:f}return W.call(Ce,ae)?Ce[ae]:void 0}function Se(ae){var Ce=this.__data__;return Me?Ce[ae]!==void 0:W.call(Ce,ae)}function Re(ae,Ce){var f=this.__data__;return f[ae]=Me&&Ce===void 0?e:Ce,this}At.prototype.clear=Ze,At.prototype.delete=Xe,At.prototype.get=Ne,At.prototype.has=Se,At.prototype.set=Re;function He(ae){var Ce=-1,f=ae?ae.length:0;for(this.clear();++Ce<f;){var je=ae[Ce];this.set(je[0],je[1])}}function _t(){this.__data__=[]}function Gt(ae){var Ce=this.__data__,f=Lt(Ce,ae);if(f<0)return!1;var je=Ce.length-1;return f==je?Ce.pop():Ee.call(Ce,f,1),!0}function yt(ae){var Ce=this.__data__,f=Lt(Ce,ae);return f<0?void 0:Ce[f][1]}function Ft(ae){return Lt(this.__data__,ae)>-1}function Tt(ae,Ce){var f=this.__data__,je=Lt(f,ae);return je<0?f.push([ae,Ce]):f[je][1]=Ce,this}He.prototype.clear=_t,He.prototype.delete=Gt,He.prototype.get=yt,He.prototype.has=Ft,He.prototype.set=Tt;function Le(ae){var Ce=-1,f=ae?ae.length:0;for(this.clear();++Ce<f;){var je=ae[Ce];this.set(je[0],je[1])}}function Pe(){this.__data__={hash:new At,map:new(me||He),string:new At}}function Be(ae){return rn(this,ae).delete(ae)}function it(ae){return rn(this,ae).get(ae)}function Ct(ae){return rn(this,ae).has(ae)}function ft(ae,Ce){return rn(this,ae).set(ae,Ce),this}Le.prototype.clear=Pe,Le.prototype.delete=Be,Le.prototype.get=it,Le.prototype.has=Ct,Le.prototype.set=ft;function Lt(ae,Ce){for(var f=ae.length;f--;)if(ce(ae[f][0],Ce))return f;return-1}function Zt(ae,Ce){Ce=kn(Ce,ae)?[Ce]:qn(Ce);for(var f=0,je=Ce.length;ae!=null&&f<je;)ae=ae[gr(Ce[f++])];return f&&f==je?ae:void 0}function Rt(ae){if(!St(ae)||zn(ae))return!1;var Ce=rt(ae)||N(ae)?he:B;return Ce.test(tr(ae))}function _n(ae){if(typeof ae=="string")return ae;if(sn(ae))return xe?xe.call(ae):"";var Ce=ae+"";return Ce=="0"&&1/ae==-1/0?"-0":Ce}function qn(ae){return pe(ae)?ae:br(ae)}function rn(ae,Ce){var f=ae.__data__;return mn(Ce)?f[typeof Ce=="string"?"string":"hash"]:f.map}function ar(ae,Ce){var f=j(ae,Ce);return Rt(f)?f:void 0}function kn(ae,Ce){if(pe(ae))return!1;var f=typeof ae;return f=="number"||f=="symbol"||f=="boolean"||ae==null||sn(ae)?!0:l.test(ae)||!s.test(ae)||Ce!=null&&ae in Object(Ce)}function mn(ae){var Ce=typeof ae;return Ce=="string"||Ce=="number"||Ce=="symbol"||Ce=="boolean"?ae!=="__proto__":ae===null}function zn(ae){return!!V&&V in ae}var br=Ge(function(ae){ae=nr(ae);var Ce=[];return o.test(ae)&&Ce.push(""),ae.replace(p,function(f,je,qe,Je){Ce.push(qe?Je.replace(x,"$1"):je||f)}),Ce});function gr(ae){if(typeof ae=="string"||sn(ae))return ae;var Ce=ae+"";return Ce=="0"&&1/ae==-1/0?"-0":Ce}function tr(ae){if(ae!=null){try{return ne.call(ae)}catch{}try{return ae+""}catch{}}return""}function Ge(ae,Ce){if(typeof ae!="function"||Ce&&typeof Ce!="function")throw new TypeError(n);var f=function(){var je=arguments,qe=Ce?Ce.apply(this,je):je[0],Je=f.cache;if(Je.has(qe))return Je.get(qe);var ut=ae.apply(this,je);return f.cache=Je.set(qe,ut),ut};return f.cache=new(Ge.Cache||Le),f}Ge.Cache=Le;function ce(ae,Ce){return ae===Ce||ae!==ae&&Ce!==Ce}var pe=Array.isArray;function rt(ae){var Ce=St(ae)?ie.call(ae):"";return Ce==t||Ce==r}function St(ae){var Ce=typeof ae;return!!ae&&(Ce=="object"||Ce=="function")}function Ht(ae){return!!ae&&typeof ae=="object"}function sn(ae){return typeof ae=="symbol"||Ht(ae)&&ie.call(ae)==i}function nr(ae){return ae==null?"":_n(ae)}function $e(ae,Ce,f){var je=ae==null?void 0:Zt(ae,Ce);return je===void 0?f:je}return O3=$e,O3}var _G=CG();const bG=yl(_G);var wv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var xG=wv.exports,Y8;function MG(){return Y8||(Y8=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",v=500,x="__lodash_placeholder__",B=1,T=2,P=4,U=1,j=2,N=1,q=2,H=4,oe=8,te=16,V=32,ne=64,W=128,ie=256,he=512,fe=30,Ee="...",me=800,Me=16,De=1,xe=2,At=3,Ze=1/0,Xe=9007199254740991,Ne=17976931348623157e292,Se=NaN,Re=4294967295,He=Re-1,_t=Re>>>1,Gt=[["ary",W],["bind",N],["bindKey",q],["curry",oe],["curryRight",te],["flip",he],["partial",V],["partialRight",ne],["rearg",ie]],yt="[object Arguments]",Ft="[object Array]",Tt="[object AsyncFunction]",Le="[object Boolean]",Pe="[object Date]",Be="[object DOMException]",it="[object Error]",Ct="[object Function]",ft="[object GeneratorFunction]",Lt="[object Map]",Zt="[object Number]",Rt="[object Null]",_n="[object Object]",qn="[object Promise]",rn="[object Proxy]",ar="[object RegExp]",kn="[object Set]",mn="[object String]",zn="[object Symbol]",br="[object Undefined]",gr="[object WeakMap]",tr="[object WeakSet]",Ge="[object ArrayBuffer]",ce="[object DataView]",pe="[object Float32Array]",rt="[object Float64Array]",St="[object Int8Array]",Ht="[object Int16Array]",sn="[object Int32Array]",nr="[object Uint8Array]",$e="[object Uint8ClampedArray]",ae="[object Uint16Array]",Ce="[object Uint32Array]",f=/\b__p \+= '';/g,je=/\b(__p \+=) '' \+/g,qe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Je=/&(?:amp|lt|gt|quot|#39);/g,ut=/[&<>"']/g,dt=RegExp(Je.source),Qt=RegExp(ut.source),Wt=/<%-([\s\S]+?)%>/g,jt=/<%([\s\S]+?)%>/g,tn=/<%=([\s\S]+?)%>/g,Dn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fn=/^\w*$/,on=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sr=/[\\^$.*+?()[\]{}|]/g,Hn=RegExp(Sr.source),xr=/^\s+/,qr=/\s/,Bn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$n=/\{\n\/\* \[wrapped with (.+)\] \*/,Yn=/,? & /,Qr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,co=/[()=,{}\[\]\/\s]/,ma=/\\(\\)?/g,Mr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,wi=/\w*$/,Zi=/^[-+]0x[0-9a-f]+$/i,Ts=/^0b[01]+$/i,xs=/^\[object .+?Constructor\]$/,aa=/^0o[0-7]+$/i,ps=/^(?:0|[1-9]\d*)$/,bi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Il=/($^)/,kl=/['\n\r\u2028\u2029\\]/g,io="\\ud800-\\udfff",vl="\\u0300-\\u036f",ol="\\ufe20-\\ufe2f",bo="\\u20d0-\\u20ff",Kr=vl+ol+bo,Wa="\\u2700-\\u27bf",Vo="a-z\\xdf-\\xf6\\xf8-\\xff",Gs="\\xac\\xb1\\xd7\\xf7",Ye="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xt="\\u2000-\\u206f",yn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zn="A-Z\\xc0-\\xd6\\xd8-\\xde",dn="\\ufe0e\\ufe0f",lr=Gs+Ye+xt+yn,Pi="[']",xo="["+io+"]",as="["+lr+"]",la="["+Kr+"]",Wu="\\d+",ei="["+Wa+"]",ki="["+Vo+"]",zl="[^"+io+lr+Wu+Wa+Vo+Zn+"]",na="\\ud83c[\\udffb-\\udfff]",Ms="(?:"+la+"|"+na+")",Mu="[^"+io+"]",Si="(?:\\ud83c[\\udde6-\\uddff]){2}",ti="[\\ud800-\\udbff][\\udc00-\\udfff]",ls="["+Zn+"]",ka="\\u200d",Us="(?:"+ki+"|"+zl+")",ho="(?:"+ls+"|"+zl+")",Do="(?:"+Pi+"(?:d|ll|m|re|s|t|ve))?",Gu="(?:"+Pi+"(?:D|LL|M|RE|S|T|VE))?",Qs=Ms+"?",ra="["+dn+"]?",No="(?:"+ka+"(?:"+[Mu,Si,ti].join("|")+")"+ra+Qs+")*",Fo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",es="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Mo=ra+Qs+No,ga="(?:"+[ei,Si,ti].join("|")+")"+Mo,zs="(?:"+[Mu+la+"?",la,Si,ti,xo].join("|")+")",Ga=RegExp(Pi,"g"),Ta=RegExp(la,"g"),ao=RegExp(na+"(?="+na+")|"+zs+Mo,"g"),sl=RegExp([ls+"?"+ki+"+"+Do+"(?="+[as,ls,"$"].join("|")+")",ho+"+"+Gu+"(?="+[as,ls+Us,"$"].join("|")+")",ls+"?"+Us+"+"+Do,ls+"+"+Gu,es,Fo,Wu,ga].join("|"),"g"),Hi=RegExp("["+ka+io+Kr+dn+"]"),Hr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,jl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wi=-1,oo={};oo[pe]=oo[rt]=oo[St]=oo[Ht]=oo[sn]=oo[nr]=oo[$e]=oo[ae]=oo[Ce]=!0,oo[yt]=oo[Ft]=oo[Ge]=oo[Le]=oo[ce]=oo[Pe]=oo[it]=oo[Ct]=oo[Lt]=oo[Zt]=oo[_n]=oo[ar]=oo[kn]=oo[mn]=oo[gr]=!1;var Ki={};Ki[yt]=Ki[Ft]=Ki[Ge]=Ki[ce]=Ki[Le]=Ki[Pe]=Ki[pe]=Ki[rt]=Ki[St]=Ki[Ht]=Ki[sn]=Ki[Lt]=Ki[Zt]=Ki[_n]=Ki[ar]=Ki[kn]=Ki[mn]=Ki[zn]=Ki[nr]=Ki[$e]=Ki[ae]=Ki[Ce]=!0,Ki[it]=Ki[Ct]=Ki[gr]=!1;var ee={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},st={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ir=parseFloat,Vn=parseInt,Zr=typeof window=="object"&&window&&window.Object===Object&&window,di=typeof self=="object"&&self&&self.Object===Object&&self,Br=Zr||di||Function("return this")(),Rr=e&&!e.nodeType&&e,Vi=Rr&&!0&&n&&!n.nodeType&&n,Wo=Vi&&Vi.exports===Rr,si=Wo&&Zr.process,zr=function(){try{var en=Vi&&Vi.require&&Vi.require("util").types;return en||si&&si.binding&&si.binding("util")}catch{}}(),Ui=zr&&zr.isArrayBuffer,Gi=zr&&zr.isDate,$o=zr&&zr.isMap,ua=zr&&zr.isRegExp,Ys=zr&&zr.isSet,wu=zr&&zr.isTypedArray;function qs(en,Tn,un){switch(un.length){case 0:return en.call(Tn);case 1:return en.call(Tn,un[0]);case 2:return en.call(Tn,un[0],un[1]);case 3:return en.call(Tn,un[0],un[1],un[2])}return en.apply(Tn,un)}function Yd(en,Tn,un,Tr){for(var ci=-1,To=en==null?0:en.length;++ci<To;){var ya=en[ci];Tn(Tr,ya,un(ya),en)}return Tr}function al(en,Tn){for(var un=-1,Tr=en==null?0:en.length;++un<Tr&&Tn(en[un],un,en)!==!1;);return en}function su(en,Tn){for(var un=en==null?0:en.length;un--&&Tn(en[un],un,en)!==!1;);return en}function vh(en,Tn){for(var un=-1,Tr=en==null?0:en.length;++un<Tr;)if(!Tn(en[un],un,en))return!1;return!0}function Su(en,Tn){for(var un=-1,Tr=en==null?0:en.length,ci=0,To=[];++un<Tr;){var ya=en[un];Tn(ya,un,en)&&(To[ci++]=ya)}return To}function qd(en,Tn){var un=en==null?0:en.length;return!!un&&ms(en,Tn,0)>-1}function Yc(en,Tn,un){for(var Tr=-1,ci=en==null?0:en.length;++Tr<ci;)if(un(Tn,en[Tr]))return!0;return!1}function ws(en,Tn){for(var un=-1,Tr=en==null?0:en.length,ci=Array(Tr);++un<Tr;)ci[un]=Tn(en[un],un,en);return ci}function LA(en,Tn){for(var un=-1,Tr=Tn.length,ci=en.length;++un<Tr;)en[ci+un]=Tn[un];return en}function mA(en,Tn,un,Tr){var ci=-1,To=en==null?0:en.length;for(Tr&&To&&(un=en[++ci]);++ci<To;)un=Tn(un,en[ci],ci,en);return un}function xp(en,Tn,un,Tr){var ci=en==null?0:en.length;for(Tr&&ci&&(un=en[--ci]);ci--;)un=Tn(un,en[ci],ci,en);return un}function UA(en,Tn){for(var un=-1,Tr=en==null?0:en.length;++un<Tr;)if(Tn(en[un],un,en))return!0;return!1}var lc=Xh("length");function gd(en){return en.split("")}function Mp(en){return en.match(Qr)||[]}function Ch(en,Tn,un){var Tr;return un(en,function(ci,To,ya){if(Tn(ci,To,ya))return Tr=To,!1}),Tr}function bc(en,Tn,un,Tr){for(var ci=en.length,To=un+(Tr?1:-1);Tr?To--:++To<ci;)if(Tn(en[To],To,en))return To;return-1}function ms(en,Tn,un){return Tn===Tn?zA(en,Tn,un):bc(en,Zh,un)}function Df(en,Tn,un,Tr){for(var ci=un-1,To=en.length;++ci<To;)if(Tr(en[ci],Tn))return ci;return-1}function Zh(en){return en!==en}function Vd(en,Tn){var un=en==null?0:en.length;return un?bh(en,Tn)/un:Se}function Xh(en){return function(Tn){return Tn==null?t:Tn[en]}}function qc(en){return function(Tn){return en==null?t:en[Tn]}}function Jh(en,Tn,un,Tr,ci){return ci(en,function(To,ya,ts){un=Tr?(Tr=!1,To):Tn(un,To,ya,ts)}),un}function _h(en,Tn){var un=en.length;for(en.sort(Tn);un--;)en[un]=en[un].value;return en}function bh(en,Tn){for(var un,Tr=-1,ci=en.length;++Tr<ci;){var To=Tn(en[Tr]);To!==t&&(un=un===t?To:un+To)}return un}function ef(en,Tn){for(var un=-1,Tr=Array(en);++un<en;)Tr[un]=Tn(un);return Tr}function yd(en,Tn){return ws(Tn,function(un){return[un,en[un]]})}function $d(en){return en&&en.slice(0,Mh(en)+1).replace(xr,"")}function au(en){return function(Tn){return en(Tn)}}function xc(en,Tn){return ws(Tn,function(un){return en[un]})}function Qu(en,Tn){return en.has(Tn)}function Eu(en,Tn){for(var un=-1,Tr=en.length;++un<Tr&&ms(Tn,en[un],0)>-1;);return un}function vd(en,Tn){for(var un=en.length;un--&&ms(Tn,en[un],0)>-1;);return un}function tf(en,Tn){for(var un=en.length,Tr=0;un--;)en[un]===Tn&&++Tr;return Tr}var nf=qc(ee),Yu=qc(Oe);function uc(en){return"\\"+$t[en]}function Ac(en,Tn){return en==null?t:en[Tn]}function Cd(en){return Hi.test(en)}function xh(en){return Hr.test(en)}function cc(en){for(var Tn,un=[];!(Tn=en.next()).done;)un.push(Tn.value);return un}function _d(en){var Tn=-1,un=Array(en.size);return en.forEach(function(Tr,ci){un[++Tn]=[ci,Tr]}),un}function bd(en,Tn){return function(un){return en(Tn(un))}}function ll(en,Tn){for(var un=-1,Tr=en.length,ci=0,To=[];++un<Tr;){var ya=en[un];(ya===Tn||ya===x)&&(en[un]=x,To[ci++]=un)}return To}function Cl(en){var Tn=-1,un=Array(en.size);return en.forEach(function(Tr){un[++Tn]=Tr}),un}function ko(en){var Tn=-1,un=Array(en.size);return en.forEach(function(Tr){un[++Tn]=[Tr,Tr]}),un}function zA(en,Tn,un){for(var Tr=un-1,ci=en.length;++Tr<ci;)if(en[Tr]===Tn)return Tr;return-1}function Ff(en,Tn,un){for(var Tr=un+1;Tr--;)if(en[Tr]===Tn)return Tr;return Tr}function xd(en){return Cd(en)?Md(en):lc(en)}function qu(en){return Cd(en)?Uf(en):gd(en)}function Mh(en){for(var Tn=en.length;Tn--&&qr.test(en.charAt(Tn)););return Tn}var Lf=qc(st);function Md(en){for(var Tn=ao.lastIndex=0;ao.test(en);)++Tn;return Tn}function Uf(en){return en.match(ao)||[]}function zf(en){return en.match(sl)||[]}var Hd=function en(Tn){Tn=Tn==null?Br:gA.defaults(Br.Object(),Tn,gA.pick(Br,jl));var un=Tn.Array,Tr=Tn.Date,ci=Tn.Error,To=Tn.Function,ya=Tn.Math,ts=Tn.Object,Vu=Tn.RegExp,rf=Tn.String,lu=Tn.TypeError,$u=un.prototype,yA=To.prototype,Nl=ts.prototype,Wl=Tn["__core-js_shared__"],vA=yA.toString,Po=Nl.hasOwnProperty,Mc=0,lo=function(){var b=/[^.]+$/.exec(Wl&&Wl.keys&&Wl.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),Bu=Nl.toString,CA=vA.call(ts),Tl=Br._,Hu=Vu("^"+vA.call(Po).replace(Sr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_A=Wo?Tn.Buffer:t,Zu=Tn.Symbol,Zd=Tn.Uint8Array,of=_A?_A.allocUnsafe:t,Qa=bd(ts.getPrototypeOf,ts),wc=ts.create,Sc=Nl.propertyIsEnumerable,Ec=$u.splice,sf=Zu?Zu.isConcatSpreadable:t,bA=Zu?Zu.iterator:t,jA=Zu?Zu.toStringTag:t,NA=function(){try{var b=rd(ts,"defineProperty");return b({},"",{}),b}catch{}}(),wd=Tn.clearTimeout!==Br.clearTimeout&&Tn.clearTimeout,us=Tr&&Tr.now!==Br.Date.now&&Tr.now,Vc=Tn.setTimeout!==Br.setTimeout&&Tn.setTimeout,Bc=ya.ceil,Xu=ya.floor,$c=ts.getOwnPropertySymbols,Xd=_A?_A.isBuffer:t,Oc=Tn.isFinite,Ic=$u.join,Ju=bd(ts.keys,ts),As=ya.max,Ya=ya.min,wp=Tr.now,js=Tn.parseInt,xA=ya.random,ul=$u.reverse,Hc=rd(Tn,"DataView"),Gl=rd(Tn,"Map"),WA=rd(Tn,"Promise"),va=rd(Tn,"Set"),eA=rd(Tn,"WeakMap"),Ou=rd(ts,"create"),Sd=eA&&new eA,Zc={},Jd=Ha(Hc),dc=Ha(Gl),tA=Ha(WA),_l=Ha(va),GA=Ha(eA),kc=Zu?Zu.prototype:t,Iu=kc?kc.valueOf:t,wh=kc?kc.toString:t;function ot(b){if(pl(b)&&!vo(b)&&!(b instanceof ri)){if(b instanceof Ti)return b;if(Po.call(b,"__wrapped__"))return Ru(b)}return new Ti(b)}var QA=function(){function b(){}return function(I){if(!Ja(I))return{};if(wc)return wc(I);b.prototype=I;var $=new b;return b.prototype=t,$}}();function Ss(){}function Ti(b,I){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!I,this.__index__=0,this.__values__=t}ot.templateSettings={escape:Wt,evaluate:jt,interpolate:tn,variable:"",imports:{_:ot}},ot.prototype=Ss.prototype,ot.prototype.constructor=ot,Ti.prototype=QA(Ss.prototype),Ti.prototype.constructor=Ti;function ri(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Re,this.__views__=[]}function Go(){var b=new ri(this.__wrapped__);return b.__actions__=Ma(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=Ma(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=Ma(this.__views__),b}function Ql(){if(this.__filtered__){var b=new ri(this);b.__dir__=-1,b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b}function Ed(){var b=this.__wrapped__.value(),I=this.__dir__,$=vo(b),ve=I<0,Ve=$?b.length:0,ht=Am(0,Ve,this.__views__),Pt=ht.start,Vt=ht.end,ln=Vt-Pt,Xn=ve?Vt:Pt-1,Jn=this.__iteratees__,fr=Jn.length,Vr=0,Ei=Ya(ln,this.__takeCount__);if(!$||!ve&&Ve==ln&&Ei==ln)return Vl(b,this.__actions__);var Ji=[];e:for(;ln--&&Vr<Ei;){Xn+=I;for(var Xo=-1,eo=b[Xn];++Xo<fr;){var bs=Jn[Xo],Ps=bs.iteratee,jh=bs.type,jd=Ps(eo);if(jh==xe)eo=jd;else if(!jd){if(jh==De)continue e;break e}}Ji[Vr++]=eo}return Ji}ri.prototype=QA(Ss.prototype),ri.prototype.constructor=ri;function cs(b){var I=-1,$=b==null?0:b.length;for(this.clear();++I<$;){var ve=b[I];this.set(ve[0],ve[1])}}function ns(){this.__data__=Ou?Ou(null):{},this.size=0}function Es(b){var I=this.has(b)&&delete this.__data__[b];return this.size-=I?1:0,I}function Xc(b){var I=this.__data__;if(Ou){var $=I[b];return $===p?t:$}return Po.call(I,b)?I[b]:t}function qa(b){var I=this.__data__;return Ou?I[b]!==t:Po.call(I,b)}function uu(b,I){var $=this.__data__;return this.size+=this.has(b)?0:1,$[b]=Ou&&I===t?p:I,this}cs.prototype.clear=ns,cs.prototype.delete=Es,cs.prototype.get=Xc,cs.prototype.has=qa,cs.prototype.set=uu;function Ca(b){var I=-1,$=b==null?0:b.length;for(this.clear();++I<$;){var ve=b[I];this.set(ve[0],ve[1])}}function hc(){this.__data__=[],this.size=0}function Bs(b){var I=this.__data__,$=_a(I,b);if($<0)return!1;var ve=I.length-1;return $==ve?I.pop():Ec.call(I,$,1),--this.size,!0}function wr(b){var I=this.__data__,$=_a(I,b);return $<0?t:I[$][1]}function af(b){return _a(this.__data__,b)>-1}function Jc(b,I){var $=this.__data__,ve=_a($,b);return ve<0?(++this.size,$.push([b,I])):$[ve][1]=I,this}Ca.prototype.clear=hc,Ca.prototype.delete=Bs,Ca.prototype.get=wr,Ca.prototype.has=af,Ca.prototype.set=Jc;function Au(b){var I=-1,$=b==null?0:b.length;for(this.clear();++I<$;){var ve=b[I];this.set(ve[0],ve[1])}}function Tc(){this.size=0,this.__data__={hash:new cs,map:new(Gl||Ca),string:new cs}}function Va(b){var I=ih(this,b).delete(b);return this.size-=I?1:0,I}function eh(b){return ih(this,b).get(b)}function Qi(b){return ih(this,b).has(b)}function nA(b,I){var $=ih(this,b),ve=$.size;return $.set(b,I),this.size+=$.size==ve?0:1,this}Au.prototype.clear=Tc,Au.prototype.delete=Va,Au.prototype.get=eh,Au.prototype.has=Qi,Au.prototype.set=nA;function Pc(b){var I=-1,$=b==null?0:b.length;for(this.__data__=new Au;++I<$;)this.add(b[I])}function MA(b){return this.__data__.set(b,p),this}function ed(b){return this.__data__.has(b)}Pc.prototype.add=Pc.prototype.push=MA,Pc.prototype.has=ed;function Os(b){var I=this.__data__=new Ca(b);this.size=I.size}function wo(){this.__data__=new Ca,this.size=0}function Yl(b){var I=this.__data__,$=I.delete(b);return this.size=I.size,$}function Pa(b){return this.__data__.get(b)}function $a(b){return this.__data__.has(b)}function fc(b,I){var $=this.__data__;if($ instanceof Ca){var ve=$.__data__;if(!Gl||ve.length<i-1)return ve.push([b,I]),this.size=++$.size,this;$=this.__data__=new Au(ve)}return $.set(b,I),this.size=$.size,this}Os.prototype.clear=wo,Os.prototype.delete=Yl,Os.prototype.get=Pa,Os.prototype.has=$a,Os.prototype.set=fc;function wA(b,I){var $=vo(b),ve=!$&&Pp(b),Ve=!$&&!ve&&Jf(b),ht=!$&&!ve&&!Ve&&vm(b),Pt=$||ve||Ve||ht,Vt=Pt?ef(b.length,rf):[],ln=Vt.length;for(var Xn in b)(I||Po.call(b,Xn))&&!(Pt&&(Xn=="length"||Ve&&(Xn=="offset"||Xn=="parent")||ht&&(Xn=="buffer"||Xn=="byteLength"||Xn=="byteOffset")||E(Xn,ln)))&&Vt.push(Xn);return Vt}function YA(b){var I=b.length;return I?b[xn(0,I-1)]:t}function cu(b,I){return Fa(Ma(b),Dr(I,0,b.length))}function gs(b){return Fa(Ma(b))}function rA(b,I,$){($!==t&&!ah(b[I],$)||$===t&&!(I in b))&&Al(b,I,$)}function qA(b,I,$){var ve=b[I];(!(Po.call(b,I)&&ah(ve,$))||$===t&&!(I in b))&&Al(b,I,$)}function _a(b,I){for(var $=b.length;$--;)if(ah(b[$][0],I))return $;return-1}function Ka(b,I,$,ve){return ku(b,function(Ve,ht,Pt){I(ve,Ve,$(Ve),Pt)}),ve}function ys(b,I){return b&&cl(I,Mt(I),b)}function SA(b,I){return b&&cl(I,an(I),b)}function Al(b,I,$){I=="__proto__"&&NA?NA(b,I,{configurable:!0,enumerable:!0,value:$,writable:!0}):b[I]=$}function VA(b,I){for(var $=-1,ve=I.length,Ve=un(ve),ht=b==null;++$<ve;)Ve[$]=ht?t:ct(b,I[$]);return Ve}function Dr(b,I,$){return b===b&&($!==t&&(b=b<=$?b:$),I!==t&&(b=b>=I?b:I)),b}function Lr(b,I,$,ve,Ve,ht){var Pt,Vt=I&B,ln=I&T,Xn=I&P;if($&&(Pt=Ve?$(b,ve,Ve,ht):$(b)),Pt!==t)return Pt;if(!Ja(b))return b;var Jn=vo(b);if(Jn){if(Pt=qf(b),!Vt)return Ma(b,Pt)}else{var fr=wl(b),Vr=fr==Ct||fr==ft;if(Jf(b))return Ns(b,Vt);if(fr==_n||fr==yt||Vr&&!Ve){if(Pt=ln||Vr?{}:gu(b),!Vt)return ln?jf(b,SA(Pt,b)):OA(b,ys(Pt,b))}else{if(!Ki[fr])return Ve?b:{};Pt=ff(b,fr,Vt)}}ht||(ht=new Os);var Ei=ht.get(b);if(Ei)return Ei;ht.set(b,Pt),Xy(b)?b.forEach(function(eo){Pt.add(Lr(eo,I,$,eo,b,ht))}):C_(b)&&b.forEach(function(eo,bs){Pt.set(bs,Lr(eo,I,$,bs,b,ht))});var Ji=Xn?ln?Ih:df:ln?an:Mt,Xo=Jn?t:Ji(b);return al(Xo||b,function(eo,bs){Xo&&(bs=eo,eo=b[bs]),qA(Pt,bs,Lr(eo,I,$,bs,b,ht))}),Pt}function Sh(b){var I=Mt(b);return function($){return td($,b,I)}}function td(b,I,$){var ve=$.length;if(b==null)return!ve;for(b=ts(b);ve--;){var Ve=$[ve],ht=I[Ve],Pt=b[Ve];if(Pt===t&&!(Ve in b)||!ht(Pt))return!1}return!0}function Eh(b,I,$){if(typeof b!="function")throw new lu(l);return oi(function(){b.apply(t,$)},I)}function Aa(b,I,$,ve){var Ve=-1,ht=qd,Pt=!0,Vt=b.length,ln=[],Xn=I.length;if(!Vt)return ln;$&&(I=ws(I,au($))),ve?(ht=Yc,Pt=!1):I.length>=i&&(ht=Qu,Pt=!1,I=new Pc(I));e:for(;++Ve<Vt;){var Jn=b[Ve],fr=$==null?Jn:$(Jn);if(Jn=ve||Jn!==0?Jn:0,Pt&&fr===fr){for(var Vr=Xn;Vr--;)if(I[Vr]===fr)continue e;ln.push(Jn)}else ht(I,fr,ve)||ln.push(Jn)}return ln}var ku=dl(bl),Pl=dl(iA,!0);function Bh(b,I){var $=!0;return ku(b,function(ve,Ve,ht){return $=!!I(ve,Ve,ht),$}),$}function $A(b,I,$){for(var ve=-1,Ve=b.length;++ve<Ve;){var ht=b[ve],Pt=I(ht);if(Pt!=null&&(Vt===t?Pt===Pt&&!Fd(Pt):$(Pt,Vt)))var Vt=Pt,ln=ht}return ln}function Vs(b,I,$,ve){var Ve=b.length;for($=Co($),$<0&&($=-$>Ve?0:Ve+$),ve=ve===t||ve>Ve?Ve:Co(ve),ve<0&&(ve+=Ve),ve=$>ve?0:r0(ve);$<ve;)b[$++]=I;return b}function vs(b,I){var $=[];return ku(b,function(ve,Ve,ht){I(ve,Ve,ht)&&$.push(ve)}),$}function $s(b,I,$,ve,Ve){var ht=-1,Pt=b.length;for($||($=g),Ve||(Ve=[]);++ht<Pt;){var Vt=b[ht];I>0&&$(Vt)?I>1?$s(Vt,I-1,$,ve,Ve):LA(Ve,Vt):ve||(Ve[Ve.length]=Vt)}return Ve}var HA=Sp(),du=Sp(!0);function bl(b,I){return b&&HA(b,I,Mt)}function iA(b,I){return b&&du(b,I,Mt)}function Kc(b,I){return Su(I,function($){return lh(b[$])})}function ql(b,I){I=xa(I,b);for(var $=0,ve=I.length;b!=null&&$<ve;)b=b[wa(I[$++])];return $&&$==ve?b:t}function ba(b,I,$){var ve=I(b);return vo(b)?ve:LA(ve,$(b))}function Hs(b){return b==null?b===t?br:Rt:jA&&jA in ts(b)?id(b):Ln(b)}function hu(b,I){return b>I}function fu(b,I){return b!=null&&Po.call(b,I)}function ZA(b,I){return b!=null&&I in ts(b)}function Tu(b,I,$){return b>=Ya(I,$)&&b<As(I,$)}function Rc(b,I,$){for(var ve=$?Yc:qd,Ve=b[0].length,ht=b.length,Pt=ht,Vt=un(ht),ln=1/0,Xn=[];Pt--;){var Jn=b[Pt];Pt&&I&&(Jn=ws(Jn,au(I))),ln=Ya(Jn.length,ln),Vt[Pt]=!$&&(I||Ve>=120&&Jn.length>=120)?new Pc(Pt&&Jn):t}Jn=b[0];var fr=-1,Vr=Vt[0];e:for(;++fr<Ve&&Xn.length<ln;){var Ei=Jn[fr],Ji=I?I(Ei):Ei;if(Ei=$||Ei!==0?Ei:0,!(Vr?Qu(Vr,Ji):ve(Xn,Ji,$))){for(Pt=ht;--Pt;){var Xo=Vt[Pt];if(!(Xo?Qu(Xo,Ji):ve(b[Pt],Ji,$)))continue e}Vr&&Vr.push(Ji),Xn.push(Ei)}}return Xn}function EA(b,I,$,ve){return bl(b,function(Ve,ht,Pt){I(ve,$(Ve),ht,Pt)}),ve}function Kl(b,I,$){I=xa(I,b),b=er(b,I);var ve=b==null?b:b[wa(IA(I))];return ve==null?t:qs(ve,b,$)}function Bd(b){return pl(b)&&Hs(b)==yt}function O(b){return pl(b)&&Hs(b)==Ge}function a(b){return pl(b)&&Hs(b)==Pe}function c(b,I,$,ve,Ve){return b===I?!0:b==null||I==null||!pl(b)&&!pl(I)?b!==b&&I!==I:C(b,I,$,ve,c,Ve)}function C(b,I,$,ve,Ve,ht){var Pt=vo(b),Vt=vo(I),ln=Pt?Ft:wl(b),Xn=Vt?Ft:wl(I);ln=ln==yt?_n:ln,Xn=Xn==yt?_n:Xn;var Jn=ln==_n,fr=Xn==_n,Vr=ln==Xn;if(Vr&&Jf(b)){if(!Jf(I))return!1;Pt=!0,Jn=!1}if(Vr&&!Jn)return ht||(ht=new Os),Pt||vm(b)?mu(b,I,$,ve,Ve,ht):Jl(b,I,ln,$,ve,Ve,ht);if(!($&U)){var Ei=Jn&&Po.call(b,"__wrapped__"),Ji=fr&&Po.call(I,"__wrapped__");if(Ei||Ji){var Xo=Ei?b.value():b,eo=Ji?I.value():I;return ht||(ht=new Os),Ve(Xo,eo,$,ve,ht)}}return Vr?(ht||(ht=new Os),Yf(b,I,$,ve,Ve,ht)):!1}function M(b){return pl(b)&&wl(b)==Lt}function k(b,I,$,ve){var Ve=$.length,ht=Ve,Pt=!ve;if(b==null)return!ht;for(b=ts(b);Ve--;){var Vt=$[Ve];if(Pt&&Vt[2]?Vt[1]!==b[Vt[0]]:!(Vt[0]in b))return!1}for(;++Ve<ht;){Vt=$[Ve];var ln=Vt[0],Xn=b[ln],Jn=Vt[1];if(Pt&&Vt[2]){if(Xn===t&&!(ln in b))return!1}else{var fr=new Os;if(ve)var Vr=ve(Xn,Jn,ln,b,I,fr);if(!(Vr===t?c(Jn,Xn,U|j,ve,fr):Vr))return!1}}return!0}function z(b){if(!Ja(b)||_e(b))return!1;var I=lh(b)?Hu:xs;return I.test(Ha(b))}function Y(b){return pl(b)&&Hs(b)==ar}function J(b){return pl(b)&&wl(b)==kn}function se(b){return pl(b)&&ym(b.length)&&!!oo[Hs(b)]}function ye(b){return typeof b=="function"?b:b==null?cd:typeof b=="object"?vo(b)?lt(b[0],b[1]):mt(b):n8(b)}function Te(b){if(!Ue(b))return Ju(b);var I=[];for(var $ in ts(b))Po.call(b,$)&&$!="constructor"&&I.push($);return I}function ke(b){if(!Ja(b))return bn(b);var I=Ue(b),$=[];for(var ve in b)ve=="constructor"&&(I||!Po.call(b,ve))||$.push(ve);return $}function Qe(b,I){return b<I}function et(b,I){var $=-1,ve=zc(b)?un(b.length):[];return ku(b,function(Ve,ht,Pt){ve[++$]=I(Ve,ht,Pt)}),ve}function mt(b){var I=Uo(b);return I.length==1&&I[0][2]?wt(I[0][0],I[0][1]):function($){return $===b||k($,b,I)}}function lt(b,I){return K(b)&&gt(I)?wt(wa(b),I):function($){var ve=ct($,b);return ve===t&&ve===I?zt($,b):c(I,ve,U|j)}}function pt(b,I,$,ve,Ve){b!==I&&HA(I,function(ht,Pt){if(Ve||(Ve=new Os),Ja(ht))bt(b,I,Pt,$,pt,ve,Ve);else{var Vt=ve?ve(pr(b,Pt),ht,Pt+"",b,I,Ve):t;Vt===t&&(Vt=ht),rA(b,Pt,Vt)}},an)}function bt(b,I,$,ve,Ve,ht,Pt){var Vt=pr(b,$),ln=pr(I,$),Xn=Pt.get(ln);if(Xn){rA(b,$,Xn);return}var Jn=ht?ht(Vt,ln,$+"",b,I,Pt):t,fr=Jn===t;if(fr){var Vr=vo(ln),Ei=!Vr&&Jf(ln),Ji=!Vr&&!Ei&&vm(ln);Jn=ln,Vr||Ei||Ji?vo(Vt)?Jn=Vt:Ea(Vt)?Jn=Ma(Vt):Ei?(fr=!1,Jn=Ns(ln,!0)):Ji?(fr=!1,Jn=lf(ln,!0)):Jn=[]:n0(ln)||Pp(ln)?(Jn=Vt,Pp(Vt)?Jn=i1(Vt):(!Ja(Vt)||lh(Vt))&&(Jn=gu(ln))):fr=!1}fr&&(Pt.set(ln,Jn),Ve(Jn,ln,ve,ht,Pt),Pt.delete(ln)),rA(b,$,Jn)}function Bt(b,I){var $=b.length;if($)return I+=I<0?$:0,E(I,$)?b[I]:t}function kt(b,I,$){I.length?I=ws(I,function(ht){return vo(ht)?function(Pt){return ql(Pt,ht.length===1?ht[0]:ht)}:ht}):I=[cd];var ve=-1;I=ws(I,au(Oi()));var Ve=et(b,function(ht,Pt,Vt){var ln=ws(I,function(Xn){return Xn(ht)});return{criteria:ln,index:++ve,value:ht}});return _h(Ve,function(ht,Pt){return sm(ht,Pt,$)})}function Kt(b,I){return Ut(b,I,function($,ve){return zt(b,ve)})}function Ut(b,I,$){for(var ve=-1,Ve=I.length,ht={};++ve<Ve;){var Pt=I[ve],Vt=ql(b,Pt);$(Vt,Pt)&&kr(ht,xa(Pt,b),Vt)}return ht}function It(b){return function(I){return ql(I,b)}}function nn(b,I,$,ve){var Ve=ve?Df:ms,ht=-1,Pt=I.length,Vt=b;for(b===I&&(I=Ma(I)),$&&(Vt=ws(b,au($)));++ht<Pt;)for(var ln=0,Xn=I[ht],Jn=$?$(Xn):Xn;(ln=Ve(Vt,Jn,ln,ve))>-1;)Vt!==b&&Ec.call(Vt,ln,1),Ec.call(b,ln,1);return b}function qt(b,I){for(var $=b?I.length:0,ve=$-1;$--;){var Ve=I[$];if($==ve||Ve!==ht){var ht=Ve;E(Ve)?Ec.call(b,Ve,1):xl(b,Ve)}}return b}function xn(b,I){return b+Xu(xA()*(I-b+1))}function Sn(b,I,$,ve){for(var Ve=-1,ht=As(Bc((I-b)/($||1)),0),Pt=un(ht);ht--;)Pt[ve?ht:++Ve]=b,b+=$;return Pt}function Cn(b,I){var $="";if(!b||I<1||I>Xe)return $;do I%2&&($+=b),I=Xu(I/2),I&&(b+=b);while(I);return $}function In(b,I){return jr(rr(b,I,cd),b+"")}function Nn(b){return YA(El(b))}function Rn(b,I){var $=El(b);return Fa($,Dr(I,0,$.length))}function kr(b,I,$,ve){if(!Ja(b))return b;I=xa(I,b);for(var Ve=-1,ht=I.length,Pt=ht-1,Vt=b;Vt!=null&&++Ve<ht;){var ln=wa(I[Ve]),Xn=$;if(ln==="__proto__"||ln==="constructor"||ln==="prototype")return b;if(Ve!=Pt){var Jn=Vt[ln];Xn=ve?ve(Jn,ln,Vt):t,Xn===t&&(Xn=Ja(Jn)?Jn:E(I[Ve+1])?[]:{})}qA(Vt,ln,Xn),Vt=Vt[ln]}return b}var Ri=Sd?function(b,I){return Sd.set(b,I),b}:cd,Xi=NA?function(b,I){return NA(b,"toString",{configurable:!0,enumerable:!1,value:av(I),writable:!0})}:cd;function _i(b){return Fa(El(b))}function Bi(b,I,$){var ve=-1,Ve=b.length;I<0&&(I=-I>Ve?0:Ve+I),$=$>Ve?Ve:$,$<0&&($+=Ve),Ve=I>$?0:$-I>>>0,I>>>=0;for(var ht=un(Ve);++ve<Ve;)ht[ve]=b[ve+I];return ht}function Qo(b,I){var $;return ku(b,function(ve,Ve,ht){return $=I(ve,Ve,ht),!$}),!!$}function Lo(b,I,$){var ve=0,Ve=b==null?ve:b.length;if(typeof I=="number"&&I===I&&Ve<=_t){for(;ve<Ve;){var ht=ve+Ve>>>1,Pt=b[ht];Pt!==null&&!Fd(Pt)&&($?Pt<=I:Pt<I)?ve=ht+1:Ve=ht}return Ve}return So(b,I,cd,$)}function So(b,I,$,ve){var Ve=0,ht=b==null?0:b.length;if(ht===0)return 0;I=$(I);for(var Pt=I!==I,Vt=I===null,ln=Fd(I),Xn=I===t;Ve<ht;){var Jn=Xu((Ve+ht)/2),fr=$(b[Jn]),Vr=fr!==t,Ei=fr===null,Ji=fr===fr,Xo=Fd(fr);if(Pt)var eo=ve||Ji;else Xn?eo=Ji&&(ve||Vr):Vt?eo=Ji&&Vr&&(ve||!Ei):ln?eo=Ji&&Vr&&!Ei&&(ve||!Xo):Ei||Xo?eo=!1:eo=ve?fr<=I:fr<I;eo?Ve=Jn+1:ht=Jn}return Ya(ht,He)}function fo(b,I){for(var $=-1,ve=b.length,Ve=0,ht=[];++$<ve;){var Pt=b[$],Vt=I?I(Pt):Pt;if(!$||!ah(Vt,ln)){var ln=Vt;ht[Ve++]=Pt===0?0:Pt}}return ht}function ca(b){return typeof b=="number"?b:Fd(b)?Se:+b}function Ho(b){if(typeof b=="string")return b;if(vo(b))return ws(b,Ho)+"";if(Fd(b))return wh?wh.call(b):"";var I=b+"";return I=="0"&&1/b==-1/0?"-0":I}function rs(b,I,$){var ve=-1,Ve=qd,ht=b.length,Pt=!0,Vt=[],ln=Vt;if($)Pt=!1,Ve=Yc;else if(ht>=i){var Xn=I?null:um(b);if(Xn)return Cl(Xn);Pt=!1,Ve=Qu,ln=new Pc}else ln=I?[]:Vt;e:for(;++ve<ht;){var Jn=b[ve],fr=I?I(Jn):Jn;if(Jn=$||Jn!==0?Jn:0,Pt&&fr===fr){for(var Vr=ln.length;Vr--;)if(ln[Vr]===fr)continue e;I&&ln.push(fr),Vt.push(Jn)}else Ve(ln,fr,$)||(ln!==Vt&&ln.push(fr),Vt.push(Jn))}return Vt}function xl(b,I){return I=xa(I,b),b=er(b,I),b==null||delete b[wa(IA(I))]}function BA(b,I,$,ve){return kr(b,I,$(ql(b,I)),ve)}function pu(b,I,$,ve){for(var Ve=b.length,ht=ve?Ve:-1;(ve?ht--:++ht<Ve)&&I(b[ht],ht,b););return $?Bi(b,ve?0:ht,ve?ht+1:Ve):Bi(b,ve?ht+1:0,ve?Ve:ht)}function Vl(b,I){var $=b;return $ instanceof ri&&($=$.value()),mA(I,function(ve,Ve){return Ve.func.apply(Ve.thisArg,LA([ve],Ve.args))},$)}function $l(b,I,$){var ve=b.length;if(ve<2)return ve?rs(b[0]):[];for(var Ve=-1,ht=un(ve);++Ve<ve;)for(var Pt=b[Ve],Vt=-1;++Vt<ve;)Vt!=Ve&&(ht[Ve]=Aa(ht[Ve]||Pt,b[Vt],I,$));return rs($s(ht,1),I,$)}function oA(b,I,$){for(var ve=-1,Ve=b.length,ht=I.length,Pt={};++ve<Ve;){var Vt=ve<ht?I[ve]:t;$(Pt,b[ve],Vt)}return Pt}function Rl(b){return Ea(b)?b:[]}function Pu(b){return typeof b=="function"?b:cd}function xa(b,I){return vo(b)?b:K(b,I)?[b]:Zs(ia(b))}var Ku=In;function Hl(b,I,$){var ve=b.length;return $=$===t?ve:$,!I&&$>=ve?b:Bi(b,I,$)}var Dc=wd||function(b){return Br.clearTimeout(b)};function Ns(b,I){if(I)return b.slice();var $=b.length,ve=of?of($):new b.constructor($);return b.copy(ve),ve}function ds(b){var I=new b.constructor(b.byteLength);return new Zd(I).set(new Zd(b)),I}function Ra(b,I){var $=I?ds(b.buffer):b.buffer;return new b.constructor($,b.byteOffset,b.byteLength)}function Cs(b){var I=new b.constructor(b.source,wi.exec(b));return I.lastIndex=b.lastIndex,I}function sA(b){return Iu?ts(Iu.call(b)):{}}function lf(b,I){var $=I?ds(b.buffer):b.buffer;return new b.constructor($,b.byteOffset,b.length)}function pc(b,I){if(b!==I){var $=b!==t,ve=b===null,Ve=b===b,ht=Fd(b),Pt=I!==t,Vt=I===null,ln=I===I,Xn=Fd(I);if(!Vt&&!Xn&&!ht&&b>I||ht&&Pt&&ln&&!Vt&&!Xn||ve&&Pt&&ln||!$&&ln||!Ve)return 1;if(!ve&&!ht&&!Xn&&b<I||Xn&&$&&Ve&&!ve&&!ht||Vt&&$&&Ve||!Pt&&Ve||!ln)return-1}return 0}function sm(b,I,$){for(var ve=-1,Ve=b.criteria,ht=I.criteria,Pt=Ve.length,Vt=$.length;++ve<Pt;){var ln=pc(Ve[ve],ht[ve]);if(ln){if(ve>=Vt)return ln;var Xn=$[ve];return ln*(Xn=="desc"?-1:1)}}return b.index-I.index}function Oh(b,I,$,ve){for(var Ve=-1,ht=b.length,Pt=$.length,Vt=-1,ln=I.length,Xn=As(ht-Pt,0),Jn=un(ln+Xn),fr=!ve;++Vt<ln;)Jn[Vt]=I[Vt];for(;++Ve<Pt;)(fr||Ve<ht)&&(Jn[$[Ve]]=b[Ve]);for(;Xn--;)Jn[Vt++]=b[Ve++];return Jn}function th(b,I,$,ve){for(var Ve=-1,ht=b.length,Pt=-1,Vt=$.length,ln=-1,Xn=I.length,Jn=As(ht-Vt,0),fr=un(Jn+Xn),Vr=!ve;++Ve<Jn;)fr[Ve]=b[Ve];for(var Ei=Ve;++ln<Xn;)fr[Ei+ln]=I[ln];for(;++Pt<Vt;)(Vr||Ve<ht)&&(fr[Ei+$[Pt]]=b[Ve++]);return fr}function Ma(b,I){var $=-1,ve=b.length;for(I||(I=un(ve));++$<ve;)I[$]=b[$];return I}function cl(b,I,$,ve){var Ve=!$;$||($={});for(var ht=-1,Pt=I.length;++ht<Pt;){var Vt=I[ht],ln=ve?ve($[Vt],b[Vt],Vt,$,b):t;ln===t&&(ln=b[Vt]),Ve?Al($,Vt,ln):qA($,Vt,ln)}return $}function OA(b,I){return cl(b,Ml(b),I)}function jf(b,I){return cl(b,Nm(b),I)}function nd(b,I){return function($,ve){var Ve=vo($)?Yd:Ka,ht=I?I():{};return Ve($,b,Oi(ve,2),ht)}}function aA(b){return In(function(I,$){var ve=-1,Ve=$.length,ht=Ve>1?$[Ve-1]:t,Pt=Ve>2?$[2]:t;for(ht=b.length>3&&typeof ht=="function"?(Ve--,ht):t,Pt&&S($[0],$[1],Pt)&&(ht=Ve<3?t:ht,Ve=1),I=ts(I);++ve<Ve;){var Vt=$[ve];Vt&&b(I,Vt,ve,ht)}return I})}function dl(b,I){return function($,ve){if($==null)return $;if(!zc($))return b($,ve);for(var Ve=$.length,ht=I?Ve:-1,Pt=ts($);(I?ht--:++ht<Ve)&&ve(Pt[ht],ht,Pt)!==!1;);return $}}function Sp(b){return function(I,$,ve){for(var Ve=-1,ht=ts(I),Pt=ve(I),Vt=Pt.length;Vt--;){var ln=Pt[b?Vt:++Ve];if($(ht[ln],ln,ht)===!1)break}return I}}function uf(b,I,$){var ve=I&N,Ve=Af(b);function ht(){var Pt=this&&this!==Br&&this instanceof ht?Ve:b;return Pt.apply(ve?$:this,arguments)}return ht}function am(b){return function(I){I=ia(I);var $=Cd(I)?qu(I):t,ve=$?$[0]:I.charAt(0),Ve=$?Hl($,1).join(""):I.slice(1);return ve[b]()+Ve}}function Od(b){return function(I){return mA(B_(Cu(I).replace(Ga,"")),b,"")}}function Af(b){return function(){var I=arguments;switch(I.length){case 0:return new b;case 1:return new b(I[0]);case 2:return new b(I[0],I[1]);case 3:return new b(I[0],I[1],I[2]);case 4:return new b(I[0],I[1],I[2],I[3]);case 5:return new b(I[0],I[1],I[2],I[3],I[4]);case 6:return new b(I[0],I[1],I[2],I[3],I[4],I[5]);case 7:return new b(I[0],I[1],I[2],I[3],I[4],I[5],I[6])}var $=QA(b.prototype),ve=b.apply($,I);return Ja(ve)?ve:$}}function Nf(b,I,$){var ve=Af(b);function Ve(){for(var ht=arguments.length,Pt=un(ht),Vt=ht,ln=Pd(Ve);Vt--;)Pt[Vt]=arguments[Vt];var Xn=ht<3&&Pt[0]!==ln&&Pt[ht-1]!==ln?[]:ll(Pt,ln);if(ht-=Xn.length,ht<$)return Zl(b,I,mc,Ve.placeholder,t,Pt,Xn,t,t,$-ht);var Jn=this&&this!==Br&&this instanceof Ve?ve:b;return qs(Jn,this,Pt)}return Ve}function Id(b){return function(I,$,ve){var Ve=ts(I);if(!zc(I)){var ht=Oi($,3);I=Mt(I),$=function(Vt){return ht(Ve[Vt],Vt,Ve)}}var Pt=b(I,$,ve);return Pt>-1?Ve[ht?I[Pt]:Pt]:t}}function Wf(b){return XA(function(I){var $=I.length,ve=$,Ve=Ti.prototype.thru;for(b&&I.reverse();ve--;){var ht=I[ve];if(typeof ht!="function")throw new lu(l);if(Ve&&!Pt&&kh(ht)=="wrapper")var Pt=new Ti([],!0)}for(ve=Pt?ve:$;++ve<$;){ht=I[ve];var Vt=kh(ht),ln=Vt=="wrapper"?hf(ht):t;ln&&Ae(ln[0])&&ln[1]==(W|oe|V|ie)&&!ln[4].length&&ln[9]==1?Pt=Pt[kh(ln[0])].apply(Pt,ln[3]):Pt=ht.length==1&&Ae(ht)?Pt[Vt]():Pt.thru(ht)}return function(){var Xn=arguments,Jn=Xn[0];if(Pt&&Xn.length==1&&vo(Jn))return Pt.plant(Jn).value();for(var fr=0,Vr=$?I[fr].apply(this,Xn):Jn;++fr<$;)Vr=I[fr].call(this,Vr);return Vr}})}function mc(b,I,$,ve,Ve,ht,Pt,Vt,ln,Xn){var Jn=I&W,fr=I&N,Vr=I&q,Ei=I&(oe|te),Ji=I&he,Xo=Vr?t:Af(b);function eo(){for(var bs=arguments.length,Ps=un(bs),jh=bs;jh--;)Ps[jh]=arguments[jh];if(Ei)var jd=Pd(eo),Nh=tf(Ps,jd);if(ve&&(Ps=Oh(Ps,ve,Ve,Ei)),ht&&(Ps=th(Ps,ht,Pt,Ei)),bs-=Nh,Ei&&bs<Xn){var cA=ll(Ps,jd);return Zl(b,I,mc,eo.placeholder,$,Ps,cA,Vt,ln,Xn-bs)}var tp=fr?$:this,xm=Vr?tp[b]:b;return bs=Ps.length,Vt?Ps=Cr(Ps,Vt):Ji&&bs>1&&Ps.reverse(),Jn&&ln<bs&&(Ps.length=ln),this&&this!==Br&&this instanceof eo&&(xm=Xo||Af(xm)),xm.apply(tp,Ps)}return eo}function lm(b,I){return function($,ve){return EA($,b,I(ve),{})}}function Fc(b,I){return function($,ve){var Ve;if($===t&&ve===t)return I;if($!==t&&(Ve=$),ve!==t){if(Ve===t)return ve;typeof $=="string"||typeof ve=="string"?($=Ho($),ve=Ho(ve)):($=ca($),ve=ca(ve)),Ve=b($,ve)}return Ve}}function nh(b){return XA(function(I){return I=ws(I,au(Oi())),In(function($){var ve=this;return b(I,function(Ve){return qs(Ve,ve,$)})})})}function rh(b,I){I=I===t?" ":Ho(I);var $=I.length;if($<2)return $?Cn(I,b):I;var ve=Cn(I,Bc(b/xd(I)));return Cd(I)?Hl(qu(ve),0,b).join(""):ve.slice(0,b)}function Ep(b,I,$,ve){var Ve=I&N,ht=Af(b);function Pt(){for(var Vt=-1,ln=arguments.length,Xn=-1,Jn=ve.length,fr=un(Jn+ln),Vr=this&&this!==Br&&this instanceof Pt?ht:b;++Xn<Jn;)fr[Xn]=ve[Xn];for(;ln--;)fr[Xn++]=arguments[++Vt];return qs(Vr,Ve?$:this,fr)}return Pt}function kd(b){return function(I,$,ve){return ve&&typeof ve!="number"&&S(I,$,ve)&&($=ve=t),I=Fh(I),$===t?($=I,I=0):$=Fh($),ve=ve===t?I<$?1:-1:Fh(ve),Sn(I,$,ve,b)}}function Gf(b){return function(I,$){return typeof I=="string"&&typeof $=="string"||(I=ud(I),$=ud($)),b(I,$)}}function Zl(b,I,$,ve,Ve,ht,Pt,Vt,ln,Xn){var Jn=I&oe,fr=Jn?Pt:t,Vr=Jn?t:Pt,Ei=Jn?ht:t,Ji=Jn?t:ht;I|=Jn?V:ne,I&=~(Jn?ne:V),I&H||(I&=-4);var Xo=[b,I,Ve,Ei,fr,Ji,Vr,Vt,ln,Xn],eo=$.apply(t,Xo);return Ae(b)&&Or(eo,Xo),eo.placeholder=ve,zi(eo,b,I)}function Xl(b){var I=ya[b];return function($,ve){if($=ud($),ve=ve==null?0:Ya(Co(ve),292),ve&&Oc($)){var Ve=(ia($)+"e").split("e"),ht=I(Ve[0]+"e"+(+Ve[1]+ve));return Ve=(ia(ht)+"e").split("e"),+(Ve[0]+"e"+(+Ve[1]-ve))}return I($)}}var um=va&&1/Cl(new va([,-0]))[1]==Ze?function(b){return new va(b)}:uh;function Bp(b){return function(I){var $=wl(I);return $==Lt?_d(I):$==kn?ko(I):yd(I,b(I))}}function Zo(b,I,$,ve,Ve,ht,Pt,Vt){var ln=I&q;if(!ln&&typeof b!="function")throw new lu(l);var Xn=ve?ve.length:0;if(Xn||(I&=-97,ve=Ve=t),Pt=Pt===t?Pt:As(Co(Pt),0),Vt=Vt===t?Vt:Co(Vt),Xn-=Ve?Ve.length:0,I&ne){var Jn=ve,fr=Ve;ve=Ve=t}var Vr=ln?t:hf(b),Ei=[b,I,$,ve,Ve,Jn,fr,ht,Pt,Vt];if(Vr&&Yt(Ei,Vr),b=Ei[0],I=Ei[1],$=Ei[2],ve=Ei[3],Ve=Ei[4],Vt=Ei[9]=Ei[9]===t?ln?0:b.length:As(Ei[9]-Xn,0),!Vt&&I&(oe|te)&&(I&=-25),!I||I==N)var Ji=uf(b,I,$);else I==oe||I==te?Ji=Nf(b,I,Vt):(I==V||I==(N|V))&&!Ve.length?Ji=Ep(b,I,$,ve):Ji=mc.apply(t,Ei);var Xo=Vr?Ri:Or;return zi(Xo(Ji,Ei),b,I)}function Qf(b,I,$,ve){return b===t||ah(b,Nl[$])&&!Po.call(ve,$)?I:b}function cf(b,I,$,ve,Ve,ht){return Ja(b)&&Ja(I)&&(ht.set(I,b),pt(b,I,t,cf,ht),ht.delete(I)),b}function Td(b){return n0(b)?t:b}function mu(b,I,$,ve,Ve,ht){var Pt=$&U,Vt=b.length,ln=I.length;if(Vt!=ln&&!(Pt&&ln>Vt))return!1;var Xn=ht.get(b),Jn=ht.get(I);if(Xn&&Jn)return Xn==I&&Jn==b;var fr=-1,Vr=!0,Ei=$&j?new Pc:t;for(ht.set(b,I),ht.set(I,b);++fr<Vt;){var Ji=b[fr],Xo=I[fr];if(ve)var eo=Pt?ve(Xo,Ji,fr,I,b,ht):ve(Ji,Xo,fr,b,I,ht);if(eo!==t){if(eo)continue;Vr=!1;break}if(Ei){if(!UA(I,function(bs,Ps){if(!Qu(Ei,Ps)&&(Ji===bs||Ve(Ji,bs,$,ve,ht)))return Ei.push(Ps)})){Vr=!1;break}}else if(!(Ji===Xo||Ve(Ji,Xo,$,ve,ht))){Vr=!1;break}}return ht.delete(b),ht.delete(I),Vr}function Jl(b,I,$,ve,Ve,ht,Pt){switch($){case ce:if(b.byteLength!=I.byteLength||b.byteOffset!=I.byteOffset)return!1;b=b.buffer,I=I.buffer;case Ge:return!(b.byteLength!=I.byteLength||!ht(new Zd(b),new Zd(I)));case Le:case Pe:case Zt:return ah(+b,+I);case it:return b.name==I.name&&b.message==I.message;case ar:case mn:return b==I+"";case Lt:var Vt=_d;case kn:var ln=ve&U;if(Vt||(Vt=Cl),b.size!=I.size&&!ln)return!1;var Xn=Pt.get(b);if(Xn)return Xn==I;ve|=j,Pt.set(b,I);var Jn=mu(Vt(b),Vt(I),ve,Ve,ht,Pt);return Pt.delete(b),Jn;case zn:if(Iu)return Iu.call(b)==Iu.call(I)}return!1}function Yf(b,I,$,ve,Ve,ht){var Pt=$&U,Vt=df(b),ln=Vt.length,Xn=df(I),Jn=Xn.length;if(ln!=Jn&&!Pt)return!1;for(var fr=ln;fr--;){var Vr=Vt[fr];if(!(Pt?Vr in I:Po.call(I,Vr)))return!1}var Ei=ht.get(b),Ji=ht.get(I);if(Ei&&Ji)return Ei==I&&Ji==b;var Xo=!0;ht.set(b,I),ht.set(I,b);for(var eo=Pt;++fr<ln;){Vr=Vt[fr];var bs=b[Vr],Ps=I[Vr];if(ve)var jh=Pt?ve(Ps,bs,Vr,I,b,ht):ve(bs,Ps,Vr,b,I,ht);if(!(jh===t?bs===Ps||Ve(bs,Ps,$,ve,ht):jh)){Xo=!1;break}eo||(eo=Vr=="constructor")}if(Xo&&!eo){var jd=b.constructor,Nh=I.constructor;jd!=Nh&&"constructor"in b&&"constructor"in I&&!(typeof jd=="function"&&jd instanceof jd&&typeof Nh=="function"&&Nh instanceof Nh)&&(Xo=!1)}return ht.delete(b),ht.delete(I),Xo}function XA(b){return jr(rr(b,t,od),b+"")}function df(b){return ba(b,Mt,Ml)}function Ih(b){return ba(b,an,Nm)}var hf=Sd?function(b){return Sd.get(b)}:uh;function kh(b){for(var I=b.name+"",$=Zc[I],ve=Po.call(Zc,I)?$.length:0;ve--;){var Ve=$[ve],ht=Ve.func;if(ht==null||ht==b)return Ve.name}return I}function Pd(b){var I=Po.call(ot,"placeholder")?ot:b;return I.placeholder}function Oi(){var b=ot.iteratee||lv;return b=b===lv?ye:b,arguments.length?b(arguments[0],arguments[1]):b}function ih(b,I){var $=b.__data__;return Z(I)?$[typeof I=="string"?"string":"hash"]:$.map}function Uo(b){for(var I=Mt(b),$=I.length;$--;){var ve=I[$],Ve=b[ve];I[$]=[ve,Ve,gt(Ve)]}return I}function rd(b,I){var $=Ac(b,I);return z($)?$:t}function id(b){var I=Po.call(b,jA),$=b[jA];try{b[jA]=t;var ve=!0}catch{}var Ve=Bu.call(b);return ve&&(I?b[jA]=$:delete b[jA]),Ve}var Ml=$c?function(b){return b==null?[]:(b=ts(b),Su($c(b),function(I){return Sc.call(b,I)}))}:p3,Nm=$c?function(b){for(var I=[];b;)LA(I,Ml(b)),b=Qa(b);return I}:p3,wl=Hs;(Hc&&wl(new Hc(new ArrayBuffer(1)))!=ce||Gl&&wl(new Gl)!=Lt||WA&&wl(WA.resolve())!=qn||va&&wl(new va)!=kn||eA&&wl(new eA)!=gr)&&(wl=function(b){var I=Hs(b),$=I==_n?b.constructor:t,ve=$?Ha($):"";if(ve)switch(ve){case Jd:return ce;case dc:return Lt;case tA:return qn;case _l:return kn;case GA:return gr}return I});function Am(b,I,$){for(var ve=-1,Ve=$.length;++ve<Ve;){var ht=$[ve],Pt=ht.size;switch(ht.type){case"drop":b+=Pt;break;case"dropRight":I-=Pt;break;case"take":I=Ya(I,b+Pt);break;case"takeRight":b=As(b,I-Pt);break}}return{start:b,end:I}}function Da(b){var I=b.match($n);return I?I[1].split(Yn):[]}function cm(b,I,$){I=xa(I,b);for(var ve=-1,Ve=I.length,ht=!1;++ve<Ve;){var Pt=wa(I[ve]);if(!(ht=b!=null&&$(b,Pt)))break;b=b[Pt]}return ht||++ve!=Ve?ht:(Ve=b==null?0:b.length,!!Ve&&ym(Ve)&&E(Pt,Ve)&&(vo(b)||Pp(b)))}function qf(b){var I=b.length,$=new b.constructor(I);return I&&typeof b[0]=="string"&&Po.call(b,"index")&&($.index=b.index,$.input=b.input),$}function gu(b){return typeof b.constructor=="function"&&!Ue(b)?QA(Qa(b)):{}}function ff(b,I,$){var ve=b.constructor;switch(I){case Ge:return ds(b);case Le:case Pe:return new ve(+b);case ce:return Ra(b,$);case pe:case rt:case St:case Ht:case sn:case nr:case $e:case ae:case Ce:return lf(b,$);case Lt:return new ve;case Zt:case mn:return new ve(b);case ar:return Cs(b);case kn:return new ve;case zn:return sA(b)}}function A(b,I){var $=I.length;if(!$)return b;var ve=$-1;return I[ve]=($>1?"& ":"")+I[ve],I=I.join($>2?", ":" "),b.replace(Bn,`{
/* [wrapped with `+I+`] */
`)}function g(b){return vo(b)||Pp(b)||!!(sf&&b&&b[sf])}function E(b,I){var $=typeof b;return I=I??Xe,!!I&&($=="number"||$!="symbol"&&ps.test(b))&&b>-1&&b%1==0&&b<I}function S(b,I,$){if(!Ja($))return!1;var ve=typeof I;return(ve=="number"?zc($)&&E(I,$.length):ve=="string"&&I in $)?ah($[I],b):!1}function K(b,I){if(vo(b))return!1;var $=typeof b;return $=="number"||$=="symbol"||$=="boolean"||b==null||Fd(b)?!0:Fn.test(b)||!Dn.test(b)||I!=null&&b in ts(I)}function Z(b){var I=typeof b;return I=="string"||I=="number"||I=="symbol"||I=="boolean"?b!=="__proto__":b===null}function Ae(b){var I=kh(b),$=ot[I];if(typeof $!="function"||!(I in ri.prototype))return!1;if(b===$)return!0;var ve=hf($);return!!ve&&b===ve[0]}function _e(b){return!!lo&&lo in b}var Ie=Wl?lh:m3;function Ue(b){var I=b&&b.constructor,$=typeof I=="function"&&I.prototype||Nl;return b===$}function gt(b){return b===b&&!Ja(b)}function wt(b,I){return function($){return $==null?!1:$[b]===I&&(I!==t||b in ts($))}}function Xt(b){var I=vr(b,function(ve){return $.size===v&&$.clear(),ve}),$=I.cache;return I}function Yt(b,I){var $=b[1],ve=I[1],Ve=$|ve,ht=Ve<(N|q|W),Pt=ve==W&&$==oe||ve==W&&$==ie&&b[7].length<=I[8]||ve==(W|ie)&&I[7].length<=I[8]&&$==oe;if(!(ht||Pt))return b;ve&N&&(b[2]=I[2],Ve|=$&N?0:H);var Vt=I[3];if(Vt){var ln=b[3];b[3]=ln?Oh(ln,Vt,I[4]):Vt,b[4]=ln?ll(b[3],x):I[4]}return Vt=I[5],Vt&&(ln=b[5],b[5]=ln?th(ln,Vt,I[6]):Vt,b[6]=ln?ll(b[5],x):I[6]),Vt=I[7],Vt&&(b[7]=Vt),ve&W&&(b[8]=b[8]==null?I[8]:Ya(b[8],I[8])),b[9]==null&&(b[9]=I[9]),b[0]=I[0],b[1]=Ve,b}function bn(b){var I=[];if(b!=null)for(var $ in ts(b))I.push($);return I}function Ln(b){return Bu.call(b)}function rr(b,I,$){return I=As(I===t?b.length-1:I,0),function(){for(var ve=arguments,Ve=-1,ht=As(ve.length-I,0),Pt=un(ht);++Ve<ht;)Pt[Ve]=ve[I+Ve];Ve=-1;for(var Vt=un(I+1);++Ve<I;)Vt[Ve]=ve[Ve];return Vt[I]=$(Pt),qs(b,this,Vt)}}function er(b,I){return I.length<2?b:ql(b,Bi(I,0,-1))}function Cr(b,I){for(var $=b.length,ve=Ya(I.length,$),Ve=Ma(b);ve--;){var ht=I[ve];b[ve]=E(ht,$)?Ve[ht]:t}return b}function pr(b,I){if(!(I==="constructor"&&typeof b[I]=="function")&&I!="__proto__")return b[I]}var Or=yo(Ri),oi=Vc||function(b,I){return Br.setTimeout(b,I)},jr=yo(Xi);function zi(b,I,$){var ve=I+"";return jr(b,A(ve,Za(Da(ve),$)))}function yo(b){var I=0,$=0;return function(){var ve=wp(),Ve=Me-(ve-$);if($=ve,Ve>0){if(++I>=me)return arguments[0]}else I=0;return b.apply(t,arguments)}}function Fa(b,I){var $=-1,ve=b.length,Ve=ve-1;for(I=I===t?ve:I;++$<I;){var ht=xn($,Ve),Pt=b[ht];b[ht]=b[$],b[$]=Pt}return b.length=I,b}var Zs=Xt(function(b){var I=[];return b.charCodeAt(0)===46&&I.push(""),b.replace(on,function($,ve,Ve,ht){I.push(Ve?ht.replace(ma,"$1"):ve||$)}),I});function wa(b){if(typeof b=="string"||Fd(b))return b;var I=b+"";return I=="0"&&1/b==-1/0?"-0":I}function Ha(b){if(b!=null){try{return vA.call(b)}catch{}try{return b+""}catch{}}return""}function Za(b,I){return al(Gt,function($){var ve="_."+$[0];I&$[1]&&!qd(b,ve)&&b.push(ve)}),b.sort()}function Ru(b){if(b instanceof ri)return b.clone();var I=new Ti(b.__wrapped__,b.__chain__);return I.__actions__=Ma(b.__actions__),I.__index__=b.__index__,I.__values__=b.__values__,I}function hl(b,I,$){($?S(b,I,$):I===t)?I=1:I=As(Co(I),0);var ve=b==null?0:b.length;if(!ve||I<1)return[];for(var Ve=0,ht=0,Pt=un(Bc(ve/I));Ve<ve;)Pt[ht++]=Bi(b,Ve,Ve+=I);return Pt}function Sa(b){for(var I=-1,$=b==null?0:b.length,ve=0,Ve=[];++I<$;){var ht=b[I];ht&&(Ve[ve++]=ht)}return Ve}function is(){var b=arguments.length;if(!b)return[];for(var I=un(b-1),$=arguments[0],ve=b;ve--;)I[ve-1]=arguments[ve];return LA(vo($)?Ma($):[$],$s(I,1))}var gi=In(function(b,I){return Ea(b)?Aa(b,$s(I,1,Ea,!0)):[]}),os=In(function(b,I){var $=IA(I);return Ea($)&&($=t),Ea(b)?Aa(b,$s(I,1,Ea,!0),Oi($,2)):[]}),Xs=In(function(b,I){var $=IA(I);return Ea($)&&($=t),Ea(b)?Aa(b,$s(I,1,Ea,!0),t,$):[]});function da(b,I,$){var ve=b==null?0:b.length;return ve?(I=$||I===t?1:Co(I),Bi(b,I<0?0:I,ve)):[]}function Is(b,I,$){var ve=b==null?0:b.length;return ve?(I=$||I===t?1:Co(I),I=ve-I,Bi(b,0,I<0?0:I)):[]}function eu(b,I){return b&&b.length?pu(b,Oi(I,3),!0,!0):[]}function Bo(b,I){return b&&b.length?pu(b,Oi(I,3),!0):[]}function oh(b,I,$,ve){var Ve=b==null?0:b.length;return Ve?($&&typeof $!="number"&&S(b,I,$)&&($=0,ve=Ve),Vs(b,I,$,ve)):[]}function yu(b,I,$){var ve=b==null?0:b.length;if(!ve)return-1;var Ve=$==null?0:Co($);return Ve<0&&(Ve=As(ve+Ve,0)),bc(b,Oi(I,3),Ve)}function lA(b,I,$){var ve=b==null?0:b.length;if(!ve)return-1;var Ve=ve-1;return $!==t&&(Ve=Co($),Ve=$<0?As(ve+Ve,0):Ya(Ve,ve-1)),bc(b,Oi(I,3),Ve,!0)}function od(b){var I=b==null?0:b.length;return I?$s(b,1):[]}function Xa(b){var I=b==null?0:b.length;return I?$s(b,Ze):[]}function La(b,I){var $=b==null?0:b.length;return $?(I=I===t?1:Co(I),$s(b,I)):[]}function Th(b){for(var I=-1,$=b==null?0:b.length,ve={};++I<$;){var Ve=b[I];ve[Ve[0]]=Ve[1]}return ve}function Vf(b){return b&&b.length?b[0]:t}function Ph(b,I,$){var ve=b==null?0:b.length;if(!ve)return-1;var Ve=$==null?0:Co($);return Ve<0&&(Ve=As(ve+Ve,0)),ms(b,I,Ve)}function dm(b){var I=b==null?0:b.length;return I?Bi(b,0,-1):[]}var Wm=In(function(b){var I=ws(b,Rl);return I.length&&I[0]===b[0]?Rc(I):[]}),pf=In(function(b){var I=IA(b),$=ws(b,Rl);return I===IA($)?I=t:$.pop(),$.length&&$[0]===b[0]?Rc($,Oi(I,2)):[]}),Gm=In(function(b){var I=IA(b),$=ws(b,Rl);return I=typeof I=="function"?I:t,I&&$.pop(),$.length&&$[0]===b[0]?Rc($,t,I):[]});function sd(b,I){return b==null?"":Ic.call(b,I)}function IA(b){var I=b==null?0:b.length;return I?b[I-1]:t}function hm(b,I,$){var ve=b==null?0:b.length;if(!ve)return-1;var Ve=ve;return $!==t&&(Ve=Co($),Ve=Ve<0?As(ve+Ve,0):Ya(Ve,ve-1)),I===I?Ff(b,I,Ve):bc(b,Zh,Ve,!0)}function U0(b,I){return b&&b.length?Bt(b,Co(I)):t}var Qm=In(fm);function fm(b,I){return b&&b.length&&I&&I.length?nn(b,I):b}function JA(b,I,$){return b&&b.length&&I&&I.length?nn(b,I,Oi($,2)):b}function mf(b,I,$){return b&&b.length&&I&&I.length?nn(b,I,t,$):b}var ad=XA(function(b,I){var $=b==null?0:b.length,ve=VA(b,I);return qt(b,ws(I,function(Ve){return E(Ve,$)?+Ve:Ve}).sort(pc)),ve});function kA(b,I){var $=[];if(!(b&&b.length))return $;var ve=-1,Ve=[],ht=b.length;for(I=Oi(I,3);++ve<ht;){var Pt=b[ve];I(Pt,ve,b)&&($.push(Pt),Ve.push(ve))}return qt(b,Ve),$}function pm(b){return b==null?b:ul.call(b)}function Ym(b,I,$){var ve=b==null?0:b.length;return ve?($&&typeof $!="number"&&S(b,I,$)?(I=0,$=ve):(I=I==null?0:Co(I),$=$===t?ve:Co($)),Bi(b,I,$)):[]}function qm(b,I){return Lo(b,I)}function jy(b,I,$){return So(b,I,Oi($,2))}function Kd(b,I){var $=b==null?0:b.length;if($){var ve=Lo(b,I);if(ve<$&&ah(b[ve],I))return ve}return-1}function Vg(b,I){return Lo(b,I,!0)}function Vm(b,I,$){return So(b,I,Oi($,2),!0)}function $f(b,I){var $=b==null?0:b.length;if($){var ve=Lo(b,I,!0)-1;if(ah(b[ve],I))return ve}return-1}function z0(b){return b&&b.length?fo(b):[]}function Hf(b,I){return b&&b.length?fo(b,Oi(I,2)):[]}function j0(b){var I=b==null?0:b.length;return I?Bi(b,1,I):[]}function $g(b,I,$){return b&&b.length?(I=$||I===t?1:Co(I),Bi(b,0,I<0?0:I)):[]}function N0(b,I,$){var ve=b==null?0:b.length;return ve?(I=$||I===t?1:Co(I),I=ve-I,Bi(b,I<0?0:I,ve)):[]}function gf(b,I){return b&&b.length?pu(b,Oi(I,3),!1,!0):[]}function Hg(b,I){return b&&b.length?pu(b,Oi(I,3)):[]}var W0=In(function(b){return rs($s(b,1,Ea,!0))}),G0=In(function(b){var I=IA(b);return Ea(I)&&(I=t),rs($s(b,1,Ea,!0),Oi(I,2))}),Sl=In(function(b){var I=IA(b);return I=typeof I=="function"?I:t,rs($s(b,1,Ea,!0),t,I)});function Kh(b){return b&&b.length?rs(b):[]}function Ny(b,I){return b&&b.length?rs(b,Oi(I,2)):[]}function Zf(b,I){return I=typeof I=="function"?I:t,b&&b.length?rs(b,t,I):[]}function Op(b){if(!(b&&b.length))return[];var I=0;return b=Su(b,function($){if(Ea($))return I=As($.length,I),!0}),ef(I,function($){return ws(b,Xh($))})}function Ua(b,I){if(!(b&&b.length))return[];var $=Op(b);return I==null?$:ws($,function(ve){return qs(I,t,ve)})}var Wy=In(function(b,I){return Ea(b)?Aa(b,I):[]}),Zg=In(function(b){return $l(Su(b,Ea))}),Gy=In(function(b){var I=IA(b);return Ea(I)&&(I=t),$l(Su(b,Ea),Oi(I,2))}),Qy=In(function(b){var I=IA(b);return I=typeof I=="function"?I:t,$l(Su(b,Ea),t,I)}),Q0=In(Op);function TA(b,I){return oA(b||[],I||[],qA)}function Y0(b,I){return oA(b||[],I||[],kr)}var Lc=In(function(b){var I=b.length,$=I>1?b[I-1]:t;return $=typeof $=="function"?(b.pop(),$):t,Ua(b,$)});function Rd(b){var I=ot(b);return I.__chain__=!0,I}function $m(b,I){return I(b),b}function ec(b,I){return I(b)}var Rh=XA(function(b){var I=b.length,$=I?b[0]:0,ve=this.__wrapped__,Ve=function(ht){return VA(ht,b)};return I>1||this.__actions__.length||!(ve instanceof ri)||!E($)?this.thru(Ve):(ve=ve.slice($,+$+(I?1:0)),ve.__actions__.push({func:ec,args:[Ve],thisArg:t}),new Ti(ve,this.__chain__).thru(function(ht){return I&&!ht.length&&ht.push(t),ht}))});function sh(){return Rd(this)}function Xf(){return new Ti(this.value(),this.__chain__)}function q0(){this.__values__===t&&(this.__values__=nv(this.value()));var b=this.__index__>=this.__values__.length,I=b?t:this.__values__[this.__index__++];return{done:b,value:I}}function V0(){return this}function Xg(b){for(var I,$=this;$ instanceof Ss;){var ve=Ru($);ve.__index__=0,ve.__values__=t,I?Ve.__wrapped__=ve:I=ve;var Ve=ve;$=$.__wrapped__}return Ve.__wrapped__=b,I}function Hm(){var b=this.__wrapped__;if(b instanceof ri){var I=b;return this.__actions__.length&&(I=new ri(this)),I=I.reverse(),I.__actions__.push({func:ec,args:[pm],thisArg:t}),new Ti(I,this.__chain__)}return this.thru(pm)}function Yy(){return Vl(this.__wrapped__,this.__actions__)}var $0=nd(function(b,I,$){Po.call(b,$)?++b[$]:Al(b,$,1)});function H0(b,I,$){var ve=vo(b)?vh:Bh;return $&&S(b,I,$)&&(I=t),ve(b,Oi(I,3))}function Ip(b,I){var $=vo(b)?Su:vs;return $(b,Oi(I,3))}var kp=Id(yu),Jg=Id(lA);function Zm(b,I){return $s(Uc(b,I),1)}function e1(b,I){return $s(Uc(b,I),Ze)}function Z0(b,I,$){return $=$===t?1:Co($),$s(Uc(b,I),$)}function mm(b,I){var $=vo(b)?al:ku;return $(b,Oi(I,3))}function Xm(b,I){var $=vo(b)?su:Pl;return $(b,Oi(I,3))}var Jm=nd(function(b,I,$){Po.call(b,$)?b[$].push(I):Al(b,$,[I])});function X0(b,I,$,ve){b=zc(b)?b:El(b),$=$&&!ve?Co($):0;var Ve=b.length;return $<0&&($=As(Ve+$,0)),tg(b)?$<=Ve&&b.indexOf(I,$)>-1:!!Ve&&ms(b,I,$)>-1}var t1=In(function(b,I,$){var ve=-1,Ve=typeof I=="function",ht=zc(b)?un(b.length):[];return ku(b,function(Pt){ht[++ve]=Ve?qs(I,Pt,$):Kl(Pt,I,$)}),ht}),yf=nd(function(b,I,$){Al(b,$,I)});function Uc(b,I){var $=vo(b)?ws:et;return $(b,Oi(I,3))}function ld(b,I,$,ve){return b==null?[]:(vo(I)||(I=I==null?[]:[I]),$=ve?t:$,vo($)||($=$==null?[]:[$]),kt(b,I,$))}var n1=nd(function(b,I,$){b[$?0:1].push(I)},function(){return[[],[]]});function Tp(b,I,$){var ve=vo(b)?mA:Jh,Ve=arguments.length<3;return ve(b,Oi(I,4),$,Ve,ku)}function m(b,I,$){var ve=vo(b)?xp:Jh,Ve=arguments.length<3;return ve(b,Oi(I,4),$,Ve,Pl)}function _(b,I){var $=vo(b)?Su:vs;return $(b,li(Oi(I,3)))}function D(b){var I=vo(b)?YA:Nn;return I(b)}function Q(b,I,$){($?S(b,I,$):I===t)?I=1:I=Co(I);var ve=vo(b)?cu:Rn;return ve(b,I)}function ue(b){var I=vo(b)?gs:_i;return I(b)}function ge(b){if(b==null)return 0;if(zc(b))return tg(b)?xd(b):b.length;var I=wl(b);return I==Lt||I==kn?b.size:Te(b).length}function nt(b,I,$){var ve=vo(b)?UA:Qo;return $&&S(b,I,$)&&(I=t),ve(b,Oi(I,3))}var Ot=In(function(b,I){if(b==null)return[];var $=I.length;return $>1&&S(b,I[0],I[1])?I=[]:$>2&&S(I[0],I[1],I[2])&&(I=[I[0]]),kt(b,$s(I,1),[])}),Nt=us||function(){return Br.Date.now()};function Mn(b,I){if(typeof I!="function")throw new lu(l);return b=Co(b),function(){if(--b<1)return I.apply(this,arguments)}}function ur(b,I,$){return I=$?t:I,I=b&&I==null?b.length:I,Zo(b,W,t,t,t,t,I)}function mr(b,I){var $;if(typeof I!="function")throw new lu(l);return b=Co(b),function(){return--b>0&&($=I.apply(this,arguments)),b<=1&&(I=t),$}}var ir=In(function(b,I,$){var ve=N;if($.length){var Ve=ll($,Pd(ir));ve|=V}return Zo(b,ve,I,$,Ve)}),Yr=In(function(b,I,$){var ve=N|q;if($.length){var Ve=ll($,Pd(Yr));ve|=V}return Zo(I,ve,b,$,Ve)});function ii(b,I,$){I=$?t:I;var ve=Zo(b,oe,t,t,t,t,t,I);return ve.placeholder=ii.placeholder,ve}function ai(b,I,$){I=$?t:I;var ve=Zo(b,te,t,t,t,t,t,I);return ve.placeholder=ai.placeholder,ve}function fl(b,I,$){var ve,Ve,ht,Pt,Vt,ln,Xn=0,Jn=!1,fr=!1,Vr=!0;if(typeof b!="function")throw new lu(l);I=ud(I)||0,Ja($)&&(Jn=!!$.leading,fr="maxWait"in $,ht=fr?As(ud($.maxWait)||0,I):ht,Vr="trailing"in $?!!$.trailing:Vr);function Ei(cA){var tp=ve,xm=Ve;return ve=Ve=t,Xn=cA,Pt=b.apply(xm,tp),Pt}function Ji(cA){return Xn=cA,Vt=oi(bs,I),Jn?Ei(cA):Pt}function Xo(cA){var tp=cA-ln,xm=cA-Xn,r8=I-tp;return fr?Ya(r8,ht-xm):r8}function eo(cA){var tp=cA-ln,xm=cA-Xn;return ln===t||tp>=I||tp<0||fr&&xm>=ht}function bs(){var cA=Nt();if(eo(cA))return Ps(cA);Vt=oi(bs,Xo(cA))}function Ps(cA){return Vt=t,Vr&&ve?Ei(cA):(ve=Ve=t,Pt)}function jh(){Vt!==t&&Dc(Vt),Xn=0,ve=ln=Ve=Vt=t}function jd(){return Vt===t?Pt:Ps(Nt())}function Nh(){var cA=Nt(),tp=eo(cA);if(ve=arguments,Ve=this,ln=cA,tp){if(Vt===t)return Ji(ln);if(fr)return Dc(Vt),Vt=oi(bs,I),Ei(ln)}return Vt===t&&(Vt=oi(bs,I)),Pt}return Nh.cancel=jh,Nh.flush=jd,Nh}var cn=In(function(b,I){return Eh(b,1,I)}),Jt=In(function(b,I,$){return Eh(b,ud(I)||0,$)});function pn(b){return Zo(b,he)}function vr(b,I){if(typeof b!="function"||I!=null&&typeof I!="function")throw new lu(l);var $=function(){var ve=arguments,Ve=I?I.apply(this,ve):ve[0],ht=$.cache;if(ht.has(Ve))return ht.get(Ve);var Pt=b.apply(this,ve);return $.cache=ht.set(Ve,Pt)||ht,Pt};return $.cache=new(vr.Cache||Au),$}vr.Cache=Au;function li(b){if(typeof b!="function")throw new lu(l);return function(){var I=arguments;switch(I.length){case 0:return!b.call(this);case 1:return!b.call(this,I[0]);case 2:return!b.call(this,I[0],I[1]);case 3:return!b.call(this,I[0],I[1],I[2])}return!b.apply(this,I)}}function Ii(b){return mr(2,b)}var yi=Ku(function(b,I){I=I.length==1&&vo(I[0])?ws(I[0],au(Oi())):ws($s(I,1),au(Oi()));var $=I.length;return In(function(ve){for(var Ve=-1,ht=Ya(ve.length,$);++Ve<ht;)ve[Ve]=I[Ve].call(this,ve[Ve]);return qs(b,this,ve)})}),ji=In(function(b,I){var $=ll(I,Pd(ji));return Zo(b,V,t,I,$)}),tu=In(function(b,I){var $=ll(I,Pd(tu));return Zo(b,ne,t,I,$)}),_s=XA(function(b,I){return Zo(b,ie,t,t,t,I)});function Dh(b,I){if(typeof b!="function")throw new lu(l);return I=I===t?I:Co(I),In(b,I)}function r1(b,I){if(typeof b!="function")throw new lu(l);return I=I==null?0:As(Co(I),0),In(function($){var ve=$[I],Ve=Hl($,0,I);return ve&&LA(Ve,ve),qs(b,this,Ve)})}function qy(b,I,$){var ve=!0,Ve=!0;if(typeof b!="function")throw new lu(l);return Ja($)&&(ve="leading"in $?!!$.leading:ve,Ve="trailing"in $?!!$.trailing:Ve),fl(b,I,{leading:ve,maxWait:I,trailing:Ve})}function u_(b){return ur(b,1)}function J0(b,I){return ji(Pu(I),b)}function A_(){if(!arguments.length)return[];var b=arguments[0];return vo(b)?b:[b]}function Vy(b){return Lr(b,P)}function c_(b,I){return I=typeof I=="function"?I:t,Lr(b,P,I)}function Dd(b){return Lr(b,B|P)}function e0(b,I){return I=typeof I=="function"?I:t,Lr(b,B|P,I)}function d_(b,I){return I==null||td(b,I,Mt(I))}function ah(b,I){return b===I||b!==b&&I!==I}var h_=Gf(hu),f_=Gf(function(b,I){return b>=I}),Pp=Bd(function(){return arguments}())?Bd:function(b){return pl(b)&&Po.call(b,"callee")&&!Sc.call(b,"callee")},vo=un.isArray,r3=Ui?au(Ui):O;function zc(b){return b!=null&&ym(b.length)&&!lh(b)}function Ea(b){return pl(b)&&zc(b)}function p_(b){return b===!0||b===!1||pl(b)&&Hs(b)==Le}var Jf=Xd||m3,m_=Gi?au(Gi):a;function g_(b){return pl(b)&&b.nodeType===1&&!n0(b)}function i3(b){if(b==null)return!0;if(zc(b)&&(vo(b)||typeof b=="string"||typeof b.splice=="function"||Jf(b)||vm(b)||Pp(b)))return!b.length;var I=wl(b);if(I==Lt||I==kn)return!b.size;if(Ue(b))return!Te(b).length;for(var $ in b)if(Po.call(b,$))return!1;return!0}function o3(b,I){return c(b,I)}function y_(b,I,$){$=typeof $=="function"?$:t;var ve=$?$(b,I):t;return ve===t?c(b,I,t,$):!!ve}function gm(b){if(!pl(b))return!1;var I=Hs(b);return I==it||I==Be||typeof b.message=="string"&&typeof b.name=="string"&&!n0(b)}function v_(b){return typeof b=="number"&&Oc(b)}function lh(b){if(!Ja(b))return!1;var I=Hs(b);return I==Ct||I==ft||I==Tt||I==rn}function $y(b){return typeof b=="number"&&b==Co(b)}function ym(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=Xe}function Ja(b){var I=typeof b;return b!=null&&(I=="object"||I=="function")}function pl(b){return b!=null&&typeof b=="object"}var C_=$o?au($o):M;function s3(b,I){return b===I||k(b,I,Uo(I))}function a3(b,I,$){return $=typeof $=="function"?$:t,k(b,I,Uo(I),$)}function t0(b){return Zy(b)&&b!=+b}function PA(b){if(Ie(b))throw new ci(s);return z(b)}function Kp(b){return b===null}function Hy(b){return b==null}function Zy(b){return typeof b=="number"||pl(b)&&Hs(b)==Zt}function n0(b){if(!pl(b)||Hs(b)!=_n)return!1;var I=Qa(b);if(I===null)return!0;var $=Po.call(I,"constructor")&&I.constructor;return typeof $=="function"&&$ instanceof $&&vA.call($)==CA}var eg=ua?au(ua):Y;function l3(b){return $y(b)&&b>=-9007199254740991&&b<=Xe}var Xy=Ys?au(Ys):J;function tg(b){return typeof b=="string"||!vo(b)&&pl(b)&&Hs(b)==mn}function Fd(b){return typeof b=="symbol"||pl(b)&&Hs(b)==zn}var vm=wu?au(wu):se;function Jy(b){return b===t}function ev(b){return pl(b)&&wl(b)==gr}function __(b){return pl(b)&&Hs(b)==tr}var ng=Gf(Qe),tv=Gf(function(b,I){return b<=I});function nv(b){if(!b)return[];if(zc(b))return tg(b)?qu(b):Ma(b);if(bA&&b[bA])return cc(b[bA]());var I=wl(b),$=I==Lt?_d:I==kn?Cl:El;return $(b)}function Fh(b){if(!b)return b===0?b:0;if(b=ud(b),b===Ze||b===-1/0){var I=b<0?-1:1;return I*Ne}return b===b?b:0}function Co(b){var I=Fh(b),$=I%1;return I===I?$?I-$:I:0}function r0(b){return b?Dr(Co(b),0,Re):0}function ud(b){if(typeof b=="number")return b;if(Fd(b))return Se;if(Ja(b)){var I=typeof b.valueOf=="function"?b.valueOf():b;b=Ja(I)?I+"":I}if(typeof b!="string")return b===0?b:+b;b=$d(b);var $=Ts.test(b);return $||aa.test(b)?Vn(b.slice(2),$?2:8):Zi.test(b)?Se:+b}function i1(b){return cl(b,an(b))}function rv(b){return b?Dr(Co(b),-9007199254740991,Xe):b===0?b:0}function ia(b){return b==null?"":Ho(b)}var d=aA(function(b,I){if(Ue(I)||zc(I)){cl(I,Mt(I),b);return}for(var $ in I)Po.call(I,$)&&qA(b,$,I[$])}),u=aA(function(b,I){cl(I,an(I),b)}),h=aA(function(b,I,$,ve){cl(I,an(I),b,ve)}),y=aA(function(b,I,$,ve){cl(I,Mt(I),b,ve)}),w=XA(VA);function R(b,I){var $=QA(b);return I==null?$:ys($,I)}var F=In(function(b,I){b=ts(b);var $=-1,ve=I.length,Ve=ve>2?I[2]:t;for(Ve&&S(I[0],I[1],Ve)&&(ve=1);++$<ve;)for(var ht=I[$],Pt=an(ht),Vt=-1,ln=Pt.length;++Vt<ln;){var Xn=Pt[Vt],Jn=b[Xn];(Jn===t||ah(Jn,Nl[Xn])&&!Po.call(b,Xn))&&(b[Xn]=ht[Xn])}return b}),G=In(function(b){return b.push(t,cf),qs(or,t,b)});function X(b,I){return Ch(b,Oi(I,3),bl)}function re(b,I){return Ch(b,Oi(I,3),iA)}function de(b,I){return b==null?b:HA(b,Oi(I,3),an)}function be(b,I){return b==null?b:du(b,Oi(I,3),an)}function Ke(b,I){return b&&bl(b,Oi(I,3))}function ze(b,I){return b&&iA(b,Oi(I,3))}function We(b){return b==null?[]:Kc(b,Mt(b))}function tt(b){return b==null?[]:Kc(b,an(b))}function ct(b,I,$){var ve=b==null?t:ql(b,I);return ve===t?$:ve}function vt(b,I){return b!=null&&cm(b,I,fu)}function zt(b,I){return b!=null&&cm(b,I,ZA)}var Et=lm(function(b,I,$){I!=null&&typeof I.toString!="function"&&(I=Bu.call(I)),b[I]=$},av(cd)),Fe=lm(function(b,I,$){I!=null&&typeof I.toString!="function"&&(I=Bu.call(I)),Po.call(b,I)?b[I].push($):b[I]=[$]},Oi),at=In(Kl);function Mt(b){return zc(b)?wA(b):Te(b)}function an(b){return zc(b)?wA(b,!0):ke(b)}function jn(b,I){var $={};return I=Oi(I,3),bl(b,function(ve,Ve,ht){Al($,I(ve,Ve,ht),ve)}),$}function gn(b,I){var $={};return I=Oi(I,3),bl(b,function(ve,Ve,ht){Al($,Ve,I(ve,Ve,ht))}),$}var En=aA(function(b,I,$){pt(b,I,$)}),or=aA(function(b,I,$,ve){pt(b,I,$,ve)}),Wn=XA(function(b,I){var $={};if(b==null)return $;var ve=!1;I=ws(I,function(ht){return ht=xa(ht,b),ve||(ve=ht.length>1),ht}),cl(b,Ih(b),$),ve&&($=Lr($,B|T|P,Td));for(var Ve=I.length;Ve--;)xl($,I[Ve]);return $});function dr(b,I){return Nr(b,li(Oi(I)))}var On=XA(function(b,I){return b==null?{}:Kt(b,I)});function Nr(b,I){if(b==null)return{};var $=ws(Ih(b),function(ve){return[ve]});return I=Oi(I),Ut(b,$,function(ve,Ve){return I(ve,Ve[0])})}function vi(b,I,$){I=xa(I,b);var ve=-1,Ve=I.length;for(Ve||(Ve=1,b=t);++ve<Ve;){var ht=b==null?t:b[wa(I[ve])];ht===t&&(ve=Ve,ht=$),b=lh(ht)?ht.call(b):ht}return b}function hi(b,I,$){return b==null?b:kr(b,I,$)}function Xr(b,I,$,ve){return ve=typeof ve=="function"?ve:t,b==null?b:kr(b,I,$,ve)}var Oo=Bp(Mt),el=Bp(an);function vu(b,I,$){var ve=vo(b),Ve=ve||Jf(b)||vm(b);if(I=Oi(I,4),$==null){var ht=b&&b.constructor;Ve?$=ve?new ht:[]:Ja(b)?$=lh(ht)?QA(Qa(b)):{}:$={}}return(Ve?al:bl)(b,function(Pt,Vt,ln){return I($,Pt,Vt,ln)}),$}function KA(b,I){return b==null?!0:xl(b,I)}function Ld(b,I,$){return b==null?b:BA(b,I,Pu($))}function jc(b,I,$,ve){return ve=typeof ve=="function"?ve:t,b==null?b:BA(b,I,Pu($),ve)}function El(b){return b==null?[]:xc(b,Mt(b))}function tl(b){return b==null?[]:xc(b,an(b))}function Du(b,I,$){return $===t&&($=I,I=t),$!==t&&($=ud($),$=$===$?$:0),I!==t&&(I=ud(I),I=I===I?I:0),Dr(ud(b),I,$)}function uA(b,I,$){return I=Fh(I),$===t?($=I,I=0):$=Fh($),b=ud(b),Tu(b,I,$)}function AA(b,I,$){if($&&typeof $!="boolean"&&S(b,I,$)&&(I=$=t),$===t&&(typeof I=="boolean"?($=I,I=t):typeof b=="boolean"&&($=b,b=t)),b===t&&I===t?(b=0,I=1):(b=Fh(b),I===t?(I=b,b=0):I=Fh(I)),b>I){var ve=b;b=I,I=ve}if($||b%1||I%1){var Ve=xA();return Ya(b+Ve*(I-b+Ir("1e-"+((Ve+"").length-1))),I)}return xn(b,I)}var gc=Od(function(b,I,$){return I=I.toLowerCase(),b+($?Ad(I):I)});function Ad(b){return sv(ia(b).toLowerCase())}function Cu(b){return b=ia(b),b&&b.replace(bi,nf).replace(Ta,"")}function Nc(b,I,$){b=ia(b),I=Ho(I);var ve=b.length;$=$===t?ve:Dr(Co($),0,ve);var Ve=$;return $-=I.length,$>=0&&b.slice($,Ve)==I}function _u(b){return b=ia(b),b&&Qt.test(b)?b.replace(ut,Yu):b}function Fu(b){return b=ia(b),b&&Hn.test(b)?b.replace(Sr,"\\$&"):b}var Lu=Od(function(b,I,$){return b+($?"-":"")+I.toLowerCase()}),nu=Od(function(b,I,$){return b+($?" ":"")+I.toLowerCase()}),Ba=am("toLowerCase");function Lh(b,I,$){b=ia(b),I=Co(I);var ve=I?xd(b):0;if(!I||ve>=I)return b;var Ve=(I-ve)/2;return rh(Xu(Ve),$)+b+rh(Bc(Ve),$)}function i0(b,I,$){b=ia(b),I=Co(I);var ve=I?xd(b):0;return I&&ve<I?b+rh(I-ve,$):b}function Uh(b,I,$){b=ia(b),I=Co(I);var ve=I?xd(b):0;return I&&ve<I?rh(I-ve,$)+b:b}function u3(b,I,$){return $||I==null?I=0:I&&(I=+I),js(ia(b).replace(xr,""),I||0)}function o0(b,I,$){return($?S(b,I,$):I===t)?I=1:I=Co(I),Cn(ia(b),I)}function Cm(){var b=arguments,I=ia(b[0]);return b.length<3?I:I.replace(b[1],b[2])}var s0=Od(function(b,I,$){return b+($?"_":"")+I.toLowerCase()});function a0(b,I,$){return $&&typeof $!="number"&&S(b,I,$)&&(I=$=t),$=$===t?Re:$>>>0,$?(b=ia(b),b&&(typeof I=="string"||I!=null&&!eg(I))&&(I=Ho(I),!I&&Cd(b))?Hl(qu(b),0,$):b.split(I,$)):[]}var l0=Od(function(b,I,$){return b+($?" ":"")+sv(I)});function b_(b,I,$){return b=ia(b),$=$==null?0:Dr(Co($),0,b.length),I=Ho(I),b.slice($,$+I.length)==I}function x_(b,I,$){var ve=ot.templateSettings;$&&S(b,I,$)&&(I=t),b=ia(b),I=h({},I,ve,Qf);var Ve=h({},I.imports,ve.imports,Qf),ht=Mt(Ve),Pt=xc(Ve,ht),Vt,ln,Xn=0,Jn=I.interpolate||Il,fr="__p += '",Vr=Vu((I.escape||Il).source+"|"+Jn.source+"|"+(Jn===tn?Mr:Il).source+"|"+(I.evaluate||Il).source+"|$","g"),Ei="//# sourceURL="+(Po.call(I,"sourceURL")?(I.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wi+"]")+`
`;b.replace(Vr,function(eo,bs,Ps,jh,jd,Nh){return Ps||(Ps=jh),fr+=b.slice(Xn,Nh).replace(kl,uc),bs&&(Vt=!0,fr+=`' +
__e(`+bs+`) +
'`),jd&&(ln=!0,fr+=`';
`+jd+`;
__p += '`),Ps&&(fr+=`' +
((__t = (`+Ps+`)) == null ? '' : __t) +
'`),Xn=Nh+eo.length,eo}),fr+=`';
`;var Ji=Po.call(I,"variable")&&I.variable;if(!Ji)fr=`with (obj) {
`+fr+`
}
`;else if(co.test(Ji))throw new ci(o);fr=(ln?fr.replace(f,""):fr).replace(je,"$1").replace(qe,"$1;"),fr="function("+(Ji||"obj")+`) {
`+(Ji?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Vt?", __e = _.escape":"")+(ln?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+fr+`return __p
}`;var Xo=O_(function(){return To(ht,Ei+"return "+fr).apply(t,Pt)});if(Xo.source=fr,gm(Xo))throw Xo;return Xo}function M_(b){return ia(b).toLowerCase()}function w_(b){return ia(b).toUpperCase()}function iv(b,I,$){if(b=ia(b),b&&($||I===t))return $d(b);if(!b||!(I=Ho(I)))return b;var ve=qu(b),Ve=qu(I),ht=Eu(ve,Ve),Pt=vd(ve,Ve)+1;return Hl(ve,ht,Pt).join("")}function ov(b,I,$){if(b=ia(b),b&&($||I===t))return b.slice(0,Mh(b)+1);if(!b||!(I=Ho(I)))return b;var ve=qu(b),Ve=vd(ve,qu(I))+1;return Hl(ve,0,Ve).join("")}function ep(b,I,$){if(b=ia(b),b&&($||I===t))return b.replace(xr,"");if(!b||!(I=Ho(I)))return b;var ve=qu(b),Ve=Eu(ve,qu(I));return Hl(ve,Ve).join("")}function S_(b,I){var $=fe,ve=Ee;if(Ja(I)){var Ve="separator"in I?I.separator:Ve;$="length"in I?Co(I.length):$,ve="omission"in I?Ho(I.omission):ve}b=ia(b);var ht=b.length;if(Cd(b)){var Pt=qu(b);ht=Pt.length}if($>=ht)return b;var Vt=$-xd(ve);if(Vt<1)return ve;var ln=Pt?Hl(Pt,0,Vt).join(""):b.slice(0,Vt);if(Ve===t)return ln+ve;if(Pt&&(Vt+=ln.length-Vt),eg(Ve)){if(b.slice(Vt).search(Ve)){var Xn,Jn=ln;for(Ve.global||(Ve=Vu(Ve.source,ia(wi.exec(Ve))+"g")),Ve.lastIndex=0;Xn=Ve.exec(Jn);)var fr=Xn.index;ln=ln.slice(0,fr===t?Vt:fr)}}else if(b.indexOf(Ho(Ve),Vt)!=Vt){var Vr=ln.lastIndexOf(Ve);Vr>-1&&(ln=ln.slice(0,Vr))}return ln+ve}function E_(b){return b=ia(b),b&&dt.test(b)?b.replace(Je,Lf):b}var A3=Od(function(b,I,$){return b+($?" ":"")+I.toUpperCase()}),sv=am("toUpperCase");function B_(b,I,$){return b=ia(b),I=$?t:I,I===t?xh(b)?zf(b):Mp(b):b.match(I)||[]}var O_=In(function(b,I){try{return qs(b,t,I)}catch($){return gm($)?$:new ci($)}}),c3=XA(function(b,I){return al(I,function($){$=wa($),Al(b,$,ir(b[$],b))}),b});function d3(b){var I=b==null?0:b.length,$=Oi();return b=I?ws(b,function(ve){if(typeof ve[1]!="function")throw new lu(l);return[$(ve[0]),ve[1]]}):[],In(function(ve){for(var Ve=-1;++Ve<I;){var ht=b[Ve];if(qs(ht[0],this,ve))return qs(ht[1],this,ve)}})}function h3(b){return Sh(Lr(b,B))}function av(b){return function(){return b}}function zh(b,I){return b==null||b!==b?I:b}var o1=Wf(),I_=Wf(!0);function cd(b){return b}function lv(b){return ye(typeof b=="function"?b:Lr(b,B))}function f3(b){return mt(Lr(b,B))}function tc(b,I){return lt(b,Lr(I,B))}var Ud=In(function(b,I){return function($){return Kl($,b,I)}}),_m=In(function(b,I){return function($){return Kl(b,$,I)}});function zd(b,I,$){var ve=Mt(I),Ve=Kc(I,ve);$==null&&!(Ja(I)&&(Ve.length||!ve.length))&&($=I,I=b,b=this,Ve=Kc(I,Mt(I)));var ht=!(Ja($)&&"chain"in $)||!!$.chain,Pt=lh(b);return al(Ve,function(Vt){var ln=I[Vt];b[Vt]=ln,Pt&&(b.prototype[Vt]=function(){var Xn=this.__chain__;if(ht||Xn){var Jn=b(this.__wrapped__),fr=Jn.__actions__=Ma(this.__actions__);return fr.push({func:ln,args:arguments,thisArg:b}),Jn.__chain__=Xn,Jn}return ln.apply(b,LA([this.value()],arguments))})}),b}function bm(){return Br._===this&&(Br._=Tl),this}function uh(){}function aN(b){return b=Co(b),In(function(I){return Bt(I,b)})}var lN=nh(ws),uN=nh(vh),AN=nh(UA);function n8(b){return K(b)?Xh(wa(b)):It(b)}function cN(b){return function(I){return b==null?t:ql(b,I)}}var dN=kd(),hN=kd(!0);function p3(){return[]}function m3(){return!1}function fN(){return{}}function pN(){return""}function mN(){return!0}function gN(b,I){if(b=Co(b),b<1||b>Xe)return[];var $=Re,ve=Ya(b,Re);I=Oi(I),b-=Re;for(var Ve=ef(ve,I);++$<b;)I($);return Ve}function yN(b){return vo(b)?ws(b,wa):Fd(b)?[b]:Ma(Zs(ia(b)))}function vN(b){var I=++Mc;return ia(b)+I}var CN=Fc(function(b,I){return b+I},0),_N=Xl("ceil"),bN=Fc(function(b,I){return b/I},1),xN=Xl("floor");function MN(b){return b&&b.length?$A(b,cd,hu):t}function wN(b,I){return b&&b.length?$A(b,Oi(I,2),hu):t}function SN(b){return Vd(b,cd)}function EN(b,I){return Vd(b,Oi(I,2))}function BN(b){return b&&b.length?$A(b,cd,Qe):t}function ON(b,I){return b&&b.length?$A(b,Oi(I,2),Qe):t}var IN=Fc(function(b,I){return b*I},1),kN=Xl("round"),TN=Fc(function(b,I){return b-I},0);function PN(b){return b&&b.length?bh(b,cd):0}function KN(b,I){return b&&b.length?bh(b,Oi(I,2)):0}return ot.after=Mn,ot.ary=ur,ot.assign=d,ot.assignIn=u,ot.assignInWith=h,ot.assignWith=y,ot.at=w,ot.before=mr,ot.bind=ir,ot.bindAll=c3,ot.bindKey=Yr,ot.castArray=A_,ot.chain=Rd,ot.chunk=hl,ot.compact=Sa,ot.concat=is,ot.cond=d3,ot.conforms=h3,ot.constant=av,ot.countBy=$0,ot.create=R,ot.curry=ii,ot.curryRight=ai,ot.debounce=fl,ot.defaults=F,ot.defaultsDeep=G,ot.defer=cn,ot.delay=Jt,ot.difference=gi,ot.differenceBy=os,ot.differenceWith=Xs,ot.drop=da,ot.dropRight=Is,ot.dropRightWhile=eu,ot.dropWhile=Bo,ot.fill=oh,ot.filter=Ip,ot.flatMap=Zm,ot.flatMapDeep=e1,ot.flatMapDepth=Z0,ot.flatten=od,ot.flattenDeep=Xa,ot.flattenDepth=La,ot.flip=pn,ot.flow=o1,ot.flowRight=I_,ot.fromPairs=Th,ot.functions=We,ot.functionsIn=tt,ot.groupBy=Jm,ot.initial=dm,ot.intersection=Wm,ot.intersectionBy=pf,ot.intersectionWith=Gm,ot.invert=Et,ot.invertBy=Fe,ot.invokeMap=t1,ot.iteratee=lv,ot.keyBy=yf,ot.keys=Mt,ot.keysIn=an,ot.map=Uc,ot.mapKeys=jn,ot.mapValues=gn,ot.matches=f3,ot.matchesProperty=tc,ot.memoize=vr,ot.merge=En,ot.mergeWith=or,ot.method=Ud,ot.methodOf=_m,ot.mixin=zd,ot.negate=li,ot.nthArg=aN,ot.omit=Wn,ot.omitBy=dr,ot.once=Ii,ot.orderBy=ld,ot.over=lN,ot.overArgs=yi,ot.overEvery=uN,ot.overSome=AN,ot.partial=ji,ot.partialRight=tu,ot.partition=n1,ot.pick=On,ot.pickBy=Nr,ot.property=n8,ot.propertyOf=cN,ot.pull=Qm,ot.pullAll=fm,ot.pullAllBy=JA,ot.pullAllWith=mf,ot.pullAt=ad,ot.range=dN,ot.rangeRight=hN,ot.rearg=_s,ot.reject=_,ot.remove=kA,ot.rest=Dh,ot.reverse=pm,ot.sampleSize=Q,ot.set=hi,ot.setWith=Xr,ot.shuffle=ue,ot.slice=Ym,ot.sortBy=Ot,ot.sortedUniq=z0,ot.sortedUniqBy=Hf,ot.split=a0,ot.spread=r1,ot.tail=j0,ot.take=$g,ot.takeRight=N0,ot.takeRightWhile=gf,ot.takeWhile=Hg,ot.tap=$m,ot.throttle=qy,ot.thru=ec,ot.toArray=nv,ot.toPairs=Oo,ot.toPairsIn=el,ot.toPath=yN,ot.toPlainObject=i1,ot.transform=vu,ot.unary=u_,ot.union=W0,ot.unionBy=G0,ot.unionWith=Sl,ot.uniq=Kh,ot.uniqBy=Ny,ot.uniqWith=Zf,ot.unset=KA,ot.unzip=Op,ot.unzipWith=Ua,ot.update=Ld,ot.updateWith=jc,ot.values=El,ot.valuesIn=tl,ot.without=Wy,ot.words=B_,ot.wrap=J0,ot.xor=Zg,ot.xorBy=Gy,ot.xorWith=Qy,ot.zip=Q0,ot.zipObject=TA,ot.zipObjectDeep=Y0,ot.zipWith=Lc,ot.entries=Oo,ot.entriesIn=el,ot.extend=u,ot.extendWith=h,zd(ot,ot),ot.add=CN,ot.attempt=O_,ot.camelCase=gc,ot.capitalize=Ad,ot.ceil=_N,ot.clamp=Du,ot.clone=Vy,ot.cloneDeep=Dd,ot.cloneDeepWith=e0,ot.cloneWith=c_,ot.conformsTo=d_,ot.deburr=Cu,ot.defaultTo=zh,ot.divide=bN,ot.endsWith=Nc,ot.eq=ah,ot.escape=_u,ot.escapeRegExp=Fu,ot.every=H0,ot.find=kp,ot.findIndex=yu,ot.findKey=X,ot.findLast=Jg,ot.findLastIndex=lA,ot.findLastKey=re,ot.floor=xN,ot.forEach=mm,ot.forEachRight=Xm,ot.forIn=de,ot.forInRight=be,ot.forOwn=Ke,ot.forOwnRight=ze,ot.get=ct,ot.gt=h_,ot.gte=f_,ot.has=vt,ot.hasIn=zt,ot.head=Vf,ot.identity=cd,ot.includes=X0,ot.indexOf=Ph,ot.inRange=uA,ot.invoke=at,ot.isArguments=Pp,ot.isArray=vo,ot.isArrayBuffer=r3,ot.isArrayLike=zc,ot.isArrayLikeObject=Ea,ot.isBoolean=p_,ot.isBuffer=Jf,ot.isDate=m_,ot.isElement=g_,ot.isEmpty=i3,ot.isEqual=o3,ot.isEqualWith=y_,ot.isError=gm,ot.isFinite=v_,ot.isFunction=lh,ot.isInteger=$y,ot.isLength=ym,ot.isMap=C_,ot.isMatch=s3,ot.isMatchWith=a3,ot.isNaN=t0,ot.isNative=PA,ot.isNil=Hy,ot.isNull=Kp,ot.isNumber=Zy,ot.isObject=Ja,ot.isObjectLike=pl,ot.isPlainObject=n0,ot.isRegExp=eg,ot.isSafeInteger=l3,ot.isSet=Xy,ot.isString=tg,ot.isSymbol=Fd,ot.isTypedArray=vm,ot.isUndefined=Jy,ot.isWeakMap=ev,ot.isWeakSet=__,ot.join=sd,ot.kebabCase=Lu,ot.last=IA,ot.lastIndexOf=hm,ot.lowerCase=nu,ot.lowerFirst=Ba,ot.lt=ng,ot.lte=tv,ot.max=MN,ot.maxBy=wN,ot.mean=SN,ot.meanBy=EN,ot.min=BN,ot.minBy=ON,ot.stubArray=p3,ot.stubFalse=m3,ot.stubObject=fN,ot.stubString=pN,ot.stubTrue=mN,ot.multiply=IN,ot.nth=U0,ot.noConflict=bm,ot.noop=uh,ot.now=Nt,ot.pad=Lh,ot.padEnd=i0,ot.padStart=Uh,ot.parseInt=u3,ot.random=AA,ot.reduce=Tp,ot.reduceRight=m,ot.repeat=o0,ot.replace=Cm,ot.result=vi,ot.round=kN,ot.runInContext=en,ot.sample=D,ot.size=ge,ot.snakeCase=s0,ot.some=nt,ot.sortedIndex=qm,ot.sortedIndexBy=jy,ot.sortedIndexOf=Kd,ot.sortedLastIndex=Vg,ot.sortedLastIndexBy=Vm,ot.sortedLastIndexOf=$f,ot.startCase=l0,ot.startsWith=b_,ot.subtract=TN,ot.sum=PN,ot.sumBy=KN,ot.template=x_,ot.times=gN,ot.toFinite=Fh,ot.toInteger=Co,ot.toLength=r0,ot.toLower=M_,ot.toNumber=ud,ot.toSafeInteger=rv,ot.toString=ia,ot.toUpper=w_,ot.trim=iv,ot.trimEnd=ov,ot.trimStart=ep,ot.truncate=S_,ot.unescape=E_,ot.uniqueId=vN,ot.upperCase=A3,ot.upperFirst=sv,ot.each=mm,ot.eachRight=Xm,ot.first=Vf,zd(ot,function(){var b={};return bl(ot,function(I,$){Po.call(ot.prototype,$)||(b[$]=I)}),b}(),{chain:!1}),ot.VERSION=r,al(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){ot[b].placeholder=ot}),al(["drop","take"],function(b,I){ri.prototype[b]=function($){$=$===t?1:As(Co($),0);var ve=this.__filtered__&&!I?new ri(this):this.clone();return ve.__filtered__?ve.__takeCount__=Ya($,ve.__takeCount__):ve.__views__.push({size:Ya($,Re),type:b+(ve.__dir__<0?"Right":"")}),ve},ri.prototype[b+"Right"]=function($){return this.reverse()[b]($).reverse()}}),al(["filter","map","takeWhile"],function(b,I){var $=I+1,ve=$==De||$==At;ri.prototype[b]=function(Ve){var ht=this.clone();return ht.__iteratees__.push({iteratee:Oi(Ve,3),type:$}),ht.__filtered__=ht.__filtered__||ve,ht}}),al(["head","last"],function(b,I){var $="take"+(I?"Right":"");ri.prototype[b]=function(){return this[$](1).value()[0]}}),al(["initial","tail"],function(b,I){var $="drop"+(I?"":"Right");ri.prototype[b]=function(){return this.__filtered__?new ri(this):this[$](1)}}),ri.prototype.compact=function(){return this.filter(cd)},ri.prototype.find=function(b){return this.filter(b).head()},ri.prototype.findLast=function(b){return this.reverse().find(b)},ri.prototype.invokeMap=In(function(b,I){return typeof b=="function"?new ri(this):this.map(function($){return Kl($,b,I)})}),ri.prototype.reject=function(b){return this.filter(li(Oi(b)))},ri.prototype.slice=function(b,I){b=Co(b);var $=this;return $.__filtered__&&(b>0||I<0)?new ri($):(b<0?$=$.takeRight(-b):b&&($=$.drop(b)),I!==t&&(I=Co(I),$=I<0?$.dropRight(-I):$.take(I-b)),$)},ri.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},ri.prototype.toArray=function(){return this.take(Re)},bl(ri.prototype,function(b,I){var $=/^(?:filter|find|map|reject)|While$/.test(I),ve=/^(?:head|last)$/.test(I),Ve=ot[ve?"take"+(I=="last"?"Right":""):I],ht=ve||/^find/.test(I);Ve&&(ot.prototype[I]=function(){var Pt=this.__wrapped__,Vt=ve?[1]:arguments,ln=Pt instanceof ri,Xn=Vt[0],Jn=ln||vo(Pt),fr=function(bs){var Ps=Ve.apply(ot,LA([bs],Vt));return ve&&Vr?Ps[0]:Ps};Jn&&$&&typeof Xn=="function"&&Xn.length!=1&&(ln=Jn=!1);var Vr=this.__chain__,Ei=!!this.__actions__.length,Ji=ht&&!Vr,Xo=ln&&!Ei;if(!ht&&Jn){Pt=Xo?Pt:new ri(this);var eo=b.apply(Pt,Vt);return eo.__actions__.push({func:ec,args:[fr],thisArg:t}),new Ti(eo,Vr)}return Ji&&Xo?b.apply(this,Vt):(eo=this.thru(fr),Ji?ve?eo.value()[0]:eo.value():eo)})}),al(["pop","push","shift","sort","splice","unshift"],function(b){var I=$u[b],$=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",ve=/^(?:pop|shift)$/.test(b);ot.prototype[b]=function(){var Ve=arguments;if(ve&&!this.__chain__){var ht=this.value();return I.apply(vo(ht)?ht:[],Ve)}return this[$](function(Pt){return I.apply(vo(Pt)?Pt:[],Ve)})}}),bl(ri.prototype,function(b,I){var $=ot[I];if($){var ve=$.name+"";Po.call(Zc,ve)||(Zc[ve]=[]),Zc[ve].push({name:I,func:$})}}),Zc[mc(t,q).name]=[{name:"wrapper",func:t}],ri.prototype.clone=Go,ri.prototype.reverse=Ql,ri.prototype.value=Ed,ot.prototype.at=Rh,ot.prototype.chain=sh,ot.prototype.commit=Xf,ot.prototype.next=q0,ot.prototype.plant=Xg,ot.prototype.reverse=Hm,ot.prototype.toJSON=ot.prototype.valueOf=ot.prototype.value=Yy,ot.prototype.first=ot.prototype.head,bA&&(ot.prototype[bA]=V0),ot},gA=Hd();Vi?((Vi.exports=gA)._=gA,Rr._=gA):Br._=gA}).call(xG)}(wv,wv.exports)),wv.exports}var j2=MG();const kE=yl(j2);function wG(n,e,t){const r=e<0?n.length+e:e;if(r>=0&&r<n.length){const i=t<0?n.length+t:t,[s]=n.splice(e,1);n.splice(i,0,s)}}var I3,q8;function SG(){if(q8)return I3;q8=1;function n(e){for(var t=5381,r=e.length;r;)t=t*33^e.charCodeAt(--r);return t>>>0}return I3=n,I3}var EG=SG();const V8=yl(EG);var Yh=Uint8Array,$1=Uint16Array,BG=Int32Array,DD=new Yh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),FD=new Yh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),OG=new Yh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),LD=function(n,e){for(var t=new $1(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new BG(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},UD=LD(DD,2),zD=UD.b,IG=UD.r;zD[28]=258,IG[258]=28;var kG=LD(FD,0),TG=kG.b,TE=new $1(32768);for(var Ul=0;Ul<32768;++Ul){var u0=(Ul&43690)>>1|(Ul&21845)<<1;u0=(u0&52428)>>2|(u0&13107)<<2,u0=(u0&61680)>>4|(u0&3855)<<4,TE[Ul]=((u0&65280)>>8|(u0&255)<<8)>>1}var Gv=function(n,e,t){for(var r=n.length,i=0,s=new $1(e);i<r;++i)n[i]&&++s[n[i]-1];var l=new $1(e);for(i=1;i<e;++i)l[i]=l[i-1]+s[i-1]<<1;var o;if(t){o=new $1(1<<e);var p=15-e;for(i=0;i<r;++i)if(n[i])for(var v=i<<4|n[i],x=e-n[i],B=l[n[i]-1]++<<x,T=B|(1<<x)-1;B<=T;++B)o[TE[B]>>p]=v}else for(o=new $1(r),i=0;i<r;++i)n[i]&&(o[i]=TE[l[n[i]-1]++]>>15-n[i]);return o},DC=new Yh(288);for(var Ul=0;Ul<144;++Ul)DC[Ul]=8;for(var Ul=144;Ul<256;++Ul)DC[Ul]=9;for(var Ul=256;Ul<280;++Ul)DC[Ul]=7;for(var Ul=280;Ul<288;++Ul)DC[Ul]=8;var jD=new Yh(32);for(var Ul=0;Ul<32;++Ul)jD[Ul]=5;var PG=Gv(DC,9,1),KG=Gv(jD,5,1),k3=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},np=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},T3=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},RG=function(n){return(n+7)/8|0},DG=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Yh(n.subarray(e,t))},FG=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Wh=function(n,e,t){var r=new Error(e||FG[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Wh),!t)throw r;return r},W6=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Yh(0);var l=!t,o=l||e.i!=2,p=e.i;l&&(t=new Yh(i*3));var v=function(it){var Ct=t.length;if(it>Ct){var ft=new Yh(Math.max(Ct*2,it));ft.set(t),t=ft}},x=e.f||0,B=e.p||0,T=e.b||0,P=e.l,U=e.d,j=e.m,N=e.n,q=i*8;do{if(!P){x=np(n,B,1);var H=np(n,B+1,3);if(B+=3,H)if(H==1)P=PG,U=KG,j=9,N=5;else if(H==2){var ne=np(n,B,31)+257,W=np(n,B+10,15)+4,ie=ne+np(n,B+5,31)+1;B+=14;for(var he=new Yh(ie),fe=new Yh(19),Ee=0;Ee<W;++Ee)fe[OG[Ee]]=np(n,B+Ee*3,7);B+=W*3;for(var me=k3(fe),Me=(1<<me)-1,De=Gv(fe,me,1),Ee=0;Ee<ie;){var xe=De[np(n,B,Me)];B+=xe&15;var oe=xe>>4;if(oe<16)he[Ee++]=oe;else{var At=0,Ze=0;for(oe==16?(Ze=3+np(n,B,3),B+=2,At=he[Ee-1]):oe==17?(Ze=3+np(n,B,7),B+=3):oe==18&&(Ze=11+np(n,B,127),B+=7);Ze--;)he[Ee++]=At}}var Xe=he.subarray(0,ne),Ne=he.subarray(ne);j=k3(Xe),N=k3(Ne),P=Gv(Xe,j,1),U=Gv(Ne,N,1)}else Wh(1);else{var oe=RG(B)+4,te=n[oe-4]|n[oe-3]<<8,V=oe+te;if(V>i){p&&Wh(0);break}o&&v(T+te),t.set(n.subarray(oe,V),T),e.b=T+=te,e.p=B=V*8,e.f=x;continue}if(B>q){p&&Wh(0);break}}o&&v(T+131072);for(var Se=(1<<j)-1,Re=(1<<N)-1,He=B;;He=B){var At=P[T3(n,B)&Se],_t=At>>4;if(B+=At&15,B>q){p&&Wh(0);break}if(At||Wh(2),_t<256)t[T++]=_t;else if(_t==256){He=B,P=null;break}else{var Gt=_t-254;if(_t>264){var Ee=_t-257,yt=DD[Ee];Gt=np(n,B,(1<<yt)-1)+zD[Ee],B+=yt}var Ft=U[T3(n,B)&Re],Tt=Ft>>4;Ft||Wh(3),B+=Ft&15;var Ne=TG[Tt];if(Tt>3){var yt=FD[Tt];Ne+=T3(n,B)&(1<<yt)-1,B+=yt}if(B>q){p&&Wh(0);break}o&&v(T+131072);var Le=T+Gt;if(T<Ne){var Pe=s-Ne,Be=Math.min(Ne,Le);for(Pe+T<0&&Wh(3);T<Be;++T)t[T]=r[Pe+T]}for(;T<Le;++T)t[T]=t[T-Ne]}}e.l=P,e.p=He,e.b=T,e.f=x,P&&(x=1,e.m=j,e.d=U,e.n=N)}while(!x);return T!=t.length&&l?DG(t,0,T):t.subarray(0,T)},LG=new Yh(0),UG=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&Wh(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},zG=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},jG=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Wh(6,"invalid zlib data"),(n[1]>>5&1)==1&&Wh(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function NG(n,e){return W6(n,{i:2},e,e)}function WG(n,e){var t=UG(n);return t+8>n.length&&Wh(6,"invalid gzip data"),W6(n.subarray(t,-8),{i:2},new Yh(zG(n)),e)}function GG(n,e){return W6(n.subarray(jG(n),-4),{i:2},e,e)}function QG(n,e){return n[0]==31&&n[1]==139&&n[2]==8?WG(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?NG(n,e):GG(n,e)}var YG=typeof TextDecoder<"u"&&new TextDecoder,qG=0;try{YG.decode(LG,{stream:!0}),qG=1}catch{}var VG=Object.defineProperty,Qv=Math.pow,rl=(n,e)=>VG(n,"name",{value:e,configurable:!0}),vc=(n,e,t)=>new Promise((r,i)=>{var s=p=>{try{o(t.next(p))}catch(v){i(v)}},l=p=>{try{o(t.throw(p))}catch(v){i(v)}},o=p=>p.done?r(p.value):Promise.resolve(p.value).then(s,l);o((t=t.apply(n,e)).next())});rl((n,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:rl((s,l)=>{let o=document.createElement("img"),p=new AbortController,v=p.signal;return o.cancel=()=>{p.abort()},t||(n.getHeader().then(x=>{x.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):x.tileType===2?r="image/png":x.tileType===3?r="image/jpeg":x.tileType===4?r="image/webp":x.tileType===5&&(r="image/avif")}),t=!0),n.getZxy(s.z,s.x,s.y,v).then(x=>{if(x){let B=new Blob([x.data],{type:r}),T=window.URL.createObjectURL(B);o.src=T,o.cancel=void 0,l(void 0,o)}}).catch(x=>{if(x.name!=="AbortError")throw x}),o},"createTile"),_removeTile:rl(function(s){let l=this._tiles[s];l&&(l.el.cancel&&l.el.cancel(),l.el.width=0,l.el.height=0,l.el.deleted=!0,L.DomUtil.remove(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},"_removeTile")});return new i(e)},"leafletRasterLayer");var $G=rl(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let r=new AbortController;return n(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:rl(()=>r.abort(),"cancel")}},"v3compat"),ND=class{constructor(e){this.tilev4=rl((t,r)=>vc(this,null,function*(){if(t.type==="json"){let P=t.url.substr(10),U=this.tiles.get(P);if(U||(U=new KE(P),this.tiles.set(P,U)),this.metadata)return{data:yield U.getTileJson(t.url)};let j=yield U.getHeader();return(j.minLon>=j.maxLon||j.minLat>=j.maxLat)&&console.error(`Bounds of PMTiles archive ${j.minLon},${j.minLat},${j.maxLon},${j.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:j.minZoom,maxzoom:j.maxZoom,bounds:[j.minLon,j.minLat,j.maxLon,j.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=t.url.match(i);if(!s)throw new Error("Invalid PMTiles protocol URL");let l=s[1],o=this.tiles.get(l);o||(o=new KE(l),this.tiles.set(l,o));let p=s[2],v=s[3],x=s[4],B=yield o.getHeader(),T=yield o==null?void 0:o.getZxy(+p,+v,+x,r.signal);if(T)return{data:new Uint8Array(T.data),cacheControl:T.cacheControl,expires:T.expires};if(B.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=$G(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};rl(ND,"Protocol");var HG=ND;function WD(n,e){return(e>>>0)*4294967296+(n>>>0)}rl(WD,"toNum");function GD(n,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return WD(n,i);throw new Error("Expected varint not more than 10 bytes")}rl(GD,"readVarintRemainder");function U1(n){let e=n.buf,t=e[n.pos++],r=t&127;return t<128||(t=e[n.pos++],r|=(t&127)<<7,t<128)||(t=e[n.pos++],r|=(t&127)<<14,t<128)||(t=e[n.pos++],r|=(t&127)<<21,t<128)?r:(t=e[n.pos],r|=(t&15)<<28,GD(r,n))}rl(U1,"readVarint");function G6(n,e,t,r){if(r===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}rl(G6,"rotate");function QD(n,e){let t=Qv(2,n),r=e,i=e,s=e,l=[0,0],o=1;for(;o<t;)r=1&s/2,i=1&(s^r),G6(o,l,r,i),l[0]+=o*r,l[1]+=o*i,s=s/4,o*=2;return[n,l[0],l[1]]}rl(QD,"idOnLevel");var ZG=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function YD(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>Qv(2,n)-1||t>Qv(2,n)-1)throw new Error("tile x/y outside zoom level bounds");let r=ZG[n],i=Qv(2,n),s=0,l=0,o=0,p=[e,t],v=i/2;for(;v>0;)s=(p[0]&v)>0?1:0,l=(p[1]&v)>0?1:0,o+=v*v*(3*s^l),G6(v,p,s,l),v=v/2;return r+o}rl(YD,"zxyToTileId");function XG(n){let e=0;for(let t=0;t<27;t++){let r=(1<<t)*(1<<t);if(e+r>n)return QD(t,n-e);e+=r}throw new Error("Tile zoom level exceeds max safe number limit (26)")}rl(XG,"tileIdToZxy");var JG=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(JG||{});function N2(n,e){return vc(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return QG(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}rl(N2,"defaultDecompress");var eQ=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(eQ||{});function qD(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}rl(qD,"tileTypeExt");var tQ=127;function VD(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=r+t>>1,s=e-n[i].tileId;if(s>0)t=i+1;else if(s<0)r=i-1;else return n[i]}return r>=0&&(n[r].runLength===0||e-n[r].tileId<n[r].runLength)?n[r]:null}rl(VD,"findTile");var nQ=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return vc(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};rl(nQ,"FileSource");var $D=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");let i=r.indexOf("Windows")>-1,s=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,i&&s&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return vc(this,null,function*(){let s,l;r?l=r:(s=new AbortController,l=s.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${e}-${e+t-1}`);let p;this.mustReload?p="reload":this.chromeWindowsNoCache&&(p="no-store");let v=yield fetch(this.url,{signal:l,cache:p,headers:o});if(e===0&&v.status===416){let T=v.headers.get("Content-Range");if(!T||!T.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let P=+T.substr(8);v=yield fetch(this.url,{signal:l,cache:"reload",headers:{range:`bytes=0-${P-1}`}})}let x=v.headers.get("Etag");if(x!=null&&x.startsWith("W/")&&(x=null),v.status===416||i&&x&&x!==i)throw this.mustReload=!0,new PE(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(v.status>=300)throw new Error(`Bad response code: ${v.status}`);let B=v.headers.get("Content-Length");if(v.status===200&&(!B||+B>t))throw s&&s.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield v.arrayBuffer(),etag:x||void 0,cacheControl:v.headers.get("Cache-Control")||void 0,expires:v.headers.get("Expires")||void 0}})}};rl($D,"FetchSource");var rQ=$D;function Cf(n,e){let t=n.getUint32(e+4,!0),r=n.getUint32(e+0,!0);return t*Qv(2,32)+r}rl(Cf,"getUint64");function HD(n,e){let t=new DataView(n),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:Cf(t,8),rootDirectoryLength:Cf(t,16),jsonMetadataOffset:Cf(t,24),jsonMetadataLength:Cf(t,32),leafDirectoryOffset:Cf(t,40),leafDirectoryLength:Cf(t,48),tileDataOffset:Cf(t,56),tileDataLength:Cf(t,64),numAddressedTiles:Cf(t,72),numTileEntries:Cf(t,80),numTileContents:Cf(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}rl(HD,"bytesToHeader");function Q6(n){let e={buf:new Uint8Array(n),pos:0},t=U1(e),r=[],i=0;for(let s=0;s<t;s++){let l=U1(e);r.push({tileId:i+l,offset:0,length:0,runLength:1}),i+=l}for(let s=0;s<t;s++)r[s].runLength=U1(e);for(let s=0;s<t;s++)r[s].length=U1(e);for(let s=0;s<t;s++){let l=U1(e);l===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=l-1}return r}rl(Q6,"deserializeIndex");var ZD=class extends Error{};rl(ZD,"EtagMismatch");var PE=ZD;function Y6(n,e){return vc(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,tQ),i=HD(r,t.etag),s=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),l=`${n.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,o=Q6(yield e(s,i.internalCompression));return[i,[l,o.length,o]]})}rl(Y6,"getHeaderAndRoot");function q6(n,e,t,r,i){return vc(this,null,function*(){let s=yield n.getBytes(t,r,void 0,i.etag),l=yield e(s.data,i.internalCompression),o=Q6(l);if(o.length===0)throw new Error("Empty directory is invalid");return o})}rl(q6,"getDirectory");var iQ=class{constructor(e=100,t=!0,r=N2){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return vc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield Y6(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return vc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,l=this.cache.get(s);if(l)return l.lastUsed=this.counter++,l.data;let o=yield q6(e,this.decompress,t,r,i);return this.cache.set(s,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return vc(this,null,function*(){this.cache.delete(e.getKey())})}};rl(iQ,"ResolvedValueCache");var XD=class{constructor(e=100,t=!0,r=N2){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return vc(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((s,l)=>{Y6(e,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),s(o[0]),this.prune()}).catch(o=>{l(o)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return vc(this,null,function*(){let s=`${e.getKey()}|${i.etag||""}|${t}|${r}`,l=this.cache.get(s);if(l)return l.lastUsed=this.counter++,yield l.data;let o=new Promise((p,v)=>{q6(e,this.decompress,t,r,i).then(x=>{p(x),this.prune()}).catch(x=>{v(x)})});return this.cache.set(s,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return vc(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,s)=>{this.getHeader(e).then(l=>{i(),this.invalidations.delete(t)}).catch(l=>{s(l)})});this.invalidations.set(t,r)})}};rl(XD,"SharedPromiseCache");var oQ=XD,JD=class{constructor(e,t,r){typeof e=="string"?this.source=new rQ(e):this.source=e,r?this.decompress=r:this.decompress=N2,t?this.cache=t:this.cache=new oQ}getHeader(){return vc(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return vc(this,null,function*(){let s=YD(e,t,r),l=yield this.cache.getHeader(this.source);if(e<l.minZoom||e>l.maxZoom)return;let o=l.rootDirectoryOffset,p=l.rootDirectoryLength;for(let v=0;v<=3;v++){let x=yield this.cache.getDirectory(this.source,o,p,l),B=VD(x,s);if(B){if(B.runLength>0){let T=yield this.source.getBytes(l.tileDataOffset+B.offset,B.length,i,l.etag);return{data:yield this.decompress(T.data,l.tileCompression),cacheControl:T.cacheControl,expires:T.expires}}o=l.leafDirectoryOffset+B.offset,p=B.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return vc(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(s){if(s instanceof PE)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw s}})}getMetadataAttempt(){return vc(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return vc(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof PE)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return vc(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=qD(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};rl(JD,"PMTiles");var KE=JD,sQ=8,aQ={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},lQ={"*":{type:"source"}},uQ=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],AQ={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},cQ={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},dQ={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},hQ={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},fQ={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},pQ={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},mQ={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},gQ=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],yQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vQ={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},CQ={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},_Q={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bQ={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},xQ={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},MQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},wQ={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},SQ={type:"array",value:"*"},EQ={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},BQ={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},OQ={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},IQ={type:"array",value:"*",minimum:1},kQ={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},TQ={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},PQ={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},KQ={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},RQ=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],DQ={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},FQ={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},LQ={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},UQ={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},zQ={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},jQ={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},NQ={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},WQ={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},GQ={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},QQ={"*":{type:"string"}},ks={$version:sQ,$root:aQ,sources:lQ,source:uQ,source_vector:AQ,source_raster:cQ,source_raster_dem:dQ,source_geojson:hQ,source_video:fQ,source_image:pQ,layer:mQ,layout:gQ,layout_background:yQ,layout_fill:vQ,layout_circle:CQ,layout_heatmap:_Q,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:bQ,layout_symbol:xQ,layout_raster:MQ,layout_hillshade:wQ,filter:SQ,filter_operator:EQ,geometry_type:BQ,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:OQ,expression:IQ,light:kQ,sky:TQ,terrain:PQ,projection:KQ,paint:RQ,paint_fill:DQ,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:FQ,paint_circle:LQ,paint_heatmap:UQ,paint_symbol:zQ,paint_raster:jQ,paint_hillshade:NQ,paint_background:WQ,transition:GQ,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:QQ};const YQ=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qQ(n,e){const t={};for(const r in n)r!=="ref"&&(t[r]=n[r]);return YQ.forEach(r=>{r in e&&(t[r]=e[r])}),t}function V6(n){n=n.slice();const e=Object.create(null);for(let t=0;t<n.length;t++)e[n[t].id]=n[t];for(let t=0;t<n.length;t++)"ref"in n[t]&&(n[t]=qQ(n[t],e[n[t].ref]));return n}function Oa(n,e){if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Oa(n[t],e[t]))return!1;return!0}if(typeof n=="object"&&n!==null&&e!==null){if(typeof e!="object"||Object.keys(n).length!==Object.keys(e).length)return!1;for(const r in n)if(!Oa(n[r],e[r]))return!1;return!0}return n===e}function bf(n,e){n.push(e)}function eF(n,e,t){bf(t,{command:"addSource",args:[n,e[n]]})}function tF(n,e,t){bf(e,{command:"removeSource",args:[n]}),t[n]=!0}function VQ(n,e,t,r){tF(n,t,r),eF(n,e,t)}function $Q(n,e,t){let r;for(r in n[t])if(Object.prototype.hasOwnProperty.call(n[t],r)&&r!=="data"&&!Oa(n[t][r],e[t][r]))return!1;for(r in e[t])if(Object.prototype.hasOwnProperty.call(e[t],r)&&r!=="data"&&!Oa(n[t][r],e[t][r]))return!1;return!0}function HQ(n,e,t,r){n=n||{},e=e||{};let i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(Object.prototype.hasOwnProperty.call(e,i)||tF(i,t,r));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(n,i)?Oa(n[i],e[i])||(n[i].type==="geojson"&&e[i].type==="geojson"&&$Q(n,e,i)?bf(t,{command:"setGeoJSONSourceData",args:[i,e[i].data]}):VQ(i,e,t,r)):eF(i,e,t))}function R_(n,e,t,r,i,s){n=n||{},e=e||{};for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&(Oa(n[l],e[l])||t.push({command:s,args:[r,l,e[l],i]}));for(const l in e)!Object.prototype.hasOwnProperty.call(e,l)||Object.prototype.hasOwnProperty.call(n,l)||Oa(n[l],e[l])||t.push({command:s,args:[r,l,e[l],i]})}function $8(n){return n.id}function H8(n,e){return n[e.id]=e,n}function ZQ(n,e,t){n=n||[],e=e||[];const r=n.map($8),i=e.map($8),s=n.reduce(H8,{}),l=e.reduce(H8,{}),o=r.slice(),p=Object.create(null);let v,x,B,T,P;for(let U=0,j=0;U<r.length;U++)v=r[U],Object.prototype.hasOwnProperty.call(l,v)?j++:(bf(t,{command:"removeLayer",args:[v]}),o.splice(o.indexOf(v,j),1));for(let U=0,j=0;U<i.length;U++)v=i[i.length-1-U],o[o.length-1-U]!==v&&(Object.prototype.hasOwnProperty.call(s,v)?(bf(t,{command:"removeLayer",args:[v]}),o.splice(o.lastIndexOf(v,o.length-j),1)):j++,T=o[o.length-U],bf(t,{command:"addLayer",args:[l[v],T]}),o.splice(o.length-U,0,v),p[v]=!0);for(let U=0;U<i.length;U++)if(v=i[U],x=s[v],B=l[v],!(p[v]||Oa(x,B))){if(!Oa(x.source,B.source)||!Oa(x["source-layer"],B["source-layer"])||!Oa(x.type,B.type)){bf(t,{command:"removeLayer",args:[v]}),T=o[o.lastIndexOf(v)+1],bf(t,{command:"addLayer",args:[B,T]});continue}R_(x.layout,B.layout,t,v,null,"setLayoutProperty"),R_(x.paint,B.paint,t,v,null,"setPaintProperty"),Oa(x.filter,B.filter)||bf(t,{command:"setFilter",args:[v,B.filter]}),(!Oa(x.minzoom,B.minzoom)||!Oa(x.maxzoom,B.maxzoom))&&bf(t,{command:"setLayerZoomRange",args:[v,B.minzoom,B.maxzoom]});for(P in x)Object.prototype.hasOwnProperty.call(x,P)&&(P==="layout"||P==="paint"||P==="filter"||P==="metadata"||P==="minzoom"||P==="maxzoom"||(P.indexOf("paint.")===0?R_(x[P],B[P],t,v,P.slice(6),"setPaintProperty"):Oa(x[P],B[P])||bf(t,{command:"setLayerProperty",args:[v,P,B[P]]})));for(P in B)!Object.prototype.hasOwnProperty.call(B,P)||Object.prototype.hasOwnProperty.call(x,P)||P==="layout"||P==="paint"||P==="filter"||P==="metadata"||P==="minzoom"||P==="maxzoom"||(P.indexOf("paint.")===0?R_(x[P],B[P],t,v,P.slice(6),"setPaintProperty"):Oa(x[P],B[P])||bf(t,{command:"setLayerProperty",args:[v,P,B[P]]}))}}function XQ(n,e){if(!n)return[{command:"setStyle",args:[e]}];let t=[];try{if(!Oa(n.version,e.version))return[{command:"setStyle",args:[e]}];Oa(n.center,e.center)||t.push({command:"setCenter",args:[e.center]}),Oa(n.centerAltitude,e.centerAltitude)||t.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Oa(n.zoom,e.zoom)||t.push({command:"setZoom",args:[e.zoom]}),Oa(n.bearing,e.bearing)||t.push({command:"setBearing",args:[e.bearing]}),Oa(n.pitch,e.pitch)||t.push({command:"setPitch",args:[e.pitch]}),Oa(n.roll,e.roll)||t.push({command:"setRoll",args:[e.roll]}),Oa(n.sprite,e.sprite)||t.push({command:"setSprite",args:[e.sprite]}),Oa(n.glyphs,e.glyphs)||t.push({command:"setGlyphs",args:[e.glyphs]}),Oa(n.transition,e.transition)||t.push({command:"setTransition",args:[e.transition]}),Oa(n.light,e.light)||t.push({command:"setLight",args:[e.light]}),Oa(n.terrain,e.terrain)||t.push({command:"setTerrain",args:[e.terrain]}),Oa(n.sky,e.sky)||t.push({command:"setSky",args:[e.sky]}),Oa(n.projection,e.projection)||t.push({command:"setProjection",args:[e.projection]});const r={},i=[];HQ(n.sources,e.sources,i,r);const s=[];n.layers&&n.layers.forEach(l=>{"source"in l&&r[l.source]?t.push({command:"removeLayer",args:[l.id]}):s.push(l)}),t=t.concat(i),ZQ(s,e.layers,t)}catch(r){console.warn("Unable to compute style diff:",r),t=[{command:"setStyle",args:[e]}]}return t}class Er{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),t!=null&&t.__line__&&(this.line=t.__line__)}}function py(n,...e){for(const t of e)for(const r in t)n[r]=t[r];return n}class Np extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class $6{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new $6(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const W2={kind:"null"},Pr={kind:"number"},Jo={kind:"string"},zo={kind:"boolean"},Vp={kind:"color"},G2={kind:"projectionDefinition"},ry={kind:"object"},jo={kind:"value"},JQ={kind:"error"},Q2={kind:"collator"},Y2={kind:"formatted"},q2={kind:"padding"},FC={kind:"resolvedImage"},V2={kind:"variableAnchorOffsetCollection"};function qh(n,e){return{kind:"array",itemType:n,N:e}}function iu(n){if(n.kind==="array"){const e=iu(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}else return n.kind}const eY=[W2,Pr,Jo,zo,Vp,G2,Y2,ry,qh(jo),q2,FC,V2];function oC(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!oC(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const t of eY)if(!oC(t,e))return null}}return`Expected ${iu(n)} but found ${iu(e)} instead.`}function H6(n,e){return e.some(t=>t.kind===n.kind)}function wg(n,e){return e.some(t=>t==="null"?n===null:t==="array"?Array.isArray(n):t==="object"?n&&!Array.isArray(n)&&typeof n=="object":t===typeof n)}function c1(n,e){return n.kind==="array"&&e.kind==="array"?n.itemType.kind===e.itemType.kind&&typeof n.N=="number":n.kind===e.kind}const nF=.96422,rF=1,iF=.82521,oF=4/29,iy=6/29,sF=3*iy*iy,tY=iy*iy*iy,nY=Math.PI/180,rY=180/Math.PI;function aF(n){return n=n%360,n<0&&(n+=360),n}function lF([n,e,t,r]){n=P3(n),e=P3(e),t=P3(t);let i,s;const l=K3((.2225045*n+.7168786*e+.0606169*t)/rF);n===e&&e===t?i=s=l:(i=K3((.4360747*n+.3850649*e+.1430804*t)/nF),s=K3((.0139322*n+.0971045*e+.7141733*t)/iF));const o=116*l-16;return[o<0?0:o,500*(i-l),200*(l-s),r]}function P3(n){return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function K3(n){return n>tY?Math.pow(n,1/3):n/sF+oF}function uF([n,e,t,r]){let i=(n+16)/116,s=isNaN(e)?i:i+e/500,l=isNaN(t)?i:i-t/200;return i=rF*D3(i),s=nF*D3(s),l=iF*D3(l),[R3(3.1338561*s-1.6168667*i-.4906146*l),R3(-.9787684*s+1.9161415*i+.033454*l),R3(.0719453*s-.2289914*i+1.4052427*l),r]}function R3(n){return n=n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055,n<0?0:n>1?1:n}function D3(n){return n>iy?n*n*n:sF*(n-oF)}function iY(n){const[e,t,r,i]=lF(n),s=Math.sqrt(t*t+r*r);return[Math.round(s*1e4)?aF(Math.atan2(r,t)*rY):NaN,s,e,i]}function oY([n,e,t,r]){return n=isNaN(n)?0:n*nY,uF([t,Math.cos(n)*e,Math.sin(n)*e,r])}function sY([n,e,t,r]){n=aF(n),e/=100,t/=100;function i(s){const l=(s+n/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(l-3,9-l,1))}return[i(0),i(8),i(4),r]}function aY(n){if(n=n.toLowerCase().trim(),n==="transparent")return[0,0,0,0];const e=lY[n];if(e){const[i,s,l]=e;return[i/255,s/255,l/255,1]}if(n.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(n)){const s=n.length<6?1:2;let l=1;return[D_(n.slice(l,l+=s)),D_(n.slice(l,l+=s)),D_(n.slice(l,l+=s)),D_(n.slice(l,l+s)||"ff")]}if(n.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,s=n.match(i);if(s){const[l,o,p,v,x,B,T,P,U,j,N,q]=s,H=[v||" ",T||" ",j].join("");if(H==="  "||H==="  /"||H===",,"||H===",,,"){const oe=[p,B,U].join(""),te=oe==="%%%"?100:oe===""?255:0;if(te){const V=[z1(+o/te,0,1),z1(+x/te,0,1),z1(+P/te,0,1),N?Z8(+N,q):1];if(X8(V))return V}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=n.match(t);if(r){const[i,s,l,o,p,v,x,B,T]=r,P=[l||" ",p||" ",x].join("");if(P==="  "||P==="  /"||P===",,"||P===",,,"){const U=[+s,z1(+o,0,100),z1(+v,0,100),B?Z8(+B,T):1];if(X8(U))return sY(U)}}}function D_(n){return parseInt(n.padEnd(2,n),16)/255}function Z8(n,e){return z1(e?n/100:n,0,1)}function z1(n,e,t){return Math.min(Math.max(e,n),t)}function X8(n){return!n.some(Number.isNaN)}const lY={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function B0(n,e,t){return n+t*(e-n)}function sC(n,e,t){return n.map((r,i)=>B0(r,e[i],t))}function uY(n){return n==="rgb"||n==="hcl"||n==="lab"}let Ol=class j1{constructor(e,t,r,i=1,s=!0){this.r=e,this.g=t,this.b=r,this.a=i,s||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof j1)return e;if(typeof e!="string")return;const t=aY(e);if(t)return new j1(...t,!1)}get rgb(){const{r:e,g:t,b:r,a:i}=this,s=i||1/0;return this.overwriteGetter("rgb",[e/s,t/s,r/s,i])}get hcl(){return this.overwriteGetter("hcl",iY(this.rgb))}get lab(){return this.overwriteGetter("lab",lF(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map(s=>Math.round(s*255)).join(",")},${i})`}static interpolate(e,t,r,i="rgb"){switch(i){case"rgb":{const[s,l,o,p]=sC(e.rgb,t.rgb,r);return new j1(s,l,o,p,!1)}case"hcl":{const[s,l,o,p]=e.hcl,[v,x,B,T]=t.hcl;let P,U;if(!isNaN(s)&&!isNaN(v)){let oe=v-s;v>s&&oe>180?oe-=360:v<s&&s-v>180&&(oe+=360),P=s+r*oe}else isNaN(s)?isNaN(v)?P=NaN:(P=v,(o===1||o===0)&&(U=x)):(P=s,(B===1||B===0)&&(U=l));const[j,N,q,H]=oY([P,U??B0(l,x,r),B0(o,B,r),B0(p,T,r)]);return new j1(j,N,q,H,!1)}case"lab":{const[s,l,o,p]=uF(sC(e.lab,t.lab,r));return new j1(s,l,o,p,!1)}}}};Ol.black=new Ol(0,0,0,1);Ol.white=new Ol(1,1,1,1);Ol.transparent=new Ol(0,0,0,0);Ol.red=new Ol(1,0,0,1);class Z6{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const AY=["bottom","center","top"];class RE{constructor(e,t,r,i,s,l){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=s,this.verticalAlign=l}}class $p{constructor(e){this.sections=e}static fromString(e){return new $p([new RE(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof $p?e:$p.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Qd{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Qd)return e;if(typeof e=="number")return new Qd([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Qd(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){return new Qd(sC(e.values,t.values,r))}}class pA{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const cY=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Bf{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Bf)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if(typeof r!="string"||!cY.has(r)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new Bf(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,r){const i=e.values,s=t.values;if(i.length!==s.length)throw new pA(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const l=[];for(let o=0;o<i.length;o+=2){if(i[o]!==s[o])throw new pA(`Cannot interpolate values containing mismatched anchors. from[${o}]: ${i[o]}, to[${o}]: ${s[o]}`);l.push(i[o]);const[p,v]=i[o+1],[x,B]=s[o+1];l.push([B0(p,x,r),B0(v,B,r)])}return new Bf(l)}}class Um{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Um({name:e,available:!1}):null}}class Mf{constructor(e,t,r){this.from=e,this.to=t,this.transition=r}static interpolate(e,t,r){return new Mf(e,t,r)}static parse(e){if(e instanceof Mf)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new Mf(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new Mf(e.from,e.to,e.transition);if(typeof e=="string")return new Mf(e,e,1)}}function AF(n,e,t,r){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[n,e,t,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[n,e,t,r]:[n,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function aC(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Mf||n instanceof Ol||n instanceof Z6||n instanceof $p||n instanceof Qd||n instanceof Bf||n instanceof Um)return!0;if(Array.isArray(n)){for(const e of n)if(!aC(e))return!1;return!0}else if(typeof n=="object"){for(const e in n)if(!aC(n[e]))return!1;return!0}else return!1}function ac(n){if(n===null)return W2;if(typeof n=="string")return Jo;if(typeof n=="boolean")return zo;if(typeof n=="number")return Pr;if(n instanceof Ol)return Vp;if(n instanceof Mf)return G2;if(n instanceof Z6)return Q2;if(n instanceof $p)return Y2;if(n instanceof Qd)return q2;if(n instanceof Bf)return V2;if(n instanceof Um)return FC;if(Array.isArray(n)){const e=n.length;let t;for(const r of n){const i=ac(r);if(!t)t=i;else{if(t===i)continue;t=jo;break}}return qh(t||jo,e)}else return ry}function Yv(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof Ol||n instanceof Mf||n instanceof $p||n instanceof Qd||n instanceof Bf||n instanceof Um?n.toString():JSON.stringify(n)}class my{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!aC(e[1]))return t.error("invalid value");const r=e[1];let i=ac(r);const s=t.expectedType;return i.kind==="array"&&i.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(i=s),new my(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const F_={string:Jo,number:Pr,boolean:zo,object:ry};class Ap{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,i;const s=e[0];if(s==="array"){let o;if(e.length>2){const v=e[1];if(typeof v!="string"||!(v in F_)||v==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);o=F_[v],r++}else o=jo;let p;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);p=e[2],r++}i=qh(o,p)}else{if(!F_[s])throw new Error(`Types doesn't contain name = ${s}`);i=F_[s]}const l=[];for(;r<e.length;r++){const o=t.parse(e[r],r,jo);if(!o)return null;l.push(o)}return new Ap(i,l)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(oC(this.type,ac(r))){if(t===this.args.length-1)throw new pA(`Expected value to be of type ${iu(this.type)}, but found ${iu(ac(r))} instead.`)}else return r}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const J8={"to-boolean":zo,"to-color":Vp,"to-number":Pr,"to-string":Jo};class _0{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!J8[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=J8[r],s=[];for(let l=1;l<e.length;l++){const o=t.parse(e[l],l,jo);if(!o)return null;s.push(o)}return new _0(i,s)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof Ol)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?r=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:r=AF(t[0],t[1],t[2],t[3]),!r))return new Ol(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new pA(r||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=Qd.parse(t);if(i)return i}throw new pA(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=Bf.parse(t);if(i)return i}throw new pA(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new pA(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return $p.fromString(Yv(this.args[0].evaluate(e)));case"resolvedImage":return Um.fromString(Yv(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return Yv(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const dY=["Unknown","Point","LineString","Polygon"];class cF{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?dY[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ol.parse(e)),t}}class $2{constructor(e,t,r=[],i,s=new $6,l=[]){this.registry=e,this.path=r,this.key=r.map(o=>`[${o}]`).join(""),this.scope=s,this.errors=l,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,s={}){return t?this.concat(t,r,i)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function r(i,s,l){return l==="assert"?new Ap(s,[i]):l==="coerce"?new _0(s,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[i];if(s){let l=s.parse(e,this);if(!l)return null;if(this.expectedType){const o=this.expectedType,p=l.type;if((o.kind==="string"||o.kind==="number"||o.kind==="boolean"||o.kind==="object"||o.kind==="array")&&p.kind==="value")l=r(l,o,t.typeAnnotation||"assert");else if(o.kind==="projectionDefinition"&&(p.kind==="string"||p.kind==="array"))l=r(l,o,t.typeAnnotation||"coerce");else if((o.kind==="color"||o.kind==="formatted"||o.kind==="resolvedImage")&&(p.kind==="value"||p.kind==="string"))l=r(l,o,t.typeAnnotation||"coerce");else if(o.kind==="padding"&&(p.kind==="value"||p.kind==="number"||p.kind==="array"))l=r(l,o,t.typeAnnotation||"coerce");else if(o.kind==="variableAnchorOffsetCollection"&&(p.kind==="value"||p.kind==="array"))l=r(l,o,t.typeAnnotation||"coerce");else if(this.checkSubtype(o,p))return null}if(!(l instanceof my)&&l.type.kind!=="resolvedImage"&&this._isConstant(l)){const o=new cF;try{l=new my(l.type,l.evaluate(o))}catch(p){return this.error(p.message),null}}return l}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i=typeof e=="number"?this.path.concat(e):this.path,s=r?this.scope.concat(r):this.scope;return new $2(this.registry,this._isConstant,i,t||null,s,this.errors)}error(e,...t){const r=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new Np(r,e))}checkSubtype(e,t){const r=oC(e,t);return r&&this.error(r),r}}class H2{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let s=1;s<e.length-1;s+=2){const l=e[s];if(typeof l!="string")return t.error(`Expected string, but found ${typeof l} instead.`,s);if(/[^a-zA-Z0-9_]/.test(l))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const o=t.parse(e[s+1],s+1);if(!o)return null;r.push([l,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new H2(r,i):null}outputDefined(){return this.result.outputDefined()}}class Z2{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new Z2(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class X6{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Pr),i=t.parse(e[2],2,qh(t.expectedType||jo));if(!r||!i)return null;const s=i.type;return new X6(s.itemType,r,i)}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new pA(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new pA(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new pA(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class J6{constructor(e,t){this.type=zo,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,jo),i=t.parse(e[2],2,jo);return!r||!i?null:H6(r.type,[zo,Jo,Pr,W2,jo])?new J6(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${iu(r.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!wg(t,["boolean","string","number","null"]))throw new pA(`Expected first argument to be of type boolean, string, number or null, but found ${iu(ac(t))} instead.`);if(!wg(r,["string","array"]))throw new pA(`Expected second argument to be of type array or string, but found ${iu(ac(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class zb{constructor(e,t,r){this.type=Pr,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,jo),i=t.parse(e[2],2,jo);if(!r||!i)return null;if(!H6(r.type,[zo,Jo,Pr,W2,jo]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${iu(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Pr);return s?new zb(r,i,s):null}else return new zb(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!wg(t,["boolean","string","number","null"]))throw new pA(`Expected first argument to be of type boolean, string, number or null, but found ${iu(ac(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),wg(r,["string"])){const s=r.indexOf(t,i);return s===-1?-1:[...r.slice(0,s)].length}else{if(wg(r,["array"]))return r.indexOf(t,i);throw new pA(`Expected second argument to be of type array or string, but found ${iu(ac(r))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class eB{constructor(e,t,r,i,s,l){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=s,this.otherwise=l}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const s={},l=[];for(let v=2;v<e.length-1;v+=2){let x=e[v];const B=e[v+1];Array.isArray(x)||(x=[x]);const T=t.concat(v);if(x.length===0)return T.error("Expected at least one branch label.");for(const U of x){if(typeof U!="number"&&typeof U!="string")return T.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return T.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof U=="number"&&Math.floor(U)!==U)return T.error("Numeric branch labels must be integer values.");if(!r)r=ac(U);else if(T.checkSubtype(r,ac(U)))return null;if(typeof s[String(U)]<"u")return T.error("Branch labels must be unique.");s[String(U)]=l.length}const P=t.parse(B,v,i);if(!P)return null;i=i||P.type,l.push(P)}const o=t.parse(e[1],1,jo);if(!o)return null;const p=t.parse(e[e.length-1],e.length-1,i);return!p||o.type.kind!=="value"&&t.concat(1).checkSubtype(r,o.type)?null:new eB(r,i,o,s,l,p)}evaluate(e){const t=this.input.evaluate(e);return(ac(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class tB{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const i=[];for(let l=1;l<e.length-1;l+=2){const o=t.parse(e[l],l,zo);if(!o)return null;const p=t.parse(e[l+1],l+1,r);if(!p)return null;i.push([o,p]),r=r||p.type}const s=t.parse(e[e.length-1],e.length-1,r);if(!s)return null;if(!r)throw new Error("Can't infer output type");return new tB(r,i,s)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class jb{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,jo),i=t.parse(e[2],2,Pr);if(!r||!i)return null;if(!H6(r.type,[qh(jo),Jo,jo]))return t.error(`Expected first argument to be of type array or string, but found ${iu(r.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,Pr);return s?new jb(r.type,r,i,s):null}else return new jb(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),wg(t,["string"]))return[...t].slice(r,i).join("");if(wg(t,["array"]))return t.slice(r,i);throw new pA(`Expected first argument to be of type array or string, but found ${iu(ac(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function X2(n,e){const t=n.length-1;let r=0,i=t,s=0,l,o;for(;r<=i;)if(s=Math.floor((r+i)/2),l=n[s],o=n[s+1],l<=e){if(s===t||e<o)return s;r=s+1}else if(l>e)i=s-1;else throw new pA("Input is not a number.");return 0}class J2{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,s]of r)this.labels.push(i),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Pr);if(!r)return null;const i=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let l=1;l<e.length;l+=2){const o=l===1?-1/0:e[l],p=e[l+1],v=l,x=l+1;if(typeof o!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',v);const B=t.parse(p,x,s);if(!B)return null;s=s||B.type,i.push([o,B])}return new J2(s,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const l=X2(t,i);return r[l].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function hY(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var F3,e7;function fY(){if(e7)return F3;e7=1,F3=n;function n(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}return n.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var s=this.sampleCurveX(r)-e;if(Math.abs(s)<t)return r;var l=this.sampleCurveDerivativeX(r);if(Math.abs(l)<1e-6)break;r=r-s/l}var o=0,p=1;for(r=e,i=0;i<20&&(s=this.sampleCurveX(r),!(Math.abs(s-e)<t));i++)e>s?o=r:p=r,r=(p-o)*.5+o;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},F3}var pY=fY(),mY=hY(pY);class Of{constructor(e,t,r,i,s){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[l,o]of s)this.labels.push(l),this.outputs.push(o)}static interpolationFactor(e,t,r,i){let s=0;if(e.name==="exponential")s=L3(t,e.base,r,i);else if(e.name==="linear")s=L3(t,1,r,i);else if(e.name==="cubic-bezier"){const l=e.controlPoints;s=new mY(l[0],l[1],l[2],l[3]).solve(L3(t,1,r,i))}return s}static parse(e,t){let[r,i,s,...l]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const v=i[1];if(typeof v!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:v}}else if(i[0]==="cubic-bezier"){const v=i.slice(1);if(v.length!==4||v.some(x=>typeof x!="number"||x<0||x>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:v}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,Pr),!s)return null;const o=[];let p=null;r==="interpolate-hcl"||r==="interpolate-lab"?p=Vp:t.expectedType&&t.expectedType.kind!=="value"&&(p=t.expectedType);for(let v=0;v<l.length;v+=2){const x=l[v],B=l[v+1],T=v+3,P=v+4;if(typeof x!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(o.length&&o[o.length-1][0]>=x)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',T);const U=t.parse(B,P,p);if(!U)return null;p=p||U.type,o.push([x,U])}return!c1(p,Pr)&&!c1(p,G2)&&!c1(p,Vp)&&!c1(p,q2)&&!c1(p,V2)&&!c1(p,qh(Pr))?t.error(`Type ${iu(p)} is not interpolatable.`):new Of(p,r,i,s,o)}evaluate(e){const t=this.labels,r=this.outputs;if(t.length===1)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const s=t.length;if(i>=t[s-1])return r[s-1].evaluate(e);const l=X2(t,i),o=t[l],p=t[l+1],v=Of.interpolationFactor(this.interpolation,i,o,p),x=r[l].evaluate(e),B=r[l+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return B0(x,B,v);case"color":return Ol.interpolate(x,B,v);case"padding":return Qd.interpolate(x,B,v);case"variableAnchorOffsetCollection":return Bf.interpolate(x,B,v);case"array":return sC(x,B,v);case"projectionDefinition":return Mf.interpolate(x,B,v)}case"interpolate-hcl":return Ol.interpolate(x,B,v,"hcl");case"interpolate-lab":return Ol.interpolate(x,B,v,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function L3(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}const gY={color:Ol.interpolate,number:B0,padding:Qd.interpolate,variableAnchorOffsetCollection:Bf.interpolate,array:sC};class lC{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=null;const i=t.expectedType;i&&i.kind!=="value"&&(r=i);const s=[];for(const o of e.slice(1)){const p=t.parse(o,1+s.length,r,void 0,{typeAnnotation:"omit"});if(!p)return null;r=r||p.type,s.push(p)}if(!r)throw new Error("No output type");return i&&s.some(o=>oC(i,o.type))?new lC(jo,s):new lC(r,s)}evaluate(e){let t=null,r=0,i;for(const s of this.args)if(r++,t=s.evaluate(e),t&&t instanceof Um&&!t.available&&(i||(i=t.name),t=null,r===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function t7(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function yY(n,e,t){return e===t}function vY(n,e,t){return e!==t}function CY(n,e,t){return e<t}function _Y(n,e,t){return e>t}function bY(n,e,t){return e<=t}function xY(n,e,t){return e>=t}function dF(n,e,t,r){return r.compare(e,t)===0}function MY(n,e,t,r){return!dF(n,e,t,r)}function wY(n,e,t,r){return r.compare(e,t)<0}function SY(n,e,t,r){return r.compare(e,t)>0}function EY(n,e,t,r){return r.compare(e,t)<=0}function BY(n,e,t,r){return r.compare(e,t)>=0}function By(n,e,t){const r=n!=="=="&&n!=="!=";return class hF{constructor(s,l,o){this.type=zo,this.lhs=s,this.rhs=l,this.collator=o,this.hasUntypedArgument=s.type.kind==="value"||l.type.kind==="value"}static parse(s,l){if(s.length!==3&&s.length!==4)return l.error("Expected two or three arguments.");const o=s[0];let p=l.parse(s[1],1,jo);if(!p)return null;if(!t7(o,p.type))return l.concat(1).error(`"${o}" comparisons are not supported for type '${iu(p.type)}'.`);let v=l.parse(s[2],2,jo);if(!v)return null;if(!t7(o,v.type))return l.concat(2).error(`"${o}" comparisons are not supported for type '${iu(v.type)}'.`);if(p.type.kind!==v.type.kind&&p.type.kind!=="value"&&v.type.kind!=="value")return l.error(`Cannot compare types '${iu(p.type)}' and '${iu(v.type)}'.`);r&&(p.type.kind==="value"&&v.type.kind!=="value"?p=new Ap(v.type,[p]):p.type.kind!=="value"&&v.type.kind==="value"&&(v=new Ap(p.type,[v])));let x=null;if(s.length===4){if(p.type.kind!=="string"&&v.type.kind!=="string"&&p.type.kind!=="value"&&v.type.kind!=="value")return l.error("Cannot use collator to compare non-string types.");if(x=l.parse(s[3],3,Q2),!x)return null}return new hF(p,v,x)}evaluate(s){const l=this.lhs.evaluate(s),o=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){const p=ac(l),v=ac(o);if(p.kind!==v.kind||!(p.kind==="string"||p.kind==="number"))throw new pA(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${p.kind}, ${v.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const p=ac(l),v=ac(o);if(p.kind!=="string"||v.kind!=="string")return e(s,l,o)}return this.collator?t(s,l,o,this.collator.evaluate(s)):e(s,l,o)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}}}const OY=By("==",yY,dF),IY=By("!=",vY,MY),kY=By("<",CY,wY),TY=By(">",_Y,SY),PY=By("<=",bY,EY),KY=By(">=",xY,BY);class ex{constructor(e,t,r){this.type=Q2,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const r=e[1];if(typeof r!="object"||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,zo);if(!i)return null;const s=t.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,zo);if(!s)return null;let l=null;return r.locale&&(l=t.parse(r.locale,1,Jo),!l)?null:new ex(i,s,l)}evaluate(e){return new Z6(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class nB{constructor(e,t,r,i,s){this.type=Jo,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=s}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Pr);if(!r)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let s=null;if(i.locale&&(s=t.parse(i.locale,1,Jo),!s))return null;let l=null;if(i.currency&&(l=t.parse(i.currency,1,Jo),!l))return null;let o=null;if(i["min-fraction-digits"]&&(o=t.parse(i["min-fraction-digits"],1,Pr),!o))return null;let p=null;return i["max-fraction-digits"]&&(p=t.parse(i["max-fraction-digits"],1,Pr),!p)?null:new nB(r,s,l,o,p)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class rB{constructor(e){this.type=Y2,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&typeof r=="object")return t.error("First argument must be an image or text section.");const i=[];let s=!1;for(let l=1;l<=e.length-1;++l){const o=e[l];if(s&&typeof o=="object"&&!Array.isArray(o)){s=!1;let p=null;if(o["font-scale"]&&(p=t.parse(o["font-scale"],1,Pr),!p))return null;let v=null;if(o["text-font"]&&(v=t.parse(o["text-font"],1,qh(Jo)),!v))return null;let x=null;if(o["text-color"]&&(x=t.parse(o["text-color"],1,Vp),!x))return null;let B=null;if(o["vertical-align"]){if(typeof o["vertical-align"]=="string"&&!AY.includes(o["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${o["vertical-align"]}' instead.`);if(B=t.parse(o["vertical-align"],1,Jo),!B)return null}const T=i[i.length-1];T.scale=p,T.font=v,T.textColor=x,T.verticalAlign=B}else{const p=t.parse(e[l],1,jo);if(!p)return null;const v=p.type.kind;if(v!=="string"&&v!=="value"&&v!=="null"&&v!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,i.push({content:p,scale:null,font:null,textColor:null,verticalAlign:null})}}return new rB(i)}evaluate(e){const t=r=>{const i=r.content.evaluate(e);return ac(i)===FC?new RE("",i,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new RE(Yv(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)};return new $p(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class iB{constructor(e){this.type=FC,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Jo);return r?new iB(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=Um.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class oB{constructor(e){this.type=Pr,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${iu(r.type)} instead.`):new oB(r):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new pA(`Expected value to be of type string or array, but found ${iu(ac(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Hp=8192;function RY(n,e){const t=DY(n[0]),r=LY(n[1]),i=Math.pow(2,e.z);return[Math.round(t*i*Hp),Math.round(r*i*Hp)]}function sB(n,e){const t=Math.pow(2,e.z),r=(n[0]/Hp+e.x)/t,i=(n[1]/Hp+e.y)/t;return[FY(r),UY(i)]}function DY(n){return(180+n)/360}function FY(n){return n*360-180}function LY(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function UY(n){return 360/Math.PI*Math.atan(Math.exp((180-n*360)*Math.PI/180))-90}function LC(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function uC(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function zY(n,e,t){return e[1]>n[1]!=t[1]>n[1]&&n[0]<(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1])+e[0]}function jY(n,e,t){const r=n[0]-e[0],i=n[1]-e[1],s=n[0]-t[0],l=n[1]-t[1];return r*l-s*i===0&&r*s<=0&&i*l<=0}function tx(n,e,t,r){const i=[e[0]-n[0],e[1]-n[1]],s=[r[0]-t[0],r[1]-t[1]];return QY(s,i)===0?!1:!!(n7(n,e,t,r)&&n7(t,r,n,e))}function NY(n,e,t){for(const r of t)for(let i=0;i<r.length-1;++i)if(tx(n,e,r[i],r[i+1]))return!0;return!1}function Oy(n,e,t=!1){let r=!1;for(const i of e)for(let s=0;s<i.length-1;s++){if(jY(n,i[s],i[s+1]))return t;zY(n,i[s],i[s+1])&&(r=!r)}return r}function WY(n,e){for(const t of e)if(Oy(n,t))return!0;return!1}function fF(n,e){for(const t of n)if(!Oy(t,e))return!1;for(let t=0;t<n.length-1;++t)if(NY(n[t],n[t+1],e))return!1;return!0}function GY(n,e){for(const t of e)if(fF(n,t))return!0;return!1}function QY(n,e){return n[0]*e[1]-n[1]*e[0]}function n7(n,e,t,r){const i=n[0]-t[0],s=n[1]-t[1],l=e[0]-t[0],o=e[1]-t[1],p=r[0]-t[0],v=r[1]-t[1],x=i*v-p*s,B=l*v-p*o;return x>0&&B<0||x<0&&B>0}function aB(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=[];for(let l=0;l<n[i].length;l++){const o=RY(n[i][l],t);LC(e,o),s.push(o)}r.push(s)}return r}function pF(n,e,t){const r=[];for(let i=0;i<n.length;i++){const s=aB(n[i],e,t);r.push(s)}return r}function mF(n,e,t,r){if(n[0]<t[0]||n[0]>t[2]){const i=r*.5;let s=n[0]-t[0]>i?-r:t[0]-n[0]>i?r:0;s===0&&(s=n[0]-t[2]>i?-r:t[2]-n[0]>i?r:0),n[0]+=s}LC(e,n)}function YY(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}function r7(n,e,t,r){const i=Math.pow(2,r.z)*Hp,s=[r.x*Hp,r.y*Hp],l=[];for(const o of n)for(const p of o){const v=[p.x+s[0],p.y+s[1]];mF(v,e,t,i),l.push(v)}return l}function i7(n,e,t,r){const i=Math.pow(2,r.z)*Hp,s=[r.x*Hp,r.y*Hp],l=[];for(const o of n){const p=[];for(const v of o){const x=[v.x+s[0],v.y+s[1]];LC(e,x),p.push(x)}l.push(p)}if(e[2]-e[0]<=i/2){YY(e);for(const o of l)for(const p of o)mF(p,e,t,i)}return l}function qY(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=aB(e.coordinates,r,i),l=r7(n.geometry(),t,r,i);if(!uC(t,r))return!1;for(const o of l)if(!Oy(o,s))return!1}if(e.type==="MultiPolygon"){const s=pF(e.coordinates,r,i),l=r7(n.geometry(),t,r,i);if(!uC(t,r))return!1;for(const o of l)if(!WY(o,s))return!1}return!0}function VY(n,e){const t=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if(e.type==="Polygon"){const s=aB(e.coordinates,r,i),l=i7(n.geometry(),t,r,i);if(!uC(t,r))return!1;for(const o of l)if(!fF(o,s))return!1}if(e.type==="MultiPolygon"){const s=pF(e.coordinates,r,i),l=i7(n.geometry(),t,r,i);if(!uC(t,r))return!1;for(const o of l)if(!GY(o,s))return!1}return!0}class Sg{constructor(e,t){this.type=zo,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(aC(e[1])){const r=e[1];if(r.type==="FeatureCollection"){const i=[];for(const s of r.features){const{type:l,coordinates:o}=s.geometry;l==="Polygon"&&i.push(o),l==="MultiPolygon"&&i.push(...o)}if(i.length){const s={type:"MultiPolygon",coordinates:i};return new Sg(r,s)}}else if(r.type==="Feature"){const i=r.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new Sg(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Sg(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return qY(e,this.geometries);if(e.geometryType()==="LineString")return VY(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class gF{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const s=e-1>>1,l=t[s];if(r(i,l)>=0)break;t[e]=l,e=s}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,s=t[e];for(;e<i;){let l=(e<<1)+1;const o=l+1;if(o<this.length&&r(t[o],t[l])<0&&(l=o),r(t[l],s)>=0)break;t[e]=t[l],e=l}t[e]=s}}function $Y(n,e){if(n.length<=1)return[n];const r=[];let i,s;for(const l of n){const o=HY(l);o!==0&&(l.area=Math.abs(o),s===void 0&&(s=o<0),s===o<0?(i&&r.push(i),i=[l]):i.push(l))}return i&&r.push(i),r}function HY(n){let e=0;for(let t=0,r=n.length,i=r-1,s,l;t<r;i=t++)s=n[t],l=n[i],e+=(l.x-s.x)*(s.y+l.y);return e}const ZY=6378.137,o7=1/298.257223563,s7=o7*(2-o7),a7=Math.PI/180;class lB{constructor(e){const t=a7*ZY*1e3,r=Math.cos(e*a7),i=1/(1-s7*(1-r*r)),s=Math.sqrt(i);this.kx=t*s*r,this.ky=t*s*i*(1-s7)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r=1/0,i,s,l,o;for(let p=0;p<e.length-1;p++){let v=e[p][0],x=e[p][1],B=this.wrap(e[p+1][0]-v)*this.kx,T=(e[p+1][1]-x)*this.ky,P=0;(B!==0||T!==0)&&(P=(this.wrap(t[0]-v)*this.kx*B+(t[1]-x)*this.ky*T)/(B*B+T*T),P>1?(v=e[p+1][0],x=e[p+1][1]):P>0&&(v+=B/this.kx*P,x+=T/this.ky*P)),B=this.wrap(t[0]-v)*this.kx,T=(t[1]-x)*this.ky;const U=B*B+T*T;U<r&&(r=U,i=v,s=x,l=p,o=P)}return{point:[i,s],index:l,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const DE=100,FE=50;function yF(n,e){return e[0]-n[0]}function Nb(n){return n[1]-n[0]+1}function Rm(n,e){return n[1]>=n[0]&&n[1]<e}function LE(n,e){if(n[0]>n[1])return[null,null];const t=Nb(n);if(e){if(t===2)return[n,null];const i=Math.floor(t/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}if(t===1)return[n,null];const r=Math.floor(t/2)-1;return[[n[0],n[0]+r],[n[0]+r+1,n[1]]]}function UE(n,e){if(!Rm(e,n.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let r=e[0];r<=e[1];++r)LC(t,n[r]);return t}function zE(n){const e=[1/0,1/0,-1/0,-1/0];for(const t of n)for(const r of t)LC(e,r);return e}function l7(n){return n[0]!==-1/0&&n[1]!==-1/0&&n[2]!==1/0&&n[3]!==1/0}function uB(n,e,t){if(!l7(n)||!l7(e))return NaN;let r=0,i=0;return n[2]<e[0]&&(r=e[0]-n[2]),n[0]>e[2]&&(r=n[0]-e[2]),n[1]>e[3]&&(i=n[1]-e[3]),n[3]<e[1]&&(i=e[1]-n[3]),t.distance([0,0],[r,i])}function yg(n,e,t){const r=t.pointOnLine(e,n);return t.distance(n,r.point)}function AB(n,e,t,r,i){const s=Math.min(yg(n,[t,r],i),yg(e,[t,r],i)),l=Math.min(yg(t,[n,e],i),yg(r,[n,e],i));return Math.min(s,l)}function XY(n,e,t,r,i){if(!(Rm(e,n.length)&&Rm(r,t.length)))return 1/0;let l=1/0;for(let o=e[0];o<e[1];++o){const p=n[o],v=n[o+1];for(let x=r[0];x<r[1];++x){const B=t[x],T=t[x+1];if(tx(p,v,B,T))return 0;l=Math.min(l,AB(p,v,B,T,i))}}return l}function JY(n,e,t,r,i){if(!(Rm(e,n.length)&&Rm(r,t.length)))return NaN;let l=1/0;for(let o=e[0];o<=e[1];++o)for(let p=r[0];p<=r[1];++p)if(l=Math.min(l,i.distance(n[o],t[p])),l===0)return l;return l}function eq(n,e,t){if(Oy(n,e,!0))return 0;let r=1/0;for(const i of e){const s=i[0],l=i[i.length-1];if(s!==l&&(r=Math.min(r,yg(n,[l,s],t)),r===0))return r;const o=t.pointOnLine(i,n);if(r=Math.min(r,t.distance(n,o.point)),r===0)return r}return r}function tq(n,e,t,r){if(!Rm(e,n.length))return NaN;for(let s=e[0];s<=e[1];++s)if(Oy(n[s],t,!0))return 0;let i=1/0;for(let s=e[0];s<e[1];++s){const l=n[s],o=n[s+1];for(const p of t)for(let v=0,x=p.length,B=x-1;v<x;B=v++){const T=p[B],P=p[v];if(tx(l,o,T,P))return 0;i=Math.min(i,AB(l,o,T,P,r))}}return i}function u7(n,e){for(const t of n)for(const r of t)if(Oy(r,e,!0))return!0;return!1}function nq(n,e,t,r=1/0){const i=zE(n),s=zE(e);if(r!==1/0&&uB(i,s,t)>=r)return r;if(uC(i,s)){if(u7(n,e))return 0}else if(u7(e,n))return 0;let l=1/0;for(const o of n)for(let p=0,v=o.length,x=v-1;p<v;x=p++){const B=o[x],T=o[p];for(const P of e)for(let U=0,j=P.length,N=j-1;U<j;N=U++){const q=P[N],H=P[U];if(tx(B,T,q,H))return 0;l=Math.min(l,AB(B,T,q,H,t))}}return l}function A7(n,e,t,r,i,s){if(!s)return;const l=uB(UE(r,s),i,t);l<e&&n.push([l,s,[0,0]])}function L_(n,e,t,r,i,s,l){if(!s||!l)return;const o=uB(UE(r,s),UE(i,l),t);o<e&&n.push([o,s,l])}function Wb(n,e,t,r,i=1/0){let s=Math.min(r.distance(n[0],t[0][0]),i);if(s===0)return s;const l=new gF([[0,[0,n.length-1],[0,0]]],yF),o=zE(t);for(;l.length>0;){const p=l.pop();if(p[0]>=s)continue;const v=p[1],x=e?FE:DE;if(Nb(v)<=x){if(!Rm(v,n.length))return NaN;if(e){const B=tq(n,v,t,r);if(isNaN(B)||B===0)return B;s=Math.min(s,B)}else for(let B=v[0];B<=v[1];++B){const T=eq(n[B],t,r);if(s=Math.min(s,T),s===0)return 0}}else{const B=LE(v,e);A7(l,s,r,n,o,B[0]),A7(l,s,r,n,o,B[1])}}return s}function Gb(n,e,t,r,i,s=1/0){let l=Math.min(s,i.distance(n[0],t[0]));if(l===0)return l;const o=new gF([[0,[0,n.length-1],[0,t.length-1]]],yF);for(;o.length>0;){const p=o.pop();if(p[0]>=l)continue;const v=p[1],x=p[2],B=e?FE:DE,T=r?FE:DE;if(Nb(v)<=B&&Nb(x)<=T){if(!Rm(v,n.length)&&Rm(x,t.length))return NaN;let P;if(e&&r)P=XY(n,v,t,x,i),l=Math.min(l,P);else if(e&&!r){const U=n.slice(v[0],v[1]+1);for(let j=x[0];j<=x[1];++j)if(P=yg(t[j],U,i),l=Math.min(l,P),l===0)return l}else if(!e&&r){const U=t.slice(x[0],x[1]+1);for(let j=v[0];j<=v[1];++j)if(P=yg(n[j],U,i),l=Math.min(l,P),l===0)return l}else P=JY(n,v,t,x,i),l=Math.min(l,P)}else{const P=LE(v,e),U=LE(x,r);L_(o,l,i,n,t,P[0],U[0]),L_(o,l,i,n,t,P[0],U[1]),L_(o,l,i,n,t,P[1],U[0]),L_(o,l,i,n,t,P[1],U[1])}}return l}function rq(n,e){const t=n.geometry(),r=t.flat().map(l=>sB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const i=new lB(r[0][1]);let s=1/0;for(const l of e){switch(l.type){case"Point":s=Math.min(s,Gb(r,!1,[l.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,Gb(r,!1,l.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,Wb(r,!1,l.coordinates,i,s));break}if(s===0)return s}return s}function iq(n,e){const t=n.geometry(),r=t.flat().map(l=>sB([l.x,l.y],n.canonical));if(t.length===0)return NaN;const i=new lB(r[0][1]);let s=1/0;for(const l of e){switch(l.type){case"Point":s=Math.min(s,Gb(r,!0,[l.coordinates],!1,i,s));break;case"LineString":s=Math.min(s,Gb(r,!0,l.coordinates,!0,i,s));break;case"Polygon":s=Math.min(s,Wb(r,!0,l.coordinates,i,s));break}if(s===0)return s}return s}function oq(n,e){const t=n.geometry();if(t.length===0||t[0].length===0)return NaN;const r=$Y(t).map(l=>l.map(o=>o.map(p=>sB([p.x,p.y],n.canonical)))),i=new lB(r[0][0][0][1]);let s=1/0;for(const l of e)for(const o of r){switch(l.type){case"Point":s=Math.min(s,Wb([l.coordinates],!1,o,i,s));break;case"LineString":s=Math.min(s,Wb(l.coordinates,!0,o,i,s));break;case"Polygon":s=Math.min(s,nq(o,l.coordinates,i,s));break}if(s===0)return s}return s}function U3(n){return n.type==="MultiPolygon"?n.coordinates.map(e=>({type:"Polygon",coordinates:e})):n.type==="MultiLineString"?n.coordinates.map(e=>({type:"LineString",coordinates:e})):n.type==="MultiPoint"?n.coordinates.map(e=>({type:"Point",coordinates:e})):[n]}class Eg{constructor(e,t){this.type=Pr,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(aC(e[1])){const r=e[1];if(r.type==="FeatureCollection")return new Eg(r,r.features.map(i=>U3(i.geometry)).flat());if(r.type==="Feature")return new Eg(r,U3(r.geometry));if("type"in r&&"coordinates"in r)return new Eg(r,U3(r))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return rq(e,this.geometries);if(e.geometryType()==="LineString")return iq(e,this.geometries);if(e.geometryType()==="Polygon")return oq(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const cB={"==":OY,"!=":IY,">":TY,"<":kY,">=":KY,"<=":PY,array:Ap,at:X6,boolean:Ap,case:tB,coalesce:lC,collator:ex,format:rB,image:iB,in:J6,"index-of":zb,interpolate:Of,"interpolate-hcl":Of,"interpolate-lab":Of,length:oB,let:H2,literal:my,match:eB,number:Ap,"number-format":nB,object:Ap,slice:jb,step:J2,string:Ap,"to-boolean":_0,"to-color":_0,"to-number":_0,"to-string":_0,var:Z2,within:Sg,distance:Eg};class fp{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=fp.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(i)?i[0]:i.type,l=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=l.filter(([v])=>!Array.isArray(v)||v.length===e.length-1);let p=null;for(const[v,x]of o){p=new $2(t.registry,Qb,t.path,null,t.scope);const B=[];let T=!1;for(let P=1;P<e.length;P++){const U=e[P],j=Array.isArray(v)?v[P-1]:v.type,N=p.parse(U,1+B.length,j);if(!N){T=!0;break}B.push(N)}if(!T){if(Array.isArray(v)&&v.length!==B.length){p.error(`Expected ${v.length} arguments, but found ${B.length} instead.`);continue}for(let P=0;P<B.length;P++){const U=Array.isArray(v)?v[P]:v.type,j=B[P];p.concat(P+1).checkSubtype(U,j.type)}if(p.errors.length===0)return new fp(r,s,x,B)}}if(o.length===1)t.errors.push(...p.errors);else{const x=(o.length?o:l).map(([T])=>aq(T)).join(" | "),B=[];for(let T=1;T<e.length;T++){const P=t.parse(e[T],1+B.length);if(!P)return null;B.push(iu(P.type))}t.error(`Expected arguments of type ${x}, but found (${B.join(", ")}) instead.`)}return null}static register(e,t){fp.definitions=t;for(const r in t)e[r]=fp}}function c7(n,[e,t,r,i]){e=e.evaluate(n),t=t.evaluate(n),r=r.evaluate(n);const s=i?i.evaluate(n):1,l=AF(e,t,r,s);if(l)throw new pA(l);return new Ol(e/255,t/255,r/255,s,!1)}function d7(n,e){return n in e}function z3(n,e){const t=e[n];return typeof t>"u"?null:t}function sq(n,e,t,r){for(;t<=r;){const i=t+r>>1;if(e[i]===n)return!0;e[i]>n?r=i-1:t=i+1}return!1}function rg(n){return{type:n}}fp.register(cB,{error:[JQ,[Jo],(n,[e])=>{throw new pA(e.evaluate(n))}],typeof:[Jo,[jo],(n,[e])=>iu(ac(e.evaluate(n)))],"to-rgba":[qh(Pr,4),[Vp],(n,[e])=>{const[t,r,i,s]=e.evaluate(n).rgb;return[t*255,r*255,i*255,s]}],rgb:[Vp,[Pr,Pr,Pr],c7],rgba:[Vp,[Pr,Pr,Pr,Pr],c7],has:{type:zo,overloads:[[[Jo],(n,[e])=>d7(e.evaluate(n),n.properties())],[[Jo,ry],(n,[e,t])=>d7(e.evaluate(n),t.evaluate(n))]]},get:{type:jo,overloads:[[[Jo],(n,[e])=>z3(e.evaluate(n),n.properties())],[[Jo,ry],(n,[e,t])=>z3(e.evaluate(n),t.evaluate(n))]]},"feature-state":[jo,[Jo],(n,[e])=>z3(e.evaluate(n),n.featureState||{})],properties:[ry,[],n=>n.properties()],"geometry-type":[Jo,[],n=>n.geometryType()],id:[jo,[],n=>n.id()],zoom:[Pr,[],n=>n.globals.zoom],"heatmap-density":[Pr,[],n=>n.globals.heatmapDensity||0],"line-progress":[Pr,[],n=>n.globals.lineProgress||0],accumulated:[jo,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Pr,rg(Pr),(n,e)=>{let t=0;for(const r of e)t+=r.evaluate(n);return t}],"*":[Pr,rg(Pr),(n,e)=>{let t=1;for(const r of e)t*=r.evaluate(n);return t}],"-":{type:Pr,overloads:[[[Pr,Pr],(n,[e,t])=>e.evaluate(n)-t.evaluate(n)],[[Pr],(n,[e])=>-e.evaluate(n)]]},"/":[Pr,[Pr,Pr],(n,[e,t])=>e.evaluate(n)/t.evaluate(n)],"%":[Pr,[Pr,Pr],(n,[e,t])=>e.evaluate(n)%t.evaluate(n)],ln2:[Pr,[],()=>Math.LN2],pi:[Pr,[],()=>Math.PI],e:[Pr,[],()=>Math.E],"^":[Pr,[Pr,Pr],(n,[e,t])=>Math.pow(e.evaluate(n),t.evaluate(n))],sqrt:[Pr,[Pr],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Pr,[Pr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Pr,[Pr],(n,[e])=>Math.log(e.evaluate(n))],log2:[Pr,[Pr],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Pr,[Pr],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Pr,[Pr],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Pr,[Pr],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Pr,[Pr],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Pr,[Pr],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Pr,[Pr],(n,[e])=>Math.atan(e.evaluate(n))],min:[Pr,rg(Pr),(n,e)=>Math.min(...e.map(t=>t.evaluate(n)))],max:[Pr,rg(Pr),(n,e)=>Math.max(...e.map(t=>t.evaluate(n)))],abs:[Pr,[Pr],(n,[e])=>Math.abs(e.evaluate(n))],round:[Pr,[Pr],(n,[e])=>{const t=e.evaluate(n);return t<0?-Math.round(-t):Math.round(t)}],floor:[Pr,[Pr],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Pr,[Pr],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[zo,[Jo,jo],(n,[e,t])=>n.properties()[e.value]===t.value],"filter-id-==":[zo,[jo],(n,[e])=>n.id()===e.value],"filter-type-==":[zo,[Jo],(n,[e])=>n.geometryType()===e.value],"filter-<":[zo,[Jo,jo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<i}],"filter-id-<":[zo,[jo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<r}],"filter->":[zo,[Jo,jo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>i}],"filter-id->":[zo,[jo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>r}],"filter-<=":[zo,[Jo,jo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[zo,[jo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t<=r}],"filter->=":[zo,[Jo,jo],(n,[e,t])=>{const r=n.properties()[e.value],i=t.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[zo,[jo],(n,[e])=>{const t=n.id(),r=e.value;return typeof t==typeof r&&t>=r}],"filter-has":[zo,[jo],(n,[e])=>e.value in n.properties()],"filter-has-id":[zo,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[zo,[qh(Jo)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[zo,[qh(jo)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[zo,[Jo,qh(jo)],(n,[e,t])=>t.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[zo,[Jo,qh(jo)],(n,[e,t])=>sq(n.properties()[e.value],t.value,0,t.value.length-1)],all:{type:zo,overloads:[[[zo,zo],(n,[e,t])=>e.evaluate(n)&&t.evaluate(n)],[rg(zo),(n,e)=>{for(const t of e)if(!t.evaluate(n))return!1;return!0}]]},any:{type:zo,overloads:[[[zo,zo],(n,[e,t])=>e.evaluate(n)||t.evaluate(n)],[rg(zo),(n,e)=>{for(const t of e)if(t.evaluate(n))return!0;return!1}]]},"!":[zo,[zo],(n,[e])=>!e.evaluate(n)],"is-supported-script":[zo,[Jo],(n,[e])=>{const t=n.globals&&n.globals.isSupportedScript;return t?t(e.evaluate(n)):!0}],upcase:[Jo,[Jo],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[Jo,[Jo],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[Jo,rg(jo),(n,e)=>e.map(t=>Yv(t.evaluate(n))).join("")],"resolved-locale":[Jo,[Q2],(n,[e])=>e.evaluate(n).resolvedLocale()]});function aq(n){return Array.isArray(n)?`(${n.map(iu).join(", ")})`:`(${iu(n.type)}...)`}function Qb(n){if(n instanceof Z2)return Qb(n.boundExpression);if(n instanceof fp&&n.name==="error")return!1;if(n instanceof ex)return!1;if(n instanceof Sg)return!1;if(n instanceof Eg)return!1;const e=n instanceof _0||n instanceof Ap;let t=!0;return n.eachChild(r=>{e?t=t&&Qb(r):t=t&&r instanceof my}),t?nx(n)&&rx(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function nx(n){if(n instanceof fp){if(n.name==="get"&&n.args.length===1)return!1;if(n.name==="feature-state")return!1;if(n.name==="has"&&n.args.length===1)return!1;if(n.name==="properties"||n.name==="geometry-type"||n.name==="id")return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Sg||n instanceof Eg)return!1;let e=!0;return n.eachChild(t=>{e&&!nx(t)&&(e=!1)}),e}function AC(n){if(n instanceof fp&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(t=>{e&&!AC(t)&&(e=!1)}),e}function rx(n,e){if(n instanceof fp&&e.indexOf(n.name)>=0)return!1;let t=!0;return n.eachChild(r=>{t&&!rx(r,e)&&(t=!1)}),t}function jE(n){return{result:"success",value:n}}function N1(n){return{result:"error",value:n}}function Yb(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function vF(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function dB(n){return!!n.expression&&n.expression.interpolated}function Ds(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function Iy(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function lq(n){return n}function hB(n,e){const t=e.type==="color",r=n.stops&&typeof n.stops[0][0]=="object",i=r||n.property!==void 0,s=r||!i,l=n.type||(dB(e)?"exponential":"interval");if(t||e.type==="padding"){const x=t?Ol.parse:Qd.parse;n=py({},n),n.stops&&(n.stops=n.stops.map(B=>[B[0],x(B[1])])),n.default?n.default=x(n.default):n.default=x(e.default)}if(n.colorSpace&&!uY(n.colorSpace))throw new Error(`Unknown color space: "${n.colorSpace}"`);let o,p,v;if(l==="exponential")o=h7;else if(l==="interval")o=Aq;else if(l==="categorical"){o=uq,p=Object.create(null);for(const x of n.stops)p[x[0]]=x[1];v=typeof n.stops[0][0]}else if(l==="identity")o=cq;else throw new Error(`Unknown function type "${l}"`);if(r){const x={},B=[];for(let U=0;U<n.stops.length;U++){const j=n.stops[U],N=j[0].zoom;x[N]===void 0&&(x[N]={zoom:N,type:n.type,property:n.property,default:n.default,stops:[]},B.push(N)),x[N].stops.push([j[0].value,j[1]])}const T=[];for(const U of B)T.push([x[U].zoom,hB(x[U],e)]);const P={name:"linear"};return{kind:"composite",interpolationType:P,interpolationFactor:Of.interpolationFactor.bind(void 0,P),zoomStops:T.map(U=>U[0]),evaluate({zoom:U},j){return h7({stops:T,base:n.base},e,U).evaluate(U,j)}}}else if(s){const x=l==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:x,interpolationFactor:Of.interpolationFactor.bind(void 0,x),zoomStops:n.stops.map(B=>B[0]),evaluate:({zoom:B})=>o(n,e,B,p,v)}}else return{kind:"source",evaluate(x,B){const T=B&&B.properties?B.properties[n.property]:void 0;return T===void 0?UC(n.default,e.default):o(n,e,T,p,v)}}}function UC(n,e,t){if(n!==void 0)return n;if(e!==void 0)return e;if(t!==void 0)return t}function uq(n,e,t,r,i){const s=typeof t===i?r[t]:void 0;return UC(s,n.default,e.default)}function Aq(n,e,t){if(Ds(t)!=="number")return UC(n.default,e.default);const r=n.stops.length;if(r===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[r-1][0])return n.stops[r-1][1];const i=X2(n.stops.map(s=>s[0]),t);return n.stops[i][1]}function h7(n,e,t){const r=n.base!==void 0?n.base:1;if(Ds(t)!=="number")return UC(n.default,e.default);const i=n.stops.length;if(i===1||t<=n.stops[0][0])return n.stops[0][1];if(t>=n.stops[i-1][0])return n.stops[i-1][1];const s=X2(n.stops.map(x=>x[0]),t),l=dq(t,r,n.stops[s][0],n.stops[s+1][0]),o=n.stops[s][1],p=n.stops[s+1][1],v=gY[e.type]||lq;return typeof o.evaluate=="function"?{evaluate(...x){const B=o.evaluate.apply(void 0,x),T=p.evaluate.apply(void 0,x);if(!(B===void 0||T===void 0))return v(B,T,l,n.colorSpace)}}:v(o,p,l,n.colorSpace)}function cq(n,e,t){switch(e.type){case"color":t=Ol.parse(t);break;case"formatted":t=$p.fromString(t.toString());break;case"resolvedImage":t=Um.fromString(t.toString());break;case"padding":t=Qd.parse(t);break;default:Ds(t)!==e.type&&(e.type!=="enum"||!e.values[t])&&(t=void 0)}return UC(t,n.default,e.default)}function dq(n,e,t,r){const i=r-t,s=n-t;return i===0?0:e===1?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}class CF{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new cF,this._defaultValue=t?mq(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,s,l){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=l||null;try{const o=this.expression.evaluate(this._evaluator);if(o==null||typeof o=="number"&&o!==o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new pA(`Expected value to be one of ${Object.keys(this._enumValues).map(p=>JSON.stringify(p)).join(", ")}, but found ${JSON.stringify(o)} instead.`);return o}catch(o){return this._warningHistory[o.message]||(this._warningHistory[o.message]=!0,typeof console<"u"&&console.warn(o.message)),this._defaultValue}}}function ky(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in cB}function ix(n,e){const t=new $2(cB,Qb,[],e?pq(e):void 0),r=t.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?jE(new CF(r,e)):N1(t.errors)}class NE{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!AC(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,l)}evaluate(e,t,r,i,s,l){return this._styleExpression.evaluate(e,t,r,i,s,l)}}class WE{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!AC(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,s,l){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,s,l)}evaluate(e,t,r,i,s,l){return this._styleExpression.evaluate(e,t,r,i,s,l)}interpolationFactor(e,t,r){return this.interpolationType?Of.interpolationFactor(this.interpolationType,e,t,r):0}}function hq(n){return n._styleExpression!==void 0}function ox(n,e){const t=ix(n,e);if(t.result==="error")return t;const r=t.value.expression,i=nx(r);if(!i&&!Yb(e))return N1([new Np("","data expressions not supported")]);const s=rx(r,["zoom"]);if(!s&&!vF(e))return N1([new Np("","zoom expressions not supported")]);const l=bb(r);if(!l&&!s)return N1([new Np("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(l instanceof Np)return N1([l]);if(l instanceof Of&&!dB(e))return N1([new Np("",'"interpolate" expressions cannot be used with this property')]);if(!l)return jE(i?new NE("constant",t.value):new NE("source",t.value));const o=l instanceof Of?l.interpolation:void 0;return jE(i?new WE("camera",t.value,l.labels,o):new WE("composite",t.value,l.labels,o))}class sx{constructor(e,t){this._parameters=e,this._specification=t,py(this,hB(this._parameters,this._specification))}static deserialize(e){return new sx(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function fq(n,e){if(Iy(n))return new sx(n,e);if(ky(n)){const t=ox(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value}else{let t=n;return e.type==="color"&&typeof n=="string"?t=Ol.parse(n):e.type==="padding"&&(typeof n=="number"||Array.isArray(n))?t=Qd.parse(n):e.type==="variableAnchorOffsetCollection"&&Array.isArray(n)?t=Bf.parse(n):e.type==="projectionDefinition"&&typeof n=="string"&&(t=Mf.parse(n)),{kind:"constant",evaluate:()=>t}}}function bb(n){let e=null;if(n instanceof H2)e=bb(n.result);else if(n instanceof lC){for(const t of n.args)if(e=bb(t),e)break}else(n instanceof J2||n instanceof Of)&&n.input instanceof fp&&n.input.name==="zoom"&&(e=n);return e instanceof Np||n.eachChild(t=>{const r=bb(t);r instanceof Np?e=r:!e&&r?e=new Np("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Np("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function pq(n){const e={color:Vp,string:Jo,number:Pr,enum:Jo,boolean:zo,formatted:Y2,padding:q2,projectionDefinition:G2,resolvedImage:FC,variableAnchorOffsetCollection:V2};return n.type==="array"?qh(e[n.value]||jo,n.length):e[n.type]}function mq(n){return n.type==="color"&&Iy(n.default)?new Ol(0,0,0,0):n.type==="color"?Ol.parse(n.default)||null:n.type==="padding"?Qd.parse(n.default)||null:n.type==="variableAnchorOffsetCollection"?Bf.parse(n.default)||null:n.type==="projectionDefinition"?Mf.parse(n.default)||null:n.default===void 0?null:n.default}function zC(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!zC(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const gq={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function yq(n){if(n==null)return{filter:()=>!0,needGeometry:!1};zC(n)||(n=qb(n));const e=ix(n,gq);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=_F(n);return{filter:(r,i,s)=>e.value.evaluate(r,i,{},s),needGeometry:t}}}function vq(n,e){return n<e?-1:n>e?1:0}function _F(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(_F(n[e]))return!0;return!1}function qb(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?j3(n[1],n[2],"=="):e==="!="?U_(j3(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?j3(n[1],n[2],e):e==="any"?Cq(n.slice(1)):e==="all"?["all"].concat(n.slice(1).map(qb)):e==="none"?["all"].concat(n.slice(1).map(qb).map(U_)):e==="in"?f7(n[1],n.slice(2)):e==="!in"?U_(f7(n[1],n.slice(2))):e==="has"?p7(n[1]):e==="!has"?U_(p7(n[1])):!0}function j3(n,e,t){switch(n){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,n,e]}}function Cq(n){return["any"].concat(n.map(qb))}function f7(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",n,["literal",e.sort(vq)]]:["filter-in-small",n,["literal",e]]}}function p7(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function U_(n){return["!",n]}function qv(n,e={}){if(zC(n))return n;if(!n)return!0;const t=n,r=t[0];if(n.length<=1)return r!=="any";switch(r){case"==":case"!=":case"<":case">":case"<=":case">=":{const[,i,s]=n;return bq(i,s,r,e)}case"any":{const[,...i]=t;return["any",...i.map(l=>{const o={},p=qv(l,o),v=_q(o);return v===!0?p:["case",v,p,!1]})]}case"all":{const[,...i]=t,s=i.map(l=>qv(l,e));return s.length>1?["all",...s]:s[0]}case"none":{const[,...i]=t;return["!",qv(["any",...i],{})]}case"in":{const[,i,...s]=t;return m7(i,s)}case"!in":{const[,i,...s]=t;return m7(i,s,!0)}case"has":return g7(t[1]);case"!has":return["!",g7(t[1])];default:return!0}}function _q(n){const e=[];for(const t in n){const r=t==="$id"?["id"]:["get",t];e.push(["==",["typeof",r],n[t]])}return e.length===0?!0:e.length===1?e[0]:["all",...e]}function bq(n,e,t,r){let i;if(n==="$type")return[t,["geometry-type"],e];if(n==="$id"?i=["id"]:i=["get",n],r&&e!==null){const s=typeof e;r[n]=s}return t==="=="&&n!=="$id"&&e===null?["all",["has",n],["==",i,null]]:t==="!="&&n!=="$id"&&e===null?["any",["!",["has",n]],["!=",i,null]]:[t,i,e]}function m7(n,e,t=!1){if(e.length===0)return t;let r;n==="$type"?r=["geometry-type"]:n==="$id"?r=["id"]:r=["get",n];let i=!0;const s=typeof e[0];for(const l of e)if(typeof l!==s){i=!1;break}if(i&&(s==="string"||s==="number")){const l=e.sort().filter((o,p)=>p===0||e[p-1]!==o);return["match",r,l,!t,t]}return t?["all",...e.map(l=>["!=",r,l])]:["any",...e.map(l=>["==",r,l])]}function g7(n){return n==="$type"?!0:n==="$id"?["!=",["id"],null]:["has",n]}function cC(n){return typeof n=="object"?["literal",n]:n}function fB(n,e){let t=n.stops;if(!t)return xq(n,e);const r=t&&typeof t[0][0]=="object",i=r||n.property!==void 0,s=r||!i;return t=t.map(l=>!i&&e.tokens&&typeof l[1]=="string"?[l[0],bF(l[1])]:[l[0],cC(l[1])]),r?Mq(n,e,t):s?Sq(n,e,t):GE(n,e,t)}function xq(n,e){const t=["get",n.property];if(n.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,n.default];{const r=[e.type==="color"?"to-color":e.type,t,cC(n.default)];return e.type==="array"&&r.splice(1,0,e.value,e.length||null),r}}function pB(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Mq(n,e,t){const r={},i={},s=[];for(let o=0;o<t.length;o++){const p=t[o],v=p[0].zoom;r[v]===void 0&&(r[v]={zoom:v,type:n.type,property:n.property,default:n.default},i[v]=[],s.push(v)),i[v].push([p[0].value,p[1]])}if(gB({},e)==="exponential"){const o=[pB(n),["linear"],["zoom"]];for(const p of s){const v=GE(r[p],e,i[p]);oy(o,p,v,!1)}return o}else{const o=["step",["zoom"]];for(const p of s){const v=GE(r[p],e,i[p]);oy(o,p,v,!0)}return mB(o),o}}function wq(n,e){if(n!==void 0)return n;if(e!==void 0)return e}function y7(n,e){const t=cC(wq(n.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function GE(n,e,t){const r=gB(n,e),i=["get",n.property];if(r==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const l of t)s.push(["==",i,l[0]],l[1]);return s.push(y7(n,e)),s}else if(r==="categorical"){const s=["match",i];for(const l of t)oy(s,l[0],l[1],!1);return s.push(y7(n,e)),s}else if(r==="interval"){const s=["step",["number",i]];for(const l of t)oy(s,l[0],l[1],!0);return mB(s),n.default===void 0?s:["case",["==",["typeof",i],"number"],s,cC(n.default)]}else if(r==="exponential"){const s=n.base!==void 0?n.base:1,l=[pB(n),s===1?["linear"]:["exponential",s],["number",i]];for(const o of t)oy(l,o[0],o[1],!1);return n.default===void 0?l:["case",["==",["typeof",i],"number"],l,cC(n.default)]}else throw new Error(`Unknown property function type ${r}`)}function Sq(n,e,t,r=["zoom"]){const i=gB(n,e);let s,l=!1;if(i==="interval")s=["step",r],l=!0;else if(i==="exponential"){const o=n.base!==void 0?n.base:1;s=[pB(n),o===1?["linear"]:["exponential",o],r]}else throw new Error(`Unknown zoom function type "${i}"`);for(const o of t)oy(s,o[0],o[1],l);return mB(s),s}function mB(n){n[0]==="step"&&n.length===3&&(n.push(0),n.push(n[3]))}function oy(n,e,t,r){n.length>3&&e===n[n.length-2]||(r&&n.length===2||n.push(e),n.push(t))}function gB(n,e){return n.type?n.type:e.expression.interpolated?"exponential":"interval"}function bF(n){const e=["concat"],t=/{([^{}]+)}/g;let r=0;for(let i=t.exec(n);i!==null;i=t.exec(n)){const s=n.slice(r,t.lastIndex-i[0].length);r=t.lastIndex,s.length>0&&e.push(s),e.push(["get",i[1]])}if(e.length===1)return n;if(r<n.length)e.push(n.slice(r));else if(e.length===2)return["to-string",e[1]];return e}function Eq(n){for(let e=0;e<ks.layout.length;e++)for(const t in ks[ks.layout[e]])if(t===n)return ks[ks.layout[e]][t];for(let e=0;e<ks.paint.length;e++)for(const t in ks[ks.paint[e]])if(t===n)return ks[ks.paint[e]][t];return null}function Bq(n,e){for(const t in n.sources)e(n.sources[t])}function Vv(n,e){for(const t of n.layers)e(t)}function yB(n,e,t){function r(i,s){const l=i[s];l&&Object.keys(l).forEach(o=>{t({path:[i.id,s,o],key:o,value:l[o],reference:Eq(o),set(p){l[o]=p}})})}Vv(n,i=>{e.paint&&r(i,"paint"),e.layout&&r(i,"layout")})}function xF(n){const e=n.key,t=n.value;return t?[new Er(e,t,"constants have been deprecated as of v8")]:[]}function ju(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function kg(n){if(Array.isArray(n))return n.map(kg);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const t in n)e[t]=kg(n[t]);return e}return ju(n)}function wf(n){const e=n.key,t=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},s=n.style,l=n.styleSpec,o=n.validateSpec;let p=[];const v=Ds(t);if(v!=="object")return[new Er(e,t,`object expected, ${v} found`)];for(const x in t){const B=x.split(".")[0],T=r[B]||r["*"];let P;if(i[B])P=i[B];else if(r[B])P=o;else if(i["*"])P=i["*"];else if(r["*"])P=o;else{p.push(new Er(e,t[x],`unknown property "${x}"`));continue}p=p.concat(P({key:(e&&`${e}.`)+x,value:t[x],valueSpec:T,style:s,styleSpec:l,object:t,objectKey:x,validateSpec:o},t))}for(const x in r)i[x]||r[x].required&&r[x].default===void 0&&t[x]===void 0&&p.push(new Er(e,t,`missing required property "${x}"`));return p}function vB(n){const e=n.value,t=n.valueSpec,r=n.validateSpec,i=n.style,s=n.styleSpec,l=n.key,o=n.arrayElementValidator||r;if(Ds(e)!=="array")return[new Er(l,e,`array expected, ${Ds(e)} found`)];if(t.length&&e.length!==t.length)return[new Er(l,e,`array length ${t.length} expected, length ${e.length} found`)];if(t["min-length"]&&e.length<t["min-length"])return[new Er(l,e,`array length at least ${t["min-length"]} expected, length ${e.length} found`)];let p={type:t.value,values:t.values};s.$version<7&&(p.function=t.function),Ds(t.value)==="object"&&(p=t.value);let v=[];for(let x=0;x<e.length;x++)v=v.concat(o({array:e,arrayIndex:x,value:e[x],valueSpec:p,validateSpec:n.validateSpec,style:i,styleSpec:s,key:`${l}[${x}]`}));return v}function CB(n){const e=n.key,t=n.value,r=n.valueSpec;let i=Ds(t);return i==="number"&&t!==t&&(i="NaN"),i!=="number"?[new Er(e,t,`number expected, ${i} found`)]:"minimum"in r&&t<r.minimum?[new Er(e,t,`${t} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&t>r.maximum?[new Er(e,t,`${t} is greater than the maximum value ${r.maximum}`)]:[]}function MF(n){const e=n.valueSpec,t=ju(n.value.type);let r,i={},s,l;const o=t!=="categorical"&&n.value.property===void 0,p=!o,v=Ds(n.value.stops)==="array"&&Ds(n.value.stops[0])==="array"&&Ds(n.value.stops[0][0])==="object",x=wf({key:n.key,value:n.value,valueSpec:n.styleSpec.function,validateSpec:n.validateSpec,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:B,default:U}});return t==="identity"&&o&&x.push(new Er(n.key,n.value,'missing required property "property"')),t!=="identity"&&!n.value.stops&&x.push(new Er(n.key,n.value,'missing required property "stops"')),t==="exponential"&&n.valueSpec.expression&&!dB(n.valueSpec)&&x.push(new Er(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(p&&!Yb(n.valueSpec)?x.push(new Er(n.key,n.value,"property functions not supported")):o&&!vF(n.valueSpec)&&x.push(new Er(n.key,n.value,"zoom functions not supported"))),(t==="categorical"||v)&&n.value.property===void 0&&x.push(new Er(n.key,n.value,'"property" property is required')),x;function B(j){if(t==="identity")return[new Er(j.key,j.value,'identity function may not have a "stops" property')];let N=[];const q=j.value;return N=N.concat(vB({key:j.key,value:q,valueSpec:j.valueSpec,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:T})),Ds(q)==="array"&&q.length===0&&N.push(new Er(j.key,q,"array must have at least one stop")),N}function T(j){let N=[];const q=j.value,H=j.key;if(Ds(q)!=="array")return[new Er(H,q,`array expected, ${Ds(q)} found`)];if(q.length!==2)return[new Er(H,q,`array length 2 expected, length ${q.length} found`)];if(v){if(Ds(q[0])!=="object")return[new Er(H,q,`object expected, ${Ds(q[0])} found`)];if(q[0].zoom===void 0)return[new Er(H,q,"object stop key must have zoom")];if(q[0].value===void 0)return[new Er(H,q,"object stop key must have value")];if(l&&l>ju(q[0].zoom))return[new Er(H,q[0].zoom,"stop zoom values must appear in ascending order")];ju(q[0].zoom)!==l&&(l=ju(q[0].zoom),s=void 0,i={}),N=N.concat(wf({key:`${H}[0]`,value:q[0],valueSpec:{zoom:{}},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:CB,value:P}}))}else N=N.concat(P({key:`${H}[0]`,value:q[0],valueSpec:{},validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec},q));return ky(kg(q[1]))?N.concat([new Er(`${H}[1]`,q[1],"expressions are not allowed in function stops.")]):N.concat(j.validateSpec({key:`${H}[1]`,value:q[1],valueSpec:e,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec}))}function P(j,N){const q=Ds(j.value),H=ju(j.value),oe=j.value!==null?j.value:N;if(!r)r=q;else if(q!==r)return[new Er(j.key,oe,`${q} stop domain type must match previous stop domain type ${r}`)];if(q!=="number"&&q!=="string"&&q!=="boolean")return[new Er(j.key,oe,"stop domain value must be a number, string, or boolean")];if(q!=="number"&&t!=="categorical"){let te=`number expected, ${q} found`;return Yb(e)&&t===void 0&&(te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Er(j.key,oe,te)]}return t==="categorical"&&q==="number"&&(!isFinite(H)||Math.floor(H)!==H)?[new Er(j.key,oe,`integer expected, found ${H}`)]:t!=="categorical"&&q==="number"&&s!==void 0&&H<s?[new Er(j.key,oe,"stop domain values must appear in ascending order")]:(s=H,t==="categorical"&&H in i?[new Er(j.key,oe,"stop domain values must be unique")]:(i[H]=!0,[]))}function U(j){return j.validateSpec({key:j.key,value:j.value,valueSpec:e,validateSpec:j.validateSpec,style:j.style,styleSpec:j.styleSpec})}}function gy(n){const e=(n.expressionContext==="property"?ox:ix)(kg(n.value),n.valueSpec);if(e.result==="error")return e.value.map(r=>new Er(`${n.key}${r.key}`,n.value,r.message));const t=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!t.outputDefined())return[new Er(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!AC(t))return[new Er(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!AC(t))return[new Er(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!rx(t,["zoom","feature-state"]))return[new Er(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!nx(t))return[new Er(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Oq(n){const e=n.value,t=n.key,r=Ds(e);return r!=="boolean"?[new Er(t,e,`boolean expected, ${r} found`)]:[]}function Iq(n){const e=n.key,t=n.value,r=Ds(t);return r!=="string"?[new Er(e,t,`color expected, ${r} found`)]:Ol.parse(String(t))?[]:[new Er(e,t,`color expected, "${t}" found`)]}function dC(n){const e=n.key,t=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?r.values.indexOf(ju(t))===-1&&i.push(new Er(e,t,`expected one of [${r.values.join(", ")}], ${JSON.stringify(t)} found`)):Object.keys(r.values).indexOf(ju(t))===-1&&i.push(new Er(e,t,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(t)} found`)),i}function _B(n){return zC(kg(n.value))?gy(py({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):wF(n)}function wF(n){const e=n.value,t=n.key;if(Ds(e)!=="array")return[new Er(t,e,`array expected, ${Ds(e)} found`)];const r=n.styleSpec;let i,s=[];if(e.length<1)return[new Er(t,e,"filter array must have at least 1 element")];switch(s=s.concat(dC({key:`${t}[0]`,value:e[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),ju(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&ju(e[1])==="$type"&&s.push(new Er(t,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&s.push(new Er(t,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=Ds(e[1]),i!=="string"&&s.push(new Er(`${t}[1]`,e[1],`string expected, ${i} found`)));for(let l=2;l<e.length;l++)i=Ds(e[l]),ju(e[1])==="$type"?s=s.concat(dC({key:`${t}[${l}]`,value:e[l],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&s.push(new Er(`${t}[${l}]`,e[l],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let l=1;l<e.length;l++)s=s.concat(wF({key:`${t}[${l}]`,value:e[l],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=Ds(e[1]),e.length!==2?s.push(new Er(t,e,`filter array for "${e[0]}" operator must have 2 elements`)):i!=="string"&&s.push(new Er(`${t}[1]`,e[1],`string expected, ${i} found`));break}return s}function SF(n,e){const t=n.key,r=n.validateSpec,i=n.style,s=n.styleSpec,l=n.value,o=n.objectKey,p=s[`${e}_${n.layerType}`];if(!p)return[];const v=o.match(/^(.*)-transition$/);if(e==="paint"&&v&&p[v[1]]&&p[v[1]].transition)return r({key:t,value:l,valueSpec:s.transition,style:i,styleSpec:s});const x=n.valueSpec||p[o];if(!x)return[new Er(t,l,`unknown property "${o}"`)];let B;if(Ds(l)==="string"&&Yb(x)&&!x.tokens&&(B=/^{([^}]+)}$/.exec(l)))return[new Er(t,l,`"${o}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const T=[];return n.layerType==="symbol"&&(o==="text-field"&&i&&!i.glyphs&&T.push(new Er(t,l,'use of "text-field" requires a style "glyphs" property')),o==="text-font"&&Iy(kg(l))&&ju(l.type)==="identity"&&T.push(new Er(t,l,'"text-font" does not support identity functions'))),T.concat(r({key:n.key,value:l,valueSpec:x,style:i,styleSpec:s,expressionContext:"property",propertyType:e,propertyKey:o}))}function EF(n){return SF(n,"paint")}function BF(n){return SF(n,"layout")}function OF(n){let e=[];const t=n.value,r=n.key,i=n.style,s=n.styleSpec;!t.type&&!t.ref&&e.push(new Er(r,t,'either "type" or "ref" is required'));let l=ju(t.type);const o=ju(t.ref);if(t.id){const p=ju(t.id);for(let v=0;v<n.arrayIndex;v++){const x=i.layers[v];ju(x.id)===p&&e.push(new Er(r,t.id,`duplicate layer id "${t.id}", previously used at line ${x.id.__line__}`))}}if("ref"in t){["type","source","source-layer","filter","layout"].forEach(v=>{v in t&&e.push(new Er(r,t[v],`"${v}" is prohibited for ref layers`))});let p;i.layers.forEach(v=>{ju(v.id)===o&&(p=v)}),p?p.ref?e.push(new Er(r,t.ref,"ref cannot reference another ref layer")):l=ju(p.type):e.push(new Er(r,t.ref,`ref layer "${o}" not found`))}else if(l!=="background")if(!t.source)e.push(new Er(r,t,'missing required property "source"'));else{const p=i.sources&&i.sources[t.source],v=p&&ju(p.type);p?v==="vector"&&l==="raster"?e.push(new Er(r,t.source,`layer "${t.id}" requires a raster source`)):v!=="raster-dem"&&l==="hillshade"?e.push(new Er(r,t.source,`layer "${t.id}" requires a raster-dem source`)):v==="raster"&&l!=="raster"?e.push(new Er(r,t.source,`layer "${t.id}" requires a vector source`)):v==="vector"&&!t["source-layer"]?e.push(new Er(r,t,`layer "${t.id}" must specify a "source-layer"`)):v==="raster-dem"&&l!=="hillshade"?e.push(new Er(r,t.source,"raster-dem source can only be used with layer type 'hillshade'.")):l==="line"&&t.paint&&t.paint["line-gradient"]&&(v!=="geojson"||!p.lineMetrics)&&e.push(new Er(r,t,`layer "${t.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Er(r,t.source,`source "${t.source}" not found`))}return e=e.concat(wf({key:r,value:t,valueSpec:s.layer,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,objectElementValidators:{"*"(){return[]},type(){return n.validateSpec({key:`${r}.type`,value:t.type,valueSpec:s.layer.type,style:n.style,styleSpec:n.styleSpec,validateSpec:n.validateSpec,object:t,objectKey:"type"})},filter:_B,layout(p){return wf({layer:t,key:p.key,value:p.value,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*"(v){return BF(py({layerType:l},v))}}})},paint(p){return wf({layer:t,key:p.key,value:p.value,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*"(v){return EF(py({layerType:l},v))}}})}}})),e}function Tg(n){const e=n.value,t=n.key,r=Ds(e);return r!=="string"?[new Er(t,e,`string expected, ${r} found`)]:[]}function kq(n){var e;const t=(e=n.sourceName)!==null&&e!==void 0?e:"",r=n.value,i=n.styleSpec,s=i.source_raster_dem,l=n.style;let o=[];const p=Ds(r);if(r===void 0)return o;if(p!=="object")return o.push(new Er("source_raster_dem",r,`object expected, ${p} found`)),o;const x=ju(r.encoding)==="custom",B=["redFactor","greenFactor","blueFactor","baseShift"],T=n.value.encoding?`"${n.value.encoding}"`:"Default";for(const P in r)!x&&B.includes(P)?o.push(new Er(P,r[P],`In "${t}": "${P}" is only valid when "encoding" is set to "custom". ${T} encoding found`)):s[P]?o=o.concat(n.validateSpec({key:P,value:r[P],valueSpec:s[P],validateSpec:n.validateSpec,style:l,styleSpec:i})):o.push(new Er(P,r[P],`unknown property "${P}"`));return o}const v7={promoteId:Tq};function IF(n){const e=n.value,t=n.key,r=n.styleSpec,i=n.style,s=n.validateSpec;if(!e.type)return[new Er(t,e,'"type" is required')];const l=ju(e.type);let o;switch(l){case"vector":case"raster":return o=wf({key:t,value:e,valueSpec:r[`source_${l.replace("-","_")}`],style:n.style,styleSpec:r,objectElementValidators:v7,validateSpec:s}),o;case"raster-dem":return o=kq({sourceName:t,value:e,style:n.style,styleSpec:r,validateSpec:s}),o;case"geojson":if(o=wf({key:t,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,validateSpec:s,objectElementValidators:v7}),e.cluster)for(const p in e.clusterProperties){const[v,x]=e.clusterProperties[p],B=typeof v=="string"?[v,["accumulated"],["get",p]]:v;o.push(...gy({key:`${t}.${p}.map`,value:x,validateSpec:s,expressionContext:"cluster-map"})),o.push(...gy({key:`${t}.${p}.reduce`,value:B,validateSpec:s,expressionContext:"cluster-reduce"}))}return o;case"video":return wf({key:t,value:e,valueSpec:r.source_video,style:i,validateSpec:s,styleSpec:r});case"image":return wf({key:t,value:e,valueSpec:r.source_image,style:i,validateSpec:s,styleSpec:r});case"canvas":return[new Er(t,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return dC({key:`${t}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,validateSpec:s,styleSpec:r})}}function Tq({key:n,value:e}){if(Ds(e)==="string")return Tg({key:n,value:e});{const t=[];for(const r in e)t.push(...Tg({key:`${n}.${r}`,value:e[r]}));return t}}function kF(n){const e=n.value,t=n.styleSpec,r=t.light,i=n.style;let s=[];const l=Ds(e);if(e===void 0)return s;if(l!=="object")return s=s.concat([new Er("light",e,`object expected, ${l} found`)]),s;for(const o in e){const p=o.match(/^(.*)-transition$/);p&&r[p[1]]&&r[p[1]].transition?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:t.transition,validateSpec:n.validateSpec,style:i,styleSpec:t})):r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Er(o,e[o],`unknown property "${o}"`)])}return s}function TF(n){const e=n.value,t=n.styleSpec,r=t.sky,i=n.style,s=Ds(e);if(e===void 0)return[];if(s!=="object")return[new Er("sky",e,`object expected, ${s} found`)];let l=[];for(const o in e)r[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):l=l.concat([new Er(o,e[o],`unknown property "${o}"`)]);return l}function PF(n){const e=n.value,t=n.styleSpec,r=t.terrain,i=n.style;let s=[];const l=Ds(e);if(e===void 0)return s;if(l!=="object")return s=s.concat([new Er("terrain",e,`object expected, ${l} found`)]),s;for(const o in e)r[o]?s=s.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],validateSpec:n.validateSpec,style:i,styleSpec:t})):s=s.concat([new Er(o,e[o],`unknown property "${o}"`)]);return s}function Pq(n){return Tg(n).length===0?[]:gy(n)}function Kq(n){return Tg(n).length===0?[]:gy(n)}function Rq(n){const e=n.key,t=n.value;if(Ds(t)==="array"){if(t.length<1||t.length>4)return[new Er(e,t,`padding requires 1 to 4 values; ${t.length} values found`)];const i={type:"number"};let s=[];for(let l=0;l<t.length;l++)s=s.concat(n.validateSpec({key:`${e}[${l}]`,value:t[l],validateSpec:n.validateSpec,valueSpec:i}));return s}else return CB({key:e,value:t,valueSpec:{}})}function Dq(n){const e=n.key,t=n.value,r=Ds(t),i=n.styleSpec;if(r!=="array"||t.length<1||t.length%2!==0)return[new Er(e,t,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let l=0;l<t.length;l+=2)s=s.concat(dC({key:`${e}[${l}]`,value:t[l],valueSpec:i.layout_symbol["text-anchor"]})),s=s.concat(vB({key:`${e}[${l+1}]`,value:t[l+1],valueSpec:{length:2,value:"number"},validateSpec:n.validateSpec,style:n.style,styleSpec:i}));return s}function KF(n){let e=[];const t=n.value,r=n.key;if(Array.isArray(t)){const i=[],s=[];for(const l in t){t[l].id&&i.includes(t[l].id)&&e.push(new Er(r,t,`all the sprites' ids must be unique, but ${t[l].id} is duplicated`)),i.push(t[l].id),t[l].url&&s.includes(t[l].url)&&e.push(new Er(r,t,`all the sprites' URLs must be unique, but ${t[l].url} is duplicated`)),s.push(t[l].url);const o={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(wf({key:`${r}[${l}]`,value:t[l],valueSpec:o,validateSpec:n.validateSpec}))}return e}else return Tg({key:r,value:t})}function Fq(n){const e=n.value,t=n.styleSpec,r=t.projection,i=n.style,s=Ds(e);if(e===void 0)return[];if(s!=="object")return[new Er("projection",e,`object expected, ${s} found`)];let l=[];for(const o in e)r[o]?l=l.concat(n.validateSpec({key:o,value:e[o],valueSpec:r[o],style:i,styleSpec:t})):l=l.concat([new Er(o,e[o],`unknown property "${o}"`)]);return l}function Lq(n){const e=n.key;let t=n.value;t=t instanceof String?t.valueOf():t;const r=Ds(t);return r==="array"&&!zq(t)&&!Uq(t)?[new Er(e,t,`projection expected, invalid array ${JSON.stringify(t)} found`)]:["array","string"].includes(r)?[]:[new Er(e,t,`projection expected, invalid type "${r}" found`)]}function Uq(n){return!!["interpolate","step","literal"].includes(n[0])}function zq(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"}const C7={"*"(){return[]},array:vB,boolean:Oq,number:CB,color:Iq,constants:xF,enum:dC,filter:_B,function:MF,layer:OF,object:wf,source:IF,light:kF,sky:TF,terrain:PF,projection:Fq,projectionDefinition:Lq,string:Tg,formatted:Pq,resolvedImage:Kq,padding:Rq,variableAnchorOffsetCollection:Dq,sprite:KF};function $v(n){const e=n.value,t=n.valueSpec,r=n.styleSpec;return n.validateSpec=$v,t.expression&&Iy(ju(e))?MF(n):t.expression&&ky(kg(e))?gy(n):t.type&&C7[t.type]?C7[t.type](n):wf(py({},n,{valueSpec:t.type?r[t.type]:t}))}function RF(n){const e=n.value,t=n.key,r=Tg(n);return r.length||(e.indexOf("{fontstack}")===-1&&r.push(new Er(t,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&r.push(new Er(t,e,'"glyphs" url must include a "{range}" token'))),r}function Kf(n,e=ks){let t=[];return t=t.concat($v({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,validateSpec:$v,objectElementValidators:{glyphs:RF,"*"(){return[]}}})),n.constants&&(t=t.concat(xF({key:"constants",value:n.constants,style:n,styleSpec:e,validateSpec:$v}))),DF(t)}Kf.source=im(rm(IF));Kf.sprite=im(rm(KF));Kf.glyphs=im(rm(RF));Kf.light=im(rm(kF));Kf.sky=im(rm(TF));Kf.terrain=im(rm(PF));Kf.layer=im(rm(OF));Kf.filter=im(rm(_B));Kf.paintProperty=im(rm(EF));Kf.layoutProperty=im(rm(BF));function rm(n){return function(e){return n({...e,validateSpec:$v})}}function DF(n){return[].concat(n).sort((e,t)=>e.line-t.line)}function im(n){return function(...e){return DF(n.apply(this,e))}}const jq=/("(?:[^\\"]|\\.)*")|[:,]/g;function Nq(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(l,o,p){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const v=JSON.stringify(l,i);if(v===void 0)return v;const x=r-o.length-p;if(v.length<=x){const B=v.replace(jq,(T,P)=>P||`${T} `);if(B.length<=x)return B}if(i!=null&&(l=JSON.parse(v),i=void 0),typeof l=="object"&&l!==null){const B=o+t,T=[];let P=0,U,j;if(Array.isArray(l)){U="[",j="]";const{length:N}=l;for(;P<N;P++)T.push(s(l[P],B,P===N-1?0:1)||"null")}else{U="{",j="}";const N=Object.keys(l),{length:q}=N;for(;P<q;P++){const H=N[P],oe=`${JSON.stringify(H)}: `,te=s(l[H],B,oe.length+(P===q-1?0:1));te!==void 0&&T.push(oe+te)}}if(T.length>0)return[U,t+T.join(`,
${B}`),j].join(`
${o}`)}return v}(n,"",0)}function _7(n,e){const t={};for(const r in e)n[r]!==void 0&&(t[r]=n[r]);for(const r in n)t[r]===void 0&&(t[r]=n[r]);return t}function FF(n,e=2){return n=_7(n,ks.$root),n.layers&&(n.layers=n.layers.map(t=>_7(t,ks.layer))),Nq(n,{indent:e})}function N3(n,e){for(const t in n)t.indexOf("layout")===0&&e(n[t],t)}function b7(n,e){for(const t in n)t.indexOf("paint")===0&&e(n[t],t)}function QE(n,e){return typeof e=="string"&&e[0]==="@"?QE(n,n.constants[e]):e}function Wq(n){return Array.isArray(n.stops)}function dv(n,e,t){n[t]=n[e],delete n[e]}function Gq(n){n.version=8,Bq(n,i=>{i.type==="video"&&i.url!==void 0&&dv(i,"url","urls"),i.type==="video"&&i.coordinates.forEach(s=>s.reverse())}),Vv(n,i=>{N3(i,s=>{s["symbol-min-distance"]!==void 0&&dv(s,"symbol-min-distance","symbol-spacing")}),b7(i,s=>{s["background-image"]!==void 0&&dv(s,"background-image","background-pattern"),s["line-image"]!==void 0&&dv(s,"line-image","line-pattern"),s["fill-image"]!==void 0&&dv(s,"fill-image","fill-pattern")})}),yB(n,{paint:!0,layout:!0},i=>{const s=QE(n,i.value);Wq(s)&&s.stops.forEach(l=>{l[1]=QE(n,l[1])}),i.set(s)}),delete n.constants,Vv(n,i=>{N3(i,s=>{delete s["text-max-size"],delete s["icon-max-size"]}),b7(i,s=>{s["text-size"]&&(i.layout||(i.layout={}),i.layout["text-size"]=s["text-size"],delete s["text-size"]),s["icon-size"]&&(i.layout||(i.layout={}),i.layout["icon-size"]=s["icon-size"],delete s["icon-size"])})});function e(i){function s(l){return l.split(",").map(o=>o.trim())}if(Array.isArray(i))return i;if(typeof i=="string")return s(i);if(typeof i=="object")return i.stops.forEach(l=>{l[1]=s(l[1])}),i;throw new Error("unexpected font value")}Vv(n,i=>{N3(i,s=>{s["text-font"]&&(s["text-font"]=e(s["text-font"]))})});let t=0;for(let i=n.layers.length-1;i>=0;i--)if(n.layers[i].type!=="symbol"){t=i+1;break}const r=n.layers.splice(t);return r.reverse(),n.layers=n.layers.concat(r),n}function Qq(n){const e=[];return Vv(n,t=>{t.filter&&(t.filter=qv(t.filter))}),yB(n,{paint:!0,layout:!0},({path:t,value:r,reference:i,set:s})=>{ky(r)||(typeof r=="object"&&!Array.isArray(r)?(s(fB(r,i)),e.push(t.join("."))):i.tokens&&typeof r=="string"&&s(bF(r)))}),n}function Yq(n){return JSON.parse(qq(JSON.stringify(n)))}function qq(n){return n.replace(/"hsla?\((.+?)\)"/gi,(e,t)=>{const r=t.match(/^(.+?)\s*,\s*(.+?)\s*,\s*(.+?)(?:\s*,\s*(.+))?$/i);if(r){let[i,s,l,o]=r.slice(1);return[s,l]=[s,l].map(p=>p.endsWith("%")?p:`${parseFloat(p)*100}%`),`"hsl${typeof o=="string"?"a":""}(${[i,s,l,o].filter(Boolean).join(",")})"`}return e})}function Vq(n){let e=!1;if(n.version===7&&(n=Gq(n),e=!0),n.version===8&&(e=!!Qq(n),e=!0),yB(n,{paint:!0,layout:!0},({value:t,reference:r,set:i})=>{r.type==="color"&&i(Yq(t))}),!e)throw new Error(`Cannot migrate from ${n.version}`);return n}const $q=ks,Hq={StyleExpression:CF,StylePropertyFunction:sx,ZoomConstantExpression:NE,ZoomDependentExpression:WE,createExpression:ix,createPropertyExpression:ox,isExpression:ky,isExpressionFilter:zC,isZoomExpression:hq,normalizePropertyExpression:fq},Zq={convertFunction:fB,createFunction:hB,isFunction:Iy};var ax=RC();const Xq=yl(ax);var xb={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.3.0/LICENSE.txt
 */var Jq=xb.exports,x7;function eV(){return x7||(x7=1,function(n,e){(function(t,r){n.exports=r()})(Jq,function(){var t={},r={};function i(l,o,p){if(r[l]=p,l==="index"){var v="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",x={};return r.shared(x),r.index(t,x),typeof window<"u"&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([v],{type:"text/javascript"}))),t}}i("shared",["exports"],function(l){function o(d,u,h,y){return new(h||(h=Promise))(function(w,R){function F(re){try{X(y.next(re))}catch(de){R(de)}}function G(re){try{X(y.throw(re))}catch(de){R(de)}}function X(re){var de;re.done?w(re.value):(de=re.value,de instanceof h?de:new h(function(be){be(de)})).then(F,G)}X((y=y.apply(d,u||[])).next())})}function p(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var v,x;function B(){if(x)return v;function d(u,h){this.x=u,this.y=h}return x=1,v=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,h){return this.clone()._rotateAround(u,h)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var h=u.x-this.x,y=u.y-this.y;return h*h+y*y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,h){return Math.atan2(this.x*h-this.y*u,this.x*u+this.y*h)},_matMult:function(u){var h=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=h,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var h=Math.cos(u),y=Math.sin(u),w=y*this.x+h*this.y;return this.x=h*this.x-y*this.y,this.y=w,this},_rotateAround:function(u,h){var y=Math.cos(u),w=Math.sin(u),R=h.y+w*(this.x-h.x)+y*(this.y-h.y);return this.x=h.x+y*(this.x-h.x)-w*(this.y-h.y),this.y=R,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(u){return u instanceof d?u:Array.isArray(u)?new d(u[0],u[1]):u},v}typeof SuppressedError=="function"&&SuppressedError;var T,P,U=p(B()),j=function(){if(P)return T;function d(u,h,y,w){this.cx=3*u,this.bx=3*(y-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=h,this.p2x=y,this.p2y=w}return P=1,T=d,d.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,h){if(h===void 0&&(h=1e-6),u<0)return 0;if(u>1)return 1;for(var y=u,w=0;w<8;w++){var R=this.sampleCurveX(y)-u;if(Math.abs(R)<h)return y;var F=this.sampleCurveDerivativeX(y);if(Math.abs(F)<1e-6)break;y-=R/F}var G=0,X=1;for(y=u,w=0;w<20&&(R=this.sampleCurveX(y),!(Math.abs(R-u)<h));w++)u>R?G=y:X=y,y=.5*(X-G)+G;return y},solve:function(u,h){return this.sampleCurveY(this.solveCurveX(u,h))}},T}(),N=p(j);let q,H;function oe(){return q==null&&(q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),q}function te(){if(H==null&&(H=!1,oe())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let y=0;y<5*5;y++){const w=4*y;u.fillStyle=`rgb(${w},${w+1},${w+2})`,u.fillRect(y%5,Math.floor(y/5),1,1)}const h=u.getImageData(0,0,5,5).data;for(let y=0;y<5*5*4;y++)if(y%4!=3&&h[y]!==y){H=!0;break}}}return H||!1}var V,ne=1e-6,W=typeof Float32Array<"u"?Float32Array:Array;function ie(){var d=new W(9);return W!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function he(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function fe(){var d=new W(3);return W!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function Ee(d,u,h){var y=new W(3);return y[0]=d,y[1]=u,y[2]=h,y}function me(d,u,h){var y=u[0],w=u[1],R=u[2],F=u[3];return d[0]=h[0]*y+h[4]*w+h[8]*R+h[12]*F,d[1]=h[1]*y+h[5]*w+h[9]*R+h[13]*F,d[2]=h[2]*y+h[6]*w+h[10]*R+h[14]*F,d[3]=h[3]*y+h[7]*w+h[11]*R+h[15]*F,d}function Me(){var d=new W(4);return W!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function De(){var d=new W(2);return W!=Float32Array&&(d[0]=0,d[1]=0),d}function xe(d,u){var h=new W(2);return h[0]=d,h[1]=u,h}Math.hypot||(Math.hypot=function(){for(var d=0,u=arguments.length;u--;)d+=arguments[u]*arguments[u];return Math.sqrt(d)}),fe(),V=new W(4),W!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0,V[3]=0),fe(),Ee(1,0,0),Ee(0,1,0),Me(),Me(),ie(),De();const At=8192;function Ze(d,u,h){return u*(At/(d.tileSize*Math.pow(2,h-d.tileID.overscaledZ)))}function Xe(d,u){return(d%u+u)%u}function Ne(d,u,h){return d*(1-h)+u*h}function Se(d){if(d<=0)return 0;if(d>=1)return 1;const u=d*d,h=u*d;return 4*(d<.5?h:3*(d-u)+h-.75)}function Re(d,u,h,y){const w=new N(d,u,h,y);return R=>w.solve(R)}const He=Re(.25,.1,.25,1);function _t(d,u,h){return Math.min(h,Math.max(u,d))}function Gt(d,u,h){const y=h-u,w=((d-u)%y+y)%y+u;return w===u?h:w}function yt(d,...u){for(const h of u)for(const y in h)d[y]=h[y];return d}let Ft=1;function Tt(d,u,h){const y={};for(const w in d)y[w]=u.call(this,d[w],w,d);return y}function Le(d,u,h){const y={};for(const w in d)u.call(this,d[w],w,d)&&(y[w]=d[w]);return y}function Pe(d){return Array.isArray(d)?d.map(Pe):typeof d=="object"&&d?Tt(d,Pe):d}const Be={};function it(d){Be[d]||(typeof console<"u"&&console.warn(d),Be[d]=!0)}function Ct(d,u,h){return(h.y-d.y)*(u.x-d.x)>(u.y-d.y)*(h.x-d.x)}function ft(d){return typeof WorkerGlobalScope<"u"&&d!==void 0&&d instanceof WorkerGlobalScope}let Lt=null;function Zt(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const Rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function _n(d,u,h,y,w){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const R=new VideoFrame(d,{timestamp:0});try{const F=R==null?void 0:R.format;if(!F||!F.startsWith("BGR")&&!F.startsWith("RGB"))throw new Error(`Unrecognized format ${F}`);const G=F.startsWith("BGR"),X=new Uint8ClampedArray(y*w*4);if(yield R.copyTo(X,function(re,de,be,Ke,ze){const We=4*Math.max(1,0),tt=(Math.max(0,be)-be)*Ke*4+We,ct=4*Ke,vt=Math.max(0,de),zt=Math.max(0,be);return{rect:{x:vt,y:zt,width:Math.min(re.width,de+Ke)-vt,height:Math.min(re.height,be+ze)-zt},layout:[{offset:tt,stride:ct}]}}(d,u,h,y,w)),G)for(let re=0;re<X.length;re+=4){const de=X[re];X[re]=X[re+2],X[re+2]=de}return X}finally{R.close()}})}let qn,rn;function ar(d,u,h,y){return d.addEventListener(u,h,y),{unsubscribe:()=>{d.removeEventListener(u,h,y)}}}function kn(d){return d/Math.PI*180}const mn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},zn={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},br="AbortError";function gr(){return new Error(br)}const tr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ge(d){return tr.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const ce="global-dispatcher";class pe extends Error{constructor(u,h,y,w){super(`AJAXError: ${h} (${u}): ${y}`),this.status=u,this.statusText=h,this.url=y,this.body=w}}const rt=()=>ft(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,St=function(d,u){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){const y=Ge(d.url);if(y)return y(d,u);if(ft(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:ce},u)}if(!(/^file:/.test(h=d.url)||/^file:/.test(rt())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(y,w){return o(this,void 0,void 0,function*(){const R=new Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,cache:y.cache,referrer:rt(),signal:w.signal});let F,G;y.type!=="json"||R.headers.has("Accept")||R.headers.set("Accept","application/json");try{F=yield fetch(R)}catch(re){throw new pe(0,re.message,y.url,new Blob)}if(!F.ok){const re=yield F.blob();throw new pe(F.status,F.statusText,y.url,re)}G=y.type==="arrayBuffer"||y.type==="image"?F.arrayBuffer():y.type==="json"?F.json():F.text();const X=yield G;if(w.signal.aborted)throw gr();return{data:X,cacheControl:F.headers.get("Cache-Control"),expires:F.headers.get("Expires")}})}(d,u);if(ft(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:ce},u)}var h;return function(y,w){return new Promise((R,F)=>{var G;const X=new XMLHttpRequest;X.open(y.method||"GET",y.url,!0),y.type!=="arrayBuffer"&&y.type!=="image"||(X.responseType="arraybuffer");for(const re in y.headers)X.setRequestHeader(re,y.headers[re]);y.type==="json"&&(X.responseType="text",!((G=y.headers)===null||G===void 0)&&G.Accept||X.setRequestHeader("Accept","application/json")),X.withCredentials=y.credentials==="include",X.onerror=()=>{F(new Error(X.statusText))},X.onload=()=>{if(!w.signal.aborted)if((X.status>=200&&X.status<300||X.status===0)&&X.response!==null){let re=X.response;if(y.type==="json")try{re=JSON.parse(X.response)}catch(de){return void F(de)}R({data:re,cacheControl:X.getResponseHeader("Cache-Control"),expires:X.getResponseHeader("Expires")})}else{const re=new Blob([X.response],{type:X.getResponseHeader("Content-Type")});F(new pe(X.status,X.statusText,y.url,re))}},w.signal.addEventListener("abort",()=>{X.abort(),F(gr())}),X.send(y.body)})}(d,u)};function Ht(d){if(!d||d.indexOf("://")<=0||d.indexOf("data:image/")===0||d.indexOf("blob:")===0)return!0;const u=new URL(d),h=window.location;return u.protocol===h.protocol&&u.host===h.host}function sn(d,u,h){h[d]&&h[d].indexOf(u)!==-1||(h[d]=h[d]||[],h[d].push(u))}function nr(d,u,h){if(h&&h[d]){const y=h[d].indexOf(u);y!==-1&&h[d].splice(y,1)}}class $e{constructor(u,h={}){yt(this,h),this.type=u}}class ae extends $e{constructor(u,h={}){super("error",yt({error:u},h))}}class Ce{on(u,h){return this._listeners=this._listeners||{},sn(u,h,this._listeners),{unsubscribe:()=>{this.off(u,h)}}}off(u,h){return nr(u,h,this._listeners),nr(u,h,this._oneTimeListeners),this}once(u,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},sn(u,h,this._oneTimeListeners),this):new Promise(y=>this.once(u,y))}fire(u,h){typeof u=="string"&&(u=new $e(u,h||{}));const y=u.type;if(this.listens(y)){u.target=this;const w=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const G of w)G.call(this,u);const R=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const G of R)nr(y,G,this._oneTimeListeners),G.call(this,u);const F=this._eventedParent;F&&(yt(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),F.fire(u))}else u instanceof ae&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,h){return this._eventedParent=u,this._eventedParentData=h,this}}var f={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const je=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qe(d,u){const h={};for(const y in d)y!=="ref"&&(h[y]=d[y]);return je.forEach(y=>{y in u&&(h[y]=u[y])}),h}function Je(d,u){if(Array.isArray(d)){if(!Array.isArray(u)||d.length!==u.length)return!1;for(let h=0;h<d.length;h++)if(!Je(d[h],u[h]))return!1;return!0}if(typeof d=="object"&&d!==null&&u!==null){if(typeof u!="object"||Object.keys(d).length!==Object.keys(u).length)return!1;for(const h in d)if(!Je(d[h],u[h]))return!1;return!0}return d===u}function ut(d,u){d.push(u)}function dt(d,u,h){ut(h,{command:"addSource",args:[d,u[d]]})}function Qt(d,u,h){ut(u,{command:"removeSource",args:[d]}),h[d]=!0}function Wt(d,u,h,y){Qt(d,h,y),dt(d,u,h)}function jt(d,u,h){let y;for(y in d[h])if(Object.prototype.hasOwnProperty.call(d[h],y)&&y!=="data"&&!Je(d[h][y],u[h][y]))return!1;for(y in u[h])if(Object.prototype.hasOwnProperty.call(u[h],y)&&y!=="data"&&!Je(d[h][y],u[h][y]))return!1;return!0}function tn(d,u,h,y,w,R){d=d||{},u=u||{};for(const F in d)Object.prototype.hasOwnProperty.call(d,F)&&(Je(d[F],u[F])||h.push({command:R,args:[y,F,u[F],w]}));for(const F in u)Object.prototype.hasOwnProperty.call(u,F)&&!Object.prototype.hasOwnProperty.call(d,F)&&(Je(d[F],u[F])||h.push({command:R,args:[y,F,u[F],w]}))}function Dn(d){return d.id}function Fn(d,u){return d[u.id]=u,d}class on{constructor(u,h,y,w){this.message=(u?`${u}: `:"")+y,w&&(this.identifier=w),h!=null&&h.__line__&&(this.line=h.__line__)}}function Sr(d,...u){for(const h of u)for(const y in h)d[y]=h[y];return d}class Hn extends Error{constructor(u,h){super(h),this.message=h,this.key=u}}class xr{constructor(u,h=[]){this.parent=u,this.bindings={};for(const[y,w]of h)this.bindings[y]=w}concat(u){return new xr(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const qr={kind:"null"},Bn={kind:"number"},$n={kind:"string"},Yn={kind:"boolean"},Qr={kind:"color"},co={kind:"projectionDefinition"},ma={kind:"object"},Mr={kind:"value"},wi={kind:"collator"},Zi={kind:"formatted"},Ts={kind:"padding"},xs={kind:"resolvedImage"},aa={kind:"variableAnchorOffsetCollection"};function ps(d,u){return{kind:"array",itemType:d,N:u}}function bi(d){if(d.kind==="array"){const u=bi(d.itemType);return typeof d.N=="number"?`array<${u}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${u}>`}return d.kind}const Il=[qr,Bn,$n,Yn,Qr,co,Zi,ma,ps(Mr),Ts,xs,aa];function kl(d,u){if(u.kind==="error")return null;if(d.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!kl(d.itemType,u.itemType))&&(typeof d.N!="number"||d.N===u.N))return null}else{if(d.kind===u.kind)return null;if(d.kind==="value"){for(const h of Il)if(!kl(h,u))return null}}return`Expected ${bi(d)} but found ${bi(u)} instead.`}function io(d,u){return u.some(h=>h.kind===d.kind)}function vl(d,u){return u.some(h=>h==="null"?d===null:h==="array"?Array.isArray(d):h==="object"?d&&!Array.isArray(d)&&typeof d=="object":h===typeof d)}function ol(d,u){return d.kind==="array"&&u.kind==="array"?d.itemType.kind===u.itemType.kind&&typeof d.N=="number":d.kind===u.kind}const bo=.96422,Kr=.82521,Wa=4/29,Vo=6/29,Gs=3*Vo*Vo,Ye=Vo*Vo*Vo,xt=Math.PI/180,yn=180/Math.PI;function Zn(d){return(d%=360)<0&&(d+=360),d}function dn([d,u,h,y]){let w,R;const F=Pi((.2225045*(d=lr(d))+.7168786*(u=lr(u))+.0606169*(h=lr(h)))/1);d===u&&u===h?w=R=F:(w=Pi((.4360747*d+.3850649*u+.1430804*h)/bo),R=Pi((.0139322*d+.0971045*u+.7141733*h)/Kr));const G=116*F-16;return[G<0?0:G,500*(w-F),200*(F-R),y]}function lr(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function Pi(d){return d>Ye?Math.pow(d,1/3):d/Gs+Wa}function xo([d,u,h,y]){let w=(d+16)/116,R=isNaN(u)?w:w+u/500,F=isNaN(h)?w:w-h/200;return w=1*la(w),R=bo*la(R),F=Kr*la(F),[as(3.1338561*R-1.6168667*w-.4906146*F),as(-.9787684*R+1.9161415*w+.033454*F),as(.0719453*R-.2289914*w+1.4052427*F),y]}function as(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:d>1?1:d}function la(d){return d>Vo?d*d*d:Gs*(d-Wa)}function Wu(d){return parseInt(d.padEnd(2,d),16)/255}function ei(d,u){return ki(u?d/100:d,0,1)}function ki(d,u,h){return Math.min(Math.max(u,d),h)}function zl(d){return!d.some(Number.isNaN)}const na={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ms(d,u,h){return d+h*(u-d)}function Mu(d,u,h){return d.map((y,w)=>Ms(y,u[w],h))}class Si{constructor(u,h,y,w=1,R=!0){this.r=u,this.g=h,this.b=y,this.a=w,R||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[u,h,y,w]))}static parse(u){if(u instanceof Si)return u;if(typeof u!="string")return;const h=function(y){if((y=y.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=na[y];if(w){const[F,G,X]=w;return[F/255,G/255,X/255,1]}if(y.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(y)){const F=y.length<6?1:2;let G=1;return[Wu(y.slice(G,G+=F)),Wu(y.slice(G,G+=F)),Wu(y.slice(G,G+=F)),Wu(y.slice(G,G+F)||"ff")]}if(y.startsWith("rgb")){const F=y.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(F){const[G,X,re,de,be,Ke,ze,We,tt,ct,vt,zt]=F,Et=[de||" ",ze||" ",ct].join("");if(Et==="  "||Et==="  /"||Et===",,"||Et===",,,"){const Fe=[re,Ke,tt].join(""),at=Fe==="%%%"?100:Fe===""?255:0;if(at){const Mt=[ki(+X/at,0,1),ki(+be/at,0,1),ki(+We/at,0,1),vt?ei(+vt,zt):1];if(zl(Mt))return Mt}}return}}const R=y.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(R){const[F,G,X,re,de,be,Ke,ze,We]=R,tt=[X||" ",de||" ",Ke].join("");if(tt==="  "||tt==="  /"||tt===",,"||tt===",,,"){const ct=[+G,ki(+re,0,100),ki(+be,0,100),ze?ei(+ze,We):1];if(zl(ct))return function([vt,zt,Et,Fe]){function at(Mt){const an=(Mt+vt/30)%12,jn=zt*Math.min(Et,1-Et);return Et-jn*Math.max(-1,Math.min(an-3,9-an,1))}return vt=Zn(vt),zt/=100,Et/=100,[at(0),at(8),at(4),Fe]}(ct)}}}(u);return h?new Si(...h,!1):void 0}get rgb(){const{r:u,g:h,b:y,a:w}=this,R=w||1/0;return this.overwriteGetter("rgb",[u/R,h/R,y/R,w])}get hcl(){return this.overwriteGetter("hcl",function(u){const[h,y,w,R]=dn(u),F=Math.sqrt(y*y+w*w);return[Math.round(1e4*F)?Zn(Math.atan2(w,y)*yn):NaN,F,h,R]}(this.rgb))}get lab(){return this.overwriteGetter("lab",dn(this.rgb))}overwriteGetter(u,h){return Object.defineProperty(this,u,{value:h}),h}toString(){const[u,h,y,w]=this.rgb;return`rgba(${[u,h,y].map(R=>Math.round(255*R)).join(",")},${w})`}static interpolate(u,h,y,w="rgb"){switch(w){case"rgb":{const[R,F,G,X]=Mu(u.rgb,h.rgb,y);return new Si(R,F,G,X,!1)}case"hcl":{const[R,F,G,X]=u.hcl,[re,de,be,Ke]=h.hcl;let ze,We;if(isNaN(R)||isNaN(re))isNaN(R)?isNaN(re)?ze=NaN:(ze=re,G!==1&&G!==0||(We=de)):(ze=R,be!==1&&be!==0||(We=F));else{let Et=re-R;re>R&&Et>180?Et-=360:re<R&&R-re>180&&(Et+=360),ze=R+y*Et}const[tt,ct,vt,zt]=function([Et,Fe,at,Mt]){return Et=isNaN(Et)?0:Et*xt,xo([at,Math.cos(Et)*Fe,Math.sin(Et)*Fe,Mt])}([ze,We??Ms(F,de,y),Ms(G,be,y),Ms(X,Ke,y)]);return new Si(tt,ct,vt,zt,!1)}case"lab":{const[R,F,G,X]=xo(Mu(u.lab,h.lab,y));return new Si(R,F,G,X,!1)}}}}Si.black=new Si(0,0,0,1),Si.white=new Si(1,1,1,1),Si.transparent=new Si(0,0,0,0),Si.red=new Si(1,0,0,1);class ti{constructor(u,h,y){this.sensitivity=u?h?"variant":"case":h?"accent":"base",this.locale=y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,h){return this.collator.compare(u,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const ls=["bottom","center","top"];class ka{constructor(u,h,y,w,R,F){this.text=u,this.image=h,this.scale=y,this.fontStack=w,this.textColor=R,this.verticalAlign=F}}class Us{constructor(u){this.sections=u}static fromString(u){return new Us([new ka(u,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof Us?u:Us.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class ho{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof ho)return u;if(typeof u=="number")return new ho([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const h of u)if(typeof h!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new ho(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,h,y){return new ho(Mu(u.values,h.values,y))}}class Do{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const Gu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Qs{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Qs)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let h=0;h<u.length;h+=2){const y=u[h],w=u[h+1];if(typeof y!="string"||!Gu.has(y)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new Qs(u)}}toString(){return JSON.stringify(this.values)}static interpolate(u,h,y){const w=u.values,R=h.values;if(w.length!==R.length)throw new Do(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${h.toString()}`);const F=[];for(let G=0;G<w.length;G+=2){if(w[G]!==R[G])throw new Do(`Cannot interpolate values containing mismatched anchors. from[${G}]: ${w[G]}, to[${G}]: ${R[G]}`);F.push(w[G]);const[X,re]=w[G+1],[de,be]=R[G+1];F.push([Ms(X,de,y),Ms(re,be,y)])}return new Qs(F)}}class ra{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new ra({name:u,available:!1}):null}}class No{constructor(u,h,y){this.from=u,this.to=h,this.transition=y}static interpolate(u,h,y){return new No(u,h,y)}static parse(u){return u instanceof No?u:Array.isArray(u)&&u.length===3&&typeof u[0]=="string"&&typeof u[1]=="string"&&typeof u[2]=="number"?new No(u[0],u[1],u[2]):typeof u=="object"&&typeof u.from=="string"&&typeof u.to=="string"&&typeof u.transition=="number"?new No(u.from,u.to,u.transition):typeof u=="string"?new No(u,u,1):void 0}}function Fo(d,u,h,y){return typeof d=="number"&&d>=0&&d<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof h=="number"&&h>=0&&h<=255?y===void 0||typeof y=="number"&&y>=0&&y<=1?null:`Invalid rgba value [${[d,u,h,y].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof y=="number"?[d,u,h,y]:[d,u,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function es(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof No||d instanceof Si||d instanceof ti||d instanceof Us||d instanceof ho||d instanceof Qs||d instanceof ra)return!0;if(Array.isArray(d)){for(const u of d)if(!es(u))return!1;return!0}if(typeof d=="object"){for(const u in d)if(!es(d[u]))return!1;return!0}return!1}function Mo(d){if(d===null)return qr;if(typeof d=="string")return $n;if(typeof d=="boolean")return Yn;if(typeof d=="number")return Bn;if(d instanceof Si)return Qr;if(d instanceof No)return co;if(d instanceof ti)return wi;if(d instanceof Us)return Zi;if(d instanceof ho)return Ts;if(d instanceof Qs)return aa;if(d instanceof ra)return xs;if(Array.isArray(d)){const u=d.length;let h;for(const y of d){const w=Mo(y);if(h){if(h===w)continue;h=Mr;break}h=w}return ps(h||Mr,u)}return ma}function ga(d){const u=typeof d;return d===null?"":u==="string"||u==="number"||u==="boolean"?String(d):d instanceof Si||d instanceof No||d instanceof Us||d instanceof ho||d instanceof Qs||d instanceof ra?d.toString():JSON.stringify(d)}class zs{constructor(u,h){this.type=u,this.value=h}static parse(u,h){if(u.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!es(u[1]))return h.error("invalid value");const y=u[1];let w=Mo(y);const R=h.expectedType;return w.kind!=="array"||w.N!==0||!R||R.kind!=="array"||typeof R.N=="number"&&R.N!==0||(w=R),new zs(w,y)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ga={string:$n,number:Bn,boolean:Yn,object:ma};class Ta{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");let y,w=1;const R=u[0];if(R==="array"){let G,X;if(u.length>2){const re=u[1];if(typeof re!="string"||!(re in Ga)||re==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);G=Ga[re],w++}else G=Mr;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return h.error('The length argument to "array" must be a positive integer literal',2);X=u[2],w++}y=ps(G,X)}else{if(!Ga[R])throw new Error(`Types doesn't contain name = ${R}`);y=Ga[R]}const F=[];for(;w<u.length;w++){const G=h.parse(u[w],w,Mr);if(!G)return null;F.push(G)}return new Ta(y,F)}evaluate(u){for(let h=0;h<this.args.length;h++){const y=this.args[h].evaluate(u);if(!kl(this.type,Mo(y)))return y;if(h===this.args.length-1)throw new Do(`Expected value to be of type ${bi(this.type)}, but found ${bi(Mo(y))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const ao={"to-boolean":Yn,"to-color":Qr,"to-number":Bn,"to-string":$n};class sl{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");const y=u[0];if(!ao[y])throw new Error(`Can't parse ${y} as it is not part of the known types`);if((y==="to-boolean"||y==="to-string")&&u.length!==2)return h.error("Expected one argument.");const w=ao[y],R=[];for(let F=1;F<u.length;F++){const G=h.parse(u[F],F,Mr);if(!G)return null;R.push(G)}return new sl(w,R)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let h,y;for(const w of this.args){if(h=w.evaluate(u),y=null,h instanceof Si)return h;if(typeof h=="string"){const R=u.parseColor(h);if(R)return R}else if(Array.isArray(h)&&(y=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:Fo(h[0],h[1],h[2],h[3]),!y))return new Si(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Do(y||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const y of this.args){h=y.evaluate(u);const w=ho.parse(h);if(w)return w}throw new Do(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const y of this.args){h=y.evaluate(u);const w=Qs.parse(h);if(w)return w}throw new Do(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const y of this.args){if(h=y.evaluate(u),h===null)return 0;const w=Number(h);if(!isNaN(w))return w}throw new Do(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return Us.fromString(ga(this.args[0].evaluate(u)));case"resolvedImage":return ra.fromString(ga(this.args[0].evaluate(u)));case"projectionDefinition":return this.args[0].evaluate(u);default:return ga(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const Hi=["Unknown","Point","LineString","Polygon"];class Hr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Hi[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let h=this._parseColorCache[u];return h||(h=this._parseColorCache[u]=Si.parse(u)),h}}class jl{constructor(u,h,y=[],w,R=new xr,F=[]){this.registry=u,this.path=y,this.key=y.map(G=>`[${G}]`).join(""),this.scope=R,this.errors=F,this.expectedType=w,this._isConstant=h}parse(u,h,y,w,R={}){return h?this.concat(h,y,w)._parse(u,R):this._parse(u,R)}_parse(u,h){function y(w,R,F){return F==="assert"?new Ta(R,[w]):F==="coerce"?new sl(R,[w]):w}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=u[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const R=this.registry[w];if(R){let F=R.parse(u,this);if(!F)return null;if(this.expectedType){const G=this.expectedType,X=F.type;if(G.kind!=="string"&&G.kind!=="number"&&G.kind!=="boolean"&&G.kind!=="object"&&G.kind!=="array"||X.kind!=="value")if(G.kind!=="projectionDefinition"||X.kind!=="string"&&X.kind!=="array")if(G.kind!=="color"&&G.kind!=="formatted"&&G.kind!=="resolvedImage"||X.kind!=="value"&&X.kind!=="string")if(G.kind!=="padding"||X.kind!=="value"&&X.kind!=="number"&&X.kind!=="array")if(G.kind!=="variableAnchorOffsetCollection"||X.kind!=="value"&&X.kind!=="array"){if(this.checkSubtype(G,X))return null}else F=y(F,G,h.typeAnnotation||"coerce");else F=y(F,G,h.typeAnnotation||"coerce");else F=y(F,G,h.typeAnnotation||"coerce");else F=y(F,G,h.typeAnnotation||"coerce");else F=y(F,G,h.typeAnnotation||"assert")}if(!(F instanceof zs)&&F.type.kind!=="resolvedImage"&&this._isConstant(F)){const G=new Hr;try{F=new zs(F.type,F.evaluate(G))}catch(X){return this.error(X.message),null}}return F}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,h,y){const w=typeof u=="number"?this.path.concat(u):this.path,R=y?this.scope.concat(y):this.scope;return new jl(this.registry,this._isConstant,w,h||null,R,this.errors)}error(u,...h){const y=`${this.key}${h.map(w=>`[${w}]`).join("")}`;this.errors.push(new Hn(y,u))}checkSubtype(u,h){const y=kl(u,h);return y&&this.error(y),y}}class Wi{constructor(u,h){this.type=h.type,this.bindings=[].concat(u),this.result=h}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const h of this.bindings)u(h[1]);u(this.result)}static parse(u,h){if(u.length<4)return h.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const y=[];for(let R=1;R<u.length-1;R+=2){const F=u[R];if(typeof F!="string")return h.error(`Expected string, but found ${typeof F} instead.`,R);if(/[^a-zA-Z0-9_]/.test(F))return h.error("Variable names must contain only alphanumeric characters or '_'.",R);const G=h.parse(u[R+1],R+1);if(!G)return null;y.push([F,G])}const w=h.parse(u[u.length-1],u.length-1,h.expectedType,y);return w?new Wi(y,w):null}outputDefined(){return this.result.outputDefined()}}class oo{constructor(u,h){this.type=h.type,this.name=u,this.boundExpression=h}static parse(u,h){if(u.length!==2||typeof u[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const y=u[1];return h.scope.has(y)?new oo(y,h.scope.get(y)):h.error(`Unknown variable "${y}". Make sure "${y}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Ki{constructor(u,h,y){this.type=u,this.index=h,this.input=y}static parse(u,h){if(u.length!==3)return h.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const y=h.parse(u[1],1,Bn),w=h.parse(u[2],2,ps(h.expectedType||Mr));return y&&w?new Ki(w.type.itemType,y,w):null}evaluate(u){const h=this.index.evaluate(u),y=this.input.evaluate(u);if(h<0)throw new Do(`Array index out of bounds: ${h} < 0.`);if(h>=y.length)throw new Do(`Array index out of bounds: ${h} > ${y.length-1}.`);if(h!==Math.floor(h))throw new Do(`Array index must be an integer, but found ${h} instead.`);return y[h]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class ee{constructor(u,h){this.type=Yn,this.needle=u,this.haystack=h}static parse(u,h){if(u.length!==3)return h.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const y=h.parse(u[1],1,Mr),w=h.parse(u[2],2,Mr);return y&&w?io(y.type,[Yn,$n,Bn,qr,Mr])?new ee(y,w):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(y.type)} instead`):null}evaluate(u){const h=this.needle.evaluate(u),y=this.haystack.evaluate(u);if(!y)return!1;if(!vl(h,["boolean","string","number","null"]))throw new Do(`Expected first argument to be of type boolean, string, number or null, but found ${bi(Mo(h))} instead.`);if(!vl(y,["string","array"]))throw new Do(`Expected second argument to be of type array or string, but found ${bi(Mo(y))} instead.`);return y.indexOf(h)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class Oe{constructor(u,h,y){this.type=Bn,this.needle=u,this.haystack=h,this.fromIndex=y}static parse(u,h){if(u.length<=2||u.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const y=h.parse(u[1],1,Mr),w=h.parse(u[2],2,Mr);if(!y||!w)return null;if(!io(y.type,[Yn,$n,Bn,qr,Mr]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(y.type)} instead`);if(u.length===4){const R=h.parse(u[3],3,Bn);return R?new Oe(y,w,R):null}return new Oe(y,w)}evaluate(u){const h=this.needle.evaluate(u),y=this.haystack.evaluate(u);if(!vl(h,["boolean","string","number","null"]))throw new Do(`Expected first argument to be of type boolean, string, number or null, but found ${bi(Mo(h))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(u)),vl(y,["string"])){const R=y.indexOf(h,w);return R===-1?-1:[...y.slice(0,R)].length}if(vl(y,["array"]))return y.indexOf(h,w);throw new Do(`Expected second argument to be of type array or string, but found ${bi(Mo(y))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class st{constructor(u,h,y,w,R,F){this.inputType=u,this.type=h,this.input=y,this.cases=w,this.outputs=R,this.otherwise=F}static parse(u,h){if(u.length<5)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return h.error("Expected an even number of arguments.");let y,w;h.expectedType&&h.expectedType.kind!=="value"&&(w=h.expectedType);const R={},F=[];for(let re=2;re<u.length-1;re+=2){let de=u[re];const be=u[re+1];Array.isArray(de)||(de=[de]);const Ke=h.concat(re);if(de.length===0)return Ke.error("Expected at least one branch label.");for(const We of de){if(typeof We!="number"&&typeof We!="string")return Ke.error("Branch labels must be numbers or strings.");if(typeof We=="number"&&Math.abs(We)>Number.MAX_SAFE_INTEGER)return Ke.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof We=="number"&&Math.floor(We)!==We)return Ke.error("Numeric branch labels must be integer values.");if(y){if(Ke.checkSubtype(y,Mo(We)))return null}else y=Mo(We);if(R[String(We)]!==void 0)return Ke.error("Branch labels must be unique.");R[String(We)]=F.length}const ze=h.parse(be,re,w);if(!ze)return null;w=w||ze.type,F.push(ze)}const G=h.parse(u[1],1,Mr);if(!G)return null;const X=h.parse(u[u.length-1],u.length-1,w);return X?G.type.kind!=="value"&&h.concat(1).checkSubtype(y,G.type)?null:new st(y,w,G,R,F,X):null}evaluate(u){const h=this.input.evaluate(u);return(Mo(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class $t{constructor(u,h,y){this.type=u,this.branches=h,this.otherwise=y}static parse(u,h){if(u.length<4)return h.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return h.error("Expected an odd number of arguments.");let y;h.expectedType&&h.expectedType.kind!=="value"&&(y=h.expectedType);const w=[];for(let F=1;F<u.length-1;F+=2){const G=h.parse(u[F],F,Yn);if(!G)return null;const X=h.parse(u[F+1],F+1,y);if(!X)return null;w.push([G,X]),y=y||X.type}const R=h.parse(u[u.length-1],u.length-1,y);if(!R)return null;if(!y)throw new Error("Can't infer output type");return new $t(y,w,R)}evaluate(u){for(const[h,y]of this.branches)if(h.evaluate(u))return y.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[h,y]of this.branches)u(h),u(y);u(this.otherwise)}outputDefined(){return this.branches.every(([u,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class Ir{constructor(u,h,y,w){this.type=u,this.input=h,this.beginIndex=y,this.endIndex=w}static parse(u,h){if(u.length<=2||u.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const y=h.parse(u[1],1,Mr),w=h.parse(u[2],2,Bn);if(!y||!w)return null;if(!io(y.type,[ps(Mr),$n,Mr]))return h.error(`Expected first argument to be of type array or string, but found ${bi(y.type)} instead`);if(u.length===4){const R=h.parse(u[3],3,Bn);return R?new Ir(y.type,y,w,R):null}return new Ir(y.type,y,w)}evaluate(u){const h=this.input.evaluate(u),y=this.beginIndex.evaluate(u);let w;if(this.endIndex&&(w=this.endIndex.evaluate(u)),vl(h,["string"]))return[...h].slice(y,w).join("");if(vl(h,["array"]))return h.slice(y,w);throw new Do(`Expected first argument to be of type array or string, but found ${bi(Mo(h))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Vn(d,u){const h=d.length-1;let y,w,R=0,F=h,G=0;for(;R<=F;)if(G=Math.floor((R+F)/2),y=d[G],w=d[G+1],y<=u){if(G===h||u<w)return G;R=G+1}else{if(!(y>u))throw new Do("Input is not a number.");F=G-1}return 0}class Zr{constructor(u,h,y){this.type=u,this.input=h,this.labels=[],this.outputs=[];for(const[w,R]of y)this.labels.push(w),this.outputs.push(R)}static parse(u,h){if(u.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return h.error("Expected an even number of arguments.");const y=h.parse(u[1],1,Bn);if(!y)return null;const w=[];let R=null;h.expectedType&&h.expectedType.kind!=="value"&&(R=h.expectedType);for(let F=1;F<u.length;F+=2){const G=F===1?-1/0:u[F],X=u[F+1],re=F,de=F+1;if(typeof G!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(w.length&&w[w.length-1][0]>=G)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',re);const be=h.parse(X,de,R);if(!be)return null;R=R||be.type,w.push([G,be])}return new Zr(R,y,w)}evaluate(u){const h=this.labels,y=this.outputs;if(h.length===1)return y[0].evaluate(u);const w=this.input.evaluate(u);if(w<=h[0])return y[0].evaluate(u);const R=h.length;return w>=h[R-1]?y[R-1].evaluate(u):y[Vn(h,w)].evaluate(u)}eachChild(u){u(this.input);for(const h of this.outputs)u(h)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function di(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Br,Rr,Vi=function(){if(Rr)return Br;function d(u,h,y,w){this.cx=3*u,this.bx=3*(y-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=h,this.p2x=y,this.p2y=w}return Rr=1,Br=d,d.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,h){if(h===void 0&&(h=1e-6),u<0)return 0;if(u>1)return 1;for(var y=u,w=0;w<8;w++){var R=this.sampleCurveX(y)-u;if(Math.abs(R)<h)return y;var F=this.sampleCurveDerivativeX(y);if(Math.abs(F)<1e-6)break;y-=R/F}var G=0,X=1;for(y=u,w=0;w<20&&(R=this.sampleCurveX(y),!(Math.abs(R-u)<h));w++)u>R?G=y:X=y,y=.5*(X-G)+G;return y},solve:function(u,h){return this.sampleCurveY(this.solveCurveX(u,h))}},Br}(),Wo=di(Vi);class si{constructor(u,h,y,w,R){this.type=u,this.operator=h,this.interpolation=y,this.input=w,this.labels=[],this.outputs=[];for(const[F,G]of R)this.labels.push(F),this.outputs.push(G)}static interpolationFactor(u,h,y,w){let R=0;if(u.name==="exponential")R=zr(h,u.base,y,w);else if(u.name==="linear")R=zr(h,1,y,w);else if(u.name==="cubic-bezier"){const F=u.controlPoints;R=new Wo(F[0],F[1],F[2],F[3]).solve(zr(h,1,y,w))}return R}static parse(u,h){let[y,w,R,...F]=u;if(!Array.isArray(w)||w.length===0)return h.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const re=w[1];if(typeof re!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:re}}else{if(w[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const re=w.slice(1);if(re.length!==4||re.some(de=>typeof de!="number"||de<0||de>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:re}}}if(u.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(R=h.parse(R,2,Bn),!R)return null;const G=[];let X=null;y==="interpolate-hcl"||y==="interpolate-lab"?X=Qr:h.expectedType&&h.expectedType.kind!=="value"&&(X=h.expectedType);for(let re=0;re<F.length;re+=2){const de=F[re],be=F[re+1],Ke=re+3,ze=re+4;if(typeof de!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ke);if(G.length&&G[G.length-1][0]>=de)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ke);const We=h.parse(be,ze,X);if(!We)return null;X=X||We.type,G.push([de,We])}return ol(X,Bn)||ol(X,co)||ol(X,Qr)||ol(X,Ts)||ol(X,aa)||ol(X,ps(Bn))?new si(X,y,w,R,G):h.error(`Type ${bi(X)} is not interpolatable.`)}evaluate(u){const h=this.labels,y=this.outputs;if(h.length===1)return y[0].evaluate(u);const w=this.input.evaluate(u);if(w<=h[0])return y[0].evaluate(u);const R=h.length;if(w>=h[R-1])return y[R-1].evaluate(u);const F=Vn(h,w),G=si.interpolationFactor(this.interpolation,w,h[F],h[F+1]),X=y[F].evaluate(u),re=y[F+1].evaluate(u);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ms(X,re,G);case"color":return Si.interpolate(X,re,G);case"padding":return ho.interpolate(X,re,G);case"variableAnchorOffsetCollection":return Qs.interpolate(X,re,G);case"array":return Mu(X,re,G);case"projectionDefinition":return No.interpolate(X,re,G)}case"interpolate-hcl":return Si.interpolate(X,re,G,"hcl");case"interpolate-lab":return Si.interpolate(X,re,G,"lab")}}eachChild(u){u(this.input);for(const h of this.outputs)u(h)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function zr(d,u,h,y){const w=y-h,R=d-h;return w===0?0:u===1?R/w:(Math.pow(u,R)-1)/(Math.pow(u,w)-1)}const Ui={color:Si.interpolate,number:Ms,padding:ho.interpolate,variableAnchorOffsetCollection:Qs.interpolate,array:Mu};class Gi{constructor(u,h){this.type=u,this.args=h}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");let y=null;const w=h.expectedType;w&&w.kind!=="value"&&(y=w);const R=[];for(const G of u.slice(1)){const X=h.parse(G,1+R.length,y,void 0,{typeAnnotation:"omit"});if(!X)return null;y=y||X.type,R.push(X)}if(!y)throw new Error("No output type");const F=w&&R.some(G=>kl(w,G.type));return new Gi(F?Mr:y,R)}evaluate(u){let h,y=null,w=0;for(const R of this.args)if(w++,y=R.evaluate(u),y&&y instanceof ra&&!y.available&&(h||(h=y.name),y=null,w===this.args.length&&(y=h)),y!==null)break;return y}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}function $o(d,u){return d==="=="||d==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function ua(d,u,h,y){return y.compare(u,h)===0}function Ys(d,u,h){const y=d!=="=="&&d!=="!=";return class LF{constructor(R,F,G){this.type=Yn,this.lhs=R,this.rhs=F,this.collator=G,this.hasUntypedArgument=R.type.kind==="value"||F.type.kind==="value"}static parse(R,F){if(R.length!==3&&R.length!==4)return F.error("Expected two or three arguments.");const G=R[0];let X=F.parse(R[1],1,Mr);if(!X)return null;if(!$o(G,X.type))return F.concat(1).error(`"${G}" comparisons are not supported for type '${bi(X.type)}'.`);let re=F.parse(R[2],2,Mr);if(!re)return null;if(!$o(G,re.type))return F.concat(2).error(`"${G}" comparisons are not supported for type '${bi(re.type)}'.`);if(X.type.kind!==re.type.kind&&X.type.kind!=="value"&&re.type.kind!=="value")return F.error(`Cannot compare types '${bi(X.type)}' and '${bi(re.type)}'.`);y&&(X.type.kind==="value"&&re.type.kind!=="value"?X=new Ta(re.type,[X]):X.type.kind!=="value"&&re.type.kind==="value"&&(re=new Ta(X.type,[re])));let de=null;if(R.length===4){if(X.type.kind!=="string"&&re.type.kind!=="string"&&X.type.kind!=="value"&&re.type.kind!=="value")return F.error("Cannot use collator to compare non-string types.");if(de=F.parse(R[3],3,wi),!de)return null}return new LF(X,re,de)}evaluate(R){const F=this.lhs.evaluate(R),G=this.rhs.evaluate(R);if(y&&this.hasUntypedArgument){const X=Mo(F),re=Mo(G);if(X.kind!==re.kind||X.kind!=="string"&&X.kind!=="number")throw new Do(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${X.kind}, ${re.kind}) instead.`)}if(this.collator&&!y&&this.hasUntypedArgument){const X=Mo(F),re=Mo(G);if(X.kind!=="string"||re.kind!=="string")return u(R,F,G)}return this.collator?h(R,F,G,this.collator.evaluate(R)):u(R,F,G)}eachChild(R){R(this.lhs),R(this.rhs),this.collator&&R(this.collator)}outputDefined(){return!0}}}const wu=Ys("==",function(d,u,h){return u===h},ua),qs=Ys("!=",function(d,u,h){return u!==h},function(d,u,h,y){return!ua(0,u,h,y)}),Yd=Ys("<",function(d,u,h){return u<h},function(d,u,h,y){return y.compare(u,h)<0}),al=Ys(">",function(d,u,h){return u>h},function(d,u,h,y){return y.compare(u,h)>0}),su=Ys("<=",function(d,u,h){return u<=h},function(d,u,h,y){return y.compare(u,h)<=0}),vh=Ys(">=",function(d,u,h){return u>=h},function(d,u,h,y){return y.compare(u,h)>=0});class Su{constructor(u,h,y){this.type=wi,this.locale=y,this.caseSensitive=u,this.diacriticSensitive=h}static parse(u,h){if(u.length!==2)return h.error("Expected one argument.");const y=u[1];if(typeof y!="object"||Array.isArray(y))return h.error("Collator options argument must be an object.");const w=h.parse(y["case-sensitive"]!==void 0&&y["case-sensitive"],1,Yn);if(!w)return null;const R=h.parse(y["diacritic-sensitive"]!==void 0&&y["diacritic-sensitive"],1,Yn);if(!R)return null;let F=null;return y.locale&&(F=h.parse(y.locale,1,$n),!F)?null:new Su(w,R,F)}evaluate(u){return new ti(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class qd{constructor(u,h,y,w,R){this.type=$n,this.number=u,this.locale=h,this.currency=y,this.minFractionDigits=w,this.maxFractionDigits=R}static parse(u,h){if(u.length!==3)return h.error("Expected two arguments.");const y=h.parse(u[1],1,Bn);if(!y)return null;const w=u[2];if(typeof w!="object"||Array.isArray(w))return h.error("NumberFormat options argument must be an object.");let R=null;if(w.locale&&(R=h.parse(w.locale,1,$n),!R))return null;let F=null;if(w.currency&&(F=h.parse(w.currency,1,$n),!F))return null;let G=null;if(w["min-fraction-digits"]&&(G=h.parse(w["min-fraction-digits"],1,Bn),!G))return null;let X=null;return w["max-fraction-digits"]&&(X=h.parse(w["max-fraction-digits"],1,Bn),!X)?null:new qd(y,R,F,G,X)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class Yc{constructor(u){this.type=Zi,this.sections=u}static parse(u,h){if(u.length<2)return h.error("Expected at least one argument.");const y=u[1];if(!Array.isArray(y)&&typeof y=="object")return h.error("First argument must be an image or text section.");const w=[];let R=!1;for(let F=1;F<=u.length-1;++F){const G=u[F];if(R&&typeof G=="object"&&!Array.isArray(G)){R=!1;let X=null;if(G["font-scale"]&&(X=h.parse(G["font-scale"],1,Bn),!X))return null;let re=null;if(G["text-font"]&&(re=h.parse(G["text-font"],1,ps($n)),!re))return null;let de=null;if(G["text-color"]&&(de=h.parse(G["text-color"],1,Qr),!de))return null;let be=null;if(G["vertical-align"]){if(typeof G["vertical-align"]=="string"&&!ls.includes(G["vertical-align"]))return h.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${G["vertical-align"]}' instead.`);if(be=h.parse(G["vertical-align"],1,$n),!be)return null}const Ke=w[w.length-1];Ke.scale=X,Ke.font=re,Ke.textColor=de,Ke.verticalAlign=be}else{const X=h.parse(u[F],1,Mr);if(!X)return null;const re=X.type.kind;if(re!=="string"&&re!=="value"&&re!=="null"&&re!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");R=!0,w.push({content:X,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Yc(w)}evaluate(u){return new Us(this.sections.map(h=>{const y=h.content.evaluate(u);return Mo(y)===xs?new ka("",y,null,null,null,h.verticalAlign?h.verticalAlign.evaluate(u):null):new ka(ga(y),null,h.scale?h.scale.evaluate(u):null,h.font?h.font.evaluate(u).join(","):null,h.textColor?h.textColor.evaluate(u):null,h.verticalAlign?h.verticalAlign.evaluate(u):null)}))}eachChild(u){for(const h of this.sections)u(h.content),h.scale&&u(h.scale),h.font&&u(h.font),h.textColor&&u(h.textColor),h.verticalAlign&&u(h.verticalAlign)}outputDefined(){return!1}}class ws{constructor(u){this.type=xs,this.input=u}static parse(u,h){if(u.length!==2)return h.error("Expected two arguments.");const y=h.parse(u[1],1,$n);return y?new ws(y):h.error("No image name provided.")}evaluate(u){const h=this.input.evaluate(u),y=ra.fromString(h);return y&&u.availableImages&&(y.available=u.availableImages.indexOf(h)>-1),y}eachChild(u){u(this.input)}outputDefined(){return!1}}class LA{constructor(u){this.type=Bn,this.input=u}static parse(u,h){if(u.length!==2)return h.error(`Expected 1 argument, but found ${u.length-1} instead.`);const y=h.parse(u[1],1);return y?y.type.kind!=="array"&&y.type.kind!=="string"&&y.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${bi(y.type)} instead.`):new LA(y):null}evaluate(u){const h=this.input.evaluate(u);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new Do(`Expected value to be of type string or array, but found ${bi(Mo(h))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const mA=8192;function xp(d,u){const h=(180+d[0])/360,y=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,w=Math.pow(2,u.z);return[Math.round(h*w*mA),Math.round(y*w*mA)]}function UA(d,u){const h=Math.pow(2,u.z);return[(w=(d[0]/mA+u.x)/h,360*w-180),(y=(d[1]/mA+u.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*y)*Math.PI/180))-90)];var y,w}function lc(d,u){d[0]=Math.min(d[0],u[0]),d[1]=Math.min(d[1],u[1]),d[2]=Math.max(d[2],u[0]),d[3]=Math.max(d[3],u[1])}function gd(d,u){return!(d[0]<=u[0]||d[2]>=u[2]||d[1]<=u[1]||d[3]>=u[3])}function Mp(d,u,h){const y=d[0]-u[0],w=d[1]-u[1],R=d[0]-h[0],F=d[1]-h[1];return y*F-R*w==0&&y*R<=0&&w*F<=0}function Ch(d,u,h,y){return(w=[y[0]-h[0],y[1]-h[1]])[0]*(R=[u[0]-d[0],u[1]-d[1]])[1]-w[1]*R[0]!=0&&!(!Xh(d,u,h,y)||!Xh(h,y,d,u));var w,R}function bc(d,u,h){for(const y of h)for(let w=0;w<y.length-1;++w)if(Ch(d,u,y[w],y[w+1]))return!0;return!1}function ms(d,u,h=!1){let y=!1;for(const G of u)for(let X=0;X<G.length-1;X++){if(Mp(d,G[X],G[X+1]))return h;(R=G[X])[1]>(w=d)[1]!=(F=G[X+1])[1]>w[1]&&w[0]<(F[0]-R[0])*(w[1]-R[1])/(F[1]-R[1])+R[0]&&(y=!y)}var w,R,F;return y}function Df(d,u){for(const h of u)if(ms(d,h))return!0;return!1}function Zh(d,u){for(const h of d)if(!ms(h,u))return!1;for(let h=0;h<d.length-1;++h)if(bc(d[h],d[h+1],u))return!1;return!0}function Vd(d,u){for(const h of u)if(Zh(d,h))return!0;return!1}function Xh(d,u,h,y){const w=y[0]-h[0],R=y[1]-h[1],F=(d[0]-h[0])*R-w*(d[1]-h[1]),G=(u[0]-h[0])*R-w*(u[1]-h[1]);return F>0&&G<0||F<0&&G>0}function qc(d,u,h){const y=[];for(let w=0;w<d.length;w++){const R=[];for(let F=0;F<d[w].length;F++){const G=xp(d[w][F],h);lc(u,G),R.push(G)}y.push(R)}return y}function Jh(d,u,h){const y=[];for(let w=0;w<d.length;w++){const R=qc(d[w],u,h);y.push(R)}return y}function _h(d,u,h,y){if(d[0]<h[0]||d[0]>h[2]){const w=.5*y;let R=d[0]-h[0]>w?-y:h[0]-d[0]>w?y:0;R===0&&(R=d[0]-h[2]>w?-y:h[2]-d[0]>w?y:0),d[0]+=R}lc(u,d)}function bh(d,u,h,y){const w=Math.pow(2,y.z)*mA,R=[y.x*mA,y.y*mA],F=[];for(const G of d)for(const X of G){const re=[X.x+R[0],X.y+R[1]];_h(re,u,h,w),F.push(re)}return F}function ef(d,u,h,y){const w=Math.pow(2,y.z)*mA,R=[y.x*mA,y.y*mA],F=[];for(const X of d){const re=[];for(const de of X){const be=[de.x+R[0],de.y+R[1]];lc(u,be),re.push(be)}F.push(re)}if(u[2]-u[0]<=w/2){(G=u)[0]=G[1]=1/0,G[2]=G[3]=-1/0;for(const X of F)for(const re of X)_h(re,u,h,w)}var G;return F}class yd{constructor(u,h){this.type=Yn,this.geojson=u,this.geometries=h}static parse(u,h){if(u.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(es(u[1])){const y=u[1];if(y.type==="FeatureCollection"){const w=[];for(const R of y.features){const{type:F,coordinates:G}=R.geometry;F==="Polygon"&&w.push(G),F==="MultiPolygon"&&w.push(...G)}if(w.length)return new yd(y,{type:"MultiPolygon",coordinates:w})}else if(y.type==="Feature"){const w=y.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new yd(y,y.geometry)}else if(y.type==="Polygon"||y.type==="MultiPolygon")return new yd(y,y)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(h,y){const w=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],F=h.canonicalID();if(y.type==="Polygon"){const G=qc(y.coordinates,R,F),X=bh(h.geometry(),w,R,F);if(!gd(w,R))return!1;for(const re of X)if(!ms(re,G))return!1}if(y.type==="MultiPolygon"){const G=Jh(y.coordinates,R,F),X=bh(h.geometry(),w,R,F);if(!gd(w,R))return!1;for(const re of X)if(!Df(re,G))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(h,y){const w=[1/0,1/0,-1/0,-1/0],R=[1/0,1/0,-1/0,-1/0],F=h.canonicalID();if(y.type==="Polygon"){const G=qc(y.coordinates,R,F),X=ef(h.geometry(),w,R,F);if(!gd(w,R))return!1;for(const re of X)if(!Zh(re,G))return!1}if(y.type==="MultiPolygon"){const G=Jh(y.coordinates,R,F),X=ef(h.geometry(),w,R,F);if(!gd(w,R))return!1;for(const re of X)if(!Vd(re,G))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let $d=class{constructor(d=[],u=(h,y)=>h<y?-1:h>y?1:0){if(this.data=d,this.length=this.data.length,this.compare=u,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(d){this.data.push(d),this._up(this.length++)}pop(){if(this.length===0)return;const d=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:u,compare:h}=this,y=u[d];for(;d>0;){const w=d-1>>1,R=u[w];if(h(y,R)>=0)break;u[d]=R,d=w}u[d]=y}_down(d){const{data:u,compare:h}=this,y=this.length>>1,w=u[d];for(;d<y;){let R=1+(d<<1);const F=R+1;if(F<this.length&&h(u[F],u[R])<0&&(R=F),h(u[R],w)>=0)break;u[d]=u[R],d=R}u[d]=w}};function au(d,u,h=0,y=d.length-1,w=Qu){for(;y>h;){if(y-h>600){const X=y-h+1,re=u-h+1,de=Math.log(X),be=.5*Math.exp(2*de/3),Ke=.5*Math.sqrt(de*be*(X-be)/X)*(re-X/2<0?-1:1);au(d,u,Math.max(h,Math.floor(u-re*be/X+Ke)),Math.min(y,Math.floor(u+(X-re)*be/X+Ke)),w)}const R=d[u];let F=h,G=y;for(xc(d,h,u),w(d[y],R)>0&&xc(d,h,y);F<G;){for(xc(d,F,G),F++,G--;w(d[F],R)<0;)F++;for(;w(d[G],R)>0;)G--}w(d[h],R)===0?xc(d,h,G):(G++,xc(d,G,y)),G<=u&&(h=G+1),u<=G&&(y=G-1)}}function xc(d,u,h){const y=d[u];d[u]=d[h],d[h]=y}function Qu(d,u){return d<u?-1:d>u?1:0}function Eu(d,u){if(d.length<=1)return[d];const h=[];let y,w;for(const R of d){const F=tf(R);F!==0&&(R.area=Math.abs(F),w===void 0&&(w=F<0),w===F<0?(y&&h.push(y),y=[R]):y.push(R))}if(y&&h.push(y),u>1)for(let R=0;R<h.length;R++)h[R].length<=u||(au(h[R],u,1,h[R].length-1,vd),h[R]=h[R].slice(0,u));return h}function vd(d,u){return u.area-d.area}function tf(d){let u=0;for(let h,y,w=0,R=d.length,F=R-1;w<R;F=w++)h=d[w],y=d[F],u+=(y.x-h.x)*(h.y+y.y);return u}const nf=1/298.257223563,Yu=nf*(2-nf),uc=Math.PI/180;class Ac{constructor(u){const h=6378.137*uc*1e3,y=Math.cos(u*uc),w=1/(1-Yu*(1-y*y)),R=Math.sqrt(w);this.kx=h*R*y,this.ky=h*R*w*(1-Yu)}distance(u,h){const y=this.wrap(u[0]-h[0])*this.kx,w=(u[1]-h[1])*this.ky;return Math.sqrt(y*y+w*w)}pointOnLine(u,h){let y,w,R,F,G=1/0;for(let X=0;X<u.length-1;X++){let re=u[X][0],de=u[X][1],be=this.wrap(u[X+1][0]-re)*this.kx,Ke=(u[X+1][1]-de)*this.ky,ze=0;be===0&&Ke===0||(ze=(this.wrap(h[0]-re)*this.kx*be+(h[1]-de)*this.ky*Ke)/(be*be+Ke*Ke),ze>1?(re=u[X+1][0],de=u[X+1][1]):ze>0&&(re+=be/this.kx*ze,de+=Ke/this.ky*ze)),be=this.wrap(h[0]-re)*this.kx,Ke=(h[1]-de)*this.ky;const We=be*be+Ke*Ke;We<G&&(G=We,y=re,w=de,R=X,F=ze)}return{point:[y,w],index:R,t:Math.max(0,Math.min(1,F))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function Cd(d,u){return u[0]-d[0]}function xh(d){return d[1]-d[0]+1}function cc(d,u){return d[1]>=d[0]&&d[1]<u}function _d(d,u){if(d[0]>d[1])return[null,null];const h=xh(d);if(u){if(h===2)return[d,null];const w=Math.floor(h/2);return[[d[0],d[0]+w],[d[0]+w,d[1]]]}if(h===1)return[d,null];const y=Math.floor(h/2)-1;return[[d[0],d[0]+y],[d[0]+y+1,d[1]]]}function bd(d,u){if(!cc(u,d.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let y=u[0];y<=u[1];++y)lc(h,d[y]);return h}function ll(d){const u=[1/0,1/0,-1/0,-1/0];for(const h of d)for(const y of h)lc(u,y);return u}function Cl(d){return d[0]!==-1/0&&d[1]!==-1/0&&d[2]!==1/0&&d[3]!==1/0}function ko(d,u,h){if(!Cl(d)||!Cl(u))return NaN;let y=0,w=0;return d[2]<u[0]&&(y=u[0]-d[2]),d[0]>u[2]&&(y=d[0]-u[2]),d[1]>u[3]&&(w=d[1]-u[3]),d[3]<u[1]&&(w=u[1]-d[3]),h.distance([0,0],[y,w])}function zA(d,u,h){const y=h.pointOnLine(u,d);return h.distance(d,y.point)}function Ff(d,u,h,y,w){const R=Math.min(zA(d,[h,y],w),zA(u,[h,y],w)),F=Math.min(zA(h,[d,u],w),zA(y,[d,u],w));return Math.min(R,F)}function xd(d,u,h,y,w){if(!cc(u,d.length)||!cc(y,h.length))return 1/0;let R=1/0;for(let F=u[0];F<u[1];++F){const G=d[F],X=d[F+1];for(let re=y[0];re<y[1];++re){const de=h[re],be=h[re+1];if(Ch(G,X,de,be))return 0;R=Math.min(R,Ff(G,X,de,be,w))}}return R}function qu(d,u,h,y,w){if(!cc(u,d.length)||!cc(y,h.length))return NaN;let R=1/0;for(let F=u[0];F<=u[1];++F)for(let G=y[0];G<=y[1];++G)if(R=Math.min(R,w.distance(d[F],h[G])),R===0)return R;return R}function Mh(d,u,h){if(ms(d,u,!0))return 0;let y=1/0;for(const w of u){const R=w[0],F=w[w.length-1];if(R!==F&&(y=Math.min(y,zA(d,[F,R],h)),y===0))return y;const G=h.pointOnLine(w,d);if(y=Math.min(y,h.distance(d,G.point)),y===0)return y}return y}function Lf(d,u,h,y){if(!cc(u,d.length))return NaN;for(let R=u[0];R<=u[1];++R)if(ms(d[R],h,!0))return 0;let w=1/0;for(let R=u[0];R<u[1];++R){const F=d[R],G=d[R+1];for(const X of h)for(let re=0,de=X.length,be=de-1;re<de;be=re++){const Ke=X[be],ze=X[re];if(Ch(F,G,Ke,ze))return 0;w=Math.min(w,Ff(F,G,Ke,ze,y))}}return w}function Md(d,u){for(const h of d)for(const y of h)if(ms(y,u,!0))return!0;return!1}function Uf(d,u,h,y=1/0){const w=ll(d),R=ll(u);if(y!==1/0&&ko(w,R,h)>=y)return y;if(gd(w,R)){if(Md(d,u))return 0}else if(Md(u,d))return 0;let F=1/0;for(const G of d)for(let X=0,re=G.length,de=re-1;X<re;de=X++){const be=G[de],Ke=G[X];for(const ze of u)for(let We=0,tt=ze.length,ct=tt-1;We<tt;ct=We++){const vt=ze[ct],zt=ze[We];if(Ch(be,Ke,vt,zt))return 0;F=Math.min(F,Ff(be,Ke,vt,zt,h))}}return F}function zf(d,u,h,y,w,R){if(!R)return;const F=ko(bd(y,R),w,h);F<u&&d.push([F,R,[0,0]])}function Hd(d,u,h,y,w,R,F){if(!R||!F)return;const G=ko(bd(y,R),bd(w,F),h);G<u&&d.push([G,R,F])}function gA(d,u,h,y,w=1/0){let R=Math.min(y.distance(d[0],h[0][0]),w);if(R===0)return R;const F=new $d([[0,[0,d.length-1],[0,0]]],Cd),G=ll(h);for(;F.length>0;){const X=F.pop();if(X[0]>=R)continue;const re=X[1],de=u?50:100;if(xh(re)<=de){if(!cc(re,d.length))return NaN;if(u){const be=Lf(d,re,h,y);if(isNaN(be)||be===0)return be;R=Math.min(R,be)}else for(let be=re[0];be<=re[1];++be){const Ke=Mh(d[be],h,y);if(R=Math.min(R,Ke),R===0)return 0}}else{const be=_d(re,u);zf(F,R,y,d,G,be[0]),zf(F,R,y,d,G,be[1])}}return R}function en(d,u,h,y,w,R=1/0){let F=Math.min(R,w.distance(d[0],h[0]));if(F===0)return F;const G=new $d([[0,[0,d.length-1],[0,h.length-1]]],Cd);for(;G.length>0;){const X=G.pop();if(X[0]>=F)continue;const re=X[1],de=X[2],be=u?50:100,Ke=y?50:100;if(xh(re)<=be&&xh(de)<=Ke){if(!cc(re,d.length)&&cc(de,h.length))return NaN;let ze;if(u&&y)ze=xd(d,re,h,de,w),F=Math.min(F,ze);else if(u&&!y){const We=d.slice(re[0],re[1]+1);for(let tt=de[0];tt<=de[1];++tt)if(ze=zA(h[tt],We,w),F=Math.min(F,ze),F===0)return F}else if(!u&&y){const We=h.slice(de[0],de[1]+1);for(let tt=re[0];tt<=re[1];++tt)if(ze=zA(d[tt],We,w),F=Math.min(F,ze),F===0)return F}else ze=qu(d,re,h,de,w),F=Math.min(F,ze)}else{const ze=_d(re,u),We=_d(de,y);Hd(G,F,w,d,h,ze[0],We[0]),Hd(G,F,w,d,h,ze[0],We[1]),Hd(G,F,w,d,h,ze[1],We[0]),Hd(G,F,w,d,h,ze[1],We[1])}}return F}function Tn(d){return d.type==="MultiPolygon"?d.coordinates.map(u=>({type:"Polygon",coordinates:u})):d.type==="MultiLineString"?d.coordinates.map(u=>({type:"LineString",coordinates:u})):d.type==="MultiPoint"?d.coordinates.map(u=>({type:"Point",coordinates:u})):[d]}class un{constructor(u,h){this.type=Bn,this.geojson=u,this.geometries=h}static parse(u,h){if(u.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(es(u[1])){const y=u[1];if(y.type==="FeatureCollection")return new un(y,y.features.map(w=>Tn(w.geometry)).flat());if(y.type==="Feature")return new un(y,Tn(y.geometry));if("type"in y&&"coordinates"in y)return new un(y,Tn(y))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(h,y){const w=h.geometry(),R=w.flat().map(X=>UA([X.x,X.y],h.canonical));if(w.length===0)return NaN;const F=new Ac(R[0][1]);let G=1/0;for(const X of y){switch(X.type){case"Point":G=Math.min(G,en(R,!1,[X.coordinates],!1,F,G));break;case"LineString":G=Math.min(G,en(R,!1,X.coordinates,!0,F,G));break;case"Polygon":G=Math.min(G,gA(R,!1,X.coordinates,F,G))}if(G===0)return G}return G}(u,this.geometries);if(u.geometryType()==="LineString")return function(h,y){const w=h.geometry(),R=w.flat().map(X=>UA([X.x,X.y],h.canonical));if(w.length===0)return NaN;const F=new Ac(R[0][1]);let G=1/0;for(const X of y){switch(X.type){case"Point":G=Math.min(G,en(R,!0,[X.coordinates],!1,F,G));break;case"LineString":G=Math.min(G,en(R,!0,X.coordinates,!0,F,G));break;case"Polygon":G=Math.min(G,gA(R,!0,X.coordinates,F,G))}if(G===0)return G}return G}(u,this.geometries);if(u.geometryType()==="Polygon")return function(h,y){const w=h.geometry();if(w.length===0||w[0].length===0)return NaN;const R=Eu(w,0).map(X=>X.map(re=>re.map(de=>UA([de.x,de.y],h.canonical)))),F=new Ac(R[0][0][0][1]);let G=1/0;for(const X of y)for(const re of R){switch(X.type){case"Point":G=Math.min(G,gA([X.coordinates],!1,re,F,G));break;case"LineString":G=Math.min(G,gA(X.coordinates,!0,re,F,G));break;case"Polygon":G=Math.min(G,Uf(re,X.coordinates,F,G))}if(G===0)return G}return G}(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Tr={"==":wu,"!=":qs,">":al,"<":Yd,">=":vh,"<=":su,array:Ta,at:Ki,boolean:Ta,case:$t,coalesce:Gi,collator:Su,format:Yc,image:ws,in:ee,"index-of":Oe,interpolate:si,"interpolate-hcl":si,"interpolate-lab":si,length:LA,let:Wi,literal:zs,match:st,number:Ta,"number-format":qd,object:Ta,slice:Ir,step:Zr,string:Ta,"to-boolean":sl,"to-color":sl,"to-number":sl,"to-string":sl,var:oo,within:yd,distance:un};class ci{constructor(u,h,y,w){this.name=u,this.type=h,this._evaluate=y,this.args=w}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,h){const y=u[0],w=ci.definitions[y];if(!w)return h.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0);const R=Array.isArray(w)?w[0]:w.type,F=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,G=F.filter(([re])=>!Array.isArray(re)||re.length===u.length-1);let X=null;for(const[re,de]of G){X=new jl(h.registry,rf,h.path,null,h.scope);const be=[];let Ke=!1;for(let ze=1;ze<u.length;ze++){const We=u[ze],tt=Array.isArray(re)?re[ze-1]:re.type,ct=X.parse(We,1+be.length,tt);if(!ct){Ke=!0;break}be.push(ct)}if(!Ke)if(Array.isArray(re)&&re.length!==be.length)X.error(`Expected ${re.length} arguments, but found ${be.length} instead.`);else{for(let ze=0;ze<be.length;ze++){const We=Array.isArray(re)?re[ze]:re.type,tt=be[ze];X.concat(ze+1).checkSubtype(We,tt.type)}if(X.errors.length===0)return new ci(y,R,de,be)}}if(G.length===1)h.errors.push(...X.errors);else{const re=(G.length?G:F).map(([be])=>{return Ke=be,Array.isArray(Ke)?`(${Ke.map(bi).join(", ")})`:`(${bi(Ke.type)}...)`;var Ke}).join(" | "),de=[];for(let be=1;be<u.length;be++){const Ke=h.parse(u[be],1+de.length);if(!Ke)return null;de.push(bi(Ke.type))}h.error(`Expected arguments of type ${re}, but found (${de.join(", ")}) instead.`)}return null}static register(u,h){ci.definitions=h;for(const y in h)u[y]=ci}}function To(d,[u,h,y,w]){u=u.evaluate(d),h=h.evaluate(d),y=y.evaluate(d);const R=w?w.evaluate(d):1,F=Fo(u,h,y,R);if(F)throw new Do(F);return new Si(u/255,h/255,y/255,R,!1)}function ya(d,u){return d in u}function ts(d,u){const h=u[d];return h===void 0?null:h}function Vu(d){return{type:d}}function rf(d){if(d instanceof oo)return rf(d.boundExpression);if(d instanceof ci&&d.name==="error"||d instanceof Su||d instanceof yd||d instanceof un)return!1;const u=d instanceof sl||d instanceof Ta;let h=!0;return d.eachChild(y=>{h=u?h&&rf(y):h&&y instanceof zs}),!!h&&lu(d)&&yA(d,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function lu(d){if(d instanceof ci&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof yd||d instanceof un)return!1;let u=!0;return d.eachChild(h=>{u&&!lu(h)&&(u=!1)}),u}function $u(d){if(d instanceof ci&&d.name==="feature-state")return!1;let u=!0;return d.eachChild(h=>{u&&!$u(h)&&(u=!1)}),u}function yA(d,u){if(d instanceof ci&&u.indexOf(d.name)>=0)return!1;let h=!0;return d.eachChild(y=>{h&&!yA(y,u)&&(h=!1)}),h}function Nl(d){return{result:"success",value:d}}function Wl(d){return{result:"error",value:d}}function vA(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function Po(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function Mc(d){return!!d.expression&&d.expression.interpolated}function lo(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function Bu(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function CA(d){return d}function Tl(d,u){const h=u.type==="color",y=d.stops&&typeof d.stops[0][0]=="object",w=y||!(y||d.property!==void 0),R=d.type||(Mc(u)?"exponential":"interval");if(h||u.type==="padding"){const de=h?Si.parse:ho.parse;(d=Sr({},d)).stops&&(d.stops=d.stops.map(be=>[be[0],de(be[1])])),d.default=de(d.default?d.default:u.default)}if(d.colorSpace&&(F=d.colorSpace)!=="rgb"&&F!=="hcl"&&F!=="lab")throw new Error(`Unknown color space: "${d.colorSpace}"`);var F;let G,X,re;if(R==="exponential")G=Zd;else if(R==="interval")G=Zu;else if(R==="categorical"){G=_A,X=Object.create(null);for(const de of d.stops)X[de[0]]=de[1];re=typeof d.stops[0][0]}else{if(R!=="identity")throw new Error(`Unknown function type "${R}"`);G=of}if(y){const de={},be=[];for(let We=0;We<d.stops.length;We++){const tt=d.stops[We],ct=tt[0].zoom;de[ct]===void 0&&(de[ct]={zoom:ct,type:d.type,property:d.property,default:d.default,stops:[]},be.push(ct)),de[ct].stops.push([tt[0].value,tt[1]])}const Ke=[];for(const We of be)Ke.push([de[We].zoom,Tl(de[We],u)]);const ze={name:"linear"};return{kind:"composite",interpolationType:ze,interpolationFactor:si.interpolationFactor.bind(void 0,ze),zoomStops:Ke.map(We=>We[0]),evaluate:({zoom:We},tt)=>Zd({stops:Ke,base:d.base},u,We).evaluate(We,tt)}}if(w){const de=R==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:de,interpolationFactor:si.interpolationFactor.bind(void 0,de),zoomStops:d.stops.map(be=>be[0]),evaluate:({zoom:be})=>G(d,u,be,X,re)}}return{kind:"source",evaluate(de,be){const Ke=be&&be.properties?be.properties[d.property]:void 0;return Ke===void 0?Hu(d.default,u.default):G(d,u,Ke,X,re)}}}function Hu(d,u,h){return d!==void 0?d:u!==void 0?u:h!==void 0?h:void 0}function _A(d,u,h,y,w){return Hu(typeof h===w?y[h]:void 0,d.default,u.default)}function Zu(d,u,h){if(lo(h)!=="number")return Hu(d.default,u.default);const y=d.stops.length;if(y===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[y-1][0])return d.stops[y-1][1];const w=Vn(d.stops.map(R=>R[0]),h);return d.stops[w][1]}function Zd(d,u,h){const y=d.base!==void 0?d.base:1;if(lo(h)!=="number")return Hu(d.default,u.default);const w=d.stops.length;if(w===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[w-1][0])return d.stops[w-1][1];const R=Vn(d.stops.map(de=>de[0]),h),F=function(de,be,Ke,ze){const We=ze-Ke,tt=de-Ke;return We===0?0:be===1?tt/We:(Math.pow(be,tt)-1)/(Math.pow(be,We)-1)}(h,y,d.stops[R][0],d.stops[R+1][0]),G=d.stops[R][1],X=d.stops[R+1][1],re=Ui[u.type]||CA;return typeof G.evaluate=="function"?{evaluate(...de){const be=G.evaluate.apply(void 0,de),Ke=X.evaluate.apply(void 0,de);if(be!==void 0&&Ke!==void 0)return re(be,Ke,F,d.colorSpace)}}:re(G,X,F,d.colorSpace)}function of(d,u,h){switch(u.type){case"color":h=Si.parse(h);break;case"formatted":h=Us.fromString(h.toString());break;case"resolvedImage":h=ra.fromString(h.toString());break;case"padding":h=ho.parse(h);break;default:lo(h)===u.type||u.type==="enum"&&u.values[h]||(h=void 0)}return Hu(h,d.default,u.default)}ci.register(Tr,{error:[{kind:"error"},[$n],(d,[u])=>{throw new Do(u.evaluate(d))}],typeof:[$n,[Mr],(d,[u])=>bi(Mo(u.evaluate(d)))],"to-rgba":[ps(Bn,4),[Qr],(d,[u])=>{const[h,y,w,R]=u.evaluate(d).rgb;return[255*h,255*y,255*w,R]}],rgb:[Qr,[Bn,Bn,Bn],To],rgba:[Qr,[Bn,Bn,Bn,Bn],To],has:{type:Yn,overloads:[[[$n],(d,[u])=>ya(u.evaluate(d),d.properties())],[[$n,ma],(d,[u,h])=>ya(u.evaluate(d),h.evaluate(d))]]},get:{type:Mr,overloads:[[[$n],(d,[u])=>ts(u.evaluate(d),d.properties())],[[$n,ma],(d,[u,h])=>ts(u.evaluate(d),h.evaluate(d))]]},"feature-state":[Mr,[$n],(d,[u])=>ts(u.evaluate(d),d.featureState||{})],properties:[ma,[],d=>d.properties()],"geometry-type":[$n,[],d=>d.geometryType()],id:[Mr,[],d=>d.id()],zoom:[Bn,[],d=>d.globals.zoom],"heatmap-density":[Bn,[],d=>d.globals.heatmapDensity||0],"line-progress":[Bn,[],d=>d.globals.lineProgress||0],accumulated:[Mr,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[Bn,Vu(Bn),(d,u)=>{let h=0;for(const y of u)h+=y.evaluate(d);return h}],"*":[Bn,Vu(Bn),(d,u)=>{let h=1;for(const y of u)h*=y.evaluate(d);return h}],"-":{type:Bn,overloads:[[[Bn,Bn],(d,[u,h])=>u.evaluate(d)-h.evaluate(d)],[[Bn],(d,[u])=>-u.evaluate(d)]]},"/":[Bn,[Bn,Bn],(d,[u,h])=>u.evaluate(d)/h.evaluate(d)],"%":[Bn,[Bn,Bn],(d,[u,h])=>u.evaluate(d)%h.evaluate(d)],ln2:[Bn,[],()=>Math.LN2],pi:[Bn,[],()=>Math.PI],e:[Bn,[],()=>Math.E],"^":[Bn,[Bn,Bn],(d,[u,h])=>Math.pow(u.evaluate(d),h.evaluate(d))],sqrt:[Bn,[Bn],(d,[u])=>Math.sqrt(u.evaluate(d))],log10:[Bn,[Bn],(d,[u])=>Math.log(u.evaluate(d))/Math.LN10],ln:[Bn,[Bn],(d,[u])=>Math.log(u.evaluate(d))],log2:[Bn,[Bn],(d,[u])=>Math.log(u.evaluate(d))/Math.LN2],sin:[Bn,[Bn],(d,[u])=>Math.sin(u.evaluate(d))],cos:[Bn,[Bn],(d,[u])=>Math.cos(u.evaluate(d))],tan:[Bn,[Bn],(d,[u])=>Math.tan(u.evaluate(d))],asin:[Bn,[Bn],(d,[u])=>Math.asin(u.evaluate(d))],acos:[Bn,[Bn],(d,[u])=>Math.acos(u.evaluate(d))],atan:[Bn,[Bn],(d,[u])=>Math.atan(u.evaluate(d))],min:[Bn,Vu(Bn),(d,u)=>Math.min(...u.map(h=>h.evaluate(d)))],max:[Bn,Vu(Bn),(d,u)=>Math.max(...u.map(h=>h.evaluate(d)))],abs:[Bn,[Bn],(d,[u])=>Math.abs(u.evaluate(d))],round:[Bn,[Bn],(d,[u])=>{const h=u.evaluate(d);return h<0?-Math.round(-h):Math.round(h)}],floor:[Bn,[Bn],(d,[u])=>Math.floor(u.evaluate(d))],ceil:[Bn,[Bn],(d,[u])=>Math.ceil(u.evaluate(d))],"filter-==":[Yn,[$n,Mr],(d,[u,h])=>d.properties()[u.value]===h.value],"filter-id-==":[Yn,[Mr],(d,[u])=>d.id()===u.value],"filter-type-==":[Yn,[$n],(d,[u])=>d.geometryType()===u.value],"filter-<":[Yn,[$n,Mr],(d,[u,h])=>{const y=d.properties()[u.value],w=h.value;return typeof y==typeof w&&y<w}],"filter-id-<":[Yn,[Mr],(d,[u])=>{const h=d.id(),y=u.value;return typeof h==typeof y&&h<y}],"filter->":[Yn,[$n,Mr],(d,[u,h])=>{const y=d.properties()[u.value],w=h.value;return typeof y==typeof w&&y>w}],"filter-id->":[Yn,[Mr],(d,[u])=>{const h=d.id(),y=u.value;return typeof h==typeof y&&h>y}],"filter-<=":[Yn,[$n,Mr],(d,[u,h])=>{const y=d.properties()[u.value],w=h.value;return typeof y==typeof w&&y<=w}],"filter-id-<=":[Yn,[Mr],(d,[u])=>{const h=d.id(),y=u.value;return typeof h==typeof y&&h<=y}],"filter->=":[Yn,[$n,Mr],(d,[u,h])=>{const y=d.properties()[u.value],w=h.value;return typeof y==typeof w&&y>=w}],"filter-id->=":[Yn,[Mr],(d,[u])=>{const h=d.id(),y=u.value;return typeof h==typeof y&&h>=y}],"filter-has":[Yn,[Mr],(d,[u])=>u.value in d.properties()],"filter-has-id":[Yn,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[Yn,[ps($n)],(d,[u])=>u.value.indexOf(d.geometryType())>=0],"filter-id-in":[Yn,[ps(Mr)],(d,[u])=>u.value.indexOf(d.id())>=0],"filter-in-small":[Yn,[$n,ps(Mr)],(d,[u,h])=>h.value.indexOf(d.properties()[u.value])>=0],"filter-in-large":[Yn,[$n,ps(Mr)],(d,[u,h])=>function(y,w,R,F){for(;R<=F;){const G=R+F>>1;if(w[G]===y)return!0;w[G]>y?F=G-1:R=G+1}return!1}(d.properties()[u.value],h.value,0,h.value.length-1)],all:{type:Yn,overloads:[[[Yn,Yn],(d,[u,h])=>u.evaluate(d)&&h.evaluate(d)],[Vu(Yn),(d,u)=>{for(const h of u)if(!h.evaluate(d))return!1;return!0}]]},any:{type:Yn,overloads:[[[Yn,Yn],(d,[u,h])=>u.evaluate(d)||h.evaluate(d)],[Vu(Yn),(d,u)=>{for(const h of u)if(h.evaluate(d))return!0;return!1}]]},"!":[Yn,[Yn],(d,[u])=>!u.evaluate(d)],"is-supported-script":[Yn,[$n],(d,[u])=>{const h=d.globals&&d.globals.isSupportedScript;return!h||h(u.evaluate(d))}],upcase:[$n,[$n],(d,[u])=>u.evaluate(d).toUpperCase()],downcase:[$n,[$n],(d,[u])=>u.evaluate(d).toLowerCase()],concat:[$n,Vu(Mr),(d,u)=>u.map(h=>ga(h.evaluate(d))).join("")],"resolved-locale":[$n,[wi],(d,[u])=>u.evaluate(d).resolvedLocale()]});class Qa{constructor(u,h){var y;this.expression=u,this._warningHistory={},this._evaluator=new Hr,this._defaultValue=h?(y=h).type==="color"&&Bu(y.default)?new Si(0,0,0,0):y.type==="color"?Si.parse(y.default)||null:y.type==="padding"?ho.parse(y.default)||null:y.type==="variableAnchorOffsetCollection"?Qs.parse(y.default)||null:y.type==="projectionDefinition"?No.parse(y.default)||null:y.default===void 0?null:y.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(u,h,y,w,R,F){return this._evaluator.globals=u,this._evaluator.feature=h,this._evaluator.featureState=y,this._evaluator.canonical=w,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)}evaluate(u,h,y,w,R,F){this._evaluator.globals=u,this._evaluator.feature=h||null,this._evaluator.featureState=y||null,this._evaluator.canonical=w,this._evaluator.availableImages=R||null,this._evaluator.formattedSection=F||null;try{const G=this.expression.evaluate(this._evaluator);if(G==null||typeof G=="number"&&G!=G)return this._defaultValue;if(this._enumValues&&!(G in this._enumValues))throw new Do(`Expected value to be one of ${Object.keys(this._enumValues).map(X=>JSON.stringify(X)).join(", ")}, but found ${JSON.stringify(G)} instead.`);return G}catch(G){return this._warningHistory[G.message]||(this._warningHistory[G.message]=!0,typeof console<"u"&&console.warn(G.message)),this._defaultValue}}}function wc(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in Tr}function Sc(d,u){const h=new jl(Tr,rf,[],u?function(w){const R={color:Qr,string:$n,number:Bn,enum:$n,boolean:Yn,formatted:Zi,padding:Ts,projectionDefinition:co,resolvedImage:xs,variableAnchorOffsetCollection:aa};return w.type==="array"?ps(R[w.value]||Mr,w.length):R[w.type]}(u):void 0),y=h.parse(d,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?Nl(new Qa(y,u)):Wl(h.errors)}class Ec{constructor(u,h){this.kind=u,this._styleExpression=h,this.isStateDependent=u!=="constant"&&!$u(h.expression)}evaluateWithoutErrorHandling(u,h,y,w,R,F){return this._styleExpression.evaluateWithoutErrorHandling(u,h,y,w,R,F)}evaluate(u,h,y,w,R,F){return this._styleExpression.evaluate(u,h,y,w,R,F)}}class sf{constructor(u,h,y,w){this.kind=u,this.zoomStops=y,this._styleExpression=h,this.isStateDependent=u!=="camera"&&!$u(h.expression),this.interpolationType=w}evaluateWithoutErrorHandling(u,h,y,w,R,F){return this._styleExpression.evaluateWithoutErrorHandling(u,h,y,w,R,F)}evaluate(u,h,y,w,R,F){return this._styleExpression.evaluate(u,h,y,w,R,F)}interpolationFactor(u,h,y){return this.interpolationType?si.interpolationFactor(this.interpolationType,u,h,y):0}}function bA(d,u){const h=Sc(d,u);if(h.result==="error")return h;const y=h.value.expression,w=lu(y);if(!w&&!vA(u))return Wl([new Hn("","data expressions not supported")]);const R=yA(y,["zoom"]);if(!R&&!Po(u))return Wl([new Hn("","zoom expressions not supported")]);const F=NA(y);return F||R?F instanceof Hn?Wl([F]):F instanceof si&&!Mc(u)?Wl([new Hn("",'"interpolate" expressions cannot be used with this property')]):Nl(F?new sf(w?"camera":"composite",h.value,F.labels,F instanceof si?F.interpolation:void 0):new Ec(w?"constant":"source",h.value)):Wl([new Hn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class jA{constructor(u,h){this._parameters=u,this._specification=h,Sr(this,Tl(this._parameters,this._specification))}static deserialize(u){return new jA(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function NA(d){let u=null;if(d instanceof Wi)u=NA(d.result);else if(d instanceof Gi){for(const h of d.args)if(u=NA(h),u)break}else(d instanceof Zr||d instanceof si)&&d.input instanceof ci&&d.input.name==="zoom"&&(u=d);return u instanceof Hn||d.eachChild(h=>{const y=NA(h);y instanceof Hn?u=y:!u&&y?u=new Hn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&y&&u!==y&&(u=new Hn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function wd(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const u of d.slice(1))if(!wd(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const us={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Vc(d){if(d==null)return{filter:()=>!0,needGeometry:!1};wd(d)||(d=$c(d));const u=Sc(d,us);if(u.result==="error")throw new Error(u.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,y,w)=>u.value.evaluate(h,y,{},w),needGeometry:Xu(d)}}function Bc(d,u){return d<u?-1:d>u?1:0}function Xu(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let u=1;u<d.length;u++)if(Xu(d[u]))return!0;return!1}function $c(d){if(!d)return!0;const u=d[0];return d.length<=1?u!=="any":u==="=="?Xd(d[1],d[2],"=="):u==="!="?Ju(Xd(d[1],d[2],"==")):u==="<"||u===">"||u==="<="||u===">="?Xd(d[1],d[2],u):u==="any"?(h=d.slice(1),["any"].concat(h.map($c))):u==="all"?["all"].concat(d.slice(1).map($c)):u==="none"?["all"].concat(d.slice(1).map($c).map(Ju)):u==="in"?Oc(d[1],d.slice(2)):u==="!in"?Ju(Oc(d[1],d.slice(2))):u==="has"?Ic(d[1]):u!=="!has"||Ju(Ic(d[1]));var h}function Xd(d,u,h){switch(d){case"$type":return[`filter-type-${h}`,u];case"$id":return[`filter-id-${h}`,u];default:return[`filter-${h}`,d,u]}}function Oc(d,u){if(u.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(h=>typeof h!=typeof u[0])?["filter-in-large",d,["literal",u.sort(Bc)]]:["filter-in-small",d,["literal",u]]}}function Ic(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Ju(d){return["!",d]}function As(d){const u=typeof d;if(u==="number"||u==="boolean"||u==="string"||d==null)return JSON.stringify(d);if(Array.isArray(d)){let w="[";for(const R of d)w+=`${As(R)},`;return`${w}]`}const h=Object.keys(d).sort();let y="{";for(let w=0;w<h.length;w++)y+=`${JSON.stringify(h[w])}:${As(d[h[w]])},`;return`${y}}`}function Ya(d){let u="";for(const h of je)u+=`/${As(d[h])}`;return u}function wp(d){const u=d.value;return u?[new on(d.key,u,"constants have been deprecated as of v8")]:[]}function js(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function xA(d){if(Array.isArray(d))return d.map(xA);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const u={};for(const h in d)u[h]=xA(d[h]);return u}return js(d)}function ul(d){const u=d.key,h=d.value,y=d.valueSpec||{},w=d.objectElementValidators||{},R=d.style,F=d.styleSpec,G=d.validateSpec;let X=[];const re=lo(h);if(re!=="object")return[new on(u,h,`object expected, ${re} found`)];for(const de in h){const be=de.split(".")[0],Ke=y[be]||y["*"];let ze;if(w[be])ze=w[be];else if(y[be])ze=G;else if(w["*"])ze=w["*"];else{if(!y["*"]){X.push(new on(u,h[de],`unknown property "${de}"`));continue}ze=G}X=X.concat(ze({key:(u&&`${u}.`)+de,value:h[de],valueSpec:Ke,style:R,styleSpec:F,object:h,objectKey:de,validateSpec:G},h))}for(const de in y)w[de]||y[de].required&&y[de].default===void 0&&h[de]===void 0&&X.push(new on(u,h,`missing required property "${de}"`));return X}function Hc(d){const u=d.value,h=d.valueSpec,y=d.style,w=d.styleSpec,R=d.key,F=d.arrayElementValidator||d.validateSpec;if(lo(u)!=="array")return[new on(R,u,`array expected, ${lo(u)} found`)];if(h.length&&u.length!==h.length)return[new on(R,u,`array length ${h.length} expected, length ${u.length} found`)];if(h["min-length"]&&u.length<h["min-length"])return[new on(R,u,`array length at least ${h["min-length"]} expected, length ${u.length} found`)];let G={type:h.value,values:h.values};w.$version<7&&(G.function=h.function),lo(h.value)==="object"&&(G=h.value);let X=[];for(let re=0;re<u.length;re++)X=X.concat(F({array:u,arrayIndex:re,value:u[re],valueSpec:G,validateSpec:d.validateSpec,style:y,styleSpec:w,key:`${R}[${re}]`}));return X}function Gl(d){const u=d.key,h=d.value,y=d.valueSpec;let w=lo(h);return w==="number"&&h!=h&&(w="NaN"),w!=="number"?[new on(u,h,`number expected, ${w} found`)]:"minimum"in y&&h<y.minimum?[new on(u,h,`${h} is less than the minimum value ${y.minimum}`)]:"maximum"in y&&h>y.maximum?[new on(u,h,`${h} is greater than the maximum value ${y.maximum}`)]:[]}function WA(d){const u=d.valueSpec,h=js(d.value.type);let y,w,R,F={};const G=h!=="categorical"&&d.value.property===void 0,X=!G,re=lo(d.value.stops)==="array"&&lo(d.value.stops[0])==="array"&&lo(d.value.stops[0][0])==="object",de=ul({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(ze){if(h==="identity")return[new on(ze.key,ze.value,'identity function may not have a "stops" property')];let We=[];const tt=ze.value;return We=We.concat(Hc({key:ze.key,value:tt,valueSpec:ze.valueSpec,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,arrayElementValidator:be})),lo(tt)==="array"&&tt.length===0&&We.push(new on(ze.key,tt,"array must have at least one stop")),We},default:function(ze){return ze.validateSpec({key:ze.key,value:ze.value,valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec})}}});return h==="identity"&&G&&de.push(new on(d.key,d.value,'missing required property "property"')),h==="identity"||d.value.stops||de.push(new on(d.key,d.value,'missing required property "stops"')),h==="exponential"&&d.valueSpec.expression&&!Mc(d.valueSpec)&&de.push(new on(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(X&&!vA(d.valueSpec)?de.push(new on(d.key,d.value,"property functions not supported")):G&&!Po(d.valueSpec)&&de.push(new on(d.key,d.value,"zoom functions not supported"))),h!=="categorical"&&!re||d.value.property!==void 0||de.push(new on(d.key,d.value,'"property" property is required')),de;function be(ze){let We=[];const tt=ze.value,ct=ze.key;if(lo(tt)!=="array")return[new on(ct,tt,`array expected, ${lo(tt)} found`)];if(tt.length!==2)return[new on(ct,tt,`array length 2 expected, length ${tt.length} found`)];if(re){if(lo(tt[0])!=="object")return[new on(ct,tt,`object expected, ${lo(tt[0])} found`)];if(tt[0].zoom===void 0)return[new on(ct,tt,"object stop key must have zoom")];if(tt[0].value===void 0)return[new on(ct,tt,"object stop key must have value")];if(R&&R>js(tt[0].zoom))return[new on(ct,tt[0].zoom,"stop zoom values must appear in ascending order")];js(tt[0].zoom)!==R&&(R=js(tt[0].zoom),w=void 0,F={}),We=We.concat(ul({key:`${ct}[0]`,value:tt[0],valueSpec:{zoom:{}},validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{zoom:Gl,value:Ke}}))}else We=We.concat(Ke({key:`${ct}[0]`,value:tt[0],validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec},tt));return wc(xA(tt[1]))?We.concat([new on(`${ct}[1]`,tt[1],"expressions are not allowed in function stops.")]):We.concat(ze.validateSpec({key:`${ct}[1]`,value:tt[1],valueSpec:u,validateSpec:ze.validateSpec,style:ze.style,styleSpec:ze.styleSpec}))}function Ke(ze,We){const tt=lo(ze.value),ct=js(ze.value),vt=ze.value!==null?ze.value:We;if(y){if(tt!==y)return[new on(ze.key,vt,`${tt} stop domain type must match previous stop domain type ${y}`)]}else y=tt;if(tt!=="number"&&tt!=="string"&&tt!=="boolean")return[new on(ze.key,vt,"stop domain value must be a number, string, or boolean")];if(tt!=="number"&&h!=="categorical"){let zt=`number expected, ${tt} found`;return vA(u)&&h===void 0&&(zt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new on(ze.key,vt,zt)]}return h!=="categorical"||tt!=="number"||isFinite(ct)&&Math.floor(ct)===ct?h!=="categorical"&&tt==="number"&&w!==void 0&&ct<w?[new on(ze.key,vt,"stop domain values must appear in ascending order")]:(w=ct,h==="categorical"&&ct in F?[new on(ze.key,vt,"stop domain values must be unique")]:(F[ct]=!0,[])):[new on(ze.key,vt,`integer expected, found ${ct}`)]}}function va(d){const u=(d.expressionContext==="property"?bA:Sc)(xA(d.value),d.valueSpec);if(u.result==="error")return u.value.map(y=>new on(`${d.key}${y.key}`,d.value,y.message));const h=u.value.expression||u.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!h.outputDefined())return[new on(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!$u(h))return[new on(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!$u(h))return[new on(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!yA(h,["zoom","feature-state"]))return[new on(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!lu(h))return[new on(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function eA(d){const u=d.key,h=d.value,y=d.valueSpec,w=[];return Array.isArray(y.values)?y.values.indexOf(js(h))===-1&&w.push(new on(u,h,`expected one of [${y.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(y.values).indexOf(js(h))===-1&&w.push(new on(u,h,`expected one of [${Object.keys(y.values).join(", ")}], ${JSON.stringify(h)} found`)),w}function Ou(d){return wd(xA(d.value))?va(Sr({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Sd(d)}function Sd(d){const u=d.value,h=d.key;if(lo(u)!=="array")return[new on(h,u,`array expected, ${lo(u)} found`)];const y=d.styleSpec;let w,R=[];if(u.length<1)return[new on(h,u,"filter array must have at least 1 element")];switch(R=R.concat(eA({key:`${h}[0]`,value:u[0],valueSpec:y.filter_operator,style:d.style,styleSpec:d.styleSpec})),js(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&js(u[1])==="$type"&&R.push(new on(h,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&R.push(new on(h,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(w=lo(u[1]),w!=="string"&&R.push(new on(`${h}[1]`,u[1],`string expected, ${w} found`)));for(let F=2;F<u.length;F++)w=lo(u[F]),js(u[1])==="$type"?R=R.concat(eA({key:`${h}[${F}]`,value:u[F],valueSpec:y.geometry_type,style:d.style,styleSpec:d.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&R.push(new on(`${h}[${F}]`,u[F],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let F=1;F<u.length;F++)R=R.concat(Sd({key:`${h}[${F}]`,value:u[F],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":w=lo(u[1]),u.length!==2?R.push(new on(h,u,`filter array for "${u[0]}" operator must have 2 elements`)):w!=="string"&&R.push(new on(`${h}[1]`,u[1],`string expected, ${w} found`))}return R}function Zc(d,u){const h=d.key,y=d.validateSpec,w=d.style,R=d.styleSpec,F=d.value,G=d.objectKey,X=R[`${u}_${d.layerType}`];if(!X)return[];const re=G.match(/^(.*)-transition$/);if(u==="paint"&&re&&X[re[1]]&&X[re[1]].transition)return y({key:h,value:F,valueSpec:R.transition,style:w,styleSpec:R});const de=d.valueSpec||X[G];if(!de)return[new on(h,F,`unknown property "${G}"`)];let be;if(lo(F)==="string"&&vA(de)&&!de.tokens&&(be=/^{([^}]+)}$/.exec(F)))return[new on(h,F,`"${G}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(be[1])} }\`.`)];const Ke=[];return d.layerType==="symbol"&&(G==="text-field"&&w&&!w.glyphs&&Ke.push(new on(h,F,'use of "text-field" requires a style "glyphs" property')),G==="text-font"&&Bu(xA(F))&&js(F.type)==="identity"&&Ke.push(new on(h,F,'"text-font" does not support identity functions'))),Ke.concat(y({key:d.key,value:F,valueSpec:de,style:w,styleSpec:R,expressionContext:"property",propertyType:u,propertyKey:G}))}function Jd(d){return Zc(d,"paint")}function dc(d){return Zc(d,"layout")}function tA(d){let u=[];const h=d.value,y=d.key,w=d.style,R=d.styleSpec;h.type||h.ref||u.push(new on(y,h,'either "type" or "ref" is required'));let F=js(h.type);const G=js(h.ref);if(h.id){const X=js(h.id);for(let re=0;re<d.arrayIndex;re++){const de=w.layers[re];js(de.id)===X&&u.push(new on(y,h.id,`duplicate layer id "${h.id}", previously used at line ${de.id.__line__}`))}}if("ref"in h){let X;["type","source","source-layer","filter","layout"].forEach(re=>{re in h&&u.push(new on(y,h[re],`"${re}" is prohibited for ref layers`))}),w.layers.forEach(re=>{js(re.id)===G&&(X=re)}),X?X.ref?u.push(new on(y,h.ref,"ref cannot reference another ref layer")):F=js(X.type):u.push(new on(y,h.ref,`ref layer "${G}" not found`))}else if(F!=="background")if(h.source){const X=w.sources&&w.sources[h.source],re=X&&js(X.type);X?re==="vector"&&F==="raster"?u.push(new on(y,h.source,`layer "${h.id}" requires a raster source`)):re!=="raster-dem"&&F==="hillshade"?u.push(new on(y,h.source,`layer "${h.id}" requires a raster-dem source`)):re==="raster"&&F!=="raster"?u.push(new on(y,h.source,`layer "${h.id}" requires a vector source`)):re!=="vector"||h["source-layer"]?re==="raster-dem"&&F!=="hillshade"?u.push(new on(y,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):F!=="line"||!h.paint||!h.paint["line-gradient"]||re==="geojson"&&X.lineMetrics||u.push(new on(y,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new on(y,h,`layer "${h.id}" must specify a "source-layer"`)):u.push(new on(y,h.source,`source "${h.source}" not found`))}else u.push(new on(y,h,'missing required property "source"'));return u=u.concat(ul({key:y,value:h,valueSpec:R.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:`${y}.type`,value:h.type,valueSpec:R.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:h,objectKey:"type"}),filter:Ou,layout:X=>ul({layer:h,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":re=>dc(Sr({layerType:F},re))}}),paint:X=>ul({layer:h,key:X.key,value:X.value,style:X.style,styleSpec:X.styleSpec,validateSpec:X.validateSpec,objectElementValidators:{"*":re=>Jd(Sr({layerType:F},re))}})}})),u}function _l(d){const u=d.value,h=d.key,y=lo(u);return y!=="string"?[new on(h,u,`string expected, ${y} found`)]:[]}const GA={promoteId:function({key:d,value:u}){if(lo(u)==="string")return _l({key:d,value:u});{const h=[];for(const y in u)h.push(..._l({key:`${d}.${y}`,value:u[y]}));return h}}};function kc(d){const u=d.value,h=d.key,y=d.styleSpec,w=d.style,R=d.validateSpec;if(!u.type)return[new on(h,u,'"type" is required')];const F=js(u.type);let G;switch(F){case"vector":case"raster":return G=ul({key:h,value:u,valueSpec:y[`source_${F.replace("-","_")}`],style:d.style,styleSpec:y,objectElementValidators:GA,validateSpec:R}),G;case"raster-dem":return G=function(X){var re;const de=(re=X.sourceName)!==null&&re!==void 0?re:"",be=X.value,Ke=X.styleSpec,ze=Ke.source_raster_dem,We=X.style;let tt=[];const ct=lo(be);if(be===void 0)return tt;if(ct!=="object")return tt.push(new on("source_raster_dem",be,`object expected, ${ct} found`)),tt;const vt=js(be.encoding)==="custom",zt=["redFactor","greenFactor","blueFactor","baseShift"],Et=X.value.encoding?`"${X.value.encoding}"`:"Default";for(const Fe in be)!vt&&zt.includes(Fe)?tt.push(new on(Fe,be[Fe],`In "${de}": "${Fe}" is only valid when "encoding" is set to "custom". ${Et} encoding found`)):ze[Fe]?tt=tt.concat(X.validateSpec({key:Fe,value:be[Fe],valueSpec:ze[Fe],validateSpec:X.validateSpec,style:We,styleSpec:Ke})):tt.push(new on(Fe,be[Fe],`unknown property "${Fe}"`));return tt}({sourceName:h,value:u,style:d.style,styleSpec:y,validateSpec:R}),G;case"geojson":if(G=ul({key:h,value:u,valueSpec:y.source_geojson,style:w,styleSpec:y,validateSpec:R,objectElementValidators:GA}),u.cluster)for(const X in u.clusterProperties){const[re,de]=u.clusterProperties[X],be=typeof re=="string"?[re,["accumulated"],["get",X]]:re;G.push(...va({key:`${h}.${X}.map`,value:de,expressionContext:"cluster-map"})),G.push(...va({key:`${h}.${X}.reduce`,value:be,expressionContext:"cluster-reduce"}))}return G;case"video":return ul({key:h,value:u,valueSpec:y.source_video,style:w,validateSpec:R,styleSpec:y});case"image":return ul({key:h,value:u,valueSpec:y.source_image,style:w,validateSpec:R,styleSpec:y});case"canvas":return[new on(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return eA({key:`${h}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Iu(d){const u=d.value,h=d.styleSpec,y=h.light,w=d.style;let R=[];const F=lo(u);if(u===void 0)return R;if(F!=="object")return R=R.concat([new on("light",u,`object expected, ${F} found`)]),R;for(const G in u){const X=G.match(/^(.*)-transition$/);R=R.concat(X&&y[X[1]]&&y[X[1]].transition?d.validateSpec({key:G,value:u[G],valueSpec:h.transition,validateSpec:d.validateSpec,style:w,styleSpec:h}):y[G]?d.validateSpec({key:G,value:u[G],valueSpec:y[G],validateSpec:d.validateSpec,style:w,styleSpec:h}):[new on(G,u[G],`unknown property "${G}"`)])}return R}function wh(d){const u=d.value,h=d.styleSpec,y=h.sky,w=d.style,R=lo(u);if(u===void 0)return[];if(R!=="object")return[new on("sky",u,`object expected, ${R} found`)];let F=[];for(const G in u)F=F.concat(y[G]?d.validateSpec({key:G,value:u[G],valueSpec:y[G],style:w,styleSpec:h}):[new on(G,u[G],`unknown property "${G}"`)]);return F}function ot(d){const u=d.value,h=d.styleSpec,y=h.terrain,w=d.style;let R=[];const F=lo(u);if(u===void 0)return R;if(F!=="object")return R=R.concat([new on("terrain",u,`object expected, ${F} found`)]),R;for(const G in u)R=R.concat(y[G]?d.validateSpec({key:G,value:u[G],valueSpec:y[G],validateSpec:d.validateSpec,style:w,styleSpec:h}):[new on(G,u[G],`unknown property "${G}"`)]);return R}function QA(d){let u=[];const h=d.value,y=d.key;if(Array.isArray(h)){const w=[],R=[];for(const F in h)h[F].id&&w.includes(h[F].id)&&u.push(new on(y,h,`all the sprites' ids must be unique, but ${h[F].id} is duplicated`)),w.push(h[F].id),h[F].url&&R.includes(h[F].url)&&u.push(new on(y,h,`all the sprites' URLs must be unique, but ${h[F].url} is duplicated`)),R.push(h[F].url),u=u.concat(ul({key:`${y}[${F}]`,value:h[F],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return u}return _l({key:y,value:h})}const Ss={"*":()=>[],array:Hc,boolean:function(d){const u=d.value,h=d.key,y=lo(u);return y!=="boolean"?[new on(h,u,`boolean expected, ${y} found`)]:[]},number:Gl,color:function(d){const u=d.key,h=d.value,y=lo(h);return y!=="string"?[new on(u,h,`color expected, ${y} found`)]:Si.parse(String(h))?[]:[new on(u,h,`color expected, "${h}" found`)]},constants:wp,enum:eA,filter:Ou,function:WA,layer:tA,object:ul,source:kc,light:Iu,sky:wh,terrain:ot,projection:function(d){const u=d.value,h=d.styleSpec,y=h.projection,w=d.style,R=lo(u);if(u===void 0)return[];if(R!=="object")return[new on("projection",u,`object expected, ${R} found`)];let F=[];for(const G in u)F=F.concat(y[G]?d.validateSpec({key:G,value:u[G],valueSpec:y[G],style:w,styleSpec:h}):[new on(G,u[G],`unknown property "${G}"`)]);return F},projectionDefinition:function(d){const u=d.key;let h=d.value;h=h instanceof String?h.valueOf():h;const y=lo(h);return y!=="array"||function(w){return Array.isArray(w)&&w.length===3&&typeof w[0]=="string"&&typeof w[1]=="string"&&typeof w[2]=="number"}(h)||function(w){return!!["interpolate","step","literal"].includes(w[0])}(h)?["array","string"].includes(y)?[]:[new on(u,h,`projection expected, invalid type "${y}" found`)]:[new on(u,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:_l,formatted:function(d){return _l(d).length===0?[]:va(d)},resolvedImage:function(d){return _l(d).length===0?[]:va(d)},padding:function(d){const u=d.key,h=d.value;if(lo(h)==="array"){if(h.length<1||h.length>4)return[new on(u,h,`padding requires 1 to 4 values; ${h.length} values found`)];const y={type:"number"};let w=[];for(let R=0;R<h.length;R++)w=w.concat(d.validateSpec({key:`${u}[${R}]`,value:h[R],validateSpec:d.validateSpec,valueSpec:y}));return w}return Gl({key:u,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(d){const u=d.key,h=d.value,y=lo(h),w=d.styleSpec;if(y!=="array"||h.length<1||h.length%2!=0)return[new on(u,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let R=[];for(let F=0;F<h.length;F+=2)R=R.concat(eA({key:`${u}[${F}]`,value:h[F],valueSpec:w.layout_symbol["text-anchor"]})),R=R.concat(Hc({key:`${u}[${F+1}]`,value:h[F+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:w}));return R},sprite:QA};function Ti(d){const u=d.value,h=d.valueSpec,y=d.styleSpec;return d.validateSpec=Ti,h.expression&&Bu(js(u))?WA(d):h.expression&&wc(xA(u))?va(d):h.type&&Ss[h.type]?Ss[h.type](d):ul(Sr({},d,{valueSpec:h.type?y[h.type]:h}))}function ri(d){const u=d.value,h=d.key,y=_l(d);return y.length||(u.indexOf("{fontstack}")===-1&&y.push(new on(h,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&y.push(new on(h,u,'"glyphs" url must include a "{range}" token'))),y}function Go(d,u=f){let h=[];return h=h.concat(Ti({key:"",value:d,valueSpec:u.$root,styleSpec:u,style:d,validateSpec:Ti,objectElementValidators:{glyphs:ri,"*":()=>[]}})),d.constants&&(h=h.concat(wp({key:"constants",value:d.constants}))),Ed(h)}function Ql(d){return function(u){return d({...u,validateSpec:Ti})}}function Ed(d){return[].concat(d).sort((u,h)=>u.line-h.line)}function cs(d){return function(...u){return Ed(d.apply(this,u))}}Go.source=cs(Ql(kc)),Go.sprite=cs(Ql(QA)),Go.glyphs=cs(Ql(ri)),Go.light=cs(Ql(Iu)),Go.sky=cs(Ql(wh)),Go.terrain=cs(Ql(ot)),Go.layer=cs(Ql(tA)),Go.filter=cs(Ql(Ou)),Go.paintProperty=cs(Ql(Jd)),Go.layoutProperty=cs(Ql(dc));const ns=Go,Es=ns.light,Xc=ns.sky,qa=ns.paintProperty,uu=ns.layoutProperty;function Ca(d,u){let h=!1;if(u&&u.length)for(const y of u)d.fire(new ae(new Error(y.message))),h=!0;return h}class hc{constructor(u,h,y){const w=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const F=new Int32Array(this.arrayBuffer);u=F[0],this.d=(h=F[1])+2*(y=F[2]);for(let X=0;X<this.d*this.d;X++){const re=F[3+X],de=F[3+X+1];w.push(re===de?null:F.subarray(re,de))}const G=F[3+w.length+1];this.keys=F.subarray(F[3+w.length],G),this.bboxes=F.subarray(G),this.insert=this._insertReadonly}else{this.d=h+2*y;for(let F=0;F<this.d*this.d;F++)w.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=u,this.padding=y,this.scale=h/u,this.uid=0;const R=y/h*u;this.min=-R,this.max=u+R}insert(u,h,y,w,R){this._forEachCell(h,y,w,R,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(w),this.bboxes.push(R)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,h,y,w,R,F){this.cells[R].push(F)}query(u,h,y,w,R){const F=this.min,G=this.max;if(u<=F&&h<=F&&G<=y&&G<=w&&!R)return Array.prototype.slice.call(this.keys);{const X=[];return this._forEachCell(u,h,y,w,this._queryCell,X,{},R),X}}_queryCell(u,h,y,w,R,F,G,X){const re=this.cells[R];if(re!==null){const de=this.keys,be=this.bboxes;for(let Ke=0;Ke<re.length;Ke++){const ze=re[Ke];if(G[ze]===void 0){const We=4*ze;(X?X(be[We+0],be[We+1],be[We+2],be[We+3]):u<=be[We+2]&&h<=be[We+3]&&y>=be[We+0]&&w>=be[We+1])?(G[ze]=!0,F.push(de[ze])):G[ze]=!1}}}}_forEachCell(u,h,y,w,R,F,G,X){const re=this._convertToCellCoord(u),de=this._convertToCellCoord(h),be=this._convertToCellCoord(y),Ke=this._convertToCellCoord(w);for(let ze=re;ze<=be;ze++)for(let We=de;We<=Ke;We++){const tt=this.d*We+ze;if((!X||X(this._convertFromCellCoord(ze),this._convertFromCellCoord(We),this._convertFromCellCoord(ze+1),this._convertFromCellCoord(We+1)))&&R.call(this,u,h,y,w,tt,F,G,X))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,h=3+this.cells.length+1+1;let y=0;for(let F=0;F<this.cells.length;F++)y+=this.cells[F].length;const w=new Int32Array(h+y+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let R=h;for(let F=0;F<u.length;F++){const G=u[F];w[3+F]=R,w.set(G,R),R+=G.length}return w[3+u.length]=R,w.set(this.keys,R),R+=this.keys.length,w[3+u.length+1]=R,w.set(this.bboxes,R),R+=this.bboxes.length,w.buffer}static serialize(u,h){const y=u.toArrayBuffer();return h&&h.push(y),{buffer:y}}static deserialize(u){return new hc(u.buffer)}}const Bs={};function wr(d,u,h={}){if(Bs[d])throw new Error(`${d} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:d,writeable:!1}),Bs[d]={klass:u,omit:h.omit||[],shallow:h.shallow||[]}}wr("Object",Object),wr("TransferableGridIndex",hc),wr("Color",Si),wr("Error",Error),wr("AJAXError",pe),wr("ResolvedImage",ra),wr("StylePropertyFunction",jA),wr("StyleExpression",Qa,{omit:["_evaluator"]}),wr("ZoomDependentExpression",sf),wr("ZoomConstantExpression",Ec),wr("CompoundExpression",ci,{omit:["_evaluate"]});for(const d in Tr)Tr[d]._classRegistryKey||wr(`Expression_${d}`,Tr[d]);function af(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function Jc(d){return d.$name||d.constructor._classRegistryKey}function Au(d){return!function(u){if(u===null||typeof u!="object")return!1;const h=Jc(u);return!(!h||h==="Object")}(d)&&(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||af(d)||Zt(d)||ArrayBuffer.isView(d)||d instanceof ImageData)}function Tc(d,u){if(Au(d))return(af(d)||Zt(d))&&u&&u.push(d),ArrayBuffer.isView(d)&&u&&u.push(d.buffer),d instanceof ImageData&&u&&u.push(d.data.buffer),d;if(Array.isArray(d)){const R=[];for(const F of d)R.push(Tc(F,u));return R}if(typeof d!="object")throw new Error("can't serialize object of type "+typeof d);const h=Jc(d);if(!h)throw new Error(`can't serialize object of unregistered class ${d.constructor.name}`);if(!Bs[h])throw new Error(`${h} is not registered.`);const{klass:y}=Bs[h],w=y.serialize?y.serialize(d,u):{};if(y.serialize){if(u&&w===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const R in d){if(!d.hasOwnProperty(R)||Bs[h].omit.indexOf(R)>=0)continue;const F=d[R];w[R]=Bs[h].shallow.indexOf(R)>=0?F:Tc(F,u)}d instanceof Error&&(w.message=d.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(w.$name=h),w}function Va(d){if(Au(d))return d;if(Array.isArray(d))return d.map(Va);if(typeof d!="object")throw new Error("can't deserialize object of type "+typeof d);const u=Jc(d)||"Object";if(!Bs[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:h}=Bs[u];if(!h)throw new Error(`can't deserialize unregistered class ${u}`);if(h.deserialize)return h.deserialize(d);const y=Object.create(h.prototype);for(const w of Object.keys(d)){if(w==="$name")continue;const R=d[w];y[w]=Bs[u].shallow.indexOf(w)>=0?R:Va(R)}return y}class eh{constructor(){this.first=!0}update(u,h){const y=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=y,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=y,!0):(this.lastFloorZoom>y?(this.lastIntegerZoom=y+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<y&&(this.lastIntegerZoom=y,this.lastIntegerZoomTime=h),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=y,!0))}}const Qi={"Latin-1 Supplement":d=>d>=128&&d<=255,"Hangul Jamo":d=>d>=4352&&d<=4607,Khmer:d=>d>=6016&&d<=6143,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Hiragana:d=>d>=12352&&d<=12447,Katakana:d=>d>=12448&&d<=12543,Kanbun:d=>d>=12688&&d<=12703,"CJK Strokes":d=>d>=12736&&d<=12783,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"CJK Unified Ideographs":d=>d>=19968&&d<=40959,"Hangul Syllables":d=>d>=44032&&d<=55215,"Private Use Area":d=>d>=57344&&d<=63743,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519};function nA(d){for(const u of d)if(Yl(u.charCodeAt(0)))return!0;return!1}function Pc(d){for(const u of d)if(!Os(u.charCodeAt(0)))return!1;return!0}function MA(d){const u=d.map(h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}}).filter(h=>h);return new RegExp(u.join("|"),"u")}const ed=MA(["Arab","Dupl","Mong","Ougr","Syrc"]);function Os(d){return!ed.test(String.fromCodePoint(d))}const wo=MA(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Yl(d){return!(d!==746&&d!==747&&(d<4352||!(Qi["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||Qi["CJK Compatibility"](d)||Qi["CJK Strokes"](d)||!(!Qi["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||Qi["Enclosed CJK Letters and Months"](d)||Qi["Ideographic Description Characters"](d)||Qi.Kanbun(d)||Qi.Katakana(d)&&d!==12540||!(!Qi["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!Qi["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||Qi["Vertical Forms"](d)||Qi["Yijing Hexagram Symbols"](d)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(d))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(d))||wo.test(String.fromCodePoint(d)))))}function Pa(d){return!(Yl(d)||function(u){return!!(Qi["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||Qi["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||Qi["Letterlike Symbols"](u)||Qi["Number Forms"](u)||Qi["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||Qi["Control Pictures"](u)&&u!==9251||Qi["Optical Character Recognition"](u)||Qi["Enclosed Alphanumerics"](u)||Qi["Geometric Shapes"](u)||Qi["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||Qi["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||Qi["CJK Symbols and Punctuation"](u)||Qi.Katakana(u)||Qi["Private Use Area"](u)||Qi["CJK Compatibility Forms"](u)||Qi["Small Form Variants"](u)||Qi["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(d))}const $a=MA(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function fc(d){return $a.test(String.fromCodePoint(d))}function wA(d,u){return!(!u&&fc(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||Qi.Khmer(d))}function YA(d){for(const u of d)if(fc(u.charCodeAt(0)))return!0;return!1}const cu=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){if(cu.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(d,u){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(d.pluginStatus!=="loading")return this.setState(d),d;const h=d.pluginURL,y=new Promise(R=>{this.loadScriptResolve=R});u(h);const w=new Promise(R=>setTimeout(()=>R(),this.TIMEOUT));if(yield Promise.race([y,w]),this.isParsed()){const R={pluginStatus:"loaded",pluginURL:h};return this.setState(R),R}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)})}};class gs{constructor(u,h){this.zoom=u,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new eh,this.transition={})}isSupportedScript(u){return function(h,y){for(const w of h)if(!wA(w.charCodeAt(0),y))return!1;return!0}(u,cu.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,h=u-Math.floor(u),y=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*y}:{fromScale:.5,toScale:1,t:1-(1-y)*h}}}class rA{constructor(u,h){this.property=u,this.value=h,this.expression=function(y,w){if(Bu(y))return new jA(y,w);if(wc(y)){const R=bA(y,w);if(R.result==="error")throw new Error(R.value.map(F=>`${F.key}: ${F.message}`).join(", "));return R.value}{let R=y;return w.type==="color"&&typeof y=="string"?R=Si.parse(y):w.type!=="padding"||typeof y!="number"&&!Array.isArray(y)?w.type==="variableAnchorOffsetCollection"&&Array.isArray(y)?R=Qs.parse(y):w.type==="projectionDefinition"&&typeof y=="string"&&(R=No.parse(y)):R=ho.parse(y),{kind:"constant",evaluate:()=>R}}}(h===void 0?u.specification.default:h,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,h,y){return this.property.possiblyEvaluate(this,u,h,y)}}class qA{constructor(u){this.property=u,this.value=new rA(u,void 0)}transitioned(u,h){return new Ka(this.property,this.value,h,yt({},u.transition,this.transition),u.now)}untransitioned(){return new Ka(this.property,this.value,null,{},0)}}class _a{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return Pe(this._values[u].value.value)}setValue(u,h){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new qA(this._values[u].property)),this._values[u].value=new rA(this._values[u].property,h===null?void 0:Pe(h))}getTransition(u){return Pe(this._values[u].transition)}setTransition(u,h){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new qA(this._values[u].property)),this._values[u].transition=Pe(h)||void 0}serialize(){const u={};for(const h of Object.keys(this._values)){const y=this.getValue(h);y!==void 0&&(u[h]=y);const w=this.getTransition(h);w!==void 0&&(u[`${h}-transition`]=w)}return u}transitioned(u,h){const y=new ys(this._properties);for(const w of Object.keys(this._values))y._values[w]=this._values[w].transitioned(u,h._values[w]);return y}untransitioned(){const u=new ys(this._properties);for(const h of Object.keys(this._values))u._values[h]=this._values[h].untransitioned();return u}}class Ka{constructor(u,h,y,w,R){this.property=u,this.value=h,this.begin=R+w.delay||0,this.end=this.begin+w.duration||0,u.specification.transition&&(w.delay||w.duration)&&(this.prior=y)}possiblyEvaluate(u,h,y){const w=u.now||0,R=this.value.possiblyEvaluate(u,h,y),F=this.prior;if(F){if(w>this.end)return this.prior=null,R;if(this.value.isDataDriven())return this.prior=null,R;if(w<this.begin)return F.possiblyEvaluate(u,h,y);{const G=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(u,h,y),R,Se(G))}}return R}}class ys{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,h,y){const w=new VA(this._properties);for(const R of Object.keys(this._values))w._values[R]=this._values[R].possiblyEvaluate(u,h,y);return w}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class SA{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return Pe(this._values[u].value)}setValue(u,h){this._values[u]=new rA(this._values[u].property,h===null?void 0:Pe(h))}serialize(){const u={};for(const h of Object.keys(this._values)){const y=this.getValue(h);y!==void 0&&(u[h]=y)}return u}possiblyEvaluate(u,h,y){const w=new VA(this._properties);for(const R of Object.keys(this._values))w._values[R]=this._values[R].possiblyEvaluate(u,h,y);return w}}class Al{constructor(u,h,y){this.property=u,this.value=h,this.parameters=y}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,h,y,w){return this.property.evaluate(this.value,this.parameters,u,h,y,w)}}class VA{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class Dr{constructor(u){this.specification=u}possiblyEvaluate(u,h){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(h)}interpolate(u,h,y){const w=Ui[this.specification.type];return w?w(u,h,y):u}}class Lr{constructor(u,h){this.specification=u,this.overrides=h}possiblyEvaluate(u,h,y,w){return new Al(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(h,null,{},y,w)}:u.expression,h)}interpolate(u,h,y){if(u.value.kind!=="constant"||h.value.kind!=="constant")return u;if(u.value.value===void 0||h.value.value===void 0)return new Al(this,{kind:"constant",value:void 0},u.parameters);const w=Ui[this.specification.type];if(w){const R=w(u.value.value,h.value.value,y);return new Al(this,{kind:"constant",value:R},u.parameters)}return u}evaluate(u,h,y,w,R,F){return u.kind==="constant"?u.value:u.evaluate(h,y,w,R,F)}}class Sh extends Lr{possiblyEvaluate(u,h,y,w){if(u.value===void 0)return new Al(this,{kind:"constant",value:void 0},h);if(u.expression.kind==="constant"){const R=u.expression.evaluate(h,null,{},y,w),F=u.property.specification.type==="resolvedImage"&&typeof R!="string"?R.name:R,G=this._calculate(F,F,F,h);return new Al(this,{kind:"constant",value:G},h)}if(u.expression.kind==="camera"){const R=this._calculate(u.expression.evaluate({zoom:h.zoom-1}),u.expression.evaluate({zoom:h.zoom}),u.expression.evaluate({zoom:h.zoom+1}),h);return new Al(this,{kind:"constant",value:R},h)}return new Al(this,u.expression,h)}evaluate(u,h,y,w,R,F){if(u.kind==="source"){const G=u.evaluate(h,y,w,R,F);return this._calculate(G,G,G,h)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(h.zoom)-1},y,w),u.evaluate({zoom:Math.floor(h.zoom)},y,w),u.evaluate({zoom:Math.floor(h.zoom)+1},y,w),h):u.value}_calculate(u,h,y,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:h}:{from:y,to:h}}interpolate(u){return u}}class td{constructor(u){this.specification=u}possiblyEvaluate(u,h,y,w){if(u.value!==void 0){if(u.expression.kind==="constant"){const R=u.expression.evaluate(h,null,{},y,w);return this._calculate(R,R,R,h)}return this._calculate(u.expression.evaluate(new gs(Math.floor(h.zoom-1),h)),u.expression.evaluate(new gs(Math.floor(h.zoom),h)),u.expression.evaluate(new gs(Math.floor(h.zoom+1),h)),h)}}_calculate(u,h,y,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:u,to:h}:{from:y,to:h}}interpolate(u){return u}}class Eh{constructor(u){this.specification=u}possiblyEvaluate(u,h,y,w){return!!u.expression.evaluate(h,null,{},y,w)}interpolate(){return!1}}class Aa{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in u){const y=u[h];y.specification.overridable&&this.overridableProperties.push(h);const w=this.defaultPropertyValues[h]=new rA(y,void 0),R=this.defaultTransitionablePropertyValues[h]=new qA(y);this.defaultTransitioningPropertyValues[h]=R.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=w.possiblyEvaluate({})}}}wr("DataDrivenProperty",Lr),wr("DataConstantProperty",Dr),wr("CrossFadedDataDrivenProperty",Sh),wr("CrossFadedProperty",td),wr("ColorRampProperty",Eh);const ku="-transition";class Pl extends Ce{constructor(u,h){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),h.layout&&(this._unevaluatedLayout=new SA(h.layout)),h.paint)){this._transitionablePaint=new _a(h.paint);for(const y in u.paint)this.setPaintProperty(y,u.paint[y],{validate:!1});for(const y in u.layout)this.setLayoutProperty(y,u.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new VA(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,h,y={}){h!=null&&this._validate(uu,`layers.${this.id}.layout.${u}`,u,h,y)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,h):this.visibility=h)}getPaintProperty(u){return u.endsWith(ku)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,h,y={}){if(h!=null&&this._validate(qa,`layers.${this.id}.paint.${u}`,u,h,y))return!1;if(u.endsWith(ku))return this._transitionablePaint.setTransition(u.slice(0,-11),h||void 0),!1;{const w=this._transitionablePaint._values[u],R=w.property.specification["property-type"]==="cross-faded-data-driven",F=w.value.isDataDriven(),G=w.value;this._transitionablePaint.setValue(u,h),this._handleSpecialPaintPropertyUpdate(u);const X=this._transitionablePaint._values[u].value;return X.isDataDriven()||F||R||this._handleOverridablePaintPropertyUpdate(u,G,X)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,h,y){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,h){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,h)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),Le(u,(h,y)=>!(h===void 0||y==="layout"&&!Object.keys(h).length||y==="paint"&&!Object.keys(h).length))}_validate(u,h,y,w,R={}){return(!R||R.validate!==!1)&&Ca(this,u.call(ns,{key:h,layerType:this.type,objectKey:y,value:w,styleSpec:f,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const h=this.paint.get(u);if(h instanceof Al&&vA(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const Bh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class $A{constructor(u,h){this._structArray=u,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Vs{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,h){return u._trim(),h&&(u.isTransferred=!0,h.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const h=Object.create(this.prototype);return h.arrayBuffer=u.arrayBuffer,h.length=u.length,h.capacity=u.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function vs(d,u=1){let h=0,y=0;return{members:d.map(w=>{const R=Bh[w.type].BYTES_PER_ELEMENT,F=h=$s(h,Math.max(u,R)),G=w.components||1;return y=Math.max(y,R),h+=R*G,{name:w.name,type:w.type,components:G,offset:F}}),size:$s(h,Math.max(y,u)),alignment:u}}function $s(d,u){return Math.ceil(d/u)*u}class HA extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h){const y=this.length;return this.resize(y+1),this.emplace(y,u,h)}emplace(u,h,y){const w=2*u;return this.int16[w+0]=h,this.int16[w+1]=y,u}}HA.prototype.bytesPerElement=4,wr("StructArrayLayout2i4",HA);class du extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,y){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,y)}emplace(u,h,y,w){const R=3*u;return this.int16[R+0]=h,this.int16[R+1]=y,this.int16[R+2]=w,u}}du.prototype.bytesPerElement=6,wr("StructArrayLayout3i6",du);class bl extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,y,w){const R=this.length;return this.resize(R+1),this.emplace(R,u,h,y,w)}emplace(u,h,y,w,R){const F=4*u;return this.int16[F+0]=h,this.int16[F+1]=y,this.int16[F+2]=w,this.int16[F+3]=R,u}}bl.prototype.bytesPerElement=8,wr("StructArrayLayout4i8",bl);class iA extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,y,w,R,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,y,w,R,F)}emplace(u,h,y,w,R,F,G){const X=6*u;return this.int16[X+0]=h,this.int16[X+1]=y,this.int16[X+2]=w,this.int16[X+3]=R,this.int16[X+4]=F,this.int16[X+5]=G,u}}iA.prototype.bytesPerElement=12,wr("StructArrayLayout2i4i12",iA);class Kc extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,y,w,R,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,y,w,R,F)}emplace(u,h,y,w,R,F,G){const X=4*u,re=8*u;return this.int16[X+0]=h,this.int16[X+1]=y,this.uint8[re+4]=w,this.uint8[re+5]=R,this.uint8[re+6]=F,this.uint8[re+7]=G,u}}Kc.prototype.bytesPerElement=8,wr("StructArrayLayout2i4ub8",Kc);class ql extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h){const y=this.length;return this.resize(y+1),this.emplace(y,u,h)}emplace(u,h,y){const w=2*u;return this.float32[w+0]=h,this.float32[w+1]=y,u}}ql.prototype.bytesPerElement=8,wr("StructArrayLayout2f8",ql);class ba extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,y,w,R,F,G,X,re,de){const be=this.length;return this.resize(be+1),this.emplace(be,u,h,y,w,R,F,G,X,re,de)}emplace(u,h,y,w,R,F,G,X,re,de,be){const Ke=10*u;return this.uint16[Ke+0]=h,this.uint16[Ke+1]=y,this.uint16[Ke+2]=w,this.uint16[Ke+3]=R,this.uint16[Ke+4]=F,this.uint16[Ke+5]=G,this.uint16[Ke+6]=X,this.uint16[Ke+7]=re,this.uint16[Ke+8]=de,this.uint16[Ke+9]=be,u}}ba.prototype.bytesPerElement=20,wr("StructArrayLayout10ui20",ba);class Hs extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,y,w,R,F,G,X,re,de,be,Ke){const ze=this.length;return this.resize(ze+1),this.emplace(ze,u,h,y,w,R,F,G,X,re,de,be,Ke)}emplace(u,h,y,w,R,F,G,X,re,de,be,Ke,ze){const We=12*u;return this.int16[We+0]=h,this.int16[We+1]=y,this.int16[We+2]=w,this.int16[We+3]=R,this.uint16[We+4]=F,this.uint16[We+5]=G,this.uint16[We+6]=X,this.uint16[We+7]=re,this.int16[We+8]=de,this.int16[We+9]=be,this.int16[We+10]=Ke,this.int16[We+11]=ze,u}}Hs.prototype.bytesPerElement=24,wr("StructArrayLayout4i4ui4i24",Hs);class hu extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,y){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,y)}emplace(u,h,y,w){const R=3*u;return this.float32[R+0]=h,this.float32[R+1]=y,this.float32[R+2]=w,u}}hu.prototype.bytesPerElement=12,wr("StructArrayLayout3f12",hu);class fu extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.uint32[1*u+0]=h,u}}fu.prototype.bytesPerElement=4,wr("StructArrayLayout1ul4",fu);class ZA extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,y,w,R,F,G,X,re){const de=this.length;return this.resize(de+1),this.emplace(de,u,h,y,w,R,F,G,X,re)}emplace(u,h,y,w,R,F,G,X,re,de){const be=10*u,Ke=5*u;return this.int16[be+0]=h,this.int16[be+1]=y,this.int16[be+2]=w,this.int16[be+3]=R,this.int16[be+4]=F,this.int16[be+5]=G,this.uint32[Ke+3]=X,this.uint16[be+8]=re,this.uint16[be+9]=de,u}}ZA.prototype.bytesPerElement=20,wr("StructArrayLayout6i1ul2ui20",ZA);class Tu extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,y,w,R,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,y,w,R,F)}emplace(u,h,y,w,R,F,G){const X=6*u;return this.int16[X+0]=h,this.int16[X+1]=y,this.int16[X+2]=w,this.int16[X+3]=R,this.int16[X+4]=F,this.int16[X+5]=G,u}}Tu.prototype.bytesPerElement=12,wr("StructArrayLayout2i2i2i12",Tu);class Rc extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,y,w,R){const F=this.length;return this.resize(F+1),this.emplace(F,u,h,y,w,R)}emplace(u,h,y,w,R,F){const G=4*u,X=8*u;return this.float32[G+0]=h,this.float32[G+1]=y,this.float32[G+2]=w,this.int16[X+6]=R,this.int16[X+7]=F,u}}Rc.prototype.bytesPerElement=16,wr("StructArrayLayout2f1f2i16",Rc);class EA extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,h,y,w,R,F){const G=this.length;return this.resize(G+1),this.emplace(G,u,h,y,w,R,F)}emplace(u,h,y,w,R,F,G){const X=16*u,re=4*u,de=8*u;return this.uint8[X+0]=h,this.uint8[X+1]=y,this.float32[re+1]=w,this.float32[re+2]=R,this.int16[de+6]=F,this.int16[de+7]=G,u}}EA.prototype.bytesPerElement=16,wr("StructArrayLayout2ub2f2i16",EA);class Kl extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,y){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,y)}emplace(u,h,y,w){const R=3*u;return this.uint16[R+0]=h,this.uint16[R+1]=y,this.uint16[R+2]=w,u}}Kl.prototype.bytesPerElement=6,wr("StructArrayLayout3ui6",Kl);class Bd extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,y,w,R,F,G,X,re,de,be,Ke,ze,We,tt,ct,vt){const zt=this.length;return this.resize(zt+1),this.emplace(zt,u,h,y,w,R,F,G,X,re,de,be,Ke,ze,We,tt,ct,vt)}emplace(u,h,y,w,R,F,G,X,re,de,be,Ke,ze,We,tt,ct,vt,zt){const Et=24*u,Fe=12*u,at=48*u;return this.int16[Et+0]=h,this.int16[Et+1]=y,this.uint16[Et+2]=w,this.uint16[Et+3]=R,this.uint32[Fe+2]=F,this.uint32[Fe+3]=G,this.uint32[Fe+4]=X,this.uint16[Et+10]=re,this.uint16[Et+11]=de,this.uint16[Et+12]=be,this.float32[Fe+7]=Ke,this.float32[Fe+8]=ze,this.uint8[at+36]=We,this.uint8[at+37]=tt,this.uint8[at+38]=ct,this.uint32[Fe+10]=vt,this.int16[Et+22]=zt,u}}Bd.prototype.bytesPerElement=48,wr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Bd);class O extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,y,w,R,F,G,X,re,de,be,Ke,ze,We,tt,ct,vt,zt,Et,Fe,at,Mt,an,jn,gn,En,or,Wn){const dr=this.length;return this.resize(dr+1),this.emplace(dr,u,h,y,w,R,F,G,X,re,de,be,Ke,ze,We,tt,ct,vt,zt,Et,Fe,at,Mt,an,jn,gn,En,or,Wn)}emplace(u,h,y,w,R,F,G,X,re,de,be,Ke,ze,We,tt,ct,vt,zt,Et,Fe,at,Mt,an,jn,gn,En,or,Wn,dr){const On=32*u,Nr=16*u;return this.int16[On+0]=h,this.int16[On+1]=y,this.int16[On+2]=w,this.int16[On+3]=R,this.int16[On+4]=F,this.int16[On+5]=G,this.int16[On+6]=X,this.int16[On+7]=re,this.uint16[On+8]=de,this.uint16[On+9]=be,this.uint16[On+10]=Ke,this.uint16[On+11]=ze,this.uint16[On+12]=We,this.uint16[On+13]=tt,this.uint16[On+14]=ct,this.uint16[On+15]=vt,this.uint16[On+16]=zt,this.uint16[On+17]=Et,this.uint16[On+18]=Fe,this.uint16[On+19]=at,this.uint16[On+20]=Mt,this.uint16[On+21]=an,this.uint16[On+22]=jn,this.uint32[Nr+12]=gn,this.float32[Nr+13]=En,this.float32[Nr+14]=or,this.uint16[On+30]=Wn,this.uint16[On+31]=dr,u}}O.prototype.bytesPerElement=64,wr("StructArrayLayout8i15ui1ul2f2ui64",O);class a extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.float32[1*u+0]=h,u}}a.prototype.bytesPerElement=4,wr("StructArrayLayout1f4",a);class c extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,y){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,y)}emplace(u,h,y,w){const R=3*u;return this.uint16[6*u+0]=h,this.float32[R+1]=y,this.float32[R+2]=w,u}}c.prototype.bytesPerElement=12,wr("StructArrayLayout1ui2f12",c);class C extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h,y){const w=this.length;return this.resize(w+1),this.emplace(w,u,h,y)}emplace(u,h,y,w){const R=4*u;return this.uint32[2*u+0]=h,this.uint16[R+2]=y,this.uint16[R+3]=w,u}}C.prototype.bytesPerElement=8,wr("StructArrayLayout1ul2ui8",C);class M extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,h){const y=this.length;return this.resize(y+1),this.emplace(y,u,h)}emplace(u,h,y){const w=2*u;return this.uint16[w+0]=h,this.uint16[w+1]=y,u}}M.prototype.bytesPerElement=4,wr("StructArrayLayout2ui4",M);class k extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const h=this.length;return this.resize(h+1),this.emplace(h,u)}emplace(u,h){return this.uint16[1*u+0]=h,u}}k.prototype.bytesPerElement=2,wr("StructArrayLayout1ui2",k);class z extends Vs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,h,y,w){const R=this.length;return this.resize(R+1),this.emplace(R,u,h,y,w)}emplace(u,h,y,w,R){const F=4*u;return this.float32[F+0]=h,this.float32[F+1]=y,this.float32[F+2]=w,this.float32[F+3]=R,u}}z.prototype.bytesPerElement=16,wr("StructArrayLayout4f16",z);class Y extends $A{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new U(this.anchorPointX,this.anchorPointY)}}Y.prototype.size=20;class J extends ZA{get(u){return new Y(this,u)}}wr("CollisionBoxArray",J);class se extends $A{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}se.prototype.size=48;class ye extends Bd{get(u){return new se(this,u)}}wr("PlacedSymbolArray",ye);class Te extends $A{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Te.prototype.size=64;class ke extends O{get(u){return new Te(this,u)}}wr("SymbolInstanceArray",ke);class Qe extends a{getoffsetX(u){return this.float32[1*u+0]}}wr("GlyphOffsetArray",Qe);class et extends du{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}wr("SymbolLineVertexArray",et);class mt extends $A{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}mt.prototype.size=12;class lt extends c{get(u){return new mt(this,u)}}wr("TextAnchorOffsetArray",lt);class pt extends $A{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}pt.prototype.size=8;class bt extends C{get(u){return new pt(this,u)}}wr("FeatureIndexArray",bt);class Bt extends HA{}class kt extends HA{}class Kt extends HA{}class Ut extends iA{}class It extends Kc{}class nn extends ql{}class qt extends ba{}class xn extends Hs{}class Sn extends hu{}class Cn extends fu{}class In extends Tu{}class Nn extends EA{}class Rn extends Kl{}class kr extends M{}const Ri=vs([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xi}=Ri;class _i{constructor(u=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=u}prepareSegment(u,h,y,w){const R=this.segments[this.segments.length-1];return u>_i.MAX_VERTEX_ARRAY_LENGTH&&it(`Max vertices per segment is ${_i.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${_i.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!R||R.vertexLength+u>_i.MAX_VERTEX_ARRAY_LENGTH||R.sortKey!==w?this.createNewSegment(h,y,w):R}createNewSegment(u,h,y){const w={vertexOffset:u.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return y!==void 0&&(w.sortKey=y),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(w),w}getOrCreateLatestSegment(u,h,y){return this.prepareSegment(0,u,h,y)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const u of this.segments)for(const h in u.vaos)u.vaos[h].destroy()}static simpleSegment(u,h,y,w){return new _i([{vertexOffset:u,primitiveOffset:h,vertexLength:y,primitiveLength:w,vaos:{},sortKey:0}])}}function Bi(d,u){return 256*(d=_t(Math.floor(d),0,255))+_t(Math.floor(u),0,255)}_i.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wr("SegmentVector",_i);const Qo=vs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Lo,So,fo,ca={exports:{}},Ho={exports:{}},rs={exports:{}},xl=function(){if(fo)return ca.exports;fo=1;var d=(Lo||(Lo=1,Ho.exports=function(h,y){var w,R,F,G,X,re,de,be;for(R=h.length-(w=3&h.length),F=y,X=3432918353,re=461845907,be=0;be<R;)de=255&h.charCodeAt(be)|(255&h.charCodeAt(++be))<<8|(255&h.charCodeAt(++be))<<16|(255&h.charCodeAt(++be))<<24,++be,F=27492+(65535&(G=5*(65535&(F=(F^=de=(65535&(de=(de=(65535&de)*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*re+(((de>>>16)*re&65535)<<16)&4294967295)<<13|F>>>19))+((5*(F>>>16)&65535)<<16)&4294967295))+((58964+(G>>>16)&65535)<<16);switch(de=0,w){case 3:de^=(255&h.charCodeAt(be+2))<<16;case 2:de^=(255&h.charCodeAt(be+1))<<8;case 1:F^=de=(65535&(de=(de=(65535&(de^=255&h.charCodeAt(be)))*X+(((de>>>16)*X&65535)<<16)&4294967295)<<15|de>>>17))*re+(((de>>>16)*re&65535)<<16)&4294967295}return F^=h.length,F=2246822507*(65535&(F^=F>>>16))+((2246822507*(F>>>16)&65535)<<16)&4294967295,F=3266489909*(65535&(F^=F>>>13))+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^=F>>>16)>>>0}),Ho.exports),u=(So||(So=1,rs.exports=function(h,y){for(var w,R=h.length,F=y^R,G=0;R>=4;)w=1540483477*(65535&(w=255&h.charCodeAt(G)|(255&h.charCodeAt(++G))<<8|(255&h.charCodeAt(++G))<<16|(255&h.charCodeAt(++G))<<24))+((1540483477*(w>>>16)&65535)<<16),F=1540483477*(65535&F)+((1540483477*(F>>>16)&65535)<<16)^(w=1540483477*(65535&(w^=w>>>24))+((1540483477*(w>>>16)&65535)<<16)),R-=4,++G;switch(R){case 3:F^=(255&h.charCodeAt(G+2))<<16;case 2:F^=(255&h.charCodeAt(G+1))<<8;case 1:F=1540483477*(65535&(F^=255&h.charCodeAt(G)))+((1540483477*(F>>>16)&65535)<<16)}return F=1540483477*(65535&(F^=F>>>13))+((1540483477*(F>>>16)&65535)<<16),(F^=F>>>15)>>>0}),rs.exports);return ca.exports=d,ca.exports.murmur3=d,ca.exports.murmur2=u,ca.exports}(),BA=p(xl);class pu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,h,y,w){this.ids.push(Vl(u)),this.positions.push(h,y,w)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=Vl(u);let y=0,w=this.ids.length-1;for(;y<w;){const F=y+w>>1;this.ids[F]>=h?w=F:y=F+1}const R=[];for(;this.ids[y]===h;)R.push({index:this.positions[3*y],start:this.positions[3*y+1],end:this.positions[3*y+2]}),y++;return R}static serialize(u,h){const y=new Float64Array(u.ids),w=new Uint32Array(u.positions);return $l(y,w,0,y.length-1),h&&h.push(y.buffer,w.buffer),{ids:y,positions:w}}static deserialize(u){const h=new pu;return h.ids=u.ids,h.positions=u.positions,h.indexed=!0,h}}function Vl(d){const u=+d;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:BA(String(d))}function $l(d,u,h,y){for(;h<y;){const w=d[h+y>>1];let R=h-1,F=y+1;for(;;){do R++;while(d[R]<w);do F--;while(d[F]>w);if(R>=F)break;oA(d,R,F),oA(u,3*R,3*F),oA(u,3*R+1,3*F+1),oA(u,3*R+2,3*F+2)}F-h<y-F?($l(d,u,h,F),h=F+1):($l(d,u,F+1,y),y=F)}}function oA(d,u,h){const y=d[u];d[u]=d[h],d[h]=y}wr("FeaturePositionMap",pu);class Rl{constructor(u,h){this.gl=u.gl,this.location=h}}class Pu extends Rl{constructor(u,h){super(u,h),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class xa extends Rl{constructor(u,h){super(u,h),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class Ku extends Rl{constructor(u,h){super(u,h),this.current=Si.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const Hl=new Float32Array(16);function Dc(d){return[Bi(255*d.r,255*d.g),Bi(255*d.b,255*d.a)]}class Ns{constructor(u,h,y){this.value=u,this.uniformNames=h.map(w=>`u_${w}`),this.type=y}setUniform(u,h,y){u.set(y.constantOr(this.value))}getBinding(u,h,y){return this.type==="color"?new Ku(u,h):new Pu(u,h)}}class ds{constructor(u,h){this.uniformNames=h.map(y=>`u_${y}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=u.tlbr}setUniform(u,h,y,w){const R=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;R&&u.set(R)}getBinding(u,h,y){return y.substr(0,9)==="u_pattern"?new xa(u,h):new Pu(u,h)}}class Ra{constructor(u,h,y,w){this.expression=u,this.type=y,this.maxValue=0,this.paintVertexAttributes=h.map(R=>({name:`a_${R}`,type:"Float32",components:y==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(u,h,y,w,R){const F=this.paintVertexArray.length,G=this.expression.evaluate(new gs(0),h,{},w,[],R);this.paintVertexArray.resize(u),this._setPaintValue(F,u,G)}updatePaintArray(u,h,y,w){const R=this.expression.evaluate({zoom:0},y,w);this._setPaintValue(u,h,R)}_setPaintValue(u,h,y){if(this.type==="color"){const w=Dc(y);for(let R=u;R<h;R++)this.paintVertexArray.emplace(R,w[0],w[1])}else{for(let w=u;w<h;w++)this.paintVertexArray.emplace(w,y);this.maxValue=Math.max(this.maxValue,Math.abs(y))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Cs{constructor(u,h,y,w,R,F){this.expression=u,this.uniformNames=h.map(G=>`u_${G}_t`),this.type=y,this.useIntegerZoom=w,this.zoom=R,this.maxValue=0,this.paintVertexAttributes=h.map(G=>({name:`a_${G}`,type:"Float32",components:y==="color"?4:2,offset:0})),this.paintVertexArray=new F}populatePaintArray(u,h,y,w,R){const F=this.expression.evaluate(new gs(this.zoom),h,{},w,[],R),G=this.expression.evaluate(new gs(this.zoom+1),h,{},w,[],R),X=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(X,u,F,G)}updatePaintArray(u,h,y,w){const R=this.expression.evaluate({zoom:this.zoom},y,w),F=this.expression.evaluate({zoom:this.zoom+1},y,w);this._setPaintValue(u,h,R,F)}_setPaintValue(u,h,y,w){if(this.type==="color"){const R=Dc(y),F=Dc(w);for(let G=u;G<h;G++)this.paintVertexArray.emplace(G,R[0],R[1],F[0],F[1])}else{for(let R=u;R<h;R++)this.paintVertexArray.emplace(R,y,w);this.maxValue=Math.max(this.maxValue,Math.abs(y),Math.abs(w))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,h){const y=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,w=_t(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);u.set(w)}getBinding(u,h,y){return new Pu(u,h)}}class sA{constructor(u,h,y,w,R,F){this.expression=u,this.type=h,this.useIntegerZoom=y,this.zoom=w,this.layerId=F,this.zoomInPaintVertexArray=new R,this.zoomOutPaintVertexArray=new R}populatePaintArray(u,h,y){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(w,u,h.patterns&&h.patterns[this.layerId],y)}updatePaintArray(u,h,y,w,R){this._setPaintValues(u,h,y.patterns&&y.patterns[this.layerId],R)}_setPaintValues(u,h,y,w){if(!w||!y)return;const{min:R,mid:F,max:G}=y,X=w[R],re=w[F],de=w[G];if(X&&re&&de)for(let be=u;be<h;be++)this.zoomInPaintVertexArray.emplace(be,re.tl[0],re.tl[1],re.br[0],re.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],re.pixelRatio,X.pixelRatio),this.zoomOutPaintVertexArray.emplace(be,re.tl[0],re.tl[1],re.br[0],re.br[1],de.tl[0],de.tl[1],de.br[0],de.br[1],re.pixelRatio,de.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Qo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Qo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class lf{constructor(u,h,y){this.binders={},this._buffers=[];const w=[];for(const R in u.paint._values){if(!y(R))continue;const F=u.paint.get(R);if(!(F instanceof Al&&vA(F.property.specification)))continue;const G=sm(R,u.type),X=F.value,re=F.property.specification.type,de=F.property.useIntegerZoom,be=F.property.specification["property-type"],Ke=be==="cross-faded"||be==="cross-faded-data-driven";if(X.kind==="constant")this.binders[R]=Ke?new ds(X.value,G):new Ns(X.value,G,re),w.push(`/u_${R}`);else if(X.kind==="source"||Ke){const ze=Oh(R,re,"source");this.binders[R]=Ke?new sA(X,re,de,h,ze,u.id):new Ra(X,G,re,ze),w.push(`/a_${R}`)}else{const ze=Oh(R,re,"composite");this.binders[R]=new Cs(X,G,re,de,h,ze),w.push(`/z_${R}`)}}this.cacheKey=w.sort().join("")}getMaxValue(u){const h=this.binders[u];return h instanceof Ra||h instanceof Cs?h.maxValue:0}populatePaintArrays(u,h,y,w,R){for(const F in this.binders){const G=this.binders[F];(G instanceof Ra||G instanceof Cs||G instanceof sA)&&G.populatePaintArray(u,h,y,w,R)}}setConstantPatternPositions(u,h){for(const y in this.binders){const w=this.binders[y];w instanceof ds&&w.setConstantPatternPositions(u,h)}}updatePaintArrays(u,h,y,w,R){let F=!1;for(const G in u){const X=h.getPositions(G);for(const re of X){const de=y.feature(re.index);for(const be in this.binders){const Ke=this.binders[be];if((Ke instanceof Ra||Ke instanceof Cs||Ke instanceof sA)&&Ke.expression.isStateDependent===!0){const ze=w.paint.get(be);Ke.expression=ze.value,Ke.updatePaintArray(re.start,re.end,de,u[G],R),F=!0}}}}return F}defines(){const u=[];for(const h in this.binders){const y=this.binders[h];(y instanceof Ns||y instanceof ds)&&u.push(...y.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return u}getBinderAttributes(){const u=[];for(const h in this.binders){const y=this.binders[h];if(y instanceof Ra||y instanceof Cs)for(let w=0;w<y.paintVertexAttributes.length;w++)u.push(y.paintVertexAttributes[w].name);else if(y instanceof sA)for(let w=0;w<Qo.members.length;w++)u.push(Qo.members[w].name)}return u}getBinderUniforms(){const u=[];for(const h in this.binders){const y=this.binders[h];if(y instanceof Ns||y instanceof ds||y instanceof Cs)for(const w of y.uniformNames)u.push(w)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,h){const y=[];for(const w in this.binders){const R=this.binders[w];if(R instanceof Ns||R instanceof ds||R instanceof Cs){for(const F of R.uniformNames)if(h[F]){const G=R.getBinding(u,h[F],F);y.push({name:F,property:w,binding:G})}}}return y}setUniforms(u,h,y,w){for(const{name:R,property:F,binding:G}of h)this.binders[F].setUniform(G,w,y.get(F),R)}updatePaintBuffers(u){this._buffers=[];for(const h in this.binders){const y=this.binders[h];if(u&&y instanceof sA){const w=u.fromScale===2?y.zoomInPaintVertexBuffer:y.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(y instanceof Ra||y instanceof Cs)&&y.paintVertexBuffer&&this._buffers.push(y.paintVertexBuffer)}}upload(u){for(const h in this.binders){const y=this.binders[h];(y instanceof Ra||y instanceof Cs||y instanceof sA)&&y.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const h=this.binders[u];(h instanceof Ra||h instanceof Cs||h instanceof sA)&&h.destroy()}}}class pc{constructor(u,h,y=()=>!0){this.programConfigurations={};for(const w of u)this.programConfigurations[w.id]=new lf(w,h,y);this.needsUpload=!1,this._featureMap=new pu,this._bufferOffset=0}populatePaintArrays(u,h,y,w,R,F){for(const G in this.programConfigurations)this.programConfigurations[G].populatePaintArrays(u,h,w,R,F);h.id!==void 0&&this._featureMap.add(h.id,y,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,h,y,w){for(const R of y)this.needsUpload=this.programConfigurations[R.id].updatePaintArrays(u,this._featureMap,h,R,w)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function sm(d,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${u}-`,"").replace(/-/g,"_")]}function Oh(d,u,h){const y={color:{source:ql,composite:z},number:{source:a,composite:ql}},w=function(R){return{"line-pattern":{source:qt,composite:qt},"fill-pattern":{source:qt,composite:qt},"fill-extrusion-pattern":{source:qt,composite:qt}}[R]}(d);return w&&w[h]||y[u][h]}wr("ConstantBinder",Ns),wr("CrossFadedConstantBinder",ds),wr("SourceExpressionBinder",Ra),wr("CrossFadedCompositeBinder",sA),wr("CompositeExpressionBinder",Cs),wr("ProgramConfiguration",lf,{omit:["_buffers"]}),wr("ProgramConfigurationSet",pc);const th=Math.pow(2,14)-1,Ma=-th-1;function cl(d){const u=At/d.extent,h=d.loadGeometry();for(let y=0;y<h.length;y++){const w=h[y];for(let R=0;R<w.length;R++){const F=w[R],G=Math.round(F.x*u),X=Math.round(F.y*u);F.x=_t(G,Ma,th),F.y=_t(X,Ma,th),(G<F.x||G>F.x+1||X<F.y||X>F.y+1)&&it("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function OA(d,u){return{type:d.type,id:d.id,properties:d.properties,geometry:u?cl(d):[]}}const jf=-32768;function nd(d,u,h,y,w){d.emplaceBack(jf+8*u+y,jf+8*h+w)}class aA{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new kt,this.indexArray=new Rn,this.segments=new _i,this.programConfigurations=new pc(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,y){const w=this.layers[0],R=[];let F=null,G=!1,X=w.type==="heatmap";if(w.type==="circle"){const de=w;F=de.layout.get("circle-sort-key"),G=!F.isConstant(),X=X||de.paint.get("circle-pitch-alignment")==="map"}const re=X?h.subdivisionGranularity.circle:1;for(const{feature:de,id:be,index:Ke,sourceLayerIndex:ze}of u){const We=this.layers[0]._featureFilter.needGeometry,tt=OA(de,We);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),tt,y))continue;const ct=G?F.evaluate(tt,{},y):void 0,vt={id:be,properties:de.properties,type:de.type,sourceLayerIndex:ze,index:Ke,geometry:We?tt.geometry:cl(de),patterns:{},sortKey:ct};R.push(vt)}G&&R.sort((de,be)=>de.sortKey-be.sortKey);for(const de of R){const{geometry:be,index:Ke,sourceLayerIndex:ze}=de,We=u[Ke].feature;this.addFeature(de,be,Ke,y,re),h.featureIndex.insert(We,be,Ke,ze,this.index)}}update(u,h,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Xi),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,h,y,w,R=1){let F;switch(R){case 1:F=[0,7];break;case 3:F=[0,2,5,7];break;case 5:F=[0,1,3,4,6,7];break;case 7:F=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${R}; valid values are 1, 3, 5, 7.`)}const G=F.length;for(const X of h)for(const re of X){const de=re.x,be=re.y;if(de<0||de>=At||be<0||be>=At)continue;const Ke=this.segments.prepareSegment(G*G,this.layoutVertexArray,this.indexArray,u.sortKey),ze=Ke.vertexLength;for(let We=0;We<G;We++)for(let tt=0;tt<G;tt++)nd(this.layoutVertexArray,de,be,F[tt],F[We]);for(let We=0;We<G-1;We++)for(let tt=0;tt<G-1;tt++){const ct=ze+We*G+tt,vt=ze+(We+1)*G+tt;this.indexArray.emplaceBack(ct,vt+1,ct+1),this.indexArray.emplaceBack(ct,vt,vt+1)}Ke.vertexLength+=G*G,Ke.primitiveLength+=(G-1)*(G-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,y,{},w)}}function dl(d,u){for(let h=0;h<d.length;h++)if(mc(u,d[h]))return!0;for(let h=0;h<u.length;h++)if(mc(d,u[h]))return!0;return!!Od(d,u)}function Sp(d,u,h){return!!mc(d,u)||!!Nf(u,d,h)}function uf(d,u){if(d.length===1)return Wf(u,d[0]);for(let h=0;h<u.length;h++){const y=u[h];for(let w=0;w<y.length;w++)if(mc(d,y[w]))return!0}for(let h=0;h<d.length;h++)if(Wf(u,d[h]))return!0;for(let h=0;h<u.length;h++)if(Od(d,u[h]))return!0;return!1}function am(d,u,h){if(d.length>1){if(Od(d,u))return!0;for(let y=0;y<u.length;y++)if(Nf(u[y],d,h))return!0}for(let y=0;y<d.length;y++)if(Nf(d[y],u,h))return!0;return!1}function Od(d,u){if(d.length===0||u.length===0)return!1;for(let h=0;h<d.length-1;h++){const y=d[h],w=d[h+1];for(let R=0;R<u.length-1;R++)if(Af(y,w,u[R],u[R+1]))return!0}return!1}function Af(d,u,h,y){return Ct(d,h,y)!==Ct(u,h,y)&&Ct(d,u,h)!==Ct(d,u,y)}function Nf(d,u,h){const y=h*h;if(u.length===1)return d.distSqr(u[0])<y;for(let w=1;w<u.length;w++)if(Id(d,u[w-1],u[w])<y)return!0;return!1}function Id(d,u,h){const y=u.distSqr(h);if(y===0)return d.distSqr(u);const w=((d.x-u.x)*(h.x-u.x)+(d.y-u.y)*(h.y-u.y))/y;return d.distSqr(w<0?u:w>1?h:h.sub(u)._mult(w)._add(u))}function Wf(d,u){for(let h=0;h<d.length;h++)if(mc(d[h],u))return!0;return!1}function mc(d,u){let h=!1;for(let y=0,w=d.length-1;y<d.length;w=y++){const R=d[y],F=d[w];R.y>u.y!=F.y>u.y&&u.x<(F.x-R.x)*(u.y-R.y)/(F.y-R.y)+R.x&&(h=!h)}return h}function lm(d,u,h){const y=h[0],w=h[2];if(d.x<y.x&&u.x<y.x||d.x>w.x&&u.x>w.x||d.y<y.y&&u.y<y.y||d.y>w.y&&u.y>w.y)return!1;const R=Ct(d,u,h[0]);return R!==Ct(d,u,h[1])||R!==Ct(d,u,h[2])||R!==Ct(d,u,h[3])}function Fc(d,u,h){const y=u.paint.get(d).value;return y.kind==="constant"?y.value:h.programConfigurations.get(u.id).getMaxValue(d)}function nh(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function rh(d,u,h,y,w){if(!u[0]&&!u[1])return d;const R=U.convert(u)._mult(w);h==="viewport"&&R._rotate(-y);const F=[];for(let G=0;G<d.length;G++)F.push(d[G].sub(R));return F}let Ep,kd;wr("CircleBucket",aA,{omit:["layers"]});var Gf={get paint(){return kd=kd||new Aa({"circle-radius":new Lr(f.paint_circle["circle-radius"]),"circle-color":new Lr(f.paint_circle["circle-color"]),"circle-blur":new Lr(f.paint_circle["circle-blur"]),"circle-opacity":new Lr(f.paint_circle["circle-opacity"]),"circle-translate":new Dr(f.paint_circle["circle-translate"]),"circle-translate-anchor":new Dr(f.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Dr(f.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Dr(f.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Lr(f.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Lr(f.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Lr(f.paint_circle["circle-stroke-opacity"])})},get layout(){return Ep=Ep||new Aa({"circle-sort-key":new Lr(f.layout_circle["circle-sort-key"])})}};class Zl extends Pl{constructor(u){super(u,Gf)}createBucket(u){return new aA(u)}queryRadius(u){const h=u;return Fc("circle-radius",this,h)+Fc("circle-stroke-width",this,h)+nh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:y,geometry:w,transform:R,pixelsToTileUnits:F,unwrappedTileID:G,getElevation:X}){const re=rh(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-R.bearingInRadians,F),de=this.paint.get("circle-radius").evaluate(h,y)+this.paint.get("circle-stroke-width").evaluate(h,y),be=this.paint.get("circle-pitch-alignment")==="map",Ke=be?re:function(We,tt,ct,vt){return We.map(zt=>Xl(zt,tt,ct,vt))}(re,R,G,X),ze=be?de*F:de;for(const We of w)for(const tt of We){const ct=be?tt:Xl(tt,R,G,X);let vt=ze;const zt=R.projectTileCoordinates(tt.x,tt.y,G,X).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?vt*=zt/R.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(vt*=R.cameraToCenterDistance/zt),Sp(Ke,ct,vt))return!0}return!1}}function Xl(d,u,h,y){const w=u.projectTileCoordinates(d.x,d.y,h,y).point;return new U((.5*w.x+.5)*u.width,(.5*-w.y+.5)*u.height)}class um extends aA{}let Bp;wr("HeatmapBucket",um,{omit:["layers"]});var Zo={get paint(){return Bp=Bp||new Aa({"heatmap-radius":new Lr(f.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Lr(f.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Dr(f.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Eh(f.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Dr(f.paint_heatmap["heatmap-opacity"])})}};function Qf(d,{width:u,height:h},y,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==u*h*y)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${u*h*y}`)}else w=new Uint8Array(u*h*y);return d.width=u,d.height=h,d.data=w,d}function cf(d,{width:u,height:h},y){if(u===d.width&&h===d.height)return;const w=Qf({},{width:u,height:h},y);Td(d,w,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,u),height:Math.min(d.height,h)},y),d.width=u,d.height=h,d.data=w.data}function Td(d,u,h,y,w,R){if(w.width===0||w.height===0)return u;if(w.width>d.width||w.height>d.height||h.x>d.width-w.width||h.y>d.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>u.width||w.height>u.height||y.x>u.width-w.width||y.y>u.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const F=d.data,G=u.data;if(F===G)throw new Error("srcData equals dstData, so image is already copied");for(let X=0;X<w.height;X++){const re=((h.y+X)*d.width+h.x)*R,de=((y.y+X)*u.width+y.x)*R;for(let be=0;be<w.width*R;be++)G[de+be]=F[re+be]}return u}class mu{constructor(u,h){Qf(this,u,1,h)}resize(u){cf(this,u,1)}clone(){return new mu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,h,y,w,R){Td(u,h,y,w,R,1)}}class Jl{constructor(u,h){Qf(this,u,4,h)}resize(u){cf(this,u,4)}replace(u,h){h?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Jl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,h,y,w,R){Td(u,h,y,w,R,4)}}function Yf(d){const u={},h=d.resolution||256,y=d.clips?d.clips.length:1,w=d.image||new Jl({width:h,height:y});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const R=(F,G,X)=>{u[d.evaluationKey]=X;const re=d.expression.evaluate(u);w.data[F+G+0]=Math.floor(255*re.r/re.a),w.data[F+G+1]=Math.floor(255*re.g/re.a),w.data[F+G+2]=Math.floor(255*re.b/re.a),w.data[F+G+3]=Math.floor(255*re.a)};if(d.clips)for(let F=0,G=0;F<y;++F,G+=4*h)for(let X=0,re=0;X<h;X++,re+=4){const de=X/(h-1),{start:be,end:Ke}=d.clips[F];R(G,re,be*(1-de)+Ke*de)}else for(let F=0,G=0;F<h;F++,G+=4)R(0,G,F/(h-1));return w}wr("AlphaImage",mu),wr("RGBAImage",Jl);const XA="big-fb";class df extends Pl{createBucket(u){return new um(u)}constructor(u){super(u,Zo),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Yf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(XA)&&this.heatmapFbos.delete(XA)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Ih;var hf={get paint(){return Ih=Ih||new Aa({"hillshade-illumination-direction":new Dr(f.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Dr(f.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Dr(f.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Dr(f.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Dr(f.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Dr(f.paint_hillshade["hillshade-accent-color"])})}};class kh extends Pl{constructor(u){super(u,hf)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Pd=vs([{name:"a_pos",components:2,type:"Int16"}],4),{members:Oi}=Pd;function ih(d,u,h){const y=h.patternDependencies;let w=!1;for(const R of u){const F=R.paint.get(`${d}-pattern`);F.isConstant()||(w=!0);const G=F.constantOr(null);G&&(w=!0,y[G.to]=!0,y[G.from]=!0)}return w}function Uo(d,u,h,y,w){const R=w.patternDependencies;for(const F of u){const G=F.paint.get(`${d}-pattern`).value;if(G.kind!=="constant"){let X=G.evaluate({zoom:y-1},h,{},w.availableImages),re=G.evaluate({zoom:y},h,{},w.availableImages),de=G.evaluate({zoom:y+1},h,{},w.availableImages);X=X&&X.name?X.name:X,re=re&&re.name?re.name:re,de=de&&de.name?de.name:de,R[X]=!0,R[re]=!0,R[de]=!0,h.patterns[F.id]={min:X,mid:re,max:de}}}return h}function rd(d,u,h,y,w){let R;if(w===function(F,G,X,re){let de=0;for(let be=G,Ke=X-re;be<X;be+=re)de+=(F[Ke]-F[be])*(F[be+1]+F[Ke+1]),Ke=be;return de}(d,u,h,y)>0)for(let F=u;F<h;F+=y)R=wt(F/y|0,d[F],d[F+1],R);else for(let F=h-y;F>=u;F-=y)R=wt(F/y|0,d[F],d[F+1],R);return R&&Z(R,R.next)&&(Xt(R),R=R.next),R}function id(d,u){if(!d)return d;u||(u=d);let h,y=d;do if(h=!1,y.steiner||!Z(y,y.next)&&K(y.prev,y,y.next)!==0)y=y.next;else{if(Xt(y),y=u=y.prev,y===y.next)break;h=!0}while(h||y!==u);return u}function Ml(d,u,h,y,w,R,F){if(!d)return;!F&&R&&function(X,re,de,be){let Ke=X;do Ke.z===0&&(Ke.z=ff(Ke.x,Ke.y,re,de,be)),Ke.prevZ=Ke.prev,Ke.nextZ=Ke.next,Ke=Ke.next;while(Ke!==X);Ke.prevZ.nextZ=null,Ke.prevZ=null,function(ze){let We,tt=1;do{let ct,vt=ze;ze=null;let zt=null;for(We=0;vt;){We++;let Et=vt,Fe=0;for(let Mt=0;Mt<tt&&(Fe++,Et=Et.nextZ,Et);Mt++);let at=tt;for(;Fe>0||at>0&&Et;)Fe!==0&&(at===0||!Et||vt.z<=Et.z)?(ct=vt,vt=vt.nextZ,Fe--):(ct=Et,Et=Et.nextZ,at--),zt?zt.nextZ=ct:ze=ct,ct.prevZ=zt,zt=ct;vt=Et}zt.nextZ=null,tt*=2}while(We>1)}(Ke)}(d,y,w,R);let G=d;for(;d.prev!==d.next;){const X=d.prev,re=d.next;if(R?wl(d,y,w,R):Nm(d))u.push(X.i,d.i,re.i),Xt(d),d=re.next,G=re.next;else if((d=re)===G){F?F===1?Ml(d=Am(id(d),u),u,h,y,w,R,2):F===2&&Da(d,u,h,y,w,R):Ml(id(d),u,h,y,w,R,1);break}}}function Nm(d){const u=d.prev,h=d,y=d.next;if(K(u,h,y)>=0)return!1;const w=u.x,R=h.x,F=y.x,G=u.y,X=h.y,re=y.y,de=Math.min(w,R,F),be=Math.min(G,X,re),Ke=Math.max(w,R,F),ze=Math.max(G,X,re);let We=y.next;for(;We!==u;){if(We.x>=de&&We.x<=Ke&&We.y>=be&&We.y<=ze&&E(w,G,R,X,F,re,We.x,We.y)&&K(We.prev,We,We.next)>=0)return!1;We=We.next}return!0}function wl(d,u,h,y){const w=d.prev,R=d,F=d.next;if(K(w,R,F)>=0)return!1;const G=w.x,X=R.x,re=F.x,de=w.y,be=R.y,Ke=F.y,ze=Math.min(G,X,re),We=Math.min(de,be,Ke),tt=Math.max(G,X,re),ct=Math.max(de,be,Ke),vt=ff(ze,We,u,h,y),zt=ff(tt,ct,u,h,y);let Et=d.prevZ,Fe=d.nextZ;for(;Et&&Et.z>=vt&&Fe&&Fe.z<=zt;){if(Et.x>=ze&&Et.x<=tt&&Et.y>=We&&Et.y<=ct&&Et!==w&&Et!==F&&E(G,de,X,be,re,Ke,Et.x,Et.y)&&K(Et.prev,Et,Et.next)>=0||(Et=Et.prevZ,Fe.x>=ze&&Fe.x<=tt&&Fe.y>=We&&Fe.y<=ct&&Fe!==w&&Fe!==F&&E(G,de,X,be,re,Ke,Fe.x,Fe.y)&&K(Fe.prev,Fe,Fe.next)>=0))return!1;Fe=Fe.nextZ}for(;Et&&Et.z>=vt;){if(Et.x>=ze&&Et.x<=tt&&Et.y>=We&&Et.y<=ct&&Et!==w&&Et!==F&&E(G,de,X,be,re,Ke,Et.x,Et.y)&&K(Et.prev,Et,Et.next)>=0)return!1;Et=Et.prevZ}for(;Fe&&Fe.z<=zt;){if(Fe.x>=ze&&Fe.x<=tt&&Fe.y>=We&&Fe.y<=ct&&Fe!==w&&Fe!==F&&E(G,de,X,be,re,Ke,Fe.x,Fe.y)&&K(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.nextZ}return!0}function Am(d,u){let h=d;do{const y=h.prev,w=h.next.next;!Z(y,w)&&Ae(y,h,h.next,w)&&Ue(y,w)&&Ue(w,y)&&(u.push(y.i,h.i,w.i),Xt(h),Xt(h.next),h=d=w),h=h.next}while(h!==d);return id(h)}function Da(d,u,h,y,w,R){let F=d;do{let G=F.next.next;for(;G!==F.prev;){if(F.i!==G.i&&S(F,G)){let X=gt(F,G);return F=id(F,F.next),X=id(X,X.next),Ml(F,u,h,y,w,R,0),void Ml(X,u,h,y,w,R,0)}G=G.next}F=F.next}while(F!==d)}function cm(d,u){let h=d.x-u.x;return h===0&&(h=d.y-u.y,h===0)&&(h=(d.next.y-d.y)/(d.next.x-d.x)-(u.next.y-u.y)/(u.next.x-u.x)),h}function qf(d,u){const h=function(w,R){let F=R;const G=w.x,X=w.y;let re,de=-1/0;if(Z(w,F))return F;do{if(Z(w,F.next))return F.next;if(X<=F.y&&X>=F.next.y&&F.next.y!==F.y){const tt=F.x+(X-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(tt<=G&&tt>de&&(de=tt,re=F.x<F.next.x?F:F.next,tt===G))return re}F=F.next}while(F!==R);if(!re)return null;const be=re,Ke=re.x,ze=re.y;let We=1/0;F=re;do{if(G>=F.x&&F.x>=Ke&&G!==F.x&&g(X<ze?G:de,X,Ke,ze,X<ze?de:G,X,F.x,F.y)){const tt=Math.abs(X-F.y)/(G-F.x);Ue(F,w)&&(tt<We||tt===We&&(F.x>re.x||F.x===re.x&&gu(re,F)))&&(re=F,We=tt)}F=F.next}while(F!==be);return re}(d,u);if(!h)return u;const y=gt(h,d);return id(y,y.next),id(h,h.next)}function gu(d,u){return K(d.prev,d,u.prev)<0&&K(u.next,d,d.next)<0}function ff(d,u,h,y,w){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-h)*w|0)|d<<8))|d<<4))|d<<2))|d<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-y)*w|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function A(d){let u=d,h=d;do(u.x<h.x||u.x===h.x&&u.y<h.y)&&(h=u),u=u.next;while(u!==d);return h}function g(d,u,h,y,w,R,F,G){return(w-F)*(u-G)>=(d-F)*(R-G)&&(d-F)*(y-G)>=(h-F)*(u-G)&&(h-F)*(R-G)>=(w-F)*(y-G)}function E(d,u,h,y,w,R,F,G){return!(d===F&&u===G)&&g(d,u,h,y,w,R,F,G)}function S(d,u){return d.next.i!==u.i&&d.prev.i!==u.i&&!function(h,y){let w=h;do{if(w.i!==h.i&&w.next.i!==h.i&&w.i!==y.i&&w.next.i!==y.i&&Ae(w,w.next,h,y))return!0;w=w.next}while(w!==h);return!1}(d,u)&&(Ue(d,u)&&Ue(u,d)&&function(h,y){let w=h,R=!1;const F=(h.x+y.x)/2,G=(h.y+y.y)/2;do w.y>G!=w.next.y>G&&w.next.y!==w.y&&F<(w.next.x-w.x)*(G-w.y)/(w.next.y-w.y)+w.x&&(R=!R),w=w.next;while(w!==h);return R}(d,u)&&(K(d.prev,d,u.prev)||K(d,u.prev,u))||Z(d,u)&&K(d.prev,d,d.next)>0&&K(u.prev,u,u.next)>0)}function K(d,u,h){return(u.y-d.y)*(h.x-u.x)-(u.x-d.x)*(h.y-u.y)}function Z(d,u){return d.x===u.x&&d.y===u.y}function Ae(d,u,h,y){const w=Ie(K(d,u,h)),R=Ie(K(d,u,y)),F=Ie(K(h,y,d)),G=Ie(K(h,y,u));return w!==R&&F!==G||!(w!==0||!_e(d,h,u))||!(R!==0||!_e(d,y,u))||!(F!==0||!_e(h,d,y))||!(G!==0||!_e(h,u,y))}function _e(d,u,h){return u.x<=Math.max(d.x,h.x)&&u.x>=Math.min(d.x,h.x)&&u.y<=Math.max(d.y,h.y)&&u.y>=Math.min(d.y,h.y)}function Ie(d){return d>0?1:d<0?-1:0}function Ue(d,u){return K(d.prev,d,d.next)<0?K(d,u,d.next)>=0&&K(d,d.prev,u)>=0:K(d,u,d.prev)<0||K(d,d.next,u)<0}function gt(d,u){const h=Yt(d.i,d.x,d.y),y=Yt(u.i,u.x,u.y),w=d.next,R=u.prev;return d.next=u,u.prev=d,h.next=w,w.prev=h,y.next=h,h.prev=y,R.next=y,y.prev=R,y}function wt(d,u,h,y){const w=Yt(d,u,h);return y?(w.next=y.next,w.prev=y,y.next.prev=w,y.next=w):(w.prev=w,w.next=w),w}function Xt(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Yt(d,u,h){return{i:d,x:u,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class bn{constructor(u,h){if(h>u)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=u,this._minGranularity=h}getGranularityForZoomLevel(u){return Math.max(Math.floor(this._baseZoomGranularity/(1<<u)),this._minGranularity,1)}}class Ln{constructor(u){this.fill=u.fill,this.line=u.line,this.tile=u.tile,this.stencil=u.stencil,this.circle=u.circle}}Ln.noSubdivision=new Ln({fill:new bn(0,0),line:new bn(0,0),tile:new bn(0,0),stencil:new bn(0,0),circle:1}),wr("SubdivisionGranularityExpression",bn),wr("SubdivisionGranularitySetting",Ln);const rr=-32768,er=32767;class Cr{constructor(u,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=u,this._granularityCellSize=At/u,this._canonical=h}_getKey(u,h){return(u+=32768)<<16|(h+=32768)<<0}_vertexToIndex(u,h){if(u<-32768||h<-32768||u>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const y=0|Math.round(u),w=0|Math.round(h),R=this._getKey(y,w);if(this._vertexDictionary.has(R))return this._vertexDictionary.get(R);const F=this._vertexBuffer.length/2;return this._vertexDictionary.set(R,F),this._vertexBuffer.push(y,w),F}_subdivideTrianglesScanline(u){if(this._granularity<2)return function(w,R){const F=[];for(let G=0;G<R.length;G+=3){const X=R[G],re=R[G+1],de=R[G+2],be=w[2*X],Ke=w[2*X+1];(w[2*re]-be)*(w[2*de+1]-Ke)-(w[2*re+1]-Ke)*(w[2*de]-be)>0?(F.push(X),F.push(de),F.push(re)):(F.push(X),F.push(re),F.push(de))}return F}(this._vertexBuffer,u);const h=[],y=u.length;for(let w=0;w<y;w+=3){const R=[u[w+0],u[w+1],u[w+2]],F=[this._vertexBuffer[2*u[w+0]+0],this._vertexBuffer[2*u[w+0]+1],this._vertexBuffer[2*u[w+1]+0],this._vertexBuffer[2*u[w+1]+1],this._vertexBuffer[2*u[w+2]+0],this._vertexBuffer[2*u[w+2]+1]];let G=1/0,X=1/0,re=-1/0,de=-1/0;for(let tt=0;tt<3;tt++){const ct=F[2*tt],vt=F[2*tt+1];G=Math.min(G,ct),re=Math.max(re,ct),X=Math.min(X,vt),de=Math.max(de,vt)}if(G===re||X===de)continue;const be=Math.floor(G/this._granularityCellSize),Ke=Math.ceil(re/this._granularityCellSize),ze=Math.floor(X/this._granularityCellSize),We=Math.ceil(de/this._granularityCellSize);if(be!==Ke||ze!==We)for(let tt=ze;tt<We;tt++){const ct=this._scanlineGenerateVertexRingForCellRow(tt,F,R);oi(this._vertexBuffer,ct,h)}else h.push(...R)}return h}_scanlineGenerateVertexRingForCellRow(u,h,y){const w=u*this._granularityCellSize,R=w+this._granularityCellSize,F=[];for(let G=0;G<3;G++){const X=h[2*G],re=h[2*G+1],de=h[2*(G+1)%6],be=h[(2*(G+1)+1)%6],Ke=h[2*(G+2)%6],ze=h[(2*(G+2)+1)%6],We=de-X,tt=be-re,ct=We===0,vt=tt===0,zt=(w-re)/tt,Et=(R-re)/tt,Fe=Math.min(zt,Et),at=Math.max(zt,Et);if(!vt&&(Fe>=1||at<=0)||vt&&(re<w||re>R)){be>=w&&be<=R&&F.push(y[(G+1)%3]);continue}!vt&&Fe>0&&F.push(this._vertexToIndex(X+We*Fe,re+tt*Fe));const Mt=X+We*Math.max(Fe,0),an=X+We*Math.min(at,1);ct||this._generateIntraEdgeVertices(F,X,re,de,be,Mt,an),!vt&&at<1&&F.push(this._vertexToIndex(X+We*at,re+tt*at)),(vt||be>=w&&be<=R)&&F.push(y[(G+1)%3]),!vt&&(be<=w||be>=R)&&this._generateInterEdgeVertices(F,X,re,de,be,Ke,ze,an,w,R)}return F}_generateIntraEdgeVertices(u,h,y,w,R,F,G){const X=w-h,re=R-y,de=re===0,be=de?Math.min(h,w):Math.min(F,G),Ke=de?Math.max(h,w):Math.max(F,G),ze=Math.floor(be/this._granularityCellSize)+1,We=Math.ceil(Ke/this._granularityCellSize)-1;if(de?h<w:F<G)for(let tt=ze;tt<=We;tt++){const ct=tt*this._granularityCellSize;u.push(this._vertexToIndex(ct,y+re*(ct-h)/X))}else for(let tt=We;tt>=ze;tt--){const ct=tt*this._granularityCellSize;u.push(this._vertexToIndex(ct,y+re*(ct-h)/X))}}_generateInterEdgeVertices(u,h,y,w,R,F,G,X,re,de){const be=R-y,Ke=F-w,ze=G-R,We=(re-R)/ze,tt=(de-R)/ze,ct=Math.min(We,tt),vt=Math.max(We,tt),zt=w+Ke*ct;let Et=Math.floor(Math.min(zt,X)/this._granularityCellSize)+1,Fe=Math.ceil(Math.max(zt,X)/this._granularityCellSize)-1,at=X<zt;const Mt=ze===0;if(Mt&&(G===re||G===de))return;if(Mt||ct>=1||vt<=0){const jn=y-G,gn=F+(h-F)*Math.min((re-G)/jn,(de-G)/jn);Et=Math.floor(Math.min(gn,X)/this._granularityCellSize)+1,Fe=Math.ceil(Math.max(gn,X)/this._granularityCellSize)-1,at=X<gn}const an=be>0?de:re;if(at)for(let jn=Et;jn<=Fe;jn++)u.push(this._vertexToIndex(jn*this._granularityCellSize,an));else for(let jn=Fe;jn>=Et;jn--)u.push(this._vertexToIndex(jn*this._granularityCellSize,an))}_generateOutline(u){const h=[];for(const y of u){const w=Or(y,this._granularity,!0),R=this._pointArrayToIndices(w),F=[];for(let G=1;G<R.length;G++)F.push(R[G-1]),F.push(R[G]);h.push(F)}return h}_handlePoles(u){let h=!1,y=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(y=!0)),(h||y)&&this._fillPoles(u,h,y)}_ensureNoPoleVertices(){const u=this._vertexBuffer;for(let h=0;h<u.length;h+=2){const y=u[h+1];y===rr&&(u[h+1]=-32767),y===er&&(u[h+1]=32766)}}_generatePoleQuad(u,h,y,w,R,F){w>R!=(F===rr)?(u.push(h),u.push(y),u.push(this._vertexToIndex(w,F)),u.push(y),u.push(this._vertexToIndex(R,F)),u.push(this._vertexToIndex(w,F))):(u.push(y),u.push(h),u.push(this._vertexToIndex(w,F)),u.push(this._vertexToIndex(R,F)),u.push(y),u.push(this._vertexToIndex(w,F)))}_fillPoles(u,h,y){const w=this._vertexBuffer,R=At,F=u.length;for(let G=2;G<F;G+=3){const X=u[G-2],re=u[G-1],de=u[G],be=w[2*X],Ke=w[2*X+1],ze=w[2*re],We=w[2*re+1],tt=w[2*de],ct=w[2*de+1];h&&(Ke===0&&We===0&&this._generatePoleQuad(u,X,re,be,ze,rr),We===0&&ct===0&&this._generatePoleQuad(u,re,de,ze,tt,rr),ct===0&&Ke===0&&this._generatePoleQuad(u,de,X,tt,be,rr)),y&&(Ke===R&&We===R&&this._generatePoleQuad(u,X,re,be,ze,er),We===R&&ct===R&&this._generatePoleQuad(u,re,de,ze,tt,er),ct===R&&Ke===R&&this._generatePoleQuad(u,de,X,tt,be,er))}}_initializeVertices(u){for(let h=0;h<u.length;h+=2)this._vertexToIndex(u[h],u[h+1])}subdividePolygonInternal(u,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:y,holeIndices:w}=function(G){const X=[],re=[];for(const de of G)if(de.length!==0){de!==G[0]&&X.push(re.length/2);for(let be=0;be<de.length;be++)re.push(de[be].x),re.push(de[be].y)}return{flattened:re,holeIndices:X}}(u);let R;this._initializeVertices(y);try{const G=function(re,de,be=2){const Ke=de&&de.length,ze=Ke?de[0]*be:re.length;let We=rd(re,0,ze,be,!0);const tt=[];if(!We||We.next===We.prev)return tt;let ct,vt,zt;if(Ke&&(We=function(Et,Fe,at,Mt){const an=[];for(let jn=0,gn=Fe.length;jn<gn;jn++){const En=rd(Et,Fe[jn]*Mt,jn<gn-1?Fe[jn+1]*Mt:Et.length,Mt,!1);En===En.next&&(En.steiner=!0),an.push(A(En))}an.sort(cm);for(let jn=0;jn<an.length;jn++)at=qf(an[jn],at);return at}(re,de,We,be)),re.length>80*be){ct=1/0,vt=1/0;let Et=-1/0,Fe=-1/0;for(let at=be;at<ze;at+=be){const Mt=re[at],an=re[at+1];Mt<ct&&(ct=Mt),an<vt&&(vt=an),Mt>Et&&(Et=Mt),an>Fe&&(Fe=an)}zt=Math.max(Et-ct,Fe-vt),zt=zt!==0?32767/zt:0}return Ml(We,tt,be,ct,vt,zt,0),tt}(y,w),X=this._convertIndices(y,G);R=this._subdivideTrianglesScanline(X)}catch(G){console.error(G)}let F=[];return h&&(F=this._generateOutline(u)),this._ensureNoPoleVertices(),this._handlePoles(R),{verticesFlattened:this._vertexBuffer,indicesTriangles:R,indicesLineList:F}}_convertIndices(u,h){const y=[];for(let w=0;w<h.length;w++)y.push(this._vertexToIndex(u[2*h[w]],u[2*h[w]+1]));return y}_pointArrayToIndices(u){const h=[];for(let y=0;y<u.length;y++){const w=u[y];h.push(this._vertexToIndex(w.x,w.y))}return h}}function pr(d,u,h,y=!0){return new Cr(h,u).subdividePolygonInternal(d,y)}function Or(d,u,h=!1){if(!d||d.length<1)return[];if(d.length<2)return[];const y=d[0],w=d[d.length-1],R=h&&(y.x!==w.x||y.y!==w.y);if(u<2)return R?[...d,d[0]]:[...d];const F=Math.floor(At/u),G=[];G.push(new U(d[0].x,d[0].y));const X=d.length,re=R?X:X-1;for(let de=0;de<re;de++){const be=d[de],Ke=de<X-1?d[de+1]:d[0],ze=be.x,We=be.y,tt=Ke.x,ct=Ke.y,vt=ze!==tt,zt=We!==ct;if(!vt&&!zt)continue;const Et=tt-ze,Fe=ct-We,at=Math.abs(Et),Mt=Math.abs(Fe);let an=ze,jn=We;for(;;){const En=Et>0?(Math.floor(an/F)+1)*F:(Math.ceil(an/F)-1)*F,or=Fe>0?(Math.floor(jn/F)+1)*F:(Math.ceil(jn/F)-1)*F,Wn=Math.abs(an-En),dr=Math.abs(jn-or),On=Math.abs(an-tt),Nr=Math.abs(jn-ct),vi=vt?Wn/at:Number.POSITIVE_INFINITY,hi=zt?dr/Mt:Number.POSITIVE_INFINITY;if((On<=Wn||!vt)&&(Nr<=dr||!zt))break;if(vi<hi&&vt||!zt){an=En,jn+=Fe*vi;const Xr=new U(an,Math.round(jn));G[G.length-1].x===Xr.x&&G[G.length-1].y===Xr.y||G.push(Xr)}else{an+=Et*hi,jn=or;const Xr=new U(Math.round(an),jn);G[G.length-1].x===Xr.x&&G[G.length-1].y===Xr.y||G.push(Xr)}}const gn=new U(tt,ct);G[G.length-1].x===gn.x&&G[G.length-1].y===gn.y||G.push(gn)}return G}function oi(d,u,h){if(u.length===0)throw new Error("Subdivision vertex ring is empty.");let y=0,w=d[2*u[0]];for(let X=1;X<u.length;X++){const re=d[2*u[X]];re<w&&(w=re,y=X)}const R=u.length;let F=y,G=(F+1)%R;for(;;){const X=F-1>=0?F-1:R-1,re=(G+1)%R,de=d[2*u[X]],be=d[2*u[re]],Ke=d[2*u[F]],ze=d[2*u[F]+1],We=d[2*u[G]+1];let tt=!1;if(de<be)tt=!0;else if(de>be)tt=!1;else{const ct=We-ze,vt=-(d[2*u[G]]-Ke),zt=ze<We?1:-1;((de-Ke)*ct+(d[2*u[X]+1]-ze)*vt)*zt>((be-Ke)*ct+(d[2*u[re]+1]-ze)*vt)*zt&&(tt=!0)}if(tt){const ct=u[X],vt=u[F],zt=u[G];ct!==vt&&ct!==zt&&vt!==zt&&h.push(zt,vt,ct),F--,F<0&&(F=R-1)}else{const ct=u[re],vt=u[F],zt=u[G];ct!==vt&&ct!==zt&&vt!==zt&&h.push(zt,vt,ct),G++,G>=R&&(G=0)}if(X===re)break}}function jr(d,u,h,y,w,R,F,G,X){const re=w.length/2,de=F&&G&&X;if(re<_i.MAX_VERTEX_ARRAY_LENGTH){const be=u.prepareSegment(re,h,y),Ke=be.vertexLength;for(let tt=0;tt<R.length;tt+=3)y.emplaceBack(Ke+R[tt],Ke+R[tt+1],Ke+R[tt+2]);let ze,We;be.vertexLength+=re,be.primitiveLength+=R.length/3,de&&(We=F.prepareSegment(re,h,G),ze=We.vertexLength,We.vertexLength+=re);for(let tt=0;tt<w.length;tt+=2)d(w[tt],w[tt+1]);if(de)for(let tt=0;tt<X.length;tt++){const ct=X[tt];for(let vt=1;vt<ct.length;vt+=2)G.emplaceBack(ze+ct[vt-1],ze+ct[vt]);We.primitiveLength+=ct.length/2}}else(function(be,Ke,ze,We,tt,ct){const vt=[];for(let Mt=0;Mt<We.length/2;Mt++)vt.push(-1);const zt={count:0};let Et=0,Fe=be.getOrCreateLatestSegment(Ke,ze),at=Fe.vertexLength;for(let Mt=2;Mt<tt.length;Mt+=3){const an=tt[Mt-2],jn=tt[Mt-1],gn=tt[Mt];let En=vt[an]<Et,or=vt[jn]<Et,Wn=vt[gn]<Et;Fe.vertexLength+((En?1:0)+(or?1:0)+(Wn?1:0))>_i.MAX_VERTEX_ARRAY_LENGTH&&(Fe=be.createNewSegment(Ke,ze),Et=zt.count,En=!0,or=!0,Wn=!0,at=0);const dr=zi(vt,We,ct,zt,an,En,Fe),On=zi(vt,We,ct,zt,jn,or,Fe),Nr=zi(vt,We,ct,zt,gn,Wn,Fe);ze.emplaceBack(at+dr-Et,at+On-Et,at+Nr-Et),Fe.primitiveLength++}})(u,h,y,w,R,d),de&&function(be,Ke,ze,We,tt,ct){const vt=[];for(let Mt=0;Mt<We.length/2;Mt++)vt.push(-1);const zt={count:0};let Et=0,Fe=be.getOrCreateLatestSegment(Ke,ze),at=Fe.vertexLength;for(let Mt=0;Mt<tt.length;Mt++){const an=tt[Mt];for(let jn=1;jn<tt[Mt].length;jn+=2){const gn=an[jn-1],En=an[jn];let or=vt[gn]<Et,Wn=vt[En]<Et;Fe.vertexLength+((or?1:0)+(Wn?1:0))>_i.MAX_VERTEX_ARRAY_LENGTH&&(Fe=be.createNewSegment(Ke,ze),Et=zt.count,or=!0,Wn=!0,at=0);const dr=zi(vt,We,ct,zt,gn,or,Fe),On=zi(vt,We,ct,zt,En,Wn,Fe);ze.emplaceBack(at+dr-Et,at+On-Et),Fe.primitiveLength++}}}(F,h,G,w,X,d),u.forceNewSegmentOnNextPrepare(),F==null||F.forceNewSegmentOnNextPrepare()}function zi(d,u,h,y,w,R,F){if(R){const G=y.count;return h(u[2*w],u[2*w+1]),d[w]=y.count,y.count++,F.vertexLength++,G}return d[w]}class yo{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Kt,this.indexArray=new Rn,this.indexArray2=new kr,this.programConfigurations=new pc(u.layers,u.zoom),this.segments=new _i,this.segments2=new _i,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,y){this.hasPattern=ih("fill",this.layers,h);const w=this.layers[0].layout.get("fill-sort-key"),R=!w.isConstant(),F=[];for(const{feature:G,id:X,index:re,sourceLayerIndex:de}of u){const be=this.layers[0]._featureFilter.needGeometry,Ke=OA(G,be);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),Ke,y))continue;const ze=R?w.evaluate(Ke,{},y,h.availableImages):void 0,We={id:X,properties:G.properties,type:G.type,sourceLayerIndex:de,index:re,geometry:be?Ke.geometry:cl(G),patterns:{},sortKey:ze};F.push(We)}R&&F.sort((G,X)=>G.sortKey-X.sortKey);for(const G of F){const{geometry:X,index:re,sourceLayerIndex:de}=G;if(this.hasPattern){const be=Uo("fill",this.layers,G,this.zoom,h);this.patternFeatures.push(be)}else this.addFeature(G,X,re,y,{},h.subdivisionGranularity);h.featureIndex.insert(u[re].feature,X,re,de,this.index)}}update(u,h,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,y)}addFeatures(u,h,y){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,y,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Oi),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,h,y,w,R,F){for(const G of Eu(h,500)){const X=pr(G,w,F.fill.getGranularityForZoomLevel(w.z)),re=this.layoutVertexArray;jr((de,be)=>{re.emplaceBack(de,be)},this.segments,this.layoutVertexArray,this.indexArray,X.verticesFlattened,X.indicesTriangles,this.segments2,this.indexArray2,X.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,y,R,w)}}let Fa,Zs;wr("FillBucket",yo,{omit:["layers","patternFeatures"]});var wa={get paint(){return Zs=Zs||new Aa({"fill-antialias":new Dr(f.paint_fill["fill-antialias"]),"fill-opacity":new Lr(f.paint_fill["fill-opacity"]),"fill-color":new Lr(f.paint_fill["fill-color"]),"fill-outline-color":new Lr(f.paint_fill["fill-outline-color"]),"fill-translate":new Dr(f.paint_fill["fill-translate"]),"fill-translate-anchor":new Dr(f.paint_fill["fill-translate-anchor"]),"fill-pattern":new Sh(f.paint_fill["fill-pattern"])})},get layout(){return Fa=Fa||new Aa({"fill-sort-key":new Lr(f.layout_fill["fill-sort-key"])})}};class Ha extends Pl{constructor(u){super(u,wa)}recalculate(u,h){super.recalculate(u,h);const y=this.paint._values["fill-outline-color"];y.value.kind==="constant"&&y.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new yo(u)}queryRadius(){return nh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:u,geometry:h,transform:y,pixelsToTileUnits:w}){return uf(rh(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-y.bearingInRadians,w),h)}isTileClipped(){return!0}}const Za=vs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Ru=vs([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hl}=Za;var Sa,is,gi,os,Xs,da,Is,eu={};function Bo(){if(is)return Sa;is=1;var d=B();function u(w,R,F,G,X){this.properties={},this.extent=F,this.type=0,this._pbf=w,this._geometry=-1,this._keys=G,this._values=X,w.readFields(h,this,R)}function h(w,R,F){w==1?R.id=F.readVarint():w==2?function(G,X){for(var re=G.readVarint()+G.pos;G.pos<re;){var de=X._keys[G.readVarint()],be=X._values[G.readVarint()];X.properties[de]=be}}(F,R):w==3?R.type=F.readVarint():w==4&&(R._geometry=F.pos)}function y(w){for(var R,F,G=0,X=0,re=w.length,de=re-1;X<re;de=X++)G+=((F=w[de]).x-(R=w[X]).x)*(R.y+F.y);return G}return Sa=u,u.types=["Unknown","Point","LineString","Polygon"],u.prototype.loadGeometry=function(){var w=this._pbf;w.pos=this._geometry;for(var R,F=w.readVarint()+w.pos,G=1,X=0,re=0,de=0,be=[];w.pos<F;){if(X<=0){var Ke=w.readVarint();G=7&Ke,X=Ke>>3}if(X--,G===1||G===2)re+=w.readSVarint(),de+=w.readSVarint(),G===1&&(R&&be.push(R),R=[]),R.push(new d(re,de));else{if(G!==7)throw new Error("unknown command "+G);R&&R.push(R[0].clone())}}return R&&be.push(R),be},u.prototype.bbox=function(){var w=this._pbf;w.pos=this._geometry;for(var R=w.readVarint()+w.pos,F=1,G=0,X=0,re=0,de=1/0,be=-1/0,Ke=1/0,ze=-1/0;w.pos<R;){if(G<=0){var We=w.readVarint();F=7&We,G=We>>3}if(G--,F===1||F===2)(X+=w.readSVarint())<de&&(de=X),X>be&&(be=X),(re+=w.readSVarint())<Ke&&(Ke=re),re>ze&&(ze=re);else if(F!==7)throw new Error("unknown command "+F)}return[de,Ke,be,ze]},u.prototype.toGeoJSON=function(w,R,F){var G,X,re=this.extent*Math.pow(2,F),de=this.extent*w,be=this.extent*R,Ke=this.loadGeometry(),ze=u.types[this.type];function We(vt){for(var zt=0;zt<vt.length;zt++){var Et=vt[zt];vt[zt]=[360*(Et.x+de)/re-180,360/Math.PI*Math.atan(Math.exp((180-360*(Et.y+be)/re)*Math.PI/180))-90]}}switch(this.type){case 1:var tt=[];for(G=0;G<Ke.length;G++)tt[G]=Ke[G][0];We(Ke=tt);break;case 2:for(G=0;G<Ke.length;G++)We(Ke[G]);break;case 3:for(Ke=function(vt){var zt=vt.length;if(zt<=1)return[vt];for(var Et,Fe,at=[],Mt=0;Mt<zt;Mt++){var an=y(vt[Mt]);an!==0&&(Fe===void 0&&(Fe=an<0),Fe===an<0?(Et&&at.push(Et),Et=[vt[Mt]]):Et.push(vt[Mt]))}return Et&&at.push(Et),at}(Ke),G=0;G<Ke.length;G++)for(X=0;X<Ke[G].length;X++)We(Ke[G][X])}Ke.length===1?Ke=Ke[0]:ze="Multi"+ze;var ct={type:"Feature",geometry:{type:ze,coordinates:Ke},properties:this.properties};return"id"in this&&(ct.id=this.id),ct},Sa}function oh(){if(os)return gi;os=1;var d=Bo();function u(y,w){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=y,this._keys=[],this._values=[],this._features=[],y.readFields(h,this,w),this.length=this._features.length}function h(y,w,R){y===15?w.version=R.readVarint():y===1?w.name=R.readString():y===5?w.extent=R.readVarint():y===2?w._features.push(R.pos):y===3?w._keys.push(R.readString()):y===4&&w._values.push(function(F){for(var G=null,X=F.readVarint()+F.pos;F.pos<X;){var re=F.readVarint()>>3;G=re===1?F.readString():re===2?F.readFloat():re===3?F.readDouble():re===4?F.readVarint64():re===5?F.readVarint():re===6?F.readSVarint():re===7?F.readBoolean():null}return G}(R))}return gi=u,u.prototype.feature=function(y){if(y<0||y>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[y];var w=this._pbf.readVarint()+this._pbf.pos;return new d(this._pbf,w,this.extent,this._keys,this._values)},gi}function yu(){return Is||(Is=1,eu.VectorTile=function(){if(da)return Xs;da=1;var d=oh();function u(h,y,w){if(h===3){var R=new d(w,w.readVarint()+w.pos);R.length&&(y[R.name]=R)}}return Xs=function(h,y){this.layers=h.readFields(u,{},y)},Xs}(),eu.VectorTileFeature=Bo(),eu.VectorTileLayer=oh()),eu}var lA=p(yu());const od=lA.VectorTileFeature.types,Xa=Math.pow(2,13);function La(d,u,h,y,w,R,F,G){d.emplaceBack(u,h,2*Math.floor(y*Xa)+F,w*Xa*2,R*Xa*2,Math.round(G))}class Th{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Ut,this.centroidVertexArray=new Bt,this.indexArray=new Rn,this.programConfigurations=new pc(u.layers,u.zoom),this.segments=new _i,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,y){this.features=[],this.hasPattern=ih("fill-extrusion",this.layers,h);for(const{feature:w,id:R,index:F,sourceLayerIndex:G}of u){const X=this.layers[0]._featureFilter.needGeometry,re=OA(w,X);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),re,y))continue;const de={id:R,sourceLayerIndex:G,index:F,geometry:X?re.geometry:cl(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(Uo("fill-extrusion",this.layers,de,this.zoom,h)):this.addFeature(de,de.geometry,F,y,{},h.subdivisionGranularity),h.featureIndex.insert(w,de.geometry,F,G,this.index,!0)}}addFeatures(u,h,y){for(const w of this.features){const{geometry:R}=w;this.addFeature(w,R,w.index,h,y,u.subdivisionGranularity)}}update(u,h,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,y)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,hl),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,Ru.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,h,y,w,R,F){for(const G of Eu(h,500)){const X={x:0,y:0,sampleCount:0},re=this.layoutVertexArray.length;this.processPolygon(X,w,u,G,F);const de=this.layoutVertexArray.length-re,be=Math.floor(X.x/X.sampleCount),Ke=Math.floor(X.y/X.sampleCount);for(let ze=0;ze<de;ze++)this.centroidVertexArray.emplaceBack(be,Ke)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,y,R,w)}processPolygon(u,h,y,w,R){if(w.length<1||dm(w[0]))return;for(const be of w)be.length!==0&&Vf(u,be);const F={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},G=R.fill.getGranularityForZoomLevel(h.z),X=od[y.type]==="Polygon";for(const be of w){if(be.length===0||dm(be))continue;const Ke=Or(be,G,X);this._generateSideFaces(Ke,F)}if(!X)return;const re=pr(w,h,G,!1),de=this.layoutVertexArray;jr((be,Ke)=>{La(de,be,Ke,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,re.verticesFlattened,re.indicesTriangles)}_generateSideFaces(u,h){let y=0;for(let w=1;w<u.length;w++){const R=u[w],F=u[w-1];if(Ph(R,F))continue;h.segment.vertexLength+4>_i.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const G=R.sub(F)._perp()._unit(),X=F.dist(R);y+X>32768&&(y=0),La(this.layoutVertexArray,R.x,R.y,G.x,G.y,0,0,y),La(this.layoutVertexArray,R.x,R.y,G.x,G.y,0,1,y),y+=X,La(this.layoutVertexArray,F.x,F.y,G.x,G.y,0,0,y),La(this.layoutVertexArray,F.x,F.y,G.x,G.y,0,1,y);const re=h.segment.vertexLength;this.indexArray.emplaceBack(re,re+2,re+1),this.indexArray.emplaceBack(re+1,re+2,re+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function Vf(d,u){for(let h=0;h<u.length;h++){const y=u[h];h===u.length-1&&u[0].x===y.x&&u[0].y===y.y||(d.x+=y.x,d.y+=y.y,d.sampleCount++)}}function Ph(d,u){return d.x===u.x&&(d.x<0||d.x>At)||d.y===u.y&&(d.y<0||d.y>At)}function dm(d){return d.every(u=>u.x<0)||d.every(u=>u.x>At)||d.every(u=>u.y<0)||d.every(u=>u.y>At)}let Wm;wr("FillExtrusionBucket",Th,{omit:["layers","features"]});var pf={get paint(){return Wm=Wm||new Aa({"fill-extrusion-opacity":new Dr(f["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Lr(f["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Dr(f["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Dr(f["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Sh(f["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Lr(f["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Lr(f["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Dr(f["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Gm extends Pl{constructor(u){super(u,pf)}createBucket(u){return new Th(u)}queryRadius(){return nh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:y,geometry:w,transform:R,pixelsToTileUnits:F,pixelPosMatrix:G}){const X=rh(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-R.bearingInRadians,F),re=this.paint.get("fill-extrusion-height").evaluate(h,y),de=this.paint.get("fill-extrusion-base").evaluate(h,y),be=function(ze,We,tt){const ct=[];for(const vt of ze){const zt=[vt.x,vt.y,0,1];me(zt,zt,We),ct.push(new U(zt[0]/zt[3],zt[1]/zt[3]))}return ct}(X,G),Ke=function(ze,We,tt,ct){const vt=[],zt=[],Et=ct[8]*We,Fe=ct[9]*We,at=ct[10]*We,Mt=ct[11]*We,an=ct[8]*tt,jn=ct[9]*tt,gn=ct[10]*tt,En=ct[11]*tt;for(const or of ze){const Wn=[],dr=[];for(const On of or){const Nr=On.x,vi=On.y,hi=ct[0]*Nr+ct[4]*vi+ct[12],Xr=ct[1]*Nr+ct[5]*vi+ct[13],Oo=ct[2]*Nr+ct[6]*vi+ct[14],el=ct[3]*Nr+ct[7]*vi+ct[15],vu=Oo+at,KA=el+Mt,Ld=hi+an,jc=Xr+jn,El=Oo+gn,tl=el+En,Du=new U((hi+Et)/KA,(Xr+Fe)/KA);Du.z=vu/KA,Wn.push(Du);const uA=new U(Ld/tl,jc/tl);uA.z=El/tl,dr.push(uA)}vt.push(Wn),zt.push(dr)}return[vt,zt]}(w,de,re,G);return function(ze,We,tt){let ct=1/0;uf(tt,We)&&(ct=IA(tt,We[0]));for(let vt=0;vt<We.length;vt++){const zt=We[vt],Et=ze[vt];for(let Fe=0;Fe<zt.length-1;Fe++){const at=zt[Fe],Mt=[at,zt[Fe+1],Et[Fe+1],Et[Fe],at];dl(tt,Mt)&&(ct=Math.min(ct,IA(tt,Mt)))}}return ct!==1/0&&ct}(Ke[0],Ke[1],be)}}function sd(d,u){return d.x*u.x+d.y*u.y}function IA(d,u){if(d.length===1){let h=0;const y=u[h++];let w;for(;!w||y.equals(w);)if(w=u[h++],!w)return 1/0;for(;h<u.length;h++){const R=u[h],F=d[0],G=w.sub(y),X=R.sub(y),re=F.sub(y),de=sd(G,G),be=sd(G,X),Ke=sd(X,X),ze=sd(re,G),We=sd(re,X),tt=de*Ke-be*be,ct=(Ke*ze-be*We)/tt,vt=(de*We-be*ze)/tt,zt=y.z*(1-ct-vt)+w.z*ct+R.z*vt;if(isFinite(zt))return zt}return 1/0}{let h=1/0;for(const y of u)h=Math.min(h,y.z);return h}}const hm=vs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:U0}=hm,Qm=vs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:fm}=Qm,JA=lA.VectorTileFeature.types,mf=Math.cos(Math.PI/180*37.5),ad=Math.pow(2,14)/.5;class kA{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(h=>h.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new It,this.layoutVertexArray2=new nn,this.indexArray=new Rn,this.programConfigurations=new pc(u.layers,u.zoom),this.segments=new _i,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(u,h,y){this.hasPattern=ih("line",this.layers,h);const w=this.layers[0].layout.get("line-sort-key"),R=!w.isConstant(),F=[];for(const{feature:G,id:X,index:re,sourceLayerIndex:de}of u){const be=this.layers[0]._featureFilter.needGeometry,Ke=OA(G,be);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),Ke,y))continue;const ze=R?w.evaluate(Ke,{},y):void 0,We={id:X,properties:G.properties,type:G.type,sourceLayerIndex:de,index:re,geometry:be?Ke.geometry:cl(G),patterns:{},sortKey:ze};F.push(We)}R&&F.sort((G,X)=>G.sortKey-X.sortKey);for(const G of F){const{geometry:X,index:re,sourceLayerIndex:de}=G;if(this.hasPattern){const be=Uo("line",this.layers,G,this.zoom,h);this.patternFeatures.push(be)}else this.addFeature(G,X,re,y,{},h.subdivisionGranularity);h.featureIndex.insert(u[re].feature,X,re,de,this.index)}}update(u,h,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,h,this.stateDependentLayers,y)}addFeatures(u,h,y){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,y,u.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,fm)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,U0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,h,y,w,R,F){const G=this.layers[0].layout,X=G.get("line-join").evaluate(u,{}),re=G.get("line-cap"),de=G.get("line-miter-limit"),be=G.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const Ke of h)this.addLine(Ke,u,X,re,de,be,w,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,y,R,w)}addLine(u,h,y,w,R,F,G,X){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,u=Or(u,G?X.line.getGranularityForZoomLevel(G.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Et=0;Et<u.length-1;Et++)this.totalDistance+=u[Et].dist(u[Et+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const re=JA[h.type]==="Polygon";let de=u.length;for(;de>=2&&u[de-1].equals(u[de-2]);)de--;let be=0;for(;be<de-1&&u[be].equals(u[be+1]);)be++;if(de<(re?3:2))return;y==="bevel"&&(R=1.05);const Ke=this.overscaling<=16?15*At/(512*this.overscaling):0,ze=this.segments.prepareSegment(10*de,this.layoutVertexArray,this.indexArray);let We,tt,ct,vt,zt;this.e1=this.e2=-1,re&&(We=u[de-2],zt=u[be].sub(We)._unit()._perp());for(let Et=be;Et<de;Et++){if(ct=Et===de-1?re?u[be+1]:void 0:u[Et+1],ct&&u[Et].equals(ct))continue;zt&&(vt=zt),We&&(tt=We),We=u[Et],zt=ct?ct.sub(We)._unit()._perp():vt,vt=vt||zt;let Fe=vt.add(zt);Fe.x===0&&Fe.y===0||Fe._unit();const at=vt.x*zt.x+vt.y*zt.y,Mt=Fe.x*zt.x+Fe.y*zt.y,an=Mt!==0?1/Mt:1/0,jn=2*Math.sqrt(2-2*Mt),gn=Mt<mf&&tt&&ct,En=vt.x*zt.y-vt.y*zt.x>0;if(gn&&Et>be){const dr=We.dist(tt);if(dr>2*Ke){const On=We.sub(We.sub(tt)._mult(Ke/dr)._round());this.updateDistance(tt,On),this.addCurrentVertex(On,vt,0,0,ze),tt=On}}const or=tt&&ct;let Wn=or?y:re?"butt":w;if(or&&Wn==="round"&&(an<F?Wn="miter":an<=2&&(Wn="fakeround")),Wn==="miter"&&an>R&&(Wn="bevel"),Wn==="bevel"&&(an>2&&(Wn="flipbevel"),an<R&&(Wn="miter")),tt&&this.updateDistance(tt,We),Wn==="miter")Fe._mult(an),this.addCurrentVertex(We,Fe,0,0,ze);else if(Wn==="flipbevel"){if(an>100)Fe=zt.mult(-1);else{const dr=an*vt.add(zt).mag()/vt.sub(zt).mag();Fe._perp()._mult(dr*(En?-1:1))}this.addCurrentVertex(We,Fe,0,0,ze),this.addCurrentVertex(We,Fe.mult(-1),0,0,ze)}else if(Wn==="bevel"||Wn==="fakeround"){const dr=-Math.sqrt(an*an-1),On=En?dr:0,Nr=En?0:dr;if(tt&&this.addCurrentVertex(We,vt,On,Nr,ze),Wn==="fakeround"){const vi=Math.round(180*jn/Math.PI/20);for(let hi=1;hi<vi;hi++){let Xr=hi/vi;if(Xr!==.5){const el=Xr-.5;Xr+=Xr*el*(Xr-1)*((1.0904+at*(at*(3.55645-1.43519*at)-3.2452))*el*el+(.848013+at*(.215638*at-1.06021)))}const Oo=zt.sub(vt)._mult(Xr)._add(vt)._unit()._mult(En?-1:1);this.addHalfVertex(We,Oo.x,Oo.y,!1,En,0,ze)}}ct&&this.addCurrentVertex(We,zt,-On,-Nr,ze)}else if(Wn==="butt")this.addCurrentVertex(We,Fe,0,0,ze);else if(Wn==="square"){const dr=tt?1:-1;this.addCurrentVertex(We,Fe,dr,dr,ze)}else Wn==="round"&&(tt&&(this.addCurrentVertex(We,vt,0,0,ze),this.addCurrentVertex(We,vt,1,1,ze,!0)),ct&&(this.addCurrentVertex(We,zt,-1,-1,ze,!0),this.addCurrentVertex(We,zt,0,0,ze)));if(gn&&Et<de-1){const dr=We.dist(ct);if(dr>2*Ke){const On=We.add(ct.sub(We)._mult(Ke/dr)._round());this.updateDistance(We,On),this.addCurrentVertex(On,zt,0,0,ze),We=On}}}}addCurrentVertex(u,h,y,w,R,F=!1){const G=h.y*w-h.x,X=-h.y-h.x*w;this.addHalfVertex(u,h.x+h.y*y,h.y-h.x*y,F,!1,y,R),this.addHalfVertex(u,G,X,F,!0,-w,R),this.distance>ad/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,h,y,w,R,F))}addHalfVertex({x:u,y:h},y,w,R,F,G,X){const re=.5*(this.lineClips?this.scaledDistance*(ad-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(R?1:0),(h<<1)+(F?1:0),Math.round(63*y)+128,Math.round(63*w)+128,1+(G===0?0:G<0?-1:1)|(63&re)<<2,re>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const de=X.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,de,this.e2),X.primitiveLength++),F?this.e2=de:this.e1=de}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,h){this.distance+=u.dist(h),this.updateScaledDistance()}}let pm,Ym;wr("LineBucket",kA,{omit:["layers","patternFeatures"]});var qm={get paint(){return Ym=Ym||new Aa({"line-opacity":new Lr(f.paint_line["line-opacity"]),"line-color":new Lr(f.paint_line["line-color"]),"line-translate":new Dr(f.paint_line["line-translate"]),"line-translate-anchor":new Dr(f.paint_line["line-translate-anchor"]),"line-width":new Lr(f.paint_line["line-width"]),"line-gap-width":new Lr(f.paint_line["line-gap-width"]),"line-offset":new Lr(f.paint_line["line-offset"]),"line-blur":new Lr(f.paint_line["line-blur"]),"line-dasharray":new td(f.paint_line["line-dasharray"]),"line-pattern":new Sh(f.paint_line["line-pattern"]),"line-gradient":new Eh(f.paint_line["line-gradient"])})},get layout(){return pm=pm||new Aa({"line-cap":new Dr(f.layout_line["line-cap"]),"line-join":new Lr(f.layout_line["line-join"]),"line-miter-limit":new Dr(f.layout_line["line-miter-limit"]),"line-round-limit":new Dr(f.layout_line["line-round-limit"]),"line-sort-key":new Lr(f.layout_line["line-sort-key"])})}};class jy extends Lr{possiblyEvaluate(u,h){return h=new gs(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(u,h)}evaluate(u,h,y,w){return h=yt({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(u,h,y,w)}}let Kd;class Vg extends Pl{constructor(u){super(u,qm),this.gradientVersion=0,Kd||(Kd=new jy(qm.paint.properties["line-width"].specification),Kd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(y){return y._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof Zr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,h){super.recalculate(u,h),this.paint._values["line-floorwidth"]=Kd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new kA(u)}queryRadius(u){const h=u,y=Vm(Fc("line-width",this,h),Fc("line-gap-width",this,h)),w=Fc("line-offset",this,h);return y/2+Math.abs(w)+nh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:u,feature:h,featureState:y,geometry:w,transform:R,pixelsToTileUnits:F}){const G=rh(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-R.bearingInRadians,F),X=F/2*Vm(this.paint.get("line-width").evaluate(h,y),this.paint.get("line-gap-width").evaluate(h,y)),re=this.paint.get("line-offset").evaluate(h,y);return re&&(w=function(de,be){const Ke=[];for(let ze=0;ze<de.length;ze++){const We=de[ze],tt=[];for(let ct=0;ct<We.length;ct++){const vt=We[ct-1],zt=We[ct],Et=We[ct+1],Fe=ct===0?new U(0,0):zt.sub(vt)._unit()._perp(),at=ct===We.length-1?new U(0,0):Et.sub(zt)._unit()._perp(),Mt=Fe._add(at)._unit(),an=Mt.x*at.x+Mt.y*at.y;an!==0&&Mt._mult(1/an),tt.push(Mt._mult(be)._add(zt))}Ke.push(tt)}return Ke}(w,re*F)),function(de,be,Ke){for(let ze=0;ze<be.length;ze++){const We=be[ze];if(de.length>=3){for(let tt=0;tt<We.length;tt++)if(mc(de,We[tt]))return!0}if(am(de,We,Ke))return!0}return!1}(G,w,X)}isTileClipped(){return!0}}function Vm(d,u){return u>0?u+2*d:d}const $f=vs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),z0=vs([{name:"a_projected_pos",components:3,type:"Float32"}],4);vs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Hf=vs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);vs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const j0=vs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),$g=vs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function N0(d,u,h){return d.sections.forEach(y=>{y.text=function(w,R,F){const G=R.layout.get("text-transform").evaluate(F,{});return G==="uppercase"?w=w.toLocaleUpperCase():G==="lowercase"&&(w=w.toLocaleLowerCase()),cu.applyArabicShaping&&(w=cu.applyArabicShaping(w)),w}(y.text,u,h)}),d}vs([{name:"triangle",components:3,type:"Uint16"}]),vs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),vs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),vs([{type:"Float32",name:"offsetX"}]),vs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),vs([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const gf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Hg,W0,G0,Sl=24,Kh={};function Ny(){return Hg||(Hg=1,Kh.read=function(d,u,h,y,w){var R,F,G=8*w-y-1,X=(1<<G)-1,re=X>>1,de=-7,be=h?w-1:0,Ke=h?-1:1,ze=d[u+be];for(be+=Ke,R=ze&(1<<-de)-1,ze>>=-de,de+=G;de>0;R=256*R+d[u+be],be+=Ke,de-=8);for(F=R&(1<<-de)-1,R>>=-de,de+=y;de>0;F=256*F+d[u+be],be+=Ke,de-=8);if(R===0)R=1-re;else{if(R===X)return F?NaN:1/0*(ze?-1:1);F+=Math.pow(2,y),R-=re}return(ze?-1:1)*F*Math.pow(2,R-y)},Kh.write=function(d,u,h,y,w,R){var F,G,X,re=8*R-w-1,de=(1<<re)-1,be=de>>1,Ke=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,ze=y?0:R-1,We=y?1:-1,tt=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(G=isNaN(u)?1:0,F=de):(F=Math.floor(Math.log(u)/Math.LN2),u*(X=Math.pow(2,-F))<1&&(F--,X*=2),(u+=F+be>=1?Ke/X:Ke*Math.pow(2,1-be))*X>=2&&(F++,X/=2),F+be>=de?(G=0,F=de):F+be>=1?(G=(u*X-1)*Math.pow(2,w),F+=be):(G=u*Math.pow(2,be-1)*Math.pow(2,w),F=0));w>=8;d[h+ze]=255&G,ze+=We,G/=256,w-=8);for(F=F<<w|G,re+=w;re>0;d[h+ze]=255&F,ze+=We,F/=256,re-=8);d[h+ze-We]|=128*tt}),Kh}function Zf(){if(G0)return W0;G0=1,W0=u;var d=Ny();function u(Fe){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Fe)?Fe:new Uint8Array(Fe||0),this.pos=0,this.type=0,this.length=this.buf.length}u.Varint=0,u.Fixed64=1,u.Bytes=2,u.Fixed32=5;var h=4294967296,y=1/h,w=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function R(Fe){return Fe.type===u.Bytes?Fe.readVarint()+Fe.pos:Fe.pos+1}function F(Fe,at,Mt){return Mt?4294967296*at+(Fe>>>0):4294967296*(at>>>0)+(Fe>>>0)}function G(Fe,at,Mt){var an=at<=16383?1:at<=2097151?2:at<=268435455?3:Math.floor(Math.log(at)/(7*Math.LN2));Mt.realloc(an);for(var jn=Mt.pos-1;jn>=Fe;jn--)Mt.buf[jn+an]=Mt.buf[jn]}function X(Fe,at){for(var Mt=0;Mt<Fe.length;Mt++)at.writeVarint(Fe[Mt])}function re(Fe,at){for(var Mt=0;Mt<Fe.length;Mt++)at.writeSVarint(Fe[Mt])}function de(Fe,at){for(var Mt=0;Mt<Fe.length;Mt++)at.writeFloat(Fe[Mt])}function be(Fe,at){for(var Mt=0;Mt<Fe.length;Mt++)at.writeDouble(Fe[Mt])}function Ke(Fe,at){for(var Mt=0;Mt<Fe.length;Mt++)at.writeBoolean(Fe[Mt])}function ze(Fe,at){for(var Mt=0;Mt<Fe.length;Mt++)at.writeFixed32(Fe[Mt])}function We(Fe,at){for(var Mt=0;Mt<Fe.length;Mt++)at.writeSFixed32(Fe[Mt])}function tt(Fe,at){for(var Mt=0;Mt<Fe.length;Mt++)at.writeFixed64(Fe[Mt])}function ct(Fe,at){for(var Mt=0;Mt<Fe.length;Mt++)at.writeSFixed64(Fe[Mt])}function vt(Fe,at){return(Fe[at]|Fe[at+1]<<8|Fe[at+2]<<16)+16777216*Fe[at+3]}function zt(Fe,at,Mt){Fe[Mt]=at,Fe[Mt+1]=at>>>8,Fe[Mt+2]=at>>>16,Fe[Mt+3]=at>>>24}function Et(Fe,at){return(Fe[at]|Fe[at+1]<<8|Fe[at+2]<<16)+(Fe[at+3]<<24)}return u.prototype={destroy:function(){this.buf=null},readFields:function(Fe,at,Mt){for(Mt=Mt||this.length;this.pos<Mt;){var an=this.readVarint(),jn=an>>3,gn=this.pos;this.type=7&an,Fe(jn,at,this),this.pos===gn&&this.skip(an)}return at},readMessage:function(Fe,at){return this.readFields(Fe,at,this.readVarint()+this.pos)},readFixed32:function(){var Fe=vt(this.buf,this.pos);return this.pos+=4,Fe},readSFixed32:function(){var Fe=Et(this.buf,this.pos);return this.pos+=4,Fe},readFixed64:function(){var Fe=vt(this.buf,this.pos)+vt(this.buf,this.pos+4)*h;return this.pos+=8,Fe},readSFixed64:function(){var Fe=vt(this.buf,this.pos)+Et(this.buf,this.pos+4)*h;return this.pos+=8,Fe},readFloat:function(){var Fe=d.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Fe},readDouble:function(){var Fe=d.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Fe},readVarint:function(Fe){var at,Mt,an=this.buf;return at=127&(Mt=an[this.pos++]),Mt<128?at:(at|=(127&(Mt=an[this.pos++]))<<7,Mt<128?at:(at|=(127&(Mt=an[this.pos++]))<<14,Mt<128?at:(at|=(127&(Mt=an[this.pos++]))<<21,Mt<128?at:function(jn,gn,En){var or,Wn,dr=En.buf;if(or=(112&(Wn=dr[En.pos++]))>>4,Wn<128||(or|=(127&(Wn=dr[En.pos++]))<<3,Wn<128)||(or|=(127&(Wn=dr[En.pos++]))<<10,Wn<128)||(or|=(127&(Wn=dr[En.pos++]))<<17,Wn<128)||(or|=(127&(Wn=dr[En.pos++]))<<24,Wn<128)||(or|=(1&(Wn=dr[En.pos++]))<<31,Wn<128))return F(jn,or,gn);throw new Error("Expected varint not more than 10 bytes")}(at|=(15&(Mt=an[this.pos]))<<28,Fe,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Fe=this.readVarint();return Fe%2==1?(Fe+1)/-2:Fe/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var Fe=this.readVarint()+this.pos,at=this.pos;return this.pos=Fe,Fe-at>=12&&w?function(Mt,an,jn){return w.decode(Mt.subarray(an,jn))}(this.buf,at,Fe):function(Mt,an,jn){for(var gn="",En=an;En<jn;){var or,Wn,dr,On=Mt[En],Nr=null,vi=On>239?4:On>223?3:On>191?2:1;if(En+vi>jn)break;vi===1?On<128&&(Nr=On):vi===2?(192&(or=Mt[En+1]))==128&&(Nr=(31&On)<<6|63&or)<=127&&(Nr=null):vi===3?(Wn=Mt[En+2],(192&(or=Mt[En+1]))==128&&(192&Wn)==128&&((Nr=(15&On)<<12|(63&or)<<6|63&Wn)<=2047||Nr>=55296&&Nr<=57343)&&(Nr=null)):vi===4&&(Wn=Mt[En+2],dr=Mt[En+3],(192&(or=Mt[En+1]))==128&&(192&Wn)==128&&(192&dr)==128&&((Nr=(15&On)<<18|(63&or)<<12|(63&Wn)<<6|63&dr)<=65535||Nr>=1114112)&&(Nr=null)),Nr===null?(Nr=65533,vi=1):Nr>65535&&(Nr-=65536,gn+=String.fromCharCode(Nr>>>10&1023|55296),Nr=56320|1023&Nr),gn+=String.fromCharCode(Nr),En+=vi}return gn}(this.buf,at,Fe)},readBytes:function(){var Fe=this.readVarint()+this.pos,at=this.buf.subarray(this.pos,Fe);return this.pos=Fe,at},readPackedVarint:function(Fe,at){if(this.type!==u.Bytes)return Fe.push(this.readVarint(at));var Mt=R(this);for(Fe=Fe||[];this.pos<Mt;)Fe.push(this.readVarint(at));return Fe},readPackedSVarint:function(Fe){if(this.type!==u.Bytes)return Fe.push(this.readSVarint());var at=R(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readSVarint());return Fe},readPackedBoolean:function(Fe){if(this.type!==u.Bytes)return Fe.push(this.readBoolean());var at=R(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readBoolean());return Fe},readPackedFloat:function(Fe){if(this.type!==u.Bytes)return Fe.push(this.readFloat());var at=R(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readFloat());return Fe},readPackedDouble:function(Fe){if(this.type!==u.Bytes)return Fe.push(this.readDouble());var at=R(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readDouble());return Fe},readPackedFixed32:function(Fe){if(this.type!==u.Bytes)return Fe.push(this.readFixed32());var at=R(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readFixed32());return Fe},readPackedSFixed32:function(Fe){if(this.type!==u.Bytes)return Fe.push(this.readSFixed32());var at=R(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readSFixed32());return Fe},readPackedFixed64:function(Fe){if(this.type!==u.Bytes)return Fe.push(this.readFixed64());var at=R(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readFixed64());return Fe},readPackedSFixed64:function(Fe){if(this.type!==u.Bytes)return Fe.push(this.readSFixed64());var at=R(this);for(Fe=Fe||[];this.pos<at;)Fe.push(this.readSFixed64());return Fe},skip:function(Fe){var at=7&Fe;if(at===u.Varint)for(;this.buf[this.pos++]>127;);else if(at===u.Bytes)this.pos=this.readVarint()+this.pos;else if(at===u.Fixed32)this.pos+=4;else{if(at!==u.Fixed64)throw new Error("Unimplemented type: "+at);this.pos+=8}},writeTag:function(Fe,at){this.writeVarint(Fe<<3|at)},realloc:function(Fe){for(var at=this.length||16;at<this.pos+Fe;)at*=2;if(at!==this.length){var Mt=new Uint8Array(at);Mt.set(this.buf),this.buf=Mt,this.length=at}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Fe){this.realloc(4),zt(this.buf,Fe,this.pos),this.pos+=4},writeSFixed32:function(Fe){this.realloc(4),zt(this.buf,Fe,this.pos),this.pos+=4},writeFixed64:function(Fe){this.realloc(8),zt(this.buf,-1&Fe,this.pos),zt(this.buf,Math.floor(Fe*y),this.pos+4),this.pos+=8},writeSFixed64:function(Fe){this.realloc(8),zt(this.buf,-1&Fe,this.pos),zt(this.buf,Math.floor(Fe*y),this.pos+4),this.pos+=8},writeVarint:function(Fe){(Fe=+Fe||0)>268435455||Fe<0?function(at,Mt){var an,jn;if(at>=0?(an=at%4294967296|0,jn=at/4294967296|0):(jn=~(-at/4294967296),4294967295^(an=~(-at%4294967296))?an=an+1|0:(an=0,jn=jn+1|0)),at>=18446744073709552e3||at<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Mt.realloc(10),function(gn,En,or){or.buf[or.pos++]=127&gn|128,gn>>>=7,or.buf[or.pos++]=127&gn|128,gn>>>=7,or.buf[or.pos++]=127&gn|128,gn>>>=7,or.buf[or.pos++]=127&gn|128,or.buf[or.pos]=127&(gn>>>=7)}(an,0,Mt),function(gn,En){var or=(7&gn)<<4;En.buf[En.pos++]|=or|((gn>>>=3)?128:0),gn&&(En.buf[En.pos++]=127&gn|((gn>>>=7)?128:0),gn&&(En.buf[En.pos++]=127&gn|((gn>>>=7)?128:0),gn&&(En.buf[En.pos++]=127&gn|((gn>>>=7)?128:0),gn&&(En.buf[En.pos++]=127&gn|((gn>>>=7)?128:0),gn&&(En.buf[En.pos++]=127&gn)))))}(jn,Mt)}(Fe,this):(this.realloc(4),this.buf[this.pos++]=127&Fe|(Fe>127?128:0),Fe<=127||(this.buf[this.pos++]=127&(Fe>>>=7)|(Fe>127?128:0),Fe<=127||(this.buf[this.pos++]=127&(Fe>>>=7)|(Fe>127?128:0),Fe<=127||(this.buf[this.pos++]=Fe>>>7&127))))},writeSVarint:function(Fe){this.writeVarint(Fe<0?2*-Fe-1:2*Fe)},writeBoolean:function(Fe){this.writeVarint(!!Fe)},writeString:function(Fe){Fe=String(Fe),this.realloc(4*Fe.length),this.pos++;var at=this.pos;this.pos=function(an,jn,gn){for(var En,or,Wn=0;Wn<jn.length;Wn++){if((En=jn.charCodeAt(Wn))>55295&&En<57344){if(!or){En>56319||Wn+1===jn.length?(an[gn++]=239,an[gn++]=191,an[gn++]=189):or=En;continue}if(En<56320){an[gn++]=239,an[gn++]=191,an[gn++]=189,or=En;continue}En=or-55296<<10|En-56320|65536,or=null}else or&&(an[gn++]=239,an[gn++]=191,an[gn++]=189,or=null);En<128?an[gn++]=En:(En<2048?an[gn++]=En>>6|192:(En<65536?an[gn++]=En>>12|224:(an[gn++]=En>>18|240,an[gn++]=En>>12&63|128),an[gn++]=En>>6&63|128),an[gn++]=63&En|128)}return gn}(this.buf,Fe,this.pos);var Mt=this.pos-at;Mt>=128&&G(at,Mt,this),this.pos=at-1,this.writeVarint(Mt),this.pos+=Mt},writeFloat:function(Fe){this.realloc(4),d.write(this.buf,Fe,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Fe){this.realloc(8),d.write(this.buf,Fe,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Fe){var at=Fe.length;this.writeVarint(at),this.realloc(at);for(var Mt=0;Mt<at;Mt++)this.buf[this.pos++]=Fe[Mt]},writeRawMessage:function(Fe,at){this.pos++;var Mt=this.pos;Fe(at,this);var an=this.pos-Mt;an>=128&&G(Mt,an,this),this.pos=Mt-1,this.writeVarint(an),this.pos+=an},writeMessage:function(Fe,at,Mt){this.writeTag(Fe,u.Bytes),this.writeRawMessage(at,Mt)},writePackedVarint:function(Fe,at){at.length&&this.writeMessage(Fe,X,at)},writePackedSVarint:function(Fe,at){at.length&&this.writeMessage(Fe,re,at)},writePackedBoolean:function(Fe,at){at.length&&this.writeMessage(Fe,Ke,at)},writePackedFloat:function(Fe,at){at.length&&this.writeMessage(Fe,de,at)},writePackedDouble:function(Fe,at){at.length&&this.writeMessage(Fe,be,at)},writePackedFixed32:function(Fe,at){at.length&&this.writeMessage(Fe,ze,at)},writePackedSFixed32:function(Fe,at){at.length&&this.writeMessage(Fe,We,at)},writePackedFixed64:function(Fe,at){at.length&&this.writeMessage(Fe,tt,at)},writePackedSFixed64:function(Fe,at){at.length&&this.writeMessage(Fe,ct,at)},writeBytesField:function(Fe,at){this.writeTag(Fe,u.Bytes),this.writeBytes(at)},writeFixed32Field:function(Fe,at){this.writeTag(Fe,u.Fixed32),this.writeFixed32(at)},writeSFixed32Field:function(Fe,at){this.writeTag(Fe,u.Fixed32),this.writeSFixed32(at)},writeFixed64Field:function(Fe,at){this.writeTag(Fe,u.Fixed64),this.writeFixed64(at)},writeSFixed64Field:function(Fe,at){this.writeTag(Fe,u.Fixed64),this.writeSFixed64(at)},writeVarintField:function(Fe,at){this.writeTag(Fe,u.Varint),this.writeVarint(at)},writeSVarintField:function(Fe,at){this.writeTag(Fe,u.Varint),this.writeSVarint(at)},writeStringField:function(Fe,at){this.writeTag(Fe,u.Bytes),this.writeString(at)},writeFloatField:function(Fe,at){this.writeTag(Fe,u.Fixed32),this.writeFloat(at)},writeDoubleField:function(Fe,at){this.writeTag(Fe,u.Fixed64),this.writeDouble(at)},writeBooleanField:function(Fe,at){this.writeVarintField(Fe,!!at)}},W0}var Op=p(Zf());const Ua=3;function Wy(d,u,h){d===1&&h.readMessage(Zg,u)}function Zg(d,u,h){if(d===3){const{id:y,bitmap:w,width:R,height:F,left:G,top:X,advance:re}=h.readMessage(Gy,{});u.push({id:y,bitmap:new mu({width:R+2*Ua,height:F+2*Ua},w),metrics:{width:R,height:F,left:G,top:X,advance:re}})}}function Gy(d,u,h){d===1?u.id=h.readVarint():d===2?u.bitmap=h.readBytes():d===3?u.width=h.readVarint():d===4?u.height=h.readVarint():d===5?u.left=h.readSVarint():d===6?u.top=h.readSVarint():d===7&&(u.advance=h.readVarint())}const Qy=Ua;function Q0(d){let u=0,h=0;for(const F of d)u+=F.w*F.h,h=Math.max(h,F.w);d.sort((F,G)=>G.h-F.h);const y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),h),h:1/0}];let w=0,R=0;for(const F of d)for(let G=y.length-1;G>=0;G--){const X=y[G];if(!(F.w>X.w||F.h>X.h)){if(F.x=X.x,F.y=X.y,R=Math.max(R,F.y+F.h),w=Math.max(w,F.x+F.w),F.w===X.w&&F.h===X.h){const re=y.pop();G<y.length&&(y[G]=re)}else F.h===X.h?(X.x+=F.w,X.w-=F.w):F.w===X.w?(X.y+=F.h,X.h-=F.h):(y.push({x:X.x+F.w,y:X.y,w:X.w-F.w,h:F.h}),X.y+=F.h,X.h-=F.h);break}}return{w,h:R,fill:u/(w*R)||0}}const TA=1;class Y0{constructor(u,{pixelRatio:h,version:y,stretchX:w,stretchY:R,content:F,textFitWidth:G,textFitHeight:X}){this.paddedRect=u,this.pixelRatio=h,this.stretchX=w,this.stretchY=R,this.content=F,this.version=y,this.textFitWidth=G,this.textFitHeight=X}get tl(){return[this.paddedRect.x+TA,this.paddedRect.y+TA]}get br(){return[this.paddedRect.x+this.paddedRect.w-TA,this.paddedRect.y+this.paddedRect.h-TA]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*TA)/this.pixelRatio,(this.paddedRect.h-2*TA)/this.pixelRatio]}}class Lc{constructor(u,h){const y={},w={};this.haveRenderCallbacks=[];const R=[];this.addImages(u,y,R),this.addImages(h,w,R);const{w:F,h:G}=Q0(R),X=new Jl({width:F||1,height:G||1});for(const re in u){const de=u[re],be=y[re].paddedRect;Jl.copy(de.data,X,{x:0,y:0},{x:be.x+TA,y:be.y+TA},de.data)}for(const re in h){const de=h[re],be=w[re].paddedRect,Ke=be.x+TA,ze=be.y+TA,We=de.data.width,tt=de.data.height;Jl.copy(de.data,X,{x:0,y:0},{x:Ke,y:ze},de.data),Jl.copy(de.data,X,{x:0,y:tt-1},{x:Ke,y:ze-1},{width:We,height:1}),Jl.copy(de.data,X,{x:0,y:0},{x:Ke,y:ze+tt},{width:We,height:1}),Jl.copy(de.data,X,{x:We-1,y:0},{x:Ke-1,y:ze},{width:1,height:tt}),Jl.copy(de.data,X,{x:0,y:0},{x:Ke+We,y:ze},{width:1,height:tt})}this.image=X,this.iconPositions=y,this.patternPositions=w}addImages(u,h,y){for(const w in u){const R=u[w],F={x:0,y:0,w:R.data.width+2*TA,h:R.data.height+2*TA};y.push(F),h[w]=new Y0(F,R),R.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(u,h){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const y in u.updatedImages)this.patchUpdatedImage(this.iconPositions[y],u.getImage(y),h),this.patchUpdatedImage(this.patternPositions[y],u.getImage(y),h)}patchUpdatedImage(u,h,y){if(!u||!h||u.version===h.version)return;u.version=h.version;const[w,R]=u.tl;y.update(h.data,void 0,{x:w,y:R})}}var Rd;wr("ImagePosition",Y0),wr("ImageAtlas",Lc),l.ah=void 0,(Rd=l.ah||(l.ah={}))[Rd.none=0]="none",Rd[Rd.horizontal=1]="horizontal",Rd[Rd.vertical=2]="vertical",Rd[Rd.horizontalOnly=3]="horizontalOnly";const $m=-17;class ec{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(u,h,y){const w=new ec;return w.scale=u||1,w.fontStack=h,w.verticalAlign=y||"bottom",w}static forImage(u,h){const y=new ec;return y.imageName=u,y.verticalAlign=h||"bottom",y}}class Rh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,h){const y=new Rh;for(let w=0;w<u.sections.length;w++){const R=u.sections[w];R.image?y.addImageSection(R):y.addTextSection(R,h)}return y}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let h="";for(let y=0;y<u.length;y++){const w=u.charCodeAt(y+1)||null,R=u.charCodeAt(y-1)||null;h+=w&&Pa(w)&&!gf[u[y+1]]||R&&Pa(R)&&!gf[u[y-1]]||!gf[u[y]]?u[y]:gf[u[y]]}return h}(this.text)}trim(){let u=0;for(let y=0;y<this.text.length&&Xf[this.text.charCodeAt(y)];y++)u++;let h=this.text.length;for(let y=this.text.length-1;y>=0&&y>=u&&Xf[this.text.charCodeAt(y)];y--)h--;this.text=this.text.substring(u,h),this.sectionIndex=this.sectionIndex.slice(u,h)}substring(u,h){const y=new Rh;return y.text=this.text.substring(u,h),y.sectionIndex=this.sectionIndex.slice(u,h),y.sections=this.sections,y}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,h)=>Math.max(u,this.sections[h].scale),0)}getMaxImageSize(u){let h=0,y=0;for(let w=0;w<this.length();w++){const R=this.getSection(w);if(R.imageName){const F=u[R.imageName];if(!F)continue;const G=F.displaySize;h=Math.max(h,G[0]),y=Math.max(y,G[1])}}return{maxImageWidth:h,maxImageHeight:y}}addTextSection(u,h){this.text+=u.text,this.sections.push(ec.forText(u.scale,u.fontStack||h,u.verticalAlign));const y=this.sections.length-1;for(let w=0;w<u.text.length;++w)this.sectionIndex.push(y)}addImageSection(u){const h=u.image?u.image.name:"";if(h.length===0)return void it("Can't add FormattedSection with an empty image.");const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCharCode(y),this.sections.push(ec.forImage(h,u.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):it("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function sh(d,u,h,y,w,R,F,G,X,re,de,be,Ke,ze,We){const tt=Rh.fromFeature(d,w);let ct;be===l.ah.vertical&&tt.verticalizePunctuation();const{processBidirectionalText:vt,processStyledBidirectionalText:zt}=cu;if(vt&&tt.sections.length===1){ct=[];const at=vt(tt.toString(),Ip(tt,re,R,u,y,ze));for(const Mt of at){const an=new Rh;an.text=Mt,an.sections=tt.sections;for(let jn=0;jn<Mt.length;jn++)an.sectionIndex.push(0);ct.push(an)}}else if(zt){ct=[];const at=zt(tt.text,tt.sectionIndex,Ip(tt,re,R,u,y,ze));for(const Mt of at){const an=new Rh;an.text=Mt[0],an.sectionIndex=Mt[1],an.sections=tt.sections,ct.push(an)}}else ct=function(at,Mt){const an=[],jn=at.text;let gn=0;for(const En of Mt)an.push(at.substring(gn,En)),gn=En;return gn<jn.length&&an.push(at.substring(gn,jn.length)),an}(tt,Ip(tt,re,R,u,y,ze));const Et=[],Fe={positionedLines:Et,text:tt.toString(),top:de[1],bottom:de[1],left:de[0],right:de[0],writingMode:be,iconsInText:!1,verticalizable:!1};return function(at,Mt,an,jn,gn,En,or,Wn,dr,On,Nr,vi){let hi=0,Xr=0,Oo=0,el=0;const vu=Wn==="right"?1:Wn==="left"?0:.5,KA=Sl/vi;let Ld=0;for(const tl of gn){tl.trim();const Du=tl.getMaxScale(),uA={positionedGlyphs:[],lineOffset:0};at.positionedLines[Ld]=uA;const AA=uA.positionedGlyphs;let gc=0;if(!tl.length()){Xr+=En,++Ld;continue}const Ad=Jg(jn,tl,KA);for(let Nc=0;Nc<tl.length();Nc++){const _u=tl.getSection(Nc),Fu=tl.getSectionIndex(Nc),Lu=tl.getCharCode(Nc),nu=e1(dr,Nr,Lu);let Ba;if(_u.imageName){if(at.iconsInText=!0,_u.scale=_u.scale*KA,Ba=mm(_u,nu,Du,Ad,jn),!Ba)continue;gc=Math.max(gc,Ba.imageOffset)}else if(Ba=Z0(_u,Lu,nu,Ad,Mt,an),!Ba)continue;const{rect:Lh,metrics:i0,baselineOffset:Uh}=Ba;AA.push({glyph:Lu,imageName:_u.imageName,x:hi,y:Xr+Uh+$m,vertical:nu,scale:_u.scale,fontStack:_u.fontStack,sectionIndex:Fu,metrics:i0,rect:Lh}),nu?(at.verticalizable=!0,hi+=(_u.imageName?i0.advance:Sl)*_u.scale+On):hi+=i0.advance*_u.scale+On}AA.length!==0&&(Oo=Math.max(hi-On,Oo),Xm(AA,0,AA.length-1,vu)),hi=0,uA.lineOffset=Math.max(gc,(Du-1)*Sl);const Cu=En*Du+gc;Xr+=Cu,el=Math.max(Cu,el),++Ld}const{horizontalAlign:jc,verticalAlign:El}=kp(or);(function(tl,Du,uA,AA,gc,Ad,Cu,Nc,_u){const Fu=(Du-uA)*gc;let Lu=0;Lu=Ad!==Cu?-Nc*AA-$m:-AA*_u*Cu+.5*Cu;for(const nu of tl)for(const Ba of nu.positionedGlyphs)Ba.x+=Fu,Ba.y+=Lu})(at.positionedLines,vu,jc,El,Oo,el,En,Xr,gn.length),at.top+=-El*Xr,at.bottom=at.top+Xr,at.left+=-jc*Oo,at.right=at.left+Oo}(Fe,u,h,y,ct,F,G,X,be,re,Ke,We),!function(at){for(const Mt of at)if(Mt.positionedGlyphs.length!==0)return!1;return!0}(Et)&&Fe}const Xf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},q0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},V0={40:!0};function Xg(d,u,h,y,w,R){if(u.imageName){const F=y[u.imageName];return F?F.displaySize[0]*u.scale*Sl/R+w:0}{const F=h[u.fontStack],G=F&&F[d];return G?G.metrics.advance*u.scale+w:0}}function Hm(d,u,h,y){const w=Math.pow(d-u,2);return y?d<u?w/2:2*w:w+Math.abs(h)*h}function Yy(d,u,h){let y=0;return d===10&&(y-=1e4),h&&(y+=150),d!==40&&d!==65288||(y+=50),u!==41&&u!==65289||(y+=50),y}function $0(d,u,h,y,w,R){let F=null,G=Hm(u,h,w,R);for(const X of y){const re=Hm(u-X.x,h,w,R)+X.badness;re<=G&&(F=X,G=re)}return{index:d,x:u,priorBreak:F,badness:G}}function H0(d){return d?H0(d.priorBreak).concat(d.index):[]}function Ip(d,u,h,y,w,R){if(!d)return[];const F=[],G=function(be,Ke,ze,We,tt,ct){let vt=0;for(let zt=0;zt<be.length();zt++){const Et=be.getSection(zt);vt+=Xg(be.getCharCode(zt),Et,We,tt,Ke,ct)}return vt/Math.max(1,Math.ceil(vt/ze))}(d,u,h,y,w,R),X=d.text.indexOf("")>=0;let re=0;for(let be=0;be<d.length();be++){const Ke=d.getSection(be),ze=d.getCharCode(be);if(Xf[ze]||(re+=Xg(ze,Ke,y,w,u,R)),be<d.length()-1){const We=!((de=ze)<11904)&&(!!Qi["CJK Compatibility Forms"](de)||!!Qi["CJK Compatibility"](de)||!!Qi["CJK Strokes"](de)||!!Qi["CJK Symbols and Punctuation"](de)||!!Qi["Enclosed CJK Letters and Months"](de)||!!Qi["Halfwidth and Fullwidth Forms"](de)||!!Qi["Ideographic Description Characters"](de)||!!Qi["Vertical Forms"](de)||wo.test(String.fromCodePoint(de)));(q0[ze]||We||Ke.imageName||be!==d.length()-2&&V0[d.getCharCode(be+1)])&&F.push($0(be+1,re,G,F,Yy(ze,d.getCharCode(be+1),We&&X),!1))}}var de;return H0($0(d.length(),re,G,F,0,!0))}function kp(d){let u=.5,h=.5;switch(d){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:u,verticalAlign:h}}function Jg(d,u,h){const y=u.getMaxScale()*Sl,{maxImageWidth:w,maxImageHeight:R}=u.getMaxImageSize(d),F=Math.max(y,R*h);return{verticalLineContentWidth:Math.max(y,w*h),horizontalLineContentHeight:F}}function Zm(d){switch(d){case"top":return 0;case"center":return .5;default:return 1}}function e1(d,u,h){return!(d===l.ah.horizontal||!u&&!Yl(h)||u&&(Xf[h]||(y=h,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(y)))));var y}function Z0(d,u,h,y,w,R){const F=R[d.fontStack],G=function(re,de,be,Ke){if(re&&re.rect)return re;const ze=de[be.fontStack],We=ze&&ze[Ke];return We?{rect:null,metrics:We.metrics}:null}(F&&F[u],w,d,u);if(G===null)return null;let X;if(h)X=y.verticalLineContentWidth-d.scale*Sl;else{const re=Zm(d.verticalAlign);X=(y.horizontalLineContentHeight-d.scale*Sl)*re}return{rect:G.rect,metrics:G.metrics,baselineOffset:X}}function mm(d,u,h,y,w){const R=w[d.imageName];if(!R)return null;const F=R.paddedRect,G=R.displaySize,X={width:G[0],height:G[1],left:TA,top:-3,advance:u?G[1]:G[0]};let re;if(u)re=y.verticalLineContentWidth-G[1]*d.scale;else{const de=Zm(d.verticalAlign);re=(y.horizontalLineContentHeight-G[1]*d.scale)*de}return{rect:F,metrics:X,baselineOffset:re,imageOffset:(u?G[0]:G[1])*d.scale-Sl*h}}function Xm(d,u,h,y){if(y===0)return;const w=d[h],R=(d[h].x+w.metrics.advance*w.scale)*y;for(let F=u;F<=h;F++)d[F].x-=R}function Jm(d,u,h){const{horizontalAlign:y,verticalAlign:w}=kp(h),R=u[0]-d.displaySize[0]*y,F=u[1]-d.displaySize[1]*w;return{image:d,top:F,bottom:F+d.displaySize[1],left:R,right:R+d.displaySize[0]}}function X0(d){var u,h;let y=d.left,w=d.top,R=d.right-y,F=d.bottom-w;const G=(u=d.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",X=(h=d.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",re=(d.image.content[2]-d.image.content[0])/(d.image.content[3]-d.image.content[1]);if(X==="proportional"){if(G==="stretchOnly"&&R/F<re||G==="proportional"){const de=Math.ceil(F*re);y*=de/R,R=de}}else if(G==="proportional"&&X==="stretchOnly"&&re!==0&&R/F>re){const de=Math.ceil(R/re);w*=de/F,F=de}return{x1:y,y1:w,x2:y+R,y2:w+F}}function t1(d,u,h,y,w,R){const F=d.image;let G;if(F.content){const ct=F.content,vt=F.pixelRatio||1;G=[ct[0]/vt,ct[1]/vt,F.displaySize[0]-ct[2]/vt,F.displaySize[1]-ct[3]/vt]}const X=u.left*R,re=u.right*R;let de,be,Ke,ze;h==="width"||h==="both"?(ze=w[0]+X-y[3],be=w[0]+re+y[1]):(ze=w[0]+(X+re-F.displaySize[0])/2,be=ze+F.displaySize[0]);const We=u.top*R,tt=u.bottom*R;return h==="height"||h==="both"?(de=w[1]+We-y[0],Ke=w[1]+tt+y[2]):(de=w[1]+(We+tt-F.displaySize[1])/2,Ke=de+F.displaySize[1]),{image:F,top:de,right:be,bottom:Ke,left:ze,collisionPadding:G}}const yf=255,Uc=128,ld=yf*Uc;function n1(d,u){const{expression:h}=u;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new gs(d+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:y,interpolationType:w}=h;let R=0;for(;R<y.length&&y[R]<=d;)R++;R=Math.max(0,R-1);let F=R;for(;F<y.length&&y[F]<d+1;)F++;F=Math.min(y.length-1,F);const G=y[R],X=y[F];return h.kind==="composite"?{kind:"composite",minZoom:G,maxZoom:X,interpolationType:w}:{kind:"camera",minZoom:G,maxZoom:X,minSize:h.evaluate(new gs(G)),maxSize:h.evaluate(new gs(X)),interpolationType:w}}}function Tp(d,u,h){let y="never";const w=d.get(u);return w?y=w:d.get(h)&&(y="always"),y}const m=lA.VectorTileFeature.types,_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function D(d,u,h,y,w,R,F,G,X,re,de,be,Ke){const ze=G?Math.min(ld,Math.round(G[0])):0,We=G?Math.min(ld,Math.round(G[1])):0;d.emplaceBack(u,h,Math.round(32*y),Math.round(32*w),R,F,(ze<<1)+(X?1:0),We,16*re,16*de,256*be,256*Ke)}function Q(d,u,h){d.emplaceBack(u.x,u.y,h),d.emplaceBack(u.x,u.y,h),d.emplaceBack(u.x,u.y,h),d.emplaceBack(u.x,u.y,h)}function ue(d){for(const u of d.sections)if(YA(u.text))return!0;return!1}class ge{constructor(u){this.layoutVertexArray=new xn,this.indexArray=new Rn,this.programConfigurations=u,this.segments=new _i,this.dynamicLayoutVertexArray=new Sn,this.opacityVertexArray=new Cn,this.hasVisibleVertices=!1,this.placedSymbolArray=new ye}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,h,y,w){this.isEmpty()||(y&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,$f.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,z0.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,_,!0),this.opacityVertexBuffer.itemSize=1),(y||w)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}wr("SymbolBuffers",ge);class nt{constructor(u,h,y){this.layoutVertexArray=new u,this.layoutAttributes=h,this.indexArray=new y,this.segments=new _i,this.collisionVertexArray=new Nn}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Hf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}wr("CollisionBuffers",nt);class Ot{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(F=>F.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=n1(this.zoom,h["text-size"]),this.iconSizeData=n1(this.zoom,h["icon-size"]);const y=this.layers[0].layout,w=y.get("symbol-sort-key"),R=y.get("symbol-z-order");this.canOverlap=Tp(y,"text-overlap","text-allow-overlap")!=="never"||Tp(y,"icon-overlap","icon-allow-overlap")!=="never"||y.get("text-ignore-placement")||y.get("icon-ignore-placement"),this.sortFeaturesByKey=R!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(R==="viewport-y"||R==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,y.get("symbol-placement")==="point"&&(this.writingModes=y.get("text-writing-mode").map(F=>l.ah[F])),this.stateDependentLayerIds=this.layers.filter(F=>F.isStateDependent()).map(F=>F.id),this.sourceID=u.sourceID}createArrays(){this.text=new ge(new pc(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new ge(new pc(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new Qe,this.lineVertexArray=new et,this.symbolInstances=new ke,this.textAnchorOffsets=new lt}calculateGlyphDependencies(u,h,y,w,R){for(let F=0;F<u.length;F++)if(h[u.charCodeAt(F)]=!0,(y||w)&&R){const G=gf[u.charAt(F)];G&&(h[G.charCodeAt(0)]=!0)}}populate(u,h,y){const w=this.layers[0],R=w.layout,F=R.get("text-font"),G=R.get("text-field"),X=R.get("icon-image"),re=(G.value.kind!=="constant"||G.value.value instanceof Us&&!G.value.value.isEmpty()||G.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),de=X.value.kind!=="constant"||!!X.value.value||Object.keys(X.parameters).length>0,be=R.get("symbol-sort-key");if(this.features=[],!re&&!de)return;const Ke=h.iconDependencies,ze=h.glyphDependencies,We=h.availableImages,tt=new gs(this.zoom);for(const{feature:ct,id:vt,index:zt,sourceLayerIndex:Et}of u){const Fe=w._featureFilter.needGeometry,at=OA(ct,Fe);if(!w._featureFilter.filter(tt,at,y))continue;let Mt,an;if(Fe||(at.geometry=cl(ct)),re){const gn=w.getValueAndResolveTokens("text-field",at,y,We),En=Us.factory(gn),or=this.hasRTLText=this.hasRTLText||ue(En);(!or||cu.getRTLTextPluginStatus()==="unavailable"||or&&cu.isParsed())&&(Mt=N0(En,w,at))}if(de){const gn=w.getValueAndResolveTokens("icon-image",at,y,We);an=gn instanceof ra?gn:ra.fromString(gn)}if(!Mt&&!an)continue;const jn=this.sortFeaturesByKey?be.evaluate(at,{},y):void 0;if(this.features.push({id:vt,text:Mt,icon:an,index:zt,sourceLayerIndex:Et,geometry:at.geometry,properties:ct.properties,type:m[ct.type],sortKey:jn}),an&&(Ke[an.name]=!0),Mt){const gn=F.evaluate(at,{},y).join(","),En=R.get("text-rotation-alignment")!=="viewport"&&R.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ah.vertical)>=0;for(const or of Mt.sections)if(or.image)Ke[or.image.name]=!0;else{const Wn=nA(Mt.toString()),dr=or.fontStack||gn,On=ze[dr]=ze[dr]||{};this.calculateGlyphDependencies(or.text,On,En,this.allowVerticalPlacement,Wn)}}}R.get("symbol-placement")==="line"&&(this.features=function(ct){const vt={},zt={},Et=[];let Fe=0;function at(gn){Et.push(ct[gn]),Fe++}function Mt(gn,En,or){const Wn=zt[gn];return delete zt[gn],zt[En]=Wn,Et[Wn].geometry[0].pop(),Et[Wn].geometry[0]=Et[Wn].geometry[0].concat(or[0]),Wn}function an(gn,En,or){const Wn=vt[En];return delete vt[En],vt[gn]=Wn,Et[Wn].geometry[0].shift(),Et[Wn].geometry[0]=or[0].concat(Et[Wn].geometry[0]),Wn}function jn(gn,En,or){const Wn=or?En[0][En[0].length-1]:En[0][0];return`${gn}:${Wn.x}:${Wn.y}`}for(let gn=0;gn<ct.length;gn++){const En=ct[gn],or=En.geometry,Wn=En.text?En.text.toString():null;if(!Wn){at(gn);continue}const dr=jn(Wn,or),On=jn(Wn,or,!0);if(dr in zt&&On in vt&&zt[dr]!==vt[On]){const Nr=an(dr,On,or),vi=Mt(dr,On,Et[Nr].geometry);delete vt[dr],delete zt[On],zt[jn(Wn,Et[vi].geometry,!0)]=vi,Et[Nr].geometry=null}else dr in zt?Mt(dr,On,or):On in vt?an(dr,On,or):(at(gn),vt[dr]=Fe-1,zt[On]=Fe-1)}return Et.filter(gn=>gn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ct,vt)=>ct.sortKey-vt.sortKey)}update(u,h,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,h,this.layers,y),this.icon.programConfigurations.updatePaintArrays(u,h,this.layers,y))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,h){const y=this.lineVertexArray.length;if(u.segment!==void 0){let w=u.dist(h[u.segment+1]),R=u.dist(h[u.segment]);const F={};for(let G=u.segment+1;G<h.length;G++)F[G]={x:h[G].x,y:h[G].y,tileUnitDistanceFromAnchor:w},G<h.length-1&&(w+=h[G+1].dist(h[G]));for(let G=u.segment||0;G>=0;G--)F[G]={x:h[G].x,y:h[G].y,tileUnitDistanceFromAnchor:R},G>0&&(R+=h[G-1].dist(h[G]));for(let G=0;G<h.length;G++){const X=F[G];this.lineVertexArray.emplaceBack(X.x,X.y,X.tileUnitDistanceFromAnchor)}}return{lineStartIndex:y,lineLength:this.lineVertexArray.length-y}}addSymbols(u,h,y,w,R,F,G,X,re,de,be,Ke){const ze=u.indexArray,We=u.layoutVertexArray,tt=u.segments.prepareSegment(4*h.length,We,ze,this.canOverlap?F.sortKey:void 0),ct=this.glyphOffsetArray.length,vt=tt.vertexLength,zt=this.allowVerticalPlacement&&G===l.ah.vertical?Math.PI/2:0,Et=F.text&&F.text.sections;for(let Fe=0;Fe<h.length;Fe++){const{tl:at,tr:Mt,bl:an,br:jn,tex:gn,pixelOffsetTL:En,pixelOffsetBR:or,minFontScaleX:Wn,minFontScaleY:dr,glyphOffset:On,isSDF:Nr,sectionIndex:vi}=h[Fe],hi=tt.vertexLength,Xr=On[1];D(We,X.x,X.y,at.x,Xr+at.y,gn.x,gn.y,y,Nr,En.x,En.y,Wn,dr),D(We,X.x,X.y,Mt.x,Xr+Mt.y,gn.x+gn.w,gn.y,y,Nr,or.x,En.y,Wn,dr),D(We,X.x,X.y,an.x,Xr+an.y,gn.x,gn.y+gn.h,y,Nr,En.x,or.y,Wn,dr),D(We,X.x,X.y,jn.x,Xr+jn.y,gn.x+gn.w,gn.y+gn.h,y,Nr,or.x,or.y,Wn,dr),Q(u.dynamicLayoutVertexArray,X,zt),ze.emplaceBack(hi,hi+2,hi+1),ze.emplaceBack(hi+1,hi+2,hi+3),tt.vertexLength+=4,tt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(On[0]),Fe!==h.length-1&&vi===h[Fe+1].sectionIndex||u.programConfigurations.populatePaintArrays(We.length,F,F.index,{},Ke,Et&&Et[vi])}u.placedSymbolArray.emplaceBack(X.x,X.y,ct,this.glyphOffsetArray.length-ct,vt,re,de,X.segment,y?y[0]:0,y?y[1]:0,w[0],w[1],G,0,!1,0,be)}_addCollisionDebugVertex(u,h,y,w,R,F){return h.emplaceBack(0,0),u.emplaceBack(y.x,y.y,w,R,Math.round(F.x),Math.round(F.y))}addCollisionDebugVertices(u,h,y,w,R,F,G){const X=R.segments.prepareSegment(4,R.layoutVertexArray,R.indexArray),re=X.vertexLength,de=R.layoutVertexArray,be=R.collisionVertexArray,Ke=G.anchorX,ze=G.anchorY;this._addCollisionDebugVertex(de,be,F,Ke,ze,new U(u,h)),this._addCollisionDebugVertex(de,be,F,Ke,ze,new U(y,h)),this._addCollisionDebugVertex(de,be,F,Ke,ze,new U(y,w)),this._addCollisionDebugVertex(de,be,F,Ke,ze,new U(u,w)),X.vertexLength+=4;const We=R.indexArray;We.emplaceBack(re,re+1),We.emplaceBack(re+1,re+2),We.emplaceBack(re+2,re+3),We.emplaceBack(re+3,re),X.primitiveLength+=4}addDebugCollisionBoxes(u,h,y,w){for(let R=u;R<h;R++){const F=this.collisionBoxArray.get(R);this.addCollisionDebugVertices(F.x1,F.y1,F.x2,F.y2,w?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,y)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new nt(In,j0.members,kr),this.iconCollisionBox=new nt(In,j0.members,kr);for(let u=0;u<this.symbolInstances.length;u++){const h=this.symbolInstances.get(u);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(u,h,y,w,R,F,G,X,re){const de={};for(let be=h;be<y;be++){const Ke=u.get(be);de.textBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},de.textFeatureIndex=Ke.featureIndex;break}for(let be=w;be<R;be++){const Ke=u.get(be);de.verticalTextBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},de.verticalTextFeatureIndex=Ke.featureIndex;break}for(let be=F;be<G;be++){const Ke=u.get(be);de.iconBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},de.iconFeatureIndex=Ke.featureIndex;break}for(let be=X;be<re;be++){const Ke=u.get(be);de.verticalIconBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},de.verticalIconFeatureIndex=Ke.featureIndex;break}return de}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const y=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,y.textBoxStartIndex,y.textBoxEndIndex,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y.iconBoxStartIndex,y.iconBoxEndIndex,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,h){const y=u.placedSymbolArray.get(h),w=y.vertexStartIndex+4*y.numGlyphs;for(let R=y.vertexStartIndex;R<w;R+=4)u.indexArray.emplaceBack(R,R+2,R+1),u.indexArray.emplaceBack(R+1,R+2,R+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(u),y=Math.cos(u),w=[],R=[],F=[];for(let G=0;G<this.symbolInstances.length;++G){F.push(G);const X=this.symbolInstances.get(G);w.push(0|Math.round(h*X.anchorX+y*X.anchorY)),R.push(X.featureIndex)}return F.sort((G,X)=>w[G]-w[X]||R[X]-R[G]),F}addToSortKeyRanges(u,h){const y=this.sortKeyRanges[this.sortKeyRanges.length-1];y&&y.sortKey===h?y.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const y=this.symbolInstances.get(h);this.featureSortOrder.push(y.featureIndex),[y.rightJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.leftJustifiedTextSymbolIndex].forEach((w,R,F)=>{w>=0&&F.indexOf(w)===R&&this.addIndicesForPlacedSymbol(this.text,w)}),y.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,y.verticalPlacedTextSymbolIndex),y.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.placedIconSymbolIndex),y.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,y.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Nt,Mn;wr("SymbolBucket",Ot,{omit:["layers","collisionBoxArray","features","compareText"]}),Ot.MAX_GLYPHS=65535,Ot.addDynamicAttributes=Q;var ur={get paint(){return Mn=Mn||new Aa({"icon-opacity":new Lr(f.paint_symbol["icon-opacity"]),"icon-color":new Lr(f.paint_symbol["icon-color"]),"icon-halo-color":new Lr(f.paint_symbol["icon-halo-color"]),"icon-halo-width":new Lr(f.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Lr(f.paint_symbol["icon-halo-blur"]),"icon-translate":new Dr(f.paint_symbol["icon-translate"]),"icon-translate-anchor":new Dr(f.paint_symbol["icon-translate-anchor"]),"text-opacity":new Lr(f.paint_symbol["text-opacity"]),"text-color":new Lr(f.paint_symbol["text-color"],{runtimeType:Qr,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new Lr(f.paint_symbol["text-halo-color"]),"text-halo-width":new Lr(f.paint_symbol["text-halo-width"]),"text-halo-blur":new Lr(f.paint_symbol["text-halo-blur"]),"text-translate":new Dr(f.paint_symbol["text-translate"]),"text-translate-anchor":new Dr(f.paint_symbol["text-translate-anchor"])})},get layout(){return Nt=Nt||new Aa({"symbol-placement":new Dr(f.layout_symbol["symbol-placement"]),"symbol-spacing":new Dr(f.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Dr(f.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Lr(f.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Dr(f.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Dr(f.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Dr(f.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Dr(f.layout_symbol["icon-ignore-placement"]),"icon-optional":new Dr(f.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Dr(f.layout_symbol["icon-rotation-alignment"]),"icon-size":new Lr(f.layout_symbol["icon-size"]),"icon-text-fit":new Dr(f.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Dr(f.layout_symbol["icon-text-fit-padding"]),"icon-image":new Lr(f.layout_symbol["icon-image"]),"icon-rotate":new Lr(f.layout_symbol["icon-rotate"]),"icon-padding":new Lr(f.layout_symbol["icon-padding"]),"icon-keep-upright":new Dr(f.layout_symbol["icon-keep-upright"]),"icon-offset":new Lr(f.layout_symbol["icon-offset"]),"icon-anchor":new Lr(f.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Dr(f.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Dr(f.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Dr(f.layout_symbol["text-rotation-alignment"]),"text-field":new Lr(f.layout_symbol["text-field"]),"text-font":new Lr(f.layout_symbol["text-font"]),"text-size":new Lr(f.layout_symbol["text-size"]),"text-max-width":new Lr(f.layout_symbol["text-max-width"]),"text-line-height":new Dr(f.layout_symbol["text-line-height"]),"text-letter-spacing":new Lr(f.layout_symbol["text-letter-spacing"]),"text-justify":new Lr(f.layout_symbol["text-justify"]),"text-radial-offset":new Lr(f.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Dr(f.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Lr(f.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Lr(f.layout_symbol["text-anchor"]),"text-max-angle":new Dr(f.layout_symbol["text-max-angle"]),"text-writing-mode":new Dr(f.layout_symbol["text-writing-mode"]),"text-rotate":new Lr(f.layout_symbol["text-rotate"]),"text-padding":new Dr(f.layout_symbol["text-padding"]),"text-keep-upright":new Dr(f.layout_symbol["text-keep-upright"]),"text-transform":new Lr(f.layout_symbol["text-transform"]),"text-offset":new Lr(f.layout_symbol["text-offset"]),"text-allow-overlap":new Dr(f.layout_symbol["text-allow-overlap"]),"text-overlap":new Dr(f.layout_symbol["text-overlap"]),"text-ignore-placement":new Dr(f.layout_symbol["text-ignore-placement"]),"text-optional":new Dr(f.layout_symbol["text-optional"])})}};class mr{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:qr,this.defaultValue=u}evaluate(u){if(u.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(u.formattedSection))return h.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wr("FormatSectionOverride",mr,{omit:["defaultValue"]});class ir extends Pl{constructor(u){super(u,ur)}recalculate(u,h){if(super.recalculate(u,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const y=this.layout.get("text-writing-mode");if(y){const w=[];for(const R of y)w.indexOf(R)<0&&w.push(R);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,h,y,w){const R=this.layout.get(u).evaluate(h,{},y,w),F=this._unevaluatedLayout._values[u];return F.isDataDriven()||wc(F.value)||!R?R:function(G,X){return X.replace(/{([^{}]+)}/g,(re,de)=>G&&de in G?String(G[de]):"")}(h.properties,R)}createBucket(u){return new Ot(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of ur.paint.overridableProperties){if(!ir.hasPaintOverride(this.layout,u))continue;const h=this.paint.get(u),y=new mr(h),w=new Qa(y,h.property.specification);let R=null;R=h.value.kind==="constant"||h.value.kind==="source"?new Ec("source",w):new sf("composite",w,h.value.zoomStops),this.paint._values[u]=new Al(h.property,R,h.parameters)}}_handleOverridablePaintPropertyUpdate(u,h,y){return!(!this.layout||h.isDataDriven()||y.isDataDriven())&&ir.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,h){const y=u.get("text-field"),w=ur.paint.properties[h];let R=!1;const F=G=>{for(const X of G)if(w.overrides&&w.overrides.hasOverride(X))return void(R=!0)};if(y.value.kind==="constant"&&y.value.value instanceof Us)F(y.value.value.sections);else if(y.value.kind==="source"){const G=re=>{R||(re instanceof zs&&Mo(re.value)===Zi?F(re.value.sections):re instanceof Yc?F(re.sections):re.eachChild(G))},X=y.value;X._styleExpression&&G(X._styleExpression.expression)}return R}}let Yr;var ii={get paint(){return Yr=Yr||new Aa({"background-color":new Dr(f.paint_background["background-color"]),"background-pattern":new td(f.paint_background["background-pattern"]),"background-opacity":new Dr(f.paint_background["background-opacity"])})}};class ai extends Pl{constructor(u){super(u,ii)}}let fl;var cn={get paint(){return fl=fl||new Aa({"raster-opacity":new Dr(f.paint_raster["raster-opacity"]),"raster-hue-rotate":new Dr(f.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Dr(f.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Dr(f.paint_raster["raster-brightness-max"]),"raster-saturation":new Dr(f.paint_raster["raster-saturation"]),"raster-contrast":new Dr(f.paint_raster["raster-contrast"]),"raster-resampling":new Dr(f.paint_raster["raster-resampling"]),"raster-fade-duration":new Dr(f.paint_raster["raster-fade-duration"])})}};class Jt extends Pl{constructor(u){super(u,cn)}}class pn extends Pl{constructor(u){super(u,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class vr{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const li={once:!0},Ii=63710088e-1;class yi{constructor(u,h){if(isNaN(u)||isNaN(h))throw new Error(`Invalid LngLat object: (${u}, ${h})`);if(this.lng=+u,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new yi(Gt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const h=Math.PI/180,y=this.lat*h,w=u.lat*h,R=Math.sin(y)*Math.sin(w)+Math.cos(y)*Math.cos(w)*Math.cos((u.lng-this.lng)*h);return Ii*Math.acos(Math.min(R,1))}static convert(u){if(u instanceof yi)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new yi(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new yi(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ji=2*Math.PI*Ii;function tu(d){return ji*Math.cos(d*Math.PI/180)}function _s(d){return(180+d)/360}function Dh(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function r1(d,u){return d/tu(u)}function qy(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function u_(d,u){return d*tu(qy(u))}class J0{constructor(u,h,y=0){this.x=+u,this.y=+h,this.z=+y}static fromLngLat(u,h=0){const y=yi.convert(u);return new J0(_s(y.lng),Dh(y.lat),r1(h,y.lat))}toLngLat(){return new yi(360*this.x-180,qy(this.y))}toAltitude(){return u_(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ji*(u=qy(this.y),1/Math.cos(u*Math.PI/180));var u}}function A_(d,u,h){var y=2*Math.PI*6378137/256/Math.pow(2,h);return[d*y-2*Math.PI*6378137/2,u*y-2*Math.PI*6378137/2]}class Vy{constructor(u,h,y){if(!function(w,R,F){return!(w<0||w>25||F<0||F>=Math.pow(2,w)||R<0||R>=Math.pow(2,w))}(u,h,y))throw new Error(`x=${h}, y=${y}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=h,this.y=y,this.key=e0(0,u,u,h,y)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,h,y){const w=(F=this.y,G=this.z,X=A_(256*(R=this.x),256*(F=Math.pow(2,G)-F-1),G),re=A_(256*(R+1),256*(F+1),G),X[0]+","+X[1]+","+re[0]+","+re[1]);var R,F,G,X,re;const de=function(be,Ke,ze){let We,tt="";for(let ct=be;ct>0;ct--)We=1<<ct-1,tt+=(Ke&We?1:0)+(ze&We?2:0);return tt}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(y==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,de).replace(/{bbox-epsg-3857}/g,w)}isChildOf(u){const h=this.z-u.z;return h>0&&u.x===this.x>>h&&u.y===this.y>>h}getTilePoint(u){const h=Math.pow(2,this.z);return new U((u.x*h-this.x)*At,(u.y*h-this.y)*At)}toString(){return`${this.z}/${this.x}/${this.y}`}}class c_{constructor(u,h){this.wrap=u,this.canonical=h,this.key=e0(u,h.z,h.z,h.x,h.y)}}class Dd{constructor(u,h,y,w,R){if(this.terrainRttPosMatrix32f=null,u<y)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${y}`);this.overscaledZ=u,this.wrap=h,this.canonical=new Vy(y,+w,+R),this.key=e0(h,u,y,w,R)}clone(){return new Dd(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-u;return u>this.canonical.z?new Dd(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Dd(u,this.wrap,u,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(u,h){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const y=this.canonical.z-u;return u>this.canonical.z?e0(this.wrap*+h,u,this.canonical.z,this.canonical.x,this.canonical.y):e0(this.wrap*+h,u,u,this.canonical.x>>y,this.canonical.y>>y)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const h=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>h&&u.canonical.y===this.canonical.y>>h}children(u){if(this.overscaledZ>=u)return[new Dd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,y=2*this.canonical.x,w=2*this.canonical.y;return[new Dd(h,this.wrap,h,y,w),new Dd(h,this.wrap,h,y+1,w),new Dd(h,this.wrap,h,y,w+1),new Dd(h,this.wrap,h,y+1,w+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new Dd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new Dd(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new c_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new J0(u.x-this.wrap,u.y))}}function e0(d,u,h,y,w){(d*=2)<0&&(d=-1*d-1);const R=1<<h;return(R*R*d+R*w+y).toString(36)+h.toString(36)+u.toString(36)}wr("CanonicalTileID",Vy),wr("OverscaledTileID",Dd,{omit:["terrainRttPosMatrix32f"]});class d_{constructor(u,h,y,w=1,R=1,F=1,G=0){if(this.uid=u,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(y&&!["mapbox","terrarium","custom"].includes(y))return void it(`"${y}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const X=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),y){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=R,this.blueFactor=F,this.baseShift=G;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let re=0;re<X;re++)this.data[this._idx(-1,re)]=this.data[this._idx(0,re)],this.data[this._idx(X,re)]=this.data[this._idx(X-1,re)],this.data[this._idx(re,-1)]=this.data[this._idx(re,0)],this.data[this._idx(re,X)]=this.data[this._idx(re,X-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(X,-1)]=this.data[this._idx(X-1,0)],this.data[this._idx(-1,X)]=this.data[this._idx(0,X-1)],this.data[this._idx(X,X)]=this.data[this._idx(X-1,X-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let re=0;re<X;re++)for(let de=0;de<X;de++){const be=this.get(re,de);be>this.max&&(this.max=be),be<this.min&&(this.min=be)}}get(u,h){const y=new Uint8Array(this.data.buffer),w=4*this._idx(u,h);return this.unpack(y[w],y[w+1],y[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,h){if(u<-1||u>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(u+1)}unpack(u,h,y){return u*this.redFactor+h*this.greenFactor+y*this.blueFactor-this.baseShift}getPixels(){return new Jl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,h,y){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let w=h*this.dim,R=h*this.dim+this.dim,F=y*this.dim,G=y*this.dim+this.dim;switch(h){case-1:w=R-1;break;case 1:R=w+1}switch(y){case-1:F=G-1;break;case 1:G=F+1}const X=-h*this.dim,re=-y*this.dim;for(let de=F;de<G;de++)for(let be=w;be<R;be++)this.data[this._idx(be,de)]=u.data[this._idx(be+X,de+re)]}}wr("DEMData",d_);class ah{constructor(u){this._stringToNumber={},this._numberToString=[];for(let h=0;h<u.length;h++){const y=u[h];this._stringToNumber[y]=h,this._numberToString[h]=y}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class h_{constructor(u,h,y,w,R){this.type="Feature",this._vectorTileFeature=u,u._z=h,u._x=y,u._y=w,this.properties=u.properties,this.id=R}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(u[h]=this[h]);return u}}class f_{constructor(u,h){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new hc(At,16,0),this.grid3D=new hc(At,16,0),this.featureIndexArray=new bt,this.promoteId=h}insert(u,h,y,w,R,F){const G=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(y,w,R);const X=F?this.grid3D:this.grid;for(let re=0;re<h.length;re++){const de=h[re],be=[1/0,1/0,-1/0,-1/0];for(let Ke=0;Ke<de.length;Ke++){const ze=de[Ke];be[0]=Math.min(be[0],ze.x),be[1]=Math.min(be[1],ze.y),be[2]=Math.max(be[2],ze.x),be[3]=Math.max(be[3],ze.y)}be[0]<At&&be[1]<At&&be[2]>=0&&be[3]>=0&&X.insert(G,be[0],be[1],be[2],be[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new lA.VectorTile(new Op(this.rawTileData)).layers,this.sourceLayerCoder=new ah(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,h,y,w){this.loadVTLayers();const R=u.params,F=At/u.tileSize/u.scale,G=Vc(R.filter),X=u.queryGeometry,re=u.queryPadding*F,de=vo(X),be=this.grid.query(de.minX-re,de.minY-re,de.maxX+re,de.maxY+re),Ke=vo(u.cameraQueryGeometry),ze=this.grid3D.query(Ke.minX-re,Ke.minY-re,Ke.maxX+re,Ke.maxY+re,(ct,vt,zt,Et)=>function(Fe,at,Mt,an,jn){for(const En of Fe)if(at<=En.x&&Mt<=En.y&&an>=En.x&&jn>=En.y)return!0;const gn=[new U(at,Mt),new U(at,jn),new U(an,jn),new U(an,Mt)];if(Fe.length>2){for(const En of gn)if(mc(Fe,En))return!0}for(let En=0;En<Fe.length-1;En++)if(lm(Fe[En],Fe[En+1],gn))return!0;return!1}(u.cameraQueryGeometry,ct-re,vt-re,zt+re,Et+re));for(const ct of ze)be.push(ct);be.sort(r3);const We={};let tt;for(let ct=0;ct<be.length;ct++){const vt=be[ct];if(vt===tt)continue;tt=vt;const zt=this.featureIndexArray.get(vt);let Et=null;this.loadMatchingFeature(We,zt.bucketIndex,zt.sourceLayerIndex,zt.featureIndex,G,R.layers,R.availableImages,h,y,w,(Fe,at,Mt)=>(Et||(Et=cl(Fe)),at.queryIntersectsFeature({queryGeometry:X,feature:Fe,featureState:Mt,geometry:Et,zoom:this.z,transform:u.transform,pixelsToTileUnits:F,pixelPosMatrix:u.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:u.getElevation})))}return We}loadMatchingFeature(u,h,y,w,R,F,G,X,re,de,be){const Ke=this.bucketLayerIDs[h];if(F&&!Ke.some(ct=>F.has(ct)))return;const ze=this.sourceLayerCoder.decode(y),We=this.vtLayers[ze].feature(w);if(R.needGeometry){const ct=OA(We,!0);if(!R.filter(new gs(this.tileID.overscaledZ),ct,this.tileID.canonical))return}else if(!R.filter(new gs(this.tileID.overscaledZ),We))return;const tt=this.getId(We,ze);for(let ct=0;ct<Ke.length;ct++){const vt=Ke[ct];if(F&&!F.has(vt))continue;const zt=X[vt];if(!zt)continue;let Et={};tt&&de&&(Et=de.getState(zt.sourceLayer||"_geojsonTileLayer",tt));const Fe=yt({},re[vt]);Fe.paint=Pp(Fe.paint,zt.paint,We,Et,G),Fe.layout=Pp(Fe.layout,zt.layout,We,Et,G);const at=!be||be(We,zt,Et);if(!at)continue;const Mt=new h_(We,this.z,this.x,this.y,tt);Mt.layer=Fe;let an=u[vt];an===void 0&&(an=u[vt]=[]),an.push({featureIndex:w,feature:Mt,intersectionZ:at})}}lookupSymbolFeatures(u,h,y,w,R,F,G,X){const re={};this.loadVTLayers();const de=Vc(R);for(const be of u)this.loadMatchingFeature(re,y,w,be,de,F,G,X,h);return re}hasLayer(u){for(const h of this.bucketLayerIDs)for(const y of h)if(u===y)return!0;return!1}getId(u,h){var y;let w=u.id;return this.promoteId&&(w=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof w=="boolean"&&(w=Number(w)),w===void 0&&(!((y=u.properties)===null||y===void 0)&&y.cluster)&&this.promoteId&&(w=Number(u.properties.cluster_id))),w}}function Pp(d,u,h,y,w){return Tt(d,(R,F)=>{const G=u instanceof VA?u.get(F):null;return G&&G.evaluate?G.evaluate(h,y,w):G})}function vo(d){let u=1/0,h=1/0,y=-1/0,w=-1/0;for(const R of d)u=Math.min(u,R.x),h=Math.min(h,R.y),y=Math.max(y,R.x),w=Math.max(w,R.y);return{minX:u,minY:h,maxX:y,maxY:w}}function r3(d,u){return u-d}function zc(d,u,h,y,w){const R=[];for(let F=0;F<d.length;F++){const G=d[F];let X;for(let re=0;re<G.length-1;re++){let de=G[re],be=G[re+1];de.x<u&&be.x<u||(de.x<u?de=new U(u,de.y+(u-de.x)/(be.x-de.x)*(be.y-de.y))._round():be.x<u&&(be=new U(u,de.y+(u-de.x)/(be.x-de.x)*(be.y-de.y))._round()),de.y<h&&be.y<h||(de.y<h?de=new U(de.x+(h-de.y)/(be.y-de.y)*(be.x-de.x),h)._round():be.y<h&&(be=new U(de.x+(h-de.y)/(be.y-de.y)*(be.x-de.x),h)._round()),de.x>=y&&be.x>=y||(de.x>=y?de=new U(y,de.y+(y-de.x)/(be.x-de.x)*(be.y-de.y))._round():be.x>=y&&(be=new U(y,de.y+(y-de.x)/(be.x-de.x)*(be.y-de.y))._round()),de.y>=w&&be.y>=w||(de.y>=w?de=new U(de.x+(w-de.y)/(be.y-de.y)*(be.x-de.x),w)._round():be.y>=w&&(be=new U(de.x+(w-de.y)/(be.y-de.y)*(be.x-de.x),w)._round()),X&&de.equals(X[X.length-1])||(X=[de],R.push(X)),X.push(be)))))}}return R}wr("FeatureIndex",f_,{omit:["rawTileData","sourceLayerCoder"]});class Ea extends U{constructor(u,h,y,w){super(u,h),this.angle=y,w!==void 0&&(this.segment=w)}clone(){return new Ea(this.x,this.y,this.angle,this.segment)}}function p_(d,u,h,y,w){if(u.segment===void 0||h===0)return!0;let R=u,F=u.segment+1,G=0;for(;G>-h/2;){if(F--,F<0)return!1;G-=d[F].dist(R),R=d[F]}G+=d[F].dist(d[F+1]),F++;const X=[];let re=0;for(;G<h/2;){const de=d[F],be=d[F+1];if(!be)return!1;let Ke=d[F-1].angleTo(de)-de.angleTo(be);for(Ke=Math.abs((Ke+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:G,angleDelta:Ke}),re+=Ke;G-X[0].distance>y;)re-=X.shift().angleDelta;if(re>w)return!1;F++,G+=de.dist(be)}return!0}function Jf(d){let u=0;for(let h=0;h<d.length-1;h++)u+=d[h].dist(d[h+1]);return u}function m_(d,u,h){return d?.6*u*h:0}function g_(d,u){return Math.max(d?d.right-d.left:0,u?u.right-u.left:0)}function i3(d,u,h,y,w,R){const F=m_(h,w,R),G=g_(h,y)*R;let X=0;const re=Jf(d)/2;for(let de=0;de<d.length-1;de++){const be=d[de],Ke=d[de+1],ze=be.dist(Ke);if(X+ze>re){const We=(re-X)/ze,tt=Ui.number(be.x,Ke.x,We),ct=Ui.number(be.y,Ke.y,We),vt=new Ea(tt,ct,Ke.angleTo(be),de);return vt._round(),!F||p_(d,vt,G,F,u)?vt:void 0}X+=ze}}function o3(d,u,h,y,w,R,F,G,X){const re=m_(y,R,F),de=g_(y,w),be=de*F,Ke=d[0].x===0||d[0].x===X||d[0].y===0||d[0].y===X;return u-be<u/4&&(u=be+u/4),y_(d,Ke?u/2*G%u:(de/2+2*R)*F*G%u,u,re,h,be,Ke,!1,X)}function y_(d,u,h,y,w,R,F,G,X){const re=R/2,de=Jf(d);let be=0,Ke=u-h,ze=[];for(let We=0;We<d.length-1;We++){const tt=d[We],ct=d[We+1],vt=tt.dist(ct),zt=ct.angleTo(tt);for(;Ke+h<be+vt;){Ke+=h;const Et=(Ke-be)/vt,Fe=Ui.number(tt.x,ct.x,Et),at=Ui.number(tt.y,ct.y,Et);if(Fe>=0&&Fe<X&&at>=0&&at<X&&Ke-re>=0&&Ke+re<=de){const Mt=new Ea(Fe,at,zt,We);Mt._round(),y&&!p_(d,Mt,R,y,w)||ze.push(Mt)}}be+=vt}return G||ze.length||F||(ze=y_(d,be/2,h,y,w,R,F,!0,X)),ze}wr("Anchor",Ea);const gm=TA;function v_(d,u,h,y){const w=[],R=d.image,F=R.pixelRatio,G=R.paddedRect.w-2*gm,X=R.paddedRect.h-2*gm;let re={x1:d.left,y1:d.top,x2:d.right,y2:d.bottom};const de=R.stretchX||[[0,G]],be=R.stretchY||[[0,X]],Ke=(On,Nr)=>On+Nr[1]-Nr[0],ze=de.reduce(Ke,0),We=be.reduce(Ke,0),tt=G-ze,ct=X-We;let vt=0,zt=ze,Et=0,Fe=We,at=0,Mt=tt,an=0,jn=ct;if(R.content&&y){const On=R.content,Nr=On[2]-On[0],vi=On[3]-On[1];(R.textFitWidth||R.textFitHeight)&&(re=X0(d)),vt=lh(de,0,On[0]),Et=lh(be,0,On[1]),zt=lh(de,On[0],On[2]),Fe=lh(be,On[1],On[3]),at=On[0]-vt,an=On[1]-Et,Mt=Nr-zt,jn=vi-Fe}const gn=re.x1,En=re.y1,or=re.x2-gn,Wn=re.y2-En,dr=(On,Nr,vi,hi)=>{const Xr=ym(On.stretch-vt,zt,or,gn),Oo=Ja(On.fixed-at,Mt,On.stretch,ze),el=ym(Nr.stretch-Et,Fe,Wn,En),vu=Ja(Nr.fixed-an,jn,Nr.stretch,We),KA=ym(vi.stretch-vt,zt,or,gn),Ld=Ja(vi.fixed-at,Mt,vi.stretch,ze),jc=ym(hi.stretch-Et,Fe,Wn,En),El=Ja(hi.fixed-an,jn,hi.stretch,We),tl=new U(Xr,el),Du=new U(KA,el),uA=new U(KA,jc),AA=new U(Xr,jc),gc=new U(Oo/F,vu/F),Ad=new U(Ld/F,El/F),Cu=u*Math.PI/180;if(Cu){const Fu=Math.sin(Cu),Lu=Math.cos(Cu),nu=[Lu,-Fu,Fu,Lu];tl._matMult(nu),Du._matMult(nu),AA._matMult(nu),uA._matMult(nu)}const Nc=On.stretch+On.fixed,_u=Nr.stretch+Nr.fixed;return{tl,tr:Du,bl:AA,br:uA,tex:{x:R.paddedRect.x+gm+Nc,y:R.paddedRect.y+gm+_u,w:vi.stretch+vi.fixed-Nc,h:hi.stretch+hi.fixed-_u},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gc,pixelOffsetBR:Ad,minFontScaleX:Mt/F/or,minFontScaleY:jn/F/Wn,isSDF:h}};if(y&&(R.stretchX||R.stretchY)){const On=$y(de,tt,ze),Nr=$y(be,ct,We);for(let vi=0;vi<On.length-1;vi++){const hi=On[vi],Xr=On[vi+1];for(let Oo=0;Oo<Nr.length-1;Oo++)w.push(dr(hi,Nr[Oo],Xr,Nr[Oo+1]))}}else w.push(dr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:G+1},{fixed:0,stretch:X+1}));return w}function lh(d,u,h){let y=0;for(const w of d)y+=Math.max(u,Math.min(h,w[1]))-Math.max(u,Math.min(h,w[0]));return y}function $y(d,u,h){const y=[{fixed:-1,stretch:0}];for(const[w,R]of d){const F=y[y.length-1];y.push({fixed:w-F.stretch,stretch:F.stretch}),y.push({fixed:w-F.stretch,stretch:F.stretch+(R-w)})}return y.push({fixed:u+gm,stretch:h}),y}function ym(d,u,h,y){return d/u*h+y}function Ja(d,u,h,y){return d-u*h/y}class pl{constructor(u,h,y,w,R,F,G,X,re,de){var be;if(this.boxStartIndex=u.length,re){let Ke=F.top,ze=F.bottom;const We=F.collisionPadding;We&&(Ke-=We[1],ze+=We[3]);let tt=ze-Ke;tt>0&&(tt=Math.max(10,tt),this.circleDiameter=tt)}else{const Ke=!((be=F.image)===null||be===void 0)&&be.content&&(F.image.textFitWidth||F.image.textFitHeight)?X0(F):{x1:F.left,y1:F.top,x2:F.right,y2:F.bottom};Ke.y1=Ke.y1*G-X[0],Ke.y2=Ke.y2*G+X[2],Ke.x1=Ke.x1*G-X[3],Ke.x2=Ke.x2*G+X[1];const ze=F.collisionPadding;if(ze&&(Ke.x1-=ze[0]*G,Ke.y1-=ze[1]*G,Ke.x2+=ze[2]*G,Ke.y2+=ze[3]*G),de){const We=new U(Ke.x1,Ke.y1),tt=new U(Ke.x2,Ke.y1),ct=new U(Ke.x1,Ke.y2),vt=new U(Ke.x2,Ke.y2),zt=de*Math.PI/180;We._rotate(zt),tt._rotate(zt),ct._rotate(zt),vt._rotate(zt),Ke.x1=Math.min(We.x,tt.x,ct.x,vt.x),Ke.x2=Math.max(We.x,tt.x,ct.x,vt.x),Ke.y1=Math.min(We.y,tt.y,ct.y,vt.y),Ke.y2=Math.max(We.y,tt.y,ct.y,vt.y)}u.emplaceBack(h.x,h.y,Ke.x1,Ke.y1,Ke.x2,Ke.y2,y,w,R)}this.boxEndIndex=u.length}}class C_{constructor(u=[],h=(y,w)=>y<w?-1:y>w?1:0){if(this.data=u,this.length=this.data.length,this.compare=h,this.length>0)for(let y=(this.length>>1)-1;y>=0;y--)this._down(y)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:h,compare:y}=this,w=h[u];for(;u>0;){const R=u-1>>1,F=h[R];if(y(w,F)>=0)break;h[u]=F,u=R}h[u]=w}_down(u){const{data:h,compare:y}=this,w=this.length>>1,R=h[u];for(;u<w;){let F=1+(u<<1);const G=F+1;if(G<this.length&&y(h[G],h[F])<0&&(F=G),y(h[F],R)>=0)break;h[u]=h[F],u=F}h[u]=R}}function s3(d,u=1,h=!1){let y=1/0,w=1/0,R=-1/0,F=-1/0;const G=d[0];for(let ze=0;ze<G.length;ze++){const We=G[ze];(!ze||We.x<y)&&(y=We.x),(!ze||We.y<w)&&(w=We.y),(!ze||We.x>R)&&(R=We.x),(!ze||We.y>F)&&(F=We.y)}const X=Math.min(R-y,F-w);let re=X/2;const de=new C_([],a3);if(X===0)return new U(y,w);for(let ze=y;ze<R;ze+=X)for(let We=w;We<F;We+=X)de.push(new t0(ze+re,We+re,re,d));let be=function(ze){let We=0,tt=0,ct=0;const vt=ze[0];for(let zt=0,Et=vt.length,Fe=Et-1;zt<Et;Fe=zt++){const at=vt[zt],Mt=vt[Fe],an=at.x*Mt.y-Mt.x*at.y;tt+=(at.x+Mt.x)*an,ct+=(at.y+Mt.y)*an,We+=3*an}return new t0(tt/We,ct/We,0,ze)}(d),Ke=de.length;for(;de.length;){const ze=de.pop();(ze.d>be.d||!be.d)&&(be=ze,h&&console.log("found best %d after %d probes",Math.round(1e4*ze.d)/1e4,Ke)),ze.max-be.d<=u||(re=ze.h/2,de.push(new t0(ze.p.x-re,ze.p.y-re,re,d)),de.push(new t0(ze.p.x+re,ze.p.y-re,re,d)),de.push(new t0(ze.p.x-re,ze.p.y+re,re,d)),de.push(new t0(ze.p.x+re,ze.p.y+re,re,d)),Ke+=4)}return h&&(console.log(`num probes: ${Ke}`),console.log(`best distance: ${be.d}`)),be.p}function a3(d,u){return u.max-d.max}function t0(d,u,h,y){this.p=new U(d,u),this.h=h,this.d=function(w,R){let F=!1,G=1/0;for(let X=0;X<R.length;X++){const re=R[X];for(let de=0,be=re.length,Ke=be-1;de<be;Ke=de++){const ze=re[de],We=re[Ke];ze.y>w.y!=We.y>w.y&&w.x<(We.x-ze.x)*(w.y-ze.y)/(We.y-ze.y)+ze.x&&(F=!F),G=Math.min(G,Id(w,ze,We))}}return(F?1:-1)*Math.sqrt(G)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}var PA;l.ay=void 0,(PA=l.ay||(l.ay={}))[PA.center=1]="center",PA[PA.left=2]="left",PA[PA.right=3]="right",PA[PA.top=4]="top",PA[PA.bottom=5]="bottom",PA[PA["top-left"]=6]="top-left",PA[PA["top-right"]=7]="top-right",PA[PA["bottom-left"]=8]="bottom-left",PA[PA["bottom-right"]=9]="bottom-right";const Kp=7,Hy=Number.POSITIVE_INFINITY;function Zy(d,u){return u[1]!==Hy?function(h,y,w){let R=0,F=0;switch(y=Math.abs(y),w=Math.abs(w),h){case"top-right":case"top-left":case"top":F=w-Kp;break;case"bottom-right":case"bottom-left":case"bottom":F=-w+Kp}switch(h){case"top-right":case"bottom-right":case"right":R=-y;break;case"top-left":case"bottom-left":case"left":R=y}return[R,F]}(d,u[0],u[1]):function(h,y){let w=0,R=0;y<0&&(y=0);const F=y/Math.SQRT2;switch(h){case"top-right":case"top-left":R=F-Kp;break;case"bottom-right":case"bottom-left":R=-F+Kp;break;case"bottom":R=-y+Kp;break;case"top":R=y-Kp}switch(h){case"top-right":case"bottom-right":w=-F;break;case"top-left":case"bottom-left":w=F;break;case"left":w=y;break;case"right":w=-y}return[w,R]}(d,u[0])}function n0(d,u,h){var y;const w=d.layout,R=(y=w.get("text-variable-anchor-offset"))===null||y===void 0?void 0:y.evaluate(u,{},h);if(R){const G=R.values,X=[];for(let re=0;re<G.length;re+=2){const de=X[re]=G[re],be=G[re+1].map(Ke=>Ke*Sl);de.startsWith("top")?be[1]-=Kp:de.startsWith("bottom")&&(be[1]+=Kp),X[re+1]=be}return new Qs(X)}const F=w.get("text-variable-anchor");if(F){let G;G=d._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(u,{},h)*Sl,Hy]:w.get("text-offset").evaluate(u,{},h).map(re=>re*Sl);const X=[];for(const re of F)X.push(re,Zy(re,G));return new Qs(X)}return null}function eg(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function l3(d,u,h,y,w,R,F,G,X,re,de,be){let Ke=R.textMaxSize.evaluate(u,{});Ke===void 0&&(Ke=F);const ze=d.layers[0].layout,We=ze.get("icon-offset").evaluate(u,{},de),tt=tg(h.horizontal),ct=F/24,vt=d.tilePixelRatio*ct,zt=d.tilePixelRatio*Ke/24,Et=d.tilePixelRatio*G,Fe=d.tilePixelRatio*ze.get("symbol-spacing"),at=ze.get("text-padding")*d.tilePixelRatio,Mt=function(vi,hi,Xr,Oo=1){const el=vi.get("icon-padding").evaluate(hi,{},Xr),vu=el&&el.values;return[vu[0]*Oo,vu[1]*Oo,vu[2]*Oo,vu[3]*Oo]}(ze,u,de,d.tilePixelRatio),an=ze.get("text-max-angle")/180*Math.PI,jn=ze.get("text-rotation-alignment")!=="viewport"&&ze.get("symbol-placement")!=="point",gn=ze.get("icon-rotation-alignment")==="map"&&ze.get("symbol-placement")!=="point",En=ze.get("symbol-placement"),or=Fe/2,Wn=ze.get("icon-text-fit");let dr;y&&Wn!=="none"&&(d.allowVerticalPlacement&&h.vertical&&(dr=t1(y,h.vertical,Wn,ze.get("icon-text-fit-padding"),We,ct)),tt&&(y=t1(y,tt,Wn,ze.get("icon-text-fit-padding"),We,ct)));const On=de?be.line.getGranularityForZoomLevel(de.z):1,Nr=(vi,hi)=>{hi.x<0||hi.x>=At||hi.y<0||hi.y>=At||function(Xr,Oo,el,vu,KA,Ld,jc,El,tl,Du,uA,AA,gc,Ad,Cu,Nc,_u,Fu,Lu,nu,Ba,Lh,i0,Uh,u3){const o0=Xr.addToLineVertexArray(Oo,el);let Cm,s0,a0,l0,b_=0,x_=0,M_=0,w_=0,iv=-1,ov=-1;const ep={};let S_=BA("");if(Xr.allowVerticalPlacement&&vu.vertical){const tc=El.layout.get("text-rotate").evaluate(Ba,{},Uh)+90;a0=new pl(tl,Oo,Du,uA,AA,vu.vertical,gc,Ad,Cu,tc),jc&&(l0=new pl(tl,Oo,Du,uA,AA,jc,_u,Fu,Cu,tc))}if(KA){const tc=El.layout.get("icon-rotate").evaluate(Ba,{}),Ud=El.layout.get("icon-text-fit")!=="none",_m=v_(KA,tc,i0,Ud),zd=jc?v_(jc,tc,i0,Ud):void 0;s0=new pl(tl,Oo,Du,uA,AA,KA,_u,Fu,!1,tc),b_=4*_m.length;const bm=Xr.iconSizeData;let uh=null;bm.kind==="source"?(uh=[Uc*El.layout.get("icon-size").evaluate(Ba,{})],uh[0]>ld&&it(`${Xr.layerIds[0]}: Value for "icon-size" is >= ${yf}. Reduce your "icon-size".`)):bm.kind==="composite"&&(uh=[Uc*Lh.compositeIconSizes[0].evaluate(Ba,{},Uh),Uc*Lh.compositeIconSizes[1].evaluate(Ba,{},Uh)],(uh[0]>ld||uh[1]>ld)&&it(`${Xr.layerIds[0]}: Value for "icon-size" is >= ${yf}. Reduce your "icon-size".`)),Xr.addSymbols(Xr.icon,_m,uh,nu,Lu,Ba,l.ah.none,Oo,o0.lineStartIndex,o0.lineLength,-1,Uh),iv=Xr.icon.placedSymbolArray.length-1,zd&&(x_=4*zd.length,Xr.addSymbols(Xr.icon,zd,uh,nu,Lu,Ba,l.ah.vertical,Oo,o0.lineStartIndex,o0.lineLength,-1,Uh),ov=Xr.icon.placedSymbolArray.length-1)}const E_=Object.keys(vu.horizontal);for(const tc of E_){const Ud=vu.horizontal[tc];if(!Cm){S_=BA(Ud.text);const zd=El.layout.get("text-rotate").evaluate(Ba,{},Uh);Cm=new pl(tl,Oo,Du,uA,AA,Ud,gc,Ad,Cu,zd)}const _m=Ud.positionedLines.length===1;if(M_+=Xy(Xr,Oo,Ud,Ld,El,Cu,Ba,Nc,o0,vu.vertical?l.ah.horizontal:l.ah.horizontalOnly,_m?E_:[tc],ep,iv,Lh,Uh),_m)break}vu.vertical&&(w_+=Xy(Xr,Oo,vu.vertical,Ld,El,Cu,Ba,Nc,o0,l.ah.vertical,["vertical"],ep,ov,Lh,Uh));const A3=Cm?Cm.boxStartIndex:Xr.collisionBoxArray.length,sv=Cm?Cm.boxEndIndex:Xr.collisionBoxArray.length,B_=a0?a0.boxStartIndex:Xr.collisionBoxArray.length,O_=a0?a0.boxEndIndex:Xr.collisionBoxArray.length,c3=s0?s0.boxStartIndex:Xr.collisionBoxArray.length,d3=s0?s0.boxEndIndex:Xr.collisionBoxArray.length,h3=l0?l0.boxStartIndex:Xr.collisionBoxArray.length,av=l0?l0.boxEndIndex:Xr.collisionBoxArray.length;let zh=-1;const o1=(tc,Ud)=>tc&&tc.circleDiameter?Math.max(tc.circleDiameter,Ud):Ud;zh=o1(Cm,zh),zh=o1(a0,zh),zh=o1(s0,zh),zh=o1(l0,zh);const I_=zh>-1?1:0;I_&&(zh*=u3/Sl),Xr.glyphOffsetArray.length>=Ot.MAX_GLYPHS&&it("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ba.sortKey!==void 0&&Xr.addToSortKeyRanges(Xr.symbolInstances.length,Ba.sortKey);const cd=n0(El,Ba,Uh),[lv,f3]=function(tc,Ud){const _m=tc.length,zd=Ud==null?void 0:Ud.values;if((zd==null?void 0:zd.length)>0)for(let bm=0;bm<zd.length;bm+=2){const uh=zd[bm+1];tc.emplaceBack(l.ay[zd[bm]],uh[0],uh[1])}return[_m,tc.length]}(Xr.textAnchorOffsets,cd);Xr.symbolInstances.emplaceBack(Oo.x,Oo.y,ep.right>=0?ep.right:-1,ep.center>=0?ep.center:-1,ep.left>=0?ep.left:-1,ep.vertical||-1,iv,ov,S_,A3,sv,B_,O_,c3,d3,h3,av,Du,M_,w_,b_,x_,I_,0,gc,zh,lv,f3)}(d,hi,vi,h,y,w,dr,d.layers[0],d.collisionBoxArray,u.index,u.sourceLayerIndex,d.index,vt,[at,at,at,at],jn,X,Et,Mt,gn,We,u,R,re,de,F)};if(En==="line")for(const vi of zc(u.geometry,0,0,At,At)){const hi=Or(vi,On),Xr=o3(hi,Fe,an,h.vertical||tt,y,24,zt,d.overscaling,At);for(const Oo of Xr)tt&&Fd(d,tt.text,or,Oo)||Nr(hi,Oo)}else if(En==="line-center"){for(const vi of u.geometry)if(vi.length>1){const hi=Or(vi,On),Xr=i3(hi,an,h.vertical||tt,y,24,zt);Xr&&Nr(hi,Xr)}}else if(u.type==="Polygon")for(const vi of Eu(u.geometry,0)){const hi=s3(vi,16);Nr(Or(vi[0],On,!0),new Ea(hi.x,hi.y,0))}else if(u.type==="LineString")for(const vi of u.geometry){const hi=Or(vi,On);Nr(hi,new Ea(hi[0].x,hi[0].y,0))}else if(u.type==="Point")for(const vi of u.geometry)for(const hi of vi)Nr([hi],new Ea(hi.x,hi.y,0))}function Xy(d,u,h,y,w,R,F,G,X,re,de,be,Ke,ze,We){const tt=function(zt,Et,Fe,at,Mt,an,jn,gn){const En=at.layout.get("text-rotate").evaluate(an,{})*Math.PI/180,or=[];for(const Wn of Et.positionedLines)for(const dr of Wn.positionedGlyphs){if(!dr.rect)continue;const On=dr.rect||{};let Nr=Qy+1,vi=!0,hi=1,Xr=0;const Oo=(Mt||gn)&&dr.vertical,el=dr.metrics.advance*dr.scale/2;if(gn&&Et.verticalizable&&(Xr=Wn.lineOffset/2-(dr.imageName?-(Sl-dr.metrics.width*dr.scale)/2:(dr.scale-1)*Sl)),dr.imageName){const Fu=jn[dr.imageName];vi=Fu.sdf,hi=Fu.pixelRatio,Nr=TA/hi}const vu=Mt?[dr.x+el,dr.y]:[0,0];let KA=Mt?[0,0]:[dr.x+el+Fe[0],dr.y+Fe[1]-Xr],Ld=[0,0];Oo&&(Ld=KA,KA=[0,0]);const jc=dr.metrics.isDoubleResolution?2:1,El=(dr.metrics.left-Nr)*dr.scale-el+KA[0],tl=(-dr.metrics.top-Nr)*dr.scale+KA[1],Du=El+On.w/jc*dr.scale/hi,uA=tl+On.h/jc*dr.scale/hi,AA=new U(El,tl),gc=new U(Du,tl),Ad=new U(El,uA),Cu=new U(Du,uA);if(Oo){const Fu=new U(-el,el-$m),Lu=-Math.PI/2,nu=Sl/2-el,Ba=new U(5-$m-nu,-(dr.imageName?nu:0)),Lh=new U(...Ld);AA._rotateAround(Lu,Fu)._add(Ba)._add(Lh),gc._rotateAround(Lu,Fu)._add(Ba)._add(Lh),Ad._rotateAround(Lu,Fu)._add(Ba)._add(Lh),Cu._rotateAround(Lu,Fu)._add(Ba)._add(Lh)}if(En){const Fu=Math.sin(En),Lu=Math.cos(En),nu=[Lu,-Fu,Fu,Lu];AA._matMult(nu),gc._matMult(nu),Ad._matMult(nu),Cu._matMult(nu)}const Nc=new U(0,0),_u=new U(0,0);or.push({tl:AA,tr:gc,bl:Ad,br:Cu,tex:On,writingMode:Et.writingMode,glyphOffset:vu,sectionIndex:dr.sectionIndex,isSDF:vi,pixelOffsetTL:Nc,pixelOffsetBR:_u,minFontScaleX:0,minFontScaleY:0})}return or}(0,h,G,w,R,F,y,d.allowVerticalPlacement),ct=d.textSizeData;let vt=null;ct.kind==="source"?(vt=[Uc*w.layout.get("text-size").evaluate(F,{})],vt[0]>ld&&it(`${d.layerIds[0]}: Value for "text-size" is >= ${yf}. Reduce your "text-size".`)):ct.kind==="composite"&&(vt=[Uc*ze.compositeTextSizes[0].evaluate(F,{},We),Uc*ze.compositeTextSizes[1].evaluate(F,{},We)],(vt[0]>ld||vt[1]>ld)&&it(`${d.layerIds[0]}: Value for "text-size" is >= ${yf}. Reduce your "text-size".`)),d.addSymbols(d.text,tt,vt,G,R,F,re,u,X.lineStartIndex,X.lineLength,Ke,We);for(const zt of de)be[zt]=d.text.placedSymbolArray.length-1;return 4*tt.length}function tg(d){for(const u in d)return d[u];return null}function Fd(d,u,h,y){const w=d.compareText;if(u in w){const R=w[u];for(let F=R.length-1;F>=0;F--)if(y.dist(R[F])<h)return!0}else w[u]=[];return w[u].push(y),!1}const vm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Jy{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,y]=new Uint8Array(u,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=y>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const R=vm[15&y];if(!R)throw new Error("Unrecognized array type.");const[F]=new Uint16Array(u,2,1),[G]=new Uint32Array(u,4,1);return new Jy(G,F,R,u)}constructor(u,h=64,y=Float64Array,w){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=y,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const R=vm.indexOf(this.ArrayType),F=2*u*this.ArrayType.BYTES_PER_ELEMENT,G=u*this.IndexArrayType.BYTES_PER_ELEMENT,X=(8-G%8)%8;if(R<0)throw new Error(`Unexpected typed array class: ${y}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+G+X,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+F+G+X),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+G+X,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+R]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=u)}add(u,h){const y=this._pos>>1;return this.ids[y]=y,this.coords[this._pos++]=u,this.coords[this._pos++]=h,y}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return ev(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,h,y,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:R,coords:F,nodeSize:G}=this,X=[0,R.length-1,0],re=[];for(;X.length;){const de=X.pop()||0,be=X.pop()||0,Ke=X.pop()||0;if(be-Ke<=G){for(let ct=Ke;ct<=be;ct++){const vt=F[2*ct],zt=F[2*ct+1];vt>=u&&vt<=y&&zt>=h&&zt<=w&&re.push(R[ct])}continue}const ze=Ke+be>>1,We=F[2*ze],tt=F[2*ze+1];We>=u&&We<=y&&tt>=h&&tt<=w&&re.push(R[ze]),(de===0?u<=We:h<=tt)&&(X.push(Ke),X.push(ze-1),X.push(1-de)),(de===0?y>=We:w>=tt)&&(X.push(ze+1),X.push(be),X.push(1-de))}return re}within(u,h,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:R,nodeSize:F}=this,G=[0,w.length-1,0],X=[],re=y*y;for(;G.length;){const de=G.pop()||0,be=G.pop()||0,Ke=G.pop()||0;if(be-Ke<=F){for(let ct=Ke;ct<=be;ct++)nv(R[2*ct],R[2*ct+1],u,h)<=re&&X.push(w[ct]);continue}const ze=Ke+be>>1,We=R[2*ze],tt=R[2*ze+1];nv(We,tt,u,h)<=re&&X.push(w[ze]),(de===0?u-y<=We:h-y<=tt)&&(G.push(Ke),G.push(ze-1),G.push(1-de)),(de===0?u+y>=We:h+y>=tt)&&(G.push(ze+1),G.push(be),G.push(1-de))}return X}}function ev(d,u,h,y,w,R){if(w-y<=h)return;const F=y+w>>1;__(d,u,F,y,w,R),ev(d,u,h,y,F-1,1-R),ev(d,u,h,F+1,w,1-R)}function __(d,u,h,y,w,R){for(;w>y;){if(w-y>600){const re=w-y+1,de=h-y+1,be=Math.log(re),Ke=.5*Math.exp(2*be/3),ze=.5*Math.sqrt(be*Ke*(re-Ke)/re)*(de-re/2<0?-1:1);__(d,u,h,Math.max(y,Math.floor(h-de*Ke/re+ze)),Math.min(w,Math.floor(h+(re-de)*Ke/re+ze)),R)}const F=u[2*h+R];let G=y,X=w;for(ng(d,u,y,h),u[2*w+R]>F&&ng(d,u,y,w);G<X;){for(ng(d,u,G,X),G++,X--;u[2*G+R]<F;)G++;for(;u[2*X+R]>F;)X--}u[2*y+R]===F?ng(d,u,y,X):(X++,ng(d,u,X,w)),X<=h&&(y=X+1),h<=X&&(w=X-1)}}function ng(d,u,h,y){tv(d,h,y),tv(u,2*h,2*y),tv(u,2*h+1,2*y+1)}function tv(d,u,h){const y=d[u];d[u]=d[h],d[h]=y}function nv(d,u,h,y){const w=d-h,R=u-y;return w*w+R*R}var Fh;l.ck=void 0,(Fh=l.ck||(l.ck={})).create="create",Fh.load="load",Fh.fullLoad="fullLoad";let Co=null,r0=[];const ud=1e3/60,i1="loadTime",rv="fullLoadTime",ia={mark(d){performance.mark(d)},frame(d){const u=d;Co!=null&&r0.push(u-Co),Co=u},clearMetrics(){Co=null,r0=[],performance.clearMeasures(i1),performance.clearMeasures(rv);for(const d in l.ck)performance.clearMarks(l.ck[d])},getPerformanceMetrics(){performance.measure(i1,l.ck.create,l.ck.load),performance.measure(rv,l.ck.create,l.ck.fullLoad);const d=performance.getEntriesByName(i1)[0].duration,u=performance.getEntriesByName(rv)[0].duration,h=r0.length,y=1/(r0.reduce((R,F)=>R+F,0)/h/1e3),w=r0.filter(R=>R>ud).reduce((R,F)=>R+(F-ud)/ud,0);return{loadTime:d,fullLoadTime:u,fps:y,percentDroppedFrames:w/(h+w)*100,totalFrames:h}}};l.$=J0,l.A=W,l.B=Ui,l.C=gs,l.D=Dr,l.E=Ce,l.F=Xc,l.G=function(d){if(Lt==null){const u=d.navigator?d.navigator.userAgent:null;Lt=!!d.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Lt},l.H=class{constructor(d,u){this.target=d,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new vr(()=>this.process()),this.subscription=ar(this.target,"message",h=>this.receive(h),!1),this.globalScope=ft(self)?d:window}registerMessageHandler(d,u){this.messageHandlers[d]=u}sendAsync(d,u){return new Promise((h,y)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10),R=u?ar(u.signal,"abort",()=>{R==null||R.unsubscribe(),delete this.resolveRejects[w];const X={id:w,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(X)},li):null;this.resolveRejects[w]={resolve:X=>{R==null||R.unsubscribe(),h(X)},reject:X=>{R==null||R.unsubscribe(),y(X)}};const F=[],G=Object.assign(Object.assign({},d),{id:w,sourceMapId:this.mapId,origin:location.origin,data:Tc(d.data,F)});this.target.postMessage(G,{transfer:F})})}receive(d){const u=d.data,h=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[h];const y=this.abortControllers[h];return delete this.abortControllers[h],void(y&&y.abort())}if(ft(self)||u.mustQueue)return this.tasks[h]=u,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,u)}}process(){if(this.taskQueue.length===0)return;const d=this.taskQueue.shift(),u=this.tasks[d];delete this.tasks[d],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(d,u)}processTask(d,u){return o(this,void 0,void 0,function*(){if(u.type==="<response>"){const w=this.resolveRejects[d];return delete this.resolveRejects[d],w?void(u.error?w.reject(Va(u.error)):w.resolve(Va(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(d,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=Va(u.data),y=new AbortController;this.abortControllers[d]=y;try{const w=yield this.messageHandlers[u.type](u.sourceMapId,h,y);this.completeTask(d,null,w)}catch(w){this.completeTask(d,w)}})}completeTask(d,u,h){const y=[];delete this.abortControllers[d];const w={id:d,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?Tc(u):null,data:Tc(h,y)};this.target.postMessage(w,{transfer:y})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.I=Y0,l.J=ce,l.K=function(){var d=new W(16);return W!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},l.L=function(d,u,h){var y,w,R,F,G,X,re,de,be,Ke,ze,We,tt=h[0],ct=h[1],vt=h[2];return u===d?(d[12]=u[0]*tt+u[4]*ct+u[8]*vt+u[12],d[13]=u[1]*tt+u[5]*ct+u[9]*vt+u[13],d[14]=u[2]*tt+u[6]*ct+u[10]*vt+u[14],d[15]=u[3]*tt+u[7]*ct+u[11]*vt+u[15]):(w=u[1],R=u[2],F=u[3],G=u[4],X=u[5],re=u[6],de=u[7],be=u[8],Ke=u[9],ze=u[10],We=u[11],d[0]=y=u[0],d[1]=w,d[2]=R,d[3]=F,d[4]=G,d[5]=X,d[6]=re,d[7]=de,d[8]=be,d[9]=Ke,d[10]=ze,d[11]=We,d[12]=y*tt+G*ct+be*vt+u[12],d[13]=w*tt+X*ct+Ke*vt+u[13],d[14]=R*tt+re*ct+ze*vt+u[14],d[15]=F*tt+de*ct+We*vt+u[15]),d},l.M=function(d,u,h){var y=h[0],w=h[1],R=h[2];return d[0]=u[0]*y,d[1]=u[1]*y,d[2]=u[2]*y,d[3]=u[3]*y,d[4]=u[4]*w,d[5]=u[5]*w,d[6]=u[6]*w,d[7]=u[7]*w,d[8]=u[8]*R,d[9]=u[9]*R,d[10]=u[10]*R,d[11]=u[11]*R,d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},l.N=function(d,u,h){var y=u[0],w=u[1],R=u[2],F=u[3],G=u[4],X=u[5],re=u[6],de=u[7],be=u[8],Ke=u[9],ze=u[10],We=u[11],tt=u[12],ct=u[13],vt=u[14],zt=u[15],Et=h[0],Fe=h[1],at=h[2],Mt=h[3];return d[0]=Et*y+Fe*G+at*be+Mt*tt,d[1]=Et*w+Fe*X+at*Ke+Mt*ct,d[2]=Et*R+Fe*re+at*ze+Mt*vt,d[3]=Et*F+Fe*de+at*We+Mt*zt,d[4]=(Et=h[4])*y+(Fe=h[5])*G+(at=h[6])*be+(Mt=h[7])*tt,d[5]=Et*w+Fe*X+at*Ke+Mt*ct,d[6]=Et*R+Fe*re+at*ze+Mt*vt,d[7]=Et*F+Fe*de+at*We+Mt*zt,d[8]=(Et=h[8])*y+(Fe=h[9])*G+(at=h[10])*be+(Mt=h[11])*tt,d[9]=Et*w+Fe*X+at*Ke+Mt*ct,d[10]=Et*R+Fe*re+at*ze+Mt*vt,d[11]=Et*F+Fe*de+at*We+Mt*zt,d[12]=(Et=h[12])*y+(Fe=h[13])*G+(at=h[14])*be+(Mt=h[15])*tt,d[13]=Et*w+Fe*X+at*Ke+Mt*ct,d[14]=Et*R+Fe*re+at*ze+Mt*vt,d[15]=Et*F+Fe*de+at*We+Mt*zt,d},l.O=function(d,u){const h={};for(let y=0;y<u.length;y++){const w=u[y];w in d&&(h[w]=d[w])}return h},l.P=U,l.Q=yi,l.R=Jl,l.S=Dh,l.T=_a,l.U=_s,l.V=oe,l.W=te,l.X=_n,l.Y=Dd,l.Z=At,l._=o,l.a=tr,l.a$=function(d,u,h){var y=Math.sin(h),w=Math.cos(h),R=u[4],F=u[5],G=u[6],X=u[7],re=u[8],de=u[9],be=u[10],Ke=u[11];return u!==d&&(d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15]),d[4]=R*w+re*y,d[5]=F*w+de*y,d[6]=G*w+be*y,d[7]=X*w+Ke*y,d[8]=re*w-R*y,d[9]=de*w-F*y,d[10]=be*w-G*y,d[11]=Ke*w-X*y,d},l.a0=25,l.a1=Vy,l.a2=d=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(h=>{u.onloadstart=()=>{h(u)};for(const y of d){const w=window.document.createElement("source");Ht(y)||(u.crossOrigin="Anonymous"),w.src=y,u.appendChild(w)}})},l.a3=on,l.a4=function(){return Ft++},l.a5=J,l.a6=Ot,l.a7=Vc,l.a8=OA,l.a9=h_,l.aA=eg,l.aB=kp,l.aC=Jy,l.aD=vs,l.aE=Ln,l.aF=Bt,l.aG=_i,l.aH=Rn,l.aI=function(d){return Math.pow(2,d)},l.aJ=85.051129,l.aK=r1,l.aL=Gt,l.aM=kn,l.aN=u_,l.aO=function(d,u,h){return d[0]=u[0]*h,d[1]=u[1]*h,d[2]=u[2]*h,d},l.aP=function(d,u,h){return d[0]=u[0]+h[0],d[1]=u[1]+h[1],d[2]=u[2]+h[2],d},l.aQ=function(d){var u=new W(3);return u[0]=d[0],u[1]=d[1],u[2]=d[2],u},l.aR=function(d,u,h){return d[0]=u[0]*h[0],d[1]=u[1]*h[1],d[2]=u[2]*h[2],d[3]=u[3]*h[3],d},l.aS=function(d,u,h){return d[0]=u[0]-h[0],d[1]=u[1]-h[1],d[2]=u[2]-h[2],d},l.aT=function(d,u){var h=u[0],y=u[1],w=u[2],R=h*h+y*y+w*w;return R>0&&(R=1/Math.sqrt(R)),d[0]=u[0]*R,d[1]=u[1]*R,d[2]=u[2]*R,d},l.aU=function(d,u,h){var y=u[0],w=u[1],R=u[2],F=h[0],G=h[1],X=h[2];return d[0]=w*X-R*G,d[1]=R*F-y*X,d[2]=y*G-w*F,d},l.aV=function(d,u){return d[0]*u[0]+d[1]*u[1]+d[2]*u[2]},l.aW=c_,l.aX=e0,l.aY=function(d,u,h,y,w){var R,F=1/Math.tan(u/2);return d[0]=F/h,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=F,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,w!=null&&w!==1/0?(d[10]=(w+y)*(R=1/(y-w)),d[14]=2*w*y*R):(d[10]=-1,d[14]=-2*y),d},l.aZ=function(d){var u=new W(16);return u[0]=d[0],u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=d[6],u[7]=d[7],u[8]=d[8],u[9]=d[9],u[10]=d[10],u[11]=d[11],u[12]=d[12],u[13]=d[13],u[14]=d[14],u[15]=d[15],u},l.a_=function(d,u,h){var y=Math.sin(h),w=Math.cos(h),R=u[0],F=u[1],G=u[2],X=u[3],re=u[4],de=u[5],be=u[6],Ke=u[7];return u!==d&&(d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15]),d[0]=R*w+re*y,d[1]=F*w+de*y,d[2]=G*w+be*y,d[3]=X*w+Ke*y,d[4]=re*w-R*y,d[5]=de*w-F*y,d[6]=be*w-G*y,d[7]=Ke*w-X*y,d},l.aa=function(d){const u={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,y,w,R)=>{const F=w||R;return u[y]=!F||F.toLowerCase(),""}),u["max-age"]){const h=parseInt(u["max-age"],10);isNaN(h)?delete u["max-age"]:u["max-age"]=h}return u},l.ab=function(d){return Math.log(d)/Math.LN2},l.ac=function(d){var u=d[0],h=d[1];return u*u+h*h},l.ad=function(d){return d*Math.PI/180},l.ae=_t,l.af=function(d,u){const h=[];for(const y in d)y in u||h.push(y);return h},l.ag=function(d,u){let h=0,y=0;if(d.kind==="constant")y=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:w,minZoom:R,maxZoom:F}=d,G=w?_t(si.interpolationFactor(w,u,R,F),0,1):0;d.kind==="camera"?y=Ui.number(d.minSize,d.maxSize,G):h=G}return{uSizeT:h,uSize:y}},l.ai=function(d,{uSize:u,uSizeT:h},{lowerSize:y,upperSize:w}){return d.kind==="source"?y/Uc:d.kind==="composite"?Ui.number(y/Uc,w/Uc,h):u},l.aj=function(d,u){var h=u[0],y=u[1],w=u[2],R=u[3],F=u[4],G=u[5],X=u[6],re=u[7],de=u[8],be=u[9],Ke=u[10],ze=u[11],We=u[12],tt=u[13],ct=u[14],vt=u[15],zt=h*G-y*F,Et=h*X-w*F,Fe=h*re-R*F,at=y*X-w*G,Mt=y*re-R*G,an=w*re-R*X,jn=de*tt-be*We,gn=de*ct-Ke*We,En=de*vt-ze*We,or=be*ct-Ke*tt,Wn=be*vt-ze*tt,dr=Ke*vt-ze*ct,On=zt*dr-Et*Wn+Fe*or+at*En-Mt*gn+an*jn;return On?(d[0]=(G*dr-X*Wn+re*or)*(On=1/On),d[1]=(w*Wn-y*dr-R*or)*On,d[2]=(tt*an-ct*Mt+vt*at)*On,d[3]=(Ke*Mt-be*an-ze*at)*On,d[4]=(X*En-F*dr-re*gn)*On,d[5]=(h*dr-w*En+R*gn)*On,d[6]=(ct*Fe-We*an-vt*Et)*On,d[7]=(de*an-Ke*Fe+ze*Et)*On,d[8]=(F*Wn-G*En+re*jn)*On,d[9]=(y*En-h*Wn-R*jn)*On,d[10]=(We*Mt-tt*Fe+vt*zt)*On,d[11]=(be*Fe-de*Mt-ze*zt)*On,d[12]=(G*gn-F*or-X*jn)*On,d[13]=(h*or-y*gn+w*jn)*On,d[14]=(tt*Et-We*at-ct*zt)*On,d[15]=(de*at-be*Et+Ke*zt)*On,d):null},l.ak=De,l.al=function(d){return Math.hypot(d[0],d[1])},l.am=function(d){return d[0]=0,d[1]=0,d},l.an=function(d,u,h){return d[0]=u[0]*h,d[1]=u[1]*h,d},l.ao=Q,l.ap=me,l.aq=function(d,u,h,y){const w=u.y-d.y,R=u.x-d.x,F=y.y-h.y,G=y.x-h.x,X=F*R-G*w;if(X===0)return null;const re=(G*(d.y-h.y)-F*(d.x-h.x))/X;return new U(d.x+re*R,d.y+re*w)},l.ar=zc,l.as=dl,l.at=he,l.au=function(d){let u=1/0,h=1/0,y=-1/0,w=-1/0;for(const R of d)u=Math.min(u,R.x),h=Math.min(h,R.y),y=Math.max(y,R.x),w=Math.max(w,R.y);return[u,h,y,w]},l.av=Sl,l.aw=Ze,l.ax=function(d,u,h,y,w=!1){if(!h[0]&&!h[1])return[0,0];const R=w?y==="map"?-d.bearingInRadians:0:y==="viewport"?d.bearingInRadians:0;if(R){const F=Math.sin(R),G=Math.cos(R);h=[h[0]*G-h[1]*F,h[0]*F+h[1]*G]}return[w?h[0]:Ze(u,h[0],d.zoom),w?h[1]:Ze(u,h[1],d.zoom)]},l.az=Tp,l.b=Zt,l.b$=d=>d.type==="symbol",l.b0=function(){const d=new Float32Array(16);return he(d),d},l.b1=function(){const d=new Float64Array(16);return he(d),d},l.b2=function(){return new Float64Array(16)},l.b3=function(d,u,h){const y=new Float64Array(4);return function(w,R,F,G){var X=.5*Math.PI/180;R*=X,F*=X,G*=X;var re=Math.sin(R),de=Math.cos(R),be=Math.sin(F),Ke=Math.cos(F),ze=Math.sin(G),We=Math.cos(G);w[0]=re*Ke*We-de*be*ze,w[1]=de*be*We+re*Ke*ze,w[2]=de*Ke*ze-re*be*We,w[3]=de*Ke*We+re*be*ze}(y,d,u-90,h),y},l.b4=function(d,u,h,y){var w,R,F,G,X,re=u[0],de=u[1],be=u[2],Ke=u[3],ze=h[0],We=h[1],tt=h[2],ct=h[3];return(R=re*ze+de*We+be*tt+Ke*ct)<0&&(R=-R,ze=-ze,We=-We,tt=-tt,ct=-ct),1-R>ne?(w=Math.acos(R),F=Math.sin(w),G=Math.sin((1-y)*w)/F,X=Math.sin(y*w)/F):(G=1-y,X=y),d[0]=G*re+X*ze,d[1]=G*de+X*We,d[2]=G*be+X*tt,d[3]=G*Ke+X*ct,d},l.b5=function(d){const u=new Float64Array(9);var h,y,w,R,F,G,X,re,de,be,Ke,ze,We,tt,ct,vt,zt,Et;be=(w=(y=d)[0])*(X=w+w),Ke=(R=y[1])*X,We=(F=y[2])*X,tt=F*(re=R+R),vt=(G=y[3])*X,zt=G*re,Et=G*(de=F+F),(h=u)[0]=1-(ze=R*re)-(ct=F*de),h[3]=Ke-Et,h[6]=We+zt,h[1]=Ke+Et,h[4]=1-be-ct,h[7]=tt-vt,h[2]=We-zt,h[5]=tt+vt,h[8]=1-be-ze;const Fe=kn(-Math.asin(_t(u[2],-1,1)));let at,Mt;return Math.hypot(u[5],u[8])<.001?(at=0,Mt=-kn(Math.atan2(u[3],u[4]))):(at=kn(u[5]===0&&u[8]===0?0:Math.atan2(u[5],u[8])),Mt=kn(u[1]===0&&u[0]===0?0:Math.atan2(u[1],u[0]))),{roll:at,pitch:Fe+90,bearing:Mt}},l.b6=function(d,u){return d.roll==u.roll&&d.pitch==u.pitch&&d.bearing==u.bearing},l.b7=Si,l.b8=Pu,l.b9=rr,l.bA=function(d,u){if(!d)return[{command:"setStyle",args:[u]}];let h=[];try{if(!Je(d.version,u.version))return[{command:"setStyle",args:[u]}];Je(d.center,u.center)||h.push({command:"setCenter",args:[u.center]}),Je(d.centerAltitude,u.centerAltitude)||h.push({command:"setCenterAltitude",args:[u.centerAltitude]}),Je(d.zoom,u.zoom)||h.push({command:"setZoom",args:[u.zoom]}),Je(d.bearing,u.bearing)||h.push({command:"setBearing",args:[u.bearing]}),Je(d.pitch,u.pitch)||h.push({command:"setPitch",args:[u.pitch]}),Je(d.roll,u.roll)||h.push({command:"setRoll",args:[u.roll]}),Je(d.sprite,u.sprite)||h.push({command:"setSprite",args:[u.sprite]}),Je(d.glyphs,u.glyphs)||h.push({command:"setGlyphs",args:[u.glyphs]}),Je(d.transition,u.transition)||h.push({command:"setTransition",args:[u.transition]}),Je(d.light,u.light)||h.push({command:"setLight",args:[u.light]}),Je(d.terrain,u.terrain)||h.push({command:"setTerrain",args:[u.terrain]}),Je(d.sky,u.sky)||h.push({command:"setSky",args:[u.sky]}),Je(d.projection,u.projection)||h.push({command:"setProjection",args:[u.projection]});const y={},w=[];(function(F,G,X,re){let de;for(de in G=G||{},F=F||{})Object.prototype.hasOwnProperty.call(F,de)&&(Object.prototype.hasOwnProperty.call(G,de)||Qt(de,X,re));for(de in G)Object.prototype.hasOwnProperty.call(G,de)&&(Object.prototype.hasOwnProperty.call(F,de)?Je(F[de],G[de])||(F[de].type==="geojson"&&G[de].type==="geojson"&&jt(F,G,de)?ut(X,{command:"setGeoJSONSourceData",args:[de,G[de].data]}):Wt(de,G,X,re)):dt(de,G,X))})(d.sources,u.sources,w,y);const R=[];d.layers&&d.layers.forEach(F=>{"source"in F&&y[F.source]?h.push({command:"removeLayer",args:[F.id]}):R.push(F)}),h=h.concat(w),function(F,G,X){G=G||[];const re=(F=F||[]).map(Dn),de=G.map(Dn),be=F.reduce(Fn,{}),Ke=G.reduce(Fn,{}),ze=re.slice(),We=Object.create(null);let tt,ct,vt,zt,Et;for(let Fe=0,at=0;Fe<re.length;Fe++)tt=re[Fe],Object.prototype.hasOwnProperty.call(Ke,tt)?at++:(ut(X,{command:"removeLayer",args:[tt]}),ze.splice(ze.indexOf(tt,at),1));for(let Fe=0,at=0;Fe<de.length;Fe++)tt=de[de.length-1-Fe],ze[ze.length-1-Fe]!==tt&&(Object.prototype.hasOwnProperty.call(be,tt)?(ut(X,{command:"removeLayer",args:[tt]}),ze.splice(ze.lastIndexOf(tt,ze.length-at),1)):at++,zt=ze[ze.length-Fe],ut(X,{command:"addLayer",args:[Ke[tt],zt]}),ze.splice(ze.length-Fe,0,tt),We[tt]=!0);for(let Fe=0;Fe<de.length;Fe++)if(tt=de[Fe],ct=be[tt],vt=Ke[tt],!We[tt]&&!Je(ct,vt))if(Je(ct.source,vt.source)&&Je(ct["source-layer"],vt["source-layer"])&&Je(ct.type,vt.type)){for(Et in tn(ct.layout,vt.layout,X,tt,null,"setLayoutProperty"),tn(ct.paint,vt.paint,X,tt,null,"setPaintProperty"),Je(ct.filter,vt.filter)||ut(X,{command:"setFilter",args:[tt,vt.filter]}),Je(ct.minzoom,vt.minzoom)&&Je(ct.maxzoom,vt.maxzoom)||ut(X,{command:"setLayerZoomRange",args:[tt,vt.minzoom,vt.maxzoom]}),ct)Object.prototype.hasOwnProperty.call(ct,Et)&&Et!=="layout"&&Et!=="paint"&&Et!=="filter"&&Et!=="metadata"&&Et!=="minzoom"&&Et!=="maxzoom"&&(Et.indexOf("paint.")===0?tn(ct[Et],vt[Et],X,tt,Et.slice(6),"setPaintProperty"):Je(ct[Et],vt[Et])||ut(X,{command:"setLayerProperty",args:[tt,Et,vt[Et]]}));for(Et in vt)Object.prototype.hasOwnProperty.call(vt,Et)&&!Object.prototype.hasOwnProperty.call(ct,Et)&&Et!=="layout"&&Et!=="paint"&&Et!=="filter"&&Et!=="metadata"&&Et!=="minzoom"&&Et!=="maxzoom"&&(Et.indexOf("paint.")===0?tn(ct[Et],vt[Et],X,tt,Et.slice(6),"setPaintProperty"):Je(ct[Et],vt[Et])||ut(X,{command:"setLayerProperty",args:[tt,Et,vt[Et]]}))}else ut(X,{command:"removeLayer",args:[tt]}),zt=ze[ze.lastIndexOf(tt)+1],ut(X,{command:"addLayer",args:[vt,zt]})}(R,u.layers,h)}catch(y){console.warn("Unable to compute style diff:",y),h=[{command:"setStyle",args:[u]}]}return h},l.bB=function(d){const u=[],h=d.id;return h===void 0&&u.push({message:`layers.${h}: missing required property "id"`}),d.render===void 0&&u.push({message:`layers.${h}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&u.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),u},l.bC=function d(u,h){if(Array.isArray(u)){if(!Array.isArray(h)||u.length!==h.length)return!1;for(let y=0;y<u.length;y++)if(!d(u[y],h[y]))return!1;return!0}if(typeof u=="object"&&u!==null&&h!==null){if(typeof h!="object"||Object.keys(u).length!==Object.keys(h).length)return!1;for(const y in u)if(!d(u[y],h[y]))return!1;return!0}return u===h},l.bD=Tt,l.bE=Le,l.bF=class extends Rl{constructor(d,u){super(d,u),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},l.bG=Ku,l.bH=class extends Rl{constructor(d,u){super(d,u),this.current=Hl}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let u=1;u<16;u++)if(d[u]!==this.current[u]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},l.bI=xa,l.bJ=class extends Rl{constructor(d,u){super(d,u),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},l.bK=class extends Rl{constructor(d,u){super(d,u),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},l.bL=ie,l.bM=function(d,u){var h=Math.sin(u),y=Math.cos(u);return d[0]=y,d[1]=h,d[2]=0,d[3]=-h,d[4]=y,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},l.bN=function(d,u,h){var y=u[0],w=u[1],R=u[2];return d[0]=y*h[0]+w*h[3]+R*h[6],d[1]=y*h[1]+w*h[4]+R*h[7],d[2]=y*h[2]+w*h[5]+R*h[8],d},l.bO=function(d,u,h,y,w,R,F){var G=1/(u-h),X=1/(y-w),re=1/(R-F);return d[0]=-2*G,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*X,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*re,d[11]=0,d[12]=(u+h)*G,d[13]=(w+y)*X,d[14]=(F+R)*re,d[15]=1,d},l.bP=class extends Rc{},l.bQ=$g,l.bR=class extends Kl{},l.bS=XA,l.bT=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},l.bU=Yf,l.bV=function(d,u,h){var y=u[0],w=u[1],R=u[2],F=h[3]*y+h[7]*w+h[11]*R+h[15];return d[0]=(h[0]*y+h[4]*w+h[8]*R+h[12])/(F=F||1),d[1]=(h[1]*y+h[5]*w+h[9]*R+h[13])/F,d[2]=(h[2]*y+h[6]*w+h[10]*R+h[14])/F,d},l.bW=class extends bl{},l.bX=class extends k{},l.bY=function(d,u){return d[0]===u[0]&&d[1]===u[1]&&d[2]===u[2]&&d[3]===u[3]&&d[4]===u[4]&&d[5]===u[5]&&d[6]===u[6]&&d[7]===u[7]&&d[8]===u[8]&&d[9]===u[9]&&d[10]===u[10]&&d[11]===u[11]&&d[12]===u[12]&&d[13]===u[13]&&d[14]===u[14]&&d[15]===u[15]},l.bZ=function(d,u){var h=d[0],y=d[1],w=d[2],R=d[3],F=d[4],G=d[5],X=d[6],re=d[7],de=d[8],be=d[9],Ke=d[10],ze=d[11],We=d[12],tt=d[13],ct=d[14],vt=d[15],zt=u[0],Et=u[1],Fe=u[2],at=u[3],Mt=u[4],an=u[5],jn=u[6],gn=u[7],En=u[8],or=u[9],Wn=u[10],dr=u[11],On=u[12],Nr=u[13],vi=u[14],hi=u[15];return Math.abs(h-zt)<=ne*Math.max(1,Math.abs(h),Math.abs(zt))&&Math.abs(y-Et)<=ne*Math.max(1,Math.abs(y),Math.abs(Et))&&Math.abs(w-Fe)<=ne*Math.max(1,Math.abs(w),Math.abs(Fe))&&Math.abs(R-at)<=ne*Math.max(1,Math.abs(R),Math.abs(at))&&Math.abs(F-Mt)<=ne*Math.max(1,Math.abs(F),Math.abs(Mt))&&Math.abs(G-an)<=ne*Math.max(1,Math.abs(G),Math.abs(an))&&Math.abs(X-jn)<=ne*Math.max(1,Math.abs(X),Math.abs(jn))&&Math.abs(re-gn)<=ne*Math.max(1,Math.abs(re),Math.abs(gn))&&Math.abs(de-En)<=ne*Math.max(1,Math.abs(de),Math.abs(En))&&Math.abs(be-or)<=ne*Math.max(1,Math.abs(be),Math.abs(or))&&Math.abs(Ke-Wn)<=ne*Math.max(1,Math.abs(Ke),Math.abs(Wn))&&Math.abs(ze-dr)<=ne*Math.max(1,Math.abs(ze),Math.abs(dr))&&Math.abs(We-On)<=ne*Math.max(1,Math.abs(We),Math.abs(On))&&Math.abs(tt-Nr)<=ne*Math.max(1,Math.abs(tt),Math.abs(Nr))&&Math.abs(ct-vi)<=ne*Math.max(1,Math.abs(ct),Math.abs(vi))&&Math.abs(vt-hi)<=ne*Math.max(1,Math.abs(vt),Math.abs(hi))},l.b_=function(d,u){return d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],d[4]=u[4],d[5]=u[5],d[6]=u[6],d[7]=u[7],d[8]=u[8],d[9]=u[9],d[10]=u[10],d[11]=u[11],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15],d},l.ba=er,l.bb=bn,l.bc=Ne,l.bd=Se,l.be=No,l.bf=function(d,u,h,y,w){return Ne(y,w,_t((d-u)/(h-u),0,1))},l.bg=Xe,l.bh=function(){return new Float64Array(4)},l.bi=function(){return new Float64Array(3)},l.bj=function(d,u,h,y){var w=[],R=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],R[0]=w[0]*Math.cos(y)-w[1]*Math.sin(y),R[1]=w[0]*Math.sin(y)+w[1]*Math.cos(y),R[2]=w[2],d[0]=R[0]+h[0],d[1]=R[1]+h[1],d[2]=R[2]+h[2],d},l.bk=function(d,u,h,y){var w=[],R=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],R[0]=w[0],R[1]=w[1]*Math.cos(y)-w[2]*Math.sin(y),R[2]=w[1]*Math.sin(y)+w[2]*Math.cos(y),d[0]=R[0]+h[0],d[1]=R[1]+h[1],d[2]=R[2]+h[2],d},l.bl=function(d,u,h,y){var w=[],R=[];return w[0]=u[0]-h[0],w[1]=u[1]-h[1],w[2]=u[2]-h[2],R[0]=w[2]*Math.sin(y)+w[0]*Math.cos(y),R[1]=w[1],R[2]=w[2]*Math.cos(y)-w[0]*Math.sin(y),d[0]=R[0]+h[0],d[1]=R[1]+h[1],d[2]=R[2]+h[2],d},l.bm=function(d,u,h){var y=Math.sin(h),w=Math.cos(h),R=u[0],F=u[1],G=u[2],X=u[3],re=u[8],de=u[9],be=u[10],Ke=u[11];return u!==d&&(d[4]=u[4],d[5]=u[5],d[6]=u[6],d[7]=u[7],d[12]=u[12],d[13]=u[13],d[14]=u[14],d[15]=u[15]),d[0]=R*w-re*y,d[1]=F*w-de*y,d[2]=G*w-be*y,d[3]=X*w-Ke*y,d[8]=R*y+re*w,d[9]=F*y+de*w,d[10]=G*y+be*w,d[11]=X*y+Ke*w,d},l.bn=function(d,u){const h=Xe(d,360),y=Xe(u,360),w=y-h,R=y>h?w-360:w+360;return Math.abs(w)<Math.abs(R)?w:R},l.bo=function(d){return d[0]=0,d[1]=0,d[2]=0,d},l.bp=function(d,u,h,y){const w=Math.sqrt(d*d+u*u),R=Math.sqrt(h*h+y*y);d/=w,u/=w,h/=R,y/=R;const F=Math.acos(d*h+u*y);return-u*h+d*y>0?F:-F},l.bq=function(d,u){return d[0]*u[0]+d[1]*u[1]+d[2]*u[2]+d[3]},l.br=Ii,l.bs=function(d,u){const h=Xe(d,2*Math.PI),y=Xe(u,2*Math.PI);return Math.min(Math.abs(h-y),Math.abs(h-y+2*Math.PI),Math.abs(h-y-2*Math.PI))},l.bt=function(d){return Math.hypot(d[0],d[1],d[2])},l.bu=function(){const d={},u=f.$version;for(const h in f.$root){const y=f.$root[h];if(y.required){let w=null;w=h==="version"?u:y.type==="array"?[]:{},w!=null&&(d[h]=w)}}return d},l.bv=eh,l.bw=rt,l.bx=function(d){d=d.slice();const u=Object.create(null);for(let h=0;h<d.length;h++)u[d[h].id]=d[h];for(let h=0;h<d.length;h++)"ref"in d[h]&&(d[h]=qe(d[h],u[d[h].ref]));return d},l.by=function(d){if(d.type==="custom")return new pn(d);switch(d.type){case"background":return new ai(d);case"circle":return new Zl(d);case"fill":return new Ha(d);case"fill-extrusion":return new Gm(d);case"heatmap":return new df(d);case"hillshade":return new kh(d);case"line":return new Vg(d);case"raster":return new Jt(d);case"symbol":return new ir(d)}},l.bz=Pe,l.c=gr,l.c0=d=>d.type==="circle",l.c1=d=>d.type==="heatmap",l.c2=d=>d.type==="line",l.c3=d=>d.type==="fill",l.c4=d=>d.type==="fill-extrusion",l.c5=d=>d.type==="hillshade",l.c6=d=>d.type==="raster",l.c7=d=>d.type==="background",l.c8=d=>d.type==="custom",l.c9=Re,l.cA=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},l.cB=function(d,u,h,y,w){return o(this,void 0,void 0,function*(){if(te())try{return yield _n(d,u,h,y,w)}catch{}return function(R,F,G,X,re){const de=R.width,be=R.height;qn&&rn||(qn=new OffscreenCanvas(de,be),rn=qn.getContext("2d",{willReadFrequently:!0})),qn.width=de,qn.height=be,rn.drawImage(R,0,0,de,be);const Ke=rn.getImageData(F,G,X,re);return rn.clearRect(0,0,de,be),Ke.data}(d,u,h,y,w)})},l.cC=d_,l.cD=p,l.cE=B,l.cF=yu,l.cG=Zf,l.cH=Sc,l.cI=cu,l.ca=function(d,u,h){const y=xe(u.x-h.x,u.y-h.y),w=xe(d.x-h.x,d.y-h.y);var R,F;return kn(Math.atan2(y[0]*w[1]-y[1]*w[0],(R=y)[0]*(F=w)[0]+R[1]*F[1]))},l.cb=He,l.cc=function(d,u){return zn[u]&&(d instanceof MouseEvent||d instanceof WheelEvent)},l.cd=function(d,u){return mn[u]&&"touches"in d},l.ce=function(d){return mn[d]||zn[d]},l.cf=function(d,u,h){var y=u[0],w=u[1];return d[0]=h[0]*y+h[4]*w+h[12],d[1]=h[1]*y+h[5]*w+h[13],d},l.cg=function(d,u){const{x:h,y}=J0.fromLngLat(u);return!(d<0||d>25||y<0||y>=1||h<0||h>=1)},l.ch=function(d,u){return d[0]=u[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=u[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=u[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},l.ci=class extends du{},l.cj=ia,l.cl=function(d){return d.message===br},l.cm=pe,l.cn=function(d,u){tr.REGISTERED_PROTOCOLS[d]=u},l.co=function(d){delete tr.REGISTERED_PROTOCOLS[d]},l.cp=function(d,u){const h={};for(let w=0;w<d.length;w++){const R=u&&u[d[w].id]||Ya(d[w]);u&&(u[d[w].id]=R);let F=h[R];F||(F=h[R]=[]),F.push(d[w])}const y=[];for(const w in h)y.push(h[w]);return y},l.cq=wr,l.cr=ah,l.cs=f_,l.ct=Lc,l.cu=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=At/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const u=d.bucket.layers[0],h=u.layout,y=u._unevaluatedLayout._values,w={layoutIconSize:y["icon-size"].possiblyEvaluate(new gs(d.bucket.zoom+1),d.canonical),layoutTextSize:y["text-size"].possiblyEvaluate(new gs(d.bucket.zoom+1),d.canonical),textMaxSize:y["text-size"].possiblyEvaluate(new gs(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=d.bucket.textSizeData;w.compositeTextSizes=[y["text-size"].possiblyEvaluate(new gs(re),d.canonical),y["text-size"].possiblyEvaluate(new gs(de),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:re,maxZoom:de}=d.bucket.iconSizeData;w.compositeIconSizes=[y["icon-size"].possiblyEvaluate(new gs(re),d.canonical),y["icon-size"].possiblyEvaluate(new gs(de),d.canonical)]}const R=h.get("text-line-height")*Sl,F=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",G=h.get("text-keep-upright"),X=h.get("text-size");for(const re of d.bucket.features){const de=h.get("text-font").evaluate(re,{},d.canonical).join(","),be=X.evaluate(re,{},d.canonical),Ke=w.layoutTextSize.evaluate(re,{},d.canonical),ze=w.layoutIconSize.evaluate(re,{},d.canonical),We={horizontal:{},vertical:void 0},tt=re.text;let ct,vt=[0,0];if(tt){const Fe=tt.toString(),at=h.get("text-letter-spacing").evaluate(re,{},d.canonical)*Sl,Mt=Pc(Fe)?at:0,an=h.get("text-anchor").evaluate(re,{},d.canonical),jn=n0(u,re,d.canonical);if(!jn){const Wn=h.get("text-radial-offset").evaluate(re,{},d.canonical);vt=Wn?Zy(an,[Wn*Sl,Hy]):h.get("text-offset").evaluate(re,{},d.canonical).map(dr=>dr*Sl)}let gn=F?"center":h.get("text-justify").evaluate(re,{},d.canonical);const En=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(re,{},d.canonical)*Sl:1/0,or=()=>{d.bucket.allowVerticalPlacement&&nA(Fe)&&(We.vertical=sh(tt,d.glyphMap,d.glyphPositions,d.imagePositions,de,En,R,an,"left",Mt,vt,l.ah.vertical,!0,Ke,be))};if(!F&&jn){const Wn=new Set;if(gn==="auto")for(let On=0;On<jn.values.length;On+=2)Wn.add(eg(jn.values[On]));else Wn.add(gn);let dr=!1;for(const On of Wn)if(!We.horizontal[On])if(dr)We.horizontal[On]=We.horizontal[0];else{const Nr=sh(tt,d.glyphMap,d.glyphPositions,d.imagePositions,de,En,R,"center",On,Mt,vt,l.ah.horizontal,!1,Ke,be);Nr&&(We.horizontal[On]=Nr,dr=Nr.positionedLines.length===1)}or()}else{gn==="auto"&&(gn=eg(an));const Wn=sh(tt,d.glyphMap,d.glyphPositions,d.imagePositions,de,En,R,an,gn,Mt,vt,l.ah.horizontal,!1,Ke,be);Wn&&(We.horizontal[gn]=Wn),or(),nA(Fe)&&F&&G&&(We.vertical=sh(tt,d.glyphMap,d.glyphPositions,d.imagePositions,de,En,R,an,gn,Mt,vt,l.ah.vertical,!1,Ke,be))}}let zt=!1;if(re.icon&&re.icon.name){const Fe=d.imageMap[re.icon.name];Fe&&(ct=Jm(d.imagePositions[re.icon.name],h.get("icon-offset").evaluate(re,{},d.canonical),h.get("icon-anchor").evaluate(re,{},d.canonical)),zt=!!Fe.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=zt:d.bucket.sdfIcons!==zt&&it("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Fe.pixelRatio!==d.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const Et=tg(We.horizontal)||We.vertical;d.bucket.iconsInText=!!Et&&Et.iconsInText,(Et||ct)&&l3(d.bucket,re,We,ct,d.imageMap,w,Ke,ze,vt,zt,d.canonical,d.subdivisionGranularity)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},l.cv=kA,l.cw=yo,l.cx=Th,l.cy=lA,l.cz=Op,l.d=Ht,l.e=yt,l.f=d=>o(void 0,void 0,void 0,function*(){if(d.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(u)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=Ge,l.h=d=>new Promise((u,h)=>{const y=new Image;y.onload=()=>{u(y),URL.revokeObjectURL(y.src),y.onload=null,window.requestAnimationFrame(()=>{y.src=Rt})},y.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(d)],{type:"image/png"});y.src=d.byteLength?URL.createObjectURL(w):Rt}),l.i=ft,l.j=(d,u)=>St(yt(d,{type:"json"}),u),l.k=ae,l.l=$e,l.m=St,l.n=(d,u)=>St(yt(d,{type:"arrayBuffer"}),u),l.o=function(d){return new Op(d).readFields(Wy,[])},l.p=Q0,l.q=mu,l.r=Aa,l.s=ar,l.t=Es,l.u=Qi,l.v=f,l.w=it,l.x=Ca,l.y=ns,l.z=function([d,u,h]){return u+=90,u*=Math.PI/180,h*=Math.PI/180,{x:d*Math.cos(u)*Math.sin(h),y:d*Math.sin(u)*Math.sin(h),z:d*Math.cos(h)}}}),i("worker",["./shared"],function(l){class o{constructor(ae){this.keyCache={},ae&&this.replace(ae)}replace(ae){this._layerConfigs={},this._layers={},this.update(ae,[])}update(ae,Ce){for(const je of ae){this._layerConfigs[je.id]=je;const qe=this._layers[je.id]=l.by(je);qe._featureFilter=l.a7(qe.filter),this.keyCache[je.id]&&delete this.keyCache[je.id]}for(const je of Ce)delete this.keyCache[je],delete this._layerConfigs[je],delete this._layers[je];this.familiesBySource={};const f=l.cp(Object.values(this._layerConfigs),this.keyCache);for(const je of f){const qe=je.map(jt=>this._layers[jt.id]),Je=qe[0];if(Je.visibility==="none")continue;const ut=Je.source||"";let dt=this.familiesBySource[ut];dt||(dt=this.familiesBySource[ut]={});const Qt=Je.sourceLayer||"_geojsonTileLayer";let Wt=dt[Qt];Wt||(Wt=dt[Qt]=[]),Wt.push(qe)}}}class p{constructor(ae){const Ce={},f=[];for(const ut in ae){const dt=ae[ut],Qt=Ce[ut]={};for(const Wt in dt){const jt=dt[+Wt];if(!jt||jt.bitmap.width===0||jt.bitmap.height===0)continue;const tn={x:0,y:0,w:jt.bitmap.width+2,h:jt.bitmap.height+2};f.push(tn),Qt[Wt]={rect:tn,metrics:jt.metrics}}}const{w:je,h:qe}=l.p(f),Je=new l.q({width:je||1,height:qe||1});for(const ut in ae){const dt=ae[ut];for(const Qt in dt){const Wt=dt[+Qt];if(!Wt||Wt.bitmap.width===0||Wt.bitmap.height===0)continue;const jt=Ce[ut][Qt].rect;l.q.copy(Wt.bitmap,Je,{x:0,y:0},{x:jt.x+1,y:jt.y+1},Wt.bitmap)}}this.image=Je,this.positions=Ce}}l.cq("GlyphAtlas",p);class v{constructor(ae){this.tileID=new l.Y(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,Ce,f,je,qe){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new l.a5;const Je=new l.cr(Object.keys(ae.layers).sort()),ut=new l.cs(this.tileID,this.promoteId);ut.bucketLayerIDs=[];const dt={},Qt={featureIndex:ut,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:f,subdivisionGranularity:qe},Wt=Ce.familiesBySource[this.source];for(const Yn in Wt){const Qr=ae.layers[Yn];if(!Qr)continue;Qr.version===1&&l.w(`Vector tile source "${this.source}" layer "${Yn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const co=Je.encode(Yn),ma=[];for(let Mr=0;Mr<Qr.length;Mr++){const wi=Qr.feature(Mr),Zi=ut.getId(wi,Yn);ma.push({feature:wi,id:Zi,index:Mr,sourceLayerIndex:co})}for(const Mr of Wt[Yn]){const wi=Mr[0];wi.source!==this.source&&l.w(`layer.source = ${wi.source} does not equal this.source = ${this.source}`),wi.minzoom&&this.zoom<Math.floor(wi.minzoom)||wi.maxzoom&&this.zoom>=wi.maxzoom||wi.visibility!=="none"&&(x(Mr,this.zoom,f),(dt[wi.id]=wi.createBucket({index:ut.bucketLayerIDs.length,layers:Mr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:co,sourceID:this.source})).populate(ma,Qt,this.tileID.canonical),ut.bucketLayerIDs.push(Mr.map(Zi=>Zi.id)))}}const jt=l.bD(Qt.glyphDependencies,Yn=>Object.keys(Yn).map(Number));this.inFlightDependencies.forEach(Yn=>Yn==null?void 0:Yn.abort()),this.inFlightDependencies=[];let tn=Promise.resolve({});if(Object.keys(jt).length){const Yn=new AbortController;this.inFlightDependencies.push(Yn),tn=je.sendAsync({type:"GG",data:{stacks:jt,source:this.source,tileID:this.tileID,type:"glyphs"}},Yn)}const Dn=Object.keys(Qt.iconDependencies);let Fn=Promise.resolve({});if(Dn.length){const Yn=new AbortController;this.inFlightDependencies.push(Yn),Fn=je.sendAsync({type:"GI",data:{icons:Dn,source:this.source,tileID:this.tileID,type:"icons"}},Yn)}const on=Object.keys(Qt.patternDependencies);let Sr=Promise.resolve({});if(on.length){const Yn=new AbortController;this.inFlightDependencies.push(Yn),Sr=je.sendAsync({type:"GI",data:{icons:on,source:this.source,tileID:this.tileID,type:"patterns"}},Yn)}const[Hn,xr,qr]=yield Promise.all([tn,Fn,Sr]),Bn=new p(Hn),$n=new l.ct(xr,qr);for(const Yn in dt){const Qr=dt[Yn];Qr instanceof l.a6?(x(Qr.layers,this.zoom,f),l.cu({bucket:Qr,glyphMap:Hn,glyphPositions:Bn.positions,imageMap:xr,imagePositions:$n.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Qt.subdivisionGranularity})):Qr.hasPattern&&(Qr instanceof l.cv||Qr instanceof l.cw||Qr instanceof l.cx)&&(x(Qr.layers,this.zoom,f),Qr.addFeatures(Qt,this.tileID.canonical,$n.patternPositions))}return this.status="done",{buckets:Object.values(dt).filter(Yn=>!Yn.isEmpty()),featureIndex:ut,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Bn.image,imageAtlas:$n,glyphMap:this.returnDependencies?Hn:null,iconMap:this.returnDependencies?xr:null,glyphPositions:this.returnDependencies?Bn.positions:null}})}}function x($e,ae,Ce){const f=new l.C(ae);for(const je of $e)je.recalculate(f,Ce)}class B{constructor(ae,Ce,f){this.actor=ae,this.layerIndex=Ce,this.availableImages=f,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,Ce){return l._(this,void 0,void 0,function*(){const f=yield l.n(ae.request,Ce);try{return{vectorTile:new l.cy.VectorTile(new l.cz(f.data)),rawData:f.data,cacheControl:f.cacheControl,expires:f.expires}}catch(je){const qe=new Uint8Array(f.data);let Je=`Unable to parse the tile at ${ae.request.url}, `;throw Je+=qe[0]===31&&qe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${je.message}`,new Error(Je)}})}loadTile(ae){return l._(this,void 0,void 0,function*(){const Ce=ae.uid,f=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new l.cA(ae.request),je=new v(ae);this.loading[Ce]=je;const qe=new AbortController;je.abort=qe;try{const Je=yield this.loadVectorTile(ae,qe);if(delete this.loading[Ce],!Je)return null;const ut=Je.rawData,dt={};Je.expires&&(dt.expires=Je.expires),Je.cacheControl&&(dt.cacheControl=Je.cacheControl);const Qt={};if(f){const jt=f.finish();jt&&(Qt.resourceTiming=JSON.parse(JSON.stringify(jt)))}je.vectorTile=Je.vectorTile;const Wt=je.parse(Je.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[Ce]=je,this.fetching[Ce]={rawTileData:ut,cacheControl:dt,resourceTiming:Qt};try{const jt=yield Wt;return l.e({rawTileData:ut.slice(0)},jt,dt,Qt)}finally{delete this.fetching[Ce]}}catch(Je){throw delete this.loading[Ce],je.status="done",this.loaded[Ce]=je,Je}})}reloadTile(ae){return l._(this,void 0,void 0,function*(){const Ce=ae.uid;if(!this.loaded||!this.loaded[Ce])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const f=this.loaded[Ce];if(f.showCollisionBoxes=ae.showCollisionBoxes,f.status==="parsing"){const je=yield f.parse(f.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let qe;if(this.fetching[Ce]){const{rawTileData:Je,cacheControl:ut,resourceTiming:dt}=this.fetching[Ce];delete this.fetching[Ce],qe=l.e({rawTileData:Je.slice(0)},je,ut,dt)}else qe=je;return qe}if(f.status==="done"&&f.vectorTile)return f.parse(f.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)})}abortTile(ae){return l._(this,void 0,void 0,function*(){const Ce=this.loading,f=ae.uid;Ce&&Ce[f]&&Ce[f].abort&&(Ce[f].abort.abort(),delete Ce[f])})}removeTile(ae){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class T{constructor(){this.loaded={}}loadTile(ae){return l._(this,void 0,void 0,function*(){const{uid:Ce,encoding:f,rawImageData:je,redFactor:qe,greenFactor:Je,blueFactor:ut,baseShift:dt}=ae,Qt=je.width+2,Wt=je.height+2,jt=l.b(je)?new l.R({width:Qt,height:Wt},yield l.cB(je,-1,-1,Qt,Wt)):je,tn=new l.cC(Ce,jt,f,qe,Je,ut,dt);return this.loaded=this.loaded||{},this.loaded[Ce]=tn,tn})}removeTile(ae){const Ce=this.loaded,f=ae.uid;Ce&&Ce[f]&&delete Ce[f]}}var P,U,j=function(){if(U)return P;function $e(Ce,f){if(Ce.length!==0){ae(Ce[0],f);for(var je=1;je<Ce.length;je++)ae(Ce[je],!f)}}function ae(Ce,f){for(var je=0,qe=0,Je=0,ut=Ce.length,dt=ut-1;Je<ut;dt=Je++){var Qt=(Ce[Je][0]-Ce[dt][0])*(Ce[dt][1]+Ce[Je][1]),Wt=je+Qt;qe+=Math.abs(je)>=Math.abs(Qt)?je-Wt+Qt:Qt-Wt+je,je=Wt}je+qe>=0!=!!f&&Ce.reverse()}return U=1,P=function Ce(f,je){var qe,Je=f&&f.type;if(Je==="FeatureCollection")for(qe=0;qe<f.features.length;qe++)Ce(f.features[qe],je);else if(Je==="GeometryCollection")for(qe=0;qe<f.geometries.length;qe++)Ce(f.geometries[qe],je);else if(Je==="Feature")Ce(f.geometry,je);else if(Je==="Polygon")$e(f.coordinates,je);else if(Je==="MultiPolygon")for(qe=0;qe<f.coordinates.length;qe++)$e(f.coordinates[qe],je);return f}}(),N=l.cD(j);const q=l.cy.VectorTileFeature.prototype.toGeoJSON;class H{constructor(ae){this._feature=ae,this.extent=l.Z,this.type=ae.type,this.properties=ae.tags,"id"in ae&&!isNaN(ae.id)&&(this.id=parseInt(ae.id,10))}loadGeometry(){if(this._feature.type===1){const ae=[];for(const Ce of this._feature.geometry)ae.push([new l.P(Ce[0],Ce[1])]);return ae}{const ae=[];for(const Ce of this._feature.geometry){const f=[];for(const je of Ce)f.push(new l.P(je[0],je[1]));ae.push(f)}return ae}}toGeoJSON(ae,Ce,f){return q.call(this,ae,Ce,f)}}class oe{constructor(ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.Z,this.length=ae.length,this._features=ae}feature(ae){return new H(this._features[ae])}}var te,V,ne,W={exports:{}},ie=function(){if(ne)return W.exports;ne=1;var $e=l.cG(),ae=function(){if(V)return te;V=1;var Wt=l.cE(),jt=l.cF().VectorTileFeature;function tn(Fn,on){this.options=on||{},this.features=Fn,this.length=Fn.length}function Dn(Fn,on){this.id=typeof Fn.id=="number"?Fn.id:void 0,this.type=Fn.type,this.rawGeometry=Fn.type===1?[Fn.geometry]:Fn.geometry,this.properties=Fn.tags,this.extent=on||4096}return te=tn,tn.prototype.feature=function(Fn){return new Dn(this.features[Fn],this.options.extent)},Dn.prototype.loadGeometry=function(){var Fn=this.rawGeometry;this.geometry=[];for(var on=0;on<Fn.length;on++){for(var Sr=Fn[on],Hn=[],xr=0;xr<Sr.length;xr++)Hn.push(new Wt(Sr[xr][0],Sr[xr][1]));this.geometry.push(Hn)}return this.geometry},Dn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Fn=this.geometry,on=1/0,Sr=-1/0,Hn=1/0,xr=-1/0,qr=0;qr<Fn.length;qr++)for(var Bn=Fn[qr],$n=0;$n<Bn.length;$n++){var Yn=Bn[$n];on=Math.min(on,Yn.x),Sr=Math.max(Sr,Yn.x),Hn=Math.min(Hn,Yn.y),xr=Math.max(xr,Yn.y)}return[on,Hn,Sr,xr]},Dn.prototype.toGeoJSON=jt.prototype.toGeoJSON,te}();function Ce(Wt){var jt=new $e;return function(tn,Dn){for(var Fn in tn.layers)Dn.writeMessage(3,f,tn.layers[Fn])}(Wt,jt),jt.finish()}function f(Wt,jt){var tn;jt.writeVarintField(15,Wt.version||1),jt.writeStringField(1,Wt.name||""),jt.writeVarintField(5,Wt.extent||4096);var Dn={keys:[],values:[],keycache:{},valuecache:{}};for(tn=0;tn<Wt.length;tn++)Dn.feature=Wt.feature(tn),jt.writeMessage(2,je,Dn);var Fn=Dn.keys;for(tn=0;tn<Fn.length;tn++)jt.writeStringField(3,Fn[tn]);var on=Dn.values;for(tn=0;tn<on.length;tn++)jt.writeMessage(4,Qt,on[tn])}function je(Wt,jt){var tn=Wt.feature;tn.id!==void 0&&jt.writeVarintField(1,tn.id),jt.writeMessage(2,qe,Wt),jt.writeVarintField(3,tn.type),jt.writeMessage(4,dt,tn)}function qe(Wt,jt){var tn=Wt.feature,Dn=Wt.keys,Fn=Wt.values,on=Wt.keycache,Sr=Wt.valuecache;for(var Hn in tn.properties){var xr=tn.properties[Hn],qr=on[Hn];if(xr!==null){qr===void 0&&(Dn.push(Hn),on[Hn]=qr=Dn.length-1),jt.writeVarint(qr);var Bn=typeof xr;Bn!=="string"&&Bn!=="boolean"&&Bn!=="number"&&(xr=JSON.stringify(xr));var $n=Bn+":"+xr,Yn=Sr[$n];Yn===void 0&&(Fn.push(xr),Sr[$n]=Yn=Fn.length-1),jt.writeVarint(Yn)}}}function Je(Wt,jt){return(jt<<3)+(7&Wt)}function ut(Wt){return Wt<<1^Wt>>31}function dt(Wt,jt){for(var tn=Wt.loadGeometry(),Dn=Wt.type,Fn=0,on=0,Sr=tn.length,Hn=0;Hn<Sr;Hn++){var xr=tn[Hn],qr=1;Dn===1&&(qr=xr.length),jt.writeVarint(Je(1,qr));for(var Bn=Dn===3?xr.length-1:xr.length,$n=0;$n<Bn;$n++){$n===1&&Dn!==1&&jt.writeVarint(Je(2,Bn-1));var Yn=xr[$n].x-Fn,Qr=xr[$n].y-on;jt.writeVarint(ut(Yn)),jt.writeVarint(ut(Qr)),Fn+=Yn,on+=Qr}Dn===3&&jt.writeVarint(Je(7,1))}}function Qt(Wt,jt){var tn=typeof Wt;tn==="string"?jt.writeStringField(1,Wt):tn==="boolean"?jt.writeBooleanField(7,Wt):tn==="number"&&(Wt%1!=0?jt.writeDoubleField(3,Wt):Wt<0?jt.writeSVarintField(6,Wt):jt.writeVarintField(5,Wt))}return W.exports=Ce,W.exports.fromVectorTileJs=Ce,W.exports.fromGeojsonVt=function(Wt,jt){jt=jt||{};var tn={};for(var Dn in Wt)tn[Dn]=new ae(Wt[Dn].features,jt),tn[Dn].name=Dn,tn[Dn].version=jt.version,tn[Dn].extent=jt.extent;return Ce({layers:tn})},W.exports.GeoJSONWrapper=ae,W.exports}(),he=l.cD(ie);const fe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:$e=>$e},Ee=Math.fround||(me=new Float32Array(1),$e=>(me[0]=+$e,me[0]));var me;const Me=3,De=5,xe=6;class At{constructor(ae){this.options=Object.assign(Object.create(fe),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:Ce,minZoom:f,maxZoom:je}=this.options;Ce&&console.time("total time");const qe=`prepare ${ae.length} points`;Ce&&console.time(qe),this.points=ae;const Je=[];for(let dt=0;dt<ae.length;dt++){const Qt=ae[dt];if(!Qt.geometry)continue;const[Wt,jt]=Qt.geometry.coordinates,tn=Ee(Ne(Wt)),Dn=Ee(Se(jt));Je.push(tn,Dn,1/0,dt,-1,1),this.options.reduce&&Je.push(0)}let ut=this.trees[je+1]=this._createTree(Je);Ce&&console.timeEnd(qe);for(let dt=je;dt>=f;dt--){const Qt=+Date.now();ut=this.trees[dt]=this._createTree(this._cluster(ut,dt)),Ce&&console.log("z%d: %d clusters in %dms",dt,ut.numItems,+Date.now()-Qt)}return Ce&&console.timeEnd("total time"),this}getClusters(ae,Ce){let f=((ae[0]+180)%360+360)%360-180;const je=Math.max(-90,Math.min(90,ae[1]));let qe=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const Je=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)f=-180,qe=180;else if(f>qe){const jt=this.getClusters([f,je,180,Je],Ce),tn=this.getClusters([-180,je,qe,Je],Ce);return jt.concat(tn)}const ut=this.trees[this._limitZoom(Ce)],dt=ut.range(Ne(f),Se(Je),Ne(qe),Se(je)),Qt=ut.data,Wt=[];for(const jt of dt){const tn=this.stride*jt;Wt.push(Qt[tn+De]>1?Ze(Qt,tn,this.clusterProps):this.points[Qt[tn+Me]])}return Wt}getChildren(ae){const Ce=this._getOriginId(ae),f=this._getOriginZoom(ae),je="No cluster with the specified id.",qe=this.trees[f];if(!qe)throw new Error(je);const Je=qe.data;if(Ce*this.stride>=Je.length)throw new Error(je);const ut=this.options.radius/(this.options.extent*Math.pow(2,f-1)),dt=qe.within(Je[Ce*this.stride],Je[Ce*this.stride+1],ut),Qt=[];for(const Wt of dt){const jt=Wt*this.stride;Je[jt+4]===ae&&Qt.push(Je[jt+De]>1?Ze(Je,jt,this.clusterProps):this.points[Je[jt+Me]])}if(Qt.length===0)throw new Error(je);return Qt}getLeaves(ae,Ce,f){const je=[];return this._appendLeaves(je,ae,Ce=Ce||10,f=f||0,0),je}getTile(ae,Ce,f){const je=this.trees[this._limitZoom(ae)],qe=Math.pow(2,ae),{extent:Je,radius:ut}=this.options,dt=ut/Je,Qt=(f-dt)/qe,Wt=(f+1+dt)/qe,jt={features:[]};return this._addTileFeatures(je.range((Ce-dt)/qe,Qt,(Ce+1+dt)/qe,Wt),je.data,Ce,f,qe,jt),Ce===0&&this._addTileFeatures(je.range(1-dt/qe,Qt,1,Wt),je.data,qe,f,qe,jt),Ce===qe-1&&this._addTileFeatures(je.range(0,Qt,dt/qe,Wt),je.data,-1,f,qe,jt),jt.features.length?jt:null}getClusterExpansionZoom(ae){let Ce=this._getOriginZoom(ae)-1;for(;Ce<=this.options.maxZoom;){const f=this.getChildren(ae);if(Ce++,f.length!==1)break;ae=f[0].properties.cluster_id}return Ce}_appendLeaves(ae,Ce,f,je,qe){const Je=this.getChildren(Ce);for(const ut of Je){const dt=ut.properties;if(dt&&dt.cluster?qe+dt.point_count<=je?qe+=dt.point_count:qe=this._appendLeaves(ae,dt.cluster_id,f,je,qe):qe<je?qe++:ae.push(ut),ae.length===f)break}return qe}_createTree(ae){const Ce=new l.aC(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let f=0;f<ae.length;f+=this.stride)Ce.add(ae[f],ae[f+1]);return Ce.finish(),Ce.data=ae,Ce}_addTileFeatures(ae,Ce,f,je,qe,Je){for(const ut of ae){const dt=ut*this.stride,Qt=Ce[dt+De]>1;let Wt,jt,tn;if(Qt)Wt=Xe(Ce,dt,this.clusterProps),jt=Ce[dt],tn=Ce[dt+1];else{const on=this.points[Ce[dt+Me]];Wt=on.properties;const[Sr,Hn]=on.geometry.coordinates;jt=Ne(Sr),tn=Se(Hn)}const Dn={type:1,geometry:[[Math.round(this.options.extent*(jt*qe-f)),Math.round(this.options.extent*(tn*qe-je))]],tags:Wt};let Fn;Fn=Qt||this.options.generateId?Ce[dt+Me]:this.points[Ce[dt+Me]].id,Fn!==void 0&&(Dn.id=Fn),Je.features.push(Dn)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,Ce){const{radius:f,extent:je,reduce:qe,minPoints:Je}=this.options,ut=f/(je*Math.pow(2,Ce)),dt=ae.data,Qt=[],Wt=this.stride;for(let jt=0;jt<dt.length;jt+=Wt){if(dt[jt+2]<=Ce)continue;dt[jt+2]=Ce;const tn=dt[jt],Dn=dt[jt+1],Fn=ae.within(dt[jt],dt[jt+1],ut),on=dt[jt+De];let Sr=on;for(const Hn of Fn){const xr=Hn*Wt;dt[xr+2]>Ce&&(Sr+=dt[xr+De])}if(Sr>on&&Sr>=Je){let Hn,xr=tn*on,qr=Dn*on,Bn=-1;const $n=((jt/Wt|0)<<5)+(Ce+1)+this.points.length;for(const Yn of Fn){const Qr=Yn*Wt;if(dt[Qr+2]<=Ce)continue;dt[Qr+2]=Ce;const co=dt[Qr+De];xr+=dt[Qr]*co,qr+=dt[Qr+1]*co,dt[Qr+4]=$n,qe&&(Hn||(Hn=this._map(dt,jt,!0),Bn=this.clusterProps.length,this.clusterProps.push(Hn)),qe(Hn,this._map(dt,Qr)))}dt[jt+4]=$n,Qt.push(xr/Sr,qr/Sr,1/0,$n,-1,Sr),qe&&Qt.push(Bn)}else{for(let Hn=0;Hn<Wt;Hn++)Qt.push(dt[jt+Hn]);if(Sr>1)for(const Hn of Fn){const xr=Hn*Wt;if(!(dt[xr+2]<=Ce)){dt[xr+2]=Ce;for(let qr=0;qr<Wt;qr++)Qt.push(dt[xr+qr])}}}}return Qt}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,Ce,f){if(ae[Ce+De]>1){const Je=this.clusterProps[ae[Ce+xe]];return f?Object.assign({},Je):Je}const je=this.points[ae[Ce+Me]].properties,qe=this.options.map(je);return f&&qe===je?Object.assign({},qe):qe}}function Ze($e,ae,Ce){return{type:"Feature",id:$e[ae+Me],properties:Xe($e,ae,Ce),geometry:{type:"Point",coordinates:[(f=$e[ae],360*(f-.5)),Re($e[ae+1])]}};var f}function Xe($e,ae,Ce){const f=$e[ae+De],je=f>=1e4?`${Math.round(f/1e3)}k`:f>=1e3?Math.round(f/100)/10+"k":f,qe=$e[ae+xe],Je=qe===-1?{}:Object.assign({},Ce[qe]);return Object.assign(Je,{cluster:!0,cluster_id:$e[ae+Me],point_count:f,point_count_abbreviated:je})}function Ne($e){return $e/360+.5}function Se($e){const ae=Math.sin($e*Math.PI/180),Ce=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function Re($e){const ae=(180-360*$e)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function He($e,ae,Ce,f){let je=f;const qe=ae+(Ce-ae>>1);let Je,ut=Ce-ae;const dt=$e[ae],Qt=$e[ae+1],Wt=$e[Ce],jt=$e[Ce+1];for(let tn=ae+3;tn<Ce;tn+=3){const Dn=_t($e[tn],$e[tn+1],dt,Qt,Wt,jt);if(Dn>je)Je=tn,je=Dn;else if(Dn===je){const Fn=Math.abs(tn-qe);Fn<ut&&(Je=tn,ut=Fn)}}je>f&&(Je-ae>3&&He($e,ae,Je,f),$e[Je+2]=je,Ce-Je>3&&He($e,Je,Ce,f))}function _t($e,ae,Ce,f,je,qe){let Je=je-Ce,ut=qe-f;if(Je!==0||ut!==0){const dt=(($e-Ce)*Je+(ae-f)*ut)/(Je*Je+ut*ut);dt>1?(Ce=je,f=qe):dt>0&&(Ce+=Je*dt,f+=ut*dt)}return Je=$e-Ce,ut=ae-f,Je*Je+ut*ut}function Gt($e,ae,Ce,f){const je={id:$e??null,type:ae,geometry:Ce,tags:f,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")yt(je,Ce);else if(ae==="Polygon")yt(je,Ce[0]);else if(ae==="MultiLineString")for(const qe of Ce)yt(je,qe);else if(ae==="MultiPolygon")for(const qe of Ce)yt(je,qe[0]);return je}function yt($e,ae){for(let Ce=0;Ce<ae.length;Ce+=3)$e.minX=Math.min($e.minX,ae[Ce]),$e.minY=Math.min($e.minY,ae[Ce+1]),$e.maxX=Math.max($e.maxX,ae[Ce]),$e.maxY=Math.max($e.maxY,ae[Ce+1])}function Ft($e,ae,Ce,f){if(!ae.geometry)return;const je=ae.geometry.coordinates;if(je&&je.length===0)return;const qe=ae.geometry.type,Je=Math.pow(Ce.tolerance/((1<<Ce.maxZoom)*Ce.extent),2);let ut=[],dt=ae.id;if(Ce.promoteId?dt=ae.properties[Ce.promoteId]:Ce.generateId&&(dt=f||0),qe==="Point")Tt(je,ut);else if(qe==="MultiPoint")for(const Qt of je)Tt(Qt,ut);else if(qe==="LineString")Le(je,ut,Je,!1);else if(qe==="MultiLineString"){if(Ce.lineMetrics){for(const Qt of je)ut=[],Le(Qt,ut,Je,!1),$e.push(Gt(dt,"LineString",ut,ae.properties));return}Pe(je,ut,Je,!1)}else if(qe==="Polygon")Pe(je,ut,Je,!0);else{if(qe!=="MultiPolygon"){if(qe==="GeometryCollection"){for(const Qt of ae.geometry.geometries)Ft($e,{id:dt,geometry:Qt,properties:ae.properties},Ce,f);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Qt of je){const Wt=[];Pe(Qt,Wt,Je,!0),ut.push(Wt)}}$e.push(Gt(dt,qe,ut,ae.properties))}function Tt($e,ae){ae.push(Be($e[0]),it($e[1]),0)}function Le($e,ae,Ce,f){let je,qe,Je=0;for(let dt=0;dt<$e.length;dt++){const Qt=Be($e[dt][0]),Wt=it($e[dt][1]);ae.push(Qt,Wt,0),dt>0&&(Je+=f?(je*Wt-Qt*qe)/2:Math.sqrt(Math.pow(Qt-je,2)+Math.pow(Wt-qe,2))),je=Qt,qe=Wt}const ut=ae.length-3;ae[2]=1,He(ae,0,ut,Ce),ae[ut+2]=1,ae.size=Math.abs(Je),ae.start=0,ae.end=ae.size}function Pe($e,ae,Ce,f){for(let je=0;je<$e.length;je++){const qe=[];Le($e[je],qe,Ce,f),ae.push(qe)}}function Be($e){return $e/360+.5}function it($e){const ae=Math.sin($e*Math.PI/180),Ce=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function Ct($e,ae,Ce,f,je,qe,Je,ut){if(f/=ae,qe>=(Ce/=ae)&&Je<f)return $e;if(Je<Ce||qe>=f)return null;const dt=[];for(const Qt of $e){const Wt=Qt.geometry;let jt=Qt.type;const tn=je===0?Qt.minX:Qt.minY,Dn=je===0?Qt.maxX:Qt.maxY;if(tn>=Ce&&Dn<f){dt.push(Qt);continue}if(Dn<Ce||tn>=f)continue;let Fn=[];if(jt==="Point"||jt==="MultiPoint")ft(Wt,Fn,Ce,f,je);else if(jt==="LineString")Lt(Wt,Fn,Ce,f,je,!1,ut.lineMetrics);else if(jt==="MultiLineString")Rt(Wt,Fn,Ce,f,je,!1);else if(jt==="Polygon")Rt(Wt,Fn,Ce,f,je,!0);else if(jt==="MultiPolygon")for(const on of Wt){const Sr=[];Rt(on,Sr,Ce,f,je,!0),Sr.length&&Fn.push(Sr)}if(Fn.length){if(ut.lineMetrics&&jt==="LineString"){for(const on of Fn)dt.push(Gt(Qt.id,jt,on,Qt.tags));continue}jt!=="LineString"&&jt!=="MultiLineString"||(Fn.length===1?(jt="LineString",Fn=Fn[0]):jt="MultiLineString"),jt!=="Point"&&jt!=="MultiPoint"||(jt=Fn.length===3?"Point":"MultiPoint"),dt.push(Gt(Qt.id,jt,Fn,Qt.tags))}}return dt.length?dt:null}function ft($e,ae,Ce,f,je){for(let qe=0;qe<$e.length;qe+=3){const Je=$e[qe+je];Je>=Ce&&Je<=f&&_n(ae,$e[qe],$e[qe+1],$e[qe+2])}}function Lt($e,ae,Ce,f,je,qe,Je){let ut=Zt($e);const dt=je===0?qn:rn;let Qt,Wt,jt=$e.start;for(let Sr=0;Sr<$e.length-3;Sr+=3){const Hn=$e[Sr],xr=$e[Sr+1],qr=$e[Sr+2],Bn=$e[Sr+3],$n=$e[Sr+4],Yn=je===0?Hn:xr,Qr=je===0?Bn:$n;let co=!1;Je&&(Qt=Math.sqrt(Math.pow(Hn-Bn,2)+Math.pow(xr-$n,2))),Yn<Ce?Qr>Ce&&(Wt=dt(ut,Hn,xr,Bn,$n,Ce),Je&&(ut.start=jt+Qt*Wt)):Yn>f?Qr<f&&(Wt=dt(ut,Hn,xr,Bn,$n,f),Je&&(ut.start=jt+Qt*Wt)):_n(ut,Hn,xr,qr),Qr<Ce&&Yn>=Ce&&(Wt=dt(ut,Hn,xr,Bn,$n,Ce),co=!0),Qr>f&&Yn<=f&&(Wt=dt(ut,Hn,xr,Bn,$n,f),co=!0),!qe&&co&&(Je&&(ut.end=jt+Qt*Wt),ae.push(ut),ut=Zt($e)),Je&&(jt+=Qt)}let tn=$e.length-3;const Dn=$e[tn],Fn=$e[tn+1],on=je===0?Dn:Fn;on>=Ce&&on<=f&&_n(ut,Dn,Fn,$e[tn+2]),tn=ut.length-3,qe&&tn>=3&&(ut[tn]!==ut[0]||ut[tn+1]!==ut[1])&&_n(ut,ut[0],ut[1],ut[2]),ut.length&&ae.push(ut)}function Zt($e){const ae=[];return ae.size=$e.size,ae.start=$e.start,ae.end=$e.end,ae}function Rt($e,ae,Ce,f,je,qe){for(const Je of $e)Lt(Je,ae,Ce,f,je,qe,!1)}function _n($e,ae,Ce,f){$e.push(ae,Ce,f)}function qn($e,ae,Ce,f,je,qe){const Je=(qe-ae)/(f-ae);return _n($e,qe,Ce+(je-Ce)*Je,1),Je}function rn($e,ae,Ce,f,je,qe){const Je=(qe-Ce)/(je-Ce);return _n($e,ae+(f-ae)*Je,qe,1),Je}function ar($e,ae){const Ce=[];for(let f=0;f<$e.length;f++){const je=$e[f],qe=je.type;let Je;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")Je=kn(je.geometry,ae);else if(qe==="MultiLineString"||qe==="Polygon"){Je=[];for(const ut of je.geometry)Je.push(kn(ut,ae))}else if(qe==="MultiPolygon"){Je=[];for(const ut of je.geometry){const dt=[];for(const Qt of ut)dt.push(kn(Qt,ae));Je.push(dt)}}Ce.push(Gt(je.id,qe,Je,je.tags))}return Ce}function kn($e,ae){const Ce=[];Ce.size=$e.size,$e.start!==void 0&&(Ce.start=$e.start,Ce.end=$e.end);for(let f=0;f<$e.length;f+=3)Ce.push($e[f]+ae,$e[f+1],$e[f+2]);return Ce}function mn($e,ae){if($e.transformed)return $e;const Ce=1<<$e.z,f=$e.x,je=$e.y;for(const qe of $e.features){const Je=qe.geometry,ut=qe.type;if(qe.geometry=[],ut===1)for(let dt=0;dt<Je.length;dt+=2)qe.geometry.push(zn(Je[dt],Je[dt+1],ae,Ce,f,je));else for(let dt=0;dt<Je.length;dt++){const Qt=[];for(let Wt=0;Wt<Je[dt].length;Wt+=2)Qt.push(zn(Je[dt][Wt],Je[dt][Wt+1],ae,Ce,f,je));qe.geometry.push(Qt)}}return $e.transformed=!0,$e}function zn($e,ae,Ce,f,je,qe){return[Math.round(Ce*($e*f-je)),Math.round(Ce*(ae*f-qe))]}function br($e,ae,Ce,f,je){const qe=ae===je.maxZoom?0:je.tolerance/((1<<ae)*je.extent),Je={features:[],numPoints:0,numSimplified:0,numFeatures:$e.length,source:null,x:Ce,y:f,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ut of $e)gr(Je,ut,qe,je);return Je}function gr($e,ae,Ce,f){const je=ae.geometry,qe=ae.type,Je=[];if($e.minX=Math.min($e.minX,ae.minX),$e.minY=Math.min($e.minY,ae.minY),$e.maxX=Math.max($e.maxX,ae.maxX),$e.maxY=Math.max($e.maxY,ae.maxY),qe==="Point"||qe==="MultiPoint")for(let ut=0;ut<je.length;ut+=3)Je.push(je[ut],je[ut+1]),$e.numPoints++,$e.numSimplified++;else if(qe==="LineString")tr(Je,je,$e,Ce,!1,!1);else if(qe==="MultiLineString"||qe==="Polygon")for(let ut=0;ut<je.length;ut++)tr(Je,je[ut],$e,Ce,qe==="Polygon",ut===0);else if(qe==="MultiPolygon")for(let ut=0;ut<je.length;ut++){const dt=je[ut];for(let Qt=0;Qt<dt.length;Qt++)tr(Je,dt[Qt],$e,Ce,!0,Qt===0)}if(Je.length){let ut=ae.tags||null;if(qe==="LineString"&&f.lineMetrics){ut={};for(const Qt in ae.tags)ut[Qt]=ae.tags[Qt];ut.mapbox_clip_start=je.start/je.size,ut.mapbox_clip_end=je.end/je.size}const dt={geometry:Je,type:qe==="Polygon"||qe==="MultiPolygon"?3:qe==="LineString"||qe==="MultiLineString"?2:1,tags:ut};ae.id!==null&&(dt.id=ae.id),$e.features.push(dt)}}function tr($e,ae,Ce,f,je,qe){const Je=f*f;if(f>0&&ae.size<(je?Je:f))return void(Ce.numPoints+=ae.length/3);const ut=[];for(let dt=0;dt<ae.length;dt+=3)(f===0||ae[dt+2]>Je)&&(Ce.numSimplified++,ut.push(ae[dt],ae[dt+1])),Ce.numPoints++;je&&function(dt,Qt){let Wt=0;for(let jt=0,tn=dt.length,Dn=tn-2;jt<tn;Dn=jt,jt+=2)Wt+=(dt[jt]-dt[Dn])*(dt[jt+1]+dt[Dn+1]);if(Wt>0===Qt)for(let jt=0,tn=dt.length;jt<tn/2;jt+=2){const Dn=dt[jt],Fn=dt[jt+1];dt[jt]=dt[tn-2-jt],dt[jt+1]=dt[tn-1-jt],dt[tn-2-jt]=Dn,dt[tn-1-jt]=Fn}}(ut,qe),$e.push(ut)}const Ge={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ce{constructor(ae,Ce){const f=(Ce=this.options=function(qe,Je){for(const ut in Je)qe[ut]=Je[ut];return qe}(Object.create(Ge),Ce)).debug;if(f&&console.time("preprocess data"),Ce.maxZoom<0||Ce.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ce.promoteId&&Ce.generateId)throw new Error("promoteId and generateId cannot be used together.");let je=function(qe,Je){const ut=[];if(qe.type==="FeatureCollection")for(let dt=0;dt<qe.features.length;dt++)Ft(ut,qe.features[dt],Je,dt);else Ft(ut,qe.type==="Feature"?qe:{geometry:qe},Je);return ut}(ae,Ce);this.tiles={},this.tileCoords=[],f&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ce.indexMaxZoom,Ce.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),je=function(qe,Je){const ut=Je.buffer/Je.extent;let dt=qe;const Qt=Ct(qe,1,-1-ut,ut,0,-1,2,Je),Wt=Ct(qe,1,1-ut,2+ut,0,-1,2,Je);return(Qt||Wt)&&(dt=Ct(qe,1,-ut,1+ut,0,-1,2,Je)||[],Qt&&(dt=ar(Qt,1).concat(dt)),Wt&&(dt=dt.concat(ar(Wt,-1)))),dt}(je,Ce),je.length&&this.splitTile(je,0,0,0),f&&(je.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,Ce,f,je,qe,Je,ut){const dt=[ae,Ce,f,je],Qt=this.options,Wt=Qt.debug;for(;dt.length;){je=dt.pop(),f=dt.pop(),Ce=dt.pop(),ae=dt.pop();const jt=1<<Ce,tn=pe(Ce,f,je);let Dn=this.tiles[tn];if(!Dn&&(Wt>1&&console.time("creation"),Dn=this.tiles[tn]=br(ae,Ce,f,je,Qt),this.tileCoords.push({z:Ce,x:f,y:je}),Wt)){Wt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ce,f,je,Dn.numFeatures,Dn.numPoints,Dn.numSimplified),console.timeEnd("creation"));const co=`z${Ce}`;this.stats[co]=(this.stats[co]||0)+1,this.total++}if(Dn.source=ae,qe==null){if(Ce===Qt.indexMaxZoom||Dn.numPoints<=Qt.indexMaxPoints)continue}else{if(Ce===Qt.maxZoom||Ce===qe)continue;if(qe!=null){const co=qe-Ce;if(f!==Je>>co||je!==ut>>co)continue}}if(Dn.source=null,ae.length===0)continue;Wt>1&&console.time("clipping");const Fn=.5*Qt.buffer/Qt.extent,on=.5-Fn,Sr=.5+Fn,Hn=1+Fn;let xr=null,qr=null,Bn=null,$n=null,Yn=Ct(ae,jt,f-Fn,f+Sr,0,Dn.minX,Dn.maxX,Qt),Qr=Ct(ae,jt,f+on,f+Hn,0,Dn.minX,Dn.maxX,Qt);ae=null,Yn&&(xr=Ct(Yn,jt,je-Fn,je+Sr,1,Dn.minY,Dn.maxY,Qt),qr=Ct(Yn,jt,je+on,je+Hn,1,Dn.minY,Dn.maxY,Qt),Yn=null),Qr&&(Bn=Ct(Qr,jt,je-Fn,je+Sr,1,Dn.minY,Dn.maxY,Qt),$n=Ct(Qr,jt,je+on,je+Hn,1,Dn.minY,Dn.maxY,Qt),Qr=null),Wt>1&&console.timeEnd("clipping"),dt.push(xr||[],Ce+1,2*f,2*je),dt.push(qr||[],Ce+1,2*f,2*je+1),dt.push(Bn||[],Ce+1,2*f+1,2*je),dt.push($n||[],Ce+1,2*f+1,2*je+1)}}getTile(ae,Ce,f){ae=+ae,Ce=+Ce,f=+f;const je=this.options,{extent:qe,debug:Je}=je;if(ae<0||ae>24)return null;const ut=1<<ae,dt=pe(ae,Ce=Ce+ut&ut-1,f);if(this.tiles[dt])return mn(this.tiles[dt],qe);Je>1&&console.log("drilling down to z%d-%d-%d",ae,Ce,f);let Qt,Wt=ae,jt=Ce,tn=f;for(;!Qt&&Wt>0;)Wt--,jt>>=1,tn>>=1,Qt=this.tiles[pe(Wt,jt,tn)];return Qt&&Qt.source?(Je>1&&(console.log("found parent tile z%d-%d-%d",Wt,jt,tn),console.time("drilling down")),this.splitTile(Qt.source,Wt,jt,tn,ae,Ce,f),Je>1&&console.timeEnd("drilling down"),this.tiles[dt]?mn(this.tiles[dt],qe):null):null}}function pe($e,ae,Ce){return 32*((1<<$e)*Ce+ae)+$e}function rt($e,ae){return ae?$e.properties[ae]:$e.id}function St($e,ae){if($e==null)return!0;if($e.type==="Feature")return rt($e,ae)!=null;if($e.type==="FeatureCollection"){const Ce=new Set;for(const f of $e.features){const je=rt(f,ae);if(je==null||Ce.has(je))return!1;Ce.add(je)}return!0}return!1}function Ht($e,ae){const Ce=new Map;if($e!=null)if($e.type==="Feature")Ce.set(rt($e,ae),$e);else for(const f of $e.features)Ce.set(rt(f,ae),f);return Ce}class sn extends B{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,Ce){return l._(this,void 0,void 0,function*(){const f=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const je=this._geoJSONIndex.getTile(f.z,f.x,f.y);if(!je)return null;const qe=new oe(je.features);let Je=he(qe);return Je.byteOffset===0&&Je.byteLength===Je.buffer.byteLength||(Je=new Uint8Array(Je)),{vectorTile:qe,rawData:Je.buffer}})}loadData(ae){return l._(this,void 0,void 0,function*(){var Ce;(Ce=this._pendingRequest)===null||Ce===void 0||Ce.abort();const f=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new l.cA(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest),this._geoJSONIndex=ae.cluster?new At(function({superclusterOptions:Je,clusterProperties:ut}){if(!ut||!Je)return Je;const dt={},Qt={},Wt={accumulated:null,zoom:0},jt={properties:null},tn=Object.keys(ut);for(const Dn of tn){const[Fn,on]=ut[Dn],Sr=l.cH(on),Hn=l.cH(typeof Fn=="string"?[Fn,["accumulated"],["get",Dn]]:Fn);dt[Dn]=Sr.value,Qt[Dn]=Hn.value}return Je.map=Dn=>{jt.properties=Dn;const Fn={};for(const on of tn)Fn[on]=dt[on].evaluate(Wt,jt);return Fn},Je.reduce=(Dn,Fn)=>{jt.properties=Fn;for(const on of tn)Wt.accumulated=Dn[on],Dn[on]=Qt[on].evaluate(Wt,jt)},Je}(ae)).load((yield this._pendingData).features):(je=yield this._pendingData,new ce(je,ae.geojsonVtOptions)),this.loaded={};const qe={};if(f){const Je=f.finish();Je&&(qe.resourceTiming={},qe.resourceTiming[ae.source]=JSON.parse(JSON.stringify(Je)))}return qe}catch(qe){if(delete this._pendingRequest,l.cl(qe))return{abandoned:!0};throw qe}var je})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const Ce=this.loaded;return Ce&&Ce[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,Ce){return l._(this,void 0,void 0,function*(){let f=yield this.loadGeoJSON(ae,Ce);if(delete this._pendingRequest,typeof f!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(N(f,!0),ae.filter){const je=l.cH(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(je.result==="error")throw new Error(je.value.map(Je=>`${Je.key}: ${Je.message}`).join(", "));f={type:"FeatureCollection",features:f.features.filter(Je=>je.value.evaluate({zoom:0},Je))}}return f})}loadGeoJSON(ae,Ce){return l._(this,void 0,void 0,function*(){const{promoteId:f}=ae;if(ae.request){const je=yield l.j(ae.request,Ce);return this._dataUpdateable=St(je.data,f)?Ht(je.data,f):void 0,je.data}if(typeof ae.data=="string")try{const je=JSON.parse(ae.data);return this._dataUpdateable=St(je,f)?Ht(je,f):void 0,je}catch{throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return function(je,qe,Je){var ut,dt,Qt,Wt;if(qe.removeAll&&je.clear(),qe.remove)for(const jt of qe.remove)je.delete(jt);if(qe.add)for(const jt of qe.add){const tn=rt(jt,Je);tn!=null&&je.set(tn,jt)}if(qe.update)for(const jt of qe.update){let tn=je.get(jt.id);if(tn==null)continue;const Dn=!jt.removeAllProperties&&(((ut=jt.removeProperties)===null||ut===void 0?void 0:ut.length)>0||((dt=jt.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0);if((jt.newGeometry||jt.removeAllProperties||Dn)&&(tn=Object.assign({},tn),je.set(jt.id,tn),Dn&&(tn.properties=Object.assign({},tn.properties))),jt.newGeometry&&(tn.geometry=jt.newGeometry),jt.removeAllProperties)tn.properties={};else if(((Qt=jt.removeProperties)===null||Qt===void 0?void 0:Qt.length)>0)for(const Fn of jt.removeProperties)Object.prototype.hasOwnProperty.call(tn.properties,Fn)&&delete tn.properties[Fn];if(((Wt=jt.addOrUpdateProperties)===null||Wt===void 0?void 0:Wt.length)>0)for(const{key:Fn,value:on}of jt.addOrUpdateProperties)tn.properties[Fn]=on}}(this._dataUpdateable,ae.dataDiff,f),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class nr{constructor(ae){this.self=ae,this.actor=new l.H(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(Ce,f)=>{if(this.externalWorkerSourceTypes[Ce])throw new Error(`Worker source with name "${Ce}" already registered.`);this.externalWorkerSourceTypes[Ce]=f},this.self.addProtocol=l.cn,this.self.removeProtocol=l.co,this.self.registerRTLTextPlugin=Ce=>{l.cI.setMethods(Ce)},this.actor.registerMessageHandler("LDT",(Ce,f)=>this._getDEMWorkerSource(Ce,f.source).loadTile(f)),this.actor.registerMessageHandler("RDT",(Ce,f)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(Ce,f.source).removeTile(f)})),this.actor.registerMessageHandler("GCEZ",(Ce,f)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(Ce,f.type,f.source).getClusterExpansionZoom(f)})),this.actor.registerMessageHandler("GCC",(Ce,f)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(Ce,f.type,f.source).getClusterChildren(f)})),this.actor.registerMessageHandler("GCL",(Ce,f)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(Ce,f.type,f.source).getClusterLeaves(f)})),this.actor.registerMessageHandler("LD",(Ce,f)=>this._getWorkerSource(Ce,f.type,f.source).loadData(f)),this.actor.registerMessageHandler("GD",(Ce,f)=>this._getWorkerSource(Ce,f.type,f.source).getData()),this.actor.registerMessageHandler("LT",(Ce,f)=>this._getWorkerSource(Ce,f.type,f.source).loadTile(f)),this.actor.registerMessageHandler("RT",(Ce,f)=>this._getWorkerSource(Ce,f.type,f.source).reloadTile(f)),this.actor.registerMessageHandler("AT",(Ce,f)=>this._getWorkerSource(Ce,f.type,f.source).abortTile(f)),this.actor.registerMessageHandler("RMT",(Ce,f)=>this._getWorkerSource(Ce,f.type,f.source).removeTile(f)),this.actor.registerMessageHandler("RS",(Ce,f)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[Ce]||!this.workerSources[Ce][f.type]||!this.workerSources[Ce][f.type][f.source])return;const je=this.workerSources[Ce][f.type][f.source];delete this.workerSources[Ce][f.type][f.source],je.removeSource!==void 0&&je.removeSource(f)})),this.actor.registerMessageHandler("RM",Ce=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[Ce],delete this.availableImages[Ce],delete this.workerSources[Ce],delete this.demWorkerSources[Ce]})),this.actor.registerMessageHandler("SR",(Ce,f)=>l._(this,void 0,void 0,function*(){this.referrer=f})),this.actor.registerMessageHandler("SRPS",(Ce,f)=>this._syncRTLPluginState(Ce,f)),this.actor.registerMessageHandler("IS",(Ce,f)=>l._(this,void 0,void 0,function*(){this.self.importScripts(f)})),this.actor.registerMessageHandler("SI",(Ce,f)=>this._setImages(Ce,f)),this.actor.registerMessageHandler("UL",(Ce,f)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(Ce).update(f.layers,f.removedIds)})),this.actor.registerMessageHandler("SL",(Ce,f)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(Ce).replace(f)}))}_setImages(ae,Ce){return l._(this,void 0,void 0,function*(){this.availableImages[ae]=Ce;for(const f in this.workerSources[ae]){const je=this.workerSources[ae][f];for(const qe in je)je[qe].availableImages=Ce}})}_syncRTLPluginState(ae,Ce){return l._(this,void 0,void 0,function*(){return yield l.cI.syncState(Ce,this.self.importScripts)})}_getAvailableImages(ae){let Ce=this.availableImages[ae];return Ce||(Ce=[]),Ce}_getLayerIndex(ae){let Ce=this.layerIndexes[ae];return Ce||(Ce=this.layerIndexes[ae]=new o),Ce}_getWorkerSource(ae,Ce,f){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][Ce]||(this.workerSources[ae][Ce]={}),!this.workerSources[ae][Ce][f]){const je={sendAsync:(qe,Je)=>(qe.targetMapId=ae,this.actor.sendAsync(qe,Je))};switch(Ce){case"vector":this.workerSources[ae][Ce][f]=new B(je,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][Ce][f]=new sn(je,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][Ce][f]=new this.externalWorkerSourceTypes[Ce](je,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][Ce][f]}_getDEMWorkerSource(ae,Ce){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][Ce]||(this.demWorkerSources[ae][Ce]=new T),this.demWorkerSources[ae][Ce]}}return l.i(self)&&(self.worker=new nr(self)),nr}),i("index",["exports","./shared"],function(l,o){var p="5.3.0";function v(){var O=new o.A(4);return o.A!=Float32Array&&(O[1]=0,O[2]=0),O[0]=1,O[3]=1,O}let x,B;const T={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(O,a,c){const C=requestAnimationFrame(k=>{M(),a(k)}),{unsubscribe:M}=o.s(O.signal,"abort",()=>{M(),cancelAnimationFrame(C),c(o.c())},!1)},frameAsync(O){return new Promise((a,c)=>{this.frame(O,a,c)})},getImageData(O,a=0){return this.getImageCanvasContext(O).getImageData(-a,-a,O.width+2*a,O.height+2*a)},getImageCanvasContext(O){const a=window.document.createElement("canvas"),c=a.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return a.width=O.width,a.height=O.height,c.drawImage(O,0,0,O.width,O.height),c},resolveURL:O=>(x||(x=document.createElement("a")),x.href=O,x.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class P{static testProp(a){if(!P.docStyle)return a[0];for(let c=0;c<a.length;c++)if(a[c]in P.docStyle)return a[c];return a[0]}static create(a,c,C){const M=window.document.createElement(a);return c!==void 0&&(M.className=c),C&&C.appendChild(M),M}static createNS(a,c){return window.document.createElementNS(a,c)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(a,c){a.style[P.transformProp]=c}static addEventListener(a,c,C,M={}){a.addEventListener(c,C,"passive"in M?M:M.capture)}static removeEventListener(a,c,C,M={}){a.removeEventListener(c,C,"passive"in M?M:M.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(a){const c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}static getPoint(a,c,C){const M=c.boundingClientRect;return new o.P((C.clientX-M.left)/c.x-a.clientLeft,(C.clientY-M.top)/c.y-a.clientTop)}static mousePos(a,c){const C=P.getScale(a);return P.getPoint(a,C,c)}static touchPos(a,c){const C=[],M=P.getScale(a);for(let k=0;k<c.length;k++)C.push(P.getPoint(a,M,c[k]));return C}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}static sanitize(a){const c=new DOMParser().parseFromString(a,"text/html").body||document.createElement("body"),C=c.querySelectorAll("script");for(const M of C)M.remove();return P.clean(c),c.innerHTML}static isPossiblyDangerous(a,c){const C=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(a)||!C.includes("javascript:")&&!C.includes("data:"))||!!a.startsWith("on")||void 0}static clean(a){const c=a.children;for(const C of c)P.removeAttributes(C),P.clean(C)}static removeAttributes(a){for(const{name:c,value:C}of a.attributes)P.isPossiblyDangerous(c,C)&&a.removeAttribute(c)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const U={supported:!1,testSupport:function(O){!q&&N&&(H?oe(O):j=O)}};let j,N,q=!1,H=!1;function oe(O){const a=O.createTexture();O.bindTexture(O.TEXTURE_2D,a);try{if(O.texImage2D(O.TEXTURE_2D,0,O.RGBA,O.RGBA,O.UNSIGNED_BYTE,N),O.isContextLost())return;U.supported=!0}catch{}O.deleteTexture(a),q=!0}var te;typeof document<"u"&&(N=document.createElement("img"),N.onload=()=>{j&&oe(j),j=null,H=!0},N.onerror=()=>{q=!0,j=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(O){let a,c,C,M;O.resetRequestQueue=()=>{a=[],c=0,C=0,M={}},O.addThrottleControl=J=>{const se=C++;return M[se]=J,se},O.removeThrottleControl=J=>{delete M[J],z()},O.getImage=(J,se,ye=!0)=>new Promise((Te,ke)=>{U.supported&&(J.headers||(J.headers={}),J.headers.accept="image/webp,*/*"),o.e(J,{type:"image"}),a.push({abortController:se,requestParameters:J,supportImageRefresh:ye,state:"queued",onError:Qe=>{ke(Qe)},onSuccess:Qe=>{Te(Qe)}}),z()});const k=J=>o._(this,void 0,void 0,function*(){J.state="running";const{requestParameters:se,supportImageRefresh:ye,onError:Te,onSuccess:ke,abortController:Qe}=J,et=ye===!1&&!o.i(self)&&!o.g(se.url)&&(!se.headers||Object.keys(se.headers).reduce((pt,bt)=>pt&&bt==="accept",!0));c++;const mt=et?Y(se,Qe):o.m(se,Qe);try{const pt=yield mt;delete J.abortController,J.state="completed",pt.data instanceof HTMLImageElement||o.b(pt.data)?ke(pt):pt.data&&ke({data:yield(lt=pt.data,typeof createImageBitmap=="function"?o.f(lt):o.h(lt)),cacheControl:pt.cacheControl,expires:pt.expires})}catch(pt){delete J.abortController,Te(pt)}finally{c--,z()}var lt}),z=()=>{const J=(()=>{for(const se of Object.keys(M))if(M[se]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let se=c;se<J&&a.length>0;se++){const ye=a.shift();ye.abortController.signal.aborted?se--:k(ye)}},Y=(J,se)=>new Promise((ye,Te)=>{const ke=new Image,Qe=J.url,et=J.credentials;et&&et==="include"?ke.crossOrigin="use-credentials":(et&&et==="same-origin"||!o.d(Qe))&&(ke.crossOrigin="anonymous"),se.signal.addEventListener("abort",()=>{ke.src="",Te(o.c())}),ke.fetchPriority="high",ke.onload=()=>{ke.onerror=ke.onload=null,ye({data:ke})},ke.onerror=()=>{ke.onerror=ke.onload=null,se.signal.aborted||Te(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ke.src=Qe})}(te||(te={})),te.resetRequestQueue();class V{constructor(a){this._transformRequestFn=a}transformRequest(a,c){return this._transformRequestFn&&this._transformRequestFn(a,c)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function ne(O){const a=[];if(typeof O=="string")a.push({id:"default",url:O});else if(O&&O.length>0){const c=[];for(const{id:C,url:M}of O){const k=`${C}${M}`;c.indexOf(k)===-1&&(c.push(k),a.push({id:C,url:M}))}}return a}function W(O,a,c){try{const C=new URL(O);return C.pathname+=`${a}${c}`,C.toString()}catch{throw new Error(`Invalid sprite URL "${O}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class ie{constructor(a,c,C,M){this.context=a,this.format=C,this.texture=a.gl.createTexture(),this.update(c,M)}update(a,c,C){const{width:M,height:k}=a,z=!(this.size&&this.size[0]===M&&this.size[1]===k||C),{context:Y}=this,{gl:J}=Y;if(this.useMipmap=!!(c&&c.useMipmap),J.bindTexture(J.TEXTURE_2D,this.texture),Y.pixelStoreUnpackFlipY.set(!1),Y.pixelStoreUnpack.set(1),Y.pixelStoreUnpackPremultiplyAlpha.set(this.format===J.RGBA&&(!c||c.premultiply!==!1)),z)this.size=[M,k],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?J.texImage2D(J.TEXTURE_2D,0,this.format,this.format,J.UNSIGNED_BYTE,a):J.texImage2D(J.TEXTURE_2D,0,this.format,M,k,0,this.format,J.UNSIGNED_BYTE,a.data);else{const{x:se,y:ye}=C||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?J.texSubImage2D(J.TEXTURE_2D,0,se,ye,J.RGBA,J.UNSIGNED_BYTE,a):J.texSubImage2D(J.TEXTURE_2D,0,se,ye,M,k,J.RGBA,J.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&J.generateMipmap(J.TEXTURE_2D)}bind(a,c,C){const{context:M}=this,{gl:k}=M;k.bindTexture(k.TEXTURE_2D,this.texture),C!==k.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(C=k.LINEAR),a!==this.filter&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,a),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,C||a),this.filter=a),c!==this.wrap&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,c),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function he(O){const{userImage:a}=O;return!!(a&&a.render&&a.render())&&(O.data.replace(new Uint8Array(a.data.buffer)),!0)}class fe extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:c,promiseResolve:C}of this.requestors)C(this._getImagesForIds(c));this.requestors=[]}}getImage(a){const c=this.images[a];if(c&&!c.data&&c.spriteData){const C=c.spriteData;c.data=new o.R({width:C.width,height:C.height},C.context.getImageData(C.x,C.y,C.width,C.height).data),c.spriteData=null}return c}addImage(a,c){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,c)&&(this.images[a]=c)}_validate(a,c){let C=!0;const M=c.data||c.spriteData;return this._validateStretch(c.stretchX,M&&M.width)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchX" value`))),C=!1),this._validateStretch(c.stretchY,M&&M.height)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchY" value`))),C=!1),this._validateContent(c.content,c)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "content" value`))),C=!1),C}_validateStretch(a,c){if(!a)return!0;let C=0;for(const M of a){if(M[0]<C||M[1]<M[0]||c<M[1])return!1;C=M[1]}return!0}_validateContent(a,c){if(!a)return!0;if(a.length!==4)return!1;const C=c.spriteData,M=C&&C.width||c.data.width,k=C&&C.height||c.data.height;return!(a[0]<0||M<a[0]||a[1]<0||k<a[1]||a[2]<0||M<a[2]||a[3]<0||k<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,c,C=!0){const M=this.getImage(a);if(C&&(M.data.width!==c.data.width||M.data.height!==c.data.height))throw new Error(`size mismatch between old image (${M.data.width}x${M.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=M.version+1,this.images[a]=c,this.updatedImages[a]=!0}removeImage(a){const c=this.images[a];delete this.images[a],delete this.patterns[a],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((c,C)=>{let M=!0;if(!this.isLoaded())for(const k of a)this.images[k]||(M=!1);this.isLoaded()||M?c(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:c})})}_getImagesForIds(a){const c={};for(const C of a){let M=this.getImage(C);M||(this.fire(new o.l("styleimagemissing",{id:C})),M=this.getImage(C)),M?c[C]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,textFitWidth:M.textFitWidth,textFitHeight:M.textFitHeight,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:o.w(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:a,height:c}=this.atlasImage;return{width:a,height:c}}getPattern(a){const c=this.patterns[a],C=this.getImage(a);if(!C)return null;if(c&&c.position.version===C.version)return c.position;if(c)c.position.version=C.version;else{const M={w:C.data.width+2,h:C.data.height+2,x:0,y:0},k=new o.I(M,C);this.patterns[a]={bin:M,position:k}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const c=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ie(a,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const k in this.patterns)a.push(this.patterns[k].bin);const{w:c,h:C}=o.p(a),M=this.atlasImage;M.resize({width:c||1,height:C||1});for(const k in this.patterns){const{bin:z}=this.patterns[k],Y=z.x+1,J=z.y+1,se=this.getImage(k).data,ye=se.width,Te=se.height;o.R.copy(se,M,{x:0,y:0},{x:Y,y:J},{width:ye,height:Te}),o.R.copy(se,M,{x:0,y:Te-1},{x:Y,y:J-1},{width:ye,height:1}),o.R.copy(se,M,{x:0,y:0},{x:Y,y:J+Te},{width:ye,height:1}),o.R.copy(se,M,{x:ye-1,y:0},{x:Y-1,y:J},{width:1,height:Te}),o.R.copy(se,M,{x:0,y:0},{x:Y+ye,y:J},{width:1,height:Te})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const c of a){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const C=this.getImage(c);C||o.w(`Image with ID: "${c}" was not found`),he(C)&&this.updateImage(c,C)}}}const Ee=1e20;function me(O,a,c,C,M,k,z,Y,J){for(let se=a;se<a+C;se++)Me(O,c*k+se,k,M,z,Y,J);for(let se=c;se<c+M;se++)Me(O,se*k+a,1,C,z,Y,J)}function Me(O,a,c,C,M,k,z){k[0]=0,z[0]=-1e20,z[1]=Ee,M[0]=O[a];for(let Y=1,J=0,se=0;Y<C;Y++){M[Y]=O[a+Y*c];const ye=Y*Y;do{const Te=k[J];se=(M[Y]-M[Te]+ye-Te*Te)/(Y-Te)/2}while(se<=z[J]&&--J>-1);J++,k[J]=Y,z[J]=se,z[J+1]=Ee}for(let Y=0,J=0;Y<C;Y++){for(;z[J+1]<Y;)J++;const se=k[J],ye=Y-se;O[a+Y*c]=M[se]+ye*ye}}class De{constructor(a,c){this.requestManager=a,this.localIdeographFontFamily=c,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,function*(){const c=[];for(const k in a)for(const z of a[k])c.push(this._getAndCacheGlyphsPromise(k,z));const C=yield Promise.all(c),M={};for(const{stack:k,id:z,glyph:Y}of C)M[k]||(M[k]={}),M[k][z]=Y&&{id:Y.id,bitmap:Y.bitmap.clone(),metrics:Y.metrics};return M})}_getAndCacheGlyphsPromise(a,c){return o._(this,void 0,void 0,function*(){let C=this.entries[a];C||(C=this.entries[a]={glyphs:{},requests:{},ranges:{}});let M=C.glyphs[c];if(M!==void 0)return{stack:a,id:c,glyph:M};if(M=this._tinySDF(C,a,c),M)return C.glyphs[c]=M,{stack:a,id:c,glyph:M};const k=Math.floor(c/256);if(256*k>65535)throw new Error("glyphs > 65535 not supported");if(C.ranges[k])return{stack:a,id:c,glyph:M};if(!this.url)throw new Error("glyphsUrl is not set");if(!C.requests[k]){const Y=De.loadGlyphRange(a,k,this.url,this.requestManager);C.requests[k]=Y}const z=yield C.requests[k];for(const Y in z)this._doesCharSupportLocalGlyph(+Y)||(C.glyphs[+Y]=z[+Y]);return C.ranges[k]=!0,{stack:a,id:c,glyph:z[c]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))||o.u["CJK Unified Ideographs"](a)||o.u["Hangul Syllables"](a)||o.u.Hiragana(a)||o.u.Katakana(a)||o.u["CJK Symbols and Punctuation"](a)||o.u["Halfwidth and Fullwidth Forms"](a))}_tinySDF(a,c,C){const M=this.localIdeographFontFamily;if(!M||!this._doesCharSupportLocalGlyph(C))return;let k=a.tinySDF;if(!k){let Y="400";/bold/i.test(c)?Y="900":/medium/i.test(c)?Y="500":/light/i.test(c)&&(Y="200"),k=a.tinySDF=new De.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:M,fontWeight:Y})}const z=k.draw(String.fromCharCode(C));return{id:C,bitmap:new o.q({width:z.width||60,height:z.height||60},z.data),metrics:{width:z.glyphWidth/2||24,height:z.glyphHeight/2||24,left:z.glyphLeft/2+.5||0,top:z.glyphTop/2-27.5||-8,advance:z.glyphAdvance/2||24,isDoubleResolution:!0}}}}De.loadGlyphRange=function(O,a,c,C){return o._(this,void 0,void 0,function*(){const M=256*a,k=M+255,z=C.transformRequest(c.replace("{fontstack}",O).replace("{range}",`${M}-${k}`),"Glyphs"),Y=yield o.n(z,new AbortController);if(!Y||!Y.data)throw new Error(`Could not load glyph range. range: ${a}, ${M}-${k}`);const J={};for(const se of o.o(Y.data))J[se.id]=se;return J})},De.TinySDF=class{constructor({fontSize:O=24,buffer:a=3,radius:c=8,cutoff:C=.25,fontFamily:M="sans-serif",fontWeight:k="normal",fontStyle:z="normal"}={}){this.buffer=a,this.cutoff=C,this.radius=c;const Y=this.size=O+4*a,J=this._createCanvas(Y),se=this.ctx=J.getContext("2d",{willReadFrequently:!0});se.font=`${z} ${k} ${O}px ${M}`,se.textBaseline="alphabetic",se.textAlign="left",se.fillStyle="black",this.gridOuter=new Float64Array(Y*Y),this.gridInner=new Float64Array(Y*Y),this.f=new Float64Array(Y),this.z=new Float64Array(Y+1),this.v=new Uint16Array(Y)}_createCanvas(O){const a=document.createElement("canvas");return a.width=a.height=O,a}draw(O){const{width:a,actualBoundingBoxAscent:c,actualBoundingBoxDescent:C,actualBoundingBoxLeft:M,actualBoundingBoxRight:k}=this.ctx.measureText(O),z=Math.ceil(c),Y=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(k-M))),J=Math.min(this.size-this.buffer,z+Math.ceil(C)),se=Y+2*this.buffer,ye=J+2*this.buffer,Te=Math.max(se*ye,0),ke=new Uint8ClampedArray(Te),Qe={data:ke,width:se,height:ye,glyphWidth:Y,glyphHeight:J,glyphTop:z,glyphLeft:0,glyphAdvance:a};if(Y===0||J===0)return Qe;const{ctx:et,buffer:mt,gridInner:lt,gridOuter:pt}=this;et.clearRect(mt,mt,Y,J),et.fillText(O,mt,mt+z);const bt=et.getImageData(mt,mt,Y,J);pt.fill(Ee,0,Te),lt.fill(0,0,Te);for(let Bt=0;Bt<J;Bt++)for(let kt=0;kt<Y;kt++){const Kt=bt.data[4*(Bt*Y+kt)+3]/255;if(Kt===0)continue;const Ut=(Bt+mt)*se+kt+mt;if(Kt===1)pt[Ut]=0,lt[Ut]=Ee;else{const It=.5-Kt;pt[Ut]=It>0?It*It:0,lt[Ut]=It<0?It*It:0}}me(pt,0,0,se,ye,se,this.f,this.v,this.z),me(lt,mt,mt,Y,J,se,this.f,this.v,this.z);for(let Bt=0;Bt<Te;Bt++){const kt=Math.sqrt(pt[Bt])-Math.sqrt(lt[Bt]);ke[Bt]=Math.round(255-255*(kt/this.radius+this.cutoff))}return Qe}};class xe{constructor(){this.specification=o.v.light.position}possiblyEvaluate(a,c){return o.z(a.expression.evaluate(c))}interpolate(a,c,C){return{x:o.B.number(a.x,c.x,C),y:o.B.number(a.y,c.y,C),z:o.B.number(a.z,c.z,C)}}}let At;class Ze extends o.E{constructor(a){super(),At=At||new o.r({anchor:new o.D(o.v.light.anchor),position:new xe,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(At),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,c={}){if(!this._validate(o.t,a,c))for(const C in a){const M=a[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),M):this._transitionable.setValue(C,M)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,c,C){return(!C||C.validate!==!1)&&o.x(this,a.call(o.y,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const Xe=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class Ne extends o.E{constructor(a){super(),this._transitionable=new o.T(Xe),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0))}setSky(a,c={}){if(!this._validate(o.F,a,c)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const C in a){const M=a[C];C.endsWith("-transition")?this._transitionable.setTransition(C.slice(0,-11),M):this._transitionable.setValue(C,M)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,c,C={}){return(C==null?void 0:C.validate)!==!1&&o.x(this,a.call(o.y,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class Se{constructor(a,c){this.width=a,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,c){const C=a.join(",")+String(c);return this.dashEntry[C]||(this.dashEntry[C]=this.addDash(a,c)),this.dashEntry[C]}getDashRanges(a,c,C){const M=[];let k=a.length%2==1?-a[a.length-1]*C:0,z=a[0]*C,Y=!0;M.push({left:k,right:z,isDash:Y,zeroLength:a[0]===0});let J=a[0];for(let se=1;se<a.length;se++){Y=!Y;const ye=a[se];k=J*C,J+=ye,z=J*C,M.push({left:k,right:z,isDash:Y,zeroLength:ye===0})}return M}addRoundDash(a,c,C){const M=c/2;for(let k=-C;k<=C;k++){const z=this.width*(this.nextRow+C+k);let Y=0,J=a[Y];for(let se=0;se<this.width;se++){se/J.right>1&&(J=a[++Y]);const ye=Math.abs(se-J.left),Te=Math.abs(se-J.right),ke=Math.min(ye,Te);let Qe;const et=k/C*(M+1);if(J.isDash){const mt=M-Math.abs(et);Qe=Math.sqrt(ke*ke+mt*mt)}else Qe=M-Math.sqrt(ke*ke+et*et);this.data[z+se]=Math.max(0,Math.min(255,Qe+128))}}}addRegularDash(a){for(let Y=a.length-1;Y>=0;--Y){const J=a[Y],se=a[Y+1];J.zeroLength?a.splice(Y,1):se&&se.isDash===J.isDash&&(se.left=J.left,a.splice(Y,1))}const c=a[0],C=a[a.length-1];c.isDash===C.isDash&&(c.left=C.left-this.width,C.right=c.right+this.width);const M=this.width*this.nextRow;let k=0,z=a[k];for(let Y=0;Y<this.width;Y++){Y/z.right>1&&(z=a[++k]);const J=Math.abs(Y-z.left),se=Math.abs(Y-z.right),ye=Math.min(J,se);this.data[M+Y]=Math.max(0,Math.min(255,(z.isDash?ye:-ye)+128))}}addDash(a,c){const C=c?7:0,M=2*C+1;if(this.nextRow+M>this.height)return o.w("LineAtlas out of space"),null;let k=0;for(let Y=0;Y<a.length;Y++)k+=a[Y];if(k!==0){const Y=this.width/k,J=this.getDashRanges(a,this.width,Y);c?this.addRoundDash(J,Y,C):this.addRegularDash(J)}const z={y:(this.nextRow+C+.5)/this.height,height:2*C/this.height,width:k};return this.nextRow+=M,this.dirty=!0,z}bind(a){const c=a.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Re="maplibre_preloaded_worker_pool";class He{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<He.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Re]}numActive(){return Object.keys(this.active).length}}const _t=Math.floor(T.hardwareConcurrency/2);let Gt,yt;function Ft(){return Gt||(Gt=new He),Gt}He.workerCount=o.G(globalThis)?Math.max(Math.min(_t,3),1):1;class Tt{constructor(a,c){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=c;const C=this.workerPool.acquire(c);for(let M=0;M<C.length;M++){const k=new o.H(C[M],c);k.name=`Worker ${M}`,this.actors.push(k)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,c){const C=[];for(const M of this.actors)C.push(M.sendAsync({type:a,data:c}));return Promise.all(C)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,c){for(const C of this.actors)C.registerMessageHandler(a,c)}}function Le(){return yt||(yt=new Tt(Ft(),o.J),yt.registerMessageHandler("GR",(O,a,c)=>o.m(a,c))),yt}function Pe(O,a){const c=o.K();return o.L(c,c,[1,1,0]),o.M(c,c,[.5*O.width,.5*O.height,1]),O.calculatePosMatrix?o.N(c,c,O.calculatePosMatrix(a.toUnwrapped())):c}function Be(O,a,c,C,M,k,z){var Y;const J=function(ke,Qe,et){if(ke)for(const mt of ke){const lt=Qe[mt];if(lt&&lt.source===et&&lt.type==="fill-extrusion")return!0}else for(const mt in Qe){const lt=Qe[mt];if(lt.source===et&&lt.type==="fill-extrusion")return!0}return!1}((Y=M==null?void 0:M.layers)!==null&&Y!==void 0?Y:null,a,O.id),se=k.maxPitchScaleFactor(),ye=O.tilesIn(C,se,J);ye.sort(it);const Te=[];for(const ke of ye)Te.push({wrappedTileID:ke.tileID.wrapped().key,queryResults:ke.tile.queryRenderedFeatures(a,c,O._state,ke.queryGeometry,ke.cameraQueryGeometry,ke.scale,M,k,se,Pe(O.transform,ke.tileID),z?(Qe,et)=>z(ke.tileID,Qe,et):void 0)});return function(ke,Qe){for(const et in ke)for(const mt of ke[et])Ct(mt,Qe);return ke}(function(ke){const Qe={},et={};for(const mt of ke){const lt=mt.queryResults,pt=mt.wrappedTileID,bt=et[pt]=et[pt]||{};for(const Bt in lt){const kt=lt[Bt],Kt=bt[Bt]=bt[Bt]||{},Ut=Qe[Bt]=Qe[Bt]||[];for(const It of kt)Kt[It.featureIndex]||(Kt[It.featureIndex]=!0,Ut.push(It))}}return Qe}(Te),O)}function it(O,a){const c=O.tileID,C=a.tileID;return c.overscaledZ-C.overscaledZ||c.canonical.y-C.canonical.y||c.wrap-C.wrap||c.canonical.x-C.canonical.x}function Ct(O,a){const c=O.feature,C=a.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=C}function ft(O,a,c){return o._(this,void 0,void 0,function*(){let C=O;if(O.url?C=(yield o.j(a.transformRequest(O.url,"Source"),c)).data:yield T.frameAsync(c),!C)return null;const M=o.O(o.e(C,O),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in C&&C.vector_layers&&(M.vectorLayerIds=C.vector_layers.map(k=>k.id)),M})}class Lt{constructor(a,c){a&&(c?this.setSouthWest(a).setNorthEast(c):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.Q?new o.Q(a.lng,a.lat):o.Q.convert(a),this}extend(a){const c=this._sw,C=this._ne;let M,k;if(a instanceof o.Q)M=a,k=a;else{if(!(a instanceof Lt))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Lt.convert(a)):this.extend(o.Q.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(o.Q.convert(a)):this;if(M=a._sw,k=a._ne,!M||!k)return this}return c||C?(c.lng=Math.min(M.lng,c.lng),c.lat=Math.min(M.lat,c.lat),C.lng=Math.max(k.lng,C.lng),C.lat=Math.max(k.lat,C.lat)):(this._sw=new o.Q(M.lng,M.lat),this._ne=new o.Q(k.lng,k.lat)),this}getCenter(){return new o.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.Q(this.getWest(),this.getNorth())}getSouthEast(){return new o.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:c,lat:C}=o.Q.convert(a);let M=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=C&&C<=this._ne.lat&&M}static convert(a){return a instanceof Lt?a:a&&new Lt(a)}static fromLngLat(a,c=0){const C=360*c/40075017,M=C/Math.cos(Math.PI/180*a.lat);return new Lt(new o.Q(a.lng-M,a.lat-C),new o.Q(a.lng+M,a.lat+C))}adjustAntiMeridian(){const a=new o.Q(this._sw.lng,this._sw.lat),c=new o.Q(this._ne.lng,this._ne.lat);return new Lt(a,a.lng>c.lng?new o.Q(c.lng+360,c.lat):c)}}class Zt{constructor(a,c,C){this.bounds=Lt.convert(this.validateBounds(a)),this.minzoom=c||0,this.maxzoom=C||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const c=Math.pow(2,a.z),C=Math.floor(o.U(this.bounds.getWest())*c),M=Math.floor(o.S(this.bounds.getNorth())*c),k=Math.ceil(o.U(this.bounds.getEast())*c),z=Math.ceil(o.S(this.bounds.getSouth())*c);return a.x>=C&&a.x<k&&a.y>=M&&a.y<z}}class Rt extends o.E{constructor(a,c,C,M){if(super(),this.id=a,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.O(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(M)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new Zt(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.k(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C={request:this.map._requestManager.transformRequest(c,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};C.request.collectResourceTiming=this._collectResourceTiming;let M="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((k,z)=>{a.reloadPromise={resolve:k,reject:z}})}else a.actor=this.dispatcher.getActor(),M="LT";a.abortController=new AbortController;try{const k=yield a.actor.sendAsync({type:M,data:C},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,k)}catch(k){if(delete a.abortController,a.aborted)return;if(k&&k.status!==404)throw k;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,c){if(c&&c.resourceTiming&&(a.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&a.setExpiryData(c),a.loadVectorData(c,this.map.painter),a.reloadPromise){const C=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(C.resolve).catch(C.reject)}}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class _n extends o.E{constructor(a,c,C,M){super(),this.id=a,this.dispatcher=C,this.setEventedParent(M),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.O(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(a=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield ft(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new Zt(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:a})))}catch(c){this._tileJSONRequest=null,this.fire(new o.k(c))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load(!0)}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const C=yield te.getImage(this.map._requestManager.transformRequest(c,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(C&&C.data){this.map._refreshExpiredTiles&&C.cacheControl&&C.expires&&a.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const M=this.map.painter.context,k=M.gl,z=C.data;a.texture=this.map.painter.getTileTexture(z.width),a.texture?a.texture.update(z,{useMipmap:!0}):(a.texture=new ie(M,z,k.RGBA,{useMipmap:!0}),a.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(C){if(delete a.abortController,a.aborted)a.state="unloaded";else if(C)throw a.state="errored",C}})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class qn extends _n{constructor(a,c,C,M){super(a,c,C,M),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),C=this.map._requestManager.transformRequest(c,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const M=yield te.getImage(C,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(M&&M.data){const k=M.data;this.map._refreshExpiredTiles&&M.cacheControl&&M.expires&&a.setExpiryData({cacheControl:M.cacheControl,expires:M.expires});const z=o.b(k)&&o.V()?k:yield this.readImageNow(k),Y={type:this.type,uid:a.uid,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();const J=yield a.actor.sendAsync({type:"LDT",data:Y});a.dem=J,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(M){if(delete a.abortController,a.aborted)a.state="unloaded";else if(M)throw a.state="errored",M}})}readImageNow(a){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.W()){const c=a.width+2,C=a.height+2;try{return new o.R({width:c,height:C},yield o.X(a,-1,-1,c,C))}catch{}}return T.getImageData(a,1)})}_getNeighboringTiles(a){const c=a.canonical,C=Math.pow(2,c.z),M=(c.x-1+C)%C,k=c.x===0?a.wrap-1:a.wrap,z=(c.x+1+C)%C,Y=c.x+1===C?a.wrap+1:a.wrap,J={};return J[new o.Y(a.overscaledZ,k,c.z,M,c.y).key]={backfilled:!1},J[new o.Y(a.overscaledZ,Y,c.z,z,c.y).key]={backfilled:!1},c.y>0&&(J[new o.Y(a.overscaledZ,k,c.z,M,c.y-1).key]={backfilled:!1},J[new o.Y(a.overscaledZ,a.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},J[new o.Y(a.overscaledZ,Y,c.z,z,c.y-1).key]={backfilled:!1}),c.y+1<C&&(J[new o.Y(a.overscaledZ,k,c.z,M,c.y+1).key]={backfilled:!1},J[new o.Y(a.overscaledZ,a.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},J[new o.Y(a.overscaledZ,Y,c.z,z,c.y+1).key]={backfilled:!1}),J}unloadTile(a){return o._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class rn extends o.E{constructor(a,c,C,M){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=C.getActor(),this.setEventedParent(M),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.Z,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.Z,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(a){return a*(o.Z/this.tileSize)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}getData(){return o._(this,void 0,void 0,function*(){const a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}getCoordinatesFromGeometry(a){return a.type==="GeometryCollection"?a.geometries.map(c=>c.coordinates).flat(1/0):a.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const a=new Lt,c=yield this.getData();let C;switch(c.type){case"FeatureCollection":C=c.features.map(M=>this.getCoordinatesFromGeometry(M.geometry)).flat(1/0);break;case"Feature":C=this.getCoordinatesFromGeometry(c.geometry);break;default:C=this.getCoordinatesFromGeometry(c)}if(C.length==0)return a;for(let M=0;M<C.length-1;M+=2)a.extend([C[M],C[M+1]]);return a})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(a.clusterRadius)),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,c,C){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:c,offset:C}})}_updateWorkerData(a){return o._(this,void 0,void 0,function*(){const c=o.e({type:this.type},this.workerOptions);a?c.dataDiff=a:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(T.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{const C=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||C.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let M=null;C.resourceTiming&&C.resourceTiming[this.id]&&(M=C.resourceTiming[this.id].slice(0));const k={dataType:"source"};this._collectResourceTiming&&M&&M.length>0&&o.e(k,{resourceTiming:M}),this.fire(new o.l("data",Object.assign(Object.assign({},k),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},k),{sourceDataType:"content"})))}catch(C){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(C))}})}loaded(){return this._pendingLoads===0}loadTile(a){return o._(this,void 0,void 0,function*(){const c=a.actor?"RT":"LT";a.actor=this.actor;const C={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};a.abortController=new AbortController;const M=yield this.actor.sendAsync({type:c,data:C},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(M,this.map.painter,c==="RT")})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ar extends o.E{constructor(a,c,C,M){super(),this.flippedWindingOrder=!1,this.id=a,this.dispatcher=C,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(M),this.options=c}load(a){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield te.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,a&&(this.coordinates=a),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.k(c))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const c=a.map(o.$.fromLngLat);var C;return this.tileID=function(M){let k=1/0,z=1/0,Y=-1/0,J=-1/0;for(const ke of M)k=Math.min(k,ke.x),z=Math.min(z,ke.y),Y=Math.max(Y,ke.x),J=Math.max(J,ke.y);const se=Math.max(Y-k,J-z),ye=Math.max(0,Math.floor(-Math.log(se)/Math.LN2)),Te=Math.pow(2,ye);return new o.a1(ye,Math.floor((k+Y)/2*Te),Math.floor((z+J)/2*Te))}(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(M=>this.tileID.getTilePoint(M)._round()),this.flippedWindingOrder=((C=this.tileCoords)[1].x-C[0].x)*(C[2].y-C[0].y)-(C[1].y-C[0].y)*(C[2].x-C[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,c=a.gl;this.texture||(this.texture=new ie(a,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let C=!1;for(const M in this.tiles){const k=this.tiles[M];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,C=!0)}C&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(a){let c=1/0,C=1/0,M=-1/0,k=-1/0;for(const Y of a)c=Math.min(c,Y.x),C=Math.min(C,Y.y),M=Math.max(M,Y.x),k=Math.max(k,Y.y);const z={};for(let Y=0;Y<=o.a0;Y++){const J=Math.pow(2,Y),se=Math.floor(c*J),ye=Math.floor(C*J),Te=Math.floor(M*J),ke=Math.floor(k*J);z[Y]={minTileX:se,minTileY:ye,maxTileX:Te,maxTileY:ke}}return z}}class kn extends ar{constructor(a,c,C,M){super(a,c,C,M),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const c of a.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.k(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const c=this.video.seekable;a<c.start(0)||a>c.end(0)?this.fire(new o.k(new o.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const a=this.map.painter.context,c=a.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new ie(a,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let C=!1;for(const M in this.tiles){const k=this.tiles[M];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,C=!0)}C&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class mn extends ar{constructor(a,c,C,M){super(a,c,C,M),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(k=>!Array.isArray(k)||k.length!==2||k.some(z=>typeof z!="number"))||this.fire(new o.k(new o.a3(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a3(`sources.${a}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.k(new o.a3(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a3(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a3(`sources.${a}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,C=c.gl;this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ie(c,this.canvas,C.RGBA,{premultiply:!0});let M=!1;for(const k in this.tiles){const z=this.tiles[k];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,M=!0)}M&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const zn={},br=O=>{switch(O){case"geojson":return rn;case"image":return ar;case"raster":return _n;case"raster-dem":return qn;case"vector":return Rt;case"video":return kn;case"canvas":return mn}return zn[O]},gr="RTLPluginLoaded";class tr extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Le()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,function*(c,C=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=T.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!C)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(gr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ge=null;function ce(){return Ge||(Ge=new tr),Ge}class pe{constructor(a,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=o.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const c=a+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,c,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(M,k){const z={};if(!k)return z;for(const Y of M){const J=Y.layerIds.map(se=>k.getLayer(se)).filter(Boolean);if(J.length!==0){Y.layers=J,Y.stateDependentLayerIds&&(Y.stateDependentLayers=Y.stateDependentLayerIds.map(se=>J.filter(ye=>ye.id===se)[0]));for(const se of J)z[se.id]=Y}}return z}(a.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const M in this.buckets){const k=this.buckets[M];if(k instanceof o.a6){if(this.hasSymbolBuckets=!0,!C)break;k.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const M in this.buckets){const k=this.buckets[M];if(k instanceof o.a6&&k.hasRTLText){this.hasRTLText=!0,ce().lazyLoad();break}}this.queryPadding=0;for(const M in this.buckets){const k=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(M).queryRadius(k))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const C in this.buckets){const M=this.buckets[C];M.uploadPending()&&M.upload(a)}const c=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ie(a,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ie(a,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,c,C,M,k,z,Y,J,se,ye,Te){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:M,cameraQueryGeometry:k,scale:z,tileSize:this.tileSize,pixelPosMatrix:ye,transform:J,params:Y,queryPadding:this.queryPadding*se,getElevation:Te},a,c,C):{}}querySourceFeatures(a,c){const C=this.latestFeatureIndex;if(!C||!C.rawTileData)return;const M=C.loadVTLayers(),k=c&&c.sourceLayer?c.sourceLayer:"",z=M._geojsonTileLayer||M[k];if(!z)return;const Y=o.a7(c&&c.filter),{z:J,x:se,y:ye}=this.tileID.canonical,Te={z:J,x:se,y:ye};for(let ke=0;ke<z.length;ke++){const Qe=z.feature(ke);if(Y.needGeometry){const lt=o.a8(Qe,!0);if(!Y.filter(new o.C(this.tileID.overscaledZ),lt,this.tileID.canonical))continue}else if(!Y.filter(new o.C(this.tileID.overscaledZ),Qe))continue;const et=C.getId(Qe,k),mt=new o.a9(Qe,J,se,ye,et);mt.tile=Te,a.push(mt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const c=this.expirationTime;if(a.cacheControl){const C=o.aa(a.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const C=Date.now();let M=!1;if(this.expirationTime>C)M=!1;else if(c)if(this.expirationTime<c)M=!0;else{const k=this.expirationTime-c;k?this.expirationTime=C+Math.max(k,3e4):M=!0}else M=!0;M?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const C=this.latestFeatureIndex.loadVTLayers();for(const M in this.buckets){if(!c.style.hasLayer(M))continue;const k=this.buckets[M],z=k.layers[0].sourceLayer||"_geojsonTileLayer",Y=C[z],J=a[z];if(!Y||!J||Object.keys(J).length===0)continue;k.update(J,Y,this.imageAtlas&&this.imageAtlas.patternPositions||{});const se=c&&c.style&&c.style.getLayer(M);se&&(this.queryPadding=Math.max(this.queryPadding,se.queryRadius(k)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<T.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=T.now()+a}setDependencies(a,c){const C={};for(const M of c)C[M]=!0;this.dependencies[a]=C}hasDependency(a,c){for(const C of a){const M=this.dependencies[C];if(M){for(const k of c)if(M[k])return!0}}return!1}}class rt{constructor(a,c){this.max=a,this.onRemove=c,this.reset()}reset(){for(const a in this.data)for(const c of this.data[a])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(a,c,C){const M=a.wrapped().key;this.data[M]===void 0&&(this.data[M]=[]);const k={value:c,timeout:void 0};if(C!==void 0&&(k.timeout=setTimeout(()=>{this.remove(a,k)},C)),this.data[M].push(k),this.order.push(M),this.order.length>this.max){const z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const c=this.data[a].shift();return c.timeout&&clearTimeout(c.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),c.value}getByKey(a){const c=this.data[a];return c?c[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,c){if(!this.has(a))return this;const C=a.wrapped().key,M=c===void 0?0:this.data[C].indexOf(c),k=this.data[C][M];return this.data[C].splice(M,1),k.timeout&&clearTimeout(k.timeout),this.data[C].length===0&&delete this.data[C],this.onRemove(k.value),this.order.splice(this.order.indexOf(C),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(a){const c=[];for(const C in this.data)for(const M of this.data[C])a(M.value)||c.push(M);for(const C of c)this.remove(C.value.tileID,C)}}class St{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,c,C){const M=String(c);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][M]=this.stateChanges[a][M]||{},o.e(this.stateChanges[a][M],C),this.deletedStates[a]===null){this.deletedStates[a]={};for(const k in this.state[a])k!==M&&(this.deletedStates[a][k]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][M]===null){this.deletedStates[a][M]={};for(const k in this.state[a][M])C[k]||(this.deletedStates[a][M][k]=null)}else for(const k in C)this.deletedStates[a]&&this.deletedStates[a][M]&&this.deletedStates[a][M][k]===null&&delete this.deletedStates[a][M][k]}removeFeatureState(a,c,C){if(this.deletedStates[a]===null)return;const M=String(c);if(this.deletedStates[a]=this.deletedStates[a]||{},C&&c!==void 0)this.deletedStates[a][M]!==null&&(this.deletedStates[a][M]=this.deletedStates[a][M]||{},this.deletedStates[a][M][C]=null);else if(c!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][M])for(C in this.deletedStates[a][M]={},this.stateChanges[a][M])this.deletedStates[a][M][C]=null;else this.deletedStates[a][M]=null;else this.deletedStates[a]=null}getState(a,c){const C=String(c),M=o.e({},(this.state[a]||{})[C],(this.stateChanges[a]||{})[C]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const k=this.deletedStates[a][c];if(k===null)return{};for(const z in k)delete M[z]}return M}initializeTileState(a,c){a.setFeatureState(this.state,c)}coalesceChanges(a,c){const C={};for(const M in this.stateChanges){this.state[M]=this.state[M]||{};const k={};for(const z in this.stateChanges[M])this.state[M][z]||(this.state[M][z]={}),o.e(this.state[M][z],this.stateChanges[M][z]),k[z]=this.state[M][z];C[M]=k}for(const M in this.deletedStates){this.state[M]=this.state[M]||{};const k={};if(this.deletedStates[M]===null)for(const z in this.state[M])k[z]={},this.state[M][z]={};else for(const z in this.deletedStates[M]){if(this.deletedStates[M][z]===null)this.state[M][z]={};else for(const Y of Object.keys(this.deletedStates[M][z]))delete this.state[M][z][Y];k[z]=this.state[M][z]}C[M]=C[M]||{},o.e(C[M],k)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(const M in a)a[M].setFeatureState(C,c)}}function Ht(O,a,c){const C=a.intersectsFrustum(O);if(!c)return C;const M=a.intersectsPlane(c);return C===0||M===0?0:C===2&&M===2?2:1}function sn(O,a,c,C,M){let k=O;const z=Math.atan(a/c),Y=Math.hypot(a,c);return k=O+o.ab(C/Y/Math.max(.5,Math.cos(o.ad(M/2)))),k+=1*o.ab(Math.cos(z))/2,k+=o.ae(O-k,-0,0),k}function nr(O,a){const c=(a.roundZoom?Math.round:Math.floor)(O.zoom+o.ab(O.tileSize/a.tileSize));return Math.max(0,c)}function $e(O,a){const c=O.getCameraFrustum(),C=O.getClippingPlane(),M=O.screenPointToMercatorCoordinate(O.getCameraPoint()),k=o.$.fromLngLat(O.center,O.elevation);M.z=k.z+Math.cos(O.pitchInRadians)*O.cameraToCenterDistance/O.worldSize;const z=O.getCoveringTilesDetailsProvider(),Y=z.allowVariableZoom(O,a),J=nr(O,a),se=a.minzoom||0,ye=a.maxzoom!==void 0?a.maxzoom:O.maxZoom,Te=Math.min(Math.max(0,J),ye),ke=Math.pow(2,Te),Qe=[ke*M.x,ke*M.y,0],et=[ke*k.x,ke*k.y,0],mt=Math.hypot(k.x-M.x,k.y-M.y),lt=Math.abs(k.z-M.z),pt=Math.hypot(mt,lt),bt=Kt=>({zoom:0,x:0,y:0,wrap:Kt,fullyVisible:!1}),Bt=[],kt=[];if(O.renderWorldCopies&&z.allowWorldCopies())for(let Kt=1;Kt<=3;Kt++)Bt.push(bt(-Kt)),Bt.push(bt(Kt));for(Bt.push(bt(0));Bt.length>0;){const Kt=Bt.pop(),Ut=Kt.x,It=Kt.y;let nn=Kt.fullyVisible;const qt={x:Ut,y:It,z:Kt.zoom},xn=z.getTileAABB(qt,Kt.wrap,O.elevation,a);if(!nn){const Nn=Ht(c,xn,C);if(Nn===0)continue;nn=Nn===2}const Sn=z.distanceToTile2d(M.x,M.y,qt,xn);let Cn=J;Y&&(Cn=(a.calculateTileZoom||sn)(O.zoom+o.ab(O.tileSize/a.tileSize),Sn,lt,pt,O.fov)),Cn=(a.roundZoom?Math.round:Math.floor)(Cn),Cn=Math.max(0,Cn);const In=Math.min(Cn,ye);if(Kt.wrap=z.getWrap(k,qt,Kt.wrap),Kt.zoom>=In){if(Kt.zoom<se)continue;const Nn=Te-Kt.zoom,Rn=Qe[0]-.5-(Ut<<Nn),kr=Qe[1]-.5-(It<<Nn),Ri=a.reparseOverscaled?Math.max(Kt.zoom,Cn):Kt.zoom;kt.push({tileID:new o.Y(Kt.zoom===ye?Ri:Kt.zoom,Kt.wrap,Kt.zoom,Ut,It),distanceSq:o.ac([et[0]-.5-Ut,et[1]-.5-It]),tileDistanceToCamera:Math.sqrt(Rn*Rn+kr*kr)})}else for(let Nn=0;Nn<4;Nn++)Bt.push({zoom:Kt.zoom+1,x:(Ut<<1)+Nn%2,y:(It<<1)+(Nn>>1),wrap:Kt.wrap,fullyVisible:nn})}return kt.sort((Kt,Ut)=>Kt.distanceSq-Ut.distanceSq).map(Kt=>Kt.tileID)}class ae extends o.E{constructor(a,c,C){super(),this.id=a,this.dispatcher=C,this.on("data",M=>this._dataHandler(M)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((M,k,z,Y)=>{const J=new(br(k.type))(M,k,z,Y);if(J.id!==M)throw new Error(`Expected Source id to be ${M} instead of ${J.id}`);return J})(a,c,C,this),this._tiles={},this._cache=new rt(0,M=>this._unloadTile(M)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new St,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const c=this._tiles[a];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,c,C){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,c,C)}catch(M){a.state="errored",M.status!==404?this._source.fire(new o.k(M,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.l("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const C=this._tiles[c];C.upload(a),C.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(Ce).map(a=>a.key)}getRenderableIds(a){const c=[];for(const C in this._tiles)this._isIdRenderable(C,a)&&c.push(this._tiles[C]);return a?c.sort((C,M)=>{const k=C.tileID,z=M.tileID,Y=new o.P(k.canonical.x,k.canonical.y)._rotate(-this.transform.bearingInRadians),J=new o.P(z.canonical.x,z.canonical.y)._rotate(-this.transform.bearingInRadians);return k.overscaledZ-z.overscaledZ||J.y-Y.y||J.x-Y.x}).map(C=>C.tileID.key):c.map(C=>C.tileID).sort(Ce).map(C=>C.key)}hasRenderableParent(a){const c=this.findLoadedParent(a,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(a,c){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(c||!this._tiles[a].holdingForFade())}reload(a){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(a||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(a,c){return o._(this,void 0,void 0,function*(){const C=this._tiles[a];C&&(C.state!=="loading"&&(C.state=c),yield this._loadTile(C,a,c))})}_tileLoaded(a,c,C){a.timeAdded=T.now(),C==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(c,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const c=this.getRenderableIds();for(let M=0;M<c.length;M++){const k=c[M];if(a.neighboringTiles&&a.neighboringTiles[k]){const z=this.getTileByID(k);C(a,z),C(z,a)}}function C(M,k){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let z=k.tileID.canonical.x-M.tileID.canonical.x;const Y=k.tileID.canonical.y-M.tileID.canonical.y,J=Math.pow(2,M.tileID.canonical.z),se=k.tileID.key;z===0&&Y===0||Math.abs(Y)>1||(Math.abs(z)>1&&(Math.abs(z+J)===1?z+=J:Math.abs(z-J)===1&&(z-=J)),k.dem&&M.dem&&(M.dem.backfillBorder(k.dem,z,Y),M.neighboringTiles&&M.neighboringTiles[se]&&(M.neighboringTiles[se].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,c,C,M){for(const k in this._tiles){let z=this._tiles[k];if(M[k]||!z.hasData()||z.tileID.overscaledZ<=c||z.tileID.overscaledZ>C)continue;let Y=z.tileID;for(;z&&z.tileID.overscaledZ>c+1;){const se=z.tileID.scaledTo(z.tileID.overscaledZ-1);z=this._tiles[se.key],z&&z.hasData()&&(Y=se)}let J=Y;for(;J.overscaledZ>c;)if(J=J.scaledTo(J.overscaledZ-1),a[J.key]||a[J.canonical.key]){M[Y.key]=Y;break}}}findLoadedParent(a,c){if(a.key in this._loadedParentTiles){const C=this._loadedParentTiles[a.key];return C&&C.tileID.overscaledZ>=c?C:null}for(let C=a.overscaledZ-1;C>=c;C--){const M=a.scaledTo(C),k=this._getLoadedTile(M);if(k)return k}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){const c=this._tiles[a.key];return c&&c.hasData()?c:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const c=Math.ceil(a.width/this._source.tileSize)+1,C=Math.ceil(a.height/this._source.tileSize)+1,M=Math.floor(c*C*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(k)}handleWrapJump(a){const c=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,c){const C={};for(const M in this._tiles){const k=this._tiles[M];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+c),C[k.tileID.key]=k}this._tiles=C;for(const M in this._timers)clearTimeout(this._timers[M]),delete this._timers[M];for(const M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}}_updateCoveredAndRetainedTiles(a,c,C,M,k,z){const Y={},J={},se=Object.keys(a),ye=T.now();for(const Te of se){const ke=a[Te],Qe=this._tiles[Te];if(!Qe||Qe.fadeEndTime!==0&&Qe.fadeEndTime<=ye)continue;const et=this.findLoadedParent(ke,c),mt=this.findLoadedSibling(ke),lt=et||mt||null;lt&&(this._addTile(lt.tileID),Y[lt.tileID.key]=lt.tileID),J[Te]=ke}this._retainLoadedChildren(J,M,C,a);for(const Te in Y)a[Te]||(this._coveredTiles[Te]=!0,a[Te]=Y[Te]);if(z){const Te={},ke={};for(const Qe of k)this._tiles[Qe.key].hasData()?Te[Qe.key]=Qe:ke[Qe.key]=Qe;for(const Qe in ke){const et=ke[Qe].children(this._source.maxzoom);this._tiles[et[0].key]&&this._tiles[et[1].key]&&this._tiles[et[2].key]&&this._tiles[et[3].key]&&(Te[et[0].key]=a[et[0].key]=et[0],Te[et[1].key]=a[et[1].key]=et[1],Te[et[2].key]=a[et[2].key]=et[2],Te[et[3].key]=a[et[3].key]=et[3],delete ke[Qe])}for(const Qe in ke){const et=ke[Qe],mt=this.findLoadedParent(et,this._source.minzoom),lt=this.findLoadedSibling(et),pt=mt||lt||null;if(pt){Te[pt.tileID.key]=a[pt.tileID.key]=pt.tileID;for(const bt in Te)Te[bt].isChildOf(pt.tileID)&&delete Te[bt]}}for(const Qe in this._tiles)Te[Qe]||(this._coveredTiles[Qe]=!0)}}update(a,c){if(!this._sourceLoaded||this._paused)return;let C;this.transform=a,this.terrain=c,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?C=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(ye=>new o.Y(ye.canonical.z,ye.wrap,ye.canonical.z,ye.canonical.x,ye.canonical.y)):(C=$e(a,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(C=C.filter(ye=>this._source.hasTile(ye)))):C=[];const M=nr(a,this._source),k=Math.max(M-ae.maxOverzooming,this._source.minzoom),z=Math.max(M+ae.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ye={};for(const Te of C)if(Te.canonical.z>this._source.minzoom){const ke=Te.scaledTo(Te.canonical.z-1);ye[ke.key]=ke;const Qe=Te.scaledTo(Math.max(this._source.minzoom,Math.min(Te.canonical.z,5)));ye[Qe.key]=Qe}C=C.concat(Object.values(ye))}const Y=C.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,Y&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const J=this._updateRetainedTiles(C,M);f(this._source.type)&&this._updateCoveredAndRetainedTiles(J,k,z,M,C,c);for(const ye in J)this._tiles[ye].clearFadeHold();const se=o.af(this._tiles,J);for(const ye of se){const Te=this._tiles[ye];Te.hasSymbolBuckets&&!Te.holdingForFade()?Te.setHoldDuration(this.map._fadeDuration):Te.hasSymbolBuckets&&!Te.symbolFadeFinished()||this._removeTile(ye)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,c){var C;const M={},k={},z=Math.max(c-ae.maxOverzooming,this._source.minzoom),Y=Math.max(c+ae.maxUnderzooming,this._source.minzoom),J={};for(const se of a){const ye=this._addTile(se);M[se.key]=se,ye.hasData()||c<this._source.maxzoom&&(J[se.key]=se)}this._retainLoadedChildren(J,c,Y,M);for(const se of a){let ye=this._tiles[se.key];if(ye.hasData())continue;if(c+1>this._source.maxzoom){const ke=se.children(this._source.maxzoom)[0],Qe=this.getTile(ke);if(Qe&&Qe.hasData()){M[ke.key]=ke;continue}}else{const ke=se.children(this._source.maxzoom);if(M[ke[0].key]&&M[ke[1].key]&&M[ke[2].key]&&M[ke[3].key])continue}let Te=ye.wasRequested();for(let ke=se.overscaledZ-1;ke>=z;--ke){const Qe=se.scaledTo(ke);if(k[Qe.key])break;if(k[Qe.key]=!0,ye=this.getTile(Qe),!ye&&Te&&(ye=this._addTile(Qe)),ye){const et=ye.hasData();if((et||!(!((C=this.map)===null||C===void 0)&&C.cancelPendingTileRequestsWhileZooming)||Te)&&(M[Qe.key]=Qe),Te=ye.wasRequested(),et)break}}}return M}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const c=[];let C,M=this._tiles[a].tileID;for(;M.overscaledZ>0;){if(M.key in this._loadedParentTiles){C=this._loadedParentTiles[M.key];break}c.push(M.key);const k=M.scaledTo(M.overscaledZ-1);if(C=this._getLoadedTile(k),C)break;M=k}for(const k of c)this._loadedParentTiles[k]=C}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const a in this._tiles){const c=this._tiles[a].tileID,C=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=C}}_addTile(a){let c=this._tiles[a.key];if(c)return c;c=this._cache.getAndRemove(a),c&&(this._setTileReloadTimer(a.key,c),c.tileID=a,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,c)));const C=c;return c||(c=new pe(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,a.key,c.state)),c.uses++,this._tiles[a.key]=c,C||this._source.fire(new o.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(a,c){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const C=c.getExpiryTimeout();C&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},C))}_removeTile(a){const c=this._tiles[a];c&&(c.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(a){const c=a.sourceDataType;a.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&c==="content"&&(this.reload(a.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,c,C){const M=[],k=this.transform;if(!k)return M;const z=C?k.getCameraQueryGeometry(a):a,Y=a.map(et=>k.screenPointToMercatorCoordinate(et,this.terrain)),J=z.map(et=>k.screenPointToMercatorCoordinate(et,this.terrain)),se=this.getIds();let ye=1/0,Te=1/0,ke=-1/0,Qe=-1/0;for(const et of J)ye=Math.min(ye,et.x),Te=Math.min(Te,et.y),ke=Math.max(ke,et.x),Qe=Math.max(Qe,et.y);for(let et=0;et<se.length;et++){const mt=this._tiles[se[et]];if(mt.holdingForFade())continue;const lt=mt.tileID,pt=Math.pow(2,k.zoom-mt.tileID.overscaledZ),bt=c*mt.queryPadding*o.Z/mt.tileSize/pt,Bt=[lt.getTilePoint(new o.$(ye,Te)),lt.getTilePoint(new o.$(ke,Qe))];if(Bt[0].x-bt<o.Z&&Bt[0].y-bt<o.Z&&Bt[1].x+bt>=0&&Bt[1].y+bt>=0){const kt=Y.map(Ut=>lt.getTilePoint(Ut)),Kt=J.map(Ut=>lt.getTilePoint(Ut));M.push({tile:mt,tileID:lt,queryGeometry:kt,cameraQueryGeometry:Kt,scale:pt})}}return M}getVisibleCoordinates(a){const c=this.getRenderableIds(a).map(C=>this._tiles[C].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(f(this._source.type)){const a=T.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=a)return!0}return!1}setFeatureState(a,c,C){this._state.updateState(a=a||"_geojsonTileLayer",c,C)}removeFeatureState(a,c,C){this._state.removeFeatureState(a=a||"_geojsonTileLayer",c,C)}getFeatureState(a,c){return this._state.getState(a=a||"_geojsonTileLayer",c)}setDependencies(a,c,C){const M=this._tiles[a];M&&M.setDependencies(c,C)}reloadTilesForDependencies(a,c){for(const C in this._tiles)this._tiles[C].hasDependency(a,c)&&this._reloadTile(C,"reloading");this._cache.filter(C=>!C.hasDependency(a,c))}}function Ce(O,a){const c=Math.abs(2*O.wrap)-+(O.wrap<0),C=Math.abs(2*a.wrap)-+(a.wrap<0);return O.overscaledZ-a.overscaledZ||C-c||a.canonical.y-O.canonical.y||a.canonical.x-O.canonical.x}function f(O){return O==="raster"||O==="image"||O==="video"}ae.maxOverzooming=10,ae.maxUnderzooming=3;class je{constructor(a,c){this.reset(a,c)}reset(a,c){this.points=a||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ae(a,0,1);let c=1,C=this._distances[c];const M=a*this.paddedLength+this.padding;for(;C<M&&c<this._distances.length;)C=this._distances[++c];const k=c-1,z=this._distances[k],Y=C-z,J=Y>0?(M-z)/Y:0;return this.points[k].mult(1-J).add(this.points[c].mult(J))}}function qe(O,a){let c=!0;return O==="always"||O!=="never"&&a!=="never"||(c=!1),c}class Je{constructor(a,c,C){const M=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(a/C),this.yCellCount=Math.ceil(c/C);for(let z=0;z<this.xCellCount*this.yCellCount;z++)M.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=c,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,c,C,M,k){this._forEachCell(c,C,M,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(c),this.bboxes.push(C),this.bboxes.push(M),this.bboxes.push(k)}insertCircle(a,c,C,M){this._forEachCell(c-M,C-M,c+M,C+M,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(c),this.circles.push(C),this.circles.push(M)}_insertBoxCell(a,c,C,M,k,z){this.boxCells[k].push(z)}_insertCircleCell(a,c,C,M,k,z){this.circleCells[k].push(z)}_query(a,c,C,M,k,z,Y){if(C<0||a>this.width||M<0||c>this.height)return[];const J=[];if(a<=0&&c<=0&&this.width<=C&&this.height<=M){if(k)return[{key:null,x1:a,y1:c,x2:C,y2:M}];for(let se=0;se<this.boxKeys.length;se++)J.push({key:this.boxKeys[se],x1:this.bboxes[4*se],y1:this.bboxes[4*se+1],x2:this.bboxes[4*se+2],y2:this.bboxes[4*se+3]});for(let se=0;se<this.circleKeys.length;se++){const ye=this.circles[3*se],Te=this.circles[3*se+1],ke=this.circles[3*se+2];J.push({key:this.circleKeys[se],x1:ye-ke,y1:Te-ke,x2:ye+ke,y2:Te+ke})}}else this._forEachCell(a,c,C,M,this._queryCell,J,{hitTest:k,overlapMode:z,seenUids:{box:{},circle:{}}},Y);return J}query(a,c,C,M){return this._query(a,c,C,M,!1,null)}hitTest(a,c,C,M,k,z){return this._query(a,c,C,M,!0,k,z).length>0}hitTestCircle(a,c,C,M,k){const z=a-C,Y=a+C,J=c-C,se=c+C;if(Y<0||z>this.width||se<0||J>this.height)return!1;const ye=[];return this._forEachCell(z,J,Y,se,this._queryCellCircle,ye,{hitTest:!0,overlapMode:M,circle:{x:a,y:c,radius:C},seenUids:{box:{},circle:{}}},k),ye.length>0}_queryCell(a,c,C,M,k,z,Y,J){const{seenUids:se,hitTest:ye,overlapMode:Te}=Y,ke=this.boxCells[k];if(ke!==null){const et=this.bboxes;for(const mt of ke)if(!se.box[mt]){se.box[mt]=!0;const lt=4*mt,pt=this.boxKeys[mt];if(a<=et[lt+2]&&c<=et[lt+3]&&C>=et[lt+0]&&M>=et[lt+1]&&(!J||J(pt))&&(!ye||!qe(Te,pt.overlapMode))&&(z.push({key:pt,x1:et[lt],y1:et[lt+1],x2:et[lt+2],y2:et[lt+3]}),ye))return!0}}const Qe=this.circleCells[k];if(Qe!==null){const et=this.circles;for(const mt of Qe)if(!se.circle[mt]){se.circle[mt]=!0;const lt=3*mt,pt=this.circleKeys[mt];if(this._circleAndRectCollide(et[lt],et[lt+1],et[lt+2],a,c,C,M)&&(!J||J(pt))&&(!ye||!qe(Te,pt.overlapMode))){const bt=et[lt],Bt=et[lt+1],kt=et[lt+2];if(z.push({key:pt,x1:bt-kt,y1:Bt-kt,x2:bt+kt,y2:Bt+kt}),ye)return!0}}}return!1}_queryCellCircle(a,c,C,M,k,z,Y,J){const{circle:se,seenUids:ye,overlapMode:Te}=Y,ke=this.boxCells[k];if(ke!==null){const et=this.bboxes;for(const mt of ke)if(!ye.box[mt]){ye.box[mt]=!0;const lt=4*mt,pt=this.boxKeys[mt];if(this._circleAndRectCollide(se.x,se.y,se.radius,et[lt+0],et[lt+1],et[lt+2],et[lt+3])&&(!J||J(pt))&&!qe(Te,pt.overlapMode))return z.push(!0),!0}}const Qe=this.circleCells[k];if(Qe!==null){const et=this.circles;for(const mt of Qe)if(!ye.circle[mt]){ye.circle[mt]=!0;const lt=3*mt,pt=this.circleKeys[mt];if(this._circlesCollide(et[lt],et[lt+1],et[lt+2],se.x,se.y,se.radius)&&(!J||J(pt))&&!qe(Te,pt.overlapMode))return z.push(!0),!0}}}_forEachCell(a,c,C,M,k,z,Y,J){const se=this._convertToXCellCoord(a),ye=this._convertToYCellCoord(c),Te=this._convertToXCellCoord(C),ke=this._convertToYCellCoord(M);for(let Qe=se;Qe<=Te;Qe++)for(let et=ye;et<=ke;et++)if(k.call(this,a,c,C,M,this.xCellCount*et+Qe,z,Y,J))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,c,C,M,k,z){const Y=M-a,J=k-c,se=C+z;return se*se>Y*Y+J*J}_circleAndRectCollide(a,c,C,M,k,z,Y){const J=(z-M)/2,se=Math.abs(a-(M+J));if(se>J+C)return!1;const ye=(Y-k)/2,Te=Math.abs(c-(k+ye));if(Te>ye+C)return!1;if(se<=J||Te<=ye)return!0;const ke=se-J,Qe=Te-ye;return ke*ke+Qe*Qe<=C*C}}function ut(O,a,c){const C=o.K();if(!O){const{vecSouth:Te,vecEast:ke}=Qt(a),Qe=v();Qe[0]=ke[0],Qe[1]=ke[1],Qe[2]=Te[0],Qe[3]=Te[1],M=Qe,(ye=(z=(k=Qe)[0])*(se=k[3])-(J=k[2])*(Y=k[1]))&&(M[0]=se*(ye=1/ye),M[1]=-Y*ye,M[2]=-J*ye,M[3]=z*ye),C[0]=Qe[0],C[1]=Qe[1],C[4]=Qe[2],C[5]=Qe[3]}var M,k,z,Y,J,se,ye;return o.M(C,C,[1/c,1/c,1]),C}function dt(O,a,c,C){if(O){const M=o.K();if(!a){const{vecSouth:k,vecEast:z}=Qt(c);M[0]=z[0],M[1]=z[1],M[4]=k[0],M[5]=k[1]}return o.M(M,M,[C,C,1]),M}return c.pixelsToClipSpaceMatrix}function Qt(O){const a=Math.cos(O.rollInRadians),c=Math.sin(O.rollInRadians),C=Math.cos(O.pitchInRadians),M=Math.cos(O.bearingInRadians),k=Math.sin(O.bearingInRadians),z=o.ak();z[0]=-M*C*c-k*a,z[1]=-k*C*c+M*a;const Y=o.al(z);Y<1e-9?o.am(z):o.an(z,z,1/Y);const J=o.ak();J[0]=M*C*a-k*c,J[1]=k*C*a+M*c;const se=o.al(J);return se<1e-9?o.am(J):o.an(J,J,1/se),{vecEast:J,vecSouth:z}}function Wt(O,a,c,C){let M;C?(M=[O,a,C(O,a),1],o.ap(M,M,c)):(M=[O,a,0,1],wi(M,M,c));const k=M[3];return{point:new o.P(M[0]/k,M[1]/k),signedDistanceFromCamera:k,isOccluded:!1}}function jt(O,a){return .5+O/a*.5}function tn(O,a){return O.x>=-a[0]&&O.x<=a[0]&&O.y>=-a[1]&&O.y<=a[1]}function Dn(O,a,c,C,M,k,z,Y,J,se,ye,Te,ke){const Qe=c?O.textSizeData:O.iconSizeData,et=o.ag(Qe,a.transform.zoom),mt=[256/a.width*2+1,256/a.height*2+1],lt=c?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;lt.clear();const pt=O.lineVertexArray,bt=c?O.text.placedSymbolArray:O.icon.placedSymbolArray,Bt=a.transform.width/a.transform.height;let kt=!1;for(let Kt=0;Kt<bt.length;Kt++){const Ut=bt.get(Kt);if(Ut.hidden||Ut.writingMode===o.ah.vertical&&!kt){Mr(Ut.numGlyphs,lt);continue}kt=!1;const It=new o.P(Ut.anchorX,Ut.anchorY),nn={getElevation:ke,pitchedLabelPlaneMatrix:C,lineVertexArray:pt,pitchWithMap:k,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:a.transform,tileAnchorPoint:It,unwrappedTileID:J,width:se,height:ye,translation:Te},qt=$n(Ut.anchorX,Ut.anchorY,nn);if(!tn(qt.point,mt)){Mr(Ut.numGlyphs,lt);continue}const xn=jt(a.transform.cameraToCenterDistance,qt.signedDistanceFromCamera),Sn=o.ai(Qe,et,Ut),Cn=k?Sn*a.transform.getPitchedTextCorrection(Ut.anchorX,Ut.anchorY,J)/xn:Sn*xn,In=Sr({projectionContext:nn,pitchedLabelPlaneMatrixInverse:M,symbol:Ut,fontSize:Cn,flip:!1,keepUpright:z,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:lt,aspectRatio:Bt,rotateToLine:Y});kt=In.useVertical,(In.notEnoughRoom||kt||In.needsFlipping&&Sr({projectionContext:nn,pitchedLabelPlaneMatrixInverse:M,symbol:Ut,fontSize:Cn,flip:!0,keepUpright:z,glyphOffsetArray:O.glyphOffsetArray,dynamicLayoutVertexArray:lt,aspectRatio:Bt,rotateToLine:Y}).notEnoughRoom)&&Mr(Ut.numGlyphs,lt)}c?O.text.dynamicLayoutVertexBuffer.updateData(lt):O.icon.dynamicLayoutVertexBuffer.updateData(lt)}function Fn(O,a,c,C,M,k,z,Y){const J=k.glyphStartIndex+k.numGlyphs,se=k.lineStartIndex,ye=k.lineStartIndex+k.lineLength,Te=a.getoffsetX(k.glyphStartIndex),ke=a.getoffsetX(J-1),Qe=co(O*Te,c,C,M,k.segment,se,ye,Y,z);if(!Qe)return null;const et=co(O*ke,c,C,M,k.segment,se,ye,Y,z);return et?Y.projectionCache.anyProjectionOccluded?null:{first:Qe,last:et}:null}function on(O,a,c,C){return O===o.ah.horizontal&&Math.abs(c.y-a.y)>Math.abs(c.x-a.x)*C?{useVertical:!0}:(O===o.ah.vertical?a.y<c.y:a.x>c.x)?{needsFlipping:!0}:null}function Sr(O){const{projectionContext:a,pitchedLabelPlaneMatrixInverse:c,symbol:C,fontSize:M,flip:k,keepUpright:z,glyphOffsetArray:Y,dynamicLayoutVertexArray:J,aspectRatio:se,rotateToLine:ye}=O,Te=M/24,ke=C.lineOffsetX*Te,Qe=C.lineOffsetY*Te;let et;if(C.numGlyphs>1){const mt=C.glyphStartIndex+C.numGlyphs,lt=C.lineStartIndex,pt=C.lineStartIndex+C.lineLength,bt=Fn(Te,Y,ke,Qe,k,C,ye,a);if(!bt)return{notEnoughRoom:!0};const Bt=Bn(bt.first.point.x,bt.first.point.y,a,c),kt=Bn(bt.last.point.x,bt.last.point.y,a,c);if(z&&!k){const Kt=on(C.writingMode,Bt,kt,se);if(Kt)return Kt}et=[bt.first];for(let Kt=C.glyphStartIndex+1;Kt<mt-1;Kt++)et.push(co(Te*Y.getoffsetX(Kt),ke,Qe,k,C.segment,lt,pt,a,ye));et.push(bt.last)}else{if(z&&!k){const lt=qr(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,pt=C.lineStartIndex+C.segment+1,bt=new o.P(a.lineVertexArray.getx(pt),a.lineVertexArray.gety(pt)),Bt=qr(bt.x,bt.y,a),kt=Bt.signedDistanceFromCamera>0?Bt.point:Hn(a.tileAnchorPoint,bt,lt,1,a),Kt=Bn(lt.x,lt.y,a,c),Ut=Bn(kt.x,kt.y,a,c),It=on(C.writingMode,Kt,Ut,se);if(It)return It}const mt=co(Te*Y.getoffsetX(C.glyphStartIndex),ke,Qe,k,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,a,ye);if(!mt||a.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};et=[mt]}for(const mt of et)o.ao(J,mt.point,mt.angle);return{}}function Hn(O,a,c,C,M){const k=O.add(O.sub(a)._unit()),z=qr(k.x,k.y,M).point,Y=c.sub(z);return c.add(Y._mult(C/Y.mag()))}function xr(O,a,c){const C=a.projectionCache;if(C.projections[O])return C.projections[O];const M=new o.P(a.lineVertexArray.getx(O),a.lineVertexArray.gety(O)),k=qr(M.x,M.y,a);if(k.signedDistanceFromCamera>0)return C.projections[O]=k.point,C.anyProjectionOccluded=C.anyProjectionOccluded||k.isOccluded,k.point;const z=O-c.direction;return Hn(c.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(z),a.lineVertexArray.gety(z)),M,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,a)}function qr(O,a,c){const C=O+c.translation[0],M=a+c.translation[1];let k;return c.pitchWithMap?(k=Wt(C,M,c.pitchedLabelPlaneMatrix,c.getElevation),k.isOccluded=!1):(k=c.transform.projectTileCoordinates(C,M,c.unwrappedTileID,c.getElevation),k.point.x=(.5*k.point.x+.5)*c.width,k.point.y=(.5*-k.point.y+.5)*c.height),k}function Bn(O,a,c,C){if(c.pitchWithMap){const M=[O,a,0,1];return o.ap(M,M,C),c.transform.projectTileCoordinates(M[0]/M[3],M[1]/M[3],c.unwrappedTileID,c.getElevation).point}return{x:O/c.width*2-1,y:a/c.height*2-1}}function $n(O,a,c){return c.transform.projectTileCoordinates(O,a,c.unwrappedTileID,c.getElevation)}function Yn(O,a,c){return O._unit()._perp()._mult(a*c)}function Qr(O,a,c,C,M,k,z,Y,J){if(Y.projectionCache.offsets[O])return Y.projectionCache.offsets[O];const se=c.add(a);if(O+J.direction<C||O+J.direction>=M)return Y.projectionCache.offsets[O]=se,se;const ye=xr(O+J.direction,Y,J),Te=Yn(ye.sub(c),z,J.direction),ke=c.add(Te),Qe=ye.add(Te);return Y.projectionCache.offsets[O]=o.aq(k,se,ke,Qe)||se,Y.projectionCache.offsets[O]}function co(O,a,c,C,M,k,z,Y,J){const se=C?O-a:O+a;let ye=se>0?1:-1,Te=0;C&&(ye*=-1,Te=Math.PI),ye<0&&(Te+=Math.PI);let ke,Qe=ye>0?k+M:k+M+1;Y.projectionCache.cachedAnchorPoint?ke=Y.projectionCache.cachedAnchorPoint:(ke=qr(Y.tileAnchorPoint.x,Y.tileAnchorPoint.y,Y).point,Y.projectionCache.cachedAnchorPoint=ke);let et,mt,lt=ke,pt=ke,bt=0,Bt=0;const kt=Math.abs(se),Kt=[];let Ut;for(;bt+Bt<=kt;){if(Qe+=ye,Qe<k||Qe>=z)return null;bt+=Bt,pt=lt,mt=et;const qt={absOffsetX:kt,direction:ye,distanceFromAnchor:bt,previousVertex:pt};if(lt=xr(Qe,Y,qt),c===0)Kt.push(pt),Ut=lt.sub(pt);else{let xn;const Sn=lt.sub(pt);xn=Sn.mag()===0?Yn(xr(Qe+ye,Y,qt).sub(lt),c,ye):Yn(Sn,c,ye),mt||(mt=pt.add(xn)),et=Qr(Qe,xn,lt,k,z,mt,c,Y,qt),Kt.push(mt),Ut=et.sub(mt)}Bt=Ut.mag()}const It=Ut._mult((kt-bt)/Bt)._add(mt||pt),nn=Te+Math.atan2(lt.y-pt.y,lt.x-pt.x);return Kt.push(It),{point:It,angle:J?nn:0,path:Kt}}const ma=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Mr(O,a){for(let c=0;c<O;c++){const C=a.length;a.resize(C+4),a.float32.set(ma,3*C)}}function wi(O,a,c){const C=a[0],M=a[1];return O[0]=c[0]*C+c[4]*M+c[12],O[1]=c[1]*C+c[5]*M+c[13],O[3]=c[3]*C+c[7]*M+c[15],O}const Zi=100;class Ts{constructor(a,c=new Je(a.width+200,a.height+200,25),C=new Je(a.width+200,a.height+200,25)){this.transform=a,this.grid=c,this.ignoredGrid=C,this.pitchFactor=Math.cos(a.pitch*Math.PI/180)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Zi,this.screenBottomBoundary=a.height+Zi,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,c,C,M,k,z,Y,J,se,ye,Te,ke){const Qe=this.projectAndGetPerspectiveRatio(a.anchorPointX+J[0],a.anchorPointY+J[1],k,ye,ke),et=C*Qe.perspectiveRatio;let mt;if(z||Y)mt=this._projectCollisionBox(a,et,M,k,z,Y,J,Qe,ye,Te,ke);else{const Ut=Qe.x+(Te?Te.x*et:0),It=Qe.y+(Te?Te.y*et:0);mt={allPointsOccluded:!1,box:[Ut+a.x1*et,It+a.y1*et,Ut+a.x2*et,It+a.y2*et]}}const[lt,pt,bt,Bt]=mt.box,kt=z?mt.allPointsOccluded:Qe.isOccluded;let Kt=kt;return Kt||(Kt=Qe.perspectiveRatio<this.perspectiveRatioCutoff),Kt||(Kt=!this.isInsideGrid(lt,pt,bt,Bt)),Kt||c!=="always"&&this.grid.hitTest(lt,pt,bt,Bt,c,se)?{box:[lt,pt,bt,Bt],placeable:!1,offscreen:!1,occluded:kt}:{box:[lt,pt,bt,Bt],placeable:!0,offscreen:this.isOffscreen(lt,pt,bt,Bt),occluded:kt}}placeCollisionCircles(a,c,C,M,k,z,Y,J,se,ye,Te,ke,Qe,et){const mt=[],lt=new o.P(c.anchorX,c.anchorY),pt=this.getPerspectiveRatio(lt.x,lt.y,z,et),bt=(se?k*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,z)/pt:k*pt)/o.av,Bt={getElevation:et,pitchedLabelPlaneMatrix:Y,lineVertexArray:C,pitchWithMap:se,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:lt,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:Qe},kt=Fn(bt,M,c.lineOffsetX*bt,c.lineOffsetY*bt,!1,c,!1,Bt);let Kt=!1,Ut=!1,It=!0;if(kt){const nn=.5*Te*pt+ke,qt=new o.P(-100,-100),xn=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Sn=new je,Cn=kt.first,In=kt.last;let Nn=[];for(let Ri=Cn.path.length-1;Ri>=1;Ri--)Nn.push(Cn.path[Ri]);for(let Ri=1;Ri<In.path.length;Ri++)Nn.push(In.path[Ri]);const Rn=2.5*nn;if(se){const Ri=this.projectPathToScreenSpace(Nn,Bt);Nn=Ri.some(Xi=>Xi.signedDistanceFromCamera<=0)?[]:Ri.map(Xi=>Xi.point)}let kr=[];if(Nn.length>0){const Ri=Nn[0].clone(),Xi=Nn[0].clone();for(let _i=1;_i<Nn.length;_i++)Ri.x=Math.min(Ri.x,Nn[_i].x),Ri.y=Math.min(Ri.y,Nn[_i].y),Xi.x=Math.max(Xi.x,Nn[_i].x),Xi.y=Math.max(Xi.y,Nn[_i].y);kr=Ri.x>=qt.x&&Xi.x<=xn.x&&Ri.y>=qt.y&&Xi.y<=xn.y?[Nn]:Xi.x<qt.x||Ri.x>xn.x||Xi.y<qt.y||Ri.y>xn.y?[]:o.ar([Nn],qt.x,qt.y,xn.x,xn.y)}for(const Ri of kr){Sn.reset(Ri,.25*nn);let Xi=0;Xi=Sn.length<=.5*nn?1:Math.ceil(Sn.paddedLength/Rn)+1;for(let _i=0;_i<Xi;_i++){const Bi=_i/Math.max(Xi-1,1),Qo=Sn.lerp(Bi),Lo=Qo.x+Zi,So=Qo.y+Zi;mt.push(Lo,So,nn,0);const fo=Lo-nn,ca=So-nn,Ho=Lo+nn,rs=So+nn;if(It=It&&this.isOffscreen(fo,ca,Ho,rs),Ut=Ut||this.isInsideGrid(fo,ca,Ho,rs),a!=="always"&&this.grid.hitTestCircle(Lo,So,nn,a,ye)&&(Kt=!0,!J))return{circles:[],offscreen:!1,collisionDetected:Kt}}}}return{circles:!J&&Kt||!Ut||pt<this.perspectiveRatioCutoff?[]:mt,offscreen:It,collisionDetected:Kt}}projectPathToScreenSpace(a,c){const C=function(M,k){const z=o.K();return o.aj(z,k.pitchedLabelPlaneMatrix),M.map(Y=>{const J=Wt(Y.x,Y.y,z,k.getElevation),se=k.transform.projectTileCoordinates(J.point.x,J.point.y,k.unwrappedTileID,k.getElevation);return se.point.x=(.5*se.point.x+.5)*k.width,se.point.y=(.5*-se.point.y+.5)*k.height,se})}(a,c);return function(M){let k=0,z=0,Y=0,J=0;for(let se=0;se<M.length;se++)M[se].isOccluded?(Y=se+1,J=0):(J++,J>z&&(z=J,k=Y));return M.slice(k,k+z)}(C)}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let C=1/0,M=1/0,k=-1/0,z=-1/0;for(const ye of a){const Te=new o.P(ye.x+Zi,ye.y+Zi);C=Math.min(C,Te.x),M=Math.min(M,Te.y),k=Math.max(k,Te.x),z=Math.max(z,Te.y),c.push(Te)}const Y=this.grid.query(C,M,k,z).concat(this.ignoredGrid.query(C,M,k,z)),J={},se={};for(const ye of Y){const Te=ye.key;if(J[Te.bucketInstanceId]===void 0&&(J[Te.bucketInstanceId]={}),J[Te.bucketInstanceId][Te.featureIndex])continue;const ke=[new o.P(ye.x1,ye.y1),new o.P(ye.x2,ye.y1),new o.P(ye.x2,ye.y2),new o.P(ye.x1,ye.y2)];o.as(c,ke)&&(J[Te.bucketInstanceId][Te.featureIndex]=!0,se[Te.bucketInstanceId]===void 0&&(se[Te.bucketInstanceId]=[]),se[Te.bucketInstanceId].push(Te.featureIndex))}return se}insertCollisionBox(a,c,C,M,k,z){(C?this.ignoredGrid:this.grid).insert({bucketInstanceId:M,featureIndex:k,collisionGroupID:z,overlapMode:c},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,c,C,M,k,z){const Y=C?this.ignoredGrid:this.grid,J={bucketInstanceId:M,featureIndex:k,collisionGroupID:z,overlapMode:c};for(let se=0;se<a.length;se+=4)Y.insertCircle(J,a[se],a[se+1],a[se+2])}projectAndGetPerspectiveRatio(a,c,C,M,k){if(k){let z;M?(z=[a,c,M(a,c),1],o.ap(z,z,k)):(z=[a,c,0,1],wi(z,z,k));const Y=z[3];return{x:(z[0]/Y+1)/2*this.transform.width+Zi,y:(-z[1]/Y+1)/2*this.transform.height+Zi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/Y*.5,isOccluded:!1,signedDistanceFromCamera:Y}}{const z=this.transform.projectTileCoordinates(a,c,C,M);return{x:(z.point.x+1)/2*this.transform.width+Zi,y:(1-z.point.y)/2*this.transform.height+Zi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/z.signedDistanceFromCamera*.5,isOccluded:z.isOccluded,signedDistanceFromCamera:z.signedDistanceFromCamera}}}getPerspectiveRatio(a,c,C,M){const k=this.transform.projectTileCoordinates(a,c,C,M);return .5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5}isOffscreen(a,c,C,M){return C<Zi||a>=this.screenRightBoundary||M<Zi||c>this.screenBottomBoundary}isInsideGrid(a,c,C,M){return C>=0&&a<this.gridRightBoundary&&M>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const a=o.at([]);return o.L(a,a,[-100,-100,0]),a}_projectCollisionBox(a,c,C,M,k,z,Y,J,se,ye,Te){let ke=1,Qe=0,et=0,mt=1;const lt=a.anchorPointX+Y[0],pt=a.anchorPointY+Y[1];if(z&&!k){const Nn=this.projectAndGetPerspectiveRatio(lt+1,pt,M,se,Te),Rn=Nn.x-J.x,kr=Math.atan((Nn.y-J.y)/Rn)+(Rn<0?Math.PI:0),Ri=Math.sin(kr),Xi=Math.cos(kr);ke=Xi,Qe=Ri,et=-Ri,mt=Xi}else if(!z&&k){const Nn=Qt(this.transform);ke=Nn.vecEast[0],Qe=Nn.vecEast[1],et=Nn.vecSouth[0],mt=Nn.vecSouth[1]}let bt=J.x,Bt=J.y,kt=c;k&&(bt=lt,Bt=pt,kt=Math.pow(2,-(this.transform.zoom-C.overscaledZ)),kt*=this.transform.getPitchedTextCorrection(lt,pt,M),ye||(kt*=o.ae(.5+J.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ye&&(bt+=ke*ye.x*kt+et*ye.y*kt,Bt+=Qe*ye.x*kt+mt*ye.y*kt);const Kt=a.x1*kt,Ut=a.x2*kt,It=(Kt+Ut)/2,nn=a.y1*kt,qt=a.y2*kt,xn=(nn+qt)/2,Sn=[{offsetX:Kt,offsetY:nn},{offsetX:It,offsetY:nn},{offsetX:Ut,offsetY:nn},{offsetX:Ut,offsetY:xn},{offsetX:Ut,offsetY:qt},{offsetX:It,offsetY:qt},{offsetX:Kt,offsetY:qt},{offsetX:Kt,offsetY:xn}];let Cn=[];for(const{offsetX:Nn,offsetY:Rn}of Sn)Cn.push(new o.P(bt+ke*Nn+et*Rn,Bt+Qe*Nn+mt*Rn));let In=!1;if(k){const Nn=Cn.map(Rn=>this.projectAndGetPerspectiveRatio(Rn.x,Rn.y,M,se,Te));In=Nn.some(Rn=>!Rn.isOccluded),Cn=Nn.map(Rn=>new o.P(Rn.x,Rn.y))}else In=!0;return{box:o.au(Cn),allPointsOccluded:!In}}}class xs{constructor(a,c,C,M){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?c:-c))):M&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class aa{constructor(a,c,C,M,k){this.text=new xs(a?a.text:null,c,C,k),this.icon=new xs(a?a.icon:null,c,M,k)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ps{constructor(a,c,C){this.text=a,this.icon=c,this.skipFade=C}}class bi{constructor(a,c,C,M,k){this.bucketInstanceId=a,this.featureIndex=c,this.sourceLayerIndex=C,this.bucketIndex=M,this.tileID=k}}class Il{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const c=++this.maxGroupID;this.collisionGroups[a]={ID:c,predicate:C=>C.collisionGroupID===c}}return this.collisionGroups[a]}}function kl(O,a,c,C,M){const{horizontalAlign:k,verticalAlign:z}=o.aB(O);return new o.P(-(k-.5)*a+C[0]*M,-(z-.5)*c+C[1]*M)}class io{constructor(a,c,C,M,k){this.transform=a.clone(),this.terrain=c,this.collisionIndex=new Ts(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=C,this.retainedQueryData={},this.collisionGroups=new Il(M),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){const c=this.terrain;return c?(C,M)=>c.getElevation(a,C,M):null}getBucketParts(a,c,C,M){const k=C.getBucket(c),z=C.latestFeatureIndex;if(!k||!z||c.id!==k.layerIds[0])return;const Y=C.collisionBoxArray,J=k.layers[0].layout,se=k.layers[0].paint,ye=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),Te=C.tileSize/o.Z,ke=C.tileID.toUnwrapped(),Qe=J.get("text-rotation-alignment")==="map",et=o.aw(C,1,this.transform.zoom),mt=o.ax(this.collisionIndex.transform,C,se.get("text-translate"),se.get("text-translate-anchor")),lt=o.ax(this.collisionIndex.transform,C,se.get("icon-translate"),se.get("icon-translate-anchor")),pt=ut(Qe,this.transform,et);this.retainedQueryData[k.bucketInstanceId]=new bi(k.bucketInstanceId,z,k.sourceLayerIndex,k.index,C.tileID);const bt={bucket:k,layout:J,translationText:mt,translationIcon:lt,unwrappedTileID:ke,pitchedLabelPlaneMatrix:pt,scale:ye,textPixelRatio:Te,holdingForFade:C.holdingForFade(),collisionBoxArray:Y,partiallyEvaluatedTextSize:o.ag(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(M)for(const Bt of k.sortKeyRanges){const{sortKey:kt,symbolInstanceStart:Kt,symbolInstanceEnd:Ut}=Bt;a.push({sortKey:kt,symbolInstanceStart:Kt,symbolInstanceEnd:Ut,parameters:bt})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:bt})}attemptAnchorPlacement(a,c,C,M,k,z,Y,J,se,ye,Te,ke,Qe,et,mt,lt,pt,bt,Bt,kt){const Kt=o.ay[a.textAnchor],Ut=[a.textOffset0,a.textOffset1],It=kl(Kt,C,M,Ut,k),nn=this.collisionIndex.placeCollisionBox(c,ke,J,se,ye,Y,z,lt,Te.predicate,Bt,It,kt);if((!bt||this.collisionIndex.placeCollisionBox(bt,ke,J,se,ye,Y,z,pt,Te.predicate,Bt,It,kt).placeable)&&nn.placeable){let qt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Qe.crossTileID]&&this.prevPlacement.placements[Qe.crossTileID]&&this.prevPlacement.placements[Qe.crossTileID].text&&(qt=this.prevPlacement.variableOffsets[Qe.crossTileID].anchor),Qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Qe.crossTileID]={textOffset:Ut,width:C,height:M,anchor:Kt,textBoxScale:k,prevAnchor:qt},this.markUsedJustification(et,Kt,Qe,mt),et.allowVerticalPlacement&&(this.markUsedOrientation(et,mt,Qe),this.placedOrientations[Qe.crossTileID]=mt),{shift:It,placedGlyphBoxes:nn}}}placeLayerBucketPart(a,c,C){const{bucket:M,layout:k,translationText:z,translationIcon:Y,unwrappedTileID:J,pitchedLabelPlaneMatrix:se,textPixelRatio:ye,holdingForFade:Te,collisionBoxArray:ke,partiallyEvaluatedTextSize:Qe,collisionGroup:et}=a.parameters,mt=k.get("text-optional"),lt=k.get("icon-optional"),pt=o.az(k,"text-overlap","text-allow-overlap"),bt=pt==="always",Bt=o.az(k,"icon-overlap","icon-allow-overlap"),kt=Bt==="always",Kt=k.get("text-rotation-alignment")==="map",Ut=k.get("text-pitch-alignment")==="map",It=k.get("icon-text-fit")!=="none",nn=k.get("symbol-z-order")==="viewport-y",qt=bt&&(kt||!M.hasIconData()||lt),xn=kt&&(bt||!M.hasTextData()||mt);!M.collisionArrays&&ke&&M.deserializeCollisionBoxes(ke);const Sn=this.retainedQueryData[M.bucketInstanceId].tileID,Cn=this._getTerrainElevationFunc(Sn),In=this.transform.getFastPathSimpleProjectionMatrix(Sn),Nn=(Rn,kr,Ri)=>{var Xi,_i;if(c[Rn.crossTileID])return;if(Te)return void(this.placements[Rn.crossTileID]=new ps(!1,!1,!1));let Bi=!1,Qo=!1,Lo=!0,So=null,fo={box:null,placeable:!1,offscreen:null,occluded:!1},ca={placeable:!1},Ho=null,rs=null,xl=null,BA=0,pu=0,Vl=0;kr.textFeatureIndex?BA=kr.textFeatureIndex:Rn.useRuntimeCollisionCircles&&(BA=Rn.featureIndex),kr.verticalTextFeatureIndex&&(pu=kr.verticalTextFeatureIndex);const $l=kr.textBox;if($l){const xa=Ns=>{let ds=o.ah.horizontal;if(M.allowVerticalPlacement&&!Ns&&this.prevPlacement){const Ra=this.prevPlacement.placedOrientations[Rn.crossTileID];Ra&&(this.placedOrientations[Rn.crossTileID]=Ra,ds=Ra,this.markUsedOrientation(M,ds,Rn))}return ds},Ku=(Ns,ds)=>{if(M.allowVerticalPlacement&&Rn.numVerticalGlyphVertices>0&&kr.verticalTextBox){for(const Ra of M.writingModes)if(Ra===o.ah.vertical?(fo=ds(),ca=fo):fo=Ns(),fo&&fo.placeable)break}else fo=Ns()},Hl=Rn.textAnchorOffsetStartIndex,Dc=Rn.textAnchorOffsetEndIndex;if(Dc===Hl){const Ns=(ds,Ra)=>{const Cs=this.collisionIndex.placeCollisionBox(ds,pt,ye,Sn,J,Ut,Kt,z,et.predicate,Cn,void 0,In);return Cs&&Cs.placeable&&(this.markUsedOrientation(M,Ra,Rn),this.placedOrientations[Rn.crossTileID]=Ra),Cs};Ku(()=>Ns($l,o.ah.horizontal),()=>{const ds=kr.verticalTextBox;return M.allowVerticalPlacement&&Rn.numVerticalGlyphVertices>0&&ds?Ns(ds,o.ah.vertical):{box:null,offscreen:null}}),xa(fo&&fo.placeable)}else{let Ns=o.ay[(_i=(Xi=this.prevPlacement)===null||Xi===void 0?void 0:Xi.variableOffsets[Rn.crossTileID])===null||_i===void 0?void 0:_i.anchor];const ds=(Cs,sA,lf)=>{const pc=Cs.x2-Cs.x1,sm=Cs.y2-Cs.y1,Oh=Rn.textBoxScale,th=It&&Bt==="never"?sA:null;let Ma=null,cl=pt==="never"?1:2,OA="never";Ns&&cl++;for(let jf=0;jf<cl;jf++){for(let nd=Hl;nd<Dc;nd++){const aA=M.textAnchorOffsets.get(nd);if(Ns&&aA.textAnchor!==Ns)continue;const dl=this.attemptAnchorPlacement(aA,Cs,pc,sm,Oh,Kt,Ut,ye,Sn,J,et,OA,Rn,M,lf,z,Y,th,Cn);if(dl&&(Ma=dl.placedGlyphBoxes,Ma&&Ma.placeable))return Bi=!0,So=dl.shift,Ma}Ns?Ns=null:OA=pt}return C&&!Ma&&(Ma={box:this.collisionIndex.placeCollisionBox($l,"always",ye,Sn,J,Ut,Kt,z,et.predicate,Cn,void 0,In).box,offscreen:!1,placeable:!1,occluded:!1}),Ma};Ku(()=>ds($l,kr.iconBox,o.ah.horizontal),()=>{const Cs=kr.verticalTextBox;return M.allowVerticalPlacement&&(!fo||!fo.placeable)&&Rn.numVerticalGlyphVertices>0&&Cs?ds(Cs,kr.verticalIconBox,o.ah.vertical):{box:null,occluded:!0,offscreen:null}}),fo&&(Bi=fo.placeable,Lo=fo.offscreen);const Ra=xa(fo&&fo.placeable);if(!Bi&&this.prevPlacement){const Cs=this.prevPlacement.variableOffsets[Rn.crossTileID];Cs&&(this.variableOffsets[Rn.crossTileID]=Cs,this.markUsedJustification(M,Cs.anchor,Rn,Ra))}}}if(Ho=fo,Bi=Ho&&Ho.placeable,Lo=Ho&&Ho.offscreen,Rn.useRuntimeCollisionCircles){const xa=M.text.placedSymbolArray.get(Rn.centerJustifiedTextSymbolIndex),Ku=o.ai(M.textSizeData,Qe,xa),Hl=k.get("text-padding");rs=this.collisionIndex.placeCollisionCircles(pt,xa,M.lineVertexArray,M.glyphOffsetArray,Ku,J,se,C,Ut,et.predicate,Rn.collisionCircleDiameter,Hl,z,Cn),rs.circles.length&&rs.collisionDetected&&!C&&o.w("Collisions detected, but collision boxes are not shown"),Bi=bt||rs.circles.length>0&&!rs.collisionDetected,Lo=Lo&&rs.offscreen}if(kr.iconFeatureIndex&&(Vl=kr.iconFeatureIndex),kr.iconBox){const xa=Ku=>this.collisionIndex.placeCollisionBox(Ku,Bt,ye,Sn,J,Ut,Kt,Y,et.predicate,Cn,It&&So?So:void 0,In);ca&&ca.placeable&&kr.verticalIconBox?(xl=xa(kr.verticalIconBox),Qo=xl.placeable):(xl=xa(kr.iconBox),Qo=xl.placeable),Lo=Lo&&xl.offscreen}const oA=mt||Rn.numHorizontalGlyphVertices===0&&Rn.numVerticalGlyphVertices===0,Rl=lt||Rn.numIconVertices===0;oA||Rl?Rl?oA||(Qo=Qo&&Bi):Bi=Qo&&Bi:Qo=Bi=Qo&&Bi;const Pu=Qo&&xl.placeable;if(Bi&&Ho.placeable&&this.collisionIndex.insertCollisionBox(Ho.box,pt,k.get("text-ignore-placement"),M.bucketInstanceId,ca&&ca.placeable&&pu?pu:BA,et.ID),Pu&&this.collisionIndex.insertCollisionBox(xl.box,Bt,k.get("icon-ignore-placement"),M.bucketInstanceId,Vl,et.ID),rs&&Bi&&this.collisionIndex.insertCollisionCircles(rs.circles,pt,k.get("text-ignore-placement"),M.bucketInstanceId,BA,et.ID),C&&this.storeCollisionData(M.bucketInstanceId,Ri,kr,Ho,xl,rs),Rn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(M.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Rn.crossTileID]=new ps((Bi||qt)&&!(Ho!=null&&Ho.occluded),(Qo||xn)&&!(xl!=null&&xl.occluded),Lo||M.justReloaded),c[Rn.crossTileID]=!0};if(nn){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Rn=M.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let kr=Rn.length-1;kr>=0;--kr){const Ri=Rn[kr];Nn(M.symbolInstances.get(Ri),M.collisionArrays[Ri],Ri)}}else for(let Rn=a.symbolInstanceStart;Rn<a.symbolInstanceEnd;Rn++)Nn(M.symbolInstances.get(Rn),M.collisionArrays[Rn],Rn);M.justReloaded=!1}storeCollisionData(a,c,C,M,k,z){if(C.textBox||C.iconBox){let Y,J;this.collisionBoxArrays.has(a)?Y=this.collisionBoxArrays.get(a):(Y=new Map,this.collisionBoxArrays.set(a,Y)),Y.has(c)?J=Y.get(c):(J={text:null,icon:null},Y.set(c,J)),C.textBox&&(J.text=M.box),C.iconBox&&(J.icon=k.box)}if(z){let Y=this.collisionCircleArrays[a];Y===void 0&&(Y=this.collisionCircleArrays[a]=[]);for(let J=0;J<z.circles.length;J+=4)Y.push(z.circles[J+0]-Zi),Y.push(z.circles[J+1]-Zi),Y.push(z.circles[J+2]),Y.push(z.collisionDetected?1:0)}}markUsedJustification(a,c,C,M){let k;k=M===o.ah.vertical?C.verticalPlacedTextSymbolIndex:{left:C.leftJustifiedTextSymbolIndex,center:C.centerJustifiedTextSymbolIndex,right:C.rightJustifiedTextSymbolIndex}[o.aA(c)];const z=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex,C.verticalPlacedTextSymbolIndex];for(const Y of z)Y>=0&&(a.text.placedSymbolArray.get(Y).crossTileID=k>=0&&Y!==k?0:C.crossTileID)}markUsedOrientation(a,c,C){const M=c===o.ah.horizontal||c===o.ah.horizontalOnly?c:0,k=c===o.ah.vertical?c:0,z=[C.leftJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.rightJustifiedTextSymbolIndex];for(const Y of z)a.text.placedSymbolArray.get(Y).placedOrientation=M;C.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(C.verticalPlacedTextSymbolIndex).placedOrientation=k)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let C=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const M=c?c.symbolFadeChange(a):1,k=c?c.opacities:{},z=c?c.variableOffsets:{},Y=c?c.placedOrientations:{};for(const J in this.placements){const se=this.placements[J],ye=k[J];ye?(this.opacities[J]=new aa(ye,M,se.text,se.icon),C=C||se.text!==ye.text.placed||se.icon!==ye.icon.placed):(this.opacities[J]=new aa(null,M,se.text,se.icon,se.skipFade),C=C||se.text||se.icon)}for(const J in k){const se=k[J];if(!this.opacities[J]){const ye=new aa(se,M,!1,!1);ye.isHidden()||(this.opacities[J]=ye,C=C||se.text.placed||se.icon.placed)}}for(const J in z)this.variableOffsets[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.variableOffsets[J]=z[J]);for(const J in Y)this.placedOrientations[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.placedOrientations[J]=Y[J]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");C?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:a)}updateLayerOpacities(a,c){const C={};for(const M of c){const k=M.getBucket(a);k&&M.latestFeatureIndex&&a.id===k.layerIds[0]&&this.updateBucketOpacities(k,M.tileID,C,M.collisionBoxArray)}}updateBucketOpacities(a,c,C,M){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const k=a.layers[0],z=k.layout,Y=new aa(null,0,!1,!1,!0),J=z.get("text-allow-overlap"),se=z.get("icon-allow-overlap"),ye=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Te=z.get("text-rotation-alignment")==="map",ke=z.get("text-pitch-alignment")==="map",Qe=z.get("icon-text-fit")!=="none",et=new aa(null,0,J&&(se||!a.hasIconData()||z.get("icon-optional")),se&&(J||!a.hasTextData()||z.get("text-optional")),!0);!a.collisionArrays&&M&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(M);const mt=(pt,bt,Bt)=>{for(let kt=0;kt<bt/4;kt++)pt.opacityVertexArray.emplaceBack(Bt);pt.hasVisibleVertices=pt.hasVisibleVertices||Bt!==yn},lt=this.collisionBoxArrays.get(a.bucketInstanceId);for(let pt=0;pt<a.symbolInstances.length;pt++){const bt=a.symbolInstances.get(pt),{numHorizontalGlyphVertices:Bt,numVerticalGlyphVertices:kt,crossTileID:Kt}=bt;let Ut=this.opacities[Kt];C[Kt]?Ut=Y:Ut||(Ut=et,this.opacities[Kt]=Ut),C[Kt]=!0;const It=bt.numIconVertices>0,nn=this.placedOrientations[bt.crossTileID],qt=nn===o.ah.vertical,xn=nn===o.ah.horizontal||nn===o.ah.horizontalOnly;if(Bt>0||kt>0){const Cn=xt(Ut.text);mt(a.text,Bt,qt?yn:Cn),mt(a.text,kt,xn?yn:Cn);const In=Ut.text.isHidden();[bt.rightJustifiedTextSymbolIndex,bt.centerJustifiedTextSymbolIndex,bt.leftJustifiedTextSymbolIndex].forEach(kr=>{kr>=0&&(a.text.placedSymbolArray.get(kr).hidden=In||qt?1:0)}),bt.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(bt.verticalPlacedTextSymbolIndex).hidden=In||xn?1:0);const Nn=this.variableOffsets[bt.crossTileID];Nn&&this.markUsedJustification(a,Nn.anchor,bt,nn);const Rn=this.placedOrientations[bt.crossTileID];Rn&&(this.markUsedJustification(a,"left",bt,Rn),this.markUsedOrientation(a,Rn,bt))}if(It){const Cn=xt(Ut.icon),In=!(Qe&&bt.verticalPlacedIconSymbolIndex&&qt);bt.placedIconSymbolIndex>=0&&(mt(a.icon,bt.numIconVertices,In?Cn:yn),a.icon.placedSymbolArray.get(bt.placedIconSymbolIndex).hidden=Ut.icon.isHidden()),bt.verticalPlacedIconSymbolIndex>=0&&(mt(a.icon,bt.numVerticalIconVertices,In?yn:Cn),a.icon.placedSymbolArray.get(bt.verticalPlacedIconSymbolIndex).hidden=Ut.icon.isHidden())}const Sn=lt&&lt.has(pt)?lt.get(pt):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Cn=a.collisionArrays[pt];if(Cn){let In=new o.P(0,0);if(Cn.textBox||Cn.verticalTextBox){let Nn=!0;if(ye){const Rn=this.variableOffsets[Kt];Rn?(In=kl(Rn.anchor,Rn.width,Rn.height,Rn.textOffset,Rn.textBoxScale),Te&&In._rotate(ke?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Nn=!1}if(Cn.textBox||Cn.verticalTextBox){let Rn;Cn.textBox&&(Rn=qt),Cn.verticalTextBox&&(Rn=xn),vl(a.textCollisionBox.collisionVertexArray,Ut.text.placed,!Nn||Rn,Sn.text,In.x,In.y)}}if(Cn.iconBox||Cn.verticalIconBox){const Nn=!!(!xn&&Cn.verticalIconBox);let Rn;Cn.iconBox&&(Rn=Nn),Cn.verticalIconBox&&(Rn=!Nn),vl(a.iconCollisionBox.collisionVertexArray,Ut.icon.placed,Rn,Sn.icon,Qe?In.x:0,Qe?In.y:0)}}}}if(a.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);a.bucketInstanceId in this.collisionCircleArrays&&(a.collisionCircleArray=this.collisionCircleArrays[a.bucketInstanceId],delete this.collisionCircleArrays[a.bucketInstanceId])}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,c){const C=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*C>a}setStale(){this.stale=!0}}function vl(O,a,c,C,M,k){C&&C.length!==0||(C=[0,0,0,0]);const z=C[0]-Zi,Y=C[1]-Zi,J=C[2]-Zi,se=C[3]-Zi;O.emplaceBack(a?1:0,c?1:0,M||0,k||0,z,Y),O.emplaceBack(a?1:0,c?1:0,M||0,k||0,J,Y),O.emplaceBack(a?1:0,c?1:0,M||0,k||0,J,se),O.emplaceBack(a?1:0,c?1:0,M||0,k||0,z,se)}const ol=Math.pow(2,25),bo=Math.pow(2,24),Kr=Math.pow(2,17),Wa=Math.pow(2,16),Vo=Math.pow(2,9),Gs=Math.pow(2,8),Ye=Math.pow(2,1);function xt(O){if(O.opacity===0&&!O.placed)return 0;if(O.opacity===1&&O.placed)return 4294967295;const a=O.placed?1:0,c=Math.floor(127*O.opacity);return c*ol+a*bo+c*Kr+a*Wa+c*Vo+a*Gs+c*Ye+a}const yn=0;class Zn{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,c,C,M,k){const z=this._bucketParts;for(;this._currentTileIndex<a.length;)if(c.getBucketParts(z,M,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort((Y,J)=>Y.sortKey-J.sortKey));this._currentPartIndex<z.length;)if(c.placeLayerBucketPart(z[this._currentPartIndex],this._seenCrossTileIDs,C),this._currentPartIndex++,k())return!0;return!1}}class dn{constructor(a,c,C,M,k,z,Y,J){this.placement=new io(a,c,z,Y,J),this._currentPlacementIndex=C.length-1,this._forceFullPlacement=M,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(a,c,C){const M=T.now(),k=()=>!this._forceFullPlacement&&T.now()-M>2;for(;this._currentPlacementIndex>=0;){const z=c[a[this._currentPlacementIndex]],Y=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=Y)&&(!z.maxzoom||z.maxzoom>Y)){if(this._inProgressLayer||(this._inProgressLayer=new Zn(z)),this._inProgressLayer.continuePlacement(C[z.source],this.placement,this._showCollisionBoxes,z,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const lr=512/o.Z/2;class Pi{constructor(a,c,C){this.tileID=a,this.bucketInstanceId=C,this._symbolsByKey={};const M=new Map;for(let k=0;k<c.length;k++){const z=c.get(k),Y=z.key,J=M.get(Y);J?J.push(z):M.set(Y,[z])}for(const[k,z]of M){const Y={positions:z.map(J=>({x:Math.floor(J.anchorX*lr),y:Math.floor(J.anchorY*lr)})),crossTileIDs:z.map(J=>J.crossTileID)};if(Y.positions.length>128){const J=new o.aC(Y.positions.length,16,Uint16Array);for(const{x:se,y:ye}of Y.positions)J.add(se,ye);J.finish(),delete Y.positions,Y.index=J}this._symbolsByKey[k]=Y}}getScaledCoordinates(a,c){const{x:C,y:M,z:k}=this.tileID.canonical,{x:z,y:Y,z:J}=c.canonical,se=lr/Math.pow(2,J-k),ye=(Y*o.Z+a.anchorY)*se,Te=M*o.Z*lr;return{x:Math.floor((z*o.Z+a.anchorX)*se-C*o.Z*lr),y:Math.floor(ye-Te)}}findMatches(a,c,C){const M=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let k=0;k<a.length;k++){const z=a.get(k);if(z.crossTileID)continue;const Y=this._symbolsByKey[z.key];if(!Y)continue;const J=this.getScaledCoordinates(z,c);if(Y.index){const se=Y.index.range(J.x-M,J.y-M,J.x+M,J.y+M).sort();for(const ye of se){const Te=Y.crossTileIDs[ye];if(!C[Te]){C[Te]=!0,z.crossTileID=Te;break}}}else if(Y.positions)for(let se=0;se<Y.positions.length;se++){const ye=Y.positions[se],Te=Y.crossTileIDs[se];if(Math.abs(ye.x-J.x)<=M&&Math.abs(ye.y-J.y)<=M&&!C[Te]){C[Te]=!0,z.crossTileID=Te;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class xo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class as{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const c=Math.round((a-this.lng)/360);if(c!==0)for(const C in this.indexes){const M=this.indexes[C],k={};for(const z in M){const Y=M[z];Y.tileID=Y.tileID.unwrapTo(Y.tileID.wrap+c),k[Y.tileID.key]=Y}this.indexes[C]=k}this.lng=a}addBucket(a,c,C){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let k=0;k<c.symbolInstances.length;k++)c.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const M=this.usedCrossTileIDs[a.overscaledZ];for(const k in this.indexes){const z=this.indexes[k];if(Number(k)>a.overscaledZ)for(const Y in z){const J=z[Y];J.tileID.isChildOf(a)&&J.findMatches(c.symbolInstances,a,M)}else{const Y=z[a.scaledTo(Number(k)).key];Y&&Y.findMatches(c.symbolInstances,a,M)}}for(let k=0;k<c.symbolInstances.length;k++){const z=c.symbolInstances.get(k);z.crossTileID||(z.crossTileID=C.generate(),M[z.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new Pi(a,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(a,c){for(const C of c.getCrossTileIDsLists())for(const M of C)delete this.usedCrossTileIDs[a][M]}removeStaleBuckets(a){let c=!1;for(const C in this.indexes){const M=this.indexes[C];for(const k in M)a[M[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,M[k]),delete M[k],c=!0)}return c}}class la{constructor(){this.layerIndexes={},this.crossTileIDs=new xo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,c,C){let M=this.layerIndexes[a.id];M===void 0&&(M=this.layerIndexes[a.id]=new as);let k=!1;const z={};M.handleWrapJump(C);for(const Y of c){const J=Y.getBucket(a);J&&a.id===J.layerIds[0]&&(J.bucketInstanceId||(J.bucketInstanceId=++this.maxBucketInstanceId),M.addBucket(Y.tileID,J,this.crossTileIDs)&&(k=!0),z[J.bucketInstanceId]=!0)}return M.removeStaleBuckets(z)&&(k=!0),k}pruneUnusedLayers(a){const c={};a.forEach(C=>{c[C]=!0});for(const C in this.layerIndexes)c[C]||delete this.layerIndexes[C]}}var Wu="void main() {fragColor=vec4(1.0);}";const ei={prelude:ki(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ki("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ki("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ki(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ki(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ki(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ki(Wu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ki(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ki(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ki("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ki("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ki("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ki(Wu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ki(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ki(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ki(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ki(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ki(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ki(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ki(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ki(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ki(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ki(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ki(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ki(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ki(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ki(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ki(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ki(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ki("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ki("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ki("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ki("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ki(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ki("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ki(O,a){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=a.match(/in ([\w]+) ([\w]+)/g),M=O.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=k?k.concat(M):M,Y={};return{fragmentSource:O=O.replace(c,(J,se,ye,Te,ke)=>(Y[ke]=!0,se==="define"?`
#ifndef HAS_UNIFORM_u_${ke}
in ${ye} ${Te} ${ke};
#else
uniform ${ye} ${Te} u_${ke};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ke}
    ${ye} ${Te} ${ke} = u_${ke};
#endif
`)),vertexSource:a=a.replace(c,(J,se,ye,Te,ke)=>{const Qe=Te==="float"?"vec2":"vec4",et=ke.match(/color/)?"color":Qe;return Y[ke]?se==="define"?`
#ifndef HAS_UNIFORM_u_${ke}
uniform lowp float u_${ke}_t;
in ${ye} ${Qe} a_${ke};
out ${ye} ${Te} ${ke};
#else
uniform ${ye} ${Te} u_${ke};
#endif
`:et==="vec4"?`
#ifndef HAS_UNIFORM_u_${ke}
    ${ke} = a_${ke};
#else
    ${ye} ${Te} ${ke} = u_${ke};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ke}
    ${ke} = unpack_mix_${et}(a_${ke}, u_${ke}_t);
#else
    ${ye} ${Te} ${ke} = u_${ke};
#endif
`:se==="define"?`
#ifndef HAS_UNIFORM_u_${ke}
uniform lowp float u_${ke}_t;
in ${ye} ${Qe} a_${ke};
#else
uniform ${ye} ${Te} u_${ke};
#endif
`:et==="vec4"?`
#ifndef HAS_UNIFORM_u_${ke}
    ${ye} ${Te} ${ke} = a_${ke};
#else
    ${ye} ${Te} ${ke} = u_${ke};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ke}
    ${ye} ${Te} ${ke} = unpack_mix_${et}(a_${ke}, u_${ke}_t);
#else
    ${ye} ${Te} ${ke} = u_${ke};
#endif
`}),staticAttributes:C,staticUniforms:z}}class zl{constructor(a,c,C){this.vertexBuffer=a,this.indexBuffer=c,this.segments=C}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var na=o.aD([{name:"a_pos",type:"Int16",components:2}]);const Ms="#define PROJECTION_MERCATOR",Mu="mercator";class Si{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Mu}get shaderDefine(){return Ms}get shaderPreludeCode(){return ei.projectionMercator}get vertexShaderPreludeCode(){return ei.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aE.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(a){}getMeshFromTileID(a,c,C,M,k){if(this._cachedMesh)return this._cachedMesh;const z=new o.aF;z.emplaceBack(0,0),z.emplaceBack(o.Z,0),z.emplaceBack(0,o.Z),z.emplaceBack(o.Z,o.Z);const Y=a.createVertexBuffer(z,na.members),J=o.aG.simpleSegment(0,0,4,2),se=new o.aH;se.emplaceBack(1,0,2),se.emplaceBack(1,2,3);const ye=a.createIndexBuffer(se);return this._cachedMesh=new zl(Y,ye,J),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(a){}}function ti(O,a){const c=o.ae(a.lat,-85.051129,o.aJ);return new o.P(o.U(a.lng)*O,o.S(c)*O)}function ls(O,a){return new o.$(a.x/O,a.y/O).toLngLat()}function ka(O){return O.cameraToCenterDistance*Math.min(.85*Math.tan(o.ad(90-O.pitch)),Math.tan(o.ad(89.25-O.pitch)))}function Us(O,a){const c=O.canonical,C=a/o.aI(c.z),M=c.x+Math.pow(2,c.z)*O.wrap,k=o.at(new Float64Array(16));return o.L(k,k,[M*C,c.y*C,0]),o.M(k,k,[C/o.Z,C/o.Z,1]),k}function ho(O,a,c,C,M){const k=o.$.fromLngLat(O,a),z=M*o.aK(1,O.lat),Y=z*Math.cos(o.ad(c)),J=Math.sqrt(z*z-Y*Y),se=J*Math.sin(o.ad(-C)),ye=J*Math.cos(o.ad(-C));return new o.$(k.x+se,k.y+ye,k.z+Y)}class Do{constructor(a=0,c=0,C=0,M=0){if(isNaN(a)||a<0||isNaN(c)||c<0||isNaN(C)||C<0||isNaN(M)||M<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=c,this.left=C,this.right=M}interpolate(a,c,C){return c.top!=null&&a.top!=null&&(this.top=o.B.number(a.top,c.top,C)),c.bottom!=null&&a.bottom!=null&&(this.bottom=o.B.number(a.bottom,c.bottom,C)),c.left!=null&&a.left!=null&&(this.left=o.B.number(a.left,c.left,C)),c.right!=null&&a.right!=null&&(this.right=o.B.number(a.right,c.right,C)),this}getCenter(a,c){const C=o.ae((this.left+a-this.right)/2,0,a),M=o.ae((this.top+c-this.bottom)/2,0,c);return new o.P(C,M)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new Do(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Gu(O,a){if(!O.renderWorldCopies||O.lngRange)return;const c=a.lng-O.center.lng;a.lng+=c>180?-360:c<-180?360:0}function Qs(O){return Math.max(0,Math.floor(O))}class ra{constructor(a,c,C,M,k,z){this._callbacks=a,this._tileSize=512,this._renderWorldCopies=z===void 0||!!z,this._minZoom=c||0,this._maxZoom=C||22,this._minPitch=M??0,this._maxPitch=k??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Qs(this._zoom),this._scale=o.aI(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Do,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(a,c,C){this._latRange=a.latRange,this._lngRange=a.lngRange,this._width=a.width,this._height=a.height,this._center=a.center,this._elevation=a.elevation,this._minElevationForCurrentTile=a.minElevationForCurrentTile,this._zoom=a.zoom,this._tileZoom=Qs(this._zoom),this._scale=o.aI(this._zoom),this._bearingInRadians=a.bearingInRadians,this._fovInRadians=a.fovInRadians,this._pitchInRadians=a.pitchInRadians,this._rollInRadians=a.rollInRadians,this._unmodified=a.unmodified,this._edgeInsets=new Do(a.padding.top,a.padding.bottom,a.padding.left,a.padding.right),this._minZoom=a.minZoom,this._maxZoom=a.maxZoom,this._minPitch=a.minPitch,this._maxPitch=a.maxPitch,this._renderWorldCopies=a.renderWorldCopies,this._cameraToCenterDistance=a.cameraToCenterDistance,this._nearZ=a.nearZ,this._farZ=a.farZ,this._autoCalculateNearFarZ=!C&&a.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(a){this._minElevationForCurrentTile=a}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(a){this._minZoom!==a&&(this._minZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(a){this._minPitch!==a&&(this._minPitch=a,this.setPitch(Math.max(this.pitch,a)))}get maxPitch(){return this._maxPitch}setMaxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.setPitch(Math.min(this.pitch,a)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(a){const c=o.aL(a,-180,180)*Math.PI/180;var C,M,k,z,Y,J,se,ye,Te;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=v(),C=this._rotationMatrix,k=-this._bearingInRadians,z=(M=this._rotationMatrix)[0],Y=M[1],J=M[2],se=M[3],ye=Math.sin(k),Te=Math.cos(k),C[0]=z*Te+J*ye,C[1]=Y*Te+se*ye,C[2]=z*-ye+J*Te,C[3]=Y*-ye+se*Te)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(a){const c=o.ae(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(a){const c=a/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aM(this._fovInRadians)}setFov(a){a=o.ae(a,.1,150),this.fov!==a&&(this._unmodified=!1,this._fovInRadians=o.ad(a),this._calcMatrices())}get zoom(){return this._zoom}setZoom(a){const c=this.getConstrained(this._center,a).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.aI(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(a,c){this._autoCalculateNearFarZ=!1,this._nearZ=a,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,c,C){this._unmodified=!1,this._edgeInsets.interpolate(a,c,C),this._constrain(),this._calcMatrices()}resize(a,c,C=!0){this._width=a,this._height=c,C&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Lt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(a){a?(this._lngRange=[a.getWest(),a.getEast()],this._latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,o.aJ])}getConstrained(a,c){return this._callbacks.getConstrained(a,c)}getCameraQueryGeometry(a,c){if(c.length===1)return[c[0],a];{let C=a.x,M=a.y,k=a.x,z=a.y;for(const Y of c)C=Math.min(C,Y.x),M=Math.min(M,Y.y),k=Math.max(k,Y.x),z=Math.max(z,Y.y);return[new o.P(C,M),new o.P(k,M),new o.P(k,z),new o.P(C,z),new o.P(C,M)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:c,zoom:C}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(C),this._unmodified=a,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let a=o.at(new Float64Array(16));o.M(a,a,[this._width/2,-this._height/2,1]),o.L(a,a,[1,-1,0]),this._clipSpaceToPixelsMatrix=a,a=o.at(new Float64Array(16)),o.M(a,a,[1,-1,1]),o.L(a,a,[-1,-1,0]),o.M(a,a,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=a,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(a,c,C,M){const k=C!==void 0?C:this.bearing,z=M=M!==void 0?M:this.pitch,Y=o.$.fromLngLat(a,c),J=-Math.cos(o.ad(z)),se=Math.sin(o.ad(z)),ye=se*Math.sin(o.ad(k)),Te=-se*Math.cos(o.ad(k));let ke=this.elevation;const Qe=c-ke;let et;J*Qe>=0||Math.abs(J)<.1?(et=1e4,ke=c+et*J):et=-Qe/J;let mt,lt,pt=o.aN(1,Y.y),bt=0;do{if(bt+=1,bt>10)break;lt=et/pt,mt=new o.$(Y.x+ye*lt,Y.y+Te*lt),pt=1/mt.meterInMercatorCoordinateUnits()}while(Math.abs(et-lt*pt)>1e-12);return{center:mt.toLngLat(),elevation:ke,zoom:o.ab(this.height/2/Math.tan(this.fovInRadians/2)/lt/this.tileSize)}}recalculateZoomAndCenter(a){if(this.elevation-a==0)return;const c=o.aK(1,this.center.lat)*this.worldSize,C=this.cameraToCenterDistance/c,M=o.$.fromLngLat(this.center,this.elevation),k=ho(this.center,this.elevation,this.pitch,this.bearing,C);this._elevation=a;const z=this.calculateCenterFromCameraLngLatAlt(k.toLngLat(),o.aN(k.z,M.y),this.bearing,this.pitch);this._elevation=z.elevation,this._center=z.center,this.setZoom(z.zoom)}getCameraPoint(){const a=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(a*Math.sin(this.rollInRadians),a*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const a=o.aK(1,this.center.lat)*this.worldSize;return ho(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/a).toLngLat()}getMercatorTileCoordinates(a){if(!a)return[0,0,1,1];const c=a.canonical.z>=0?1<<a.canonical.z:Math.pow(2,a.canonical.z);return[a.canonical.x/c,a.canonical.y/c,1/c/o.Z,1/c/o.Z]}}class No{constructor(a,c){this.min=a,this.max=c,this.center=o.aO([],o.aP([],this.min,this.max),.5)}quadrant(a){const c=[a%2==0,a<2],C=o.aQ(this.min),M=o.aQ(this.max);for(let k=0;k<c.length;k++)C[k]=c[k]?this.min[k]:this.center[k],M[k]=c[k]?this.center[k]:this.max[k];return M[2]=this.max[2],new No(C,M)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersectsFrustum(a){let c=!0;for(let C=0;C<a.planes.length;C++){const M=this.intersectsPlane(a.planes[C]);if(M===0)return 0;M===1&&(c=!1)}return c?2:a.aabb.min[0]>this.max[0]||a.aabb.min[1]>this.max[1]||a.aabb.min[2]>this.max[2]||a.aabb.max[0]<this.min[0]||a.aabb.max[1]<this.min[1]||a.aabb.max[2]<this.min[2]?0:1}intersectsPlane(a){let c=a[3],C=a[3];for(let M=0;M<3;M++)a[M]>0?(c+=a[M]*this.min[M],C+=a[M]*this.max[M]):(C+=a[M]*this.min[M],c+=a[M]*this.max[M]);return c>=0?2:C<0?0:1}}class Fo{distanceToTile2d(a,c,C,M){const k=M.distanceX([a,c]),z=M.distanceY([a,c]);return Math.hypot(k,z)}getWrap(a,c,C){return C}getTileAABB(a,c,C,M){var k,z;let Y=C,J=C;if(M.terrain){const ye=new o.Y(a.z,c,a.z,a.x,a.y),Te=M.terrain.getMinMaxElevation(ye);Y=(k=Te.minElevation)!==null&&k!==void 0?k:C,J=(z=Te.maxElevation)!==null&&z!==void 0?z:C}const se=1<<a.z;return new No([c+a.x/se,a.y/se,Y],[c+(a.x+1)/se,(a.y+1)/se,J])}allowVariableZoom(a,c){const C=a.fov*(Math.abs(Math.cos(a.rollInRadians))*a.height+Math.abs(Math.sin(a.rollInRadians))*a.width)/a.height,M=o.ae(78.5-C/2,0,60);return!!c.terrain||a.pitch>M}allowWorldCopies(){return!0}recalculateCache(){}}class es{constructor(a,c,C){this.points=a,this.planes=c,this.aabb=C}static fromInvProjectionMatrix(a,c=1,C=0){const M=Math.pow(2,C),k=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(se=>{const ye=1/(se=o.ap([],se,a))[3]/c*M;return o.aR(se,se,[ye,ye,1/se[3],ye])}),z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(se=>{const ye=o.aS([],k[se[0]],k[se[1]]),Te=o.aS([],k[se[2]],k[se[1]]),ke=o.aT([],o.aU([],ye,Te)),Qe=-o.aV(ke,k[se[1]]);return ke.concat(Qe)}),Y=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],J=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const se of k)for(let ye=0;ye<3;ye++)Y[ye]=Math.min(Y[ye],se[ye]),J[ye]=Math.max(J[ye],se[ye]);return new es(k,z,new No(Y,J))}}class Mo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,C){return this._helper.interpolatePadding(a,c,C)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c,C=!0){this._helper.resize(a,c,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a,c){}constructor(a,c,C,M,k){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new ra({calcMatrices:()=>{this._calcMatrices()},getConstrained:(z,Y)=>this.getConstrained(z,Y)},a,c,C,M,k),this._coveringTilesDetailsProvider=new Fo}clone(){const a=new Mo;return a.apply(this),a}apply(a,c,C){this._helper.apply(a,c,C)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(a){const c=[new o.aW(0,a)];if(this._helper._renderWorldCopies){const C=this.screenPointToMercatorCoordinate(new o.P(0,0)),M=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),k=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),z=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),Y=Math.floor(Math.min(C.x,M.x,k.x,z.x)),J=Math.floor(Math.max(C.x,M.x,k.x,z.x)),se=1;for(let ye=Y-se;ye<=J+se;ye++)ye!==0&&c.push(new o.aW(ye,a))}return c}getCameraFrustum(){return es.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){const c=this.screenPointToLocation(this.centerPoint,a),C=a?a.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(C)}setLocationAtPoint(a,c){const C=o.aK(this.elevation,this.center.lat),M=this.screenPointToMercatorCoordinateAtZ(c,C),k=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,C),z=o.$.fromLngLat(a),Y=new o.$(z.x-(M.x-k.x),z.y-(M.y-k.y));this.setCenter(Y==null?void 0:Y.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(a,c){return c?this.coordinatePoint(o.$.fromLngLat(a),c.getElevationForLngLatZoom(a,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.$.fromLngLat(a))}screenPointToLocation(a,c){var C;return(C=this.screenPointToMercatorCoordinate(a,c))===null||C===void 0?void 0:C.toLngLat()}screenPointToMercatorCoordinate(a,c){if(c){const C=c.pointCoordinate(a);if(C!=null)return C}return this.screenPointToMercatorCoordinateAtZ(a)}screenPointToMercatorCoordinateAtZ(a,c){const C=c||0,M=[a.x,a.y,0,1],k=[a.x,a.y,1,1];o.ap(M,M,this._pixelMatrixInverse),o.ap(k,k,this._pixelMatrixInverse);const z=M[3],Y=k[3],J=M[1]/z,se=k[1]/Y,ye=M[2]/z,Te=k[2]/Y,ke=ye===Te?0:(C-ye)/(Te-ye);return new o.$(o.B.number(M[0]/z,k[0]/Y,ke)/this.worldSize,o.B.number(J,se,ke)/this.worldSize,C)}coordinatePoint(a,c=0,C=this._pixelMatrix){const M=[a.x*this.worldSize,a.y*this.worldSize,c,1];return o.ap(M,M,C),new o.P(M[0]/M[3],M[1]/M[3])}getBounds(){const a=Math.max(0,this._helper._height/2-ka(this));return new Lt().extend(this.screenPointToLocation(new o.P(0,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(a,c){return c?c.pointCoordinate(a)!=null:a.y>this.height/2-ka(this)}calculatePosMatrix(a,c=!1,C){var M;const k=(M=a.key)!==null&&M!==void 0?M:o.aX(a.wrap,a.canonical.z,a.canonical.z,a.canonical.x,a.canonical.y),z=c?this._alignedPosMatrixCache:this._posMatrixCache;if(z.has(k)){const se=z.get(k);return C?se.f32:se.f64}const Y=Us(a,this.worldSize);o.N(Y,c?this._alignedProjMatrix:this._viewProjMatrix,Y);const J={f64:Y,f32:new Float32Array(Y)};return z.set(k,J),C?J.f32:J.f64}calculateFogMatrix(a){const c=a.key,C=this._fogMatrixCacheF32;if(C.has(c))return C.get(c);const M=Us(a,this.worldSize);return o.N(M,this._fogMatrix,M),C.set(c,new Float32Array(M)),C.get(c)}getConstrained(a,c){c=o.ae(+c,this.minZoom,this.maxZoom);const C={center:new o.Q(a.lng,a.lat),zoom:c};let M=this._helper._lngRange;this._helper._renderWorldCopies||M!==null||(M=[-179.9999999999,180-1e-10]);const k=this.tileSize*o.aI(C.zoom);let z=0,Y=k,J=0,se=k,ye=0,Te=0;const{x:ke,y:Qe}=this.size;if(this._helper._latRange){const Bt=this._helper._latRange;z=o.S(Bt[1])*k,Y=o.S(Bt[0])*k,Y-z<Qe&&(ye=Qe/(Y-z))}M&&(J=o.aL(o.U(M[0])*k,0,k),se=o.aL(o.U(M[1])*k,0,k),se<J&&(se+=k),se-J<ke&&(Te=ke/(se-J)));const{x:et,y:mt}=ti(k,a);let lt,pt;const bt=Math.max(Te||0,ye||0);if(bt){const Bt=new o.P(Te?(se+J)/2:et,ye?(Y+z)/2:mt);return C.center=ls(k,Bt).wrap(),C.zoom+=o.ab(bt),C}if(this._helper._latRange){const Bt=Qe/2;mt-Bt<z&&(pt=z+Bt),mt+Bt>Y&&(pt=Y-Bt)}if(M){const Bt=(J+se)/2;let kt=et;this._helper._renderWorldCopies&&(kt=o.aL(et,Bt-k/2,Bt+k/2));const Kt=ke/2;kt-Kt<J&&(lt=J+Kt),kt+Kt>se&&(lt=se-Kt)}if(lt!==void 0||pt!==void 0){const Bt=new o.P(lt??et,pt??mt);C.center=ls(k,Bt).wrap()}return C}calculateCenterFromCameraLngLatAlt(a,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,C,M)}_calculateNearFarZIfNeeded(a,c,C){if(!this._helper.autoCalculateNearFarZ)return;const M=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),k=a-M*this._helper._pixelPerMeter/Math.cos(c),z=M<0?k:a,Y=Math.PI/2+this.pitchInRadians,J=o.ad(this.fov)*(Math.abs(Math.cos(o.ad(this.roll)))*this.height+Math.abs(Math.sin(o.ad(this.roll)))*this.width)/this.height*(.5+C.y/this.height),se=Math.sin(J)*z/Math.sin(o.ae(Math.PI-Y-J,.01,Math.PI-.01)),ye=ka(this),Te=Math.atan(ye/this._helper.cameraToCenterDistance),ke=o.ad(.75),Qe=Te>ke?2*Te*(.5+C.y/(2*ye)):ke,et=Math.sin(Qe)*z/Math.sin(o.ae(Math.PI-Y-Qe,.01,Math.PI-.01)),mt=Math.min(se,et);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*mt+z),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const a=this.centerOffset,c=ti(this.worldSize,this.center),C=c.x,M=c.y;this._helper._pixelPerMeter=o.aK(1,this.center.lat)*this.worldSize;const k=o.ad(Math.min(this.pitch,89.25)),z=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(k));let Y;this._calculateNearFarZIfNeeded(z,k,a),Y=new Float64Array(16),o.aY(Y,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aj(this._invProjMatrix,Y),Y[8]=2*-a.x/this._helper._width,Y[9]=2*a.y/this._helper._height,this._projectionMatrix=o.aZ(Y),o.M(Y,Y,[1,-1,1]),o.L(Y,Y,[0,0,-this._helper.cameraToCenterDistance]),o.a_(Y,Y,-this.rollInRadians),o.a$(Y,Y,this.pitchInRadians),o.a_(Y,Y,-this.bearingInRadians),o.L(Y,Y,[-C,-M,0]),this._mercatorMatrix=o.M([],Y,[this.worldSize,this.worldSize,this.worldSize]),o.M(Y,Y,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,Y),o.L(Y,Y,[0,0,-this.elevation]),this._viewProjMatrix=Y,this._invViewProjMatrix=o.aj([],Y);const J=[0,0,-1,1];o.ap(J,J,this._invViewProjMatrix),this._cameraPosition=[J[0]/J[3],J[1]/J[3],J[2]/J[3]],this._fogMatrix=new Float64Array(16),o.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,z,this._helper._farZ),this._fogMatrix[8]=2*-a.x/this.width,this._fogMatrix[9]=2*a.y/this.height,o.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.L(this._fogMatrix,this._fogMatrix,[-C,-M,0]),o.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,Y);const se=this._helper._width%2/2,ye=this._helper._height%2/2,Te=Math.cos(this.bearingInRadians),ke=Math.sin(-this.bearingInRadians),Qe=C-Math.round(C)+Te*se+ke*ye,et=M-Math.round(M)+Te*ye+ke*se,mt=new Float64Array(Y);if(o.L(mt,mt,[Qe>.5?Qe-1:Qe,et>.5?et-1:et,0]),this._alignedProjMatrix=mt,Y=o.aj(new Float64Array(16),this._pixelMatrix),!Y)throw new Error("failed to invert matrix");this._pixelMatrixInverse=Y,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const a=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.ap(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const a=o.aK(1,this.center.lat)*this.worldSize;return ho(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/a).toLngLat()}lngLatToCameraDepth(a,c){const C=o.$.fromLngLat(a),M=[C.x*this.worldSize,C.y*this.worldSize,c,1];return o.ap(M,M,this._viewProjMatrix),M[2]/M[3]}getProjectionData(a){const{overscaledTileID:c,aligned:C,applyTerrainMatrix:M}=a,k=this._helper.getMercatorTileCoordinates(c),z=c?this.calculatePosMatrix(c,C,!0):null;let Y;return Y=c&&c.terrainRttPosMatrix32f&&M?c.terrainRttPosMatrix32f:z||o.b0(),{mainMatrix:Y,tileMercatorCoords:k,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:Y}}isLocationOccluded(a){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(a,c,C){return 1}transformLightDirection(a){return o.aQ(a)}getRayDirectionFromPixel(a){throw new Error("Not implemented.")}projectTileCoordinates(a,c,C,M){const k=this.calculatePosMatrix(C);let z;M?(z=[a,c,M(a,c),1],o.ap(z,z,k)):(z=[a,c,0,1],wi(z,z,k));const Y=z[3];return{point:new o.P(z[0]/Y,z[1]/Y),signedDistanceFromCamera:Y,isOccluded:!1}}populateCache(a){for(const c of a)this.calculatePosMatrix(c)}getMatrixForModel(a,c){const C=o.$.fromLngLat(a,c),M=C.meterInMercatorCoordinateUnits(),k=o.b1();return o.L(k,k,[C.x,C.y,C.z]),o.a_(k,k,Math.PI),o.a$(k,k,Math.PI/2),o.M(k,k,[-M,M,M]),k}getProjectionDataForCustomLayer(a=!0){const c=new o.Y(0,0,0,0,0),C=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:a}),M=Us(c,this.worldSize);o.N(M,this._viewProjMatrix,M),C.tileMercatorCoords=[0,0,1,1];const k=[o.Z,o.Z,this.worldSize/this._helper.pixelsPerMeter],z=o.b2();return o.M(z,M,k),C.fallbackMatrix=z,C.mainMatrix=z,C}getFastPathSimpleProjectionMatrix(a){return this.calculatePosMatrix(a)}}function ga(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function zs(O){if(O.useSlerp)if(O.k<1){const a=o.b3(O.startEulerAngles.roll,O.startEulerAngles.pitch,O.startEulerAngles.bearing),c=o.b3(O.endEulerAngles.roll,O.endEulerAngles.pitch,O.endEulerAngles.bearing),C=new Float64Array(4);o.b4(C,a,c,O.k);const M=o.b5(C);O.tr.setRoll(M.roll),O.tr.setPitch(M.pitch),O.tr.setBearing(M.bearing)}else O.tr.setRoll(O.endEulerAngles.roll),O.tr.setPitch(O.endEulerAngles.pitch),O.tr.setBearing(O.endEulerAngles.bearing);else O.tr.setRoll(o.B.number(O.startEulerAngles.roll,O.endEulerAngles.roll,O.k)),O.tr.setPitch(o.B.number(O.startEulerAngles.pitch,O.endEulerAngles.pitch,O.k)),O.tr.setBearing(o.B.number(O.startEulerAngles.bearing,O.endEulerAngles.bearing,O.k))}function Ga(O,a,c,C,M){const k=M.padding,z=ti(M.worldSize,c.getNorthWest()),Y=ti(M.worldSize,c.getNorthEast()),J=ti(M.worldSize,c.getSouthEast()),se=ti(M.worldSize,c.getSouthWest()),ye=o.ad(-C),Te=z.rotate(ye),ke=Y.rotate(ye),Qe=J.rotate(ye),et=se.rotate(ye),mt=new o.P(Math.max(Te.x,ke.x,et.x,Qe.x),Math.max(Te.y,ke.y,et.y,Qe.y)),lt=new o.P(Math.min(Te.x,ke.x,et.x,Qe.x),Math.min(Te.y,ke.y,et.y,Qe.y)),pt=mt.sub(lt),bt=(M.width-(k.left+k.right+a.left+a.right))/pt.x,Bt=(M.height-(k.top+k.bottom+a.top+a.bottom))/pt.y;if(Bt<0||bt<0)return void ga();const kt=Math.min(o.ab(M.scale*Math.min(bt,Bt)),O.maxZoom),Kt=o.P.convert(O.offset),Ut=new o.P((a.left-a.right)/2,(a.top-a.bottom)/2).rotate(o.ad(C)),It=Kt.add(Ut).mult(M.scale/o.aI(kt));return{center:ls(M.worldSize,z.add(J).div(2).sub(It)),zoom:kt,bearing:C}}class Ta{get useGlobeControls(){return!1}handlePanInertia(a,c){return{easingOffset:a,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(a,c){a.bearingDelta&&c.setBearing(c.bearing+a.bearingDelta),a.pitchDelta&&c.setPitch(c.pitch+a.pitchDelta),a.rollDelta&&c.setRoll(c.roll+a.rollDelta),a.zoomDelta&&c.setZoom(c.zoom+a.zoomDelta)}handleMapControlsPan(a,c,C){a.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(C,a.around)}cameraForBoxAndBearing(a,c,C,M,k){return Ga(a,c,C,M,k)}handleJumpToCenterZoom(a,c){a.zoom!==(c.zoom!==void 0?+c.zoom:a.zoom)&&a.setZoom(+c.zoom),c.center!==void 0&&a.setCenter(o.Q.convert(c.center))}handleEaseTo(a,c){const C=a.zoom,M=a.padding,k={roll:a.roll,pitch:a.pitch,bearing:a.bearing},z={roll:c.roll===void 0?a.roll:c.roll,pitch:c.pitch===void 0?a.pitch:c.pitch,bearing:c.bearing===void 0?a.bearing:c.bearing},Y=c.zoom!==void 0,J=!a.isPaddingEqual(c.padding);let se=!1;const ye=Y?+c.zoom:a.zoom;let Te=a.centerPoint.add(c.offsetAsPoint);const ke=a.screenPointToLocation(Te),{center:Qe,zoom:et}=a.getConstrained(o.Q.convert(c.center||ke),ye??C);Gu(a,Qe);const mt=ti(a.worldSize,ke),lt=ti(a.worldSize,Qe).sub(mt),pt=o.aI(et-C);return se=et!==C,{easeFunc:bt=>{if(se&&a.setZoom(o.B.number(C,et,bt)),o.b6(k,z)||zs({startEulerAngles:k,endEulerAngles:z,tr:a,k:bt,useSlerp:k.roll!=z.roll}),J&&(a.interpolatePadding(M,c.padding,bt),Te=a.centerPoint.add(c.offsetAsPoint)),c.around)a.setLocationAtPoint(c.around,c.aroundPoint);else{const Bt=o.aI(a.zoom-C),kt=et>C?Math.min(2,pt):Math.max(.5,pt),Kt=Math.pow(kt,1-bt),Ut=ls(a.worldSize,mt.add(lt.mult(bt*Kt)).mult(Bt));a.setLocationAtPoint(a.renderWorldCopies?Ut.wrap():Ut,Te)}},isZooming:se,elevationCenter:Qe}}handleFlyTo(a,c){const C=c.zoom!==void 0,M=a.zoom,k=a.getConstrained(o.Q.convert(c.center||c.locationAtOffset),C?+c.zoom:M),z=k.center,Y=k.zoom;Gu(a,z);const J=ti(a.worldSize,c.locationAtOffset),se=ti(a.worldSize,z).sub(J),ye=se.mag(),Te=o.aI(Y-M);let ke;if(c.minZoom!==void 0){const Qe=Math.min(+c.minZoom,M,Y),et=a.getConstrained(z,Qe).zoom;ke=o.aI(et-M)}return{easeFunc:(Qe,et,mt,lt)=>{a.setZoom(Qe===1?Y:M+o.ab(et));const pt=Qe===1?z:ls(a.worldSize,J.add(se.mult(mt)).mult(et));a.setLocationAtPoint(a.renderWorldCopies?pt.wrap():pt,lt)},scaleOfZoom:Te,targetCenter:z,scaleOfMinZoom:ke,pixelPathLength:ye}}}class ao{constructor(a,c,C){this.blendFunction=a,this.blendColor=c,this.mask=C}}ao.Replace=[1,0],ao.disabled=new ao(ao.Replace,o.b7.transparent,[!1,!1,!1,!1]),ao.unblended=new ao(ao.Replace,o.b7.transparent,[!0,!0,!0,!0]),ao.alphaBlended=new ao([1,771],o.b7.transparent,[!0,!0,!0,!0]);const sl=2305;class Hi{constructor(a,c,C){this.enable=a,this.mode=c,this.frontFace=C}}Hi.disabled=new Hi(!1,1029,sl),Hi.backCCW=new Hi(!0,1029,sl),Hi.frontCCW=new Hi(!0,1028,sl);class Hr{constructor(a,c,C){this.func=a,this.mask=c,this.range=C}}Hr.ReadOnly=!1,Hr.ReadWrite=!0,Hr.disabled=new Hr(519,Hr.ReadOnly,[0,1]);const jl=7680;class Wi{constructor(a,c,C,M,k,z){this.test=a,this.ref=c,this.mask=C,this.fail=M,this.depthFail=k,this.pass=z}}Wi.disabled=new Wi({func:519,mask:0},0,0,jl,jl,jl);const oo=new WeakMap;function Ki(O){var a;if(oo.has(O))return oo.get(O);{const c=(a=O.getParameter(O.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return oo.set(O,c),c}}class ee{get awaitingQuery(){return!!this._readbackQueue}constructor(a){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=a;const c=a.context,C=c.gl;this._texFormat=C.RGBA,this._texType=C.UNSIGNED_BYTE;const M=new o.aF;M.emplaceBack(-1,-1),M.emplaceBack(2,-1),M.emplaceBack(-1,2);const k=new o.aH;k.emplaceBack(0,1,2),this._fullscreenTriangle=new zl(c.createVertexBuffer(M,na.members),c.createIndexBuffer(k),o.aG.simpleSegment(0,0,M.length,k.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(C.TEXTURE1);const z=C.createTexture();C.bindTexture(C.TEXTURE_2D,z),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texImage2D(C.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(z),Ki(C)&&(this._pbo=C.createBuffer(),C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.bufferData(C.PIXEL_PACK_BUFFER,4,C.STREAM_READ),C.bindBuffer(C.PIXEL_PACK_BUFFER,null))}destroy(){const a=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),a.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(a,c){const C=this._updateCount;return this._readbackQueue?C>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():C>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(a,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const a=this._cachedRenderContext.context,c=a.gl;a.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),a.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(a,c){const C=this._cachedRenderContext.context,M=C.gl;if(this._bindFramebuffer(),C.viewport.set([0,0,this._texWidth,this._texHeight]),C.clear({color:o.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(C,M.TRIANGLES,Hr.disabled,Wi.disabled,ao.unblended,Hi.disabled,((k,z)=>({u_input:k,u_output_expected:z}))(a,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ki(M)){M.bindBuffer(M.PIXEL_PACK_BUFFER,this._pbo),M.readBuffer(M.COLOR_ATTACHMENT0),M.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),M.bindBuffer(M.PIXEL_PACK_BUFFER,null);const k=M.fenceSync(M.SYNC_GPU_COMMANDS_COMPLETE,0);M.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:k}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const a=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ki(a)){const c=a.clientWaitSync(this._readbackQueue.sync,0,0);if(c===a.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===a.TIMEOUT_EXPIRED)return;a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),a.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ee._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(a){let c=0;return c+=a[0]/256,c+=a[1]/65536,c+=a[2]/16777216,a[3]<127&&(c=-c),c/128}}const Oe=o.Z/128;function st(O,a){const c=O.granularity!==void 0?Math.max(O.granularity,1):1,C=c+(O.generateBorders?2:0),M=c+(O.extendToNorthPole||O.generateBorders?1:0)+(O.extendToSouthPole||O.generateBorders?1:0),k=C+1,z=M+1,Y=O.generateBorders?-1:0,J=O.generateBorders||O.extendToNorthPole?-1:0,se=c+(O.generateBorders?1:0),ye=c+(O.generateBorders||O.extendToSouthPole?1:0),Te=k*z,ke=C*M*6,Qe=k*z>65536;if(Qe&&a==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const et=Qe||a==="32bit",mt=new Int16Array(2*Te);let lt=0;for(let Bt=J;Bt<=ye;Bt++)for(let kt=Y;kt<=se;kt++){let Kt=kt/c*o.Z;kt===-1&&(Kt=-64),kt===c+1&&(Kt=o.Z+Oe);let Ut=Bt/c*o.Z;Bt===-1&&(Ut=O.extendToNorthPole?o.b9:-64),Bt===c+1&&(Ut=O.extendToSouthPole?o.ba:o.Z+Oe),mt[lt++]=Kt,mt[lt++]=Ut}const pt=et?new Uint32Array(ke):new Uint16Array(ke);let bt=0;for(let Bt=0;Bt<M;Bt++)for(let kt=0;kt<C;kt++){const Kt=kt+1+Bt*k,Ut=kt+(Bt+1)*k,It=kt+1+(Bt+1)*k;pt[bt++]=kt+Bt*k,pt[bt++]=Ut,pt[bt++]=Kt,pt[bt++]=Kt,pt[bt++]=Ut,pt[bt++]=It}return{vertices:mt.buffer.slice(0),indices:pt.buffer.slice(0),uses32bitIndices:et}}const $t=new o.aE({fill:new o.bb(128,2),line:new o.bb(512,0),tile:new o.bb(128,32),stencil:new o.bb(128,1),circle:3});class Ir{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ei.projectionGlobe}get vertexShaderPreludeCode(){return ei.projectionMercator.vertexSource}get subdivisionGranularity(){return $t}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(a){this._errorMeasurement||(this._errorMeasurement=new ee(a));const c=o.S(this._errorQueryLatitudeDegrees),C=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,M=this._errorMeasurement.updateErrorLoop(c,C),k=T.now();M!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=M,this._errorMeasurementLastChangeTime=k);const z=Math.min(Math.max((k-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bd(z))}_getMeshKey(a){return`${a.granularity.toString(36)}_${a.generateBorders?"b":""}${a.extendToNorthPole?"n":""}${a.extendToSouthPole?"s":""}`}getMeshFromTileID(a,c,C,M,k){const z=(k==="stencil"?$t.stencil:$t.tile).getGranularityForZoomLevel(c.z);return this._getMesh(a,{granularity:z,generateBorders:C,extendToNorthPole:c.y===0&&M,extendToSouthPole:c.y===(1<<c.z)-1&&M})}_getMesh(a,c){const C=this._getMeshKey(c);if(C in this._tileMeshCache)return this._tileMeshCache[C];const M=function(k,z){const Y=st(z,"16bit"),J=o.aF.deserialize({arrayBuffer:Y.vertices,length:Y.vertices.byteLength/2/2}),se=o.aH.deserialize({arrayBuffer:Y.indices,length:Y.indices.byteLength/2/3});return new zl(k.createVertexBuffer(J,na.members),k.createIndexBuffer(se),o.aG.simpleSegment(0,0,J.length,se.length))}(a,c);return this._tileMeshCache[C]=M,M}recalculate(a){}hasTransition(){const a=T.now();let c=!1;return c=c||(a-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(a){this._errorQueryLatitudeDegrees=a}}const Vn=new o.r({type:new o.D(o.v.projection.type)});class Zr extends o.E{constructor(a){super(),this._transitionable=new o.T(Vn),this.setProjection(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.C(0)),this._mercatorProjection=new Si,this._verticalPerspectiveProjection=new Ir}get transitionState(){const a=this.properties.get("type");if(typeof a=="string"&&a==="mercator")return 0;if(typeof a=="string"&&a==="vertical-perspective")return 1;if(a instanceof o.be){if(a.from==="vertical-perspective"&&a.to==="mercator")return 1-a.transition;if(a.from==="mercator"&&a.to==="vertical-perspective")return a.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(a){this._mercatorProjection.updateGPUdependent(a),this._verticalPerspectiveProjection.updateGPUdependent(a)}getMeshFromTileID(a,c,C,M,k){return this.currentProjection.getMeshFromTileID(a,c,C,M,k)}setProjection(a){this._transitionable.setValue("type",(a==null?void 0:a.type)||"mercator")}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}setErrorQueryLatitudeDegrees(a){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(a),this._mercatorProjection.setErrorQueryLatitudeDegrees(a)}}function di(O){const a=Vi(O.worldSize,O.center.lat);return 2*Math.PI*a}function Br(O,a,c,C,M){const k=1/(1<<M),z=a/o.Z*k+C*k,Y=o.bg((O/o.Z*k+c*k)*Math.PI*2+Math.PI,2*Math.PI),J=2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI,se=Math.cos(J),ye=new Float64Array(3);return ye[0]=Math.sin(Y)*se,ye[1]=Math.sin(J),ye[2]=Math.cos(Y)*se,ye}function Rr(O){return function(a,c){const C=Math.cos(c),M=new Float64Array(3);return M[0]=Math.sin(a)*C,M[1]=Math.sin(c),M[2]=Math.cos(a)*C,M}(O.lng*Math.PI/180,O.lat*Math.PI/180)}function Vi(O,a){return O/(2*Math.PI)/Math.cos(a*Math.PI/180)}function Wo(O){const a=Math.asin(O[1])/Math.PI*180,c=Math.sqrt(O[0]*O[0]+O[2]*O[2]);if(c>1e-6){const C=O[0]/c,M=Math.acos(O[2]/c),k=(C>0?M:-M)/Math.PI*180;return new o.Q(o.aL(k,-180,180),a)}return new o.Q(0,a)}function si(O){return Math.cos(O*Math.PI/180)}function zr(O,a){const c=si(O),C=si(a);return o.ab(C/c)}function Ui(O,a){const c=O.rotate(a.bearingInRadians),C=a.zoom+zr(a.center.lat,0),M=o.bc(1/si(a.center.lat),1/si(Math.min(Math.abs(a.center.lat),60)),o.bf(C,7,3,0,1)),k=360/di({worldSize:a.worldSize,center:{lat:a.center.lat}});return new o.Q(a.center.lng-c.x*k*M,o.ae(a.center.lat+c.y*k,-85.051129,o.aJ))}function Gi(O){const a=.5*O,c=Math.sin(a),C=Math.cos(a);return Math.log(c+C)-Math.log(C-c)}function $o(O,a,c,C){const M=O.lat+c*C;if(Math.abs(c)>1){const k=(Math.sign(O.lat+c)!==Math.sign(O.lat)?-Math.abs(O.lat):Math.abs(O.lat))*Math.PI/180,z=Math.abs(O.lat+c)*Math.PI/180,Y=Gi(k+C*(z-k)),J=Gi(k),se=Gi(z);return new o.Q(O.lng+a*((Y-J)/(se-J)),M)}return new o.Q(O.lng+a*C,M)}class ua{constructor(a){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=a}recalculateCache(){if(!this._hadAnyChanges)return;const a=this._cachePrevious;this._cachePrevious=this._cache,this._cache=a,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(a,c,C,M){const k=`${a.z}_${a.x}_${a.y}`,z=this._cache.get(k);if(z)return z;const Y=this._cachePrevious.get(k);if(Y)return this._cache.set(k,Y),Y;const J=this._aabbFactory(a,c,C,M);return this._cache.set(k,J),this._hadAnyChanges=!0,J}}function Ys(O,a,c){const C=O-a;return C<0?-C:Math.max(0,C-c)}function wu(O,a,c,C,M){const k=O-c;let z;return z=k<0?Math.min(-k,1+k-M):k>1?Math.min(Math.max(k-M,0),1-k):0,Math.max(z,Ys(a,C,M))}class qs{constructor(){this._aabbCache=new ua(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(a,c,C,M){const k=1<<C.z,z=1/k,Y=C.x/k,J=C.y/k;let se=2;return se=Math.min(se,wu(a,c,Y,J,z)),se=Math.min(se,wu(a,c,Y+.5,-J-z,z)),se=Math.min(se,wu(a,c,Y+.5,2-J-z,z)),se}getWrap(a,c,C){const M=1<<c.z,k=1/M,z=c.x/M,Y=Ys(a.x,z,k),J=Ys(a.x,z-1,k),se=Ys(a.x,z+1,k),ye=Math.min(Y,J,se);return ye===se?1:ye===J?-1:0}allowVariableZoom(a,c){return nr(a,c)>4}allowWorldCopies(){return!1}getTileAABB(a,c,C,M){return this._aabbCache.getTileAABB(a,c,C,M)}_computeTileAABB(a,c,C,M){if(a.z<=0)return new No([-1,-1,-1],[1,1,1]);if(a.z===1)return new No([a.x===0?-1:0,a.y===0?0:-1,-1],[a.x===0?0:1,a.y===0?1:0,1]);{const k=[Br(0,0,a.x,a.y,a.z),Br(o.Z,0,a.x,a.y,a.z),Br(o.Z,o.Z,a.x,a.y,a.z),Br(0,o.Z,a.x,a.y,a.z)],z=[1,1,1],Y=[-1,-1,-1];for(const J of k)for(let se=0;se<3;se++)z[se]=Math.min(z[se],J[se]),Y[se]=Math.max(Y[se],J[se]);if(a.y===0||a.y===(1<<a.z)-1){const J=[0,a.y===0?1:-1,0];for(let se=0;se<3;se++)z[se]=Math.min(z[se],J[se]),Y[se]=Math.max(Y[se],J[se])}return new No(z,Y)}}}class Yd{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,C){return this._helper.interpolatePadding(a,c,C)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c){this._helper.resize(a,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a){}constructor(){this._cachedClippingPlane=o.bh(),this._projectionMatrix=o.b1(),this._globeViewProjMatrix32f=o.b0(),this._globeViewProjMatrixNoCorrection=o.b1(),this._globeViewProjMatrixNoCorrectionInverted=o.b1(),this._globeProjMatrixInverted=o.b1(),this._cameraPosition=o.bi(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new ra({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,c)=>this.getConstrained(a,c)}),this._coveringTilesDetailsProvider=new qs}clone(){const a=new Yd;return a.apply(this),a}apply(a,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(a)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const a=o.bi();return a[0]=this._cameraPosition[0],a[1]=this._cameraPosition[1],a[2]=this._cameraPosition[2],a}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(a){const{overscaledTileID:c,applyGlobeMatrix:C}=a,M=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:M,clippingPlane:this._cachedClippingPlane,projectionTransition:C?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(a){const c=this.pitchInRadians,C=this.cameraToCenterDistance/a,M=Math.sin(c)*C,k=Math.cos(c)*C+1,z=1/Math.sqrt(M*M+k*k)*1;let Y=-M,J=k;const se=Math.sqrt(Y*Y+J*J);Y/=se,J/=se;const ye=[0,Y,J];return o.bj(ye,ye,[0,0,0],-this.bearingInRadians),o.bk(ye,ye,[0,0,0],-1*this.center.lat*Math.PI/180),o.bl(ye,ye,[0,0,0],this.center.lng*Math.PI/180),o.aO(ye,ye,.25),[...ye,.25*-z]}isLocationOccluded(a){return!this.isSurfacePointVisible(Rr(a))}transformLightDirection(a){const c=this._helper._center.lng*Math.PI/180,C=this._helper._center.lat*Math.PI/180,M=Math.cos(C),k=[Math.sin(c)*M,Math.sin(C),Math.cos(c)*M],z=[k[2],0,-k[0]],Y=[0,0,0];o.aU(Y,z,k),o.aT(z,z),o.aT(Y,Y);const J=[0,0,0];return o.aT(J,[z[0]*a[0]+Y[0]*a[1]+k[0]*a[2],z[1]*a[0]+Y[1]*a[1]+k[1]*a[2],z[2]*a[0]+Y[2]*a[1]+k[2]*a[2]]),J}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(a,c,C){const M=function(Y,J,se){const ye=1/(1<<se.z);return new o.$(Y/o.Z*ye+se.x*ye,J/o.Z*ye+se.y*ye)}(a,c,C.canonical),k=(z=M.y,[o.bg(M.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI]);var z;return this.getCircleRadiusCorrection()/Math.cos(k[1])}projectTileCoordinates(a,c,C,M){const k=C.canonical,z=Br(a,c,k.x,k.y,k.z),Y=1+(M?M(a,c):0)/o.br,J=[z[0]*Y,z[1]*Y,z[2]*Y,1];o.ap(J,J,this._globeViewProjMatrixNoCorrection);const se=this._cachedClippingPlane,ye=se[0]*z[0]+se[1]*z[1]+se[2]*z[2]+se[3]<0;return{point:new o.P(J[0]/J[3],J[1]/J[3]),signedDistanceFromCamera:J[3],isOccluded:ye}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const a=Vi(this.worldSize,this.center.lat),c=o.b2(),C=o.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*a),o.aY(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const M=this.centerOffset;c[8]=2*-M.x/this._helper._width,c[9]=2*M.y/this._helper._height,this._projectionMatrix=o.aZ(c),this._globeProjMatrixInverted=o.b2(),o.aj(this._globeProjMatrixInverted,c),o.L(c,c,[0,0,-this.cameraToCenterDistance]),o.a_(c,c,this.rollInRadians),o.a$(c,c,-this.pitchInRadians),o.a_(c,c,this.bearingInRadians),o.L(c,c,[0,0,-a]);const k=o.bi();k[0]=a,k[1]=a,k[2]=a,o.a$(C,c,this.center.lat*Math.PI/180),o.bm(C,C,-this.center.lng*Math.PI/180),o.M(C,C,k),this._globeViewProjMatrixNoCorrection=C,o.a$(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bm(c,c,-this.center.lng*Math.PI/180),o.M(c,c,k),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.b2(),o.aj(this._globeViewProjMatrixNoCorrectionInverted,C);const z=o.bi();this._cameraPosition=o.bi(),this._cameraPosition[2]=this.cameraToCenterDistance/a,o.bj(this._cameraPosition,this._cameraPosition,z,-this.rollInRadians),o.bk(this._cameraPosition,this._cameraPosition,z,this.pitchInRadians),o.bj(this._cameraPosition,this._cameraPosition,z,-this.bearingInRadians),o.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bk(this._cameraPosition,this._cameraPosition,z,-this.center.lat*Math.PI/180),o.bl(this._cameraPosition,this._cameraPosition,z,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(a);const Y=o.aZ(this._globeViewProjMatrixNoCorrectionInverted);o.M(Y,Y,[1,1,-1]),this._cachedFrustum=es.fromInvProjectionMatrix(Y)}calculateFogMatrix(a){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.b2();return o.at(c),c}getVisibleUnwrappedCoordinates(a){return[new o.aW(0,a)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){a&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const C=Rr(a);o.aO(C,C,1+c/o.br);const M=o.bh();return o.ap(M,[C[0],C[1],C[2],1],this._globeViewProjMatrixNoCorrection),M[2]/M[3]}populateCache(a){}getBounds(){const a=.5*this.width,c=.5*this.height,C=[new o.P(0,0),new o.P(a,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(a,this.height),new o.P(0,this.height),new o.P(0,c)],M=[];for(const Te of C)M.push(this.unprojectScreenPoint(Te));let k=0,z=0,Y=0,J=0;const se=this.center;for(const Te of M){const ke=o.bn(se.lng,Te.lng),Qe=o.bn(se.lat,Te.lat);ke<z&&(z=ke),ke>k&&(k=ke),Qe<J&&(J=Qe),Qe>Y&&(Y=Qe)}const ye=[se.lng+z,se.lat+J,se.lng+k,se.lat+Y];return this.isSurfacePointOnScreen([0,1,0])&&(ye[3]=90,ye[0]=-180,ye[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ye[1]=-90,ye[0]=-180,ye[2]=180),new Lt(ye)}getConstrained(a,c){const C=o.ae(a.lat,-85.051129,o.aJ),M=o.ae(+c,this.minZoom+zr(0,C),this.maxZoom);return{center:new o.Q(a.lng,C),zoom:M}}calculateCenterFromCameraLngLatAlt(a,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,C,M)}setLocationAtPoint(a,c){const C=Rr(this.unprojectScreenPoint(c)),M=Rr(a),k=o.bi();o.bo(k);const z=o.bi();o.bl(z,C,k,-this.center.lng*Math.PI/180),o.bk(z,z,k,this.center.lat*Math.PI/180);const Y=M[0]*M[0]+M[2]*M[2],J=z[0]*z[0];if(Y<J)return;const se=Math.sqrt(Y-J),ye=-se,Te=o.bp(M[0],M[2],z[0],se),ke=o.bp(M[0],M[2],z[0],ye),Qe=o.bi();o.bl(Qe,M,k,-Te);const et=o.bp(Qe[1],Qe[2],z[1],z[2]),mt=o.bi();o.bl(mt,M,k,-ke);const lt=o.bp(mt[1],mt[2],z[1],z[2]),pt=.5*Math.PI,bt=et>=-pt&&et<=pt,Bt=lt>=-pt&&lt<=pt;let kt,Kt;if(bt&&Bt){const qt=this.center.lng*Math.PI/180,xn=this.center.lat*Math.PI/180;o.bs(Te,qt)+o.bs(et,xn)<o.bs(ke,qt)+o.bs(lt,xn)?(kt=Te,Kt=et):(kt=ke,Kt=lt)}else if(bt)kt=Te,Kt=et;else{if(!Bt)return;kt=ke,Kt=lt}const Ut=kt/Math.PI*180,It=Kt/Math.PI*180,nn=this.center.lat;this.setCenter(new o.Q(Ut,o.ae(It,-90,90))),this.setZoom(this.zoom+zr(nn,this.center.lat))}locationToScreenPoint(a,c){const C=Rr(a);if(c){const M=c.getElevationForLngLatZoom(a,this._helper._tileZoom);o.aO(C,C,1+M/o.br)}return this._projectSurfacePointToScreen(C)}_projectSurfacePointToScreen(a){const c=o.bh();return o.ap(c,[...a,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(a,c){if(c){const C=c.pointCoordinate(a);if(C)return C}return o.$.fromLngLat(this.unprojectScreenPoint(a))}screenPointToLocation(a,c){var C;return(C=this.screenPointToMercatorCoordinate(a,c))===null||C===void 0?void 0:C.toLngLat()}isPointOnMapSurface(a,c){const C=this._cameraPosition,M=this.getRayDirectionFromPixel(a);return!!this.rayPlanetIntersection(C,M)}getRayDirectionFromPixel(a){const c=o.bh();c[0]=a.x/this.width*2-1,c[1]=-1*(a.y/this.height*2-1),c[2]=1,c[3]=1,o.ap(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const C=o.bi();C[0]=c[0]-this._cameraPosition[0],C[1]=c[1]-this._cameraPosition[1],C[2]=c[2]-this._cameraPosition[2];const M=o.bi();return o.aT(M,C),M}isSurfacePointVisible(a){const c=this._cachedClippingPlane;return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]>=0}isSurfacePointOnScreen(a){if(!this.isSurfacePointVisible(a))return!1;const c=o.bh();return o.ap(c,[...a,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(a,c){const C=o.aV(a,c),M=o.bi(),k=o.bi();o.aO(k,c,C),o.aS(M,a,k);const z=1-o.aV(M,M);if(z<0)return null;const Y=o.aV(a,a)-1,J=-C+(C<0?1:-1)*Math.sqrt(z),se=Y/J,ye=J;return{tMin:Math.min(se,ye),tMax:Math.max(se,ye)}}unprojectScreenPoint(a){const c=this._cameraPosition,C=this.getRayDirectionFromPixel(a),M=this.rayPlanetIntersection(c,C);if(M){const se=o.bi();o.aP(se,c,[C[0]*M.tMin,C[1]*M.tMin,C[2]*M.tMin]);const ye=o.bi();return o.aT(ye,se),Wo(ye)}const k=this._cachedClippingPlane[0]*C[0]+this._cachedClippingPlane[1]*C[1]+this._cachedClippingPlane[2]*C[2],z=-o.bq(this._cachedClippingPlane,c)/k,Y=o.bi();if(z>0)o.aP(Y,c,[C[0]*z,C[1]*z,C[2]*z]);else{const se=o.bi();o.aP(se,c,[2*C[0],2*C[1],2*C[2]]);const ye=o.bq(this._cachedClippingPlane,se);o.aS(Y,se,[this._cachedClippingPlane[0]*ye,this._cachedClippingPlane[1]*ye,this._cachedClippingPlane[2]*ye])}const J=o.bi();return o.aT(J,Y),Wo(J)}getMatrixForModel(a,c){const C=o.Q.convert(a),M=1/o.br,k=o.b1();return o.bm(k,k,C.lng/180*Math.PI),o.a$(k,k,-C.lat/180*Math.PI),o.L(k,k,[0,0,1+c/o.br]),o.a$(k,k,.5*Math.PI),o.M(k,k,[M,M,M]),k}getProjectionDataForCustomLayer(a=!0){const c=this.getProjectionData({overscaledTileID:new o.Y(0,0,0,0,0),applyGlobeMatrix:a});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(a){}}class al{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,c,C){return this._helper.interpolatePadding(a,c,C)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,c,C=!0){this._helper.resize(a,c,C)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}overrideNearFarZ(a,c){this._helper.overrideNearFarZ(a,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(a,c){this._globeness=a,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new ra({calcMatrices:()=>{this._calcMatrices()},getConstrained:(a,c)=>this.getConstrained(a,c)}),this._globeness=1,this._mercatorTransform=new Mo,this._verticalPerspectiveTransform=new Yd}clone(){const a=new al;return a._globeness=this._globeness,a._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,a.apply(this),a}apply(a){this._helper.apply(a),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(a){const c=this._mercatorTransform.getProjectionData(a),C=this._verticalPerspectiveTransform.getProjectionData(a);return{mainMatrix:this.isGlobeRendering?C.mainMatrix:c.mainMatrix,clippingPlane:C.clippingPlane,tileMercatorCoords:C.tileMercatorCoords,projectionTransition:a.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(a){return this.currentTransform.isLocationOccluded(a)}transformLightDirection(a){return this.currentTransform.transformLightDirection(a)}getPixelScale(){return o.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(a,c,C){const M=this._mercatorTransform.getPitchedTextCorrection(a,c,C),k=this._verticalPerspectiveTransform.getPitchedTextCorrection(a,c,C);return o.bc(M,k,this._globeness)}projectTileCoordinates(a,c,C,M){return this.currentTransform.projectTileCoordinates(a,c,C,M)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(a){return this.currentTransform.calculateFogMatrix(a)}getVisibleUnwrappedCoordinates(a){return this.currentTransform.getVisibleUnwrappedCoordinates(a)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(a){this._mercatorTransform.recalculateZoomAndCenter(a),this._verticalPerspectiveTransform.recalculateZoomAndCenter(a)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,c){return this.currentTransform.lngLatToCameraDepth(a,c)}populateCache(a){this._mercatorTransform.populateCache(a),this._verticalPerspectiveTransform.populateCache(a)}getBounds(){return this.currentTransform.getBounds()}getConstrained(a,c){return this.currentTransform.getConstrained(a,c)}calculateCenterFromCameraLngLatAlt(a,c,C,M){return this._helper.calculateCenterFromCameraLngLatAlt(a,c,C,M)}setLocationAtPoint(a,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(a,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(a,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(a,c){return this.currentTransform.locationToScreenPoint(a,c)}screenPointToMercatorCoordinate(a,c){return this.currentTransform.screenPointToMercatorCoordinate(a,c)}screenPointToLocation(a,c){return this.currentTransform.screenPointToLocation(a,c)}isPointOnMapSurface(a,c){return this.currentTransform.isPointOnMapSurface(a,c)}getRayDirectionFromPixel(a){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(a)}getMatrixForModel(a,c){return this.currentTransform.getMatrixForModel(a,c)}getProjectionDataForCustomLayer(a=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(a);if(!this.isGlobeRendering)return c;const C=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(a);return C.fallbackMatrix=c.mainMatrix,C}getFastPathSimpleProjectionMatrix(a){return this.currentTransform.getFastPathSimpleProjectionMatrix(a)}}class su{get useGlobeControls(){return!0}handlePanInertia(a,c){const C=Ui(a,c);return Math.abs(C.lng-c.center.lng)>180&&(C.lng=c.center.lng+179.5*Math.sign(C.lng-c.center.lng)),{easingCenter:C,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(a,c){const C=a.around,M=c.screenPointToLocation(C);a.bearingDelta&&c.setBearing(c.bearing+a.bearingDelta),a.pitchDelta&&c.setPitch(c.pitch+a.pitchDelta),a.rollDelta&&c.setRoll(c.roll+a.rollDelta);const k=c.zoom;a.zoomDelta&&c.setZoom(c.zoom+a.zoomDelta);const z=c.zoom-k;if(z===0)return;const Y=o.bn(c.center.lng,M.lng),J=Y/(Math.abs(Y/180)+1),se=o.bn(c.center.lat,M.lat),ye=c.getRayDirectionFromPixel(C),Te=c.cameraPosition,ke=-1*o.aV(Te,ye),Qe=o.bi();o.aP(Qe,Te,[ye[0]*ke,ye[1]*ke,ye[2]*ke]);const et=o.bt(Qe)-1,mt=Math.exp(.5*-Math.max(et-.3,0)),lt=Vi(c.worldSize,c.center.lat)/Math.min(c.width,c.height),pt=o.bf(lt,.9,.5,1,.25),bt=(1-o.aI(-z))*Math.min(mt,pt),Bt=c.center.lat,kt=c.zoom,Kt=new o.Q(c.center.lng+J*bt,o.ae(c.center.lat+se*bt,-85.051129,o.aJ));c.setLocationAtPoint(M,C);const Ut=c.center,It=o.bf(Math.abs(Y),45,85,0,1),nn=o.bf(lt,.75,.35,0,1),qt=Math.pow(Math.max(It,nn),.25),xn=o.bn(Ut.lng,Kt.lng),Sn=o.bn(Ut.lat,Kt.lat);c.setCenter(new o.Q(Ut.lng+xn*qt,Ut.lat+Sn*qt).wrap()),c.setZoom(kt+zr(Bt,c.center.lat))}handleMapControlsPan(a,c,C){if(!a.panDelta)return;const M=c.center.lat,k=c.zoom;c.setCenter(Ui(a.panDelta,c).wrap()),c.setZoom(k+zr(M,c.center.lat))}cameraForBoxAndBearing(a,c,C,M,k){const z=Ga(a,c,C,M,k),Y=c.left/k.width*2-1,J=(k.width-c.right)/k.width*2-1,se=c.top/k.height*-2+1,ye=(k.height-c.bottom)/k.height*-2+1,Te=o.bn(C.getWest(),C.getEast())<0,ke=Te?C.getEast():C.getWest(),Qe=Te?C.getWest():C.getEast(),et=Math.max(C.getNorth(),C.getSouth()),mt=Math.min(C.getNorth(),C.getSouth()),lt=ke+.5*o.bn(ke,Qe),pt=et+.5*o.bn(et,mt),bt=k.clone();bt.setCenter(z.center),bt.setBearing(z.bearing),bt.setPitch(0),bt.setRoll(0),bt.setZoom(z.zoom);const Bt=bt.modelViewProjectionMatrix,kt=[Rr(C.getNorthWest()),Rr(C.getNorthEast()),Rr(C.getSouthWest()),Rr(C.getSouthEast()),Rr(new o.Q(Qe,pt)),Rr(new o.Q(ke,pt)),Rr(new o.Q(lt,et)),Rr(new o.Q(lt,mt))],Kt=Rr(z.center);let Ut=Number.POSITIVE_INFINITY;for(const It of kt)Y<0&&(Ut=su.getLesserNonNegativeNonNull(Ut,su.solveVectorScale(It,Kt,Bt,"x",Y))),J>0&&(Ut=su.getLesserNonNegativeNonNull(Ut,su.solveVectorScale(It,Kt,Bt,"x",J))),se>0&&(Ut=su.getLesserNonNegativeNonNull(Ut,su.solveVectorScale(It,Kt,Bt,"y",se))),ye<0&&(Ut=su.getLesserNonNegativeNonNull(Ut,su.solveVectorScale(It,Kt,Bt,"y",ye)));if(Number.isFinite(Ut)&&Ut!==0)return z.zoom=bt.zoom+o.ab(Ut),z;ga()}handleJumpToCenterZoom(a,c){const C=a.center.lat,M=a.getConstrained(c.center?o.Q.convert(c.center):a.center,a.zoom).center;a.setCenter(M.wrap());const k=c.zoom!==void 0?+c.zoom:a.zoom+zr(C,M.lat);a.zoom!==k&&a.setZoom(k)}handleEaseTo(a,c){const C=a.zoom,M=a.center,k=a.padding,z={roll:a.roll,pitch:a.pitch,bearing:a.bearing},Y={roll:c.roll===void 0?a.roll:c.roll,pitch:c.pitch===void 0?a.pitch:c.pitch,bearing:c.bearing===void 0?a.bearing:c.bearing},J=c.zoom!==void 0,se=!a.isPaddingEqual(c.padding);let ye=!1;const Te=c.center?o.Q.convert(c.center):M,ke=a.getConstrained(Te,C).center;Gu(a,ke);const Qe=a.clone();Qe.setCenter(ke),Qe.setZoom(J?+c.zoom:C+zr(M.lat,Te.lat)),Qe.setBearing(c.bearing);const et=new o.P(o.ae(a.centerPoint.x+c.offsetAsPoint.x,0,a.width),o.ae(a.centerPoint.y+c.offsetAsPoint.y,0,a.height));Qe.setLocationAtPoint(ke,et);const mt=(c.offset&&c.offsetAsPoint.mag())>0?Qe.center:ke,lt=J?+c.zoom:C+zr(M.lat,mt.lat),pt=C+zr(M.lat,0),bt=lt+zr(mt.lat,0),Bt=o.bn(M.lng,mt.lng),kt=o.bn(M.lat,mt.lat),Kt=o.aI(bt-pt);return ye=lt!==C,{easeFunc:Ut=>{if(o.b6(z,Y)||zs({startEulerAngles:z,endEulerAngles:Y,tr:a,k:Ut,useSlerp:z.roll!=Y.roll}),se&&a.interpolatePadding(k,c.padding,Ut),c.around)o.w("Easing around a point is not supported under globe projection."),a.setLocationAtPoint(c.around,c.aroundPoint);else{const It=bt>pt?Math.min(2,Kt):Math.max(.5,Kt),nn=Math.pow(It,1-Ut),qt=$o(M,Bt,kt,Ut*nn);a.setCenter(qt.wrap())}if(ye){const It=o.B.number(pt,bt,Ut)+zr(0,a.center.lat);a.setZoom(It)}},isZooming:ye,elevationCenter:mt}}handleFlyTo(a,c){const C=c.zoom!==void 0,M=a.center,k=a.zoom,z=a.padding,Y=!a.isPaddingEqual(c.padding),J=a.getConstrained(o.Q.convert(c.center||c.locationAtOffset),k).center,se=C?+c.zoom:a.zoom+zr(a.center.lat,J.lat),ye=a.clone();ye.setCenter(J),ye.setZoom(se),ye.setBearing(c.bearing);const Te=new o.P(o.ae(a.centerPoint.x+c.offsetAsPoint.x,0,a.width),o.ae(a.centerPoint.y+c.offsetAsPoint.y,0,a.height));ye.setLocationAtPoint(J,Te);const ke=ye.center;Gu(a,ke);const Qe=function(kt,Kt,Ut){const It=Rr(Kt),nn=Rr(Ut),qt=o.aV(It,nn),xn=Math.acos(qt),Sn=di(kt);return xn/(2*Math.PI)*Sn}(a,M,ke),et=k+zr(M.lat,0),mt=se+zr(ke.lat,0),lt=o.aI(mt-et);let pt;if(typeof c.minZoom=="number"){const kt=+c.minZoom+zr(ke.lat,0),Kt=Math.min(kt,et,mt)+zr(0,ke.lat),Ut=a.getConstrained(ke,Kt).zoom+zr(ke.lat,0);pt=o.aI(Ut-et)}const bt=o.bn(M.lng,ke.lng),Bt=o.bn(M.lat,ke.lat);return{easeFunc:(kt,Kt,Ut,It)=>{const nn=$o(M,bt,Bt,Ut);Y&&a.interpolatePadding(z,c.padding,kt);const qt=kt===1?ke:nn;a.setCenter(qt.wrap());const xn=et+o.ab(Kt);a.setZoom(kt===1?se:xn+zr(0,qt.lat))},scaleOfZoom:lt,targetCenter:ke,scaleOfMinZoom:pt,pixelPathLength:Qe}}static solveVectorScale(a,c,C,M,k){const z=M==="x"?[C[0],C[4],C[8],C[12]]:[C[1],C[5],C[9],C[13]],Y=[C[3],C[7],C[11],C[15]],J=a[0]*z[0]+a[1]*z[1]+a[2]*z[2],se=a[0]*Y[0]+a[1]*Y[1]+a[2]*Y[2],ye=c[0]*z[0]+c[1]*z[1]+c[2]*z[2],Te=c[0]*Y[0]+c[1]*Y[1]+c[2]*Y[2];return ye+k*se===J+k*Te||Y[3]*(J-ye)+z[3]*(Te-se)+J*Te==ye*se?null:(ye+z[3]-k*Te-k*Y[3])/(ye-J-k*Te+k*se)}static getLesserNonNegativeNonNull(a,c){return c!==null&&c>=0&&c<a?c:a}}class vh{constructor(a){this._globe=a,this._mercatorCameraHelper=new Ta,this._verticalPerspectiveCameraHelper=new su}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(a,c){return this.currentHelper.handlePanInertia(a,c)}handleMapControlsRollPitchBearingZoom(a,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(a,c)}handleMapControlsPan(a,c,C){this.currentHelper.handleMapControlsPan(a,c,C)}cameraForBoxAndBearing(a,c,C,M,k){return this.currentHelper.cameraForBoxAndBearing(a,c,C,M,k)}handleJumpToCenterZoom(a,c){this.currentHelper.handleJumpToCenterZoom(a,c)}handleEaseTo(a,c){return this.currentHelper.handleEaseTo(a,c)}handleFlyTo(a,c){return this.currentHelper.handleFlyTo(a,c)}}const Su=(O,a)=>o.x(O,a&&a.filter(c=>c.identifier!=="source.canvas")),qd=o.bu();class Yc extends o.E{constructor(a,c={}){super(),this._rtlPluginLoaded=()=>{for(const C in this.sourceCaches){const M=this.sourceCaches[C].getSource().type;M!=="vector"&&M!=="geojson"||this.sourceCaches[C].reload()}},this.map=a,this.dispatcher=new Tt(Ft(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(C,M)=>this.getGlyphs(C,M)),this.dispatcher.registerMessageHandler("GI",(C,M)=>this.getImages(C,M)),this.imageManager=new fe,this.imageManager.setEventedParent(this),this.glyphManager=new De(a._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Se(256,512),this.crossTileSymbolIndex=new la,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bv,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.bw()),ce().on(gr,this._rtlPluginLoaded),this.on("data",C=>{if(C.dataType!=="source"||C.sourceDataType!=="metadata")return;const M=this.sourceCaches[C.sourceId];if(!M)return;const k=M.getSource();if(k&&k.vectorLayerIds)for(const z in this._layers){const Y=this._layers[z];Y.source===k.id&&this._validateLayer(Y)}})}loadURL(a,c={},C){this.fire(new o.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const M=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;const k=this._loadStyleRequest;o.j(M,this._loadStyleRequest).then(z=>{this._loadStyleRequest=null,this._load(z.data,c,C)}).catch(z=>{this._loadStyleRequest=null,z&&!k.signal.aborted&&this.fire(new o.k(z))})}loadJSON(a,c={},C){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,T.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(a,c,C)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(qd,{validate:!1})}_load(a,c,C){var M,k;const z=c.transformStyle?c.transformStyle(C,a):a;if(!c.validate||!Su(this,o.y(z))){this._loaded=!0,this.stylesheet=z;for(const Y in z.sources)this.addSource(Y,z.sources[Y],{validate:!1});z.sprite?this._loadSprite(z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(z.glyphs),this._createLayers(),this.light=new Ze(this.stylesheet.light),this._setProjectionInternal(((M=this.stylesheet.projection)===null||M===void 0?void 0:M.type)||"mercator"),this.sky=new Ne(this.stylesheet.sky),this.map.setTerrain((k=this.stylesheet.terrain)!==null&&k!==void 0?k:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){const a=o.bx(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of a){const C=o.by(c);C.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=C}}_loadSprite(a,c=!1,C=void 0){let M;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(k,z,Y,J){return o._(this,void 0,void 0,function*(){const se=ne(k),ye=Y>1?"@2x":"",Te={},ke={};for(const{id:Qe,url:et}of se){const mt=z.transformRequest(W(et,ye,".json"),"SpriteJSON");Te[Qe]=o.j(mt,J);const lt=z.transformRequest(W(et,ye,".png"),"SpriteImage");ke[Qe]=te.getImage(lt,J)}return yield Promise.all([...Object.values(Te),...Object.values(ke)]),function(Qe,et){return o._(this,void 0,void 0,function*(){const mt={};for(const lt in Qe){mt[lt]={};const pt=T.getImageCanvasContext((yield et[lt]).data),bt=(yield Qe[lt]).data;for(const Bt in bt){const{width:kt,height:Kt,x:Ut,y:It,sdf:nn,pixelRatio:qt,stretchX:xn,stretchY:Sn,content:Cn,textFitWidth:In,textFitHeight:Nn}=bt[Bt];mt[lt][Bt]={data:null,pixelRatio:qt,sdf:nn,stretchX:xn,stretchY:Sn,content:Cn,textFitWidth:In,textFitHeight:Nn,spriteData:{width:kt,height:Kt,x:Ut,y:It,context:pt}}}}return mt})}(Te,ke)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(k=>{if(this._spriteRequest=null,k)for(const z in k){this._spritesImagesIds[z]=[];const Y=this._spritesImagesIds[z]?this._spritesImagesIds[z].filter(J=>!(J in k)):[];for(const J of Y)this.imageManager.removeImage(J),this._changedImages[J]=!0;for(const J in k[z]){const se=z==="default"?J:`${z}:${J}`;this._spritesImagesIds[z].push(se),se in this.imageManager.images?this.imageManager.updateImage(se,k[z][J],!1):this.imageManager.addImage(se,k[z][J]),c&&(this._changedImages[se]=!0)}}}).catch(k=>{this._spriteRequest=null,M=k,this.fire(new o.k(M))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),C&&C(M)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(a){const c=this.sourceCaches[a.source];if(!c)return;const C=a.sourceLayer;if(!C)return;const M=c.getSource();(M.type==="geojson"||M.vectorLayerIds&&M.vectorLayerIds.indexOf(C)===-1)&&this.fire(new o.k(new Error(`Source layer "${C}" does not exist on source "${M.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,c=!1){const C=this._serializedAllLayers();if(!a||a.length===0)return Object.values(c?o.bz(C):C);const M=[];for(const k of a)if(C[k]){const z=c?o.bz(C[k]):C[k];M.push(z)}return M}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const c=Object.keys(this._layers);for(const C of c){const M=this._layers[C];M.type!=="custom"&&(a[C]=M.serialize())}return a}hasTransitions(){var a,c,C;if(!((a=this.light)===null||a===void 0)&&a.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((C=this.projection)===null||C===void 0)&&C.hasTransition())return!0;for(const M in this.sourceCaches)if(this.sourceCaches[M].hasTransition())return!0;for(const M in this._layers)if(this._layers[M].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const c=this._changed;if(c){const M=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(M.length||k.length)&&this._updateWorkerLayers(M,k);for(const z in this._updatedSources){const Y=this._updatedSources[z];if(Y==="reload")this._reloadSource(z);else{if(Y!=="clear")throw new Error(`Invalid action ${Y}`);this._clearSource(z)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}const C={};for(const M in this.sourceCaches){const k=this.sourceCaches[M];C[M]=k.used,k.used=!1}for(const M of this._order){const k=this._layers[M];k.recalculate(a,this._availableImages),!k.isHidden(a.zoom)&&k.source&&(this.sourceCaches[k.source].used=!0)}for(const M in C){const k=this.sourceCaches[M];!!C[M]!=!!k.used&&k.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:M}))}this.light.recalculate(a),this.sky.recalculate(a),this.projection.recalculate(a),this.z=a.zoom,c&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,c={}){var C;this._checkLoaded();const M=this.serialize();if(a=c.transformStyle?c.transformStyle(M,a):a,((C=c.validate)===null||C===void 0||C)&&Su(this,o.y(a)))return!1;(a=o.bz(a)).layers=o.bx(a.layers);const k=o.bA(M,a),z=this._getOperationsToPerform(k);if(z.unimplemented.length>0)throw new Error(`Unimplemented: ${z.unimplemented.join(", ")}.`);if(z.operations.length===0)return!1;for(const Y of z.operations)Y();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){const c=[],C=[];for(const M of a)switch(M.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,M.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,M.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,M.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,M.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,M.args));break;case"addSource":c.push(()=>this.addSource.apply(this,M.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,M.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,M.args));break;case"setLight":c.push(()=>this.setLight.apply(this,M.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,M.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,M.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,M.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,M.args));break;case"setSky":c.push(()=>this.setSky.apply(this,M.args));break;case"setProjection":this.setProjection.apply(this,M.args);break;case"setTransition":c.push(()=>{});break;default:C.push(M.command)}return{operations:c,unimplemented:C}}addImage(a,c){if(this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,c),this._afterImageUpdated(a)}updateImage(a,c){this.imageManager.updateImage(a,c)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,c,C={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.y.source,`sources.${a}`,c,null,C))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const M=this.sourceCaches[a]=new ae(a,c,this.dispatcher);M.style=this,M.setEventedParent(this,()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:a})),M.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===a)return this.fire(new o.k(new Error(`Source "${a}" cannot be removed while layer "${C}" is using it.`)));const c=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],c.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,c){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const C=this.sourceCaches[a].getSource();if(C.type!=="geojson")throw new Error(`geojsonSource.type is ${C.type}, which is !== 'geojson`);C.setData(c),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,c,C={}){this._checkLoaded();const M=a.id;if(this.getLayer(M))return void this.fire(new o.k(new Error(`Layer "${M}" already exists on this map.`)));let k;if(a.type==="custom"){if(Su(this,o.bB(a)))return;k=o.by(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(M,a.source),a=o.bz(a),a=o.e(a,{source:M})),this._validate(o.y.layer,`layers.${M}`,a,{arrayIndex:-1},C))return;k=o.by(a),this._validateLayer(k),k.setEventedParent(this,{layer:{id:M}})}const z=c?this._order.indexOf(c):this._order.length;if(c&&z===-1)this.fire(new o.k(new Error(`Cannot add layer "${M}" before non-existing layer "${c}".`)));else{if(this._order.splice(z,0,M),this._layerOrderChanged=!0,this._layers[M]=k,this._removedLayers[M]&&k.source&&k.type!=="custom"){const Y=this._removedLayers[M];delete this._removedLayers[M],Y.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}moveLayer(a,c){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.k(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===c)return;const C=this._order.indexOf(a);this._order.splice(C,1);const M=c?this._order.indexOf(c):this._order.length;c&&M===-1?this.fire(new o.k(new Error(`Cannot move layer "${a}" before non-existing layer "${c}".`))):(this._order.splice(M,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const c=this._layers[a];if(!c)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${a}".`)));c.setEventedParent(null);const C=this._order.indexOf(a);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=c,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],c.onRemove&&c.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,c,C){this._checkLoaded();const M=this.getLayer(a);M?M.minzoom===c&&M.maxzoom===C||(c!=null&&(M.minzoom=c),C!=null&&(M.maxzoom=C),this._updateLayer(M)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,c,C={}){this._checkLoaded();const M=this.getLayer(a);if(M){if(!o.bC(M.filter,c))return c==null?(M.filter=void 0,void this._updateLayer(M)):void(this._validate(o.y.filter,`layers.${M.id}.filter`,c,null,C)||(M.filter=o.bz(c),this._updateLayer(M)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return o.bz(this.getLayer(a).filter)}setLayoutProperty(a,c,C,M={}){this._checkLoaded();const k=this.getLayer(a);k?o.bC(k.getLayoutProperty(c),C)||(k.setLayoutProperty(c,C,M),this._updateLayer(k)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,c){const C=this.getLayer(a);if(C)return C.getLayoutProperty(c);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,c,C,M={}){this._checkLoaded();const k=this.getLayer(a);k?o.bC(k.getPaintProperty(c),C)||(k.setPaintProperty(c,C,M)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,c){return this.getLayer(a).getPaintProperty(c)}setFeatureState(a,c){this._checkLoaded();const C=a.source,M=a.sourceLayer,k=this.sourceCaches[C];if(k===void 0)return void this.fire(new o.k(new Error(`The source '${C}' does not exist in the map's style.`)));const z=k.getSource().type;z==="geojson"&&M?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||M?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),k.setFeatureState(M,a.id,c)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,c){this._checkLoaded();const C=a.source,M=this.sourceCaches[C];if(M===void 0)return void this.fire(new o.k(new Error(`The source '${C}' does not exist in the map's style.`)));const k=M.getSource().type,z=k==="vector"?a.sourceLayer:void 0;k!=="vector"||z?c&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(z,a.id,c):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const c=a.source,C=a.sourceLayer,M=this.sourceCaches[c];if(M!==void 0)return M.getSource().type!=="vector"||C?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),M.getFeatureState(C,a.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=o.bD(this.sourceCaches,k=>k.serialize()),c=this._serializeByIds(this._order,!0),C=this.map.getTerrain()||void 0,M=this.stylesheet;return o.bE({version:M.version,name:M.name,metadata:M.metadata,light:M.light,sky:M.sky,center:M.center,zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,sprite:M.sprite,glyphs:M.glyphs,transition:M.transition,projection:M.projection,sources:a,layers:c,terrain:C},k=>k!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const c=z=>this._layers[z].type==="fill-extrusion",C={},M=[];for(let z=this._order.length-1;z>=0;z--){const Y=this._order[z];if(c(Y)){C[Y]=z;for(const J of a){const se=J[Y];if(se)for(const ye of se)M.push(ye)}}}M.sort((z,Y)=>Y.intersectionZ-z.intersectionZ);const k=[];for(let z=this._order.length-1;z>=0;z--){const Y=this._order[z];if(c(Y))for(let J=M.length-1;J>=0;J--){const se=M[J].feature;if(C[se.layer.id]<z)break;k.push(se),M.pop()}else for(const J of a){const se=J[Y];if(se)for(const ye of se)k.push(ye.feature)}}return k}queryRenderedFeatures(a,c,C){c&&c.filter&&this._validate(o.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const M={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const se of c.layers){const ye=this._layers[se];if(!ye)return this.fire(new o.k(new Error(`The layer '${se}' does not exist in the map's style and cannot be queried for features.`))),[];M[ye.source]=!0}}const k=[];c.availableImages=this._availableImages;const z=this._serializedAllLayers(),Y=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,J=Object.assign(Object.assign({},c),{layers:Y});for(const se in this.sourceCaches)c.layers&&!M[se]||k.push(Be(this.sourceCaches[se],this._layers,z,a,J,C,this.map.terrain?(ye,Te,ke)=>this.map.terrain.getElevation(ye,Te,ke):void 0));return this.placement&&k.push(function(se,ye,Te,ke,Qe,et,mt){const lt={},pt=et.queryRenderedSymbols(ke),bt=[];for(const Bt of Object.keys(pt).map(Number))bt.push(mt[Bt]);bt.sort(it);for(const Bt of bt){const kt=Bt.featureIndex.lookupSymbolFeatures(pt[Bt.bucketInstanceId],ye,Bt.bucketIndex,Bt.sourceLayerIndex,Qe.filter,Qe.layers,Qe.availableImages,se);for(const Kt in kt){const Ut=lt[Kt]=lt[Kt]||[],It=kt[Kt];It.sort((nn,qt)=>{const xn=Bt.featureSortOrder;if(xn){const Sn=xn.indexOf(nn.featureIndex);return xn.indexOf(qt.featureIndex)-Sn}return qt.featureIndex-nn.featureIndex});for(const nn of It)Ut.push(nn)}}return function(Bt,kt,Kt){for(const Ut in Bt)for(const It of Bt[Ut])Ct(It,Kt[kt[Ut].source]);return Bt}(lt,se,Te)}(this._layers,z,this.sourceCaches,a,J,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(a,c){c&&c.filter&&this._validate(o.y.filter,"querySourceFeatures.filter",c.filter,null,c);const C=this.sourceCaches[a];return C?function(M,k){const z=M.getRenderableIds().map(se=>M.getTileByID(se)),Y=[],J={};for(let se=0;se<z.length;se++){const ye=z[se],Te=ye.tileID.canonical.key;J[Te]||(J[Te]=!0,ye.querySourceFeatures(Y,k))}return Y}(C,c):[]}getLight(){return this.light.getLight()}setLight(a,c={}){this._checkLoaded();const C=this.light.getLight();let M=!1;for(const z in a)if(!o.bC(a[z],C[z])){M=!0;break}if(!M)return;const k={now:T.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,c),this.light.updateTransitions(k)}getProjection(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.projection}setProjection(a){if(this._checkLoaded(),this.projection){if(this.projection.name===a.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=a,this._setProjectionInternal(a.type)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,c={}){this._checkLoaded();const C=this.getSky();let M=!1;if(!a&&!C)return;if(a&&!C)M=!0;else if(!a&&C)M=!0;else for(const z in a)if(!o.bC(a[z],C[z])){M=!0;break}if(!M)return;const k={now:T.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,c),this.sky.updateTransitions(k)}_setProjectionInternal(a){const c=function(C){if(Array.isArray(C)){const M=new Zr({type:C});return{projection:M,transform:new al,cameraHelper:new vh(M)}}switch(C){case"mercator":return{projection:new Si,transform:new Mo,cameraHelper:new Ta};case"globe":{const M=new Zr({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new al,cameraHelper:new vh(M)}}case"vertical-perspective":return{projection:new Ir,transform:new Yd,cameraHelper:new su};default:return o.w(`Unknown projection name: ${C}. Falling back to mercator projection.`),{projection:new Si,transform:new Mo,cameraHelper:new Ta}}}(a);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const C in this.sourceCaches)this.sourceCaches[C].reload()}_validate(a,c,C,M,k={}){return(!k||k.validate!==!1)&&Su(this,a.call(o.y,o.e({key:c,style:this.serialize(),value:C,styleSpec:o.v},M)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ce().off(gr,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const C=this.sourceCaches[c];C.setEventedParent(null),C.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const c in this.sourceCaches)this.sourceCaches[c].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,c,C,M,k=!1){let z=!1,Y=!1;const J={};for(const se of this._order){const ye=this._layers[se];if(ye.type!=="symbol")continue;if(!J[ye.source]){const ke=this.sourceCaches[ye.source];J[ye.source]=ke.getRenderableIds(!0).map(Qe=>ke.getTileByID(Qe)).sort((Qe,et)=>et.tileID.overscaledZ-Qe.tileID.overscaledZ||(Qe.tileID.isLessThan(et.tileID)?-1:1))}const Te=this.crossTileSymbolIndex.addLayer(ye,J[ye.source],a.center.lng);z=z||Te}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||C===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(T.now(),a.zoom))&&(this.pauseablePlacement=new dn(a,this.map.terrain,this._order,k,c,C,M,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,J),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(T.now()),Y=!0),z&&this.pauseablePlacement.placement.setStale()),Y||z)for(const se of this._order){const ye=this._layers[se];ye.type==="symbol"&&this.placement.updateLayerOpacities(ye,J[ye.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(T.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,c){return o._(this,void 0,void 0,function*(){const C=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,c.icons),C})}getGlyphs(a,c){return o._(this,void 0,void 0,function*(){const C=yield this.glyphManager.getGlyphs(c.stacks),M=this.sourceCaches[c.source];return M&&M.setDependencies(c.tileID.key,c.type,[""]),C})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,c={}){this._checkLoaded(),a&&this._validate(o.y.glyphs,"glyphs",a,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,c,C={},M){this._checkLoaded();const k=[{id:a,url:c}],z=[...ne(this.stylesheet.sprite),...k];this._validate(o.y.sprite,"sprite",z,null,C)||(this.stylesheet.sprite=z,this._loadSprite(k,!0,M))}removeSprite(a){this._checkLoaded();const c=ne(this.stylesheet.sprite);if(c.find(C=>C.id===a)){if(this._spritesImagesIds[a])for(const C of this._spritesImagesIds[a])this.imageManager.removeImage(C),this._changedImages[C]=!0;c.splice(c.findIndex(C=>C.id===a),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(a,c={},C){this._checkLoaded(),a&&this._validate(o.y.sprite,"sprite",a,null,c)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,C):(this._unloadSprite(),C&&C(null)))}}var ws=o.aD([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class LA{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,c,C,M,k,z,Y,J,se){this.context=a;let ye=this.boundPaintVertexBuffers.length!==M.length;for(let Te=0;!ye&&Te<M.length;Te++)this.boundPaintVertexBuffers[Te]!==M[Te]&&(ye=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==C||ye||this.boundIndexBuffer!==k||this.boundVertexOffset!==z||this.boundDynamicVertexBuffer!==Y||this.boundDynamicVertexBuffer2!==J||this.boundDynamicVertexBuffer3!==se?this.freshBind(c,C,M,k,z,Y,J,se):(a.bindVertexArray.set(this.vao),Y&&Y.bind(),k&&k.dynamicDraw&&k.bind(),J&&J.bind(),se&&se.bind())}freshBind(a,c,C,M,k,z,Y,J){const se=a.numAttributes,ye=this.context,Te=ye.gl;this.vao&&this.destroy(),this.vao=ye.createVertexArray(),ye.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=M,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=z,this.boundDynamicVertexBuffer2=Y,this.boundDynamicVertexBuffer3=J,c.enableAttributes(Te,a);for(const ke of C)ke.enableAttributes(Te,a);z&&z.enableAttributes(Te,a),Y&&Y.enableAttributes(Te,a),J&&J.enableAttributes(Te,a),c.bind(),c.setVertexAttribPointers(Te,a,k);for(const ke of C)ke.bind(),ke.setVertexAttribPointers(Te,a,k);z&&(z.bind(),z.setVertexAttribPointers(Te,a,k)),M&&M.bind(),Y&&(Y.bind(),Y.setVertexAttribPointers(Te,a,k)),J&&(J.bind(),J.setVertexAttribPointers(Te,a,k)),ye.currentNumAttributes=se}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const mA=(O,a,c,C,M)=>({u_texture:0,u_ele_delta:O,u_fog_matrix:a,u_fog_color:c?c.properties.get("fog-color"):o.b7.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:M?0:c?c.calculateFogBlendOpacity(C):0,u_horizon_color:c?c.properties.get("horizon-color"):o.b7.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:M?1:0}),xp={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function UA(O){const a=[];for(let c=0;c<O.length;c++){if(O[c]===null)continue;const C=O[c].split(" ");a.push(C.pop())}return a}class lc{constructor(a,c,C,M,k,z,Y,J){const se=a.gl;this.program=se.createProgram();const ye=UA(c.staticAttributes),Te=C?C.getBinderAttributes():[],ke=ye.concat(Te),Qe=ei.prelude.staticUniforms?UA(ei.prelude.staticUniforms):[],et=Y.staticUniforms?UA(Y.staticUniforms):[],mt=c.staticUniforms?UA(c.staticUniforms):[],lt=C?C.getBinderUniforms():[],pt=Qe.concat(et).concat(mt).concat(lt),bt=[];for(const qt of pt)bt.indexOf(qt)<0&&bt.push(qt);const Bt=C?C.defines():[];Ki(se)&&Bt.unshift("#version 300 es"),k&&Bt.push("#define OVERDRAW_INSPECTOR;"),z&&Bt.push("#define TERRAIN3D;"),J&&Bt.push(J);let kt=Bt.concat(ei.prelude.fragmentSource,Y.fragmentSource,c.fragmentSource).join(`
`),Kt=Bt.concat(ei.prelude.vertexSource,Y.vertexSource,c.vertexSource).join(`
`);Ki(se)||(kt=function(qt){return qt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(kt),Kt=function(qt){return qt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Kt));const Ut=se.createShader(se.FRAGMENT_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);if(se.shaderSource(Ut,kt),se.compileShader(Ut),!se.getShaderParameter(Ut,se.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${se.getShaderInfoLog(Ut)}`);se.attachShader(this.program,Ut);const It=se.createShader(se.VERTEX_SHADER);if(se.isContextLost())return void(this.failedToCreate=!0);if(se.shaderSource(It,Kt),se.compileShader(It),!se.getShaderParameter(It,se.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${se.getShaderInfoLog(It)}`);se.attachShader(this.program,It),this.attributes={};const nn={};this.numAttributes=ke.length;for(let qt=0;qt<this.numAttributes;qt++)ke[qt]&&(se.bindAttribLocation(this.program,qt,ke[qt]),this.attributes[ke[qt]]=qt);if(se.linkProgram(this.program),!se.getProgramParameter(this.program,se.LINK_STATUS))throw new Error(`Program failed to link: ${se.getProgramInfoLog(this.program)}`);se.deleteShader(It),se.deleteShader(Ut);for(let qt=0;qt<bt.length;qt++){const xn=bt[qt];if(xn&&!nn[xn]){const Sn=se.getUniformLocation(this.program,xn);Sn&&(nn[xn]=Sn)}}this.fixedUniforms=M(a,nn),this.terrainUniforms=((qt,xn)=>({u_depth:new o.bF(qt,xn.u_depth),u_terrain:new o.bF(qt,xn.u_terrain),u_terrain_dim:new o.b8(qt,xn.u_terrain_dim),u_terrain_matrix:new o.bH(qt,xn.u_terrain_matrix),u_terrain_unpack:new o.bI(qt,xn.u_terrain_unpack),u_terrain_exaggeration:new o.b8(qt,xn.u_terrain_exaggeration)}))(a,nn),this.projectionUniforms=((qt,xn)=>({u_projection_matrix:new o.bH(qt,xn.u_projection_matrix),u_projection_tile_mercator_coords:new o.bI(qt,xn.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bI(qt,xn.u_projection_clipping_plane),u_projection_transition:new o.b8(qt,xn.u_projection_transition),u_projection_fallback_matrix:new o.bH(qt,xn.u_projection_fallback_matrix)}))(a,nn),this.binderUniforms=C?C.getUniforms(a,nn):[]}draw(a,c,C,M,k,z,Y,J,se,ye,Te,ke,Qe,et,mt,lt,pt,bt,Bt){const kt=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(C),a.setStencilMode(M),a.setColorMode(k),a.setCullFace(z),J){a.activeTexture.set(kt.TEXTURE2),kt.bindTexture(kt.TEXTURE_2D,J.depthTexture),a.activeTexture.set(kt.TEXTURE3),kt.bindTexture(kt.TEXTURE_2D,J.texture);for(const Ut in this.terrainUniforms)this.terrainUniforms[Ut].set(J[Ut])}if(se)for(const Ut in se)this.projectionUniforms[xp[Ut]].set(se[Ut]);if(Y)for(const Ut in this.fixedUniforms)this.fixedUniforms[Ut].set(Y[Ut]);lt&&lt.setUniforms(a,this.binderUniforms,et,{zoom:mt});let Kt=0;switch(c){case kt.LINES:Kt=2;break;case kt.TRIANGLES:Kt=3;break;case kt.LINE_STRIP:Kt=1}for(const Ut of Qe.get()){const It=Ut.vaos||(Ut.vaos={});(It[ye]||(It[ye]=new LA)).bind(a,this,Te,lt?lt.getPaintVertexBuffers():[],ke,Ut.vertexOffset,pt,bt,Bt),kt.drawElements(c,Ut.primitiveLength*Kt,kt.UNSIGNED_SHORT,Ut.primitiveOffset*Kt*2)}}}function gd(O,a,c){const C=1/o.aw(c,1,a.transform.tileZoom),M=Math.pow(2,c.tileID.overscaledZ),k=c.tileSize*Math.pow(2,a.transform.tileZoom)/M,z=k*(c.tileID.canonical.x+c.tileID.wrap*M),Y=k*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[C,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[z>>16,Y>>16],u_pixel_coord_lower:[65535&z,65535&Y]}}const Mp=(O,a,c,C)=>{const M=O.style.light,k=M.properties.get("position"),z=[k.x,k.y,k.z],Y=o.bL();M.properties.get("anchor")==="viewport"&&o.bM(Y,O.transform.bearingInRadians),o.bN(z,z,Y);const J=O.transform.transformLightDirection(z),se=M.properties.get("color");return{u_lightpos:z,u_lightpos_globe:J,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+a,u_opacity:c,u_fill_translate:C}},Ch=(O,a,c,C,M,k,z)=>o.e(Mp(O,a,c,C),gd(k,O,z),{u_height_factor:-Math.pow(2,M.overscaledZ)/z.tileSize/8}),bc=(O,a,c,C)=>o.e(gd(a,O,c),{u_fill_translate:C}),ms=(O,a)=>({u_world:O,u_fill_translate:a}),Df=(O,a,c,C,M)=>o.e(bc(O,a,c,M),{u_world:C}),Zh=(O,a,c,C,M)=>{const k=O.transform;let z,Y,J=0;if(c.paint.get("circle-pitch-alignment")==="map"){const se=o.aw(a,1,k.zoom);z=!0,Y=[se,se],J=se/(o.Z*Math.pow(2,a.tileID.overscaledZ))*2*Math.PI*M}else z=!1,Y=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+z,u_device_pixel_ratio:O.pixelRatio,u_extrude_scale:Y,u_globe_extrude_scale:J,u_translate:C}},Vd=O=>({u_pixel_extrude_scale:[1/O.width,1/O.height]}),Xh=O=>({u_viewport_size:[O.width,O.height]}),qc=(O,a=1)=>({u_color:O,u_overlay:0,u_overlay_scale:a}),Jh=(O,a,c,C)=>{const M=o.aw(O,1,a)/(o.Z*Math.pow(2,O.tileID.overscaledZ))*2*Math.PI*C;return{u_extrude_scale:o.aw(O,1,a),u_intensity:c,u_globe_extrude_scale:M}},_h=(O,a,c,C)=>{const M=o.K();o.bO(M,0,O.width,O.height,0,0,1);const k=O.context.gl;return{u_matrix:M,u_world:[k.drawingBufferWidth,k.drawingBufferHeight],u_image:c,u_color_ramp:C,u_opacity:a.paint.get("heatmap-opacity")}},bh=(O,a,c)=>{const C=c.paint.get("hillshade-shadow-color"),M=c.paint.get("hillshade-highlight-color"),k=c.paint.get("hillshade-accent-color");let z=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(z+=O.transform.bearingInRadians),{u_image:0,u_latrange:yd(0,a.tileID),u_light:[c.paint.get("hillshade-exaggeration"),z],u_shadow:C,u_highlight:M,u_accent:k}},ef=(O,a)=>{const c=a.stride,C=o.K();return o.bO(C,0,o.Z,-8192,0,0,1),o.L(C,C,[0,-8192,0]),{u_matrix:C,u_image:1,u_dimension:[c,c],u_zoom:O.overscaledZ,u_unpack:a.getUnpackVector()}};function yd(O,a){const c=Math.pow(2,a.canonical.z),C=a.canonical.y;return[new o.$(0,C/c).toLngLat().lat,new o.$(0,(C+1)/c).toLngLat().lat]}const $d=(O,a,c,C)=>{const M=O.transform;return{u_translation:vd(O,a,c),u_ratio:C/o.aw(a,1,M.zoom),u_device_pixel_ratio:O.pixelRatio,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},au=(O,a,c,C,M)=>o.e($d(O,a,c,C),{u_image:0,u_image_height:M}),xc=(O,a,c,C,M)=>{const k=O.transform,z=Eu(a,k);return{u_translation:vd(O,a,c),u_texsize:a.imageAtlasTexture.size,u_ratio:C/o.aw(a,1,k.zoom),u_device_pixel_ratio:O.pixelRatio,u_image:0,u_scale:[z,M.fromScale,M.toScale],u_fade:M.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},Qu=(O,a,c,C,M,k)=>{const z=O.lineAtlas,Y=Eu(a,O.transform),J=c.layout.get("line-cap")==="round",se=z.getDash(M.from,J),ye=z.getDash(M.to,J),Te=se.width*k.fromScale,ke=ye.width*k.toScale;return o.e($d(O,a,c,C),{u_patternscale_a:[Y/Te,-se.height/2],u_patternscale_b:[Y/ke,-ye.height/2],u_sdfgamma:z.width/(256*Math.min(Te,ke)*O.pixelRatio)/2,u_image:0,u_tex_y_a:se.y,u_tex_y_b:ye.y,u_mix:k.t})};function Eu(O,a){return 1/o.aw(O,1,a.tileZoom)}function vd(O,a,c){return o.ax(O.transform,a,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const tf=(O,a,c,C,M)=>{return{u_tl_parent:O,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(z=C.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(k=C.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:nf(C.paint.get("raster-hue-rotate")),u_coords_top:[M[0].x,M[0].y,M[1].x,M[1].y],u_coords_bottom:[M[3].x,M[3].y,M[2].x,M[2].y]};var k,z};function nf(O){O*=Math.PI/180;const a=Math.sin(O),c=Math.cos(O);return[(2*c+1)/3,(-Math.sqrt(3)*a-c+1)/3,(Math.sqrt(3)*a-c+1)/3]}const Yu=(O,a,c,C,M,k,z,Y,J,se,ye,Te,ke)=>{const Qe=z.transform;return{u_is_size_zoom_constant:+(O==="constant"||O==="source"),u_is_size_feature_constant:+(O==="constant"||O==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:Qe.cameraToCenterDistance,u_pitch:Qe.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:Qe.width/Qe.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_label_plane_matrix:Y,u_coord_matrix:J,u_is_text:+ye,u_pitch_with_map:+C,u_is_along_line:M,u_is_variable_anchor:k,u_texsize:Te,u_texture:0,u_translation:se,u_pitched_scale:ke}},uc=(O,a,c,C,M,k,z,Y,J,se,ye,Te,ke,Qe)=>{const et=z.transform;return o.e(Yu(O,a,c,C,M,k,z,Y,J,se,ye,Te,Qe),{u_gamma_scale:C?Math.cos(et.pitch*Math.PI/180)*et.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:1})},Ac=(O,a,c,C,M,k,z,Y,J,se,ye,Te,ke)=>o.e(uc(O,a,c,C,M,k,z,Y,J,se,!0,ye,0,ke),{u_texsize_icon:Te,u_texture_icon:1}),Cd=(O,a)=>({u_opacity:O,u_color:a}),xh=(O,a,c,C,M)=>o.e(function(k,z,Y,J){const se=Y.imageManager.getPattern(k.from.toString()),ye=Y.imageManager.getPattern(k.to.toString()),{width:Te,height:ke}=Y.imageManager.getPixelSize(),Qe=Math.pow(2,J.tileID.overscaledZ),et=J.tileSize*Math.pow(2,Y.transform.tileZoom)/Qe,mt=et*(J.tileID.canonical.x+J.tileID.wrap*Qe),lt=et*J.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:ye.tl,u_pattern_br_b:ye.br,u_texsize:[Te,ke],u_mix:z.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:ye.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/o.aw(J,1,Y.transform.tileZoom),u_pixel_coord_upper:[mt>>16,lt>>16],u_pixel_coord_lower:[65535&mt,65535&lt]}}(c,M,a,C),{u_opacity:O}),cc=(O,a)=>{},_d={fillExtrusion:(O,a)=>({u_lightpos:new o.bJ(O,a.u_lightpos),u_lightpos_globe:new o.bJ(O,a.u_lightpos_globe),u_lightintensity:new o.b8(O,a.u_lightintensity),u_lightcolor:new o.bJ(O,a.u_lightcolor),u_vertical_gradient:new o.b8(O,a.u_vertical_gradient),u_opacity:new o.b8(O,a.u_opacity),u_fill_translate:new o.bK(O,a.u_fill_translate)}),fillExtrusionPattern:(O,a)=>({u_lightpos:new o.bJ(O,a.u_lightpos),u_lightpos_globe:new o.bJ(O,a.u_lightpos_globe),u_lightintensity:new o.b8(O,a.u_lightintensity),u_lightcolor:new o.bJ(O,a.u_lightcolor),u_vertical_gradient:new o.b8(O,a.u_vertical_gradient),u_height_factor:new o.b8(O,a.u_height_factor),u_opacity:new o.b8(O,a.u_opacity),u_fill_translate:new o.bK(O,a.u_fill_translate),u_image:new o.bF(O,a.u_image),u_texsize:new o.bK(O,a.u_texsize),u_pixel_coord_upper:new o.bK(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bK(O,a.u_pixel_coord_lower),u_scale:new o.bJ(O,a.u_scale),u_fade:new o.b8(O,a.u_fade)}),fill:(O,a)=>({u_fill_translate:new o.bK(O,a.u_fill_translate)}),fillPattern:(O,a)=>({u_image:new o.bF(O,a.u_image),u_texsize:new o.bK(O,a.u_texsize),u_pixel_coord_upper:new o.bK(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bK(O,a.u_pixel_coord_lower),u_scale:new o.bJ(O,a.u_scale),u_fade:new o.b8(O,a.u_fade),u_fill_translate:new o.bK(O,a.u_fill_translate)}),fillOutline:(O,a)=>({u_world:new o.bK(O,a.u_world),u_fill_translate:new o.bK(O,a.u_fill_translate)}),fillOutlinePattern:(O,a)=>({u_world:new o.bK(O,a.u_world),u_image:new o.bF(O,a.u_image),u_texsize:new o.bK(O,a.u_texsize),u_pixel_coord_upper:new o.bK(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bK(O,a.u_pixel_coord_lower),u_scale:new o.bJ(O,a.u_scale),u_fade:new o.b8(O,a.u_fade),u_fill_translate:new o.bK(O,a.u_fill_translate)}),circle:(O,a)=>({u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_scale_with_map:new o.bF(O,a.u_scale_with_map),u_pitch_with_map:new o.bF(O,a.u_pitch_with_map),u_extrude_scale:new o.bK(O,a.u_extrude_scale),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_globe_extrude_scale:new o.b8(O,a.u_globe_extrude_scale),u_translate:new o.bK(O,a.u_translate)}),collisionBox:(O,a)=>({u_pixel_extrude_scale:new o.bK(O,a.u_pixel_extrude_scale)}),collisionCircle:(O,a)=>({u_viewport_size:new o.bK(O,a.u_viewport_size)}),debug:(O,a)=>({u_color:new o.bG(O,a.u_color),u_overlay:new o.bF(O,a.u_overlay),u_overlay_scale:new o.b8(O,a.u_overlay_scale)}),depth:cc,clippingMask:cc,heatmap:(O,a)=>({u_extrude_scale:new o.b8(O,a.u_extrude_scale),u_intensity:new o.b8(O,a.u_intensity),u_globe_extrude_scale:new o.b8(O,a.u_globe_extrude_scale)}),heatmapTexture:(O,a)=>({u_matrix:new o.bH(O,a.u_matrix),u_world:new o.bK(O,a.u_world),u_image:new o.bF(O,a.u_image),u_color_ramp:new o.bF(O,a.u_color_ramp),u_opacity:new o.b8(O,a.u_opacity)}),hillshade:(O,a)=>({u_image:new o.bF(O,a.u_image),u_latrange:new o.bK(O,a.u_latrange),u_light:new o.bK(O,a.u_light),u_shadow:new o.bG(O,a.u_shadow),u_highlight:new o.bG(O,a.u_highlight),u_accent:new o.bG(O,a.u_accent)}),hillshadePrepare:(O,a)=>({u_matrix:new o.bH(O,a.u_matrix),u_image:new o.bF(O,a.u_image),u_dimension:new o.bK(O,a.u_dimension),u_zoom:new o.b8(O,a.u_zoom),u_unpack:new o.bI(O,a.u_unpack)}),line:(O,a)=>({u_translation:new o.bK(O,a.u_translation),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bK(O,a.u_units_to_pixels)}),lineGradient:(O,a)=>({u_translation:new o.bK(O,a.u_translation),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bK(O,a.u_units_to_pixels),u_image:new o.bF(O,a.u_image),u_image_height:new o.b8(O,a.u_image_height)}),linePattern:(O,a)=>({u_translation:new o.bK(O,a.u_translation),u_texsize:new o.bK(O,a.u_texsize),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_image:new o.bF(O,a.u_image),u_units_to_pixels:new o.bK(O,a.u_units_to_pixels),u_scale:new o.bJ(O,a.u_scale),u_fade:new o.b8(O,a.u_fade)}),lineSDF:(O,a)=>({u_translation:new o.bK(O,a.u_translation),u_ratio:new o.b8(O,a.u_ratio),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_units_to_pixels:new o.bK(O,a.u_units_to_pixels),u_patternscale_a:new o.bK(O,a.u_patternscale_a),u_patternscale_b:new o.bK(O,a.u_patternscale_b),u_sdfgamma:new o.b8(O,a.u_sdfgamma),u_image:new o.bF(O,a.u_image),u_tex_y_a:new o.b8(O,a.u_tex_y_a),u_tex_y_b:new o.b8(O,a.u_tex_y_b),u_mix:new o.b8(O,a.u_mix)}),raster:(O,a)=>({u_tl_parent:new o.bK(O,a.u_tl_parent),u_scale_parent:new o.b8(O,a.u_scale_parent),u_buffer_scale:new o.b8(O,a.u_buffer_scale),u_fade_t:new o.b8(O,a.u_fade_t),u_opacity:new o.b8(O,a.u_opacity),u_image0:new o.bF(O,a.u_image0),u_image1:new o.bF(O,a.u_image1),u_brightness_low:new o.b8(O,a.u_brightness_low),u_brightness_high:new o.b8(O,a.u_brightness_high),u_saturation_factor:new o.b8(O,a.u_saturation_factor),u_contrast_factor:new o.b8(O,a.u_contrast_factor),u_spin_weights:new o.bJ(O,a.u_spin_weights),u_coords_top:new o.bI(O,a.u_coords_top),u_coords_bottom:new o.bI(O,a.u_coords_bottom)}),symbolIcon:(O,a)=>({u_is_size_zoom_constant:new o.bF(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bF(O,a.u_is_size_feature_constant),u_size_t:new o.b8(O,a.u_size_t),u_size:new o.b8(O,a.u_size),u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_pitch:new o.b8(O,a.u_pitch),u_rotate_symbol:new o.bF(O,a.u_rotate_symbol),u_aspect_ratio:new o.b8(O,a.u_aspect_ratio),u_fade_change:new o.b8(O,a.u_fade_change),u_label_plane_matrix:new o.bH(O,a.u_label_plane_matrix),u_coord_matrix:new o.bH(O,a.u_coord_matrix),u_is_text:new o.bF(O,a.u_is_text),u_pitch_with_map:new o.bF(O,a.u_pitch_with_map),u_is_along_line:new o.bF(O,a.u_is_along_line),u_is_variable_anchor:new o.bF(O,a.u_is_variable_anchor),u_texsize:new o.bK(O,a.u_texsize),u_texture:new o.bF(O,a.u_texture),u_translation:new o.bK(O,a.u_translation),u_pitched_scale:new o.b8(O,a.u_pitched_scale)}),symbolSDF:(O,a)=>({u_is_size_zoom_constant:new o.bF(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bF(O,a.u_is_size_feature_constant),u_size_t:new o.b8(O,a.u_size_t),u_size:new o.b8(O,a.u_size),u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_pitch:new o.b8(O,a.u_pitch),u_rotate_symbol:new o.bF(O,a.u_rotate_symbol),u_aspect_ratio:new o.b8(O,a.u_aspect_ratio),u_fade_change:new o.b8(O,a.u_fade_change),u_label_plane_matrix:new o.bH(O,a.u_label_plane_matrix),u_coord_matrix:new o.bH(O,a.u_coord_matrix),u_is_text:new o.bF(O,a.u_is_text),u_pitch_with_map:new o.bF(O,a.u_pitch_with_map),u_is_along_line:new o.bF(O,a.u_is_along_line),u_is_variable_anchor:new o.bF(O,a.u_is_variable_anchor),u_texsize:new o.bK(O,a.u_texsize),u_texture:new o.bF(O,a.u_texture),u_gamma_scale:new o.b8(O,a.u_gamma_scale),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_is_halo:new o.bF(O,a.u_is_halo),u_translation:new o.bK(O,a.u_translation),u_pitched_scale:new o.b8(O,a.u_pitched_scale)}),symbolTextAndIcon:(O,a)=>({u_is_size_zoom_constant:new o.bF(O,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bF(O,a.u_is_size_feature_constant),u_size_t:new o.b8(O,a.u_size_t),u_size:new o.b8(O,a.u_size),u_camera_to_center_distance:new o.b8(O,a.u_camera_to_center_distance),u_pitch:new o.b8(O,a.u_pitch),u_rotate_symbol:new o.bF(O,a.u_rotate_symbol),u_aspect_ratio:new o.b8(O,a.u_aspect_ratio),u_fade_change:new o.b8(O,a.u_fade_change),u_label_plane_matrix:new o.bH(O,a.u_label_plane_matrix),u_coord_matrix:new o.bH(O,a.u_coord_matrix),u_is_text:new o.bF(O,a.u_is_text),u_pitch_with_map:new o.bF(O,a.u_pitch_with_map),u_is_along_line:new o.bF(O,a.u_is_along_line),u_is_variable_anchor:new o.bF(O,a.u_is_variable_anchor),u_texsize:new o.bK(O,a.u_texsize),u_texsize_icon:new o.bK(O,a.u_texsize_icon),u_texture:new o.bF(O,a.u_texture),u_texture_icon:new o.bF(O,a.u_texture_icon),u_gamma_scale:new o.b8(O,a.u_gamma_scale),u_device_pixel_ratio:new o.b8(O,a.u_device_pixel_ratio),u_is_halo:new o.bF(O,a.u_is_halo),u_translation:new o.bK(O,a.u_translation),u_pitched_scale:new o.b8(O,a.u_pitched_scale)}),background:(O,a)=>({u_opacity:new o.b8(O,a.u_opacity),u_color:new o.bG(O,a.u_color)}),backgroundPattern:(O,a)=>({u_opacity:new o.b8(O,a.u_opacity),u_image:new o.bF(O,a.u_image),u_pattern_tl_a:new o.bK(O,a.u_pattern_tl_a),u_pattern_br_a:new o.bK(O,a.u_pattern_br_a),u_pattern_tl_b:new o.bK(O,a.u_pattern_tl_b),u_pattern_br_b:new o.bK(O,a.u_pattern_br_b),u_texsize:new o.bK(O,a.u_texsize),u_mix:new o.b8(O,a.u_mix),u_pattern_size_a:new o.bK(O,a.u_pattern_size_a),u_pattern_size_b:new o.bK(O,a.u_pattern_size_b),u_scale_a:new o.b8(O,a.u_scale_a),u_scale_b:new o.b8(O,a.u_scale_b),u_pixel_coord_upper:new o.bK(O,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.bK(O,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.b8(O,a.u_tile_units_to_pixels)}),terrain:(O,a)=>({u_texture:new o.bF(O,a.u_texture),u_ele_delta:new o.b8(O,a.u_ele_delta),u_fog_matrix:new o.bH(O,a.u_fog_matrix),u_fog_color:new o.bG(O,a.u_fog_color),u_fog_ground_blend:new o.b8(O,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.b8(O,a.u_fog_ground_blend_opacity),u_horizon_color:new o.bG(O,a.u_horizon_color),u_horizon_fog_blend:new o.b8(O,a.u_horizon_fog_blend),u_is_globe_mode:new o.b8(O,a.u_is_globe_mode)}),terrainDepth:(O,a)=>({u_ele_delta:new o.b8(O,a.u_ele_delta)}),terrainCoords:(O,a)=>({u_texture:new o.bF(O,a.u_texture),u_terrain_coords_id:new o.b8(O,a.u_terrain_coords_id),u_ele_delta:new o.b8(O,a.u_ele_delta)}),projectionErrorMeasurement:(O,a)=>({u_input:new o.b8(O,a.u_input),u_output_expected:new o.b8(O,a.u_output_expected)}),atmosphere:(O,a)=>({u_sun_pos:new o.bJ(O,a.u_sun_pos),u_atmosphere_blend:new o.b8(O,a.u_atmosphere_blend),u_globe_position:new o.bJ(O,a.u_globe_position),u_globe_radius:new o.b8(O,a.u_globe_radius),u_inv_proj_matrix:new o.bH(O,a.u_inv_proj_matrix)}),sky:(O,a)=>({u_sky_color:new o.bG(O,a.u_sky_color),u_horizon_color:new o.bG(O,a.u_horizon_color),u_horizon:new o.bK(O,a.u_horizon),u_horizon_normal:new o.bK(O,a.u_horizon_normal),u_sky_horizon_blend:new o.b8(O,a.u_sky_horizon_blend),u_sky_blend:new o.b8(O,a.u_sky_blend)})};class bd{constructor(a,c,C){this.context=a;const M=a.gl;this.buffer=M.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),M.bufferData(M.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ll={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Cl{constructor(a,c,C,M){this.length=c.length,this.attributes=C,this.itemSize=c.bytesPerElement,this.dynamicDraw=M,this.context=a;const k=a.gl;this.buffer=k.createBuffer(),a.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,c){for(let C=0;C<this.attributes.length;C++){const M=c.attributes[this.attributes[C].name];M!==void 0&&a.enableVertexAttribArray(M)}}setVertexAttribPointers(a,c,C){for(let M=0;M<this.attributes.length;M++){const k=this.attributes[M],z=c.attributes[k.name];z!==void 0&&a.vertexAttribPointer(z,k.components,a[ll[k.type]],!1,this.itemSize,k.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ko{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class zA extends ko{getDefault(){return o.b7.transparent}set(a){const c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Ff extends ko{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class xd extends ko{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class qu extends ko{getDefault(){return[!0,!0,!0,!0]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Mh extends ko{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Lf extends ko{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Md extends ko{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const c=this.current;(a.func!==c.func||a.ref!==c.ref||a.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Uf extends ko{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class zf extends ko{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=a,this.dirty=!1}}class Hd extends ko{getDefault(){return[0,1]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class gA extends ko{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=a,this.dirty=!1}}class en extends ko{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Tn extends ko{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.BLEND):c.disable(c.BLEND),this.current=a,this.dirty=!1}}class un extends ko{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Tr extends ko{getDefault(){return o.b7.transparent}set(a){const c=this.current;(a.r!==c.r||a.g!==c.g||a.b!==c.b||a.a!==c.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class ci extends ko{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class To extends ko{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;a?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=a,this.dirty=!1}}class ya extends ko{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class ts extends ko{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class Vu extends ko{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class rf extends ko{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class lu extends ko{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const c=this.current;(a[0]!==c[0]||a[1]!==c[1]||a[2]!==c[2]||a[3]!==c[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class $u extends ko{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class yA extends ko{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Nl extends ko{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Wl extends ko{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class vA extends ko{getDefault(){return null}set(a){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Po extends ko{getDefault(){return null}set(a){var c;if(a===this.current&&!this.dirty)return;const C=this.gl;Ki(C)?C.bindVertexArray(a):(c=C.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class Mc extends ko{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class lo extends ko{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Bu extends ko{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class CA extends ko{constructor(a,c){super(a),this.context=a,this.parent=c}getDefault(){return null}}class Tl extends CA{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Hu extends CA{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class _A extends CA{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,a),this.current=a,this.dirty=!1}}const Zu="Framebuffer is not complete";class Zd{constructor(a,c,C,M,k){this.context=a,this.width=c,this.height=C;const z=a.gl,Y=this.framebuffer=z.createFramebuffer();if(this.colorAttachment=new Tl(a,Y),M)this.depthAttachment=k?new _A(a,Y):new Hu(a,Y);else if(k)throw new Error("Stencil cannot be set without depth");if(z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw new Error(Zu)}destroy(){const a=this.context.gl,c=this.colorAttachment.get();if(c&&a.deleteTexture(c),this.depthAttachment){const C=this.depthAttachment.get();C&&a.deleteRenderbuffer(C)}a.deleteFramebuffer(this.framebuffer)}}class of{constructor(a){var c,C;if(this.gl=a,this.clearColor=new zA(this),this.clearDepth=new Ff(this),this.clearStencil=new xd(this),this.colorMask=new qu(this),this.depthMask=new Mh(this),this.stencilMask=new Lf(this),this.stencilFunc=new Md(this),this.stencilOp=new Uf(this),this.stencilTest=new zf(this),this.depthRange=new Hd(this),this.depthTest=new gA(this),this.depthFunc=new en(this),this.blend=new Tn(this),this.blendFunc=new un(this),this.blendColor=new Tr(this),this.blendEquation=new ci(this),this.cullFace=new To(this),this.cullFaceSide=new ya(this),this.frontFace=new ts(this),this.program=new Vu(this),this.activeTexture=new rf(this),this.viewport=new lu(this),this.bindFramebuffer=new $u(this),this.bindRenderbuffer=new yA(this),this.bindTexture=new Nl(this),this.bindVertexBuffer=new Wl(this),this.bindElementBuffer=new vA(this),this.bindVertexArray=new Po(this),this.pixelStoreUnpack=new Mc(this),this.pixelStoreUnpackPremultiplyAlpha=new lo(this),this.pixelStoreUnpackFlipY=new Bu(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),Ki(a)){this.HALF_FLOAT=a.HALF_FLOAT;const M=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=a.RGBA16F)!==null&&c!==void 0?c:M==null?void 0:M.RGBA16F_EXT,this.RGB16F=(C=a.RGB16F)!==null&&C!==void 0?C:M==null?void 0:M.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const M=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=M==null?void 0:M.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,c){return new bd(this,a,c)}createVertexBuffer(a,c,C){return new Cl(this,a,c,C)}createRenderbuffer(a,c,C){const M=this.gl,k=M.createRenderbuffer();return this.bindRenderbuffer.set(k),M.renderbufferStorage(M.RENDERBUFFER,a,c,C),this.bindRenderbuffer.set(null),k}createFramebuffer(a,c,C,M){return new Zd(this,a,c,C,M)}clear({color:a,depth:c,stencil:C}){const M=this.gl;let k=0;a&&(k|=M.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(k|=M.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),C!==void 0&&(k|=M.STENCIL_BUFFER_BIT,this.clearStencil.set(C),this.stencilMask.set(255)),M.clear(k)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bC(a.blendFunction,ao.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return Ki(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var c;return Ki(this.gl)?this.gl.deleteVertexArray(a):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}let Qa;function wc(O,a,c,C,M){const k=O.context,z=O.transform,Y=k.gl,J=O.useProgram("collisionBox"),se=[];let ye=0,Te=0;for(let pt=0;pt<C.length;pt++){const bt=C[pt],Bt=a.getTile(bt).getBucket(c);if(!Bt)continue;const kt=M?Bt.textCollisionBox:Bt.iconCollisionBox,Kt=Bt.collisionCircleArray;Kt.length>0&&(se.push({circleArray:Kt,circleOffset:Te,coord:bt}),ye+=Kt.length/4,Te=ye),kt&&J.draw(k,Y.LINES,Hr.disabled,Wi.disabled,O.colorModeForRenderPass(),Hi.disabled,Vd(O.transform),O.style.map.terrain&&O.style.map.terrain.getTerrainData(bt),z.getProjectionData({overscaledTileID:bt,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,null,O.transform.zoom,null,null,kt.collisionVertexBuffer)}if(!M||!se.length)return;const ke=O.useProgram("collisionCircle"),Qe=new o.bP;Qe.resize(4*ye),Qe._trim();let et=0;for(const pt of se)for(let bt=0;bt<pt.circleArray.length/4;bt++){const Bt=4*bt,kt=pt.circleArray[Bt+0],Kt=pt.circleArray[Bt+1],Ut=pt.circleArray[Bt+2],It=pt.circleArray[Bt+3];Qe.emplace(et++,kt,Kt,Ut,It,0),Qe.emplace(et++,kt,Kt,Ut,It,1),Qe.emplace(et++,kt,Kt,Ut,It,2),Qe.emplace(et++,kt,Kt,Ut,It,3)}(!Qa||Qa.length<2*ye)&&(Qa=function(pt){const bt=2*pt,Bt=new o.bR;Bt.resize(bt),Bt._trim();for(let kt=0;kt<bt;kt++){const Kt=6*kt;Bt.uint16[Kt+0]=4*kt+0,Bt.uint16[Kt+1]=4*kt+1,Bt.uint16[Kt+2]=4*kt+2,Bt.uint16[Kt+3]=4*kt+2,Bt.uint16[Kt+4]=4*kt+3,Bt.uint16[Kt+5]=4*kt+0}return Bt}(ye));const mt=k.createIndexBuffer(Qa,!0),lt=k.createVertexBuffer(Qe,o.bQ.members,!0);for(const pt of se){const bt=Xh(O.transform);ke.draw(k,Y.TRIANGLES,Hr.disabled,Wi.disabled,O.colorModeForRenderPass(),Hi.disabled,bt,O.style.map.terrain&&O.style.map.terrain.getTerrainData(pt.coord),null,c.id,lt,mt,o.aG.simpleSegment(0,2*pt.circleOffset,pt.circleArray.length,pt.circleArray.length/2),null,O.transform.zoom,null,null,null)}lt.destroy(),mt.destroy()}const Sc=o.at(new Float32Array(16));function Ec(O,a,c,C,M,k){const{horizontalAlign:z,verticalAlign:Y}=o.aB(O);return new o.P((-(z-.5)*a/M+C[0])*k,(-(Y-.5)*c/M+C[1])*k)}function sf(O,a,c,C,M,k){const z=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let Y=C.mult(k);c||(Y=Y.rotate(-M));const J=z.add(Y);return Wt(J.x,J.y,a.pitchedLabelPlaneMatrix,a.getElevation).point}if(c){const Y=qr(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(O),J=Math.atan(Y.y/Y.x)+(Y.x<0?Math.PI:0);return O.add(C.rotate(J))}return O.add(C)}function bA(O,a,c,C,M,k,z,Y,J,se,ye,Te){const ke=O.text.placedSymbolArray,Qe=O.text.dynamicLayoutVertexArray,et=O.icon.dynamicLayoutVertexArray,mt={};Qe.clear();for(let lt=0;lt<ke.length;lt++){const pt=ke.get(lt),bt=pt.hidden||!pt.crossTileID||O.allowVerticalPlacement&&!pt.placedOrientation?null:C[pt.crossTileID];if(bt){const Bt=new o.P(pt.anchorX,pt.anchorY),kt={getElevation:Te,width:M.width,height:M.height,pitchedLabelPlaneMatrix:k,pitchWithMap:c,transform:M,tileAnchorPoint:Bt,translation:se,unwrappedTileID:ye},Kt=c?$n(Bt.x,Bt.y,kt):qr(Bt.x,Bt.y,kt),Ut=jt(M.cameraToCenterDistance,Kt.signedDistanceFromCamera);let It=o.ai(O.textSizeData,Y,pt)*Ut/o.av;c&&(It*=O.tilePixelRatio/z);const{width:nn,height:qt,anchor:xn,textOffset:Sn,textBoxScale:Cn}=bt,In=Ec(xn,nn,qt,Sn,Cn,It),Nn=M.getPitchedTextCorrection(Bt.x+se[0],Bt.y+se[1],ye),Rn=sf(Kt.point,kt,a,In,-M.bearingInRadians,Nn),kr=O.allowVerticalPlacement&&pt.placedOrientation===o.ah.vertical?Math.PI/2:0;for(let Ri=0;Ri<pt.numGlyphs;Ri++)o.ao(Qe,Rn,kr);J&&pt.associatedIconIndex>=0&&(mt[pt.associatedIconIndex]={shiftedAnchor:Rn,angle:kr})}else Mr(pt.numGlyphs,Qe)}if(J){et.clear();const lt=O.icon.placedSymbolArray;for(let pt=0;pt<lt.length;pt++){const bt=lt.get(pt);if(bt.hidden)Mr(bt.numGlyphs,et);else{const Bt=mt[pt];if(Bt)for(let kt=0;kt<bt.numGlyphs;kt++)o.ao(et,Bt.shiftedAnchor,Bt.angle);else Mr(bt.numGlyphs,et)}}O.icon.dynamicLayoutVertexBuffer.updateData(et)}O.text.dynamicLayoutVertexBuffer.updateData(Qe)}function jA(O,a,c){return c.iconsInText&&a?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function NA(O,a,c,C,M,k,z,Y,J,se,ye,Te,ke){const Qe=O.context,et=Qe.gl,mt=O.transform,lt=Y==="map",pt=J==="map",bt=Y!=="viewport"&&c.layout.get("symbol-placement")!=="point",Bt=lt&&!pt&&!bt,kt=!c.layout.get("symbol-sort-key").isConstant();let Kt=!1;const Ut=O.getDepthModeForSublayer(0,Hr.ReadOnly),It=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),nn=[],qt=mt.getCircleRadiusCorrection();for(const xn of C){const Sn=a.getTile(xn),Cn=Sn.getBucket(c);if(!Cn)continue;const In=M?Cn.text:Cn.icon;if(!In||!In.segments.get().length||!In.hasVisibleVertices)continue;const Nn=In.programConfigurations.get(c.id),Rn=M||Cn.sdfIcons,kr=M?Cn.textSizeData:Cn.iconSizeData,Ri=pt||mt.pitch!==0,Xi=O.useProgram(jA(Rn,M,Cn),Nn),_i=o.ag(kr,mt.zoom),Bi=O.style.map.terrain&&O.style.map.terrain.getTerrainData(xn);let Qo,Lo,So,fo,ca=[0,0],Ho=null;if(M)Lo=Sn.glyphAtlasTexture,So=et.LINEAR,Qo=Sn.glyphAtlasTexture.size,Cn.iconsInText&&(ca=Sn.imageAtlasTexture.size,Ho=Sn.imageAtlasTexture,fo=Ri||O.options.rotating||O.options.zooming||kr.kind==="composite"||kr.kind==="camera"?et.LINEAR:et.NEAREST);else{const Ns=c.layout.get("icon-size").constantOr(0)!==1||Cn.iconsNeedLinear;Lo=Sn.imageAtlasTexture,So=Rn||O.options.rotating||O.options.zooming||Ns||Ri?et.LINEAR:et.NEAREST,Qo=Sn.imageAtlasTexture.size}const rs=o.aw(Sn,1,O.transform.zoom),xl=ut(lt,O.transform,rs),BA=o.K();o.aj(BA,xl);const pu=dt(pt,lt,O.transform,rs),Vl=o.ax(mt,Sn,k,z),$l=mt.getProjectionData({overscaledTileID:xn,applyGlobeMatrix:!ke,applyTerrainMatrix:!0}),oA=It&&Cn.hasTextData(),Rl=c.layout.get("icon-text-fit")!=="none"&&oA&&Cn.hasIconData();if(bt){const Ns=O.style.map.terrain?(Ra,Cs)=>O.style.map.terrain.getElevation(xn,Ra,Cs):null,ds=c.layout.get("text-rotation-alignment")==="map";Dn(Cn,O,M,xl,BA,pt,se,ds,xn.toUnwrapped(),mt.width,mt.height,Vl,Ns)}const Pu=M&&It||Rl,xa=bt||Pu?Sc:pt?xl:O.transform.clipSpaceToPixelsMatrix,Ku=Rn&&c.paint.get(M?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Hl;Hl=Rn?Cn.iconsInText?Ac(kr.kind,_i,Bt,pt,bt,Pu,O,xa,pu,Vl,Qo,ca,qt):uc(kr.kind,_i,Bt,pt,bt,Pu,O,xa,pu,Vl,M,Qo,0,qt):Yu(kr.kind,_i,Bt,pt,bt,Pu,O,xa,pu,Vl,M,Qo,qt);const Dc={program:Xi,buffers:In,uniformValues:Hl,projectionData:$l,atlasTexture:Lo,atlasTextureIcon:Ho,atlasInterpolation:So,atlasInterpolationIcon:fo,isSDF:Rn,hasHalo:Ku};if(kt&&Cn.canOverlap){Kt=!0;const Ns=In.segments.get();for(const ds of Ns)nn.push({segments:new o.aG([ds]),sortKey:ds.sortKey,state:Dc,terrainData:Bi})}else nn.push({segments:In.segments,sortKey:0,state:Dc,terrainData:Bi})}Kt&&nn.sort((xn,Sn)=>xn.sortKey-Sn.sortKey);for(const xn of nn){const Sn=xn.state;if(Qe.activeTexture.set(et.TEXTURE0),Sn.atlasTexture.bind(Sn.atlasInterpolation,et.CLAMP_TO_EDGE),Sn.atlasTextureIcon&&(Qe.activeTexture.set(et.TEXTURE1),Sn.atlasTextureIcon&&Sn.atlasTextureIcon.bind(Sn.atlasInterpolationIcon,et.CLAMP_TO_EDGE)),Sn.isSDF){const Cn=Sn.uniformValues;Sn.hasHalo&&(Cn.u_is_halo=1,wd(Sn.buffers,xn.segments,c,O,Sn.program,Ut,ye,Te,Cn,Sn.projectionData,xn.terrainData)),Cn.u_is_halo=0}wd(Sn.buffers,xn.segments,c,O,Sn.program,Ut,ye,Te,Sn.uniformValues,Sn.projectionData,xn.terrainData)}}function wd(O,a,c,C,M,k,z,Y,J,se,ye){const Te=C.context;M.draw(Te,Te.gl.TRIANGLES,k,z,Y,Hi.backCCW,J,ye,se,c.id,O.layoutVertexBuffer,O.indexBuffer,a,c.paint,C.transform.zoom,O.programConfigurations.get(c.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function us(O,a,c,C,M){const k=O.context,z=k.gl,Y=Wi.disabled,J=new ao([z.ONE,z.ONE],o.b7.transparent,[!0,!0,!0,!0]),se=a.getBucket(c);if(!se)return;const ye=C.key;let Te=c.heatmapFbos.get(ye);Te||(Te=Bc(k,a.tileSize,a.tileSize),c.heatmapFbos.set(ye,Te)),k.bindFramebuffer.set(Te.framebuffer),k.viewport.set([0,0,a.tileSize,a.tileSize]),k.clear({color:o.b7.transparent});const ke=se.programConfigurations.get(c.id),Qe=O.useProgram("heatmap",ke,!M),et=O.transform.getProjectionData({overscaledTileID:a.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),mt=O.style.map.terrain.getTerrainData(C);Qe.draw(k,z.TRIANGLES,Hr.disabled,Y,J,Hi.disabled,Jh(a,O.transform.zoom,c.paint.get("heatmap-intensity"),1),mt,et,c.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,c.paint,O.transform.zoom,ke)}function Vc(O,a,c,C,M){const k=O.context,z=k.gl,Y=O.transform;k.setColorMode(O.colorModeForRenderPass());const J=Xu(k,a),se=c.key,ye=a.heatmapFbos.get(se);if(!ye)return;k.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,ye.colorAttachment.get()),k.activeTexture.set(z.TEXTURE1),J.bind(z.LINEAR,z.CLAMP_TO_EDGE);const Te=Y.getProjectionData({overscaledTileID:c,applyTerrainMatrix:M,applyGlobeMatrix:!C});O.useProgram("heatmapTexture").draw(k,z.TRIANGLES,Hr.disabled,Wi.disabled,O.colorModeForRenderPass(),Hi.disabled,_h(O,a,0,1),null,Te,a.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments,a.paint,Y.zoom),ye.destroy(),a.heatmapFbos.delete(se)}function Bc(O,a,c){var C,M;const k=O.gl,z=k.createTexture();k.bindTexture(k.TEXTURE_2D,z),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.LINEAR),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.LINEAR);const Y=(C=O.HALF_FLOAT)!==null&&C!==void 0?C:k.UNSIGNED_BYTE,J=(M=O.RGBA16F)!==null&&M!==void 0?M:k.RGBA;k.texImage2D(k.TEXTURE_2D,0,J,a,c,0,k.RGBA,Y,null);const se=O.createFramebuffer(a,c,!1,!1);return se.colorAttachment.set(z),se}function Xu(O,a){return a.colorRampTexture||(a.colorRampTexture=new ie(O,a.colorRamp,O.gl.RGBA)),a.colorRampTexture}function $c(O,a,c,C,M){if(!c||!C||!C.imageAtlas)return;const k=C.imageAtlas.patternPositions;let z=k[c.to.toString()],Y=k[c.from.toString()];if(!z&&Y&&(z=Y),!Y&&z&&(Y=z),!z||!Y){const J=M.getPaintProperty(a);z=k[J],Y=k[J]}z&&Y&&O.setConstantPatternPositions(z,Y)}function Xd(O,a,c,C,M,k,z,Y){const J=O.context.gl,se="fill-pattern",ye=c.paint.get(se),Te=ye&&ye.constantOr(1),ke=c.getCrossfadeParameters();let Qe,et,mt,lt,pt;const bt=O.transform,Bt=c.paint.get("fill-translate"),kt=c.paint.get("fill-translate-anchor");z?(et=Te&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Qe=J.LINES):(et=Te?"fillPattern":"fill",Qe=J.TRIANGLES);const Kt=ye.constantOr(null);for(const Ut of C){const It=a.getTile(Ut);if(Te&&!It.patternsLoaded())continue;const nn=It.getBucket(c);if(!nn)continue;const qt=nn.programConfigurations.get(c.id),xn=O.useProgram(et,qt),Sn=O.style.map.terrain&&O.style.map.terrain.getTerrainData(Ut);Te&&(O.context.activeTexture.set(J.TEXTURE0),It.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),qt.updatePaintBuffers(ke)),$c(qt,se,Kt,It,c);const Cn=bt.getProjectionData({overscaledTileID:Ut,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),In=o.ax(bt,It,Bt,kt);if(z){lt=nn.indexBuffer2,pt=nn.segments2;const Rn=[J.drawingBufferWidth,J.drawingBufferHeight];mt=et==="fillOutlinePattern"&&Te?Df(O,ke,It,Rn,In):ms(Rn,In)}else lt=nn.indexBuffer,pt=nn.segments,mt=Te?bc(O,ke,It,In):{u_fill_translate:In};let Nn;if(O.renderPass==="translucent"&&Y){const[Rn]=O.getStencilConfigForOverlapAndUpdateStencilID(C);Nn=Rn[Ut.overscaledZ]}else Nn=O.stencilModeForClipping(Ut);xn.draw(O.context,Qe,M,Nn,k,Hi.backCCW,mt,Sn,Cn,c.id,nn.layoutVertexBuffer,lt,pt,c.paint,O.transform.zoom,qt)}}function Oc(O,a,c,C,M,k,z,Y){const J=O.context,se=J.gl,ye="fill-extrusion-pattern",Te=c.paint.get(ye),ke=Te.constantOr(1),Qe=c.getCrossfadeParameters(),et=c.paint.get("fill-extrusion-opacity"),mt=Te.constantOr(null),lt=O.transform;for(const pt of C){const bt=a.getTile(pt),Bt=bt.getBucket(c);if(!Bt)continue;const kt=O.style.map.terrain&&O.style.map.terrain.getTerrainData(pt),Kt=Bt.programConfigurations.get(c.id),Ut=O.useProgram(ke?"fillExtrusionPattern":"fillExtrusion",Kt);ke&&(O.context.activeTexture.set(se.TEXTURE0),bt.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),Kt.updatePaintBuffers(Qe));const It=lt.getProjectionData({overscaledTileID:pt,applyGlobeMatrix:!Y,applyTerrainMatrix:!0});$c(Kt,ye,mt,bt,c);const nn=o.ax(lt,bt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),qt=c.paint.get("fill-extrusion-vertical-gradient"),xn=ke?Ch(O,qt,et,nn,pt,Qe,bt):Mp(O,qt,et,nn);Ut.draw(J,J.gl.TRIANGLES,M,k,z,Hi.backCCW,xn,kt,It,c.id,Bt.layoutVertexBuffer,Bt.indexBuffer,Bt.segments,c.paint,O.transform.zoom,Kt,O.style.map.terrain&&Bt.centroidVertexBuffer)}}function Ic(O,a,c,C,M,k,z,Y,J){var se;const ye=O.style.projection,Te=O.context,ke=O.transform,Qe=Te.gl,et=O.useProgram("hillshade"),mt=!O.options.moving;for(const lt of C){const pt=a.getTile(lt),bt=pt.fbo;if(!bt)continue;const Bt=ye.getMeshFromTileID(Te,lt.canonical,Y,!0,"raster"),kt=(se=O.style.map.terrain)===null||se===void 0?void 0:se.getTerrainData(lt);Te.activeTexture.set(Qe.TEXTURE0),Qe.bindTexture(Qe.TEXTURE_2D,bt.colorAttachment.get());const Kt=ke.getProjectionData({overscaledTileID:lt,aligned:mt,applyGlobeMatrix:!J,applyTerrainMatrix:!0});et.draw(Te,Qe.TRIANGLES,k,M[lt.overscaledZ],z,Hi.backCCW,bh(O,pt,c),kt,Kt,c.id,Bt.vertexBuffer,Bt.indexBuffer,Bt.segments)}}const Ju=[new o.P(0,0),new o.P(o.Z,0),new o.P(o.Z,o.Z),new o.P(0,o.Z)];function As(O,a,c,C,M,k,z,Y,J=!1,se=!1){const ye=C[C.length-1].overscaledZ,Te=O.context,ke=Te.gl,Qe=O.useProgram("raster"),et=O.transform,mt=O.style.projection,lt=O.colorModeForRenderPass(),pt=!O.options.moving;for(const bt of C){const Bt=O.getDepthModeForSublayer(bt.overscaledZ-ye,c.paint.get("raster-opacity")===1?Hr.ReadWrite:Hr.ReadOnly,ke.LESS),kt=a.getTile(bt);kt.registerFadeDuration(c.paint.get("raster-fade-duration"));const Kt=a.findLoadedParent(bt,0),Ut=a.findLoadedSibling(bt),It=Ya(kt,Kt||Ut||null,a,c,O.transform,O.style.map.terrain);let nn,qt;const xn=c.paint.get("raster-resampling")==="nearest"?ke.NEAREST:ke.LINEAR;Te.activeTexture.set(ke.TEXTURE0),kt.texture.bind(xn,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST),Te.activeTexture.set(ke.TEXTURE1),Kt?(Kt.texture.bind(xn,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST),nn=Math.pow(2,Kt.tileID.overscaledZ-kt.tileID.overscaledZ),qt=[kt.tileID.canonical.x*nn%1,kt.tileID.canonical.y*nn%1]):kt.texture.bind(xn,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST),kt.texture.useMipmap&&Te.extTextureFilterAnisotropic&&O.transform.pitch>20&&ke.texParameterf(ke.TEXTURE_2D,Te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Te.extTextureFilterAnisotropicMax);const Sn=O.style.map.terrain&&O.style.map.terrain.getTerrainData(bt),Cn=et.getProjectionData({overscaledTileID:bt,aligned:pt,applyGlobeMatrix:!se,applyTerrainMatrix:!0}),In=tf(qt||[0,0],nn||1,It,c,Y),Nn=mt.getMeshFromTileID(Te,bt.canonical,k,z,"raster");Qe.draw(Te,ke.TRIANGLES,Bt,M?M[bt.overscaledZ]:Wi.disabled,lt,J?Hi.frontCCW:Hi.backCCW,In,Sn,Cn,c.id,Nn.vertexBuffer,Nn.indexBuffer,Nn.segments)}}function Ya(O,a,c,C,M,k){const z=C.paint.get("raster-fade-duration");if(!k&&z>0){const Y=T.now(),J=(Y-O.timeAdded)/z,se=a?(Y-a.timeAdded)/z:-1,ye=c.getSource(),Te=nr(M,{tileSize:ye.tileSize,roundZoom:ye.roundZoom}),ke=!a||Math.abs(a.tileID.overscaledZ-Te)>Math.abs(O.tileID.overscaledZ-Te),Qe=ke&&O.refreshedUponExpiration?1:o.ae(ke?J:1-se,0,1);return O.refreshedUponExpiration&&J>=1&&(O.refreshedUponExpiration=!1),a?{opacity:1,mix:1-Qe}:{opacity:Qe,mix:0}}return{opacity:1,mix:0}}const wp=new o.b7(1,0,0,1),js=new o.b7(0,1,0,1),xA=new o.b7(0,0,1,1),ul=new o.b7(1,0,1,1),Hc=new o.b7(0,1,1,1);function Gl(O,a,c,C){va(O,0,a+c/2,O.transform.width,c,C)}function WA(O,a,c,C){va(O,a-c/2,0,c,O.transform.height,C)}function va(O,a,c,C,M,k){const z=O.context,Y=z.gl;Y.enable(Y.SCISSOR_TEST),Y.scissor(a*O.pixelRatio,c*O.pixelRatio,C*O.pixelRatio,M*O.pixelRatio),z.clear({color:k}),Y.disable(Y.SCISSOR_TEST)}function eA(O,a,c){const C=O.context,M=C.gl,k=O.useProgram("debug"),z=Hr.disabled,Y=Wi.disabled,J=O.colorModeForRenderPass(),se="$debug",ye=O.style.map.terrain&&O.style.map.terrain.getTerrainData(c);C.activeTexture.set(M.TEXTURE0);const Te=a.getTileByID(c.key).latestRawTileData,ke=Math.floor((Te&&Te.byteLength||0)/1024),Qe=a.getTile(c).tileSize,et=512/Math.min(Qe,512)*(c.overscaledZ/O.transform.zoom)*.5;let mt=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(mt+=` => ${c.overscaledZ}`),function(pt,bt){pt.initDebugOverlayCanvas();const Bt=pt.debugOverlayCanvas,kt=pt.context.gl,Kt=pt.debugOverlayCanvas.getContext("2d");Kt.clearRect(0,0,Bt.width,Bt.height),Kt.shadowColor="white",Kt.shadowBlur=2,Kt.lineWidth=1.5,Kt.strokeStyle="white",Kt.textBaseline="top",Kt.font="bold 36px Open Sans, sans-serif",Kt.fillText(bt,5,5),Kt.strokeText(bt,5,5),pt.debugOverlayTexture.update(Bt),pt.debugOverlayTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE)}(O,`${mt} ${ke}kB`);const lt=O.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(C,M.TRIANGLES,z,Y,ao.alphaBlended,Hi.disabled,qc(o.b7.transparent,et),null,lt,se,O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments),k.draw(C,M.LINE_STRIP,z,Y,J,Hi.disabled,qc(o.b7.red),ye,lt,se,O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments)}function Ou(O,a,c,C){const{isRenderingGlobe:M}=C,k=O.context,z=k.gl,Y=O.transform,J=O.colorModeForRenderPass(),se=O.getDepthModeFor3D(),ye=O.useProgram("terrain");k.bindFramebuffer.set(null),k.viewport.set([0,0,O.width,O.height]);for(const Te of c){const ke=a.getTerrainMesh(Te.tileID),Qe=O.renderToTexture.getTexture(Te),et=a.getTerrainData(Te.tileID);k.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,Qe.texture);const mt=a.getMeshFrameDelta(Y.zoom),lt=Y.calculateFogMatrix(Te.tileID.toUnwrapped()),pt=mA(mt,lt,O.style.sky,Y.pitch,M),bt=Y.getProjectionData({overscaledTileID:Te.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ye.draw(k,z.TRIANGLES,se,Wi.disabled,J,Hi.backCCW,pt,et,bt,"terrain",ke.vertexBuffer,ke.indexBuffer,ke.segments)}}function Sd(O,a){if(!a.mesh){const c=new o.aF;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const C=new o.aH;C.emplaceBack(0,1,2),C.emplaceBack(0,2,3),a.mesh=new zl(O.createVertexBuffer(c,na.members),O.createIndexBuffer(C),o.aG.simpleSegment(0,0,c.length,C.length))}return a.mesh}class Zc{constructor(a,c){this.context=new of(a),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.at(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ae.maxUnderzooming+ae.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new la}resize(a,c,C){if(this.width=Math.floor(a*C),this.height=Math.floor(c*C),this.pixelRatio=C,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const M of this.style._order)this.style._layers[M].resize()}setup(){const a=this.context,c=new o.aF;c.emplaceBack(0,0),c.emplaceBack(o.Z,0),c.emplaceBack(0,o.Z),c.emplaceBack(o.Z,o.Z),this.tileExtentBuffer=a.createVertexBuffer(c,na.members),this.tileExtentSegments=o.aG.simpleSegment(0,0,4,2);const C=new o.aF;C.emplaceBack(0,0),C.emplaceBack(o.Z,0),C.emplaceBack(0,o.Z),C.emplaceBack(o.Z,o.Z),this.debugBuffer=a.createVertexBuffer(C,na.members),this.debugSegments=o.aG.simpleSegment(0,0,4,5);const M=new o.bW;M.emplaceBack(0,0,0,0),M.emplaceBack(o.Z,0,o.Z,0),M.emplaceBack(0,o.Z,0,o.Z),M.emplaceBack(o.Z,o.Z,o.Z,o.Z),this.rasterBoundsBuffer=a.createVertexBuffer(M,ws.members),this.rasterBoundsSegments=o.aG.simpleSegment(0,0,4,2);const k=new o.aF;k.emplaceBack(0,0),k.emplaceBack(o.Z,0),k.emplaceBack(0,o.Z),k.emplaceBack(o.Z,o.Z),this.rasterBoundsBufferPosOnly=a.createVertexBuffer(k,na.members),this.rasterBoundsSegmentsPosOnly=o.aG.simpleSegment(0,0,4,5);const z=new o.aF;z.emplaceBack(0,0),z.emplaceBack(1,0),z.emplaceBack(0,1),z.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(z,na.members),this.viewportSegments=o.aG.simpleSegment(0,0,4,2);const Y=new o.bX;Y.emplaceBack(0),Y.emplaceBack(1),Y.emplaceBack(3),Y.emplaceBack(2),Y.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(Y);const J=new o.aH;J.emplaceBack(1,0,2),J.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(J);const se=this.context.gl;this.stencilClearMode=new Wi({func:se.ALWAYS,mask:0},0,255,se.ZERO,se.ZERO,se.ZERO),this.tileExtentMesh=new zl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const a=this.context,c=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const C=o.K();o.bO(C,0,this.width,this.height,0,0,1),o.M(C,C,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const M={mainMatrix:C,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C};this.useProgram("clippingMask",null,!0).draw(a,c.TRIANGLES,Hr.disabled,this.stencilClearMode,ao.disabled,Hi.disabled,null,null,M,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,c,C){if(this.currentStencilSource===a.source||!a.isTileClipped()||!c||!c.length)return;this.currentStencilSource=a.source,this.nextStencilID+c.length>256&&this.clearStencil();const M=this.context;M.setColorMode(ao.disabled),M.setDepthMode(Hr.disabled);const k={};for(const z of c)k[z.key]=this.nextStencilID++;this._renderTileMasks(k,c,C,!0),this._renderTileMasks(k,c,C,!1),this._tileClippingMaskIDs=k}_renderTileMasks(a,c,C,M){const k=this.context,z=k.gl,Y=this.style.projection,J=this.transform,se=this.useProgram("clippingMask");for(const ye of c){const Te=a[ye.key],ke=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ye),Qe=Y.getMeshFromTileID(this.context,ye.canonical,M,!0,"stencil"),et=J.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!0,applyTerrainMatrix:!0});se.draw(k,z.TRIANGLES,Hr.disabled,new Wi({func:z.ALWAYS,mask:0},Te,255,z.KEEP,z.KEEP,z.REPLACE),ao.disabled,C?Hi.disabled:Hi.backCCW,null,ke,et,"$clipping",Qe.vertexBuffer,Qe.indexBuffer,Qe.segments)}}_renderTilesDepthBuffer(){const a=this.context,c=a.gl,C=this.style.projection,M=this.transform,k=this.useProgram("depth"),z=this.getDepthModeFor3D(),Y=$e(M,{tileSize:M.tileSize});for(const J of Y){const se=this.style.map.terrain&&this.style.map.terrain.getTerrainData(J),ye=C.getMeshFromTileID(this.context,J.canonical,!0,!0,"raster"),Te=M.getProjectionData({overscaledTileID:J,applyGlobeMatrix:!0,applyTerrainMatrix:!0});k.draw(a,c.TRIANGLES,z,Wi.disabled,ao.disabled,Hi.backCCW,null,se,Te,"$clipping",ye.vertexBuffer,ye.indexBuffer,ye.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,c=this.context.gl;return new Wi({func:c.NOTEQUAL,mask:255},a,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(a){const c=this.context.gl;return new Wi({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(a){const c=this.context.gl,C=a.sort((z,Y)=>Y.overscaledZ-z.overscaledZ),M=C[C.length-1].overscaledZ,k=C[0].overscaledZ-M+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const z={};for(let Y=0;Y<k;Y++)z[Y+M]=new Wi({func:c.GEQUAL,mask:255},Y+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=k,[z,C]}return[{[M]:Wi.disabled},C]}stencilConfigForOverlapTwoPass(a){const c=this.context.gl,C=a.sort((z,Y)=>Y.overscaledZ-z.overscaledZ),M=C[C.length-1].overscaledZ,k=C[0].overscaledZ-M+1;if(this.clearStencil(),k>1){const z={},Y={};for(let J=0;J<k;J++)z[J+M]=new Wi({func:c.GREATER,mask:255},k+1+J,255,c.KEEP,c.KEEP,c.REPLACE),Y[J+M]=new Wi({func:c.GREATER,mask:255},1+J,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*k+1,[z,Y,C]}return this.nextStencilID=3,[{[M]:new Wi({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[M]:new Wi({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},C]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new ao([a.CONSTANT_COLOR,a.ONE],new o.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ao.unblended:ao.alphaBlended}getDepthModeForSublayer(a,c,C){if(!this.opaquePassEnabledForLayer())return Hr.disabled;const M=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Hr(C||this.context.gl.LEQUAL,c,[M,M])}getDepthModeFor3D(){return new Hr(this.context.gl.LEQUAL,Hr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,c){var C,M;this.style=a,this.options=c,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(T.now()),this.imageManager.beginFrame();const k=this.style._order,z=this.style.sourceCaches,Y={},J={},se={},ye={isRenderingToTexture:!1,isRenderingGlobe:((C=a.projection)===null||C===void 0?void 0:C.transitionState)>0};for(const ke in z){const Qe=z[ke];Qe.used&&Qe.prepare(this.context),Y[ke]=Qe.getVisibleCoordinates(!1),J[ke]=Y[ke].slice().reverse(),se[ke]=Qe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ke=0;ke<k.length;ke++)if(this.style._layers[k[ke]].is3D()){this.opaquePassCutoff=ke;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ke of k){const Qe=this.style._layers[ke];if(!Qe.hasOffscreenPass()||Qe.isHidden(this.transform.zoom))continue;const et=J[Qe.source];(Qe.type==="custom"||et.length)&&this.renderLayer(this,z[Qe.source],Qe,et,ye)}if((M=this.style.projection)===null||M===void 0||M.updateGPUdependent({context:this.context,useProgram:ke=>this.useProgram(ke)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.b7.black:o.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(ke,Qe){const et=ke.context,mt=et.gl,lt=((Ut,It,nn)=>{const qt=Math.cos(It.rollInRadians),xn=Math.sin(It.rollInRadians),Sn=ka(It),Cn=It.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ut.properties.get("sky-color"),u_horizon_color:Ut.properties.get("horizon-color"),u_horizon:[(It.width/2-Sn*xn)*nn,(It.height/2+Sn*qt)*nn],u_horizon_normal:[-xn,qt],u_sky_horizon_blend:Ut.properties.get("sky-horizon-blend")*It.height/2*nn,u_sky_blend:Cn}})(Qe,ke.style.map.transform,ke.pixelRatio),pt=new Hr(mt.LEQUAL,Hr.ReadWrite,[0,1]),bt=Wi.disabled,Bt=ke.colorModeForRenderPass(),kt=ke.useProgram("sky"),Kt=Sd(et,Qe);kt.draw(et,mt.TRIANGLES,pt,bt,Bt,Hi.disabled,lt,null,void 0,"sky",Kt.vertexBuffer,Kt.indexBuffer,Kt.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=k.length-1;this.currentLayer>=0;this.currentLayer--){const ke=this.style._layers[k[this.currentLayer]],Qe=z[ke.source],et=Y[ke.source];this._renderTileClippingMasks(ke,et,!1),this.renderLayer(this,Qe,ke,et,ye)}this.renderPass="translucent";let Te=!1;for(this.currentLayer=0;this.currentLayer<k.length;this.currentLayer++){const ke=this.style._layers[k[this.currentLayer]],Qe=z[ke.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ke,ye))continue;this.opaquePassEnabledForLayer()||Te||(Te=!0,ye.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const et=(ke.type==="symbol"?se:J)[ke.source];this._renderTileClippingMasks(ke,Y[ke.source],!1),this.renderLayer(this,Qe,ke,et,ye)}if(ye.isRenderingGlobe&&function(ke,Qe,et){const mt=ke.context,lt=mt.gl,pt=ke.useProgram("atmosphere"),bt=new Hr(lt.LEQUAL,Hr.ReadOnly,[0,1]),Bt=ke.transform,kt=function(Cn,In){const Nn=Cn.properties.get("position"),Rn=[-Nn.x,-Nn.y,-Nn.z],kr=o.at(new Float64Array(16));return Cn.properties.get("anchor")==="map"&&(o.a_(kr,kr,In.rollInRadians),o.a$(kr,kr,-In.pitchInRadians),o.a_(kr,kr,In.bearingInRadians),o.a$(kr,kr,In.center.lat*Math.PI/180),o.bm(kr,kr,-In.center.lng*Math.PI/180)),o.bV(Rn,Rn,kr),Rn}(et,ke.transform),Kt=Bt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ut=Qe.properties.get("atmosphere-blend")*Kt.projectionTransition;if(Ut===0)return;const It=Vi(Bt.worldSize,Bt.center.lat),nn=Bt.inverseProjectionMatrix,qt=new Float64Array(4);qt[3]=1,o.ap(qt,qt,Bt.modelViewProjectionMatrix),qt[0]/=qt[3],qt[1]/=qt[3],qt[2]/=qt[3],qt[3]=1,o.ap(qt,qt,nn),qt[0]/=qt[3],qt[1]/=qt[3],qt[2]/=qt[3],qt[3]=1;const xn=((Cn,In,Nn,Rn,kr)=>({u_sun_pos:Cn,u_atmosphere_blend:In,u_globe_position:Nn,u_globe_radius:Rn,u_inv_proj_matrix:kr}))(kt,Ut,[qt[0],qt[1],qt[2]],It,nn),Sn=Sd(mt,Qe);pt.draw(mt,lt.TRIANGLES,bt,Wi.disabled,ao.alphaBlended,Hi.disabled,xn,null,null,"atmosphere",Sn.vertexBuffer,Sn.indexBuffer,Sn.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ke=function(Qe,et){let mt=null;const lt=Object.values(Qe._layers).flatMap(kt=>kt.source&&!kt.isHidden(et)?[Qe.sourceCaches[kt.source]]:[]),pt=lt.filter(kt=>kt.getSource().type==="vector"),bt=lt.filter(kt=>kt.getSource().type!=="vector"),Bt=kt=>{(!mt||mt.getSource().maxzoom<kt.getSource().maxzoom)&&(mt=kt)};return pt.forEach(kt=>Bt(kt)),mt||bt.forEach(kt=>Bt(kt)),mt}(this.style,this.transform.zoom);ke&&function(Qe,et,mt){for(let lt=0;lt<mt.length;lt++)eA(Qe,et,mt[lt])}(this,ke,ke.getVisibleCoordinates())}this.options.showPadding&&function(ke){const Qe=ke.transform.padding;Gl(ke,ke.transform.height-(Qe.top||0),3,wp),Gl(ke,Qe.bottom||0,3,js),WA(ke,Qe.left||0,3,xA),WA(ke,ke.transform.width-(Qe.right||0),3,ul);const et=ke.transform.centerPoint;(function(mt,lt,pt,bt){va(mt,lt-1,pt-10,2,20,bt),va(mt,lt-10,pt-1,20,2,bt)})(ke,et.x,ke.transform.height-et.y,Hc)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,C=this.transform.modelViewProjectionMatrix;let M=this.terrainFacilitator.dirty;M||(M=a?!o.bY(c,C):!o.bZ(c,C)),M||(M=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),M&&(o.b_(c,C),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(k,z){const Y=k.context,J=Y.gl,se=k.transform,ye=ao.unblended,Te=new Hr(J.LEQUAL,Hr.ReadWrite,[0,1]),ke=z.sourceCache.getRenderableTiles(),Qe=k.useProgram("terrainDepth");Y.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),Y.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),Y.clear({color:o.b7.transparent,depth:1});for(const et of ke){const mt=z.getTerrainMesh(et.tileID),lt=z.getTerrainData(et.tileID),pt=se.getProjectionData({overscaledTileID:et.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),bt={u_ele_delta:z.getMeshFrameDelta(se.zoom)};Qe.draw(Y,J.TRIANGLES,Te,Wi.disabled,ye,Hi.backCCW,bt,lt,pt,"terrain",mt.vertexBuffer,mt.indexBuffer,mt.segments)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain),function(k,z){const Y=k.context,J=Y.gl,se=k.transform,ye=ao.unblended,Te=new Hr(J.LEQUAL,Hr.ReadWrite,[0,1]),ke=z.getCoordsTexture(),Qe=z.sourceCache.getRenderableTiles(),et=k.useProgram("terrainCoords");Y.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),Y.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),Y.clear({color:o.b7.transparent,depth:1}),z.coordsIndex=[];for(const mt of Qe){const lt=z.getTerrainMesh(mt.tileID),pt=z.getTerrainData(mt.tileID);Y.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,ke.texture);const bt={u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(se.zoom)},Bt=se.getProjectionData({overscaledTileID:mt.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});et.draw(Y,J.TRIANGLES,Te,Wi.disabled,ye,Hi.backCCW,bt,pt,Bt,"terrain",lt.vertexBuffer,lt.indexBuffer,lt.segments),z.coordsIndex.push(mt.tileID.key)}Y.bindFramebuffer.set(null),Y.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain))}renderLayer(a,c,C,M,k){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="custom"||(M||[]).length)&&(this.id=C.id,o.b$(C)?function(z,Y,J,se,ye,Te){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:ke}=Te,Qe=Wi.disabled,et=z.colorModeForRenderPass();(J._unevaluatedLayout.hasValue("text-variable-anchor")||J._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(mt,lt,pt,bt,Bt,kt,Kt,Ut,It){const nn=lt.transform,qt=lt.style.map.terrain,xn=Bt==="map",Sn=kt==="map";for(const Cn of mt){const In=bt.getTile(Cn),Nn=In.getBucket(pt);if(!Nn||!Nn.text||!Nn.text.segments.get().length)continue;const Rn=o.ag(Nn.textSizeData,nn.zoom),kr=o.aw(In,1,lt.transform.zoom),Ri=ut(xn,lt.transform,kr),Xi=pt.layout.get("icon-text-fit")!=="none"&&Nn.hasIconData();if(Rn){const _i=Math.pow(2,nn.zoom-In.tileID.overscaledZ),Bi=qt?(Qo,Lo)=>qt.getElevation(Cn,Qo,Lo):null;bA(Nn,xn,Sn,It,nn,Ri,_i,Rn,Xi,o.ax(nn,In,Kt,Ut),Cn.toUnwrapped(),Bi)}}}(se,z,J,Y,J.layout.get("text-rotation-alignment"),J.layout.get("text-pitch-alignment"),J.paint.get("text-translate"),J.paint.get("text-translate-anchor"),ye),J.paint.get("icon-opacity").constantOr(1)!==0&&NA(z,Y,J,se,!1,J.paint.get("icon-translate"),J.paint.get("icon-translate-anchor"),J.layout.get("icon-rotation-alignment"),J.layout.get("icon-pitch-alignment"),J.layout.get("icon-keep-upright"),Qe,et,ke),J.paint.get("text-opacity").constantOr(1)!==0&&NA(z,Y,J,se,!0,J.paint.get("text-translate"),J.paint.get("text-translate-anchor"),J.layout.get("text-rotation-alignment"),J.layout.get("text-pitch-alignment"),J.layout.get("text-keep-upright"),Qe,et,ke),Y.map.showCollisionBoxes&&(wc(z,Y,J,se,!0),wc(z,Y,J,se,!1))}(a,c,C,M,this.style.placement.variableOffsets,k):o.c0(C)?function(z,Y,J,se,ye){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Te}=ye,ke=J.paint.get("circle-opacity"),Qe=J.paint.get("circle-stroke-width"),et=J.paint.get("circle-stroke-opacity"),mt=!J.layout.get("circle-sort-key").isConstant();if(ke.constantOr(1)===0&&(Qe.constantOr(1)===0||et.constantOr(1)===0))return;const lt=z.context,pt=lt.gl,bt=z.transform,Bt=z.getDepthModeForSublayer(0,Hr.ReadOnly),kt=Wi.disabled,Kt=z.colorModeForRenderPass(),Ut=[],It=bt.getCircleRadiusCorrection();for(let nn=0;nn<se.length;nn++){const qt=se[nn],xn=Y.getTile(qt),Sn=xn.getBucket(J);if(!Sn)continue;const Cn=J.paint.get("circle-translate"),In=J.paint.get("circle-translate-anchor"),Nn=o.ax(bt,xn,Cn,In),Rn=Sn.programConfigurations.get(J.id),kr=z.useProgram("circle",Rn),Ri=Sn.layoutVertexBuffer,Xi=Sn.indexBuffer,_i=z.style.map.terrain&&z.style.map.terrain.getTerrainData(qt),Bi={programConfiguration:Rn,program:kr,layoutVertexBuffer:Ri,indexBuffer:Xi,uniformValues:Zh(z,xn,J,Nn,It),terrainData:_i,projectionData:bt.getProjectionData({overscaledTileID:qt,applyGlobeMatrix:!Te,applyTerrainMatrix:!0})};if(mt){const Qo=Sn.segments.get();for(const Lo of Qo)Ut.push({segments:new o.aG([Lo]),sortKey:Lo.sortKey,state:Bi})}else Ut.push({segments:Sn.segments,sortKey:0,state:Bi})}mt&&Ut.sort((nn,qt)=>nn.sortKey-qt.sortKey);for(const nn of Ut){const{programConfiguration:qt,program:xn,layoutVertexBuffer:Sn,indexBuffer:Cn,uniformValues:In,terrainData:Nn,projectionData:Rn}=nn.state;xn.draw(lt,pt.TRIANGLES,Bt,kt,Kt,Hi.backCCW,In,Nn,Rn,J.id,Sn,Cn,nn.segments,J.paint,z.transform.zoom,qt)}}(a,c,C,M,k):o.c1(C)?function(z,Y,J,se,ye){if(J.paint.get("heatmap-opacity")===0)return;const Te=z.context,{isRenderingToTexture:ke,isRenderingGlobe:Qe}=ye;if(z.style.map.terrain){for(const et of se){const mt=Y.getTile(et);Y.hasRenderableParent(et)||(z.renderPass==="offscreen"?us(z,mt,J,et,Qe):z.renderPass==="translucent"&&Vc(z,J,et,ke,Qe))}Te.viewport.set([0,0,z.width,z.height])}else z.renderPass==="offscreen"?function(et,mt,lt,pt){const bt=et.context,Bt=bt.gl,kt=et.transform,Kt=Wi.disabled,Ut=new ao([Bt.ONE,Bt.ONE],o.b7.transparent,[!0,!0,!0,!0]);(function(It,nn,qt){const xn=It.gl;It.activeTexture.set(xn.TEXTURE1),It.viewport.set([0,0,nn.width/4,nn.height/4]);let Sn=qt.heatmapFbos.get(o.bS);Sn?(xn.bindTexture(xn.TEXTURE_2D,Sn.colorAttachment.get()),It.bindFramebuffer.set(Sn.framebuffer)):(Sn=Bc(It,nn.width/4,nn.height/4),qt.heatmapFbos.set(o.bS,Sn))})(bt,et,lt),bt.clear({color:o.b7.transparent});for(let It=0;It<pt.length;It++){const nn=pt[It];if(mt.hasRenderableParent(nn))continue;const qt=mt.getTile(nn),xn=qt.getBucket(lt);if(!xn)continue;const Sn=xn.programConfigurations.get(lt.id),Cn=et.useProgram("heatmap",Sn),In=kt.getProjectionData({overscaledTileID:nn,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Nn=kt.getCircleRadiusCorrection();Cn.draw(bt,Bt.TRIANGLES,Hr.disabled,Kt,Ut,Hi.backCCW,Jh(qt,kt.zoom,lt.paint.get("heatmap-intensity"),Nn),null,In,lt.id,xn.layoutVertexBuffer,xn.indexBuffer,xn.segments,lt.paint,kt.zoom,Sn)}bt.viewport.set([0,0,et.width,et.height])}(z,Y,J,se):z.renderPass==="translucent"&&function(et,mt){const lt=et.context,pt=lt.gl;lt.setColorMode(et.colorModeForRenderPass());const bt=mt.heatmapFbos.get(o.bS);bt&&(lt.activeTexture.set(pt.TEXTURE0),pt.bindTexture(pt.TEXTURE_2D,bt.colorAttachment.get()),lt.activeTexture.set(pt.TEXTURE1),Xu(lt,mt).bind(pt.LINEAR,pt.CLAMP_TO_EDGE),et.useProgram("heatmapTexture").draw(lt,pt.TRIANGLES,Hr.disabled,Wi.disabled,et.colorModeForRenderPass(),Hi.disabled,_h(et,mt,0,1),null,null,mt.id,et.viewportBuffer,et.quadTriangleIndexBuffer,et.viewportSegments,mt.paint,et.transform.zoom))}(z,J)}(a,c,C,M,k):o.c2(C)?function(z,Y,J,se,ye){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:Te}=ye,ke=J.paint.get("line-opacity"),Qe=J.paint.get("line-width");if(ke.constantOr(1)===0||Qe.constantOr(1)===0)return;const et=z.getDepthModeForSublayer(0,Hr.ReadOnly),mt=z.colorModeForRenderPass(),lt=J.paint.get("line-dasharray"),pt=J.paint.get("line-pattern"),bt=pt.constantOr(1),Bt=J.paint.get("line-gradient"),kt=J.getCrossfadeParameters(),Kt=bt?"linePattern":lt?"lineSDF":Bt?"lineGradient":"line",Ut=z.context,It=Ut.gl,nn=z.transform;let qt=!0;for(const xn of se){const Sn=Y.getTile(xn);if(bt&&!Sn.patternsLoaded())continue;const Cn=Sn.getBucket(J);if(!Cn)continue;const In=Cn.programConfigurations.get(J.id),Nn=z.context.program.get(),Rn=z.useProgram(Kt,In),kr=qt||Rn.program!==Nn,Ri=z.style.map.terrain&&z.style.map.terrain.getTerrainData(xn),Xi=pt.constantOr(null);if(Xi&&Sn.imageAtlas){const So=Sn.imageAtlas,fo=So.patternPositions[Xi.to.toString()],ca=So.patternPositions[Xi.from.toString()];fo&&ca&&In.setConstantPatternPositions(fo,ca)}const _i=nn.getProjectionData({overscaledTileID:xn,applyGlobeMatrix:!Te,applyTerrainMatrix:!0}),Bi=nn.getPixelScale(),Qo=bt?xc(z,Sn,J,Bi,kt):lt?Qu(z,Sn,J,Bi,lt,kt):Bt?au(z,Sn,J,Bi,Cn.lineClipsArray.length):$d(z,Sn,J,Bi);if(bt)Ut.activeTexture.set(It.TEXTURE0),Sn.imageAtlasTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE),In.updatePaintBuffers(kt);else if(lt&&(kr||z.lineAtlas.dirty))Ut.activeTexture.set(It.TEXTURE0),z.lineAtlas.bind(Ut);else if(Bt){const So=Cn.gradients[J.id];let fo=So.texture;if(J.gradientVersion!==So.version){let ca=256;if(J.stepInterpolant){const Ho=Y.getSource().maxzoom,rs=xn.canonical.z===Ho?Math.ceil(1<<z.transform.maxZoom-xn.canonical.z):1;ca=o.ae(o.bT(Cn.maxLineLength/o.Z*1024*rs),256,Ut.maxTextureSize)}So.gradient=o.bU({expression:J.gradientExpression(),evaluationKey:"lineProgress",resolution:ca,image:So.gradient||void 0,clips:Cn.lineClipsArray}),So.texture?So.texture.update(So.gradient):So.texture=new ie(Ut,So.gradient,It.RGBA),So.version=J.gradientVersion,fo=So.texture}Ut.activeTexture.set(It.TEXTURE0),fo.bind(J.stepInterpolant?It.NEAREST:It.LINEAR,It.CLAMP_TO_EDGE)}let Lo;if(Te){const[So]=z.getStencilConfigForOverlapAndUpdateStencilID(se);Lo=So[xn.overscaledZ]}else Lo=z.stencilModeForClipping(xn);Rn.draw(Ut,It.TRIANGLES,et,Lo,mt,Hi.disabled,Qo,Ri,_i,J.id,Cn.layoutVertexBuffer,Cn.indexBuffer,Cn.segments,J.paint,z.transform.zoom,In,Cn.layoutVertexBuffer2),qt=!1}}(a,c,C,M,k):o.c3(C)?function(z,Y,J,se,ye){const Te=J.paint.get("fill-color"),ke=J.paint.get("fill-opacity");if(ke.constantOr(1)===0)return;const{isRenderingToTexture:Qe}=ye,et=z.colorModeForRenderPass(),mt=J.paint.get("fill-pattern"),lt=z.opaquePassEnabledForLayer()&&!mt.constantOr(1)&&Te.constantOr(o.b7.transparent).a===1&&ke.constantOr(0)===1?"opaque":"translucent";if(z.renderPass===lt){const pt=z.getDepthModeForSublayer(1,z.renderPass==="opaque"?Hr.ReadWrite:Hr.ReadOnly);Xd(z,Y,J,se,pt,et,!1,Qe)}if(z.renderPass==="translucent"&&J.paint.get("fill-antialias")){const pt=z.getDepthModeForSublayer(J.getPaintProperty("fill-outline-color")?2:0,Hr.ReadOnly);Xd(z,Y,J,se,pt,et,!0,Qe)}}(a,c,C,M,k):o.c4(C)?function(z,Y,J,se,ye){const Te=J.paint.get("fill-extrusion-opacity");if(Te===0)return;const{isRenderingToTexture:ke}=ye;if(z.renderPass==="translucent"){const Qe=new Hr(z.context.gl.LEQUAL,Hr.ReadWrite,z.depthRangeFor3D);if(Te!==1||J.paint.get("fill-extrusion-pattern").constantOr(1))Oc(z,Y,J,se,Qe,Wi.disabled,ao.disabled,ke),Oc(z,Y,J,se,Qe,z.stencilModeFor3D(),z.colorModeForRenderPass(),ke);else{const et=z.colorModeForRenderPass();Oc(z,Y,J,se,Qe,Wi.disabled,et,ke)}}}(a,c,C,M,k):o.c5(C)?function(z,Y,J,se,ye){if(z.renderPass!=="offscreen"&&z.renderPass!=="translucent")return;const{isRenderingToTexture:Te}=ye,ke=z.context,Qe=z.style.projection.useSubdivision,et=z.getDepthModeForSublayer(0,Hr.ReadOnly),mt=z.colorModeForRenderPass();if(z.renderPass==="offscreen")(function(lt,pt,bt,Bt,kt,Kt,Ut){const It=lt.context,nn=It.gl;for(const qt of bt){const xn=pt.getTile(qt),Sn=xn.dem;if(!Sn||!Sn.data||!xn.needsHillshadePrepare)continue;const Cn=Sn.dim,In=Sn.stride,Nn=Sn.getPixels();if(It.activeTexture.set(nn.TEXTURE1),It.pixelStoreUnpackPremultiplyAlpha.set(!1),xn.demTexture=xn.demTexture||lt.getTileTexture(In),xn.demTexture){const kr=xn.demTexture;kr.update(Nn,{premultiply:!1}),kr.bind(nn.NEAREST,nn.CLAMP_TO_EDGE)}else xn.demTexture=new ie(It,Nn,nn.RGBA,{premultiply:!1}),xn.demTexture.bind(nn.NEAREST,nn.CLAMP_TO_EDGE);It.activeTexture.set(nn.TEXTURE0);let Rn=xn.fbo;if(!Rn){const kr=new ie(It,{width:Cn,height:Cn,data:null},nn.RGBA);kr.bind(nn.LINEAR,nn.CLAMP_TO_EDGE),Rn=xn.fbo=It.createFramebuffer(Cn,Cn,!0,!1),Rn.colorAttachment.set(kr.texture)}It.bindFramebuffer.set(Rn.framebuffer),It.viewport.set([0,0,Cn,Cn]),lt.useProgram("hillshadePrepare").draw(It,nn.TRIANGLES,kt,Kt,Ut,Hi.disabled,ef(xn.tileID,Sn),null,null,Bt.id,lt.rasterBoundsBuffer,lt.quadTriangleIndexBuffer,lt.rasterBoundsSegments),xn.needsHillshadePrepare=!1}})(z,Y,se,J,et,Wi.disabled,mt),ke.viewport.set([0,0,z.width,z.height]);else if(z.renderPass==="translucent")if(Qe){const[lt,pt,bt]=z.stencilConfigForOverlapTwoPass(se);Ic(z,Y,J,bt,lt,et,mt,!1,Te),Ic(z,Y,J,bt,pt,et,mt,!0,Te)}else{const[lt,pt]=z.getStencilConfigForOverlapAndUpdateStencilID(se);Ic(z,Y,J,pt,lt,et,mt,!1,Te)}}(a,c,C,M,k):o.c6(C)?function(z,Y,J,se,ye){if(z.renderPass!=="translucent"||J.paint.get("raster-opacity")===0||!se.length)return;const{isRenderingToTexture:Te}=ye,ke=Y.getSource(),Qe=z.style.projection.useSubdivision;if(ke instanceof ar)As(z,Y,J,se,null,!1,!1,ke.tileCoords,ke.flippedWindingOrder,Te);else if(Qe){const[et,mt,lt]=z.stencilConfigForOverlapTwoPass(se);As(z,Y,J,lt,et,!1,!0,Ju,!1,Te),As(z,Y,J,lt,mt,!0,!0,Ju,!1,Te)}else{const[et,mt]=z.getStencilConfigForOverlapAndUpdateStencilID(se);As(z,Y,J,mt,et,!1,!0,Ju,!1,Te)}}(a,c,C,M,k):o.c7(C)?function(z,Y,J,se,ye){const Te=J.paint.get("background-color"),ke=J.paint.get("background-opacity");if(ke===0)return;const{isRenderingToTexture:Qe}=ye,et=z.context,mt=et.gl,lt=z.style.projection,pt=z.transform,bt=pt.tileSize,Bt=J.paint.get("background-pattern");if(z.isPatternMissing(Bt))return;const kt=!Bt&&Te.a===1&&ke===1&&z.opaquePassEnabledForLayer()?"opaque":"translucent";if(z.renderPass!==kt)return;const Kt=Wi.disabled,Ut=z.getDepthModeForSublayer(0,kt==="opaque"?Hr.ReadWrite:Hr.ReadOnly),It=z.colorModeForRenderPass(),nn=z.useProgram(Bt?"backgroundPattern":"background"),qt=se||$e(pt,{tileSize:bt,terrain:z.style.map.terrain});Bt&&(et.activeTexture.set(mt.TEXTURE0),z.imageManager.bind(z.context));const xn=J.getCrossfadeParameters();for(const Sn of qt){const Cn=pt.getProjectionData({overscaledTileID:Sn,applyGlobeMatrix:!Qe,applyTerrainMatrix:!0}),In=Bt?xh(ke,z,Bt,{tileID:Sn,tileSize:bt},xn):Cd(ke,Te),Nn=z.style.map.terrain&&z.style.map.terrain.getTerrainData(Sn),Rn=lt.getMeshFromTileID(et,Sn.canonical,!1,!0,"raster");nn.draw(et,mt.TRIANGLES,Ut,Kt,It,Hi.backCCW,In,Nn,Cn,J.id,Rn.vertexBuffer,Rn.indexBuffer,Rn.segments)}}(a,0,C,M,k):o.c8(C)&&function(z,Y,J,se){const{isRenderingGlobe:ye}=se,Te=z.context,ke=J.implementation,Qe=z.style.projection,et=z.transform,mt=et.getProjectionDataForCustomLayer(ye),lt={farZ:et.farZ,nearZ:et.nearZ,fov:et.fov*Math.PI/180,modelViewProjectionMatrix:et.modelViewProjectionMatrix,projectionMatrix:et.projectionMatrix,shaderData:{variantName:Qe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Qe.shaderPreludeCode.vertexSource}`,define:Qe.shaderDefine},defaultProjectionData:mt},pt=ke.renderingMode?ke.renderingMode:"2d";if(z.renderPass==="offscreen"){const bt=ke.prerender;bt&&(z.setCustomLayerDefaults(),Te.setColorMode(z.colorModeForRenderPass()),bt.call(ke,Te.gl,lt),Te.setDirty(),z.setBaseState())}else if(z.renderPass==="translucent"){z.setCustomLayerDefaults(),Te.setColorMode(z.colorModeForRenderPass()),Te.setStencilMode(Wi.disabled);const bt=pt==="3d"?z.getDepthModeFor3D():z.getDepthModeForSublayer(0,Hr.ReadOnly);Te.setDepthMode(bt),ke.render(Te.gl,lt),Te.setDirty(),z.setBaseState(),Te.bindFramebuffer.set(null)}}(a,0,C,k))}saveTileTexture(a){const c=this._tileTextures[a.size[0]];c?c.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const c=this._tileTextures[a];return c&&c.length>0?c.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const c=this.imageManager.getPattern(a.from.toString()),C=this.imageManager.getPattern(a.to.toString());return!c||!C}useProgram(a,c,C=!1){this.cache=this.cache||{};const M=!!this.style.map.terrain,k=this.style.projection,z=a+(c?c.cacheKey:"")+`/${C?Mu:k.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(M?"/terrain":"");return this.cache[z]||(this.cache[z]=new lc(this.context,ei[a],c,_d[a],this._showOverdrawInspector,M,C?ei.projectionMercator:k.shaderPreludeCode,C?Ms:k.shaderDefine)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ie(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:c}=this.context.gl;return this.width!==a||this.height!==c}}function Jd(O,a){let c,C=!1,M=null,k=null;const z=()=>{M=null,C&&(O.apply(k,c),M=setTimeout(z,a),C=!1)};return(...Y)=>(C=!0,k=this,c=Y,M||z(),M)}class dc{constructor(a){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let C;return c.split("&").map(M=>M.split("=")).forEach(M=>{M[0]===this._hashName&&(C=M)}),(C&&C[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const C=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:C,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const C=c.join("/");let M=C;M.split("&").length>0&&(M=M.split("&")[0]),this._hashName&&(M=`${this._hashName}=${C}`);let k=window.location.hash.replace(M,"");k.startsWith("#&")?k=k.slice(0,1)+k.slice(2):k==="#"&&(k="");let z=window.location.href.replace(/(#.+)?$/,k);z=z.replace("&&","&"),window.history.replaceState(window.history.state,null,z)},this._updateHash=Jd(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){const c=this._map.getCenter(),C=Math.round(100*this._map.getZoom())/100,M=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,M),z=Math.round(c.lng*k)/k,Y=Math.round(c.lat*k)/k,J=this._map.getBearing(),se=this._map.getPitch();let ye="";if(ye+=a?`/${z}/${Y}/${C}`:`${C}/${Y}/${z}`,(J||se)&&(ye+="/"+Math.round(10*J)/10),se&&(ye+=`/${Math.round(se)}`),this._hashName){const Te=this._hashName;let ke=!1;const Qe=window.location.hash.slice(1).split("&").map(et=>{const mt=et.split("=")[0];return mt===Te?(ke=!0,`${mt}=${ye}`):et}).filter(et=>et);return ke||Qe.push(`${Te}=${ye}`),`#${Qe.join("&")}`}return`#${ye}`}_isValidHash(a){if(a.length<3||a.some(isNaN))return!1;try{new o.Q(+a[2],+a[1])}catch{return!1}const c=+a[0],C=+(a[3]||0),M=+(a[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&C>=-180&&C<=180&&M>=this._map.getMinPitch()&&M<=this._map.getMaxPitch()}}const tA={linearity:.3,easing:o.c9(0,0,.3,1)},_l=o.e({deceleration:2500,maxSpeed:1400},tA),GA=o.e({deceleration:20,maxSpeed:1400},tA),kc=o.e({deceleration:1e3,maxSpeed:360},tA),Iu=o.e({deceleration:1e3,maxSpeed:90},tA),wh=o.e({deceleration:1e3,maxSpeed:360},tA);class ot{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:T.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,c=T.now();for(;a.length>0&&c-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)c.zoom+=k.zoomDelta||0,c.bearing+=k.bearingDelta||0,c.pitch+=k.pitchDelta||0,c.roll+=k.rollDelta||0,k.panDelta&&c.pan._add(k.panDelta),k.around&&(c.around=k.around),k.pinchAround&&(c.pinchAround=k.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};if(c.pan.mag()){const k=Ss(c.pan.mag(),C,o.e({},_l,a||{})),z=c.pan.mult(k.amount/c.pan.mag()),Y=this._map.cameraHelper.handlePanInertia(z,this._map.transform);M.center=Y.easingCenter,M.offset=Y.easingOffset,QA(M,k)}if(c.zoom){const k=Ss(c.zoom,C,GA);M.zoom=this._map.transform.zoom+k.amount,QA(M,k)}if(c.bearing){const k=Ss(c.bearing,C,kc);M.bearing=this._map.transform.bearing+o.ae(k.amount,-179,179),QA(M,k)}if(c.pitch){const k=Ss(c.pitch,C,Iu);M.pitch=this._map.transform.pitch+k.amount,QA(M,k)}if(c.roll){const k=Ss(c.roll,C,wh);M.roll=this._map.transform.roll+o.ae(k.amount,-179,179),QA(M,k)}if(M.zoom||M.bearing){const k=c.pinchAround===void 0?c.around:c.pinchAround;M.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),o.e(M,{noMoveStart:!0})}}function QA(O,a){(!O.duration||O.duration<a.duration)&&(O.duration=a.duration,O.easing=a.easing)}function Ss(O,a,c){const{maxSpeed:C,linearity:M,deceleration:k}=c,z=o.ae(O*M/(a/1e3),-C,C),Y=Math.abs(z)/(k*M);return{easing:c.easing,duration:1e3*Y,amount:z*(Y/2)}}class Ti extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,C,M={}){C=C instanceof MouseEvent?C:new MouseEvent(a,C);const k=P.mousePos(c.getCanvas(),C),z=c.unproject(k);super(a,o.e({point:k,lngLat:z,originalEvent:C},M)),this._defaultPrevented=!1,this.target=c}}class ri extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,C){const M=a==="touchend"?C.changedTouches:C.touches,k=P.touchPos(c.getCanvasContainer(),M),z=k.map(J=>c.unproject(J)),Y=k.reduce((J,se,ye,Te)=>J.add(se.div(Te.length)),new o.P(0,0));super(a,{points:k,point:Y,lngLats:z,lngLat:c.unproject(Y),originalEvent:C}),this._defaultPrevented=!1}}class Go extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,c,C){super(a,{originalEvent:C}),this._defaultPrevented=!1}}class Ql{constructor(a,c){this._map=a,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new Go(a.type,this._map,a))}mousedown(a,c){return this._mousedownPos=c,this._firePreventable(new Ti(a.type,this._map,a))}mouseup(a){this._map.fire(new Ti(a.type,this._map,a))}click(a,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Ti(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Ti(a.type,this._map,a))}mouseover(a){this._map.fire(new Ti(a.type,this._map,a))}mouseout(a){this._map.fire(new Ti(a.type,this._map,a))}touchstart(a){return this._firePreventable(new ri(a.type,this._map,a))}touchmove(a){this._map.fire(new ri(a.type,this._map,a))}touchend(a){this._map.fire(new ri(a.type,this._map,a))}touchcancel(a){this._map.fire(new ri(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ed{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Ti(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ti("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Ti(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cs{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.screenPointToLocation(o.P.convert(a),this._map.terrain)}}class ns{constructor(a,c){this._map=a,this._tr=new cs(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,c){this.isEnabled()&&a.shiftKey&&a.button===0&&(P.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(a,c){if(!this._active)return;const C=c;if(this._lastPos.equals(C)||!this._box&&C.dist(this._startPos)<this._clickTolerance)return;const M=this._startPos;this._lastPos=C,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const k=Math.min(M.x,C.x),z=Math.max(M.x,C.x),Y=Math.min(M.y,C.y),J=Math.max(M.y,C.y);P.setTransform(this._box,`translate(${k}px,${Y}px)`),this._box.style.width=z-k+"px",this._box.style.height=J-Y+"px"}mouseupWindow(a,c){if(!this._active||a.button!==0)return;const C=this._startPos,M=c;if(this.reset(),P.suppressClick(),C.x!==M.x||C.y!==M.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:a})),{cameraAnimation:k=>k.fitScreenCoordinates(C,M,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,c){return this._map.fire(new o.l(a,{originalEvent:c}))}}function Es(O,a){if(O.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${O.length}, points ${a.length}`);const c={};for(let C=0;C<O.length;C++)c[O[C].identifier]=a[C];return c}class Xc{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,c,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),C.length===this.numTouches&&(this.centroid=function(M){const k=new o.P(0,0);for(const z of M)k._add(z);return k.div(M.length)}(c),this.touches=Es(C,c)))}touchmove(a,c,C){if(this.aborted||!this.centroid)return;const M=Es(C,c);for(const k in this.touches){const z=M[k];(!z||z.dist(this.touches[k])>30)&&(this.aborted=!0)}}touchend(a,c,C){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const M=!this.aborted&&this.centroid;if(this.reset(),M)return M}}}class qa{constructor(a){this.singleTap=new Xc(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,c,C){this.singleTap.touchstart(a,c,C)}touchmove(a,c,C){this.singleTap.touchmove(a,c,C)}touchend(a,c,C){const M=this.singleTap.touchend(a,c,C);if(M){const k=a.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(M)<30;if(k&&z||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=M,this.count===this.numTaps)return this.reset(),M}}}class uu{constructor(a){this._tr=new cs(a),this._zoomIn=new qa({numTouches:1,numTaps:2}),this._zoomOut=new qa({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,c,C){this._zoomIn.touchstart(a,c,C),this._zoomOut.touchstart(a,c,C)}touchmove(a,c,C){this._zoomIn.touchmove(a,c,C),this._zoomOut.touchmove(a,c,C)}touchend(a,c,C){const M=this._zoomIn.touchend(a,c,C),k=this._zoomOut.touchend(a,c,C),z=this._tr;return M?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:z.zoom+1,around:z.unproject(M)},{originalEvent:a})}):k?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Y=>Y.easeTo({duration:300,zoom:z.zoom-1,around:z.unproject(k)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ca{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const c=this._moveFunction(...a);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(a,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,c){if(!this.isEnabled())return;const C=this._lastPoint;if(!C)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const M=Array.isArray(c)?c[0]:c;return!this._moved&&M.dist(C)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=M,this._move(C,M))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&P.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const hc={0:1,2:2};class Bs{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const c=P.mouseButton(a);this._eventButton=c}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(c,C){const M=hc[C];return c.buttons===void 0||(c.buttons&M)!==M}(a,this._eventButton)}isValidEndEvent(a){return P.mouseButton(a)===this._eventButton}}class wr{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}class af{constructor(a=new Bs({checkCorrectEvent:()=>!0}),c=new wr){this.mouseMoveStateManager=a,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(a,c,C){return a instanceof MouseEvent?c(a):typeof TouchEvent<"u"&&a instanceof TouchEvent?C(a):void 0}startMove(a){this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(a){this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(a){return this._executeRelevantHandler(a,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const Jc=O=>{O.mousedown=O.dragStart,O.mousemoveWindow=O.dragMove,O.mouseup=O.dragEnd,O.contextmenu=a=>{a.preventDefault()}};class Au{constructor(a,c){this._clickTolerance=a.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,c,C){return this._calculateTransform(a,c,C)}touchmove(a,c,C){if(this._active){if(!this._shouldBePrevented(C.length))return a.preventDefault(),this._calculateTransform(a,c,C);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,c,C){this._calculateTransform(a,c,C),this._active&&this._shouldBePrevented(C.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,c,C){C.length>0&&(this._active=!0);const M=Es(C,c),k=new o.P(0,0),z=new o.P(0,0);let Y=0;for(const se in M){const ye=M[se],Te=this._touches[se];Te&&(k._add(ye),z._add(ye.sub(Te)),Y++,M[se]=ye)}if(this._touches=M,this._shouldBePrevented(Y)||!z.mag())return;const J=z.div(Y);return this._sum._add(J),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(Y),panDelta:J}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,c,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([c[0],c[1]]))}touchmove(a,c,C){if(!this._firstTwoTouches)return;a.preventDefault();const[M,k]=this._firstTwoTouches,z=Va(C,c,M),Y=Va(C,c,k);if(!z||!Y)return;const J=this._aroundCenter?null:z.add(Y).div(2);return this._move([z,Y],J,a)}touchend(a,c,C){if(!this._firstTwoTouches)return;const[M,k]=this._firstTwoTouches,z=Va(C,c,M),Y=Va(C,c,k);z&&Y||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Va(O,a,c){for(let C=0;C<O.length;C++)if(O[C].identifier===c)return a[C]}function eh(O,a){return Math.log(O/a)/Math.LN2}class Qi extends Tc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,c){const C=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(eh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:eh(this._distance,C),pinchAround:c}}}function nA(O,a){return 180*O.angleWith(a)/Math.PI}class Pc extends Tc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,c,C){const M=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nA(this._vector,M),pinchAround:c}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const c=25/(Math.PI*this._minDiameter)*360,C=nA(a,this._startVector);return Math.abs(C)<c}}function MA(O){return Math.abs(O.y)>Math.abs(O.x)}class ed extends Tc{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,c,C){super.touchstart(a,c,C),this._currentTouchCount=C.length}_start(a){this._lastPoints=a,MA(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,c,C){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const M=a[0].sub(this._lastPoints[0]),k=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(M,k,C.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(M.y+k.y)/2*-.5}):void 0}gestureBeginsVertically(a,c,C){if(this._valid!==void 0)return this._valid;const M=a.mag()>=2,k=c.mag()>=2;if(!M&&!k)return;if(!M||!k)return this._firstMove===void 0&&(this._firstMove=C),C-this._firstMove<100&&void 0;const z=a.y>0==c.y>0;return MA(a)&&MA(c)&&z}}const Os={panStep:100,bearingStep:15,pitchStep:10};class wo{constructor(a){this._tr=new cs(a);const c=Os;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let c=0,C=0,M=0,k=0,z=0;switch(a.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:a.shiftKey?C=-1:(a.preventDefault(),k=-1);break;case 39:a.shiftKey?C=1:(a.preventDefault(),k=1);break;case 38:a.shiftKey?M=1:(a.preventDefault(),z=-1);break;case 40:a.shiftKey?M=-1:(a.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(C=0,M=0),{cameraAnimation:Y=>{const J=this._tr;Y.easeTo({duration:300,easeId:"keyboardHandler",easing:Yl,zoom:c?Math.round(J.zoom)+c*(a.shiftKey?2:1):J.zoom,bearing:J.bearing+C*this._bearingStep,pitch:J.pitch+M*this._pitchStep,offset:[-k*this._panStep,-z*this._panStep],center:J.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Yl(O){return O*(2-O)}const Pa=4.000244140625;class $a{constructor(a,c){this._onTimeout=C=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},this._map=a,this._tr=new cs(a),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let c=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const C=T.now(),M=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,c!==0&&c%Pa==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":M>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(M*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),a.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=a,this._delta-=c,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=P.mousePos(this._map.getCanvas(),a),C=this._tr;this._aroundPoint=this._aroundCenter?C.transform.locationToScreenPoint(o.Q.convert(C.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const Y=a.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=Y),typeof this._targetZoom=="number"&&(this._targetZoom+=Y)}if(this._delta!==0){const Y=this._type==="wheel"&&Math.abs(this._delta)>Pa?this._wheelZoomRate:this._defaultZoomRate;let J=2/(1+Math.exp(-Math.abs(this._delta*Y)));this._delta<0&&J!==0&&(J=1/J);const se=typeof this._targetZoom!="number"?a.scale:o.aI(this._targetZoom);this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,o.ab(se*J))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?a.zoom:this._targetZoom,C=this._startZoom,M=this._easing;let k,z=!1;if(this._type==="wheel"&&C&&M){const Y=T.now()-this._lastWheelEventTime,J=Math.min((Y+5)/200,1),se=M(J);k=o.B.number(C,c,se),J<1?this._frameId||(this._frameId=!0):z=!0}else k=c,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=k,{noInertia:!0,needsRenderFrame:!z,zoomDelta:k-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let c=o.cb;if(this._prevEase){const C=this._prevEase,M=(T.now()-C.start)/C.duration,k=C.easing(M+.01)-C.easing(M),z=.27/Math.sqrt(k*k+1e-4)*.01,Y=Math.sqrt(.0729-z*z);c=o.c9(z,Y,.25,1)}return this._prevEase={start:T.now(),duration:a,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class fc{constructor(a,c){this._clickZoom=a,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class wA{constructor(a){this._tr=new cs(a),this.reset()}reset(){this._active=!1}dblclick(a,c){return a.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class YA{constructor(){this._tap=new qa({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,c,C){if(!this._swipePoint)if(this._tapTime){const M=c[0],k=a.timeStamp-this._tapTime<500,z=this._tapPoint.dist(M)<30;k&&z?C.length>0&&(this._swipePoint=M,this._swipeTouch=C[0].identifier):this.reset()}else this._tap.touchstart(a,c,C)}touchmove(a,c,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const M=c[0],k=M.y-this._swipePoint.y;return this._swipePoint=M,a.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(a,c,C)}touchend(a,c,C){if(this._tapTime)this._swipePoint&&C.length===0&&this.reset();else{const M=this._tap.touchend(a,c,C);M&&(this._tapTime=a.timeStamp,this._tapPoint=M)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cu{constructor(a,c,C){this._el=a,this._mousePan=c,this._touchPan=C}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class gs{constructor(a,c,C,M){this._pitchWithRotate=a.pitchWithRotate,this._rollEnabled=a.rollEnabled,this._mouseRotate=c,this._mousePitch=C,this._mouseRoll=M}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class rA{constructor(a,c,C,M){this._el=a,this._touchZoom=c,this._touchRotate=C,this._tapDragZoom=M,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class qA{constructor(a,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",a);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const C=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),M=document.createElement("div");M.className="maplibregl-desktop-message",M.textContent=c,this._container.appendChild(M);const k=document.createElement("div");k.className="maplibregl-mobile-message",k.textContent=C,this._container.appendChild(k),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,c){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:a,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const _a=O=>O.zoom||O.drag||O.roll||O.pitch||O.rotate;class Ka extends o.l{}function ys(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta||O.rollDelta}class SA{constructor(a,c){this.handleWindowEvent=M=>{this.handleEvent(M,`${M.type}Window`)},this.handleEvent=(M,k)=>{if(M.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const z=M.type==="renderFrame"?void 0:M,Y={needsRenderFrame:!1},J={},se={};for(const{handlerName:ke,handler:Qe,allowed:et}of this._handlers){if(!Qe.isEnabled())continue;let mt;if(this._blockedByActive(se,et,ke))Qe.reset();else if(Qe[k||M.type]){if(o.cc(M,k||M.type)){const lt=P.mousePos(this._map.getCanvas(),M);mt=Qe[k||M.type](M,lt)}else if(o.cd(M,k||M.type)){const lt=this._getMapTouches(M.touches),pt=P.touchPos(this._map.getCanvas(),lt);mt=Qe[k||M.type](M,pt,lt)}else o.ce(k||M.type)||(mt=Qe[k||M.type](M));this.mergeHandlerResult(Y,J,mt,ke,z),mt&&mt.needsRenderFrame&&this._triggerRenderFrame()}(mt||Qe.isActive())&&(se[ke]=Qe)}const ye={};for(const ke in this._previousActiveHandlers)se[ke]||(ye[ke]=z);this._previousActiveHandlers=se,(Object.keys(ye).length||ys(Y))&&(this._changes.push([Y,J,ye]),this._triggerRenderFrame()),(Object.keys(se).length||ys(Y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Te}=Y;Te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Te(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ot(a),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[window,"blur",void 0]];for(const[M,k,z]of this._listeners)P.addEventListener(M,k,M===document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[a,c,C]of this._listeners)P.removeEventListener(a,c,a===document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(a){const c=this._map,C=c.getCanvasContainer();this._add("mapEvent",new Ql(c,a));const M=c.boxZoom=new ns(c,a);this._add("boxZoom",M),a.interactive&&a.boxZoom&&M.enable();const k=c.cooperativeGestures=new qA(c,a.cooperativeGestures);this._add("cooperativeGestures",k),a.cooperativeGestures&&k.enable();const z=new uu(c),Y=new wA(c);c.doubleClickZoom=new fc(Y,z),this._add("tapZoom",z),this._add("clickZoom",Y),a.interactive&&a.doubleClickZoom&&c.doubleClickZoom.enable();const J=new YA;this._add("tapDragZoom",J);const se=c.touchPitch=new ed(c);this._add("touchPitch",se),a.interactive&&a.touchPitch&&c.touchPitch.enable(a.touchPitch);const ye=()=>c.project(c.getCenter()),Te=function({enable:kt,clickTolerance:Kt,aroundCenter:Ut=!0,minPixelCenterThreshold:It=100,rotateDegreesPerPixelMoved:nn=.8},qt){const xn=new Bs({checkCorrectEvent:Sn=>P.mouseButton(Sn)===0&&Sn.ctrlKey||P.mouseButton(Sn)===2&&!Sn.ctrlKey});return new Ca({clickTolerance:Kt,move:(Sn,Cn)=>{const In=qt();if(Ut&&Math.abs(In.y-Sn.y)>It)return{bearingDelta:o.ca(new o.P(Sn.x,Cn.y),Cn,In)};let Nn=(Cn.x-Sn.x)*nn;return Ut&&Cn.y<In.y&&(Nn=-Nn),{bearingDelta:Nn}},moveStateManager:xn,enable:kt,assignEvents:Jc})}(a,ye),ke=function({enable:kt,clickTolerance:Kt,pitchDegreesPerPixelMoved:Ut=-.5}){const It=new Bs({checkCorrectEvent:nn=>P.mouseButton(nn)===0&&nn.ctrlKey||P.mouseButton(nn)===2});return new Ca({clickTolerance:Kt,move:(nn,qt)=>({pitchDelta:(qt.y-nn.y)*Ut}),moveStateManager:It,enable:kt,assignEvents:Jc})}(a),Qe=function({enable:kt,clickTolerance:Kt,rollDegreesPerPixelMoved:Ut=.3},It){const nn=new Bs({checkCorrectEvent:qt=>P.mouseButton(qt)===2&&qt.ctrlKey});return new Ca({clickTolerance:Kt,move:(qt,xn)=>{const Sn=It();let Cn=(xn.x-qt.x)*Ut;return xn.y<Sn.y&&(Cn=-Cn),{rollDelta:Cn}},moveStateManager:nn,enable:kt,assignEvents:Jc})}(a,ye);c.dragRotate=new gs(a,Te,ke,Qe),this._add("mouseRotate",Te,["mousePitch"]),this._add("mousePitch",ke,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Qe,["mousePitch"]),a.interactive&&a.dragRotate&&c.dragRotate.enable();const et=function({enable:kt,clickTolerance:Kt}){const Ut=new Bs({checkCorrectEvent:It=>P.mouseButton(It)===0&&!It.ctrlKey});return new Ca({clickTolerance:Kt,move:(It,nn)=>({around:nn,panDelta:nn.sub(It)}),activateOnStart:!0,moveStateManager:Ut,enable:kt,assignEvents:Jc})}(a),mt=new Au(a,c);c.dragPan=new cu(C,et,mt),this._add("mousePan",et),this._add("touchPan",mt,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&c.dragPan.enable(a.dragPan);const lt=new Pc,pt=new Qi;c.touchZoomRotate=new rA(C,pt,lt,J),this._add("touchRotate",lt,["touchPan","touchZoom"]),this._add("touchZoom",pt,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&c.touchZoomRotate.enable(a.touchZoomRotate);const bt=c.scrollZoom=new $a(c,()=>this._triggerRenderFrame());this._add("scrollZoom",bt,["mousePan"]),a.interactive&&a.scrollZoom&&c.scrollZoom.enable(a.scrollZoom);const Bt=c.keyboard=new wo(c);this._add("keyboard",Bt),a.interactive&&a.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Ed(c))}_add(a,c,C){this._handlers.push({handlerName:a,handler:c,allowed:C}),this._handlersById[a]=c}stop(a){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!_a(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,c,C){for(const M in a)if(M!==C&&(!c||c.indexOf(M)<0))return!0;return!1}_getMapTouches(a){const c=[];for(const C of a)this._el.contains(C.target)&&c.push(C);return c}mergeHandlerResult(a,c,C,M,k){if(!C)return;o.e(a,C);const z={handlerName:M,originalEvent:C.originalEvent||k};C.zoomDelta!==void 0&&(c.zoom=z),C.panDelta!==void 0&&(c.drag=z),C.rollDelta!==void 0&&(c.roll=z),C.pitchDelta!==void 0&&(c.pitch=z),C.bearingDelta!==void 0&&(c.rotate=z)}_applyChanges(){const a={},c={},C={};for(const[M,k,z]of this._changes)M.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(M.panDelta)),M.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+M.zoomDelta),M.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+M.bearingDelta),M.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+M.pitchDelta),M.rollDelta&&(a.rollDelta=(a.rollDelta||0)+M.rollDelta),M.around!==void 0&&(a.around=M.around),M.pinchAround!==void 0&&(a.pinchAround=M.pinchAround),M.noInertia&&(a.noInertia=M.noInertia),o.e(c,k),o.e(C,z);this._updateMapTransform(a,c,C),this._changes=[]}_updateMapTransform(a,c,C){const M=this._map,k=M._getTransformForUpdate(),z=M.terrain;if(!(ys(a)||z&&this._terrainMovement))return this._fireEvents(c,C,!0);M._stop(!0);let{panDelta:Y,zoomDelta:J,bearingDelta:se,pitchDelta:ye,rollDelta:Te,around:ke,pinchAround:Qe}=a;Qe!==void 0&&(ke=Qe),ke=ke||M.transform.centerPoint,z&&!k.isPointOnMapSurface(ke)&&(ke=k.centerPoint);const et={panDelta:Y,zoomDelta:J,rollDelta:Te,pitchDelta:ye,bearingDelta:se,around:ke};this._map.cameraHelper.useGlobeControls&&!k.isPointOnMapSurface(ke)&&(ke=k.centerPoint);const mt=ke.distSqr(k.centerPoint)<.01?k.center:k.screenPointToLocation(Y?ke.sub(Y):ke);z?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(et,k),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?k.setCenter(k.screenPointToLocation(k.centerPoint.sub(Y))):this._map.cameraHelper.handleMapControlsPan(et,k,mt):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(et,k,mt))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(et,k),this._map.cameraHelper.handleMapControlsPan(et,k,mt)),M._applyUpdatedTransform(k),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(c,C,!0)}_fireEvents(a,c,C){const M=_a(this._eventsInProgress),k=_a(a),z={};for(const Te in a){const{originalEvent:ke}=a[Te];this._eventsInProgress[Te]||(z[`${Te}start`]=ke),this._eventsInProgress[Te]=a[Te]}!M&&k&&this._fireEvent("movestart",k.originalEvent);for(const Te in z)this._fireEvent(Te,z[Te]);k&&this._fireEvent("move",k.originalEvent);for(const Te in a){const{originalEvent:ke}=a[Te];this._fireEvent(Te,ke)}const Y={};let J;for(const Te in this._eventsInProgress){const{handlerName:ke,originalEvent:Qe}=this._eventsInProgress[Te];this._handlersById[ke].isActive()||(delete this._eventsInProgress[Te],J=c[ke]||Qe,Y[`${Te}end`]=J)}for(const Te in Y)this._fireEvent(Te,Y[Te]);const se=_a(this._eventsInProgress),ye=(M||k)&&!se;if(ye&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Te=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Te.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Te)}if(C&&ye){this._updatingCamera=!0;const Te=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ke=Qe=>Qe!==0&&-this._bearingSnap<Qe&&Qe<this._bearingSnap;!Te||!Te.essential&&T.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:J})),ke(this._map.getBearing())&&this._map.resetNorth()):(ke(Te.bearing||this._map.getBearing())&&(Te.bearing=0),Te.freezeElevation=!0,this._map.easeTo(Te,{originalEvent:J})),this._updatingCamera=!1}}_fireEvent(a,c){this._map.fire(new o.l(a,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new Ka("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Al extends o.E{constructor(a,c,C){super(),this._renderFrameCallback=()=>{const M=Math.min((T.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(M)),M<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=C.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(a,c){a.apply(this.transform),this.transform=a,this.cameraHelper=c}getCenter(){return new o.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(a,c){return this.jumpTo({center:a},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(a,c){return this.jumpTo({elevation:a},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(a){this._centerClampedToGround=a}panBy(a,c,C){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},c),C)}panTo(a,c,C){return this.easeTo(o.e({center:a},c),C)}getZoom(){return this.transform.zoom}setZoom(a,c){return this.jumpTo({zoom:a},c),this}zoomTo(a,c,C){return this.easeTo(o.e({zoom:a},c),C)}zoomIn(a,c){return this.zoomTo(this.getZoom()+1,a,c),this}zoomOut(a,c){return this.zoomTo(this.getZoom()-1,a,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(a,c){return a!=this.transform.fov&&(this.transform.setFov(a),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)).fire(new o.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(a,c){return this.jumpTo({bearing:a},c),this}getPadding(){return this.transform.padding}setPadding(a,c){return this.jumpTo({padding:a},c),this}rotateTo(a,c,C){return this.easeTo(o.e({bearing:a},c),C)}resetNorth(a,c){return this.rotateTo(0,o.e({duration:1e3},a),c),this}resetNorthPitch(a,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},a),c),this}snapToNorth(a,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,c):this}getPitch(){return this.transform.pitch}setPitch(a,c){return this.jumpTo({pitch:a},c),this}getRoll(){return this.transform.roll}setRoll(a,c){return this.jumpTo({roll:a},c),this}cameraForBounds(a,c){a=Lt.convert(a).adjustAntiMeridian();const C=c&&c.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),C,c)}_cameraForBoxAndBearing(a,c,C,M){const k={top:0,bottom:0,right:0,left:0};if(typeof(M=o.e({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},M)).padding=="number"){const se=M.padding;M.padding={top:se,bottom:se,right:se,left:se}}const z=o.e(k,M.padding);M.padding=z;const Y=this.transform,J=new Lt(a,c);return this.cameraHelper.cameraForBoxAndBearing(M,z,J,C,Y)}fitBounds(a,c,C){return this._fitInternal(this.cameraForBounds(a,c),c,C)}fitScreenCoordinates(a,c,C,M,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(a)),this.transform.screenPointToLocation(o.P.convert(c)),C,M),M,k)}_fitInternal(a,c,C){return a?(delete(c=o.e(a,c)).padding,c.linear?this.easeTo(c,C):this.flyTo(c,C)):this}jumpTo(a,c){this.stop();const C=this._getTransformForUpdate();let M=!1,k=!1,z=!1;const Y=C.zoom;this.cameraHelper.handleJumpToCenterZoom(C,a);const J=C.zoom!==Y;return"elevation"in a&&C.elevation!==+a.elevation&&C.setElevation(+a.elevation),"bearing"in a&&C.bearing!==+a.bearing&&(M=!0,C.setBearing(+a.bearing)),"pitch"in a&&C.pitch!==+a.pitch&&(k=!0,C.setPitch(+a.pitch)),"roll"in a&&C.roll!==+a.roll&&(z=!0,C.setRoll(+a.roll)),a.padding==null||C.isPaddingEqual(a.padding)||C.setPadding(a.padding),this._applyUpdatedTransform(C),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)),J&&this.fire(new o.l("zoomstart",c)).fire(new o.l("zoom",c)).fire(new o.l("zoomend",c)),M&&this.fire(new o.l("rotatestart",c)).fire(new o.l("rotate",c)).fire(new o.l("rotateend",c)),k&&this.fire(new o.l("pitchstart",c)).fire(new o.l("pitch",c)).fire(new o.l("pitchend",c)),z&&this.fire(new o.l("rollstart",c)).fire(new o.l("roll",c)).fire(new o.l("rollend",c)),this.fire(new o.l("moveend",c))}calculateCameraOptionsFromTo(a,c,C,M=0){const k=o.$.fromLngLat(a,c),z=o.$.fromLngLat(C,M),Y=z.x-k.x,J=z.y-k.y,se=z.z-k.z,ye=Math.hypot(Y,J,se);if(ye===0)throw new Error("Can't calculate camera options with same From and To");const Te=Math.hypot(Y,J),ke=o.ab(this.transform.cameraToCenterDistance/ye/this.transform.tileSize),Qe=180*Math.atan2(Y,-J)/Math.PI;let et=180*Math.acos(Te/ye)/Math.PI;return et=se<0?90-et:90+et,{center:z.toLngLat(),elevation:M,zoom:ke,pitch:et,bearing:Qe}}calculateCameraOptionsFromCameraLngLatAltRotation(a,c,C,M,k){const z=this.transform.calculateCenterFromCameraLngLatAlt(a,c,C,M);return{center:z.center,elevation:z.elevation,zoom:z.zoom,bearing:C,pitch:M,roll:k}}easeTo(a,c){this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.cb},a)).animate===!1||!a.essential&&T.prefersReducedMotion)&&(a.duration=0);const C=this._getTransformForUpdate(),M=this.getBearing(),k=C.pitch,z=C.roll,Y="bearing"in a?this._normalizeBearing(a.bearing,M):M,J="pitch"in a?+a.pitch:k,se="roll"in a?this._normalizeBearing(a.roll,z):z,ye="padding"in a?a.padding:C.padding,Te=o.P.convert(a.offset);let ke,Qe;a.around&&(ke=o.Q.convert(a.around),Qe=C.locationToScreenPoint(ke));const et={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},mt=this.cameraHelper.handleEaseTo(C,{bearing:Y,pitch:J,roll:se,padding:ye,around:ke,aroundPoint:Qe,offsetAsPoint:Te,offset:a.offset,zoom:a.zoom,center:a.center});return this._rotating=this._rotating||M!==Y,this._pitching=this._pitching||J!==k,this._rolling=this._rolling||se!==z,this._padding=!C.isPaddingEqual(ye),this._zooming=this._zooming||mt.isZooming,this._easeId=a.easeId,this._prepareEase(c,a.noMoveStart,et),this.terrain&&this._prepareElevation(mt.elevationCenter),this._ease(lt=>{mt.easeFunc(lt),this.terrain&&!a.freezeElevation&&this._updateElevation(lt),this._applyUpdatedTransform(C),this._fireMoveEvents(c)},lt=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(c,lt)},a),this}_prepareEase(a,c,C={}){this._moving=!0,c||C.moving||this.fire(new o.l("movestart",a)),this._zooming&&!C.zooming&&this.fire(new o.l("zoomstart",a)),this._rotating&&!C.rotating&&this.fire(new o.l("rotatestart",a)),this._pitching&&!C.pitching&&this.fire(new o.l("pitchstart",a)),this._rolling&&!C.rolling&&this.fire(new o.l("rollstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&c!==this._elevationTarget){const C=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(C-(c-(C*a+this._elevationStart))/(1-a)),this._elevationTarget=c}this.transform.setElevation(o.B.number(this._elevationStart,this._elevationTarget,a))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){if(!this.terrain&&a.elevation>=0&&a.pitch<=90)return{};const c=a.getCameraLngLat(),C=a.getCameraAltitude(),M=this.terrain?this.terrain.getElevationForLngLatZoom(c,a.zoom):0;if(C<M){const k=this.calculateCameraOptionsFromTo(c,M,a.center,a.elevation);return{pitch:k.pitch,zoom:k.zoom}}return{}}_applyUpdatedTransform(a){const c=[];if(c.push(M=>this._elevateCameraIfInsideTerrain(M)),this.transformCameraUpdate&&c.push(M=>this.transformCameraUpdate(M)),!c.length)return;const C=a.clone();for(const M of c){const k=C.clone(),{center:z,zoom:Y,roll:J,pitch:se,bearing:ye,elevation:Te}=M(k);z&&k.setCenter(z),Te!==void 0&&k.setElevation(Te),Y!==void 0&&k.setZoom(Y),J!==void 0&&k.setRoll(J),se!==void 0&&k.setPitch(se),ye!==void 0&&k.setBearing(ye),C.apply(k)}this.transform.apply(C)}_fireMoveEvents(a){this.fire(new o.l("move",a)),this._zooming&&this.fire(new o.l("zoom",a)),this._rotating&&this.fire(new o.l("rotate",a)),this._pitching&&this.fire(new o.l("pitch",a)),this._rolling&&this.fire(new o.l("roll",a))}_afterEase(a,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const C=this._zooming,M=this._rotating,k=this._pitching,z=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,C&&this.fire(new o.l("zoomend",a)),M&&this.fire(new o.l("rotateend",a)),k&&this.fire(new o.l("pitchend",a)),z&&this.fire(new o.l("rollend",a)),this.fire(new o.l("moveend",a))}flyTo(a,c){if(!a.essential&&T.prefersReducedMotion){const Cn=o.O(a,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Cn,c)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cb},a);const C=this._getTransformForUpdate(),M=C.bearing,k=C.pitch,z=C.roll,Y=C.padding,J="bearing"in a?this._normalizeBearing(a.bearing,M):M,se="pitch"in a?+a.pitch:k,ye="roll"in a?this._normalizeBearing(a.roll,z):z,Te="padding"in a?a.padding:C.padding,ke=o.P.convert(a.offset);let Qe=C.centerPoint.add(ke);const et=C.screenPointToLocation(Qe),mt=this.cameraHelper.handleFlyTo(C,{bearing:J,pitch:se,roll:ye,padding:Te,locationAtOffset:et,offsetAsPoint:ke,center:a.center,minZoom:a.minZoom,zoom:a.zoom});let lt=a.curve;const pt=Math.max(C.width,C.height),bt=pt/mt.scaleOfZoom,Bt=mt.pixelPathLength;typeof mt.scaleOfMinZoom=="number"&&(lt=Math.sqrt(pt/mt.scaleOfMinZoom/Bt*2));const kt=lt*lt;function Kt(Cn){const In=(bt*bt-pt*pt+(Cn?-1:1)*kt*kt*Bt*Bt)/(2*(Cn?bt:pt)*kt*Bt);return Math.log(Math.sqrt(In*In+1)-In)}function Ut(Cn){return(Math.exp(Cn)-Math.exp(-Cn))/2}function It(Cn){return(Math.exp(Cn)+Math.exp(-Cn))/2}const nn=Kt(!1);let qt=function(Cn){return It(nn)/It(nn+lt*Cn)},xn=function(Cn){return pt*((It(nn)*(Ut(In=nn+lt*Cn)/It(In))-Ut(nn))/kt)/Bt;var In},Sn=(Kt(!0)-nn)/lt;if(Math.abs(Bt)<2e-6||!isFinite(Sn)){if(Math.abs(pt-bt)<1e-6)return this.easeTo(a,c);const Cn=bt<pt?-1:1;Sn=Math.abs(Math.log(bt/pt))/lt,xn=()=>0,qt=In=>Math.exp(Cn*lt*In)}return a.duration="duration"in a?+a.duration:1e3*Sn/("screenSpeed"in a?+a.screenSpeed/lt:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=M!==J,this._pitching=se!==k,this._rolling=ye!==z,this._padding=!C.isPaddingEqual(Te),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(mt.targetCenter),this._ease(Cn=>{const In=Cn*Sn,Nn=1/qt(In),Rn=xn(In);this._rotating&&C.setBearing(o.B.number(M,J,Cn)),this._pitching&&C.setPitch(o.B.number(k,se,Cn)),this._rolling&&C.setRoll(o.B.number(z,ye,Cn)),this._padding&&(C.interpolatePadding(Y,Te,Cn),Qe=C.centerPoint.add(ke)),mt.easeFunc(Cn,Nn,Rn,Qe),this.terrain&&!a.freezeElevation&&this._updateElevation(Cn),this._applyUpdatedTransform(C),this._fireMoveEvents(c)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,c){var C;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const M=this._onEaseEnd;delete this._onEaseEnd,M.call(this,c)}return a||(C=this.handlers)===null||C===void 0||C.stop(!1),this}_ease(a,c,C){C.animate===!1||C.duration===0?(a(1),c()):(this._easeStart=T.now(),this._easeOptions=C,this._onEaseFrame=a,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,c){a=o.aL(a,-180,180);const C=Math.abs(a-c);return Math.abs(a-360-c)<C&&(a-=360),Math.abs(a+360-c)<C&&(a+=360),a}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(o.Q.convert(a),this.transform.tileZoom):null}}const VA={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Dr{constructor(a=VA){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,c){const C=this._map._getUIString(`AttributionControl.${c}`);a.title=C,a.setAttribute("aria-label",C)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(M=>typeof M!="string"?"":M)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const M=this._map.style.stylesheet;this.styleOwner=M.owner,this.styleId=M.id}const c=this._map.style.sourceCaches;for(const M in c){const k=c[M];if(k.used||k.usedForTerrain){const z=k.getSource();z.attribution&&a.indexOf(z.attribution)<0&&a.push(z.attribution)}}a=a.filter(M=>String(M).trim()),a.sort((M,k)=>M.length-k.length),a=a.filter((M,k)=>{for(let z=k+1;z<a.length;z++)if(a[z].indexOf(M)>=0)return!1;return!0});const C=a.join(" | ");C!==this._attribHTML&&(this._attribHTML=C,a.length?(this._innerContainer.innerHTML=P.sanitize(C),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Lr{constructor(a={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const C=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&C.classList.add("maplibregl-compact"):C.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const c=P.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Sh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const c=++this._id;return this._queue.push({callback:a,id:c,cancelled:!1}),c}remove(a){const c=this._currentlyRunning,C=c?this._queue.concat(c):this._queue;for(const M of C)if(M.id===a)return void(M.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const C of c)if(!C.cancelled&&(C.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var td=o.aD([{name:"a_pos3d",type:"Int16",components:3}]);class Eh extends o.E{constructor(a){super(),this._lastTilesetChange=T.now(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=a._source.tileSize*2**this.deltaZoom,a.usedForTerrain=!0,a.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,c){this.sourceCache.update(a,c),this._renderableTilesKeys=[];const C={};for(const M of $e(a,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))C[M.key]=!0,this._renderableTilesKeys.push(M.key),this._tiles[M.key]||(M.terrainRttPosMatrix32f=new Float64Array(16),o.bO(M.terrainRttPosMatrix32f,0,o.Z,o.Z,0,0,1),this._tiles[M.key]=new pe(M,this.tileSize),this._lastTilesetChange=T.now());for(const M in this._tiles)C[M]||delete this._tiles[M]}freeRtt(a){for(const c in this._tiles){const C=this._tiles[c];(!a||C.tileID.equals(a)||C.tileID.isChildOf(a)||a.isChildOf(C.tileID))&&(C.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a,c){return c?this._getTerrainCoordsForTileRanges(a,c):this._getTerrainCoordsForRegularTile(a)}_getTerrainCoordsForRegularTile(a){const c={};for(const C of this._renderableTilesKeys){const M=this._tiles[C].tileID,k=a.clone(),z=o.b2();if(M.canonical.equals(a.canonical))o.bO(z,0,o.Z,o.Z,0,0,1);else if(M.canonical.isChildOf(a.canonical)){const Y=M.canonical.z-a.canonical.z,J=M.canonical.x-(M.canonical.x>>Y<<Y),se=M.canonical.y-(M.canonical.y>>Y<<Y),ye=o.Z>>Y;o.bO(z,0,ye,ye,0,0,1),o.L(z,z,[-J*ye,-se*ye,0])}else{if(!a.canonical.isChildOf(M.canonical))continue;{const Y=a.canonical.z-M.canonical.z,J=a.canonical.x-(a.canonical.x>>Y<<Y),se=a.canonical.y-(a.canonical.y>>Y<<Y),ye=o.Z>>Y;o.bO(z,0,o.Z,o.Z,0,0,1),o.L(z,z,[J*ye,se*ye,0]),o.M(z,z,[1/2**Y,1/2**Y,0])}}k.terrainRttPosMatrix32f=new Float32Array(z),c[C]=k}return c}_getTerrainCoordsForTileRanges(a,c){const C={};for(const M of this._renderableTilesKeys){const k=this._tiles[M].tileID;if(!this._isWithinTileRanges(k,c))continue;const z=a.clone(),Y=o.b2();if(k.canonical.z===a.canonical.z){const J=a.canonical.x-k.canonical.x,se=a.canonical.y-k.canonical.y;o.bO(Y,0,o.Z,o.Z,0,0,1),o.L(Y,Y,[J*o.Z,se*o.Z,0])}else if(k.canonical.z>a.canonical.z){const J=k.canonical.z-a.canonical.z,se=k.canonical.x-(k.canonical.x>>J<<J),ye=k.canonical.y-(k.canonical.y>>J<<J),Te=a.canonical.x-(k.canonical.x>>J),ke=a.canonical.y-(k.canonical.y>>J),Qe=o.Z>>J;o.bO(Y,0,Qe,Qe,0,0,1),o.L(Y,Y,[-se*Qe+Te*o.Z,-ye*Qe+ke*o.Z,0])}else{const J=a.canonical.z-k.canonical.z,se=a.canonical.x-(a.canonical.x>>J<<J),ye=a.canonical.y-(a.canonical.y>>J<<J),Te=(a.canonical.x>>J)-k.canonical.x,ke=(a.canonical.y>>J)-k.canonical.y,Qe=o.Z<<J;o.bO(Y,0,Qe,Qe,0,0,1),o.L(Y,Y,[se*o.Z+Te*Qe,ye*o.Z+ke*Qe,0])}z.terrainRttPosMatrix32f=new Float32Array(Y),C[M]=z}return C}getSourceTile(a,c){const C=this.sourceCache._source;let M=a.overscaledZ-this.deltaZoom;if(M>C.maxzoom&&(M=C.maxzoom),M<C.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(M).key);let k=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!k||!k.dem)&&c)for(;M>=C.minzoom&&(!k||!k.dem);)k=this.sourceCache.getTileByID(a.scaledTo(M--).key);return k}anyTilesAfterTime(a=Date.now()){return this._lastTilesetChange>=a}_isWithinTileRanges(a,c){return c[a.canonical.z]&&a.canonical.x>=c[a.canonical.z].minTileX&&a.canonical.x<=c[a.canonical.z].maxTileX&&a.canonical.y>=c[a.canonical.z].minTileY&&a.canonical.y<=c[a.canonical.z].maxTileY}}class Aa{constructor(a,c,C){this._meshCache={},this.painter=a,this.sourceCache=new Eh(c),this.options=C,this.exaggeration=typeof C.exaggeration=="number"?C.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,c,C,M=o.Z){var k;if(!(c>=0&&c<M&&C>=0&&C<M))return 0;const z=this.getTerrainData(a),Y=(k=z.tile)===null||k===void 0?void 0:k.dem;if(!Y)return 0;const J=o.cf([],[c/M*o.Z,C/M*o.Z],z.u_terrain_matrix),se=[J[0]*Y.dim,J[1]*Y.dim],ye=Math.floor(se[0]),Te=Math.floor(se[1]),ke=se[0]-ye,Qe=se[1]-Te;return Y.get(ye,Te)*(1-ke)*(1-Qe)+Y.get(ye+1,Te)*ke*(1-Qe)+Y.get(ye,Te+1)*(1-ke)*Qe+Y.get(ye+1,Te+1)*ke*Qe}getElevationForLngLatZoom(a,c){if(!o.cg(c,a.wrap()))return 0;const{tileID:C,mercatorX:M,mercatorY:k}=this._getOverscaledTileIDFromLngLatZoom(a,c);return this.getElevation(C,M%o.Z,k%o.Z,o.Z)}getElevation(a,c,C,M=o.Z){return this.getDEMElevation(a,c,C,M)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const M=this.painter.context,k=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ie(M,k,M.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ie(M,new o.R({width:1,height:1}),M.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.at([])}const c=this.sourceCache.getSourceTile(a,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const M=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new ie(M,c.dem.getPixels(),M.gl.RGBA,{premultiply:!1}),c.demTexture.bind(M.gl.NEAREST,M.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const C=c&&c+c.tileID.key+a.key;if(C&&!this._demMatrixCache[C]){const M=this.sourceCache.sourceCache._source.maxzoom;let k=a.canonical.z-c.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=M?k=a.canonical.z-M:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const z=a.canonical.x-(a.canonical.x>>k<<k),Y=a.canonical.y-(a.canonical.y>>k<<k),J=o.ch(new Float64Array(16),[1/(o.Z<<k),1/(o.Z<<k),0]);o.L(J,J,[z*o.Z,Y*o.Z,0]),this._demMatrixCache[a.key]={matrix:J,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:C?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(a){const c=this.painter,C=c.width/devicePixelRatio,M=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===C&&this._fbo.height===M||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ie(c.context,{width:C,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ie(c.context,{width:C,height:M,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(C,M,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,C,M))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let k=0,z=0;k<this._coordsTextureSize;k++)for(let Y=0;Y<this._coordsTextureSize;Y++,z+=4)c[z+0]=255&Y,c[z+1]=255&k,c[z+2]=Y>>8<<4|k>>8,c[z+3]=0;const C=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),M=new ie(a,C,a.gl.RGBA,{premultiply:!1});return M.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=M,M}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),C=this.painter.context,M=C.gl,k=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),z=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),Y=Math.round(this.painter.height/devicePixelRatio);C.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(k,Y-z-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),C.bindFramebuffer.set(null);const J=c[0]+(c[2]>>4<<8),se=c[1]+((15&c[2])<<8),ye=this.coordsIndex[255-c[3]],Te=ye&&this.sourceCache.getTileByID(ye);if(!Te)return null;const ke=this._coordsTextureSize,Qe=(1<<Te.tileID.canonical.z)*ke;return new o.$((Te.tileID.canonical.x*ke+J)/Qe+Te.tileID.wrap,(Te.tileID.canonical.y*ke+se)/Qe,this.getElevation(Te.tileID,J,se,ke))}depthAtPoint(a){const c=new Uint8Array(4),C=this.painter.context,M=C.gl;return C.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),M.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,c),C.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(a){var c;const C=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,M=C&&a.canonical.y===0,k=C&&a.canonical.y===(1<<a.canonical.z)-1,z=`m_${M?"n":""}_${k?"s":""}`;if(this._meshCache[z])return this._meshCache[z];const Y=this.painter.context,J=new o.ci,se=new o.aH,ye=this.meshSize,Te=o.Z/ye,ke=ye*ye;for(let It=0;It<=ye;It++)for(let nn=0;nn<=ye;nn++)J.emplaceBack(nn*Te,It*Te,0);for(let It=0;It<ke;It+=ye+1)for(let nn=0;nn<ye;nn++)se.emplaceBack(nn+It,ye+nn+It+1,ye+nn+It+2),se.emplaceBack(nn+It,ye+nn+It+2,nn+It+1);const Qe=J.length,et=Qe+(ye+1),mt=(ye+1)*ye,lt=M?o.b9:0,pt=M?0:1,bt=k?o.ba:o.Z,Bt=k?0:1;for(let It=0;It<=ye;It++)J.emplaceBack(It*Te,lt,pt);for(let It=0;It<=ye;It++)J.emplaceBack(It*Te,bt,Bt);for(let It=0;It<ye;It++)se.emplaceBack(mt+It,et+It,et+It+1),se.emplaceBack(mt+It,et+It+1,mt+It+1),se.emplaceBack(0+It,Qe+It+1,Qe+It),se.emplaceBack(0+It,0+It+1,Qe+It+1);const kt=J.length,Kt=kt+2*(ye+1);for(const It of[0,1])for(let nn=0;nn<=ye;nn++)for(const qt of[0,1])J.emplaceBack(It*o.Z,nn*Te,qt);for(let It=0;It<2*ye;It+=2)se.emplaceBack(kt+It,kt+It+1,kt+It+3),se.emplaceBack(kt+It,kt+It+3,kt+It+2),se.emplaceBack(Kt+It,Kt+It+3,Kt+It+1),se.emplaceBack(Kt+It,Kt+It+2,Kt+It+3);const Ut=new zl(Y.createVertexBuffer(J,td.members),Y.createIndexBuffer(se),o.aG.simpleSegment(0,0,J.length,se.length));return this._meshCache[z]=Ut,Ut}getMeshFrameDelta(a){return 2*Math.PI*o.br/Math.pow(2,Math.max(a,0))/5}getMinTileElevationForLngLatZoom(a,c){var C;const{tileID:M}=this._getOverscaledTileIDFromLngLatZoom(a,c);return(C=this.getMinMaxElevation(M).minElevation)!==null&&C!==void 0?C:0}getMinMaxElevation(a){const c=this.getTerrainData(a).tile,C={minElevation:null,maxElevation:null};return c&&c.dem&&(C.minElevation=c.dem.min*this.exaggeration,C.maxElevation=c.dem.max*this.exaggeration),C}_getOverscaledTileIDFromLngLatZoom(a,c){const C=o.$.fromLngLat(a.wrap()),M=(1<<c)*o.Z,k=C.x*M,z=C.y*M,Y=Math.floor(k/o.Z),J=Math.floor(z/o.Z);return{tileID:new o.Y(c,0,c,Y,J),mercatorX:k,mercatorY:z}}}class ku{constructor(a,c,C){this._context=a,this._size=c,this._tileSize=C,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),C=new ie(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return C.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(C.texture),{id:a,fbo:c,texture:C,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>a.id!==c),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const Pl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Bh{constructor(a,c){this.painter=a,this.terrain=c,this.pool=new ku(a.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(C=>!a._layers[C].isHidden(c)),this._coordsAscending={};for(const C in a.sourceCaches){this._coordsAscending[C]={};const M=a.sourceCaches[C].getVisibleCoordinates(),k=a.sourceCaches[C].getSource(),z=k instanceof ar?k.terrainTileRanges:null;for(const Y of M){const J=this.terrain.sourceCache.getTerrainCoords(Y,z);for(const se in J)this._coordsAscending[C][se]||(this._coordsAscending[C][se]=[]),this._coordsAscending[C][se].push(J[se])}}this._coordsAscendingStr={};for(const C of a._order){const M=a._layers[C],k=M.source;if(Pl[M.type]&&!this._coordsAscendingStr[k]){this._coordsAscendingStr[k]={};for(const z in this._coordsAscending[k])this._coordsAscendingStr[k][z]=this._coordsAscending[k][z].map(Y=>Y.key).sort().join()}}for(const C of this._renderableTiles)for(const M in this._coordsAscendingStr){const k=this._coordsAscendingStr[M][C.tileID.key];k&&k!==C.rttCoords[M]&&(C.rtt=[])}}renderLayer(a,c){if(a.isHidden(this.painter.transform.zoom))return!1;const C=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),M=a.type,k=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(Pl[M]&&(this._prevType&&Pl[this._prevType]||this._stacks.push([]),this._prevType=M,this._stacks[this._stacks.length-1].push(a.id),!z))return!0;if(Pl[this._prevType]||Pl[M]&&z){this._prevType=M;const Y=this._stacks.length-1,J=this._stacks[Y]||[];for(const se of this._renderableTiles){if(this.pool.isFull()&&(Ou(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(se),se.rtt[Y]){const Te=this.pool.getObjectForId(se.rtt[Y].id);if(Te.stamp===se.rtt[Y].stamp){this.pool.useObject(Te);continue}}const ye=this.pool.getOrCreateFreeObject();this.pool.useObject(ye),this.pool.stampObject(ye),se.rtt[Y]={id:ye.id,stamp:ye.stamp},k.context.bindFramebuffer.set(ye.fbo.framebuffer),k.context.clear({color:o.b7.transparent,stencil:0}),k.currentStencilSource=void 0;for(let Te=0;Te<J.length;Te++){const ke=k.style._layers[J[Te]],Qe=ke.source?this._coordsAscending[ke.source][se.tileID.key]:[se.tileID];k.context.viewport.set([0,0,ye.fbo.width,ye.fbo.height]),k._renderTileClippingMasks(ke,Qe,!0),k.renderLayer(k,k.style.sourceCaches[ke.source],ke,Qe,C),ke.source&&(se.rttCoords[ke.source]=this._coordsAscendingStr[ke.source][se.tileID.key])}}return Ou(this.painter,this.terrain,this._rttTiles,C),this._rttTiles=[],this.pool.freeAllObjects(),Pl[M]}return!1}}const $A={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Vs=p,vs={hash:!1,interactive:!0,bearingSnap:7,attributionControl:VA,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},$s={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class HA{constructor(a,c,C=!1){this.mousedown=k=>{this.startMove(k,P.mousePos(this.element,k)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=k=>{this.move(k,P.mousePos(this.element,k))},this.mouseup=k=>{this._rotatePitchHanlder.dragEnd(k),this.offTemp()},this.touchstart=k=>{k.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,k.targetTouches)[0],this.startMove(k,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=k=>{k.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,k.targetTouches)[0],this.move(k,this._lastPos))},this.touchend=k=>{k.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const M=new af;this._rotatePitchHanlder=new Ca({clickTolerance:3,move:(k,z)=>{const Y=c.getBoundingClientRect(),J=new o.P((Y.bottom-Y.top)/2,(Y.right-Y.left)/2);return{bearingDelta:o.ca(new o.P(k.x,z.y),z,J),pitchDelta:C?-.5*(z.y-k.y):void 0}},moveStateManager:M,enable:!0,assignEvents:()=>{}}),this.map=a,P.addEventListener(c,"mousedown",this.mousedown),P.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(c,"touchcancel",this.reset)}startMove(a,c){this._rotatePitchHanlder.dragStart(a,c),P.disableDrag()}move(a,c){const C=this.map,{bearingDelta:M,pitchDelta:k}=this._rotatePitchHanlder.dragMove(a,c)||{};M&&C.setBearing(C.getBearing()+M),k&&C.setPitch(C.getPitch()+k)}off(){const a=this.element;P.removeEventListener(a,"mousedown",this.mousedown),P.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let du;function bl(O,a,c){const C=new o.Q(O.lng,O.lat);if(O=new o.Q(O.lng,O.lat),a){const M=new o.Q(O.lng-360,O.lat),k=new o.Q(O.lng+360,O.lat),z=c.locationToScreenPoint(O).distSqr(a);c.locationToScreenPoint(M).distSqr(a)<z?O=M:c.locationToScreenPoint(k).distSqr(a)<z&&(O=k)}for(;Math.abs(O.lng-c.center.lng)>180;){const M=c.locationToScreenPoint(O);if(M.x>=0&&M.y>=0&&M.x<=c.width&&M.y<=c.height)break;O.lng>c.center.lng?O.lng-=360:O.lng+=360}return O.lng!==C.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(O))?O:C}const iA={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Kc(O,a,c){const C=O.classList;for(const M in iA)C.remove(`maplibregl-${c}-anchor-${M}`);C.add(`maplibregl-${c}-anchor-${a}`)}class ql extends o.E{constructor(a){if(super(),this._onKeyPress=c=>{const C=c.code,M=c.charCode||c.keyCode;C!=="Space"&&C!=="Enter"&&M!==32&&M!==13||this.togglePopup()},this._onMapClick=c=>{const C=c.originalEvent.target,M=this._element;this._popup&&(C===M||M.contains(C))&&this.togglePopup()},this._update=c=>{var C;if(!this._map)return;const M=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!M)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?bl(this._lngLat,this._flatPos,this._map.transform):(C=this._lngLat)===null||C===void 0?void 0:C.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let k="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?k=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(k=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let z="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?z="rotateX(0deg)":this._pitchAlignment==="map"&&(z=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${iA[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${z} ${k}`),T.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const C=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=C}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(a==null?void 0:a.opacity,a==null?void 0:a.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const c=P.createNS("http://www.w3.org/2000/svg","svg"),C=41,M=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${C}px`),c.setAttributeNS(null,"width",`${M}px`),c.setAttributeNS(null,"viewBox",`0 0 ${M} ${C}`);const k=P.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const z=P.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const Y=P.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Y.setAttributeNS(null,"fill","#000000");const J=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pt of J){const bt=P.createNS("http://www.w3.org/2000/svg","ellipse");bt.setAttributeNS(null,"opacity","0.04"),bt.setAttributeNS(null,"cx","10.5"),bt.setAttributeNS(null,"cy","5.80029008"),bt.setAttributeNS(null,"rx",pt.rx),bt.setAttributeNS(null,"ry",pt.ry),Y.appendChild(bt)}const se=P.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill",this._color);const ye=P.createNS("http://www.w3.org/2000/svg","path");ye.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),se.appendChild(ye);const Te=P.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"opacity","0.25"),Te.setAttributeNS(null,"fill","#000000");const ke=P.createNS("http://www.w3.org/2000/svg","path");ke.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Te.appendChild(ke);const Qe=P.createNS("http://www.w3.org/2000/svg","g");Qe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Qe.setAttributeNS(null,"fill","#FFFFFF");const et=P.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"transform","translate(8.0, 8.0)");const mt=P.createNS("http://www.w3.org/2000/svg","circle");mt.setAttributeNS(null,"fill","#000000"),mt.setAttributeNS(null,"opacity","0.25"),mt.setAttributeNS(null,"cx","5.5"),mt.setAttributeNS(null,"cy","5.5"),mt.setAttributeNS(null,"r","5.4999962");const lt=P.createNS("http://www.w3.org/2000/svg","circle");lt.setAttributeNS(null,"fill","#FFFFFF"),lt.setAttributeNS(null,"cx","5.5"),lt.setAttributeNS(null,"cy","5.5"),lt.setAttributeNS(null,"r","5.4999962"),et.appendChild(mt),et.appendChild(lt),z.appendChild(Y),z.appendChild(se),z.appendChild(Te),z.appendChild(Qe),z.appendChild(et),c.appendChild(z),c.setAttributeNS(null,"height",C*this._scale+"px"),c.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Kc(this._element,this._anchor,"marker"),a&&a.className)for(const c of a.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),a.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.Q.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const M=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[M,-1*(38.1-13.5+M)],"bottom-right":[-M,-1*(38.1-13.5+M)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var c,C;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const Te=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Te&&(this._element.style.opacity=Te))}if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const M=this._map,k=M.terrain.depthAtPoint(this._pos),z=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,z)-k<.006)return void(this._element.style.opacity=this._opacity);const Y=-this._offset.y/M.transform.pixelsPerMeter,J=Math.sin(M.getPitch()*Math.PI/180)*Y,se=M.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),ye=M.transform.lngLatToCameraDepth(this._lngLat,z+J)-se>.006;!((C=this._popup)===null||C===void 0)&&C.isOpen()&&ye&&this._popup.remove(),this._element.style.opacity=ye?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,c){return(this._opacity===void 0||a===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const ba={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Hs=0,hu=!1;const fu={maxWidth:100,unit:"metric"};function ZA(O,a,c){const C=c&&c.maxWidth||100,M=O._container.clientHeight/2,k=O._container.clientWidth/2,z=O.unproject([k-C/2,M]),Y=O.unproject([k+C/2,M]),J=Math.round(O.project(Y).x-O.project(z).x),se=Math.min(C,J,O._container.clientWidth),ye=z.distanceTo(Y);if(c&&c.unit==="imperial"){const Te=3.2808*ye;Te>5280?Tu(a,se,Te/5280,O._getUIString("ScaleControl.Miles")):Tu(a,se,Te,O._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Tu(a,se,ye/1852,O._getUIString("ScaleControl.NauticalMiles")):ye>=1e3?Tu(a,se,ye/1e3,O._getUIString("ScaleControl.Kilometers")):Tu(a,se,ye,O._getUIString("ScaleControl.Meters"))}function Tu(O,a,c,C){const M=function(k){const z=Math.pow(10,`${Math.floor(k)}`.length-1);let Y=k/z;return Y=Y>=10?10:Y>=5?5:Y>=3?3:Y>=2?2:Y>=1?1:function(J){const se=Math.pow(10,Math.ceil(-Math.log(J)/Math.LN10));return Math.round(J*se)/se}(Y),z*Y}(c);O.style.width=a*(M/c)+"px",O.innerHTML=`${M}&nbsp;${C}`}const Rc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},EA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Kl(O){if(O){if(typeof O=="number"){const a=Math.round(Math.abs(O)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,O),"top-left":new o.P(a,a),"top-right":new o.P(-a,a),bottom:new o.P(0,-O),"bottom-left":new o.P(a,-a),"bottom-right":new o.P(-a,-a),left:new o.P(O,0),right:new o.P(-O,0)}}if(O instanceof o.P||Array.isArray(O)){const a=o.P.convert(O);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:o.P.convert(O.center||[0,0]),top:o.P.convert(O.top||[0,0]),"top-left":o.P.convert(O["top-left"]||[0,0]),"top-right":o.P.convert(O["top-right"]||[0,0]),bottom:o.P.convert(O.bottom||[0,0]),"bottom-left":o.P.convert(O["bottom-left"]||[0,0]),"bottom-right":o.P.convert(O["bottom-right"]||[0,0]),left:o.P.convert(O.left||[0,0]),right:o.P.convert(O.right||[0,0])}}return Kl(new o.P(0,0))}const Bd=p;l.AJAXError=o.cm,l.Event=o.l,l.Evented=o.E,l.LngLat=o.Q,l.MercatorCoordinate=o.$,l.Point=o.P,l.addProtocol=o.cn,l.config=o.a,l.removeProtocol=o.co,l.AttributionControl=Dr,l.BoxZoomHandler=ns,l.CanvasSource=mn,l.CooperativeGesturesHandler=qA,l.DoubleClickZoomHandler=fc,l.DragPanHandler=cu,l.DragRotateHandler=gs,l.EdgeInsets=Do,l.FullscreenControl=class extends o.E{constructor(O={}){super(),this._onFullscreenChange=()=>{var a;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=c==null?void 0:c.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,O&&O.container&&(O.container instanceof HTMLElement?this._container=O.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const O=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",O).setAttribute("aria-hidden","true"),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=rn,l.GeolocateControl=class extends o.E{constructor(O){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",a)),this._finish()}},this._updateCamera=a=>{const c=new o.Q(a.coords.longitude,a.coords.latitude),C=a.coords.accuracy,M=this._map.getBearing(),k=o.e({bearing:M},this.options.fitBoundsOptions),z=Lt.fromLngLat(c,C);this._map.fitBounds(z,k,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const c=new o.Q(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&hu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ql({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ql({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},ba,O)}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(a=!1){if(du!==void 0&&!a)return du;if(window.navigator.permissions===void 0)return du=!!window.navigator.geolocation,du;try{du=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{du=!!window.navigator.geolocation}return du})}().then(a=>this._finishSetupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Hs=0,hu=!1}_isOutOfMapMaxBounds(O){const a=this._map.getMaxBounds(),c=O.coords;return a&&(c.longitude<a.getWest()||c.longitude>a.getEast()||c.latitude<a.getSouth()||c.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const O=this._map.getBounds(),a=O.getSouthEast(),c=O.getNorthEast(),C=a.distanceTo(c),M=Math.ceil(this._accuracy/(C/this._map._container.clientHeight)*2);this._circleElement.style.width=`${M}px`,this._circleElement.style.height=`${M}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Hs--,hu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let O;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Hs++,Hs>1?(O={maximumAge:6e5,timeout:0},hu=!0):(O=this.options.positionOptions,hu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,O)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var O;const a=(O=this._map.getProjection())===null||O===void 0?void 0:O.type;this._map.setProjection(a!=="mercator"&&a?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var O;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((O=this._map.getProjection())===null||O===void 0?void 0:O.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=P.create("button","maplibregl-ctrl-globe",this._container),P.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=dc,l.ImageSource=ar,l.KeyboardHandler=wo,l.LngLatBounds=Lt,l.LogoControl=Lr,l.Map=class extends Al{constructor(O){var a,c;o.cj.mark(o.ck.create);const C=Object.assign(Object.assign(Object.assign({},vs),O),{canvasContextAttributes:Object.assign(Object.assign({},vs.canvasContextAttributes),O.canvasContextAttributes)});if(C.minZoom!=null&&C.maxZoom!=null&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(C.minPitch!=null&&C.maxPitch!=null&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(C.minPitch!=null&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(C.maxPitch!=null&&C.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const M=new Mo,k=new Ta;if(C.minZoom!==void 0&&M.setMinZoom(C.minZoom),C.maxZoom!==void 0&&M.setMaxZoom(C.maxZoom),C.minPitch!==void 0&&M.setMinPitch(C.minPitch),C.maxPitch!==void 0&&M.setMaxPitch(C.maxPitch),C.renderWorldCopies!==void 0&&M.setRenderWorldCopies(C.renderWorldCopies),super(M,k,{bearingSnap:C.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Sh,this._controls=[],this._mapId=o.a4(),this._contextLost=Y=>{Y.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:Y}))},this._contextRestored=Y=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:Y}))},this._onMapScroll=Y=>{if(Y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=C.interactive,this._maxTileCacheSize=C.maxTileCacheSize,this._maxTileCacheZoomLevels=C.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},C.canvasContextAttributes),this._trackResize=C.trackResize===!0,this._bearingSnap=C.bearingSnap,this._centerClampedToGround=C.centerClampedToGround,this._refreshExpiredTiles=C.refreshExpiredTiles===!0,this._fadeDuration=C.fadeDuration,this._crossSourceCollisions=C.crossSourceCollisions===!0,this._collectResourceTiming=C.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},$A),C.locale),this._clickTolerance=C.clickTolerance,this._overridePixelRatio=C.pixelRatio,this._maxCanvasSize=C.maxCanvasSize,this.transformCameraUpdate=C.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=C.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=te.addThrottleControl(()=>this.isMoving()),this._requestManager=new V(C.transformRequest),typeof C.container=="string"){if(this._container=document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(C.maxBounds&&this.setMaxBounds(C.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let Y=!1;const J=Jd(se=>{this._trackResize&&!this._removed&&(this.resize(se),this.redraw())},50);this._resizeObserver=new ResizeObserver(se=>{Y?J(se):Y=!0}),this._resizeObserver.observe(this._container)}this.handlers=new SA(this,C),this._hash=C.hash&&new dc(typeof C.hash=="string"&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,roll:C.roll}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,o.e({},C.fitBoundsOptions,{duration:0}))));const z=typeof C.style=="string"||((c=(a=C.style)===null||a===void 0?void 0:a.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,z),this._localIdeographFontFamily=C.localIdeographFontFamily,this._validateStyle=C.validateStyle,C.style&&this.setStyle(C.style,{localIdeographFontFamily:C.localIdeographFontFamily}),C.attributionControl&&this.addControl(new Dr(typeof C.attributionControl=="boolean"?void 0:C.attributionControl)),C.maplibreLogo&&this.addControl(new Lr,C.logoPosition),this.on("style.load",()=>{if(z||this._resizeTransform(),this.transform.unmodified){const Y=o.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(Y)}}),this.on("data",Y=>{this._update(Y.dataType==="style"),this.fire(new o.l(`${Y.dataType}data`,Y))}),this.on("dataloading",Y=>{this.fire(new o.l(`${Y.dataType}dataloading`,Y))}),this.on("dataabort",Y=>{this.fire(new o.l("sourcedataabort",Y))})}_getMapId(){return this._mapId}addControl(O,a){if(a===void 0&&(a=O.getDefaultPosition?O.getDefaultPosition():"top-right"),!O||!O.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=O.onAdd(this);this._controls.push(O);const C=this._controlPositions[a];return a.indexOf("bottom")!==-1?C.insertBefore(c,C.firstChild):C.appendChild(c),this}removeControl(O){if(!O||!O.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(O);return a>-1&&this._controls.splice(a,1),O.onRemove(this),this}hasControl(O){return this._controls.indexOf(O)>-1}calculateCameraOptionsFromTo(O,a,c,C){return C==null&&this.terrain&&(C=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(O,a,c,C)}resize(O,a=!0){const[c,C]=this._containerDimensions(),M=this._getClampedPixelRatio(c,C);if(this._resizeCanvas(c,C,M),this.painter.resize(c,C,M),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const Y=this._getClampedPixelRatio(c,C);this._resizeCanvas(c,C,Y),this.painter.resize(c,C,Y)}this._resizeTransform(a);const k=!this._moving;return k&&(this.stop(),this.fire(new o.l("movestart",O)).fire(new o.l("move",O))),this.fire(new o.l("resize",O)),k&&this.fire(new o.l("moveend",O)),this}_resizeTransform(O=!0){var a;const[c,C]=this._containerDimensions();this.transform.resize(c,C,O),(a=this._requestedCameraState)===null||a===void 0||a.resize(c,C,O)}_getClampedPixelRatio(O,a){const{0:c,1:C}=this._maxCanvasSize,M=this.getPixelRatio(),k=O*M,z=a*M;return Math.min(k>c?c/k:1,z>C?C/z:1)*M}getPixelRatio(){var O;return(O=this._overridePixelRatio)!==null&&O!==void 0?O:devicePixelRatio}setPixelRatio(O){this._overridePixelRatio=O,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(O){return this.transform.setMaxBounds(Lt.convert(O)),this._update()}setMinZoom(O){if((O=O??-2)>=-2&&O<=this.transform.maxZoom)return this.transform.setMinZoom(O),this._update(),this.getZoom()<O&&this.setZoom(O),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(O){if((O=O??22)>=this.transform.minZoom)return this.transform.setMaxZoom(O),this._update(),this.getZoom()>O&&this.setZoom(O),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(O){if((O=O??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(O>=0&&O<=this.transform.maxPitch)return this.transform.setMinPitch(O),this._update(),this.getPitch()<O&&this.setPitch(O),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(O){if((O=O??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(O>=this.transform.minPitch)return this.transform.setMaxPitch(O),this._update(),this.getPitch()>O&&this.setPitch(O),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(O){return this.transform.setRenderWorldCopies(O),this._update()}project(O){return this.transform.locationToScreenPoint(o.Q.convert(O),this.style&&this.terrain)}unproject(O){return this.transform.screenPointToLocation(o.P.convert(O),this.terrain)}isMoving(){var O;return this._moving||((O=this.handlers)===null||O===void 0?void 0:O.isMoving())}isZooming(){var O;return this._zooming||((O=this.handlers)===null||O===void 0?void 0:O.isZooming())}isRotating(){var O;return this._rotating||((O=this.handlers)===null||O===void 0?void 0:O.isRotating())}_createDelegatedListener(O,a,c){if(O==="mouseenter"||O==="mouseover"){let C=!1;return{layers:a,listener:c,delegates:{mousemove:k=>{const z=a.filter(J=>this.getLayer(J)),Y=z.length!==0?this.queryRenderedFeatures(k.point,{layers:z}):[];Y.length?C||(C=!0,c.call(this,new Ti(O,this,k.originalEvent,{features:Y}))):C=!1},mouseout:()=>{C=!1}}}}if(O==="mouseleave"||O==="mouseout"){let C=!1;return{layers:a,listener:c,delegates:{mousemove:z=>{const Y=a.filter(J=>this.getLayer(J));(Y.length!==0?this.queryRenderedFeatures(z.point,{layers:Y}):[]).length?C=!0:C&&(C=!1,c.call(this,new Ti(O,this,z.originalEvent)))},mouseout:z=>{C&&(C=!1,c.call(this,new Ti(O,this,z.originalEvent)))}}}}{const C=M=>{const k=a.filter(Y=>this.getLayer(Y)),z=k.length!==0?this.queryRenderedFeatures(M.point,{layers:k}):[];z.length&&(M.features=z,c.call(this,M),delete M.features)};return{layers:a,listener:c,delegates:{[O]:C}}}}_saveDelegatedListener(O,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[O]=this._delegatedListeners[O]||[],this._delegatedListeners[O].push(a)}_removeDelegatedListener(O,a,c){if(!this._delegatedListeners||!this._delegatedListeners[O])return;const C=this._delegatedListeners[O];for(let M=0;M<C.length;M++){const k=C[M];if(k.listener===c&&k.layers.length===a.length&&k.layers.every(z=>a.includes(z))){for(const z in k.delegates)this.off(z,k.delegates[z]);return void C.splice(M,1)}}}on(O,a,c){if(c===void 0)return super.on(O,a);const C=typeof a=="string"?[a]:a,M=this._createDelegatedListener(O,C,c);this._saveDelegatedListener(O,M);for(const k in M.delegates)this.on(k,M.delegates[k]);return{unsubscribe:()=>{this._removeDelegatedListener(O,C,c)}}}once(O,a,c){if(c===void 0)return super.once(O,a);const C=typeof a=="string"?[a]:a,M=this._createDelegatedListener(O,C,c);for(const k in M.delegates){const z=M.delegates[k];M.delegates[k]=(...Y)=>{this._removeDelegatedListener(O,C,c),z(...Y)}}this._saveDelegatedListener(O,M);for(const k in M.delegates)this.once(k,M.delegates[k]);return this}off(O,a,c){return c===void 0?super.off(O,a):(this._removeDelegatedListener(O,typeof a=="string"?[a]:a,c),this)}queryRenderedFeatures(O,a){if(!this.style)return[];let c;const C=O instanceof o.P||Array.isArray(O),M=C?O:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(C?{}:O)||{},M instanceof o.P||typeof M[0]=="number")c=[o.P.convert(M)];else{const k=o.P.convert(M[0]),z=o.P.convert(M[1]);c=[k,new o.P(z.x,k.y),z,new o.P(k.x,z.y),k]}return this.style.queryRenderedFeatures(c,a,this.transform)}querySourceFeatures(O,a){return this.style.querySourceFeatures(O,a)}setStyle(O,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&O?(this._diffStyle(O,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(O,a))}setTransformRequest(O){return this._requestManager.setTransformRequest(O),this}_getUIString(O){const a=this._locale[O];if(a==null)throw new Error(`Missing UI string '${O}'`);return a}_updateStyle(O,a){var c,C;if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(O,a));const M=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!O)),O?(this.style=new Yc(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof O=="string"?this.style.loadURL(O,a,M):this.style.loadJSON(O,a,M),this):((C=(c=this.style)===null||c===void 0?void 0:c.projection)===null||C===void 0||C.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Yc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(O,a){if(typeof O=="string"){const c=this._requestManager.transformRequest(O,"Style");o.j(c,new AbortController).then(C=>{this._updateDiff(C.data,a)}).catch(C=>{C&&this.fire(new o.k(C))})}else typeof O=="object"&&this._updateDiff(O,a)}_updateDiff(O,a){try{this.style.setState(O,a)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(O,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(O,a){return this._lazyInitEmptyStyle(),this.style.addSource(O,a),this._update(!0)}isSourceLoaded(O){const a=this.style&&this.style.sourceCaches[O];if(a!==void 0)return a.loaded();this.fire(new o.k(new Error(`There is no source with ID '${O}'`)))}setTerrain(O){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),O){const a=this.style.sourceCaches[O.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${O.source}`);this.terrain===null&&a.reload();for(const c in this.style._layers){const C=this.style._layers[c];C.type==="hillshade"&&C.source===O.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Aa(this.painter,a,O),this.painter.renderToTexture=new Bh(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var C;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==O.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((C=c.source)===null||C===void 0?void 0:C.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:O})),this}getTerrain(){var O,a;return(a=(O=this.terrain)===null||O===void 0?void 0:O.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const O=this.style&&this.style.sourceCaches;for(const a in O){const c=O[a]._tiles;for(const C in c){const M=c[C];if(M.state!=="loaded"&&M.state!=="errored")return!1}}return!0}removeSource(O){return this.style.removeSource(O),this._update(!0)}getSource(O){return this.style.getSource(O)}addImage(O,a,c={}){const{pixelRatio:C=1,sdf:M=!1,stretchX:k,stretchY:z,content:Y,textFitWidth:J,textFitHeight:se}=c;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ye,height:Te,data:ke}=a,Qe=a;return this.style.addImage(O,{data:new o.R({width:ye,height:Te},new Uint8Array(ke)),pixelRatio:C,stretchX:k,stretchY:z,content:Y,textFitWidth:J,textFitHeight:se,sdf:M,version:0,userImage:Qe}),Qe.onAdd&&Qe.onAdd(this,O),this}}{const{width:ye,height:Te,data:ke}=T.getImageData(a);this.style.addImage(O,{data:new o.R({width:ye,height:Te},ke),pixelRatio:C,stretchX:k,stretchY:z,content:Y,textFitWidth:J,textFitHeight:se,sdf:M,version:0})}}updateImage(O,a){const c=this.style.getImage(O);if(!c)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=a instanceof HTMLImageElement||o.b(a)?T.getImageData(a):a,{width:M,height:k,data:z}=C;if(M===void 0||k===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(M!==c.data.width||k!==c.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const Y=!(a instanceof HTMLImageElement||o.b(a));return c.data.replace(z,Y),this.style.updateImage(O,c),this}getImage(O){return this.style.getImage(O)}hasImage(O){return O?!!this.style.getImage(O):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(O){this.style.removeImage(O)}loadImage(O){return te.getImage(this._requestManager.transformRequest(O,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(O,a){return this._lazyInitEmptyStyle(),this.style.addLayer(O,a),this._update(!0)}moveLayer(O,a){return this.style.moveLayer(O,a),this._update(!0)}removeLayer(O){return this.style.removeLayer(O),this._update(!0)}getLayer(O){return this.style.getLayer(O)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(O,a,c){return this.style.setLayerZoomRange(O,a,c),this._update(!0)}setFilter(O,a,c={}){return this.style.setFilter(O,a,c),this._update(!0)}getFilter(O){return this.style.getFilter(O)}setPaintProperty(O,a,c,C={}){return this.style.setPaintProperty(O,a,c,C),this._update(!0)}getPaintProperty(O,a){return this.style.getPaintProperty(O,a)}setLayoutProperty(O,a,c,C={}){return this.style.setLayoutProperty(O,a,c,C),this._update(!0)}getLayoutProperty(O,a){return this.style.getLayoutProperty(O,a)}setGlyphs(O,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(O,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(O,a,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(O,a,c,C=>{C||this._update(!0)}),this}removeSprite(O){return this._lazyInitEmptyStyle(),this.style.removeSprite(O),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(O,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(O,a,c=>{c||this._update(!0)}),this}setLight(O,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(O,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(O,a={}){return this._lazyInitEmptyStyle(),this.style.setSky(O,a),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(O,a){return this.style.setFeatureState(O,a),this._update()}removeFeatureState(O,a){return this.style.removeFeatureState(O,a),this._update()}getFeatureState(O){return this.style.getFeatureState(O)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let O=0,a=0;return this._container&&(O=this._container.clientWidth||400,a=this._container.clientHeight||300),[O,a]}_setupContainer(){const O=this._container;O.classList.add("maplibregl-map");const a=this._canvasContainer=P.create("div","maplibregl-canvas-container",O);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),C=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],C);const M=this._controlContainer=P.create("div","maplibregl-control-container",O),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(z=>{k[z]=P.create("div",`maplibregl-ctrl-${z} `,M)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(O,a,c){this._canvas.width=Math.floor(c*O),this._canvas.height=Math.floor(c*a),this._canvas.style.width=`${O}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const O=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let a=null;this._canvas.addEventListener("webglcontextcreationerror",C=>{a={requestedAttributes:O},C&&(a.statusMessage=C.statusMessage,a.type=C.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,O):this._canvas.getContext("webgl2",O)||this._canvas.getContext("webgl",O),!c){const C="Failed to initialize WebGL";throw a?(a.message=C,new Error(JSON.stringify(a))):new Error(C)}this.painter=new Zc(c,this.transform),U.testSupport(c)}migrateProjection(O,a){super.migrateProjection(O,a),this.painter.transform=O,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(O){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||O,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(O){return this._update(),this._renderTaskQueue.add(O)}_cancelRenderFrame(O){this._renderTaskQueue.remove(O)}_render(O){var a,c,C,M,k;const z=this._idleTriggered?this._fadeDuration:0,Y=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(O),this._removed)return;let J=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Te=this.transform.zoom,ke=T.now();this.style.zoomHistory.update(Te,ke);const Qe=new o.C(Te,{now:ke,fadeDuration:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),et=Qe.crossFadingFactor();et===1&&et===this._crossFadingFactor||(J=!0,this._crossFadingFactor=et),this.style.update(Qe)}const se=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==Y;(C=this.style.projection)===null||C===void 0||C.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((M=this.style.projection)===null||M===void 0?void 0:M.transitionState,(k=this.style.projection)===null||k===void 0?void 0:k.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||se)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,z,this._crossSourceCollisions,se),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:z,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cj.mark(o.ck.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||J)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ye=this._sourcesDirty||this._styleDirty||this._placementDirty;return ye||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||ye||(this._fullyLoaded=!0,o.cj.mark(o.ck.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var O;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),te.removeThrottleControl(this._imageQueueHandle),(O=this._resizeObserver)===null||O===void 0||O.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a!=null&&a.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cj.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,T.frame(this._frameRequest,O=>{o.cj.frame(O),this._frameRequest=null;try{this._render(O)}catch(a){if(!o.cl(a)&&!function(c){return c.message===Zu}(a))throw a}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(O){this._showTileBoundaries!==O&&(this._showTileBoundaries=O,this._update())}get showPadding(){return!!this._showPadding}set showPadding(O){this._showPadding!==O&&(this._showPadding=O,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(O){this._showCollisionBoxes!==O&&(this._showCollisionBoxes=O,O?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(O){this._showOverdrawInspector!==O&&(this._showOverdrawInspector=O,this._update())}get repaint(){return!!this._repaint}set repaint(O){this._repaint!==O&&(this._repaint=O,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(O){this._vertices=O,this._update()}get version(){return Vs}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(O){return this._lazyInitEmptyStyle(),this.style.setProjection(O),this._update(!0)}},l.MapMouseEvent=Ti,l.MapTouchEvent=ri,l.MapWheelEvent=Go,l.Marker=ql,l.NavigationControl=class{constructor(O){this._updateZoomButtons=()=>{const a=this._map.getZoom(),c=a===this._map.getMaxZoom(),C=a===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(a,c)=>{const C=this._map._getUIString(`NavigationControl.${c}`);a.title=C,a.setAttribute("aria-label",C)},this.options=o.e({},$s,O),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new HA(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(O,a){const c=P.create("button",O,this._container);return c.type="button",c.addEventListener("click",a),c}},l.Popup=class extends o.E{constructor(O){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._closeButton&&this._closeButton.removeEventListener("click",this._onClose),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const Y of this.options.className.split(" "))this._container.classList.add(Y);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?bl(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!a)return;const C=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationToScreenPoint(this._lngLat));let M=this.options.anchor;const k=Kl(this.options.offset);if(!M){const Y=this._container.offsetWidth,J=this._container.offsetHeight;let se;se=C.y+k.bottom.y<J?["top"]:C.y>this._map.transform.height-J?["bottom"]:[],C.x<Y/2?se.push("left"):C.x>this._map.transform.width-Y/2&&se.push("right"),M=se.length===0?"bottom":se.join("-")}let z=C.add(k[M]);this.options.subpixelPositioning||(z=z.round()),P.setTransform(this._container,`${iA[M]} translate(${z.x}px,${z.y}px)`),Kc(this._container,M,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Rc),O)}addTo(O){return this._map&&this.remove(),this._map=O,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(O){return this._lngLat=o.Q.convert(O),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(O){return this.setDOMContent(document.createTextNode(O))}setHTML(O){const a=document.createDocumentFragment(),c=document.createElement("body");let C;for(c.innerHTML=O;C=c.firstChild,C;)a.appendChild(C);return this.setDOMContent(a)}getMaxWidth(){var O;return(O=this._container)===null||O===void 0?void 0:O.style.maxWidth}setMaxWidth(O){return this.options.maxWidth=O,this._update(),this}setDOMContent(O){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(O),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(O){return this._container&&this._container.classList.add(O),this}removeClassName(O){return this._container&&this._container.classList.remove(O),this}setOffset(O){return this.options.offset=O,this._update(),this}toggleClassName(O){if(this._container)return this._container.classList.toggle(O)}setSubpixelPositioning(O){this.options.subpixelPositioning=O}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const O=this._container.querySelector(EA);O&&O.focus()}},l.RasterDEMTileSource=qn,l.RasterTileSource=_n,l.ScaleControl=class{constructor(O){this._onMove=()=>{ZA(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,ZA(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},fu),O)}getDefaultPosition(){return"bottom-left"}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=$a,l.Style=Yc,l.TerrainControl=class{constructor(O){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=O}onAdd(O){return this._map=O,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=ed,l.TwoFingersTouchRotateHandler=Pc,l.TwoFingersTouchZoomHandler=Qi,l.TwoFingersTouchZoomRotateHandler=rA,l.VectorTileSource=Rt,l.VideoSource=kn,l.addSourceType=(O,a)=>o._(void 0,void 0,void 0,function*(){if(br(O))throw new Error(`A source type called "${O}" already exists.`);((c,C)=>{zn[c]=C})(O,a)}),l.clearPrewarmedResources=function(){const O=Gt;O&&(O.isPreloaded()&&O.numActive()===1?(O.release(Re),Gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=st,l.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return ce().getRTLTextPluginStatus()},l.getVersion=function(){return Bd},l.getWorkerCount=function(){return He.workerCount},l.getWorkerUrl=function(){return o.a.WORKER_URL},l.importScriptInWorkers=function(O){return Le().broadcast("IS",O)},l.prewarm=function(){Ft().acquire(Re)},l.setMaxParallelImageRequests=function(O){o.a.MAX_PARALLEL_IMAGE_REQUESTS=O},l.setRTLTextPlugin=function(O,a){return ce().setRTLTextPlugin(O,a)},l.setWorkerCount=function(O){He.workerCount=O},l.setWorkerUrl=function(O){o.a.WORKER_URL=O}});var s=t;return s})}(xb)),xb.exports}var tV=eV();const W1=yl(tV);var z_=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function UF(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sv={exports:{}};Sv.exports;var M7;function nV(){return M7||(M7=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,o="[object Arguments]",p="[object Array]",v="[object AsyncFunction]",x="[object Boolean]",B="[object Date]",T="[object Error]",P="[object Function]",U="[object GeneratorFunction]",j="[object Map]",N="[object Number]",q="[object Null]",H="[object Object]",oe="[object Promise]",te="[object Proxy]",V="[object RegExp]",ne="[object Set]",W="[object String]",ie="[object Symbol]",he="[object Undefined]",fe="[object WeakMap]",Ee="[object ArrayBuffer]",me="[object DataView]",Me="[object Float32Array]",De="[object Float64Array]",xe="[object Int8Array]",At="[object Int16Array]",Ze="[object Int32Array]",Xe="[object Uint8Array]",Ne="[object Uint8ClampedArray]",Se="[object Uint16Array]",Re="[object Uint32Array]",He=/[\\^$.*+?()[\]{}|]/g,_t=/^\[object .+?Constructor\]$/,Gt=/^(?:0|[1-9]\d*)$/,yt={};yt[Me]=yt[De]=yt[xe]=yt[At]=yt[Ze]=yt[Xe]=yt[Ne]=yt[Se]=yt[Re]=!0,yt[o]=yt[p]=yt[Ee]=yt[x]=yt[me]=yt[B]=yt[T]=yt[P]=yt[j]=yt[N]=yt[H]=yt[V]=yt[ne]=yt[W]=yt[fe]=!1;var Ft=typeof z_=="object"&&z_&&z_.Object===Object&&z_,Tt=typeof self=="object"&&self&&self.Object===Object&&self,Le=Ft||Tt||Function("return this")(),Pe=e&&!e.nodeType&&e,Be=Pe&&!0&&n&&!n.nodeType&&n,it=Be&&Be.exports===Pe,Ct=it&&Ft.process,ft=function(){try{return Ct&&Ct.binding&&Ct.binding("util")}catch{}}(),Lt=ft&&ft.isTypedArray;function Zt(ee,Oe){for(var st=-1,$t=ee==null?0:ee.length,Ir=0,Vn=[];++st<$t;){var Zr=ee[st];Oe(Zr,st,ee)&&(Vn[Ir++]=Zr)}return Vn}function Rt(ee,Oe){for(var st=-1,$t=Oe.length,Ir=ee.length;++st<$t;)ee[Ir+st]=Oe[st];return ee}function _n(ee,Oe){for(var st=-1,$t=ee==null?0:ee.length;++st<$t;)if(Oe(ee[st],st,ee))return!0;return!1}function qn(ee,Oe){for(var st=-1,$t=Array(ee);++st<ee;)$t[st]=Oe(st);return $t}function rn(ee){return function(Oe){return ee(Oe)}}function ar(ee,Oe){return ee.has(Oe)}function kn(ee,Oe){return ee==null?void 0:ee[Oe]}function mn(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function($t,Ir){st[++Oe]=[Ir,$t]}),st}function zn(ee,Oe){return function(st){return ee(Oe(st))}}function br(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function($t){st[++Oe]=$t}),st}var gr=Array.prototype,tr=Function.prototype,Ge=Object.prototype,ce=Le["__core-js_shared__"],pe=tr.toString,rt=Ge.hasOwnProperty,St=function(){var ee=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Ht=Ge.toString,sn=RegExp("^"+pe.call(rt).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nr=it?Le.Buffer:void 0,$e=Le.Symbol,ae=Le.Uint8Array,Ce=Ge.propertyIsEnumerable,f=gr.splice,je=$e?$e.toStringTag:void 0,qe=Object.getOwnPropertySymbols,Je=nr?nr.isBuffer:void 0,ut=zn(Object.keys,Object),dt=ls(Le,"DataView"),Qt=ls(Le,"Map"),Wt=ls(Le,"Promise"),jt=ls(Le,"Set"),tn=ls(Le,"WeakMap"),Dn=ls(Object,"create"),Fn=Fo(dt),on=Fo(Qt),Sr=Fo(Wt),Hn=Fo(jt),xr=Fo(tn),qr=$e?$e.prototype:void 0,Bn=qr?qr.valueOf:void 0;function $n(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var $t=ee[Oe];this.set($t[0],$t[1])}}function Yn(){this.__data__=Dn?Dn(null):{},this.size=0}function Qr(ee){var Oe=this.has(ee)&&delete this.__data__[ee];return this.size-=Oe?1:0,Oe}function co(ee){var Oe=this.__data__;if(Dn){var st=Oe[ee];return st===r?void 0:st}return rt.call(Oe,ee)?Oe[ee]:void 0}function ma(ee){var Oe=this.__data__;return Dn?Oe[ee]!==void 0:rt.call(Oe,ee)}function Mr(ee,Oe){var st=this.__data__;return this.size+=this.has(ee)?0:1,st[ee]=Dn&&Oe===void 0?r:Oe,this}$n.prototype.clear=Yn,$n.prototype.delete=Qr,$n.prototype.get=co,$n.prototype.has=ma,$n.prototype.set=Mr;function wi(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var $t=ee[Oe];this.set($t[0],$t[1])}}function Zi(){this.__data__=[],this.size=0}function Ts(ee){var Oe=this.__data__,st=lr(Oe,ee);if(st<0)return!1;var $t=Oe.length-1;return st==$t?Oe.pop():f.call(Oe,st,1),--this.size,!0}function xs(ee){var Oe=this.__data__,st=lr(Oe,ee);return st<0?void 0:Oe[st][1]}function aa(ee){return lr(this.__data__,ee)>-1}function ps(ee,Oe){var st=this.__data__,$t=lr(st,ee);return $t<0?(++this.size,st.push([ee,Oe])):st[$t][1]=Oe,this}wi.prototype.clear=Zi,wi.prototype.delete=Ts,wi.prototype.get=xs,wi.prototype.has=aa,wi.prototype.set=ps;function bi(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var $t=ee[Oe];this.set($t[0],$t[1])}}function Il(){this.size=0,this.__data__={hash:new $n,map:new(Qt||wi),string:new $n}}function kl(ee){var Oe=ti(this,ee).delete(ee);return this.size-=Oe?1:0,Oe}function io(ee){return ti(this,ee).get(ee)}function vl(ee){return ti(this,ee).has(ee)}function ol(ee,Oe){var st=ti(this,ee),$t=st.size;return st.set(ee,Oe),this.size+=st.size==$t?0:1,this}bi.prototype.clear=Il,bi.prototype.delete=kl,bi.prototype.get=io,bi.prototype.has=vl,bi.prototype.set=ol;function bo(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.__data__=new bi;++Oe<st;)this.add(ee[Oe])}function Kr(ee){return this.__data__.set(ee,r),this}function Wa(ee){return this.__data__.has(ee)}bo.prototype.add=bo.prototype.push=Kr,bo.prototype.has=Wa;function Vo(ee){var Oe=this.__data__=new wi(ee);this.size=Oe.size}function Gs(){this.__data__=new wi,this.size=0}function Ye(ee){var Oe=this.__data__,st=Oe.delete(ee);return this.size=Oe.size,st}function xt(ee){return this.__data__.get(ee)}function yn(ee){return this.__data__.has(ee)}function Zn(ee,Oe){var st=this.__data__;if(st instanceof wi){var $t=st.__data__;if(!Qt||$t.length<t-1)return $t.push([ee,Oe]),this.size=++st.size,this;st=this.__data__=new bi($t)}return st.set(ee,Oe),this.size=st.size,this}Vo.prototype.clear=Gs,Vo.prototype.delete=Ye,Vo.prototype.get=xt,Vo.prototype.has=yn,Vo.prototype.set=Zn;function dn(ee,Oe){var st=ga(ee),$t=!st&&Mo(ee),Ir=!st&&!$t&&Ga(ee),Vn=!st&&!$t&&!Ir&&jl(ee),Zr=st||$t||Ir||Vn,di=Zr?qn(ee.length,String):[],Br=di.length;for(var Rr in ee)rt.call(ee,Rr)&&!(Zr&&(Rr=="length"||Ir&&(Rr=="offset"||Rr=="parent")||Vn&&(Rr=="buffer"||Rr=="byteLength"||Rr=="byteOffset")||Do(Rr,Br)))&&di.push(Rr);return di}function lr(ee,Oe){for(var st=ee.length;st--;)if(es(ee[st][0],Oe))return st;return-1}function Pi(ee,Oe,st){var $t=Oe(ee);return ga(ee)?$t:Rt($t,st(ee))}function xo(ee){return ee==null?ee===void 0?he:q:je&&je in Object(ee)?ka(ee):No(ee)}function as(ee){return Hr(ee)&&xo(ee)==o}function la(ee,Oe,st,$t,Ir){return ee===Oe?!0:ee==null||Oe==null||!Hr(ee)&&!Hr(Oe)?ee!==ee&&Oe!==Oe:Wu(ee,Oe,st,$t,la,Ir)}function Wu(ee,Oe,st,$t,Ir,Vn){var Zr=ga(ee),di=ga(Oe),Br=Zr?p:ho(ee),Rr=di?p:ho(Oe);Br=Br==o?H:Br,Rr=Rr==o?H:Rr;var Vi=Br==H,Wo=Rr==H,si=Br==Rr;if(si&&Ga(ee)){if(!Ga(Oe))return!1;Zr=!0,Vi=!1}if(si&&!Vi)return Vn||(Vn=new Vo),Zr||jl(ee)?na(ee,Oe,st,$t,Ir,Vn):Ms(ee,Oe,Br,st,$t,Ir,Vn);if(!(st&i)){var zr=Vi&&rt.call(ee,"__wrapped__"),Ui=Wo&&rt.call(Oe,"__wrapped__");if(zr||Ui){var Gi=zr?ee.value():ee,$o=Ui?Oe.value():Oe;return Vn||(Vn=new Vo),Ir(Gi,$o,st,$t,Vn)}}return si?(Vn||(Vn=new Vo),Mu(ee,Oe,st,$t,Ir,Vn)):!1}function ei(ee){if(!Hi(ee)||Qs(ee))return!1;var Oe=ao(ee)?sn:_t;return Oe.test(Fo(ee))}function ki(ee){return Hr(ee)&&sl(ee.length)&&!!yt[xo(ee)]}function zl(ee){if(!ra(ee))return ut(ee);var Oe=[];for(var st in Object(ee))rt.call(ee,st)&&st!="constructor"&&Oe.push(st);return Oe}function na(ee,Oe,st,$t,Ir,Vn){var Zr=st&i,di=ee.length,Br=Oe.length;if(di!=Br&&!(Zr&&Br>di))return!1;var Rr=Vn.get(ee);if(Rr&&Vn.get(Oe))return Rr==Oe;var Vi=-1,Wo=!0,si=st&s?new bo:void 0;for(Vn.set(ee,Oe),Vn.set(Oe,ee);++Vi<di;){var zr=ee[Vi],Ui=Oe[Vi];if($t)var Gi=Zr?$t(Ui,zr,Vi,Oe,ee,Vn):$t(zr,Ui,Vi,ee,Oe,Vn);if(Gi!==void 0){if(Gi)continue;Wo=!1;break}if(si){if(!_n(Oe,function($o,ua){if(!ar(si,ua)&&(zr===$o||Ir(zr,$o,st,$t,Vn)))return si.push(ua)})){Wo=!1;break}}else if(!(zr===Ui||Ir(zr,Ui,st,$t,Vn))){Wo=!1;break}}return Vn.delete(ee),Vn.delete(Oe),Wo}function Ms(ee,Oe,st,$t,Ir,Vn,Zr){switch(st){case me:if(ee.byteLength!=Oe.byteLength||ee.byteOffset!=Oe.byteOffset)return!1;ee=ee.buffer,Oe=Oe.buffer;case Ee:return!(ee.byteLength!=Oe.byteLength||!Vn(new ae(ee),new ae(Oe)));case x:case B:case N:return es(+ee,+Oe);case T:return ee.name==Oe.name&&ee.message==Oe.message;case V:case W:return ee==Oe+"";case j:var di=mn;case ne:var Br=$t&i;if(di||(di=br),ee.size!=Oe.size&&!Br)return!1;var Rr=Zr.get(ee);if(Rr)return Rr==Oe;$t|=s,Zr.set(ee,Oe);var Vi=na(di(ee),di(Oe),$t,Ir,Vn,Zr);return Zr.delete(ee),Vi;case ie:if(Bn)return Bn.call(ee)==Bn.call(Oe)}return!1}function Mu(ee,Oe,st,$t,Ir,Vn){var Zr=st&i,di=Si(ee),Br=di.length,Rr=Si(Oe),Vi=Rr.length;if(Br!=Vi&&!Zr)return!1;for(var Wo=Br;Wo--;){var si=di[Wo];if(!(Zr?si in Oe:rt.call(Oe,si)))return!1}var zr=Vn.get(ee);if(zr&&Vn.get(Oe))return zr==Oe;var Ui=!0;Vn.set(ee,Oe),Vn.set(Oe,ee);for(var Gi=Zr;++Wo<Br;){si=di[Wo];var $o=ee[si],ua=Oe[si];if($t)var Ys=Zr?$t(ua,$o,si,Oe,ee,Vn):$t($o,ua,si,ee,Oe,Vn);if(!(Ys===void 0?$o===ua||Ir($o,ua,st,$t,Vn):Ys)){Ui=!1;break}Gi||(Gi=si=="constructor")}if(Ui&&!Gi){var wu=ee.constructor,qs=Oe.constructor;wu!=qs&&"constructor"in ee&&"constructor"in Oe&&!(typeof wu=="function"&&wu instanceof wu&&typeof qs=="function"&&qs instanceof qs)&&(Ui=!1)}return Vn.delete(ee),Vn.delete(Oe),Ui}function Si(ee){return Pi(ee,Wi,Us)}function ti(ee,Oe){var st=ee.__data__;return Gu(Oe)?st[typeof Oe=="string"?"string":"hash"]:st.map}function ls(ee,Oe){var st=kn(ee,Oe);return ei(st)?st:void 0}function ka(ee){var Oe=rt.call(ee,je),st=ee[je];try{ee[je]=void 0;var $t=!0}catch{}var Ir=Ht.call(ee);return $t&&(Oe?ee[je]=st:delete ee[je]),Ir}var Us=qe?function(ee){return ee==null?[]:(ee=Object(ee),Zt(qe(ee),function(Oe){return Ce.call(ee,Oe)}))}:oo,ho=xo;(dt&&ho(new dt(new ArrayBuffer(1)))!=me||Qt&&ho(new Qt)!=j||Wt&&ho(Wt.resolve())!=oe||jt&&ho(new jt)!=ne||tn&&ho(new tn)!=fe)&&(ho=function(ee){var Oe=xo(ee),st=Oe==H?ee.constructor:void 0,$t=st?Fo(st):"";if($t)switch($t){case Fn:return me;case on:return j;case Sr:return oe;case Hn:return ne;case xr:return fe}return Oe});function Do(ee,Oe){return Oe=Oe??l,!!Oe&&(typeof ee=="number"||Gt.test(ee))&&ee>-1&&ee%1==0&&ee<Oe}function Gu(ee){var Oe=typeof ee;return Oe=="string"||Oe=="number"||Oe=="symbol"||Oe=="boolean"?ee!=="__proto__":ee===null}function Qs(ee){return!!St&&St in ee}function ra(ee){var Oe=ee&&ee.constructor,st=typeof Oe=="function"&&Oe.prototype||Ge;return ee===st}function No(ee){return Ht.call(ee)}function Fo(ee){if(ee!=null){try{return pe.call(ee)}catch{}try{return ee+""}catch{}}return""}function es(ee,Oe){return ee===Oe||ee!==ee&&Oe!==Oe}var Mo=as(function(){return arguments}())?as:function(ee){return Hr(ee)&&rt.call(ee,"callee")&&!Ce.call(ee,"callee")},ga=Array.isArray;function zs(ee){return ee!=null&&sl(ee.length)&&!ao(ee)}var Ga=Je||Ki;function Ta(ee,Oe){return la(ee,Oe)}function ao(ee){if(!Hi(ee))return!1;var Oe=xo(ee);return Oe==P||Oe==U||Oe==v||Oe==te}function sl(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=l}function Hi(ee){var Oe=typeof ee;return ee!=null&&(Oe=="object"||Oe=="function")}function Hr(ee){return ee!=null&&typeof ee=="object"}var jl=Lt?rn(Lt):ki;function Wi(ee){return zs(ee)?dn(ee):zl(ee)}function oo(){return[]}function Ki(){return!1}n.exports=Ta}(Sv,Sv.exports)),Sv.exports}var rV=nV(),iV=UF(rV);function YE(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function qE(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function VE(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function oV(n,e){const t=[],r=[],i=[];function s(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const p=s(l);r.push(YE(p.circle,l)),i.push(VE(p.line,l)),t.push(qE(p.polygon,p.polygonOutline,l))}else o.forEach(p=>{const v=s(p);r.push(YE(v.circle,l,p)),i.push(VE(v.line,l,p)),t.push(qE(v.polygon,v.polygonOutline,l,p))})}),t.concat(i).concat(r)}function sV(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const l=n.sources[s];(l.type==="vector"||l.type==="geojson")&&(i[s]=l)}),Object.assign(n,{layers:[r].concat(e),sources:i})}var w7={polygonLayer:qE,lineLayer:VE,circleLayer:YE,generateInspectStyle:sV,generateColoredLayers:oV};class aV{constructor(e){e=Object.assign({show:!0,onToggle(){}},e),this._btn=this.createButton(),this._btn.onclick=e.onToggle,this.elem=this.createContainer(this._btn,e.show)}createButton(){const e=document.createElement("button");return e.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",e.type="button",e.title="Toggle Inspect",e.setAttribute("aria-label","Toggle Inspect"),e}createContainer(e,t){const r=document.createElement("div");return r.className="maplibregl-ctrl maplibregl-ctrl-group",r.appendChild(e),t||(r.style.display="none"),r}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function lV(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function W3(n,e){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${lV(e)}</div></div>`}function uV(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function AV(n){const e=uV(n.layer["source-layer"]||n.layer.source),t=W3("$id",n.id),r=W3("$type",n.geometry.type),i=Object.keys(n.properties).map(s=>W3(s,n.properties[s]));return[e,t,r].concat(i).join("")}function cV(n){return n.map(e=>`<div class="maplibregl-inspect_feature">${AV(e)}</div>`).join("")}function dV(n){return`<div class="maplibregl-inspect_popup">${cV(n)}</div>`}var Ev={exports:{}},hV=Ev.exports,S7;function fV(){return S7||(S7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(hV,function(){var t=null,r={};q();var i=[],s=function(W){if(W=W||{},W.seed!==void 0&&W.seed!==null&&W.seed===parseInt(W.seed,10))t=W.seed;else if(typeof W.seed=="string")t=V(W.seed);else{if(W.seed!==void 0&&W.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ie,he,fe;if(W.count!==null&&W.count!==void 0){for(var Ee=W.count,me=[],Me=0;Me<W.count;Me++)i.push(!1);for(W.count=null;Ee>me.length;){var De=s(W);t!==null&&(W.seed=t),me.push(De)}return W.count=Ee,me}return ie=l(W),he=o(ie,W),fe=p(ie,he,W),v([ie,he,fe],W)};function l(W){if(i.length>0){var ie=ne(W.hue),he=U(ie),fe=(ie[1]-ie[0])/i.length,Ee=parseInt((he-ie[0])/fe);i[Ee]===!0?Ee=(Ee+2)%i.length:i[Ee]=!0;var me=(ie[0]+Ee*fe)%359,Me=(ie[0]+(Ee+1)*fe)%359;return ie=[me,Me],he=U(ie),he<0&&(he=360+he),he}else{var ie=B(W.hue);return he=U(ie),he<0&&(he=360+he),he}}function o(W,ie){if(ie.hue==="monochrome")return 0;if(ie.luminosity==="random")return U([0,100]);var he=T(W),fe=he[0],Ee=he[1];switch(ie.luminosity){case"bright":fe=55;break;case"dark":fe=Ee-10;break;case"light":Ee=55;break}return U([fe,Ee])}function p(W,ie,he){var fe=x(W,ie),Ee=100;switch(he.luminosity){case"dark":Ee=fe+20;break;case"light":fe=(Ee+fe)/2;break;case"random":fe=0,Ee=100;break}return U([fe,Ee])}function v(W,ie){switch(ie.format){case"hsvArray":return W;case"hslArray":return te(W);case"hsl":var he=te(W);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var fe=te(W),Me=ie.alpha||Math.random();return"hsla("+fe[0]+", "+fe[1]+"%, "+fe[2]+"%, "+Me+")";case"rgbArray":return H(W);case"rgb":var Ee=H(W);return"rgb("+Ee.join(", ")+")";case"rgba":var me=H(W),Me=ie.alpha||Math.random();return"rgba("+me.join(", ")+", "+Me+")";default:return j(W)}}function x(W,ie){for(var he=P(W).lowerBounds,fe=0;fe<he.length-1;fe++){var Ee=he[fe][0],me=he[fe][1],Me=he[fe+1][0],De=he[fe+1][1];if(ie>=Ee&&ie<=Me){var xe=(De-me)/(Me-Ee),At=me-xe*Ee;return xe*ie+At}}return 0}function B(W){if(typeof parseInt(W)=="number"){var ie=parseInt(W);if(ie<360&&ie>0)return[ie,ie]}if(typeof W=="string"){if(r[W]){var he=r[W];if(he.hueRange)return he.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var fe=oe(W)[0];return[fe,fe]}}return[0,360]}function T(W){return P(W).saturationRange}function P(W){W>=334&&W<=360&&(W-=360);for(var ie in r){var he=r[ie];if(he.hueRange&&W>=he.hueRange[0]&&W<=he.hueRange[1])return r[ie]}return"Color not found"}function U(W){if(t===null){var ie=.618033988749895,he=Math.random();return he+=ie,he%=1,Math.floor(W[0]+he*(W[1]+1-W[0]))}else{var fe=W[1]||1,Ee=W[0]||0;t=(t*9301+49297)%233280;var me=t/233280;return Math.floor(Ee+me*(fe-Ee))}}function j(W){var ie=H(W);function he(Ee){var me=Ee.toString(16);return me.length==1?"0"+me:me}var fe="#"+he(ie[0])+he(ie[1])+he(ie[2]);return fe}function N(W,ie,he){var fe=he[0][0],Ee=he[he.length-1][0],me=he[he.length-1][1],Me=he[0][1];r[W]={hueRange:ie,lowerBounds:he,saturationRange:[fe,Ee],brightnessRange:[me,Me]}}function q(){N("monochrome",null,[[0,0],[100,0]]),N("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),N("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),N("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),N("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),N("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),N("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),N("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function H(W){var ie=W[0];ie===0&&(ie=1),ie===360&&(ie=359),ie=ie/360;var he=W[1]/100,fe=W[2]/100,Ee=Math.floor(ie*6),me=ie*6-Ee,Me=fe*(1-he),De=fe*(1-me*he),xe=fe*(1-(1-me)*he),At=256,Ze=256,Xe=256;switch(Ee){case 0:At=fe,Ze=xe,Xe=Me;break;case 1:At=De,Ze=fe,Xe=Me;break;case 2:At=Me,Ze=fe,Xe=xe;break;case 3:At=Me,Ze=De,Xe=fe;break;case 4:At=xe,Ze=Me,Xe=fe;break;case 5:At=fe,Ze=Me,Xe=De;break}var Ne=[Math.floor(At*255),Math.floor(Ze*255),Math.floor(Xe*255)];return Ne}function oe(W){W=W.replace(/^#/,""),W=W.length===3?W.replace(/(.)/g,"$1$1"):W;var ie=parseInt(W.substr(0,2),16)/255,he=parseInt(W.substr(2,2),16)/255,fe=parseInt(W.substr(4,2),16)/255,Ee=Math.max(ie,he,fe),me=Ee-Math.min(ie,he,fe),Me=Ee?me/Ee:0;switch(Ee){case ie:return[60*((he-fe)/me%6)||0,Me,Ee];case he:return[60*((fe-ie)/me+2)||0,Me,Ee];case fe:return[60*((ie-he)/me+4)||0,Me,Ee]}}function te(W){var ie=W[0],he=W[1]/100,fe=W[2]/100,Ee=(2-he)*fe;return[ie,Math.round(he*fe/(Ee<1?Ee:2-Ee)*1e4)/100,Ee/2*100]}function V(W){for(var ie=0,he=0;he!==W.length&&!(ie>=Number.MAX_SAFE_INTEGER);he++)ie+=W.charCodeAt(he);return ie}function ne(W){if(isNaN(W)){if(typeof W=="string"){if(r[W]){var he=r[W];if(he.hueRange)return he.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var fe=oe(W)[0];return P(fe).hueRange}}}else{var ie=parseInt(W);if(ie<360&&ie>0)return P(W).hueRange}return[0,360]}return s})}(Ev,Ev.exports)),Ev.exports}var pV=fV(),mV=UF(pV);function gV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${mV({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}var yV={brightColor:gV};function vV(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function CV(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class bB{constructor(e){if(this._onSourceChange=r=>{if(r.sourceDataType==="visibility"||!r.isSourceLoaded)return;const i=Object.assign({},this.sources);this._setSourcesFromMap(),!iV(i,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const r=this._map.getStyle();vV(r)||(this._originalStyle=r)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=r=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||r.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;r.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||r.type==="mousemove"&&!this.options.showMapPopupOnHover)return;r.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let i;this.options.selectThreshold===0?i=r.point:i=[[r.point.x-this.options.selectThreshold,r.point.y+this.options.selectThreshold],[r.point.x+this.options.selectThreshold,r.point.y-this.options.selectThreshold]];const s=this._map.queryRenderedFeatures(i,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=s.length?"pointer":"",!s.length)this._popup.remove();else{this._popup.setLngLat(r.lngLat);const l=this.options.renderPopup(s);typeof l=="string"?this._popup.setHTML(l):this._popup.setDOMContent(l),this._popup.addTo(this._map)}}},!(this instanceof bB))throw new Error("MaplibreInspect needs to be called with the new keyword");let t=null;window.maplibregl?t=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):e.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:yV.brightColor,buildInspectStyle:w7.generateInspectStyle,renderPopup:dV,popup:t,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},e),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new aV({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const e=w7.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),e,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(CV(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const e=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(t=>{const r=this._map.style.sourceCaches[t]||{_source:{}},i=r._source.vectorLayerIds;i?this.sources[t]=i:r._source.type==="geojson"&&(this.sources[t]=[])}),Object.keys(this.sources).forEach(t=>{e.indexOf(t)===-1&&delete this.sources[t]})}setOriginalStyle(e){this._originalStyle=e,this._setSourcesFromMap()}onAdd(e){return this._map=e,Object.keys(this.sources).length===0&&(e.on("tiledata",this._onSourceChange),e.on("sourcedata",this._onSourceChange)),e.on("styledata",this._onStyleChange),e.on("load",this._onStyleChange),e.on("mousemove",this._onMousemove),e.on("click",this._onMousemove),e.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const e=this._toggle.elem;e.parentNode.removeChild(e),this._map=void 0}}var Bv={exports:{}},_V=Bv.exports,E7;function bV(){return E7||(E7=1,function(n,e){(function(t,r){{var i=r();n.exports&&(e=n.exports=i),e.randomColor=i}})(_V,function(){var t=null,r={};q();var i=[],s=function(W){if(W=W||{},W.seed!==void 0&&W.seed!==null&&W.seed===parseInt(W.seed,10))t=W.seed;else if(typeof W.seed=="string")t=V(W.seed);else{if(W.seed!==void 0&&W.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var ie,he,fe;if(W.count!==null&&W.count!==void 0){for(var Ee=W.count,me=[],Me=0;Me<W.count;Me++)i.push(!1);for(W.count=null;Ee>me.length;){var De=s(W);t!==null&&(W.seed=t),me.push(De)}return W.count=Ee,me}return ie=l(W),he=o(ie,W),fe=p(ie,he,W),v([ie,he,fe],W)};function l(W){if(i.length>0){var ie=ne(W.hue),he=U(ie),fe=(ie[1]-ie[0])/i.length,Ee=parseInt((he-ie[0])/fe);i[Ee]===!0?Ee=(Ee+2)%i.length:i[Ee]=!0;var me=(ie[0]+Ee*fe)%359,Me=(ie[0]+(Ee+1)*fe)%359;return ie=[me,Me],he=U(ie),he<0&&(he=360+he),he}else{var ie=B(W.hue);return he=U(ie),he<0&&(he=360+he),he}}function o(W,ie){if(ie.hue==="monochrome")return 0;if(ie.luminosity==="random")return U([0,100]);var he=T(W),fe=he[0],Ee=he[1];switch(ie.luminosity){case"bright":fe=55;break;case"dark":fe=Ee-10;break;case"light":Ee=55;break}return U([fe,Ee])}function p(W,ie,he){var fe=x(W,ie),Ee=100;switch(he.luminosity){case"dark":Ee=fe+20;break;case"light":fe=(Ee+fe)/2;break;case"random":fe=0,Ee=100;break}return U([fe,Ee])}function v(W,ie){switch(ie.format){case"hsvArray":return W;case"hslArray":return te(W);case"hsl":var he=te(W);return"hsl("+he[0]+", "+he[1]+"%, "+he[2]+"%)";case"hsla":var fe=te(W),Me=ie.alpha||Math.random();return"hsla("+fe[0]+", "+fe[1]+"%, "+fe[2]+"%, "+Me+")";case"rgbArray":return H(W);case"rgb":var Ee=H(W);return"rgb("+Ee.join(", ")+")";case"rgba":var me=H(W),Me=ie.alpha||Math.random();return"rgba("+me.join(", ")+", "+Me+")";default:return j(W)}}function x(W,ie){for(var he=P(W).lowerBounds,fe=0;fe<he.length-1;fe++){var Ee=he[fe][0],me=he[fe][1],Me=he[fe+1][0],De=he[fe+1][1];if(ie>=Ee&&ie<=Me){var xe=(De-me)/(Me-Ee),At=me-xe*Ee;return xe*ie+At}}return 0}function B(W){if(typeof parseInt(W)=="number"){var ie=parseInt(W);if(ie<360&&ie>0)return[ie,ie]}if(typeof W=="string"){if(r[W]){var he=r[W];if(he.hueRange)return he.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var fe=oe(W)[0];return[fe,fe]}}return[0,360]}function T(W){return P(W).saturationRange}function P(W){W>=334&&W<=360&&(W-=360);for(var ie in r){var he=r[ie];if(he.hueRange&&W>=he.hueRange[0]&&W<=he.hueRange[1])return r[ie]}return"Color not found"}function U(W){if(t===null){var ie=.618033988749895,he=Math.random();return he+=ie,he%=1,Math.floor(W[0]+he*(W[1]+1-W[0]))}else{var fe=W[1]||1,Ee=W[0]||0;t=(t*9301+49297)%233280;var me=t/233280;return Math.floor(Ee+me*(fe-Ee))}}function j(W){var ie=H(W);function he(Ee){var me=Ee.toString(16);return me.length==1?"0"+me:me}var fe="#"+he(ie[0])+he(ie[1])+he(ie[2]);return fe}function N(W,ie,he){var fe=he[0][0],Ee=he[he.length-1][0],me=he[he.length-1][1],Me=he[0][1];r[W]={hueRange:ie,lowerBounds:he,saturationRange:[fe,Ee],brightnessRange:[me,Me]}}function q(){N("monochrome",null,[[0,0],[100,0]]),N("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),N("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),N("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),N("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),N("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),N("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),N("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function H(W){var ie=W[0];ie===0&&(ie=1),ie===360&&(ie=359),ie=ie/360;var he=W[1]/100,fe=W[2]/100,Ee=Math.floor(ie*6),me=ie*6-Ee,Me=fe*(1-he),De=fe*(1-me*he),xe=fe*(1-(1-me)*he),At=256,Ze=256,Xe=256;switch(Ee){case 0:At=fe,Ze=xe,Xe=Me;break;case 1:At=De,Ze=fe,Xe=Me;break;case 2:At=Me,Ze=fe,Xe=xe;break;case 3:At=Me,Ze=De,Xe=fe;break;case 4:At=xe,Ze=Me,Xe=fe;break;case 5:At=fe,Ze=Me,Xe=De;break}var Ne=[Math.floor(At*255),Math.floor(Ze*255),Math.floor(Xe*255)];return Ne}function oe(W){W=W.replace(/^#/,""),W=W.length===3?W.replace(/(.)/g,"$1$1"):W;var ie=parseInt(W.substr(0,2),16)/255,he=parseInt(W.substr(2,2),16)/255,fe=parseInt(W.substr(4,2),16)/255,Ee=Math.max(ie,he,fe),me=Ee-Math.min(ie,he,fe),Me=Ee?me/Ee:0;switch(Ee){case ie:return[60*((he-fe)/me%6)||0,Me,Ee];case he:return[60*((fe-ie)/me+2)||0,Me,Ee];case fe:return[60*((ie-he)/me+4)||0,Me,Ee]}}function te(W){var ie=W[0],he=W[1]/100,fe=W[2]/100,Ee=(2-he)*fe;return[ie,Math.round(he*fe/(Ee<1?Ee:2-Ee)*1e4)/100,Ee/2*100]}function V(W){for(var ie=0,he=0;he!==W.length&&!(ie>=Number.MAX_SAFE_INTEGER);he++)ie+=W.charCodeAt(he);return ie}function ne(W){if(isNaN(W)){if(typeof W=="string"){if(r[W]){var he=r[W];if(he.hueRange)return he.hueRange}else if(W.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var fe=oe(W)[0];return P(fe).hueRange}}}else{var ie=parseInt(W);if(ie<360&&ie>0)return P(W).hueRange}return[0,360]}return s})}(Bv,Bv.exports)),Bv.exports}var xV=bV();const MV=yl(xV);function wV(n,e){let t="bright",r;return/water|ocean|lake|sea|river/.test(n)&&(r="blue"),/state|country|place/.test(n)&&(r="pink"),/road|highway|transport|streets/.test(n)&&(r="orange"),/contour|building|earth/.test(n)&&(r="monochrome"),/building/.test(n)&&(t="dark"),/earth/.test(n)&&(t="light"),/contour|landuse/.test(n)&&(r="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(r="green"),`rgba(${MV({luminosity:t,hue:r,seed:n,format:"rgbArray"}).join(", ")}, ${e||"1"})`}const zF={brightColor:wV};var G3={exports:{}},Q3,B7;function SV(){if(B7)return Q3;B7=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Q3=n,Q3}var Y3,O7;function EV(){if(O7)return Y3;O7=1;var n=SV();function e(){}function t(){}return t.resetWarningCache=e,Y3=function(){function r(l,o,p,v,x,B){if(B!==n){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},Y3}var I7;function yp(){return I7||(I7=1,G3.exports=EV()()),G3.exports}var BV=yp();const pi=yl(BV);var k7=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function OV(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var K0=function(e,t){var r=e.children,i=e.color,s=e.size,l=e.style,o=e.width,p=e.height,v=OV(e,["children","color","size","style","width","height"]),x=t.reactIconBase,B=x===void 0?{}:x,T=s||B.size||"1em";return sr.createElement("svg",k7({children:r,fill:"currentColor",preserveAspectRatio:"xMidYMid meet",height:p||T,width:o||T},B,v,{style:k7({verticalAlign:"middle",color:i||B.color},B.style||{},l)}))};K0.propTypes={color:pi.string,size:pi.oneOfType([pi.string,pi.number]),width:pi.oneOfType([pi.string,pi.number]),height:pi.oneOfType([pi.string,pi.number]),style:pi.object};K0.contextTypes={reactIconBase:pi.shape(K0.propTypes)};function Vb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",e="ace6118dd0ae83e2ceb20b70664ae2267741d924",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:478}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLine.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,iUAAgU,WAAU,kBAAiB,GACrW;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ace6118dd0ae83e2ceb20b70664ae2267741d924"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Vb=function(){return l},l}Vb();class IV extends sr.Component{render(){return Vb().f[0]++,Vb().s[0]++,le.jsx(K0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"M 12.34,1.29 C 12.5114,1.1076 12.7497,1.0029 13,1 13.5523,1 14,1.4477 14,2 14.0047,2.2478 13.907,2.4866 13.73,2.66 9.785626,6.5516986 6.6148407,9.7551593 2.65,13.72 2.4793,13.8963 2.2453,13.9971 2,14 1.4477,14 1,13.5523 1,13 0.9953,12.7522 1.093,12.5134 1.27,12.34 4.9761967,8.7018093 9.0356422,4.5930579 12.34,1.29 Z",transform:"translate(2,2)"})})}}function $b(){var n="/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",e="8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:562}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconFill.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,iBAAiB,MAAM,UAAU;AAAA,EACpD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,kbAAib,GAC3b;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b9fc49e8fc93b42e35f3a9b2accdbccf6dcdb84"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $b=function(){return l},l}$b();class j_ extends sr.Component{render(){return $b().f[0]++,$b().s[0]++,le.jsx(K0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"M 2.84978,9.763512 9.462149,4.7316391 16.47225,9.478015 9.859886,14.509879 2.84978,9.763512 m -1.028761,0.492069 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 l 0,0 z"})})}}function Hb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",e="6ac2e596376f8b8c2e117c4345e33d1afb8f583b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:535}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconSymbol.tsx"],names:[],mappings:"AASU;AATV,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,OAAE,WAAU,wDACX,8BAAC,UAAK,GAAE,4SAA2S,GACrT,GACF;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ac2e596376f8b8c2e117c4345e33d1afb8f583b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Hb=function(){return l},l}Hb();class kV extends sr.Component{render(){return Hb().f[0]++,Hb().s[0]++,le.jsx(K0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("g",{transform:"matrix(1.2718518,0,0,1.2601269,16.559526,-7.4065264)",children:le.jsx("path",{d:"m -9.7959773,11.060163 c -0.3734787,-0.724437 -0.3580577,-1.2147051 -0.00547,-1.8767873 l 8.6034029,-0.019416 c 0.39670292,0.6865644 0.38365934,1.4750693 -0.011097,1.8864953 l -3.1359613,-0.0033 -0.013695,7.1305 c -0.4055357,0.397083 -1.3146432,0.397083 -1.7769191,-0.02274 l 0.030226,-7.104422 z"})})})}}function Zb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",e="f8813cd7d4a9138ff3fc7253bc195b86370ed6cf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:464}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconBackground.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,uBAAuB,MAAM,UAAU;AAAA,EAC1D,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,GAAE,gVAA+U,GACzV;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f8813cd7d4a9138ff3fc7253bc195b86370ed6cf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Zb=function(){return l},l}Zb();class T7 extends sr.Component{render(){return Zb().f[0]++,Zb().s[0]++,le.jsx(K0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{d:"m 1.821019,10.255581 7.414535,5.020197 c 0.372277,0.25206 0.958697,0.239771 1.30985,-0.02745 L 17.539255,9.926162 C 17.89041,9.658941 17.873288,9.238006 17.501015,8.985946 L 10.08648,3.9657402 C 9.714204,3.7136802 9.127782,3.7259703 8.776627,3.9931918 L 1.782775,9.315365 c -0.3511551,0.267221 -0.3340331,0.688156 0.03824,0.940216 z"})})}}function Xb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",e="35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:378}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconCircle.tsx"],names:[],mappings:"AAQQ;AARR,OAAO,WAAW;AAClB,OAAO,cAAc;AAGrB,qBAAqB,mBAAmB,MAAM,UAAU;AAAA,EACtD,SAAS;AACP,WACE,oBAAC,YAAS,SAAQ,aAAa,GAAG,KAAK,OACrC,8BAAC,UAAK,WAAU,kBAAiB,GAAE,6NAA4N,GACjQ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"35a8c3687dcdeffeb7f2fe2d9c05ced9e802b5ca"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Xb=function(){return l},l}Xb();class TV extends sr.Component{render(){return Xb().f[0]++,Xb().s[0]++,le.jsx(K0,{viewBox:"0 0 20 20",...this.props,children:le.jsx("path",{transform:"translate(2 2)",d:"M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15 S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334 s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z"})})}}function Ty(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function PV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(n)}function KV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(n)}function RV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function DV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function FV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95a15.65 15.65 0 0 0-1.38-3.56A8.03 8.03 0 0 1 18.92 8zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56A7.987 7.987 0 0 1 5.08 16zm2.95-8H5.08a7.987 7.987 0 0 1 4.33-3.56A15.65 15.65 0 0 0 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"},child:[]}]})(n)}function LV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 4H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm-7 6-4 4h3v6h2v-6h3l-4-4z"},child:[]}]})(n)}function UV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function zV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"},child:[]}]})(n)}function jV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"},child:[]}]})(n)}function jF(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function NV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"},child:[]}]})(n)}function $E(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(n)}function WV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(n)}function GV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"},child:[]}]})(n)}function QV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"},child:[]}]})(n)}function P7(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"},child:[]}]})(n)}function YV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(n)}function qV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"},child:[]}]})(n)}function VV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(n)}function $V(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 14 5-5 5 5z"},child:[]}]})(n)}function HV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function ZV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function XV(n){return ou({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"19",r:"2"},child:[]},{tag:"path",attr:{d:"M10 3h4v12h-4z"},child:[]}]})(n)}function Jb(){var n="/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",e="90c8ed80956547e1dbbdff164a42850c33eed62e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconMissing.tsx"],names:[],mappings:"AAOM;AAPN,OAAO,WAAW;AAClB,SAAQ,sBAAqB;AAG7B,qBAAqB,oBAAoB,MAAM,UAAU;AAAA,EACvD,SAAS;AACP,WACE,oBAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,EAEpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"90c8ed80956547e1dbbdff164a42850c33eed62e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Jb=function(){return l},l}Jb();class JV extends sr.Component{render(){return Jb().f[0]++,Jb().s[0]++,le.jsx(XV,{...this.props})}}function Dl(){var n="/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",e="89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx",statementMap:{0:{start:{line:11,column:22},end:{line:11,column:49}},1:{start:{line:12,column:4},end:{line:33,column:5}},2:{start:{line:14,column:8},end:{line:14,column:69}},3:{start:{line:16,column:8},end:{line:16,column:63}},4:{start:{line:18,column:8},end:{line:18,column:63}},5:{start:{line:20,column:8},end:{line:20,column:63}},6:{start:{line:22,column:8},end:{line:22,column:63}},7:{start:{line:24,column:8},end:{line:24,column:69}},8:{start:{line:26,column:8},end:{line:26,column:63}},9:{start:{line:28,column:8},end:{line:28,column:65}},10:{start:{line:30,column:8},end:{line:30,column:65}},11:{start:{line:32,column:8},end:{line:32,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:34,column:3}},line:10}},branchMap:{0:{loc:{start:{line:12,column:4},end:{line:33,column:5}},type:"switch",locations:[{start:{line:13,column:6},end:{line:14,column:69}},{start:{line:15,column:6},end:{line:16,column:63}},{start:{line:17,column:6},end:{line:18,column:63}},{start:{line:19,column:6},end:{line:20,column:63}},{start:{line:21,column:6},end:{line:22,column:63}},{start:{line:23,column:6},end:{line:24,column:69}},{start:{line:25,column:6},end:{line:26,column:63}},{start:{line:27,column:6},end:{line:28,column:65}},{start:{line:29,column:6},end:{line:30,column:65}},{start:{line:31,column:6},end:{line:32,column:66}}],line:12}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0},b:{0:[0,0,0,0,0,0,0,0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/IconLayer.tsx"],names:[],mappings:"AAmBkC;AAnBlC,OAAO,WAAW;AAElB,OAAO,cAAc;AACrB,OAAO,cAAc;AACrB,OAAO,gBAAgB;AACvB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AAQxB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,EAAE,OAAO,KAAK,MAAM,MAAM;AAC5C,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAkB,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MAC7D,KAAK;AAAU,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC/C,KAAK;AAAa,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAClD,KAAK;AAAW,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAChD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAc,eAAO,oBAAC,kBAAgB,GAAG,WAAW;AAAA,MACzD,KAAK;AAAQ,eAAO,oBAAC,YAAU,GAAG,WAAW;AAAA,MAC7C,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD,KAAK;AAAU,eAAO,oBAAC,cAAY,GAAG,WAAW;AAAA,MACjD;AAAS,eAAO,oBAAC,eAAa,GAAG,WAAW;AAAA,IAC5C;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89bd7eb08374d10a1476c7cf1e0e39f530ce1ff1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Dl=function(){return l},l}Dl();class NF extends sr.Component{render(){Dl().f[0]++;const e=(Dl().s[0]++,{style:this.props.style});switch(Dl().s[1]++,this.props.type){case"fill-extrusion":return Dl().b[0][0]++,Dl().s[2]++,le.jsx(T7,{...e});case"raster":return Dl().b[0][1]++,Dl().s[3]++,le.jsx(j_,{...e});case"hillshade":return Dl().b[0][2]++,Dl().s[4]++,le.jsx(j_,{...e});case"heatmap":return Dl().b[0][3]++,Dl().s[5]++,le.jsx(j_,{...e});case"fill":return Dl().b[0][4]++,Dl().s[6]++,le.jsx(j_,{...e});case"background":return Dl().b[0][5]++,Dl().s[7]++,le.jsx(T7,{...e});case"line":return Dl().b[0][6]++,Dl().s[8]++,le.jsx(IV,{...e});case"symbol":return Dl().b[0][7]++,Dl().s[9]++,le.jsx(kV,{...e});case"circle":return Dl().b[0][8]++,Dl().s[10]++,le.jsx(TV,{...e});default:return Dl().b[0][9]++,Dl().s[11]++,le.jsx(JV,{...e})}}}function Jr(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",e="ea1e9940e142b9a2a1c672f6983f6f5748c841e6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:20}},1:{start:{line:6,column:27},end:{line:6,column:29}},2:{start:{line:7,column:2},end:{line:18,column:5}},3:{start:{line:8,column:22},end:{line:8,column:51}},4:{start:{line:9,column:4},end:{line:17,column:5}},5:{start:{line:10,column:6},end:{line:10,column:43}},6:{start:{line:11,column:28},end:{line:11,column:91}},7:{start:{line:11,column:59},end:{line:11,column:90}},8:{start:{line:12,column:6},end:{line:12,column:65}},9:{start:{line:14,column:6},end:{line:14,column:52}},10:{start:{line:15,column:6},end:{line:15,column:39}},11:{start:{line:16,column:6},end:{line:16,column:45}},12:{start:{line:19,column:2},end:{line:19,column:17}},13:{start:{line:23,column:4},end:{line:25,column:5}},14:{start:{line:24,column:6},end:{line:24,column:13}},15:{start:{line:26,column:4},end:{line:44,column:5}},16:{start:{line:27,column:25},end:{line:27,column:44}},17:{start:{line:28,column:6},end:{line:30,column:7}},18:{start:{line:29,column:8},end:{line:29,column:48}},19:{start:{line:31,column:6},end:{line:33,column:7}},20:{start:{line:32,column:8},end:{line:32,column:48}},21:{start:{line:34,column:6},end:{line:36,column:7}},22:{start:{line:35,column:8},end:{line:35,column:48}},23:{start:{line:37,column:6},end:{line:39,column:7}},24:{start:{line:38,column:8},end:{line:38,column:58}},25:{start:{line:40,column:6},end:{line:40,column:21}},26:{start:{line:42,column:6},end:{line:42,column:63}},27:{start:{line:43,column:6},end:{line:43,column:21}},28:{start:{line:47,column:20},end:{line:47,column:67}},29:{start:{line:48,column:18},end:{line:93,column:6}},30:{start:{line:49,column:21},end:{line:88,column:8}},31:{start:{line:50,column:29},end:{line:50,column:76}},32:{start:{line:51,column:8},end:{line:87,column:10}},33:{start:{line:68,column:20},end:{line:68,column:63}},34:{start:{line:89,column:6},end:{line:92,column:26}},35:{start:{line:94,column:4},end:{line:94,column:102}}},fnMap:{0:{name:"groupFeaturesBySourceLayer",decl:{start:{line:4,column:9},end:{line:4,column:35}},loc:{start:{line:4,column:46},end:{line:20,column:1}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:32},end:{line:18,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:59},end:{line:11,column:90}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:35},end:{line:45,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:11},end:{line:95,column:3}},line:46},5:{name:"(anonymous_5)",decl:{start:{line:48,column:43},end:{line:48,column:44}},loc:{start:{line:48,column:62},end:{line:93,column:5}},line:48},6:{name:"(anonymous_6)",decl:{start:{line:49,column:48},end:{line:49,column:49}},loc:{start:{line:49,column:66},end:{line:88,column:7}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:67,column:27},end:{line:67,column:28}},loc:{start:{line:67,column:33},end:{line:69,column:19}},line:67}},branchMap:{0:{loc:{start:{line:9,column:4},end:{line:17,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:17,column:5}},{start:{line:13,column:11},end:{line:17,column:5}}],line:9},1:{loc:{start:{line:14,column:27},end:{line:14,column:51}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:45}},{start:{line:14,column:49},end:{line:14,column:51}}],line:14},2:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:28,column:6},end:{line:30,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:30,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:28},4:{loc:{start:{line:28,column:10},end:{line:28,column:64}},type:"binary-expr",locations:[{start:{line:28,column:10},end:{line:28,column:36}},{start:{line:28,column:40},end:{line:28,column:64}}],line:28},5:{loc:{start:{line:31,column:6},end:{line:33,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:33,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},6:{loc:{start:{line:31,column:10},end:{line:31,column:64}},type:"binary-expr",locations:[{start:{line:31,column:10},end:{line:31,column:36}},{start:{line:31,column:40},end:{line:31,column:64}}],line:31},7:{loc:{start:{line:34,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:34,column:6},end:{line:36,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},8:{loc:{start:{line:34,column:10},end:{line:34,column:64}},type:"binary-expr",locations:[{start:{line:34,column:10},end:{line:34,column:36}},{start:{line:34,column:40},end:{line:34,column:64}}],line:34},9:{loc:{start:{line:37,column:6},end:{line:39,column:7}},type:"if",locations:[{start:{line:37,column:6},end:{line:39,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},10:{loc:{start:{line:37,column:10},end:{line:37,column:84}},type:"binary-expr",locations:[{start:{line:37,column:10},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:84}}],line:37},11:{loc:{start:{line:71,column:20},end:{line:75,column:24}},type:"binary-expr",locations:[{start:{line:71,column:20},end:{line:71,column:38}},{start:{line:71,column:58},end:{line:75,column:24}}],line:71},12:{loc:{start:{line:77,column:20},end:{line:80,column:24}},type:"binary-expr",locations:[{start:{line:77,column:20},end:{line:77,column:35}},{start:{line:77,column:55},end:{line:80,column:24}}],line:77}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlLayerPopup.tsx"],names:[],mappings:"AA8EU,cAkBsB,YAlBtB;AA9EV,OAAO,WAAW;AAClB,OAAO,eAAe;AAGtB,SAAS,2BAA2B,UAA4B;AAC9D,QAAM,UAA6C,CAAC;AAEpD,QAAM,mBAA4C,CAAC;AAEnD,WAAS,QAAQ,aAAW;AAC1B,UAAM,YAAY,QAAQ,MAAM,cAAc;AAC9C,QAAG,OAAO,UAAU,eAAe,KAAK,kBAAkB,QAAQ,MAAM,EAAE,GAAG;AAC3E,uBAAiB,QAAQ,MAAM,EAAE;AAEjC,YAAM,gBAAgB,QAAQ,SAAS,EAAE,KAAK,CAAC,MAAsB,EAAE,MAAM,OAAO,QAAQ,MAAM,EAAE;AAEpG,oBAAe,UAAU,iBAAiB,QAAQ,MAAM,EAAE;AAAA,IAC5D,OAAO;AACL,cAAQ,SAAS,IAAI,QAAQ,SAAS,KAAK,CAAC;AAC5C,cAAQ,SAAS,EAAE,KAAK,OAAO;AAE/B,uBAAiB,QAAQ,MAAM,EAAE,IAAI;AAAA,IACvC;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAQA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,iBAAiB,SAAyB,OAAgB;AAExD,QAAI,CAAC,QAAQ,MAAM,OAAO;AACxB;AAAA,IACF;AAEA,QAAI;AACF,YAAM,aAAa,QAAQ,MAAM;AAEjC,UAAG,gBAAgB,cAAc,WAAW,YAAY,GAAG;AACzD,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,gBAAgB,cAAc,WAAW,YAAY,GAAG;AAC1D,eAAO,OAAO,WAAW,YAAY,CAAC;AAAA,MACxC;AACA,UAAI,0BAA0B,cAAc,WAAW,sBAAsB,GAAG;AAC9E,eAAO,OAAO,WAAW,sBAAsB,CAAC;AAAA,MAClD;AAEA,aAAO;AAAA,IACT,SAGO,KAAK;AACV,cAAQ,KAAK,uCAAuC,GAAG;AACvD,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,UAAU,2BAA2B,KAAK,MAAM,QAAQ;AAE9D,UAAM,QAAQ,OAAO,KAAK,OAAO,EAAE,IAAI,mBAAiB;AACtD,YAAM,SAAS,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAyB,QAAgB;AAClF,cAAM,eAAe,KAAK,iBAAiB,SAAS,KAAK,MAAM,IAAI;AAEnE,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,WAAU;AAAA,YAEV;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,OAAO,EAAC,YAAY,aAAY;AAAA;AAAA,cACjC;AAAA,cACD;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,MAAM;AACb,yBAAK,MAAM,cAAc,QAAQ,MAAM,EAAE;AAAA,kBAC3C;AAAA,kBAEC;AAAA,4BAAQ,MAAM,QACb,oBAAC,aAAU,MAAM,QAAQ,MAAM,MAAM,OAAO;AAAA,sBAC1C,OAAO;AAAA,sBACP,QAAQ;AAAA,sBACR,cAAc;AAAA,oBAChB,GAAE;AAAA,oBAEH,QAAQ,MAAM;AAAA,oBACd,QAAQ,WAAW,qBAAC,UAAK;AAAA;AAAA,sBAAI,QAAQ;AAAA,uBAAQ;AAAA;AAAA;AAAA,cAChD;AAAA;AAAA;AAAA,UAtBK;AAAA,QAuBP;AAAA,MACF,CAAC;AACD,aAAO,qBAAC,SACN;AAAA,4BAAC,SAAI,WAAU,2BAA2B,yBAAc;AAAA,QACvD;AAAA,WAFc,aAGjB;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,gCACnB,iBACH;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea1e9940e142b9a2a1c672f6983f6f5748c841e6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Jr=function(){return l},l}Jr();function e$(n){Jr().f[0]++;const e=(Jr().s[0]++,{}),t=(Jr().s[1]++,{});return Jr().s[2]++,n.forEach(r=>{Jr().f[1]++;const i=(Jr().s[3]++,r.layer["source-layer"]);if(Jr().s[4]++,Object.prototype.hasOwnProperty.call(t,r.layer.id)){Jr().b[0][0]++,Jr().s[5]++,t[r.layer.id]++;const s=(Jr().s[6]++,e[i].find(l=>(Jr().f[2]++,Jr().s[7]++,l.layer.id===r.layer.id)));Jr().s[8]++,s.counter=t[r.layer.id]}else Jr().b[0][1]++,Jr().s[9]++,e[i]=(Jr().b[1][0]++,e[i]||(Jr().b[1][1]++,[])),Jr().s[10]++,e[i].push(r),Jr().s[11]++,t[r.layer.id]=1}),Jr().s[12]++,e}class WF extends sr.Component{_getFeatureColor(e,t){if(Jr().f[3]++,Jr().s[13]++,e.layer.paint)Jr().b[2][1]++;else{Jr().b[2][0]++,Jr().s[14]++;return}Jr().s[15]++;try{const r=(Jr().s[16]++,e.layer.paint);return Jr().s[17]++,Jr().b[4][0]++,"text-color"in r&&(Jr().b[4][1]++,r["text-color"])?(Jr().b[3][0]++,Jr().s[18]++,String(r["text-color"])):(Jr().b[3][1]++,Jr().s[19]++,Jr().b[6][0]++,"fill-color"in r&&(Jr().b[6][1]++,r["fill-color"])?(Jr().b[5][0]++,Jr().s[20]++,String(r["fill-color"])):(Jr().b[5][1]++,Jr().s[21]++,Jr().b[8][0]++,"line-color"in r&&(Jr().b[8][1]++,r["line-color"])?(Jr().b[7][0]++,Jr().s[22]++,String(r["line-color"])):(Jr().b[7][1]++,Jr().s[23]++,Jr().b[10][0]++,"fill-extrusion-color"in r&&(Jr().b[10][1]++,r["fill-extrusion-color"])?(Jr().b[9][0]++,Jr().s[24]++,String(r["fill-extrusion-color"])):(Jr().b[9][1]++,Jr().s[25]++,"black"))))}catch(r){return Jr().s[26]++,console.warn("Unable to get feature color, error:",r),Jr().s[27]++,"black"}}render(){Jr().f[4]++;const e=(Jr().s[28]++,e$(this.props.features)),t=(Jr().s[29]++,Object.keys(e).map(r=>{Jr().f[5]++;const i=(Jr().s[30]++,e[r].map((s,l)=>{Jr().f[6]++;const o=(Jr().s[31]++,this._getFeatureColor(s,this.props.zoom));return Jr().s[32]++,le.jsxs("div",{className:"maputnik-popup-layer",children:[le.jsx("div",{className:"maputnik-popup-layer__swatch",style:{background:o}}),le.jsxs("label",{className:"maputnik-popup-layer__label",onClick:()=>{Jr().f[7]++,Jr().s[33]++,this.props.onLayerSelect(s.layer.id)},children:[(Jr().b[11][0]++,s.layer.type&&(Jr().b[11][1]++,le.jsx(NF,{type:s.layer.type,style:{width:14,height:14,paddingRight:3}}))),s.layer.id,(Jr().b[12][0]++,s.counter&&(Jr().b[12][1]++,le.jsxs("span",{children:["  ",s.counter]})))]})]},l)}));return Jr().s[34]++,le.jsxs("div",{children:[le.jsx("div",{className:"maputnik-popup-layer-id",children:r}),i]},r)}));return Jr().s[35]++,le.jsx("div",{className:"maputnik-feature-layer-popup",children:t})}}function $i(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",e="72aafaa905031d9408c36c83b71947160ac6dbad",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx",statementMap:{0:{start:{line:4,column:2},end:{line:4,column:67}},1:{start:{line:4,column:54},end:{line:4,column:67}},2:{start:{line:5,column:2},end:{line:5,column:59}},3:{start:{line:5,column:29},end:{line:5,column:59}},4:{start:{line:6,column:2},end:{line:6,column:115}},5:{start:{line:6,column:91},end:{line:6,column:115}},6:{start:{line:7,column:2},end:{line:7,column:15}},7:{start:{line:10,column:2},end:{line:13,column:12}},8:{start:{line:16,column:2},end:{line:32,column:12}},9:{start:{line:29,column:23},end:{line:29,column:55}},10:{start:{line:30,column:6},end:{line:30,column:74}},11:{start:{line:35,column:25},end:{line:35,column:27}},12:{start:{line:36,column:2},end:{line:49,column:5}},13:{start:{line:37,column:25},end:{line:39,column:6}},14:{start:{line:38,column:6},end:{line:38,column:156}},15:{start:{line:40,column:4},end:{line:48,column:5}},16:{start:{line:41,column:6},end:{line:41,column:35}},17:{start:{line:43,column:6},end:{line:47,column:7}},18:{start:{line:44,column:8},end:{line:44,column:58}},19:{start:{line:46,column:8},end:{line:46,column:60}},20:{start:{line:50,column:2},end:{line:50,column:24}},21:{start:{line:54,column:21},end:{line:54,column:66}},22:{start:{line:55,column:4},end:{line:55,column:250}}},fnMap:{0:{name:"displayValue",decl:{start:{line:3,column:9},end:{line:3,column:21}},loc:{start:{line:3,column:29},end:{line:8,column:1}},line:3},1:{name:"renderKeyValueTableRow",decl:{start:{line:9,column:9},end:{line:9,column:31}},loc:{start:{line:9,column:44},end:{line:14,column:1}},line:9},2:{name:"renderFeature",decl:{start:{line:15,column:9},end:{line:15,column:22}},loc:{start:{line:15,column:37},end:{line:33,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:28,column:40},end:{line:28,column:41}},loc:{start:{line:28,column:58},end:{line:31,column:5}},line:28},4:{name:"removeDuplicatedFeatures",decl:{start:{line:34,column:9},end:{line:34,column:33}},loc:{start:{line:34,column:44},end:{line:51,column:1}},line:34},5:{name:"(anonymous_5)",decl:{start:{line:36,column:19},end:{line:36,column:20}},loc:{start:{line:36,column:32},end:{line:49,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:37,column:50},end:{line:37,column:51}},loc:{start:{line:37,column:64},end:{line:39,column:5}},line:37},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:56,column:3}},line:53}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:4,column:67}},type:"if",locations:[{start:{line:4,column:2},end:{line:4,column:67}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:4},1:{loc:{start:{line:4,column:6},end:{line:4,column:52}},type:"binary-expr",locations:[{start:{line:4,column:6},end:{line:4,column:34}},{start:{line:4,column:38},end:{line:4,column:52}}],line:4},2:{loc:{start:{line:5,column:2},end:{line:5,column:59}},type:"if",locations:[{start:{line:5,column:2},end:{line:5,column:59}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},3:{loc:{start:{line:6,column:2},end:{line:6,column:115}},type:"if",locations:[{start:{line:6,column:2},end:{line:6,column:115}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},4:{loc:{start:{line:6,column:6},end:{line:6,column:89}},type:"binary-expr",locations:[{start:{line:6,column:6},end:{line:6,column:31}},{start:{line:6,column:35},end:{line:6,column:60}},{start:{line:6,column:64},end:{line:6,column:89}}],line:6},5:{loc:{start:{line:21,column:6},end:{line:24,column:10}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:32}},{start:{line:21,column:52},end:{line:24,column:10}}],line:21},6:{loc:{start:{line:38,column:13},end:{line:38,column:155}},type:"binary-expr",locations:[{start:{line:38,column:13},end:{line:38,column:77}},{start:{line:38,column:81},end:{line:38,column:155}}],line:38},7:{loc:{start:{line:40,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:48,column:5}},{start:{line:42,column:11},end:{line:48,column:5}}],line:40},8:{loc:{start:{line:43,column:6},end:{line:47,column:7}},type:"if",locations:[{start:{line:43,column:6},end:{line:47,column:7}},{start:{line:45,column:13},end:{line:47,column:7}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGlFeaturePropertyPopup.tsx"],names:[],mappings:"AAkBS,SACL,KADK;AAlBT,OAAO,WAAW;AAQlB,SAAS,aAAa,OAAoD;AACxE,MAAI,OAAO,UAAU,eAAe,UAAU,KAAM,QAAO;AAC3D,MAAI,iBAAiB,KAAM,QAAO,MAAM,eAAe;AACvD,MAAI,OAAO,UAAU,YACb,OAAO,UAAU,YACjB,OAAO,UAAU,SAAU,QAAO,MAAM,SAAS;AACzD,SAAO;AACT;AAEA,SAAS,uBAAuB,KAAa,OAA2B;AACtE,SAAO,qBAAC,QACN;AAAA,wBAAC,QAAG,WAAU,6BAA6B,eAAI;AAAA,IAC/C,oBAAC,QAAG,WAAU,6BAA6B,iBAAM;AAAA,OAFnC,GAGhB;AACF;AAEA,SAAS,cAAc,SAAyB,KAAa;AAC3D,SAAO,qBAAC,MAAM,UAAN,EACN;AAAA,wBAAC,QACC,+BAAC,QAAG,SAAS,GAAG,WAAU,2BAA2B;AAAA,cAAQ,MAAM,QAAQ;AAAA,MAAE;AAAA,MAAG,QAAQ,MAAM,cAAc;AAAA,MAAG,QAAQ,sBAAsB,qBAAC,UAAK;AAAA;AAAA,QAAI,QAAQ;AAAA,SAAmB;AAAA,OAAQ,GAC5L;AAAA,IACC,uBAAuB,SAAS,QAAQ,SAAS,IAAI;AAAA,IACrD,uBAAuB,OAAO,aAAa,QAAQ,EAAE,CAAC;AAAA,IACtD,OAAO,KAAK,QAAQ,UAAU,EAAE,IAAI,kBAAgB;AACnD,YAAM,WAAW,QAAQ,WAAW,YAAY;AAChD,aAAO,uBAAuB,cAAc,aAAa,QAAQ,CAAC;AAAA,IACpE,CAAC;AAAA,OATyB,GAU5B;AACF;AAEA,SAAS,yBAAyB,UAA4B;AAC5D,QAAM,iBAAmC,CAAC;AAE1C,WAAS,QAAQ,aAAW;AAC1B,UAAM,eAAe,eAAe,UAAU,cAAY;AACxD,aAAO,QAAQ,MAAM,cAAc,MAAM,SAAS,MAAM,cAAc,KACjE,KAAK,UAAU,QAAQ,UAAU,MAAM,KAAK,UAAU,SAAS,UAAU;AAAA,IAChF,CAAC;AAED,QAAG,iBAAiB,IAAI;AACtB,qBAAe,KAAK,OAAO;AAAA,IAC7B,OAAO;AACL,UAAG,wBAAwB,eAAe,YAAY,GAAG;AACvD,uBAAe,YAAY,EAAE;AAAA,MAC/B,OAAO;AACL,uBAAe,YAAY,EAAE,qBAAqB;AAAA,MACpD;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAMA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,WAAW,yBAAyB,KAAK,MAAM,QAAQ;AAC7D,WAAO,oBAAC,SAAI,WAAU,mCACpB,8BAAC,WAAM,WAAU,wBACf,8BAAC,WACE,mBAAS,IAAI,aAAa,GAC7B,GACF,GACF;AAAA,EACF;AACF;AAGA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72aafaa905031d9408c36c83b71947160ac6dbad"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $i=function(){return l},l}$i();function K7(n){return $i().f[0]++,$i().s[0]++,$i().b[1][0]++,typeof n>"u"||($i().b[1][1]++,n===null)?($i().b[0][0]++,$i().s[1]++,n):($i().b[0][1]++,$i().s[2]++,n instanceof Date?($i().b[2][0]++,$i().s[3]++,n.toLocaleString()):($i().b[2][1]++,$i().s[4]++,$i().b[4][0]++,typeof n=="object"||($i().b[4][1]++,typeof n=="number")||($i().b[4][2]++,typeof n=="string")?($i().b[3][0]++,$i().s[5]++,n.toString()):($i().b[3][1]++,$i().s[6]++,n)))}function q3(n,e){return $i().f[1]++,$i().s[7]++,le.jsxs("tr",{children:[le.jsx("td",{className:"maputnik-popup-table-cell",children:n}),le.jsx("td",{className:"maputnik-popup-table-cell",children:e})]},n)}function t$(n,e){return $i().f[2]++,$i().s[8]++,le.jsxs(sr.Fragment,{children:[le.jsx("tr",{children:le.jsxs("td",{colSpan:2,className:"maputnik-popup-layer-id",children:[n.layer.source,": ",n.layer["source-layer"],($i().b[5][0]++,n.inspectModeCounter&&($i().b[5][1]++,le.jsxs("span",{children:["  ",n.inspectModeCounter]})))]})}),q3("$type",n.geometry.type),q3("$id",K7(n.id)),Object.keys(n.properties).map(t=>{$i().f[3]++;const r=($i().s[9]++,n.properties[t]);return $i().s[10]++,q3(t,K7(r))})]},e)}function n$(n){$i().f[4]++;const e=($i().s[11]++,[]);return $i().s[12]++,n.forEach(t=>{$i().f[5]++;const r=($i().s[13]++,e.findIndex(i=>($i().f[6]++,$i().s[14]++,$i().b[6][0]++,t.layer["source-layer"]===i.layer["source-layer"]&&($i().b[6][1]++,JSON.stringify(t.properties)===JSON.stringify(i.properties)))));$i().s[15]++,r===-1?($i().b[7][0]++,$i().s[16]++,e.push(t)):($i().b[7][1]++,$i().s[17]++,"inspectModeCounter"in e[r]?($i().b[8][0]++,$i().s[18]++,e[r].inspectModeCounter++):($i().b[8][1]++,$i().s[19]++,e[r].inspectModeCounter=2))}),$i().s[20]++,e}class r$ extends sr.Component{render(){$i().f[7]++;const e=($i().s[21]++,n$(this.props.features));return $i().s[22]++,le.jsx("div",{className:"maputnik-feature-property-popup",children:le.jsx("table",{className:"maputnik-popup-table",children:le.jsx("tbody",{children:e.map(t$)})})})}}const Hv={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},GF=Object.create(null);for(const n in Hv)Object.hasOwn(Hv,n)&&(GF[Hv[n]]=n);const sc={to:{},get:{}};sc.get=function(n){const e=n.slice(0,3).toLowerCase();let t,r;switch(e){case"hsl":{t=sc.get.hsl(n),r="hsl";break}case"hwb":{t=sc.get.hwb(n),r="hwb";break}default:{t=sc.get.rgb(n),r="rgb";break}}return t?{model:r,value:t}:null};sc.get.rgb=function(n){if(!n)return null;const e=/^#([a-f\d]{3,4})$/i,t=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^(\w+)$/;let l=[0,0,0,1],o,p,v;if(o=n.match(t)){for(v=o[2],o=o[1],p=0;p<3;p++){const x=p*2;l[p]=Number.parseInt(o.slice(x,x+2),16)}v&&(l[3]=Number.parseInt(v,16)/255)}else if(o=n.match(e)){for(o=o[1],v=o[3],p=0;p<3;p++)l[p]=Number.parseInt(o[p]+o[p],16);v&&(l[3]=Number.parseInt(v+v,16)/255)}else if(o=n.match(r)){for(p=0;p<3;p++)l[p]=Number.parseInt(o[p+1],10);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else if(o=n.match(i)){for(p=0;p<3;p++)l[p]=Math.round(Number.parseFloat(o[p+1])*2.55);o[4]&&(l[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else return(o=n.match(s))?o[1]==="transparent"?[0,0,0,0]:Object.hasOwn(Hv,o[1])?(l=Hv[o[1]],l[3]=1,l):null:null;for(p=0;p<3;p++)l[p]=O0(l[p],0,255);return l[3]=O0(l[3],0,1),l};sc.get.hsl=function(n){if(!n)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=O0(Number.parseFloat(t[2]),0,100),l=O0(Number.parseFloat(t[3]),0,100),o=O0(Number.isNaN(r)?1:r,0,1);return[i,s,l,o]}return null};sc.get.hwb=function(n){if(!n)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=n.match(e);if(t){const r=Number.parseFloat(t[4]),i=(Number.parseFloat(t[1])%360+360)%360,s=O0(Number.parseFloat(t[2]),0,100),l=O0(Number.parseFloat(t[3]),0,100),o=O0(Number.isNaN(r)?1:r,0,1);return[i,s,l,o]}return null};sc.to.hex=function(...n){return"#"+N_(n[0])+N_(n[1])+N_(n[2])+(n[3]<1?N_(Math.round(n[3]*255)):"")};sc.to.rgb=function(...n){return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};sc.to.rgb.percent=function(...n){const e=Math.round(n[0]/255*100),t=Math.round(n[1]/255*100),r=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+t+"%, "+r+"%)":"rgba("+e+"%, "+t+"%, "+r+"%, "+n[3]+")"};sc.to.hsl=function(...n){return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};sc.to.hwb=function(...n){let e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};sc.to.keyword=function(...n){return GF[n.slice(0,3)]};function O0(n,e,t){return Math.min(Math.max(e,n),t)}function N_(n){const e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}const hC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},QF={};for(const n of Object.keys(hC))QF[hC[n]]=n;const ui={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},km=(6/29)**3;for(const n of Object.keys(ui)){if(!("channels"in ui[n]))throw new Error("missing channels property: "+n);if(!("labels"in ui[n]))throw new Error("missing channel labels property: "+n);if(ui[n].labels.length!==ui[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=ui[n];delete ui[n].channels,delete ui[n].labels,Object.defineProperty(ui[n],"channels",{value:e}),Object.defineProperty(ui[n],"labels",{value:t})}ui.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),s=Math.max(e,t,r),l=s-i;let o,p;switch(s){case i:{o=0;break}case e:{o=(t-r)/l;break}case t:{o=2+(r-e)/l;break}case r:{o=4+(e-t)/l;break}}o=Math.min(o*60,360),o<0&&(o+=360);const v=(i+s)/2;return s===i?p=0:v<=.5?p=l/(s+i):p=l/(2-s-i),[o,p*100,v*100]};ui.rgb.hsv=function(n){let e,t,r,i,s;const l=n[0]/255,o=n[1]/255,p=n[2]/255,v=Math.max(l,o,p),x=v-Math.min(l,o,p),B=function(T){return(v-T)/6/x+1/2};if(x===0)i=0,s=0;else{switch(s=x/v,e=B(l),t=B(o),r=B(p),v){case l:{i=r-t;break}case o:{i=1/3+e-r;break}case p:{i=2/3+t-e;break}}i<0?i+=1:i>1&&(i-=1)}return[i*360,s*100,v*100]};ui.rgb.hwb=function(n){const e=n[0],t=n[1];let r=n[2];const i=ui.rgb.hsl(n)[0],s=1/255*Math.min(e,Math.min(t,r));return r=1-1/255*Math.max(e,Math.max(t,r)),[i,s*100,r*100]};ui.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(1-e,1-t,1-r),s=(1-e-i)/(1-i)||0,l=(1-t-i)/(1-i)||0,o=(1-r-i)/(1-i)||0;return[s*100,l*100,o*100,i*100]};function i$(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}ui.rgb.keyword=function(n){const e=QF[n];if(e)return e;let t=Number.POSITIVE_INFINITY,r;for(const i of Object.keys(hC)){const s=hC[i],l=i$(n,s);l<t&&(t=l,r=i)}return r};ui.keyword.rgb=function(n){return hC[n]};ui.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,r=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=e*.4124564+t*.3575761+r*.1804375,s=e*.2126729+t*.7151522+r*.072175,l=e*.0193339+t*.119192+r*.9503041;return[i*100,s*100,l*100]};ui.rgb.lab=function(n){const e=ui.rgb.xyz(n);let t=e[0],r=e[1],i=e[2];t/=95.047,r/=100,i/=108.883,t=t>km?t**(1/3):7.787*t+16/116,r=r>km?r**(1/3):7.787*r+16/116,i=i>km?i**(1/3):7.787*i+16/116;const s=116*r-16,l=500*(t-r),o=200*(r-i);return[s,l,o]};ui.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;let i,s;if(t===0)return s=r*255,[s,s,s];const l=r<.5?r*(1+t):r+t-r*t,o=2*r-l,p=[0,0,0];for(let v=0;v<3;v++)i=e+1/3*-(v-1),i<0&&i++,i>1&&i--,6*i<1?s=o+(l-o)*6*i:2*i<1?s=l:3*i<2?s=o+(l-o)*(2/3-i)*6:s=o,p[v]=s*255;return p};ui.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,r=n[2]/100,i=t;const s=Math.max(r,.01);r*=2,t*=r<=1?r:2-r,i*=s<=1?s:2-s;const l=(r+t)/2,o=r===0?2*i/(s+i):2*t/(r+t);return[e,o*100,l*100]};ui.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let r=n[2]/100;const i=Math.floor(e)%6,s=e-Math.floor(e),l=255*r*(1-t),o=255*r*(1-t*s),p=255*r*(1-t*(1-s));switch(r*=255,i){case 0:return[r,p,l];case 1:return[o,r,l];case 2:return[l,r,p];case 3:return[l,o,r];case 4:return[p,l,r];case 5:return[r,l,o]}};ui.hsv.hsl=function(n){const e=n[0],t=n[1]/100,r=n[2]/100,i=Math.max(r,.01);let s,l;l=(2-t)*r;const o=(2-t)*i;return s=t*i,s/=o<=1?o:2-o,s=s||0,l/=2,[e,s*100,l*100]};ui.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,r=n[2]/100;const i=t+r;let s;i>1&&(t/=i,r/=i);const l=Math.floor(6*e),o=1-r;s=6*e-l,(l&1)!==0&&(s=1-s);const p=t+s*(o-t);let v,x,B;switch(l){default:case 6:case 0:{v=o,x=p,B=t;break}case 1:{v=p,x=o,B=t;break}case 2:{v=t,x=o,B=p;break}case 3:{v=t,x=p,B=o;break}case 4:{v=p,x=t,B=o;break}case 5:{v=o,x=t,B=p;break}}return[v*255,x*255,B*255]};ui.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,i=n[3]/100,s=1-Math.min(1,e*(1-i)+i),l=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,r*(1-i)+i);return[s*255,l*255,o*255]};ui.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100;let i,s,l;return i=e*3.2404542+t*-1.5371385+r*-.4985314,s=e*-.969266+t*1.8760108+r*.041556,l=e*.0556434+t*-.2040259+r*1.0572252,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),l=Math.min(Math.max(0,l),1),[i*255,s*255,l*255]};ui.xyz.lab=function(n){let e=n[0],t=n[1],r=n[2];e/=95.047,t/=100,r/=108.883,e=e>km?e**(1/3):7.787*e+16/116,t=t>km?t**(1/3):7.787*t+16/116,r=r>km?r**(1/3):7.787*r+16/116;const i=116*t-16,s=500*(e-t),l=200*(t-r);return[i,s,l]};ui.lab.xyz=function(n){const e=n[0],t=n[1],r=n[2];let i,s,l;s=(e+16)/116,i=t/500+s,l=s-r/200;const o=s**3,p=i**3,v=l**3;return s=o>km?o:(s-16/116)/7.787,i=p>km?p:(i-16/116)/7.787,l=v>km?v:(l-16/116)/7.787,i*=95.047,s*=100,l*=108.883,[i,s,l]};ui.lab.lch=function(n){const e=n[0],t=n[1],r=n[2];let i;i=Math.atan2(r,t)*360/2/Math.PI,i<0&&(i+=360);const l=Math.sqrt(t*t+r*r);return[e,l,i]};ui.lch.lab=function(n){const e=n[0],t=n[1],i=n[2]/360*2*Math.PI,s=t*Math.cos(i),l=t*Math.sin(i);return[e,s,l]};ui.rgb.ansi16=function(n,e=null){const[t,r,i]=n;let s=e===null?ui.rgb.hsv(n)[2]:e;if(s=Math.round(s/50),s===0)return 30;let l=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(l+=60),l};ui.hsv.ansi16=function(n){return ui.rgb.ansi16(ui.hsv.rgb(n),n[2])};ui.rgb.ansi256=function(n){const e=n[0],t=n[1],r=n[2];return e>>4===t>>4&&t>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)};ui.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,r=(e&1)*t*255,i=(e>>1&1)*t*255,s=(e>>2&1)*t*255;return[r,i,s]};ui.ansi256.rgb=function(n){if(n=n[0],n>=232){const s=(n-232)*10+8;return[s,s,s]}n-=16;let e;const t=Math.floor(n/36)/5*255,r=Math.floor((e=n%36)/6)/5*255,i=e%6/5*255;return[t,r,i]};ui.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};ui.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(o=>o+o).join(""));const r=Number.parseInt(t,16),i=r>>16&255,s=r>>8&255,l=r&255;return[i,s,l]};ui.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.max(Math.max(e,t),r),s=Math.min(Math.min(e,t),r),l=i-s;let o;const p=l<1?s/(1-l):0;return l<=0?o=0:i===e?o=(t-r)/l%6:i===t?o=2+(r-e)/l:o=4+(e-t)/l,o/=6,o%=1,[o*360,l*100,p*100]};ui.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=t<.5?2*e*t:2*e*(1-t);let i=0;return r<1&&(i=(t-.5*r)/(1-r)),[n[0],r*100,i*100]};ui.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=e*t;let i=0;return r<1&&(i=(t-r)/(1-r)),[n[0],r*100,i*100]};ui.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;if(t===0)return[r*255,r*255,r*255];const i=[0,0,0],s=e%1*6,l=s%1,o=1-l;let p=0;switch(Math.floor(s)){case 0:{i[0]=1,i[1]=l,i[2]=0;break}case 1:{i[0]=o,i[1]=1,i[2]=0;break}case 2:{i[0]=0,i[1]=1,i[2]=l;break}case 3:{i[0]=0,i[1]=o,i[2]=1;break}case 4:{i[0]=l,i[1]=0,i[2]=1;break}default:i[0]=1,i[1]=0,i[2]=o}return p=(1-t)*r,[(t*i[0]+p)*255,(t*i[1]+p)*255,(t*i[2]+p)*255]};ui.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);let i=0;return r>0&&(i=e/r),[n[0],i*100,r*100]};ui.hcg.hsl=function(n){const e=n[1]/100,r=n[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[n[0],i*100,r*100]};ui.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,r=e+t*(1-e);return[n[0],(r-e)*100,(1-r)*100]};ui.hwb.hcg=function(n){const e=n[1]/100,r=1-n[2]/100,i=r-e;let s=0;return i<1&&(s=(r-i)/(1-i)),[n[0],i*100,s*100]};ui.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};ui.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};ui.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};ui.gray.hsl=function(n){return[0,0,n[0]]};ui.gray.hsv=ui.gray.hsl;ui.gray.hwb=function(n){return[0,100,n[0]]};ui.gray.cmyk=function(n){return[0,0,0,n[0]]};ui.gray.lab=function(n){return[n[0],0,0]};ui.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r};ui.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function o$(){const n={},e=Object.keys(ui);for(let{length:t}=e,r=0;r<t;r++)n[e[r]]={distance:-1,parent:null};return n}function s$(n){const e=o$(),t=[n];for(e[n].distance=0;t.length>0;){const r=t.pop(),i=Object.keys(ui[r]);for(let{length:s}=i,l=0;l<s;l++){const o=i[l],p=e[o];p.distance===-1&&(p.distance=e[r].distance+1,p.parent=r,t.unshift(o))}}return e}function a$(n,e){return function(t){return e(n(t))}}function l$(n,e){const t=[e[n].parent,n];let r=ui[e[n].parent][n],i=e[n].parent;for(;e[i].parent;)t.unshift(e[i].parent),r=a$(ui[e[i].parent][i],r),i=e[i].parent;return r.conversion=t,r}function u$(n){const e=s$(n),t={},r=Object.keys(e);for(let{length:i}=r,s=0;s<i;s++){const l=r[s];e[l].parent!==null&&(t[l]=l$(l,e))}return t}const Cc={},A$=Object.keys(ui);function c$(n){const e=function(...t){const r=t[0];return r==null?r:(r.length>1&&(t=r),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function d$(n){const e=function(...t){const r=t[0];if(r==null)return r;r.length>1&&(t=r);const i=n(t);if(typeof i=="object")for(let{length:s}=i,l=0;l<s;l++)i[l]=Math.round(i[l]);return i};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of A$){Cc[n]={},Object.defineProperty(Cc[n],"channels",{value:ui[n].channels}),Object.defineProperty(Cc[n],"labels",{value:ui[n].labels});const e=u$(n),t=Object.keys(e);for(const r of t){const i=e[r];Cc[n][r]=d$(i),Cc[n][r].raw=c$(i)}}const YF=["keyword","gray","hex"],HE={};for(const n of Object.keys(Cc))HE[[...Cc[n].labels].sort().join("")]=n;const Zv={};function DA(n,e){if(!(this instanceof DA))return new DA(n,e);if(e&&e in YF&&(e=null),e&&!(e in Cc))throw new Error("Unknown model: "+e);let t,r;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof DA)this.model=n.model,this.color=[...n.color],this.valpha=n.valpha;else if(typeof n=="string"){const i=sc.get(n);if(i===null)throw new Error("Unable to parse color from string: "+n);this.model=i.model,r=Cc[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(n.length>0){this.model=e||"rgb",r=Cc[this.model].channels;const i=Array.prototype.slice.call(n,0,r);this.color=ZE(i,r),this.valpha=typeof n[r]=="number"?n[r]:1}else if(typeof n=="number")this.model="rgb",this.color=[n>>16&255,n>>8&255,n&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(n);"alpha"in n&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);const s=i.sort().join("");if(!(s in HE))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=HE[s];const{labels:l}=Cc[this.model],o=[];for(t=0;t<l.length;t++)o.push(n[l[t]]);this.color=ZE(o)}if(Zv[this.model])for(r=Cc[this.model].channels,t=0;t<r;t++){const i=Zv[this.model][t];i&&(this.color[t]=i(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}DA.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(n){let e=this.model in sc.to?this:this.rgb();e=e.round(typeof n=="number"?n:1);const t=e.valpha===1?e.color:[...e.color,this.valpha];return sc.to[e.model](...t)},percentString(n){const e=this.rgb().round(typeof n=="number"?n:1),t=e.valpha===1?e.color:[...e.color,this.valpha];return sc.to.rgb.percent(...t)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const n={},{channels:e}=Cc[this.model],{labels:t}=Cc[this.model];for(let r=0;r<e;r++)n[t[r]]=this.color[r];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray(){const n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject(){const n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round(n){return n=Math.max(n||0,0),new DA([...this.color.map(f$(n)),this.valpha],this.model)},alpha(n){return n!==void 0?new DA([...this.color,Math.max(0,Math.min(1,n))],this.model):this.valpha},red:Uu("rgb",0,nc(255)),green:Uu("rgb",1,nc(255)),blue:Uu("rgb",2,nc(255)),hue:Uu(["hsl","hsv","hsl","hwb","hcg"],0,n=>(n%360+360)%360),saturationl:Uu("hsl",1,nc(100)),lightness:Uu("hsl",2,nc(100)),saturationv:Uu("hsv",1,nc(100)),value:Uu("hsv",2,nc(100)),chroma:Uu("hcg",1,nc(100)),gray:Uu("hcg",2,nc(100)),white:Uu("hwb",1,nc(100)),wblack:Uu("hwb",2,nc(100)),cyan:Uu("cmyk",0,nc(100)),magenta:Uu("cmyk",1,nc(100)),yellow:Uu("cmyk",2,nc(100)),black:Uu("cmyk",3,nc(100)),x:Uu("xyz",0,nc(95.047)),y:Uu("xyz",1,nc(100)),z:Uu("xyz",2,nc(108.833)),l:Uu("lab",0,nc(100)),a:Uu("lab",1),b:Uu("lab",2),keyword(n){return n!==void 0?new DA(n):Cc[this.model].keyword(this.color)},hex(n){return n!==void 0?new DA(n):sc.to.hex(...this.rgb().round().color)},hexa(n){if(n!==void 0)return new DA(n);const e=this.rgb().round().color;let t=Math.round(this.valpha*255).toString(16).toUpperCase();return t.length===1&&(t="0"+t),sc.to.hex(...e)+t},rgbNumber(){const n=this.rgb().color;return(n[0]&255)<<16|(n[1]&255)<<8|n[2]&255},luminosity(){const n=this.rgb().color,e=[];for(const[t,r]of n.entries()){const i=r/255;e[t]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(n){const e=this.luminosity(),t=n.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level(n){const e=this.contrast(n);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const n=this.rgb().color;return(n[0]*2126+n[1]*7152+n[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const n=this.rgb();for(let e=0;e<3;e++)n.color[e]=255-n.color[e];return n},lighten(n){const e=this.hsl();return e.color[2]+=e.color[2]*n,e},darken(n){const e=this.hsl();return e.color[2]-=e.color[2]*n,e},saturate(n){const e=this.hsl();return e.color[1]+=e.color[1]*n,e},desaturate(n){const e=this.hsl();return e.color[1]-=e.color[1]*n,e},whiten(n){const e=this.hwb();return e.color[1]+=e.color[1]*n,e},blacken(n){const e=this.hwb();return e.color[2]+=e.color[2]*n,e},grayscale(){const n=this.rgb().color,e=n[0]*.3+n[1]*.59+n[2]*.11;return DA.rgb(e,e,e)},fade(n){return this.alpha(this.valpha-this.valpha*n)},opaquer(n){return this.alpha(this.valpha+this.valpha*n)},rotate(n){const e=this.hsl();let t=e.color[0];return t=(t+n)%360,t=t<0?360+t:t,e.color[0]=t,e},mix(n,e){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);const t=n.rgb(),r=this.rgb(),i=e===void 0?.5:e,s=2*i-1,l=t.alpha()-r.alpha(),o=((s*l===-1?s:(s+l)/(1+s*l))+1)/2,p=1-o;return DA.rgb(o*t.red()+p*r.red(),o*t.green()+p*r.green(),o*t.blue()+p*r.blue(),t.alpha()*i+r.alpha()*(1-i))}};for(const n of Object.keys(Cc)){if(YF.includes(n))continue;const{channels:e}=Cc[n];DA.prototype[n]=function(...t){return this.model===n?new DA(this):t.length>0?new DA(t,n):new DA([...p$(Cc[this.model][n].raw(this.color)),this.valpha],n)},DA[n]=function(...t){let r=t[0];return typeof r=="number"&&(r=ZE(t,e)),new DA(r,n)}}function h$(n,e){return Number(n.toFixed(e))}function f$(n){return function(e){return h$(e,n)}}function Uu(n,e,t){n=Array.isArray(n)?n:[n];for(const r of n)(Zv[r]||(Zv[r]=[]))[e]=t;return n=n[0],function(r){let i;return r!==void 0?(t&&(r=t(r)),i=this[n](),i.color[e]=r,i):(i=this[n]().color[e],t&&(i=t(i)),i)}}function nc(n){return function(e){return Math.max(0,Math.min(n,e))}}function p$(n){return Array.isArray(n)?n:[n]}function ZE(n,e){for(let t=0;t<e;t++)typeof n[t]!="number"&&(n[t]=0);return n}function Js(){var n="/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",e="9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts",statementMap:{0:{start:{line:2,column:9},end:{line:2,column:15}},1:{start:{line:3,column:15},end:{line:3,column:21}},2:{start:{line:4,column:12},end:{line:4,column:16}},3:{start:{line:8,column:4},end:{line:8,column:20}},4:{start:{line:9,column:4},end:{line:9,column:52}},5:{start:{line:10,column:4},end:{line:10,column:93}},6:{start:{line:11,column:4},end:{line:11,column:70}},7:{start:{line:12,column:4},end:{line:12,column:27}},8:{start:{line:13,column:4},end:{line:13,column:29}},9:{start:{line:14,column:4},end:{line:14,column:27}},10:{start:{line:17,column:4},end:{line:17,column:60}},11:{start:{line:20,column:4},end:{line:22,column:6}},12:{start:{line:23,column:4},end:{line:23,column:57}},13:{start:{line:24,column:4},end:{line:24,column:27}},14:{start:{line:27,column:4},end:{line:27,column:57}},15:{start:{line:27,column:33},end:{line:27,column:55}},16:{start:{line:28,column:4},end:{line:28,column:57}},17:{start:{line:28,column:33},end:{line:28,column:55}},18:{start:{line:29,column:4},end:{line:29,column:58}},19:{start:{line:29,column:34},end:{line:29,column:56}},20:{start:{line:32,column:4},end:{line:32,column:60}},21:{start:{line:33,column:4},end:{line:33,column:23}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:16},end:{line:6,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:13},end:{line:15,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:20},end:{line:18,column:3}},line:16},3:{name:"(anonymous_3)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:18},end:{line:25,column:3}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:22},end:{line:30,column:3}},line:26},5:{name:"(anonymous_5)",decl:{start:{line:27,column:27},end:{line:27,column:28}},loc:{start:{line:27,column:33},end:{line:27,column:55}},line:27},6:{name:"(anonymous_6)",decl:{start:{line:28,column:27},end:{line:28,column:28}},loc:{start:{line:28,column:33},end:{line:28,column:55}},line:28},7:{name:"(anonymous_7)",decl:{start:{line:29,column:28},end:{line:29,column:29}},loc:{start:{line:29,column:34},end:{line:29,column:56}},line:29},8:{name:"(anonymous_8)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:13},end:{line:34,column:3}},line:31}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/zoomcontrol.ts"],names:[],mappings:"AAEA,qBAAqB,YAAY;AAAA,EAC/B,OAAuB;AAAA,EACvB,aAAyC;AAAA,EACzC,UAAkC;AAAA,EAElC,cAAc;AAAA,EAAC;AAAA,EAEf,MAAM,KAAU;AACd,SAAK,OAAO;AACZ,SAAK,aAAa,SAAS,cAAc,KAAK;AAC9C,SAAK,WAAW,YAAY;AAC5B,SAAK,WAAW,aAAa,eAAe,oBAAoB;AAChE,SAAK,SAAS,OAAO;AACrB,SAAK,kBAAkB;AAEvB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,kBAAkB;AAChB,SAAK,QAAS,YAAY,KAAK,KAAM,QAAQ,EAAE,QAAQ,CAAC;AAAA,EAC1D;AAAA,EAEA,SAAS,OAAe;AACtB,SAAK,WAAY,YAAY;AAAA,QACzB,KAAK;AAAA;AAET,SAAK,UAAU,KAAK,WAAY,cAAc,MAAM;AACpD,SAAK,gBAAgB;AAAA,EACvB;AAAA,EAEA,oBAAoB;AAClB,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,UAAU,MAAM,KAAK,gBAAgB,CAAC;AACpD,SAAK,KAAM,GAAG,WAAW,MAAM,KAAK,gBAAgB,CAAC;AAAA,EACvD;AAAA,EAEA,WAAW;AACT,SAAK,WAAY,WAAY,YAAY,KAAK,UAAW;AACzD,SAAK,OAAO;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9dd3eea5f46b0cc48ff3173a7af02bc32aa63f10"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Js=function(){return l},l}Js();class m${constructor(){Pn(this,"_map",(Js().s[0]++,void 0));Pn(this,"_container",(Js().s[1]++,void 0));Pn(this,"_textEl",(Js().s[2]++,null));Js().f[0]++}onAdd(e){return Js().f[1]++,Js().s[3]++,this._map=e,Js().s[4]++,this._container=document.createElement("div"),Js().s[5]++,this._container.className="maplibregl-ctrl maplibregl-ctrl-group maplibregl-ctrl-zoom",Js().s[6]++,this._container.setAttribute("data-wd-key","maplibre:ctrl-zoom"),Js().s[7]++,this.setLabel("Zoom:"),Js().s[8]++,this.addEventListeners(),Js().s[9]++,this._container}updateZoomLevel(){Js().f[2]++,Js().s[10]++,this._textEl.innerHTML=this._map.getZoom().toFixed(2)}setLabel(e){Js().f[3]++,Js().s[11]++,this._container.innerHTML=`
      ${e} <span></span>
    `,Js().s[12]++,this._textEl=this._container.querySelector("span"),Js().s[13]++,this.updateZoomLevel()}addEventListeners(){Js().f[4]++,Js().s[14]++,this._map.on("render",()=>(Js().f[5]++,Js().s[15]++,this.updateZoomLevel())),Js().s[16]++,this._map.on("zoomIn",()=>(Js().f[6]++,Js().s[17]++,this.updateZoomLevel())),Js().s[18]++,this._map.on("zoomOut",()=>(Js().f[7]++,Js().s[19]++,this.updateZoomLevel()))}onRemove(){Js().f[8]++,Js().s[20]++,this._container.parentNode.removeChild(this._container),Js().s[21]++,this._map=void 0}}function XE(n,e,t){const r={id:[e,t,"circle"].join("_"),source:e,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return t&&(r["source-layer"]=t),r}function JE(n,e,t,r){const i={id:[t,r,"polygon"].join("_"),source:t,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return r&&(i["source-layer"]=r),i}function e6(n,e,t){const r={id:[e,t,"line"].join("_"),source:e,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return t&&(r["source-layer"]=t),r}function g$(n,e){const t=[],r=[],i=[];function s(l){return{circle:e(l,.8),line:e(l,.6),polygon:e(l,.3),polygonOutline:e(l,.6),default:e(l,1)}}return Object.keys(n).forEach(l=>{const o=n[l];if(!o||o.length===0){const p=s(l);r.push(XE(p.circle,l)),i.push(e6(p.line,l)),t.push(JE(p.polygon,p.polygonOutline,l))}else o.forEach(p=>{const v=s(p);r.push(XE(v.circle,l,p)),i.push(e6(v.line,l,p)),t.push(JE(v.polygon,v.polygonOutline,l,p))})}),t.concat(i).concat(r)}function y$(n,e,t){t=Object.assign({backgroundColor:"#fff"},t);const r={id:"background",type:"background",paint:{"background-color":t.backgroundColor}},i={};return Object.keys(n.sources).forEach(s=>{const l=n.sources[s];(l.type==="vector"||l.type==="geojson")&&(i[s]=l)}),Object.assign(n,{layers:[r].concat(e),sources:i})}const V3={polygonLayer:JE,lineLayer:e6,circleLayer:XE,generateInspectStyle:y$,generateColoredLayers:g$};function mo(){var n="/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",e="aec0f701e803624fae461cc89b5fc887ff556587",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/highlight.ts",statementMap:{0:{start:{line:4,column:2},end:{line:8,column:3}},1:{start:{line:5,column:4},end:{line:5,column:33}},2:{start:{line:6,column:9},end:{line:8,column:3}},3:{start:{line:7,column:4},end:{line:7,column:30}},4:{start:{line:9,column:2},end:{line:13,column:3}},5:{start:{line:10,column:4},end:{line:10,column:28}},6:{start:{line:12,column:4},end:{line:12,column:23}},7:{start:{line:14,column:2},end:{line:14,column:29}},8:{start:{line:15,column:2},end:{line:15,column:11}},9:{start:{line:18,column:2},end:{line:18,column:84}},10:{start:{line:18,column:72},end:{line:18,column:84}},11:{start:{line:19,column:24},end:{line:19,column:51}},12:{start:{line:20,column:16},end:{line:20,column:52}},13:{start:{line:21,column:2},end:{line:23,column:3}},14:{start:{line:22,column:4},end:{line:22,column:104}},15:{start:{line:24,column:2},end:{line:26,column:3}},16:{start:{line:25,column:4},end:{line:25,column:96}},17:{start:{line:27,column:2},end:{line:29,column:3}},18:{start:{line:28,column:4},end:{line:28,column:94}},19:{start:{line:30,column:2},end:{line:30,column:14}}},fnMap:{0:{name:"changeLayer",decl:{start:{line:3,column:9},end:{line:3,column:20}},loc:{start:{line:3,column:31},end:{line:16,column:1}},line:3},1:{name:"colorHighlightedLayer",decl:{start:{line:17,column:16},end:{line:17,column:37}},loc:{start:{line:17,column:45},end:{line:31,column:1}},line:17}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:8,column:3}},{start:{line:6,column:9},end:{line:8,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:8,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},2:{loc:{start:{line:9,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:13,column:3}},{start:{line:11,column:9},end:{line:13,column:3}}],line:9},3:{loc:{start:{line:18,column:2},end:{line:18,column:84}},type:"if",locations:[{start:{line:18,column:2},end:{line:18,column:84}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},4:{loc:{start:{line:18,column:6},end:{line:18,column:70}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:12}},{start:{line:18,column:16},end:{line:18,column:43}},{start:{line:18,column:47},end:{line:18,column:70}}],line:18},5:{loc:{start:{line:19,column:24},end:{line:19,column:51}},type:"binary-expr",locations:[{start:{line:19,column:24},end:{line:19,column:45}},{start:{line:19,column:49},end:{line:19,column:51}}],line:19},6:{loc:{start:{line:21,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:23,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},7:{loc:{start:{line:21,column:6},end:{line:21,column:62}},type:"binary-expr",locations:[{start:{line:21,column:6},end:{line:21,column:27}},{start:{line:21,column:31},end:{line:21,column:62}}],line:21},8:{loc:{start:{line:24,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:24,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:24},9:{loc:{start:{line:24,column:6},end:{line:24,column:56}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:56}}],line:24},10:{loc:{start:{line:27,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:27,column:2},end:{line:29,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:27}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/highlight.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,YAAY;AAKnB,SAAS,YAAY,GAAqB,OAA2B;AACnE,MAAG,EAAE,SAAS,UAAU;AACtB,MAAE,MAAO,eAAe,IAAI;AAAA,EAC9B,WAAU,EAAE,SAAS,QAAQ;AAC3B,MAAE,MAAO,YAAY,IAAI;AAAA,EAC3B;AAEA,MAAG,YAAY,OAAO;AACpB,MAAE,SAAS,MAAM;AAAA,EACnB,OAAO;AACL,WAAO,EAAE,QAAQ;AAAA,EACnB;AACA,IAAE,KAAK,EAAE,KAAK;AACd,SAAO;AACT;AAEO,gBAAS,sBAAsB,OAAqD;AACzF,MAAG,CAAC,SAAS,MAAM,SAAS,gBAAgB,MAAM,SAAS,SAAU,QAAO;AAE5E,QAAM,gBAAgB,MAAM,cAAc,KAAK;AAC/C,QAAM,QAAQ,OAAO,YAAY,eAAe,CAAC;AAEjD,MAAG,MAAM,SAAS,UAAU,MAAM,SAAS,kBAAkB;AAC3D,WAAO,YAAY,SAAS,aAAa,OAAO,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EACpG;AAEA,MAAG,MAAM,SAAS,YAAY,MAAM,SAAS,UAAU;AACrD,WAAO,YAAY,SAAS,YAAY,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC5F;AAEA,MAAG,MAAM,SAAS,QAAQ;AACxB,WAAO,YAAY,SAAS,UAAU,OAAO,MAAM,QAAQ,MAAM,cAAc,CAAC,GAAG,KAAK;AAAA,EAC1F;AAEA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aec0f701e803624fae461cc89b5fc887ff556587"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return mo=function(){return l},l}mo();function $3(n,e){return mo().f[0]++,mo().s[0]++,n.type==="circle"?(mo().b[0][0]++,mo().s[1]++,n.paint["circle-radius"]=3):(mo().b[0][1]++,mo().s[2]++,n.type==="line"?(mo().b[1][0]++,mo().s[3]++,n.paint["line-width"]=2):mo().b[1][1]++),mo().s[4]++,"filter"in e?(mo().b[2][0]++,mo().s[5]++,n.filter=e.filter):(mo().b[2][1]++,mo().s[6]++,delete n.filter),mo().s[7]++,n.id=n.id+"_highlight",mo().s[8]++,n}function v$(n){if(mo().f[1]++,mo().s[9]++,mo().b[4][0]++,!n||(mo().b[4][1]++,n.type==="background")||(mo().b[4][2]++,n.type==="raster"))return mo().b[3][0]++,mo().s[10]++,null;mo().b[3][1]++;const e=(mo().s[11]++,mo().b[5][0]++,n["source-layer"]||(mo().b[5][1]++,"")),t=(mo().s[12]++,zF.brightColor(e,1));return mo().s[13]++,mo().b[7][0]++,n.type==="fill"||(mo().b[7][1]++,n.type==="fill-extrusion")?(mo().b[6][0]++,mo().s[14]++,$3(V3.polygonLayer(t,t,n.source,n["source-layer"]),n)):(mo().b[6][1]++,mo().s[15]++,mo().b[9][0]++,n.type==="symbol"||(mo().b[9][1]++,n.type==="circle")?(mo().b[8][0]++,mo().s[16]++,$3(V3.circleLayer(t,n.source,n["source-layer"]),n)):(mo().b[8][1]++,mo().s[17]++,n.type==="line"?(mo().b[10][0]++,mo().s[18]++,$3(V3.lineLayer(t,n.source,n["source-layer"]),n)):(mo().b[10][1]++,mo().s[19]++,null)))}function xB(){var n="/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",e="a9dc98f82c73787713de0672aff7a601bfeb069d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts",statementMap:{0:{start:{line:2,column:0},end:{line:2,column:115}}},fnMap:{},branchMap:{},s:{0:0},f:{},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/maplibre-rtl.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,WAAW,iBAAiB,gFAAgF,KAAK;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a9dc98f82c73787713de0672aff7a601bfeb069d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return xB=function(){return l},l}xB();xB().s[0]++;W1.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!1);function H3(n,e,t,r){function i(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function o(x){try{v(r.next(x))}catch(B){l(B)}}function p(x){try{v(r.throw(x))}catch(B){l(B)}}function v(x){x.done?s(x.value):i(x.value).then(o,p)}v((r=r.apply(n,e||[])).next())})}var W_=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function lx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Z3,R7;function qF(){if(R7)return Z3;R7=1,Z3=e;var n=Object.prototype.hasOwnProperty;function e(){for(var t={},r=0;r<arguments.length;r++){var i=arguments[r];for(var s in i)n.call(i,s)&&(t[s]=i[s])}return t}return Z3}var X3={exports:{}},D7;function C$(){return D7||(D7=1,function(n,e){(function(){var t={};n.exports=t,t.simpleFilter=function(r,i){return i.filter(function(s){return t.test(r,s)})},t.test=function(r,i){return t.match(r,i)!==null},t.match=function(r,i,s){s=s||{};var l=0,o=[],p=i.length,v=0,x=0,B=s.pre||"",T=s.post||"",P=s.caseSensitive&&i||i.toLowerCase(),U;r=s.caseSensitive&&r||r.toLowerCase();for(var j=0;j<p;j++)U=i[j],P[j]===r[l]?(U=B+U+T,l+=1,x+=1+x):x=0,v+=x,o[o.length]=U;return l===r.length?(v=P===r?1/0:v,{rendered:o.join(""),score:v}):null},t.filter=function(r,i,s){return!i||i.length===0?[]:typeof r!="string"?i:(s=s||{},i.reduce(function(l,o,p,v){var x=o;s.extract&&(x=s.extract(o));var B=t.match(r,x,s);return B!=null&&(l[l.length]={string:B.rendered,score:B.score,index:p,original:o}),l},[]).sort(function(l,o){var p=o.score-l.score;return p||l.index-o.index}))}})()}(X3)),X3.exports}var J3,F7;function _$(){if(F7)return J3;F7=1;var n=function(e){return this.component=e,this.items=[],this.active=e.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};return n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(e){this.items.push(e)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return this.element.style.display==="block"},n.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()},n.prototype.drawItem=function(e,t){var r=document.createElement("li"),i=document.createElement("a");t&&(r.className+=" active"),i.innerHTML=e.string,r.appendChild(i),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))},n.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()},n.prototype.move=function(e){this.active=e,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()},J3=n,J3}var e4,L7;function b$(){if(L7)return e4;L7=1;var n=qF(),e=C$(),t=_$(),r=function(i,s,l){return l=l||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},l),this.el=i,this.data=s||[],this.list=new t(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(o){this.handleKeyUp(o.keyCode,o)}).bind(this),!1),this.el.addEventListener("keydown",(function(o){this.handleKeyDown(o)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(o){this.handlePaste(o)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};return r.prototype.handleKeyUp=function(i,s){if(!(i===40||i===38||i===27||i===9)){if(i===13){this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),s.stopPropagation());return}this.handleInputChange(this.el.value)}},r.prototype.handleKeyDown=function(i){switch(i.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&i.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},r.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},r.prototype.handlePaste=function(i){if(i.clipboardData)this.handleInputChange(i.clipboardData.getData("Text"));else{var s=this;setTimeout(function(){s.handleInputChange(i.target.value)},100)}},r.prototype.handleInputChange=function(i){if(this.query=this.normalize(i),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(s){for(var l=0;l<s.length&&(this.list.add(s[l]),l!==this.options.limit-1);l++);this.list.draw()}).bind(this))},r.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},r.prototype.update=function(i){this.data=i,this.handleKeyUp()},r.prototype.clear=function(){this.data=[],this.list.clear()},r.prototype.normalize=function(i){return i=i.toLowerCase(),i},r.prototype.match=function(i,s){return i.indexOf(s)>-1},r.prototype.value=function(i){if(this.selected=i,this.el.value=this.getItemValue(i||{place_name:this.query}),document.createEvent){var s=document.createEvent("HTMLEvents");s.initEvent("change",!0,!1),this.el.dispatchEvent(s)}else this.el.fireEvent("onchange")},r.prototype.getCandidates=function(i){var s={pre:"<strong>",post:"</strong>",extract:(function(o){return this.getItemValue(o)}).bind(this)},l;this.options.filter?(l=e.filter(this.query,this.data,s),l=l.map((function(o){return{original:o.original,string:this.render(o.original,o.string)}}).bind(this))):l=this.data.map((function(o){var p=this.render(o);return{original:o,string:p}}).bind(this)),i(l)},r.prototype.getItemValue=function(i){return i},r.prototype.render=function(i,s){if(s)return s;for(var l=i.original?this.getItemValue(i.original):this.getItemValue(i),o=this.normalize(l),p=o.lastIndexOf(this.query);p>-1;){var v=p+this.query.length;l=l.slice(0,p)+"<strong>"+l.slice(p,v)+"</strong>"+l.slice(v),p=o.slice(0,p).lastIndexOf(this.query)}return l},r.prototype.renderError=function(i){this.list.drawError(i)},e4=r,e4}var t4,U7;function x$(){if(U7)return t4;U7=1;var n=b$();return t4=n,typeof window<"u"&&(window.Suggestions=n),t4}var M$=x$(),w$=lx(M$),Mb={exports:{}},S$=Mb.exports,z7;function E$(){return z7||(z7=1,function(n){(function(e,t,r){n.exports?n.exports=r():e[t]=r()})(S$,"subtag",function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(p){return p.match(t)||[]}function i(p){return r(p).filter(function(v,x){return v&&x})}function s(p){return p=r(p),{language:p[1]||e,extlang:p[2]||e,script:p[3]||e,region:p[4]||e}}function l(p,v,x){Object.defineProperty(p,v,{value:x,enumerable:!0})}function o(p,v,x){function B(T){return r(T)[p]||e}l(B,"pattern",v),l(s,x,B)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),l(s,"split",i),s})}(Mb)),Mb.exports}var B$=E$(),O$=lx(B$),n4,j7;function I$(){if(j7)return n4;j7=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,p=typeof W_=="object"&&W_&&W_.Object===Object&&W_,v=typeof self=="object"&&self&&self.Object===Object&&self,x=p||v||Function("return this")(),B=Object.prototype,T=B.toString,P=Math.max,U=Math.min,j=function(){return x.Date.now()};function N(V,ne,W){var ie,he,fe,Ee,me,Me,De=0,xe=!1,At=!1,Ze=!0;if(typeof V!="function")throw new TypeError(n);ne=te(ne)||0,q(W)&&(xe=!!W.leading,At="maxWait"in W,fe=At?P(te(W.maxWait)||0,ne):fe,Ze="trailing"in W?!!W.trailing:Ze);function Xe(Tt){var Le=ie,Pe=he;return ie=he=void 0,De=Tt,Ee=V.apply(Pe,Le),Ee}function Ne(Tt){return De=Tt,me=setTimeout(He,ne),xe?Xe(Tt):Ee}function Se(Tt){var Le=Tt-Me,Pe=Tt-De,Be=ne-Le;return At?U(Be,fe-Pe):Be}function Re(Tt){var Le=Tt-Me,Pe=Tt-De;return Me===void 0||Le>=ne||Le<0||At&&Pe>=fe}function He(){var Tt=j();if(Re(Tt))return _t(Tt);me=setTimeout(He,Se(Tt))}function _t(Tt){return me=void 0,Ze&&ie?Xe(Tt):(ie=he=void 0,Ee)}function Gt(){me!==void 0&&clearTimeout(me),De=0,ie=Me=he=me=void 0}function yt(){return me===void 0?Ee:_t(j())}function Ft(){var Tt=j(),Le=Re(Tt);if(ie=arguments,he=this,Me=Tt,Le){if(me===void 0)return Ne(Me);if(At)return me=setTimeout(He,ne),Xe(Me)}return me===void 0&&(me=setTimeout(He,ne)),Ee}return Ft.cancel=Gt,Ft.flush=yt,Ft}function q(V){var ne=typeof V;return!!V&&(ne=="object"||ne=="function")}function H(V){return!!V&&typeof V=="object"}function oe(V){return typeof V=="symbol"||H(V)&&T.call(V)==t}function te(V){if(typeof V=="number")return V;if(oe(V))return e;if(q(V)){var ne=typeof V.valueOf=="function"?V.valueOf():V;V=q(ne)?ne+"":ne}if(typeof V!="string")return V===0?V:+V;V=V.replace(r,"");var W=s.test(V);return W||l.test(V)?o(V.slice(2),W?2:8):i.test(V)?e:+V}return n4=N,n4}var k$=I$(),T$=lx(k$),P$=qF(),rp=lx(P$),G_={exports:{}},N7;function K$(){if(N7)return G_.exports;N7=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(V,ne,W){return Function.prototype.apply.call(V,ne,W)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(V){return Object.getOwnPropertyNames(V).concat(Object.getOwnPropertySymbols(V))}:t=function(V){return Object.getOwnPropertyNames(V)};function r(te){console&&console.warn&&console.warn(te)}var i=Number.isNaN||function(V){return V!==V};function s(){s.init.call(this)}G_.exports=s,G_.exports.once=q,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function o(te){if(typeof te!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof te)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(te){if(typeof te!="number"||te<0||i(te))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+te+".");l=te}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(V){if(typeof V!="number"||V<0||i(V))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+V+".");return this._maxListeners=V,this};function p(te){return te._maxListeners===void 0?s.defaultMaxListeners:te._maxListeners}s.prototype.getMaxListeners=function(){return p(this)},s.prototype.emit=function(V){for(var ne=[],W=1;W<arguments.length;W++)ne.push(arguments[W]);var ie=V==="error",he=this._events;if(he!==void 0)ie=ie&&he.error===void 0;else if(!ie)return!1;if(ie){var fe;if(ne.length>0&&(fe=ne[0]),fe instanceof Error)throw fe;var Ee=new Error("Unhandled error."+(fe?" ("+fe.message+")":""));throw Ee.context=fe,Ee}var me=he[V];if(me===void 0)return!1;if(typeof me=="function")e(me,this,ne);else for(var Me=me.length,De=U(me,Me),W=0;W<Me;++W)e(De[W],this,ne);return!0};function v(te,V,ne,W){var ie,he,fe;if(o(ne),he=te._events,he===void 0?(he=te._events=Object.create(null),te._eventsCount=0):(he.newListener!==void 0&&(te.emit("newListener",V,ne.listener?ne.listener:ne),he=te._events),fe=he[V]),fe===void 0)fe=he[V]=ne,++te._eventsCount;else if(typeof fe=="function"?fe=he[V]=W?[ne,fe]:[fe,ne]:W?fe.unshift(ne):fe.push(ne),ie=p(te),ie>0&&fe.length>ie&&!fe.warned){fe.warned=!0;var Ee=new Error("Possible EventEmitter memory leak detected. "+fe.length+" "+String(V)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ee.name="MaxListenersExceededWarning",Ee.emitter=te,Ee.type=V,Ee.count=fe.length,r(Ee)}return te}s.prototype.addListener=function(V,ne){return v(this,V,ne,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(V,ne){return v(this,V,ne,!0)};function x(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(te,V,ne){var W={fired:!1,wrapFn:void 0,target:te,type:V,listener:ne},ie=x.bind(W);return ie.listener=ne,W.wrapFn=ie,ie}s.prototype.once=function(V,ne){return o(ne),this.on(V,B(this,V,ne)),this},s.prototype.prependOnceListener=function(V,ne){return o(ne),this.prependListener(V,B(this,V,ne)),this},s.prototype.removeListener=function(V,ne){var W,ie,he,fe,Ee;if(o(ne),ie=this._events,ie===void 0)return this;if(W=ie[V],W===void 0)return this;if(W===ne||W.listener===ne)--this._eventsCount===0?this._events=Object.create(null):(delete ie[V],ie.removeListener&&this.emit("removeListener",V,W.listener||ne));else if(typeof W!="function"){for(he=-1,fe=W.length-1;fe>=0;fe--)if(W[fe]===ne||W[fe].listener===ne){Ee=W[fe].listener,he=fe;break}if(he<0)return this;he===0?W.shift():j(W,he),W.length===1&&(ie[V]=W[0]),ie.removeListener!==void 0&&this.emit("removeListener",V,Ee||ne)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(V){var ne,W,ie;if(W=this._events,W===void 0)return this;if(W.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):W[V]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete W[V]),this;if(arguments.length===0){var he=Object.keys(W),fe;for(ie=0;ie<he.length;++ie)fe=he[ie],fe!=="removeListener"&&this.removeAllListeners(fe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ne=W[V],typeof ne=="function")this.removeListener(V,ne);else if(ne!==void 0)for(ie=ne.length-1;ie>=0;ie--)this.removeListener(V,ne[ie]);return this};function T(te,V,ne){var W=te._events;if(W===void 0)return[];var ie=W[V];return ie===void 0?[]:typeof ie=="function"?ne?[ie.listener||ie]:[ie]:ne?N(ie):U(ie,ie.length)}s.prototype.listeners=function(V){return T(this,V,!0)},s.prototype.rawListeners=function(V){return T(this,V,!1)},s.listenerCount=function(te,V){return typeof te.listenerCount=="function"?te.listenerCount(V):P.call(te,V)},s.prototype.listenerCount=P;function P(te){var V=this._events;if(V!==void 0){var ne=V[te];if(typeof ne=="function")return 1;if(ne!==void 0)return ne.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function U(te,V){for(var ne=new Array(V),W=0;W<V;++W)ne[W]=te[W];return ne}function j(te,V){for(;V+1<te.length;V++)te[V]=te[V+1];te.pop()}function N(te){for(var V=new Array(te.length),ne=0;ne<V.length;++ne)V[ne]=te[ne].listener||te[ne];return V}function q(te,V){return new Promise(function(ne,W){function ie(fe){te.removeListener(V,he),W(fe)}function he(){typeof te.removeListener=="function"&&te.removeListener("error",ie),ne([].slice.call(arguments))}oe(te,V,he,{once:!0}),V!=="error"&&H(te,ie,{once:!0})})}function H(te,V,ne){typeof te.on=="function"&&oe(te,"error",V,ne)}function oe(te,V,ne,W){if(typeof te.on=="function")W.once?te.once(V,ne):te.on(V,ne);else if(typeof te.addEventListener=="function")te.addEventListener(V,function ie(he){W.once&&te.removeEventListener(V,ie),ne(he)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof te)}return G_.exports}var R$=K$();const W7={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},D$={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},F$={en:"No results found",de:"Keine Ergebnisse gefunden"},L$={en:"There was an error reaching the server",de:"Verbindung fehlgeschlagen"};var hv={placeholder:D$,errorNoResults:F$,errorConnectionFailed:L$};const U$=/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/;class z${constructor(e,t){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,proximityMinZoom:9,getItemValue:r=>r.text!==void 0?r.text:r.place_name,render:function(r){if(!r.geometry){const s=r.text,l=s.toLowerCase().indexOf(this.query.toLowerCase()),o=this.query.length,p=s.substring(0,l),v=s.substring(l,l+o),x=s.substring(l+o);return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+p+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+v+"</span>"+x+"</div></div></div>"}const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+i.splice(1,i.length).join(",")+"</div></div></div>"},popupRender:r=>{const i=r.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+i[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+i.splice(1,i.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new R$.EventEmitter,this.options=rp({},this.options,t),this.fresh=!0,this.lastSelected=null,this.geocoderApi=e}addTo(e){function t(r,i){if(!document.body.contains(i))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=r.onAdd();i.appendChild(s)}if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const r=document.querySelectorAll(e);if(r.length===0)throw new Error("Element "+e+"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,r[0])}else if("addControl"in e)e.addControl(this);else throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element")}onAdd(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const t=this.container=document.createElement("div");t.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",T$(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),t.appendChild(r),t.appendChild(this._inputEl),t.appendChild(i),this._typeahead=new w$(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),t}createIcon(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+e),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width","18"),r.setAttribute("height","18"),"innerHTML"in r)r.innerHTML=t;else{const i=document.createElement("div");i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>";const s=i.firstChild,l=s.firstChild;r.appendChild(l)}return r}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t)}_onKeyDown(e){if(e.keyCode===27&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();const s=this._inputEl.value;if(!s)return this.fresh=!0,e.keyCode!==9&&this.clear(e),this._clearEl.style.display="none";if(!(e.metaKey||[9,27,37,39,38,40].indexOf(e.keyCode)!==-1)){if(e.keyCode===13)if(!this.options.showResultsWhileTyping)this._typeahead.selected||this._geocode(s);else{this._typeahead.selected==null&&this.geocoderApi.getSuggestions?this._geocode(s,!0):this._typeahead.selected==null&&this.options.showResultMarkers&&this._fitBoundsForMarkers();return}s.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(s)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()}_onChange(){const e=this._typeahead.selected;if(e&&!e.geometry)e.placeId?this._geocode(e.placeId,!0,!0):this._geocode(e.text,!0);else if(e&&JSON.stringify(e)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let t;if(this._removeResultMarkers(),e.properties&&W7[e.properties.short_code])t=rp({},this.options.flyTo),this._map&&this._map.fitBounds(W7[e.properties.short_code].bbox,t);else if(e.bbox){const r=e.bbox;t=rp({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],t)}else{const r={zoom:this.options.zoom};t=rp({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}}this.options.marker&&this._maplibregl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:e})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce((r,i)=>(this.options[i]&&(["countries","types","language"].indexOf(i)>-1?r[i]=this.options[i].split(/[\s,]+/):r[i]=this.options[i],i==="proximity"&&this.options[i]&&typeof this.options[i].longitude=="number"&&typeof this.options[i].latitude=="number"&&(r[i]=[this.options[i].longitude,this.options[i].latitude])),r),{})}_geocode(e){return H3(this,arguments,void 0,function*(t,r=!1,i=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});const s=this._getConfigForRequest(),l=this._createGeocodeRequest(s,t,r,i),o=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[];try{const p=yield l;yield this._handleGeocodeResponse(p,s,t,r,o)}catch(p){this._handleGeocodeErrorResponse(p,o)}return l})}_createGeocodeRequest(e,t,r,i){return this.options.localGeocoderOnly?Promise.resolve({}):this.options.reverseGeocode&&U$.test(t)?this._createReverseGeocodeRequest(t,e):(e.query=t,this.geocoderApi.getSuggestions?r?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(e):this.geocoderApi.forwardGeocode(e):this.geocoderApi.getSuggestions(e):this.geocoderApi.forwardGeocode(e))}_createReverseGeocodeRequest(e,t){const r=e.split(/[\s(,)?]+/).map(i=>parseFloat(i)).reverse();return t.query=r,t.limit=1,"proximity"in t&&delete t.proximity,this.geocoderApi.reverseGeocode(t)}_handleGeocodeResponse(e,t,r,i,s){return H3(this,void 0,void 0,function*(){this._loadingEl.style.display="none";let l={};e?l=e:l={type:"FeatureCollection",features:[]},l.config=t,this.fresh&&(this.fresh=!1),l.features=l.features?s.concat(l.features):s;const o=this.options.externalGeocoder?this.options.externalGeocoder(r,l.features,t)||Promise.resolve([]):Promise.resolve([]);try{const v=yield o;l.features=l.features?v.concat(l.features):v}catch{}this.options.filter&&l.features.length&&(l.features=l.features.filter(this.options.filter));let p=[];"suggestions"in l?p=l.suggestions:"place"in l?p=[l.place]:p=l.features,p.length?(this._clearEl.style.display="block",this._typeahead.update(p),(!this.options.showResultsWhileTyping||i)&&this.options.showResultMarkers&&(l.features.length>0||"place"in l)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",l)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",l))})}_handleGeocodeErrorResponse(e,t){this._loadingEl.style.display="none",t.length&&this.options.localGeocoder?(this._clearEl.style.display="block",this._typeahead.update(t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:t}),this._eventEmitter.emit("error",{error:e})}_clear(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(e){this._clear(e),this._inputEl.focus()}_clearOnBlur(e){e.relatedTarget&&this._clear(e)}_onQueryResult(e){if(!("features"in e)||!e.features.length)return;const t=e.features[0];this._typeahead.selected=t,this._inputEl.value=t.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>this.options.proximityMinZoom){const e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat})}else this.setProximity(null)}_collapse(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(e){return H3(this,void 0,void 0,function*(){const t=yield this._geocode(e);this._onQueryResult(t)})}_renderError(){const e=`<div class='maplibre-gl-geocoder--error'>${this._localize("errorConnectionFailed")}</div>`;this._renderMessage(e)}_renderNoResults(){const e=`<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>
        ${this._localize("errorNoResults")}</div>`;this._renderMessage(e)}_renderMessage(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)}_localize(e){const t=O$.language(this.options.language.split(",")[0]);return this.options.language&&(hv!=null&&hv[e][t])?hv[e][t]:hv[e].en}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const e=this._typeahead.data.filter(t=>typeof t!="string").slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const r=rp({},{padding:100},this.options.flyTo),i=new this._maplibregl.LngLatBounds;for(const s of e)i.extend(s.geometry.coordinates);this._map.fitBounds(i,r)}return e.length>0&&this._maplibregl&&this._handleResultMarkers(e),this}setInput(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e),this}setProximity(e){return this.options.proximity=e,this}getProximity(){return this.options.proximity}setRenderFunction(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this}getRenderFunction(){return this._typeahead.render}setLanguage(e){return this.options.language=e||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(e){return this.options.zoom=e,this}getFlyTo(){return this.options.flyTo}setFlyTo(e){return this.options.flyTo=e,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(e){return this.placeholder=e||this.options.placeholder||this._localize("placeholder"),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(e){return this.options.bbox=e,this}getCountries(){return this.options.countries}setCountries(e){return this.options.countries=e,this}getTypes(){return this.options.types}setTypes(e){return this.options.types=e,this}getMinLength(){return this.options.minLength}setMinLength(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this}getLimit(){return this.options.limit}setLimit(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this}getFilter(){return this.options.filter}setFilter(e){return this.options.filter=e,this}setGeocoderApi(e){return this.geocoderApi=e,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(e){if(!this._map)return;this._removeMarker();const r=rp({},{color:"#4668F2"},this.options.marker);this.mapMarker=new this._maplibregl.Marker(r);let i;if(this.options.popup){const l=rp({},{},this.options.popup);i=new this._maplibregl.Popup(l).setHTML(this.options.popupRender(e))}return e.center?(this.mapMarker.setLngLat(e.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(i)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(e){if(!this._map)return;this._removeResultMarkers();let r=rp({},{color:"#4668F2"},this.options.showResultMarkers);for(const i of e){let s;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(s=this.options.showResultMarkers.element.cloneNode(!0),r=rp(r,{element:s}));const l=new this._maplibregl.Marker(rp({},r,{element:s}));let o;if(this.options.popup){const v=rp({},{},this.options.popup);o=new this._maplibregl.Popup(v).setHTML(this.options.popupRender(i))}i.center?(l.setLngLat(i.center).addTo(this._map),this.options.popup&&l.setPopup(o)):i.geometry&&i.geometry.type&&i.geometry.type==="Point"&&i.geometry.coordinates&&(l.setLngLat(i.geometry.coordinates).addTo(this._map),this.options.popup&&l.setPopup(o)),this.resultMarkers.push(l)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(e){e.remove()}),this.resultMarkers=[])}on(e,t){return this._eventEmitter.on(e,t),this}once(e){return new Promise(t=>{this._eventEmitter.once(e,t)})}off(e,t){return this._eventEmitter.removeListener(e,t),this}}function wn(){var n="/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",e="300acb3537cd75ba7433c8df32ce2e40c6bb2cf5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx",statementMap:{0:{start:{line:21,column:2},end:{line:21,column:36}},1:{start:{line:22,column:2},end:{line:22,column:19}},2:{start:{line:25,column:26},end:{line:31,column:3}},3:{start:{line:32,column:16},end:{line:32,column:55}},4:{start:{line:33,column:2},end:{line:35,column:3}},5:{start:{line:34,column:4},end:{line:34,column:30}},6:{start:{line:36,column:18},end:{line:36,column:20}},7:{start:{line:37,column:2},end:{line:42,column:5}},8:{start:{line:38,column:19},end:{line:38,column:53}},9:{start:{line:39,column:4},end:{line:41,column:5}},10:{start:{line:40,column:6},end:{line:40,column:33}},11:{start:{line:43,column:23},end:{line:47,column:3}},12:{start:{line:48,column:2},end:{line:48,column:22}},13:{start:{line:51,column:24},end:{line:61,column:3}},14:{start:{line:62,column:14},end:{line:62,column:18}},15:{start:{line:64,column:4},end:{line:64,column:17}},16:{start:{line:65,column:4},end:{line:70,column:6}},17:{start:{line:71,column:4},end:{line:73,column:7}},18:{start:{line:72,column:6},end:{line:72,column:25}},19:{start:{line:76,column:17},end:{line:76,column:22}},20:{start:{line:77,column:4},end:{line:80,column:5}},21:{start:{line:78,column:6},end:{line:78,column:132}},22:{start:{line:81,column:4},end:{line:81,column:18}},23:{start:{line:84,column:16},end:{line:84,column:30}},24:{start:{line:85,column:28},end:{line:85,column:79}},25:{start:{line:86,column:4},end:{line:91,column:5}},26:{start:{line:87,column:6},end:{line:87,column:52}},27:{start:{line:88,column:6},end:{line:88,column:70}},28:{start:{line:89,column:6},end:{line:89,column:70}},29:{start:{line:90,column:6},end:{line:90,column:76}},30:{start:{line:92,column:4},end:{line:94,column:5}},31:{start:{line:93,column:6},end:{line:93,column:43}},32:{start:{line:95,column:4},end:{line:100,column:5}},33:{start:{line:96,column:6},end:{line:96,column:59}},34:{start:{line:97,column:6},end:{line:99,column:14}},35:{start:{line:98,column:8},end:{line:98,column:36}},36:{start:{line:103,column:20},end:{line:112,column:5}},37:{start:{line:113,column:21},end:{line:113,column:53}},38:{start:{line:114,column:4},end:{line:114,column:53}},39:{start:{line:115,column:16},end:{line:115,column:43}},40:{start:{line:116,column:26},end:{line:120,column:5}},41:{start:{line:117,column:21},end:{line:117,column:36}},42:{start:{line:118,column:19},end:{line:118,column:32}},43:{start:{line:119,column:6},end:{line:119,column:44}},44:{start:{line:121,column:4},end:{line:121,column:20}},45:{start:{line:122,column:4},end:{line:122,column:56}},46:{start:{line:123,column:4},end:{line:123,column:56}},47:{start:{line:124,column:4},end:{line:124,column:62}},48:{start:{line:125,column:21},end:{line:125,column:43}},49:{start:{line:126,column:24},end:{line:126,column:41}},50:{start:{line:127,column:4},end:{line:127,column:45}},51:{start:{line:128,column:16},end:{line:128,column:74}},52:{start:{line:129,column:4},end:{line:129,column:37}},53:{start:{line:130,column:20},end:{line:130,column:49}},54:{start:{line:131,column:20},end:{line:151,column:6}},55:{start:{line:141,column:8},end:{line:141,column:82}},56:{start:{line:143,column:62},end:{line:143,column:141}},57:{start:{line:145,column:8},end:{line:149,column:9}},58:{start:{line:146,column:10},end:{line:146,column:108}},59:{start:{line:148,column:10},end:{line:148,column:160}},60:{start:{line:152,column:4},end:{line:152,column:28}},61:{start:{line:153,column:4},end:{line:161,column:7}},62:{start:{line:154,column:6},end:{line:160,column:9}},63:{start:{line:162,column:4},end:{line:167,column:7}},64:{start:{line:163,column:6},end:{line:163,column:40}},65:{start:{line:163,column:33},end:{line:163,column:40}},66:{start:{line:164,column:6},end:{line:166,column:9}},67:{start:{line:168,column:4},end:{line:170,column:7}},68:{start:{line:169,column:6},end:{line:169,column:30}},69:{start:{line:171,column:4},end:{line:175,column:7}},70:{start:{line:172,column:6},end:{line:174,column:9}},71:{start:{line:176,column:4},end:{line:176,column:37}},72:{start:{line:177,column:4},end:{line:177,column:37}},73:{start:{line:179,column:22},end:{line:182,column:3}},74:{start:{line:180,column:18},end:{line:180,column:82}},75:{start:{line:180,column:66},end:{line:180,column:81}},76:{start:{line:181,column:4},end:{line:181,column:36}},77:{start:{line:184,column:27},end:{line:217,column:5}},78:{start:{line:186,column:25},end:{line:186,column:27}},79:{start:{line:187,column:8},end:{line:212,column:9}},80:{start:{line:188,column:26},end:{line:188,column:138}},81:{start:{line:189,column:27},end:{line:189,column:47}},82:{start:{line:190,column:26},end:{line:190,column:47}},83:{start:{line:191,column:10},end:{line:209,column:11}},84:{start:{line:192,column:27},end:{line:195,column:13}},85:{start:{line:196,column:26},end:{line:207,column:13}},86:{start:{line:208,column:12},end:{line:208,column:33}},87:{start:{line:211,column:10},end:{line:211,column:69}},88:{start:{line:213,column:8},end:{line:215,column:10}},89:{start:{line:218,column:21},end:{line:221,column:6}},90:{start:{line:222,column:4},end:{line:222,column:41}},91:{start:{line:223,column:4},end:{line:223,column:20}},92:{start:{line:226,column:14},end:{line:226,column:26}},93:{start:{line:227,column:4},end:{line:227,column:53}},94:{start:{line:228,column:4},end:{line:228,column:49}},95:{start:{line:229,column:4},end:{line:238,column:6}},96:{start:{line:235,column:20},end:{line:235,column:38}},97:{start:{line:241,column:22},end:{line:241,column:62}}},fnMap:{0:{name:"renderPopup",decl:{start:{line:20,column:9},end:{line:20,column:20}},loc:{start:{line:20,column:39},end:{line:23,column:1}},line:20},1:{name:"buildInspectStyle",decl:{start:{line:24,column:9},end:{line:24,column:26}},loc:{start:{line:24,column:78},end:{line:49,column:1}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:37,column:48},end:{line:37,column:49}},loc:{start:{line:37,column:62},end:{line:42,column:3}},line:37},3:{name:"(anonymous_3)",decl:{start:{line:52,column:17},end:{line:52,column:18}},loc:{start:{line:52,column:23},end:{line:53,column:5}},line:52},4:{name:"(anonymous_4)",decl:{start:{line:54,column:18},end:{line:54,column:19}},loc:{start:{line:54,column:24},end:{line:55,column:5}},line:54},5:{name:"(anonymous_5)",decl:{start:{line:56,column:19},end:{line:56,column:20}},loc:{start:{line:56,column:25},end:{line:57,column:5}},line:56},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:59,column:5}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:63,column:2},end:{line:63,column:3}},loc:{start:{line:63,column:21},end:{line:74,column:3}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:71,column:34},end:{line:71,column:35}},loc:{start:{line:71,column:40},end:{line:73,column:5}},line:71},9:{name:"(anonymous_9)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:46},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:23},end:{line:101,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:97,column:17},end:{line:97,column:18}},loc:{start:{line:97,column:23},end:{line:99,column:7}},line:97},12:{name:"(anonymous_12)",decl:{start:{line:102,column:2},end:{line:102,column:3}},loc:{start:{line:102,column:22},end:{line:178,column:3}},line:102},13:{name:"(anonymous_13)",decl:{start:{line:116,column:26},end:{line:116,column:27}},loc:{start:{line:116,column:32},end:{line:120,column:5}},line:116},14:{name:"(anonymous_14)",decl:{start:{line:140,column:24},end:{line:140,column:25}},loc:{start:{line:140,column:44},end:{line:142,column:7}},line:140},15:{name:"(anonymous_15)",decl:{start:{line:143,column:25},end:{line:143,column:26}},loc:{start:{line:143,column:62},end:{line:143,column:141}},line:143},16:{name:"(anonymous_16)",decl:{start:{line:144,column:19},end:{line:144,column:20}},loc:{start:{line:144,column:33},end:{line:150,column:7}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:31},end:{line:161,column:5}},line:153},18:{name:"(anonymous_18)",decl:{start:{line:162,column:19},end:{line:162,column:20}},loc:{start:{line:162,column:26},end:{line:167,column:5}},line:162},19:{name:"(anonymous_19)",decl:{start:{line:168,column:20},end:{line:168,column:21}},loc:{start:{line:168,column:27},end:{line:170,column:5}},line:168},20:{name:"(anonymous_20)",decl:{start:{line:171,column:19},end:{line:171,column:20}},loc:{start:{line:171,column:27},end:{line:175,column:5}},line:171},21:{name:"(anonymous_21)",decl:{start:{line:179,column:22},end:{line:179,column:23}},loc:{start:{line:179,column:30},end:{line:182,column:3}},line:179},22:{name:"(anonymous_22)",decl:{start:{line:180,column:55},end:{line:180,column:56}},loc:{start:{line:180,column:66},end:{line:180,column:81}},line:180},23:{name:"(anonymous_23)",decl:{start:{line:183,column:2},end:{line:183,column:3}},loc:{start:{line:183,column:20},end:{line:224,column:3}},line:183},24:{name:"(anonymous_24)",decl:{start:{line:185,column:22},end:{line:185,column:23}},loc:{start:{line:185,column:40},end:{line:216,column:7}},line:185},25:{name:"(anonymous_25)",decl:{start:{line:225,column:2},end:{line:225,column:3}},loc:{start:{line:225,column:11},end:{line:239,column:3}},line:225},26:{name:"(anonymous_26)",decl:{start:{line:235,column:13},end:{line:235,column:14}},loc:{start:{line:235,column:20},end:{line:235,column:38}},line:235}},branchMap:{0:{loc:{start:{line:33,column:2},end:{line:35,column:3}},type:"if",locations:[{start:{line:33,column:2},end:{line:35,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},1:{loc:{start:{line:39,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:39,column:8},end:{line:39,column:64}},type:"binary-expr",locations:[{start:{line:39,column:8},end:{line:39,column:32}},{start:{line:39,column:36},end:{line:39,column:64}}],line:39},3:{loc:{start:{line:78,column:15},end:{line:78,column:131}},type:"binary-expr",locations:[{start:{line:78,column:15},end:{line:78,column:71}},{start:{line:78,column:75},end:{line:78,column:131}}],line:78},4:{loc:{start:{line:86,column:4},end:{line:91,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:91,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:86},5:{loc:{start:{line:92,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},6:{loc:{start:{line:92,column:8},end:{line:92,column:98}},type:"binary-expr",locations:[{start:{line:92,column:8},end:{line:92,column:26}},{start:{line:92,column:30},end:{line:92,column:98}}],line:92},7:{loc:{start:{line:95,column:4},end:{line:100,column:5}},type:"if",locations:[{start:{line:95,column:4},end:{line:100,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:95},8:{loc:{start:{line:95,column:8},end:{line:95,column:59}},type:"binary-expr",locations:[{start:{line:95,column:8},end:{line:95,column:26}},{start:{line:95,column:30},end:{line:95,column:59}}],line:95},9:{loc:{start:{line:145,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:145,column:8},end:{line:149,column:9}},{start:{line:147,column:15},end:{line:149,column:9}}],line:145},10:{loc:{start:{line:163,column:6},end:{line:163,column:40}},type:"if",locations:[{start:{line:163,column:6},end:{line:163,column:40}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:163}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapMaplibreGl.tsx"],names:[],mappings:"AA+L6B;AA/L7B,OAAO,WAAuB;AAC9B,OAAO,cAAc;AACrB,OAAO,gBAAwG;AAC/G,OAAO,qBAAqB;AAC5B,OAAO,YAAY;AACnB,OAAO,6BAA6B;AACpC,OAAO,uCAA2D;AAClE,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA2B,6BAA6B;AACxD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,sBAA0E;AACjF,OAAO;AACP,SAAS,uBAAwC;AACjD,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,SAAS,YAAY,OAAoB,WAA4C;AACnF,WAAS,OAAO,OAAO,SAAS;AAChC,SAAO;AACT;AAEA,SAAS,kBAAkB,kBAAsC,eAAmC,kBAAqC;AACvI,QAAM,kBAAkB;AAAA,IACtB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,oBAAoB;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,QAAQ,sBAAsB,gBAAgB;AACpD,MAAG,OAAO;AACR,kBAAc,KAAK,KAAK;AAAA,EAC1B;AAEA,QAAM,UAA+C,CAAC;AAEtD,SAAO,KAAK,iBAAiB,OAAO,EAAE,QAAQ,cAAY;AACxD,UAAM,SAAS,iBAAiB,QAAQ,QAAQ;AAChD,QAAG,OAAO,SAAS,YAAY,OAAO,SAAS,cAAc;AAC3D,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAAA,EACF,CAAC;AAED,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH;AAAA,IACA,QAAQ,CAAC,eAAe,EAAE,OAAO,aAAqC;AAAA,EACxE;AACA,SAAO;AACT;AAyBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EACA,YAAmC;AAAA,EAEnC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,SAAS;AAAA,MACT,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AACA,YAAQ,GAAG,mBAAmB,MAAM;AAClC,WAAK,YAAY;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAGA,sBAAsB,WAAuC,WAA+B;AAC1F,QAAI,SAAS;AACb,QAAI;AACF,eAAS,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS,KAAK,KAAK,UAAU,KAAK,KAAK,MAAM,KAAK,UAAU,SAAS;AAAA,IAC9H,SAAQ,IAAI;AAAA,IAEZ;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB;AACnB,UAAM,MAAM,KAAK,MAAM;AAEvB,UAAM,kBAAkB,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAC1E,QAAI,KAAK;AAIP,UAAI,SAAS,iBAAiB,EAAC,MAAM,KAAI,CAAC;AAC1C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,qBAAqB,KAAK,MAAM,SAAS;AAC7C,UAAI,wBAAwB,KAAK,MAAM,SAAS;AAAA,IAClD;AAEA,QAAG,KAAK,MAAM,WAAW,KAAK,MAAM,uBAAuB,KAAK,MAAM,QAAQ,iBAAiB;AAC7F,WAAK,MAAM,QAAQ,gBAAgB;AAAA,IACrC;AACA,QAAI,KAAK,MAAM,WAAW,KAAK,MAAM,oBAAoB;AACvD,WAAK,MAAM,QAAQ,iBAAiB,eAAe;AAEnD,iBAAW,MAAM;AACf,aAAK,MAAM,QAAS,OAAO;AAAA,MAC7B,GAAG,GAAG;AAAA,IACR;AAAA,EAEF;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM;AAAA,MACd,WAAW,KAAK;AAAA,MAChB,OAAO,KAAK,MAAM;AAAA,MAClB,MAAM;AAAA,MACN,SAAS;AAAA;AAAA;AAAA,MAGT,0BAA0B;AAAA,IAC5B;AAEA,UAAM,WAAW,IAAI,SAAS,EAAC,UAAU,KAAI,CAAC;AAC9C,eAAW,YAAY,WAAU,SAAS,IAAI;AAC9C,UAAM,MAAM,IAAI,WAAW,IAAI,OAAO;AAEtC,UAAM,gBAAgB,MAAM;AAC1B,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,OAAO,IAAI,QAAQ;AACzB,WAAK,MAAM,SAAS,EAAC,QAAQ,KAAI,CAAC;AAAA,IACpC;AACA,kBAAc;AAEd,QAAI,qBAAqB,QAAQ;AACjC,QAAI,qBAAqB,QAAQ;AACjC,QAAI,wBAAwB,QAAQ;AAEpC,UAAM,WAAW,KAAK,aAAa,GAAG;AAEtC,UAAM,cAAc,IAAI,YAAY;AACpC,QAAI,WAAW,aAAa,WAAW;AAEvC,UAAM,MAAM,IAAI,WAAW,kBAAkB,EAAC,gBAAe,KAAI,CAAC;AAClE,QAAI,WAAW,KAAK,WAAW;AAE/B,UAAM,UAAU,SAAS,cAAc,KAAK;AAE5C,UAAM,UAAU,IAAI,gBAAgB;AAAA,MAClC,OAAO,IAAI,WAAW,MAAM;AAAA,QAC1B,cAAc;AAAA,MAChB,CAAC;AAAA,MACD,cAAc;AAAA,MACd,qBAAqB;AAAA,MACrB,4BAA4B;AAAA,MAC5B,mBAAmB;AAAA,MACnB,wBAAwB;AAAA,MACxB,kBAAkB,CAAC,SAAiB,UAAkB;AACpD,eAAO,MAAM,OAAO,YAAY,SAAS,KAAK,CAAC,EAAE,WAAW,GAAG,EAAE,OAAO;AAAA,MAC1E;AAAA,MACA,mBAAmB,CAAC,kBAAsC,kBAAsC,kBAAkB,kBAAkB,eAAe,KAAK,MAAM,gBAAgB;AAAA,MAC9K,aAAa,CAAC,aAA+B;AAC3C,YAAG,KAAK,MAAM,oBAAoB;AAChC,iBAAO,YAAY,oBAAC,qCAAkC,UAAoB,GAAI,OAAO;AAAA,QACvF,OAAO;AACL,iBAAO,YAAY,oBAAC,2BAAwB,UAAoB,eAAe,KAAK,mBAAmB,MAAM,KAAK,MAAM,MAAM,GAAI,OAAO;AAAA,QAC3I;AAAA,MACF;AAAA,IACF,CAAC;AACD,QAAI,WAAW,OAAO;AAEtB,QAAI,GAAG,cAAc,MAAM;AACzB,WAAK,SAAS;AAAA,QACZ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,QAAQ,OAAK;AAClB,UAAG,EAAE,aAAa,OAAQ;AAC1B,WAAK,MAAM,aAAc;AAAA,QACvB,KAAK,KAAK,MAAM;AAAA,MAClB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,SAAS,OAAK;AACnB,cAAQ,IAAI,SAAS,CAAC;AAAA,IACxB,CAAC;AAED,QAAI,GAAG,QAAQ,QAAM;AACnB,WAAK,SAAS;AAAA,QACZ,MAAM,IAAI,QAAQ;AAAA,MACpB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,WAAW,aAAa;AAC/B,QAAI,GAAG,WAAW,aAAa;AAAA,EACjC;AAAA,EAEA,oBAAoB,CAAC,OAAe;AAClC,UAAM,QAAQ,KAAK,MAAM,SAAS,OAAO,UAAU,WAAS,MAAM,OAAO,EAAE;AAC3E,SAAK,MAAM,cAAc,KAAK;AAAA,EAChC;AAAA,EAEA,aAAa,KAAU;AACrB,UAAM,iBAAiB;AAAA,MACrB,gBAAgB,OAAO,WAAsC;AAC3D,cAAM,WAAW,CAAC;AAClB,YAAI;AACF,gBAAM,UAAU,gDAAgD,OAAO,KAAK;AAC5E,gBAAM,WAAW,MAAM,MAAM,OAAO;AACpC,gBAAM,UAAU,MAAM,SAAS,KAAK;AACpC,qBAAW,WAAW,QAAQ,UAAU;AACtC,kBAAM,SAAS;AAAA,cACb,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,cAC1C,QAAQ,KAAK,CAAC,KACT,QAAQ,KAAK,CAAC,IAAI,QAAQ,KAAK,CAAC,KAAK;AAAA,YAC5C;AACA,kBAAM,QAAQ;AAAA,cACZ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,MAAM;AAAA,gBACN,aAAa;AAAA,cACf;AAAA,cACA,YAAY,QAAQ,WAAW;AAAA,cAC/B,YAAY,QAAQ;AAAA,cACpB,MAAM,QAAQ,WAAW;AAAA,cACzB,YAAY,CAAC,OAAO;AAAA,cACpB;AAAA,YACF;AACA,qBAAS,KAAK,KAAK;AAAA,UACrB;AAAA,QACF,SAAS,GAAG;AACV,kBAAQ,MAAM,wCAAwC,CAAC,EAAE;AAAA,QAC3D;AACA,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF;AACA,UAAM,WAAW,IAAI,iBAAiB,gBAAgB;AAAA,MACpD,aAAa,KAAK,MAAM,EAAE,QAAQ;AAAA,MAClC,YAAY;AAAA,IACd,CAAC;AACD,QAAI,WAAW,UAAU,UAAU;AACnC,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,SAAK,MAAM,UAAU,eAAe,EAAE,QAAQ,CAAC;AAC/C,SAAK,MAAM,aAAa,SAAS,EAAE,OAAO,CAAC;AAC3C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,UAAU;AAAA,QACxB,KAAK,OAAK,KAAK,YAAY;AAAA,QAC3B,eAAY;AAAA;AAAA,IACb;AAAA,EACH;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"300acb3537cd75ba7433c8df32ce2e40c6bb2cf5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return wn=function(){return l},l}wn();function G7(n,e){return wn().f[0]++,wn().s[0]++,Xq.render(n,e),wn().s[1]++,e}function j$(n,e,t){wn().f[1]++;const r=(wn().s[2]++,{id:"background",type:"background",paint:{"background-color":"#1c1f24"}}),i=(wn().s[3]++,v$(t));wn().s[4]++,i?(wn().b[0][0]++,wn().s[5]++,e.push(i)):wn().b[0][1]++;const s=(wn().s[6]++,{});wn().s[7]++,Object.keys(n.sources).forEach(o=>{wn().f[2]++;const p=(wn().s[8]++,n.sources[o]);wn().s[9]++,wn().b[2][0]++,p.type!=="raster"&&(wn().b[2][1]++,p.type!=="raster-dem")?(wn().b[1][0]++,wn().s[10]++,s[o]=p):wn().b[1][1]++});const l=(wn().s[11]++,{...n,sources:s,layers:[r].concat(e)});return wn().s[12]++,l}class VF extends sr.Component{constructor(t){wn().f[7]++,wn().s[15]++;super(t);Pn(this,"container",(wn().s[14]++,null));Pn(this,"onLayerSelectById",(wn().s[73]++,t=>{wn().f[21]++;const r=(wn().s[74]++,this.props.mapStyle.layers.findIndex(i=>(wn().f[22]++,wn().s[75]++,i.id===t)));wn().s[76]++,this.props.onLayerSelect(r)}));wn().s[16]++,this.state={map:null,inspect:null,geocoder:null,zoomControl:null},wn().s[17]++,Qc.on("languageChanged",()=>{wn().f[8]++,wn().s[18]++,this.forceUpdate()})}shouldComponentUpdate(t,r){wn().f[9]++;let i=(wn().s[19]++,!1);wn().s[20]++;try{wn().s[21]++,i=(wn().b[3][0]++,JSON.stringify(this.props)!==JSON.stringify(t)||(wn().b[3][1]++,JSON.stringify(this.state)!==JSON.stringify(r)))}catch{}return wn().s[22]++,i}componentDidUpdate(){var i,s,l;wn().f[10]++;const t=(wn().s[23]++,this.state.map),r=(wn().s[24]++,this.props.replaceAccessTokens(this.props.mapStyle));wn().s[25]++,t?(wn().b[4][0]++,wn().s[26]++,t.setStyle(r,{diff:!0}),wn().s[27]++,t.showTileBoundaries=(i=this.props.options)==null?void 0:i.showTileBoundaries,wn().s[28]++,t.showCollisionBoxes=(s=this.props.options)==null?void 0:s.showCollisionBoxes,wn().s[29]++,t.showOverdrawInspector=(l=this.props.options)==null?void 0:l.showOverdrawInspector):wn().b[4][1]++,wn().s[30]++,wn().b[6][0]++,this.state.inspect&&(wn().b[6][1]++,this.props.inspectModeEnabled!==this.state.inspect._showInspectMap)?(wn().b[5][0]++,wn().s[31]++,this.state.inspect.toggleInspector()):wn().b[5][1]++,wn().s[32]++,wn().b[8][0]++,this.state.inspect&&(wn().b[8][1]++,this.props.inspectModeEnabled)?(wn().b[7][0]++,wn().s[33]++,this.state.inspect.setOriginalStyle(r),wn().s[34]++,setTimeout(()=>{wn().f[11]++,wn().s[35]++,this.state.inspect.render()},500)):wn().b[7][1]++}componentDidMount(){wn().f[12]++;const t=(wn().s[36]++,{...this.props.options,container:this.container,style:this.props.mapStyle,hash:!0,maxZoom:24,localIdeographFontFamily:!1}),r=(wn().s[37]++,new HG({metadata:!0}));wn().s[38]++,W1.addProtocol("pmtiles",r.tile);const i=(wn().s[39]++,new W1.Map(t));wn().s[40]++;const s=()=>{wn().f[13]++;const B=(wn().s[41]++,i.getCenter()),T=(wn().s[42]++,i.getZoom());wn().s[43]++,this.props.onChange({center:B,zoom:T})};wn().s[44]++,s(),wn().s[45]++,i.showTileBoundaries=t.showTileBoundaries,wn().s[46]++,i.showCollisionBoxes=t.showCollisionBoxes,wn().s[47]++,i.showOverdrawInspector=t.showOverdrawInspector;const l=(wn().s[48]++,this.initGeocoder(i)),o=(wn().s[49]++,new m$);wn().s[50]++,i.addControl(o,"top-right");const p=(wn().s[51]++,new W1.NavigationControl({visualizePitch:!0}));wn().s[52]++,i.addControl(p,"top-right");const v=(wn().s[53]++,document.createElement("div")),x=(wn().s[54]++,new bB({popup:new W1.Popup({closeOnClick:!1}),showMapPopup:!0,showMapPopupOnHover:!1,showInspectMapPopupOnHover:!0,showInspectButton:!1,blockHoverPopupOnClick:!0,assignLayerColor:(B,T)=>(wn().f[14]++,wn().s[55]++,DA(zF.brightColor(B,T)).desaturate(.5).string()),buildInspectStyle:(B,T)=>(wn().f[15]++,wn().s[56]++,j$(B,T,this.props.highlightedLayer)),renderPopup:B=>(wn().f[16]++,wn().s[57]++,this.props.inspectModeEnabled?(wn().b[9][0]++,wn().s[58]++,G7(le.jsx(r$,{features:B}),v)):(wn().b[9][1]++,wn().s[59]++,G7(le.jsx(WF,{features:B,onLayerSelect:this.onLayerSelectById,zoom:this.state.zoom}),v)))}));wn().s[60]++,i.addControl(x),wn().s[61]++,i.on("style.load",()=>{wn().f[17]++,wn().s[62]++,this.setState({map:i,inspect:x,geocoder:l,zoomControl:o,zoom:i.getZoom()})}),wn().s[63]++,i.on("data",B=>{if(wn().f[18]++,wn().s[64]++,B.dataType!=="tile"){wn().b[10][0]++,wn().s[65]++;return}else wn().b[10][1]++;wn().s[66]++,this.props.onDataChange({map:this.state.map})}),wn().s[67]++,i.on("error",B=>{wn().f[19]++,wn().s[68]++,console.log("ERROR",B)}),wn().s[69]++,i.on("zoom",B=>{wn().f[20]++,wn().s[70]++,this.setState({zoom:i.getZoom()})}),wn().s[71]++,i.on("dragend",s),wn().s[72]++,i.on("zoomend",s)}initGeocoder(t){wn().f[23]++;const r=(wn().s[77]++,{forwardGeocode:async s=>{wn().f[24]++;const l=(wn().s[78]++,[]);wn().s[79]++;try{const o=(wn().s[80]++,`https://nominatim.openstreetmap.org/search?q=${s.query}&format=geojson&polygon_geojson=1&addressdetails=1`),p=(wn().s[81]++,await fetch(o)),v=(wn().s[82]++,await p.json());wn().s[83]++;for(const x of v.features){const B=(wn().s[84]++,[x.bbox[0]+(x.bbox[2]-x.bbox[0])/2,x.bbox[1]+(x.bbox[3]-x.bbox[1])/2]),T=(wn().s[85]++,{type:"Feature",geometry:{type:"Point",coordinates:B},place_name:x.properties.display_name,properties:x.properties,text:x.properties.display_name,place_type:["place"],center:B});wn().s[86]++,l.push(T)}}catch(o){wn().s[87]++,console.error(`Failed to forwardGeocode with error: ${o}`)}return wn().s[88]++,{features:l}}}),i=(wn().s[89]++,new z$(r,{placeholder:this.props.t("Search"),maplibregl:W1}));return wn().s[90]++,t.addControl(i,"top-left"),wn().s[91]++,i}render(){var r,i;wn().f[25]++;const t=(wn().s[92]++,this.props.t);return wn().s[93]++,(r=this.state.geocoder)==null||r.setPlaceholder(t("Search")),wn().s[94]++,(i=this.state.zoomControl)==null||i.setLabel(t("Zoom:")),wn().s[95]++,le.jsx("div",{className:"maputnik-map__map",role:"region","aria-label":t("Map view"),ref:s=>(wn().f[26]++,wn().s[96]++,this.container=s),"data-wd-key":"maplibre:map"})}}Pn(VF,"defaultProps",(wn().s[13]++,{onMapLoaded:()=>{wn().f[3]++},onDataChange:()=>{wn().f[4]++},onLayerSelect:()=>{wn().f[5]++},onChange:()=>{wn().f[6]++},options:{}}));const N$=(wn().s[97]++,Ws()(VF));var Q7={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},fv=" ",Y7=/(italic|oblique)$/i,q7={};function t6(n,e,t){var r=q7[n];if(!r){Array.isArray(n)||(n=[n]);for(var i=400,s="normal",l=[],o,p,v=0,x=n.length;v<x;++v){var B=n[v],T=B.split(" "),P=T[T.length-1].toLowerCase();P=="normal"||P=="italic"||P=="oblique"?(s=p?s:P,p=!0,T.pop(),P=T[T.length-1].toLowerCase()):Y7.test(P)&&(P=P.replace(Y7,""),s=p?s:T[T.length-1].replace(P,""),p=!0);for(var U in Q7){var j=T.length>1?T[T.length-2].toLowerCase():"";if(P==U||P==U.replace("-","")||j+"-"+P==U){i=o?i:Q7[U],T.pop(),j&&U.startsWith(j)&&T.pop();break}}!o&&typeof P=="number"&&(i=P,o=!0);var N=T.join(fv).replace("Klokantech Noto Sans","Noto Sans");N.indexOf(fv)!==-1&&(N='"'+N+'"'),l.push(N)}r=q7[n]=[s,i,l]}return r[0]+fv+r[1]+fv+e+"px"+(t?"/"+t:"")+fv+r[2]}function W$(n,e,t){let r,i;t=t||Tm;let s=0,l=n.length,o=!1;for(;s<l;)r=s+(l-s>>1),i=+t(n[r],e),i<0?s=r+1:(l=r,o=!i);return o?s:~s}function Tm(n,e){return n>e?1:n<e?-1:0}function G$(n,e){return n<e?1:n>e?-1:0}function ux(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function Q$(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function Zp(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function F0(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function Y$(n,e,t){const r=e;return n.every(function(i,s){if(s===0)return!0;const l=r(n[s-1],i);return!(l>0||l===0)})}function fC(){return!0}function Ax(){return!1}function pC(){}function $F(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!F0(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function yy(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}const vy={PROPERTYCHANGE:"propertychange"},so={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class jC{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function NC(n){for(const e in n)delete n[e]}function R0(n){let e;for(e in n)return!1;return!e}class vp{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class WC extends jC{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new vp(e):e;s.target||(s.target=this.eventTarget_||this);const l=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in l||(l[r]=0,o[r]=0),++l[r];let p;for(let v=0,x=i.length;v<x;++v)if("handleEvent"in i[v]?p=i[v].handleEvent(s):p=i[v].call(this,s),p===!1||s.propagationStopped){p=!1;break}if(--l[r]===0){let v=o[r];for(delete o[r];v--;)this.removeEventListener(r,pC);delete l[r]}return p}disposeInternal(){this.listeners_&&NC(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=pC,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}}function Fs(n,e,t,r,i){if(i){const l=t;t=function(o){return n.removeEventListener(e,t),l.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function e2(n,e,t,r){return Fs(n,e,t,r,!0)}function gl(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),NC(n))}class GC extends WC{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(so.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Fs(this,e[s],t);return i}return Fs(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=e2(this,e[s],t)}else r=e2(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)q$(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}GC.prototype.on;GC.prototype.once;GC.prototype.un;function q$(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)gl(n[e]);else gl(n)}function go(){throw new Error("Unimplemented abstract method.")}let V$=0;function Ro(n){return n.ol_uid||(n.ol_uid=String(++V$))}class V7 extends vp{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Cp extends GC{constructor(e){super(),this.on,this.once,this.un,Ro(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new V7(r,e,t)),r=vy.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new V7(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],R0(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}function sa(n,e){if(!n)throw new Error(e)}class cx extends Cp{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new cx(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(gl(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Fs(e,so.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?$$(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function $$(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(sa(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const yc={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function n6(n){const e=kf();for(let t=0,r=n.length;t<r;++t)Xv(e,n[t]);return e}function H$(n,e,t){const r=Math.min.apply(null,n),i=Math.min.apply(null,e),s=Math.max.apply(null,n),l=Math.max.apply(null,e);return Dm(r,i,s,l,t)}function I0(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function HF(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function zg(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Pg(n,e){return MB(n,e[0],e[1])}function Gp(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function MB(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function r6(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],l=e[0],o=e[1];let p=yc.UNKNOWN;return l<t?p=p|yc.LEFT:l>i&&(p=p|yc.RIGHT),o<r?p=p|yc.BELOW:o>s&&(p=p|yc.ABOVE),p===yc.UNKNOWN&&(p=yc.INTERSECTING),p}function kf(){return[1/0,1/0,-1/0,-1/0]}function Dm(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function Py(n){return Dm(1/0,1/0,-1/0,-1/0,n)}function ZF(n,e){const t=n[0],r=n[1];return Dm(t,r,t,r,e)}function wB(n,e,t,r,i){const s=Py(i);return JF(s,n,e,t,r)}function Fm(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function XF(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function Xv(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function JF(n,e,t,r,i){for(;t<r;t+=i)Z$(n,e[t],e[t+1]);return n}function Z$(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function eL(n,e){let t;return t=e(dx(n)),t||(t=e(hx(n)),t)||(t=e(fx(n)),t)||(t=e(zm(n)),t)?t:!1}function i6(n){let e=0;return jg(n)||(e=Ls(n)*fA(n)),e}function dx(n){return[n[0],n[1]]}function hx(n){return[n[2],n[1]]}function Tf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function X$(n,e){let t;if(e==="bottom-left")t=dx(n);else if(e==="bottom-right")t=hx(n);else if(e==="top-left")t=zm(n);else if(e==="top-right")t=fx(n);else throw new Error("Invalid corner");return t}function t2(n,e,t,r,i){const[s,l,o,p,v,x,B,T]=tL(n,e,t,r);return Dm(Math.min(s,o,v,B),Math.min(l,p,x,T),Math.max(s,o,v,B),Math.max(l,p,x,T),i)}function tL(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,l=Math.cos(t),o=Math.sin(t),p=i*l,v=i*o,x=s*l,B=s*o,T=n[0],P=n[1];return[T-p+B,P-v-x,T-p-B,P-v+x,T+p-B,P+v+x,T+p+B,P+v-x,T-p+B,P-v-x]}function fA(n){return n[3]-n[1]}function mp(n,e,t){const r=t||kf();return Nu(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):Py(r),r}function zm(n){return[n[0],n[3]]}function fx(n){return[n[2],n[3]]}function Ls(n){return n[2]-n[0]}function Nu(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function jg(n){return n[2]<n[0]||n[3]<n[1]}function J$(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function eH(n,e,t){let r=!1;const i=r6(n,e),s=r6(n,t);if(i===yc.INTERSECTING||s===yc.INTERSECTING)r=!0;else{const l=n[0],o=n[1],p=n[2],v=n[3],x=e[0],B=e[1],T=t[0],P=t[1],U=(P-B)/(T-x);let j,N;s&yc.ABOVE&&!(i&yc.ABOVE)&&(j=T-(P-v)/U,r=j>=l&&j<=p),!r&&s&yc.RIGHT&&!(i&yc.RIGHT)&&(N=P-(T-p)*U,r=N>=o&&N<=v),!r&&s&yc.BELOW&&!(i&yc.BELOW)&&(j=T-(P-o)/U,r=j>=l&&j<=p),!r&&s&yc.LEFT&&!(i&yc.LEFT)&&(N=P-(T-l)*U,r=N>=o&&N<=v)}return r}function tH(n,e,t,r){if(jg(n))return Py(t);let i=[];i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(i,i,2);const s=[],l=[];for(let o=0,p=i.length;o<p;o+=2)s.push(i[o]),l.push(i[o+1]);return H$(s,l,t)}function nL(n,e){const t=e.getExtent(),r=Tf(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Ls(t),l=Math.floor((r[0]-t[0])/i)*i;n[0]-=l,n[2]-=l}return n}function rL(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];nL(n,e);const i=Ls(r);if(Ls(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function iL(n,e,t,r){const i=[];let s=kf();for(let l=0,o=t.length;l<o;++l){const p=t[l];s=wB(n,e,p[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=p[p.length-1]}return i}function nH(n,e,t,r,i){return!eL(i,function(l){return!vg(n,e,t,r,l[0],l[1])})}function vg(n,e,t,r,i,s){let l=0,o=n[t-r],p=n[t-r+1];for(;e<t;e+=r){const v=n[e],x=n[e+1];p<=s?x>s&&(v-o)*(s-p)-(i-o)*(x-p)>0&&l++:x<=s&&(v-o)*(s-p)-(i-o)*(x-p)<0&&l--,o=v,p=x}return l!==0}function SB(n,e,t,r,i,s){if(t.length===0||!vg(n,e,t[0],r,i,s))return!1;for(let l=1,o=t.length;l<o;++l)if(vg(n,t[l-1],t[l],r,i,s))return!1;return!0}function rH(n,e,t,r,i,s){if(t.length===0)return!1;for(let l=0,o=t.length;l<o;++l){const p=t[l];if(SB(n,e,p,r,i,s))return!0;e=p[p.length-1]}return!1}function EB(n,e,t,r,i,s,l){let o,p,v,x,B,T,P;const U=i[s+1],j=[];for(let H=0,oe=t.length;H<oe;++H){const te=t[H];for(x=n[te-r],T=n[te-r+1],o=e;o<te;o+=r)B=n[o],P=n[o+1],(U<=T&&P<=U||T<=U&&U<=P)&&(v=(U-T)/(P-T)*(B-x)+x,j.push(v)),x=B,T=P}let N=NaN,q=-1/0;for(j.sort(Tm),x=j[0],o=1,p=j.length;o<p;++o){B=j[o];const H=Math.abs(B-x);H>q&&(v=(x+B)/2,SB(n,e,t,r,v,U)&&(N=v,q=H)),x=B}return isNaN(N)&&(N=i[s]),l?(l.push(N,U,q),l):[N,U,q]}function oL(n,e,t,r,i){let s=[];for(let l=0,o=t.length;l<o;++l){const p=t[l];s=EB(n,e,p,r,i,2*l,s),e=p[p.length-1]}return s}function bu(n,e,t){return Math.min(Math.max(n,e),t)}function iH(n,e,t,r,i,s){const l=i-t,o=s-r;if(l!==0||o!==0){const p=((n-t)*l+(e-r)*o)/(l*l+o*o);p>1?(t=i,r=s):p>0&&(t+=l*p,r+=o*p)}return Bg(n,e,t,r)}function Bg(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function oH(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const p=Math.abs(n[o][r]);p>s&&(s=p,i=o)}if(s===0)return null;const l=n[i];n[i]=n[r],n[r]=l;for(let o=r+1;o<e;o++){const p=-n[o][r]/n[r][r];for(let v=r;v<e+1;v++)r==v?n[o][v]=0:n[o][v]+=p*n[r][v]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function $7(n){return n*180/Math.PI}function k0(n){return n*Math.PI/180}function Og(n,e){const t=n%e;return t*e<0?t+e:t}function Gh(n,e,t){return n+t*(e-n)}function px(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Q_(n,e){return Math.floor(px(n,e))}function b0(n,e){return Math.ceil(px(n,e))}function o6(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function n2(n,e,t,r,i,s,l){let o,p;const v=(t-e)/r;if(v===1)o=e;else if(v===2)o=e,p=i;else if(v!==0){let x=n[e],B=n[e+1],T=0;const P=[0];for(let N=e+r;N<t;N+=r){const q=n[N],H=n[N+1];T+=Math.sqrt((q-x)*(q-x)+(H-B)*(H-B)),P.push(T),x=q,B=H}const U=i*T,j=W$(P,U);j<0?(p=(U-P[-j-2])/(P[-j-1]-P[-j-2]),o=e+(-j-2)*r):o=e+j*r}l=l>1?l:2,s=s||new Array(l);for(let x=0;x<l;++x)s[x]=o===void 0?NaN:p===void 0?n[o+x]:Gh(n[o+x],n[o+r+x],p);return s}function s6(n,e,t,r,i,s){if(t==e)return null;let l;if(i<n[e+r-1])return s?(l=n.slice(e,e+r),l[r-1]=i,l):null;if(n[t-1]<i)return s?(l=n.slice(t-r,t),l[r-1]=i,l):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,p=t/r;for(;o<p;){const T=o+p>>1;i<n[(T+1)*r-1]?p=T:o=T+1}const v=n[o*r-1];if(i==v)return n.slice((o-1)*r,(o-1)*r+r);const x=n[(o+1)*r-1],B=(i-v)/(x-v);l=[];for(let T=0;T<r-1;++T)l.push(Gh(n[(o-1)*r+T],n[o*r+T],B));return l.push(i),l}function sH(n,e,t,r,i,s,l){if(l)return s6(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let p=0,v=t.length;p<v;++p){const x=t[p];if(e!=x){if(i<n[e+r-1])return null;if(i<=n[x-1])return s6(n,e,x,r,i,!1);e=x}}return null}function aH(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function BB(n,e,t,r){let i=0,s=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const o=n[e],p=n[e+1];i+=(o-s)*(p+l),s=o,l=p}return i===0?void 0:i>0}function OB(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,l=t.length;s<l;++s){const o=t[s],p=BB(n,e,o,r);if(s===0){if(i&&p||!i&&!p)return!1}else if(i&&!p||!i&&p)return!1;e=o}return!0}function sL(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];if(!OB(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function r2(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,l=t.length;s<l;++s){const o=t[s],p=BB(n,e,o,r);(s===0?i&&p||!i&&!p:i&&!p||!i&&p)&&aH(n,e,o,r),e=o}return e}function a6(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s)e=r2(n,e,t[s],r,i);return e}function aL(n,e){const t=[];let r=0,i=0,s;for(let l=0,o=e.length;l<o;++l){const p=e[l],v=BB(n,r,p,2);if(s===void 0&&(s=v),v===s)t.push(e.slice(i,l+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=l+1,r=p}return t}function mx(n,e,t,r,i,s,l){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[l++]=n[e],s[l++]=n[e+1];return l}const p=new Array(o);p[0]=1,p[o-1]=1;const v=[e,t-r];let x=0;for(;v.length>0;){const B=v.pop(),T=v.pop();let P=0;const U=n[T],j=n[T+1],N=n[B],q=n[B+1];for(let H=T+r;H<B;H+=r){const oe=n[H],te=n[H+1],V=iH(oe,te,U,j,N,q);V>P&&(x=H,P=V)}P>i&&(p[(x-e)/r]=1,T+r<x&&v.push(T,x),x+r<B&&v.push(x,B))}for(let B=0;B<o;++B)p[B]&&(s[l++]=n[e+B*r],s[l++]=n[e+B*r+1]);return l}function lL(n,e,t,r,i,s,l,o){for(let p=0,v=t.length;p<v;++p){const x=t[p];l=mx(n,e,x,r,i,s,l),o.push(l),e=x}return l}function dg(n,e){return e*Math.round(n/e)}function lH(n,e,t,r,i,s,l){if(e==t)return l;let o=dg(n[e],i),p=dg(n[e+1],i);e+=r,s[l++]=o,s[l++]=p;let v,x;do if(v=dg(n[e],i),x=dg(n[e+1],i),e+=r,e==t)return s[l++]=v,s[l++]=x,l;while(v==o&&x==p);for(;e<t;){const B=dg(n[e],i),T=dg(n[e+1],i);if(e+=r,B==v&&T==x)continue;const P=v-o,U=x-p,j=B-o,N=T-p;if(P*N==U*j&&(P<0&&j<P||P==j||P>0&&j>P)&&(U<0&&N<U||U==N||U>0&&N>U)){v=B,x=T;continue}s[l++]=v,s[l++]=x,o=v,p=x,v=B,x=T}return s[l++]=v,s[l++]=x,l}function IB(n,e,t,r,i,s,l,o){for(let p=0,v=t.length;p<v;++p){const x=t[p];l=lH(n,e,x,r,i,s,l),o.push(l),e=x}return l}function uH(n,e,t,r,i,s,l,o){for(let p=0,v=t.length;p<v;++p){const x=t[p],B=[];l=IB(n,e,x,r,i,s,l,B),o.push(B),e=x[x.length-1]}return l}function T0(n,e,t,r,i,s,l){s=s||[],l=l||2;let o=0;for(let p=e;p<t;p+=r){const v=n[p],x=n[p+1];s[o++]=i[0]*v+i[2]*x+i[4],s[o++]=i[1]*v+i[3]*x+i[5];for(let B=2;B<l;B++)s[o++]=n[p+B]}return s&&s.length!=o&&(s.length=o),s}function uL(n,e,t,r,i,s,l){l=l||[];const o=Math.cos(i),p=Math.sin(i),v=s[0],x=s[1];let B=0;for(let T=e;T<t;T+=r){const P=n[T]-v,U=n[T+1]-x;l[B++]=v+P*o-U*p,l[B++]=x+P*p+U*o;for(let j=T+2;j<T+r;++j)l[B++]=n[j]}return l&&l.length!=B&&(l.length=B),l}function AH(n,e,t,r,i,s,l,o){o=o||[];const p=l[0],v=l[1];let x=0;for(let B=e;B<t;B+=r){const T=n[B]-p,P=n[B+1]-v;o[x++]=p+i*T,o[x++]=v+s*P;for(let U=B+2;U<B+r;++U)o[x++]=n[U]}return o&&o.length!=x&&(o.length=x),o}function cH(n,e,t,r,i,s,l){l=l||[];let o=0;for(let p=e;p<t;p+=r){l[o++]=n[p]+i,l[o++]=n[p+1]+s;for(let v=p+2;v<p+r;++v)l[o++]=n[v]}return l&&l.length!=o&&(l.length=o),l}function AL(...n){console.warn(...n)}function dH(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function i2(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function kB(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function hH(n,e){return n[0]*=e,n[1]*=e,n}function TB(n,e){if(e.canWrapX()){const t=Ls(e.getExtent()),r=fH(n,e,t);r&&(n[0]-=r*t)}return n}function fH(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Ls(r),i=Math.floor((n[0]-r[0])/t)),i}const D0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class gx{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||D0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const QC=6378137,H1=Math.PI*QC,pH=[-H1,-H1,H1,H1],mH=[-180,-85,180,85],Y_=QC*Math.log(Math.tan(Math.PI/2));class d1 extends gx{constructor(e){super({code:e,units:"m",extent:pH,global:!0,worldExtent:mH,getPointResolution:function(t,r){return t/Math.cosh(r[1]/QC)}})}}const H7=[new d1("EPSG:3857"),new d1("EPSG:102100"),new d1("EPSG:102113"),new d1("EPSG:900913"),new d1("http://www.opengis.net/def/crs/EPSG/0/3857"),new d1("http://www.opengis.net/gml/srs/epsg.xml#3857")];function gH(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=H1*n[s]/180;let l=QC*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));l>Y_?l=Y_:l<-Y_&&(l=-Y_),e[s+1]=l}return e}function yH(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/H1,e[s+1]=360*Math.atan(Math.exp(n[s+1]/QC))/Math.PI-90;return e}const vH=6378137,Z7=[-180,-90,180,90],CH=Math.PI*vH/180;class ig extends gx{constructor(e,t){super({code:e,units:"degrees",extent:Z7,axisOrientation:t,global:!0,metersPerUnit:CH,worldExtent:Z7})}}const X7=[new ig("CRS:84"),new ig("EPSG:4326","neu"),new ig("urn:ogc:def:crs:OGC:1.3:CRS84"),new ig("urn:ogc:def:crs:OGC:2:84"),new ig("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ig("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ig("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let l6={};function _H(n){return l6[n]||l6[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function bH(n,e){l6[n]=e}let sy={};function mC(n,e,t){const r=n.getCode(),i=e.getCode();r in sy||(sy[r]={}),sy[r][i]=t}function r4(n,e){return n in sy&&e in sy[n]?sy[n][e]:null}const o2=.9996,If=.00669438,yx=If*If,vx=yx*If,Cg=If/(1-If),J7=Math.sqrt(1-If),Cy=(1-J7)/(1+J7),cL=Cy*Cy,PB=cL*Cy,KB=PB*Cy,dL=KB*Cy,hL=1-If/4-3*yx/64-5*vx/256,xH=3*If/8+3*yx/32+45*vx/1024,MH=15*yx/256+45*vx/1024,wH=35*vx/3072,SH=3/2*Cy-27/32*PB+269/512*dL,EH=21/16*cL-55/32*KB,BH=151/96*PB-417/128*dL,OH=1097/512*KB,s2=6378137;function IH(n,e,t){const r=n-5e5,l=(t.north?e:e-1e7)/o2/(s2*hL),o=l+SH*Math.sin(2*l)+EH*Math.sin(4*l)+BH*Math.sin(6*l)+OH*Math.sin(8*l),p=Math.sin(o),v=p*p,x=Math.cos(o),B=p/x,T=B*B,P=T*T,U=1-If*v,j=Math.sqrt(1-If*v),N=s2/j,q=(1-If)/U,H=Cg*x**2,oe=H*H,te=r/(N*o2),V=te*te,ne=V*te,W=ne*te,ie=W*te,he=ie*te,fe=o-B/q*(V/2-W/24*(5+3*T+10*H-4*oe-9*Cg))+he/720*(61+90*T+298*H+45*P-252*Cg-3*oe);let Ee=(te-ne/6*(1+2*T+H)+ie/120*(5-2*H+28*T-3*oe+8*Cg+24*P))/x;return Ee=o6(Ee+k0(fL(t.number)),-Math.PI,Math.PI),[$7(Ee),$7(fe)]}const eI=-80,tI=84,kH=-180,TH=180;function PH(n,e,t){n=o6(n,kH,TH),e<eI?e=eI:e>tI&&(e=tI);const r=k0(e),i=Math.sin(r),s=Math.cos(r),l=i/s,o=l*l,p=o*o,v=k0(n),x=fL(t.number),B=k0(x),T=s2/Math.sqrt(1-If*i**2),P=Cg*s**2,U=s*o6(v-B,-Math.PI,Math.PI),j=U*U,N=j*U,q=N*U,H=q*U,oe=H*U,te=s2*(hL*r-xH*Math.sin(2*r)+MH*Math.sin(4*r)-wH*Math.sin(6*r)),V=o2*T*(U+N/6*(1-o+P)+H/120*(5-18*o+p+72*P-58*Cg))+5e5;let ne=o2*(te+T*l*(j/2+q/24*(5-o+9*P+4*P**2)+oe/720*(61-58*o+p+600*P-330*Cg)));return t.north||(ne+=1e7),[V,ne]}function fL(n){return(n-1)*6-180+3}const KH=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function pL(n){let e=0;for(const i of KH){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function nI(n,e){return function(t,r,i,s){const l=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(l));for(let o=0;o<l;o+=s){const p=t[o],v=t[o+1],x=n(p,v,e);r[o]=x[0],r[o+1]=x[1]}return r}}function RH(n){return pL(n)?new gx({code:n,units:"m"}):null}function DH(n){const e=pL(n.getCode());return e?{forward:nI(PH,e),inverse:nI(IH,e)}:null}const FH=63710088e-1;function rI(n,e,t){t=t||FH;const r=k0(n[1]),i=k0(e[1]),s=(i-r)/2,l=k0(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(l)*Math.sin(l)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const LH=[DH],UH=[RH];let u6=!0;function mL(n){u6=!1}function RB(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function A6(n){bH(n.getCode(),n),mC(n,n,RB)}function zH(n){n.forEach(A6)}function Ia(n){if(typeof n!="string")return n;const e=_H(n);if(e)return e;for(const t of UH){const r=t(n);if(r)return r}return null}function c6(n,e,t,r){n=Ia(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const l=n.getMetersPerUnit();l&&(i=i*l/D0[r])}}else{const l=n.getUnits();if(l=="degrees"&&!r||r=="degrees")i=e;else{const o=YC(n,Ia("EPSG:4326"));if(!o&&l!=="degrees")i=e*n.getMetersPerUnit();else{let v=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];v=o(v,v,2);const x=rI(v.slice(0,2),v.slice(2,4)),B=rI(v.slice(4,6),v.slice(6,8));i=(x+B)/2}const p=r?D0[r]:n.getMetersPerUnit();p!==void 0&&(i/=p)}}return i}function iI(n){zH(n),n.forEach(function(e){n.forEach(function(t){e!==t&&mC(e,t,RB)})})}function jH(n,e,t,r){n.forEach(function(i){e.forEach(function(s){mC(i,s,t),mC(s,i,r)})})}function DB(n,e){return n?typeof n=="string"?Ia(n):n:Ia(e)}function NH(n){return function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let l=0;l<s;l+=i){const o=n(e.slice(l,l+r)),p=o.length;for(let v=0,x=i;v<x;++v)t[l+v]=v>=p?e[l+v]:o[v]}return t}}function d6(n,e){return mL(),Cx(n,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function i4(n,e){const t=Cx(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=Og(r+180,360)-180),t}function P0(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||YC(n,e)===RB)&&t}function YC(n,e){const t=n.getCode(),r=e.getCode();let i=r4(t,r);if(i)return i;let s=null,l=null;for(const p of LH)s||(s=p(n)),l||(l=p(e));if(!s&&!l)return null;const o="EPSG:4326";if(l)if(s)i=o4(s.inverse,l.forward);else{const p=r4(t,o);p&&(i=o4(p,l.forward))}else{const p=r4(o,r);p&&(i=o4(s.inverse,p))}return i&&(A6(n),A6(e),mC(n,e,i)),i}function o4(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function gC(n,e){const t=Ia(n),r=Ia(e);return YC(t,r)}function Cx(n,e,t){const r=gC(e,t);if(!r){const i=Ia(e).getCode(),s=Ia(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}let WH=null;function GH(){return WH}function h6(n,e){return n}function Em(n,e){return u6&&!i2(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(u6=!1,AL("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function FB(n,e){return n}function Qp(n,e){return n}function QH(){iI(H7),iI(X7),jH(X7,H7,gH,yH)}QH();const gL=new Array(6);function yh(){return[1,0,0,1,0,0]}function oI(n){return UB(n,1,0,0,1,0,0)}function LB(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],l=n[4],o=n[5],p=e[0],v=e[1],x=e[2],B=e[3],T=e[4],P=e[5];return n[0]=t*p+i*v,n[1]=r*p+s*v,n[2]=t*x+i*B,n[3]=r*x+s*B,n[4]=t*T+i*P+l,n[5]=r*T+s*P+o,n}function UB(n,e,t,r,i,s,l){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=s,n[5]=l,n}function YH(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function FA(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function s4(n,e,t){return LB(n,UB(gL,e,0,0,t,0,0))}function qH(n,e,t){return LB(n,UB(gL,1,0,0,1,e,t))}function Jp(n,e,t,r,i,s,l,o){const p=Math.sin(s),v=Math.cos(s);return n[0]=r*v,n[1]=i*p,n[2]=-r*p,n[3]=i*v,n[4]=l*r*v-o*r*p+e,n[5]=l*i*p+o*i*v+t,n}function yL(n,e){const t=VH(e);sa(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],l=e[3],o=e[4],p=e[5];return n[0]=l/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*p-l*o)/t,n[5]=-(r*p-i*o)/t,n}function VH(n){return n[0]*n[3]-n[1]*n[2]}const $H=[1e5,1e5,1e5,1e5,2,2];function HH(n){return"matrix("+n.join(", ")+")"}function sI(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function ZH(n,e){const t=sI(n),r=sI(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*$H[i])!==0)return!1;return!0}const aI=yh(),XH=[NaN,NaN];class vL extends Cp{constructor(){super(),this.extent_=kf(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=$F((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return go()}closestPointXY(e,t,r,i){return go()}containsXY(e,t){return this.closestPointXY(e,t,XH,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return go()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Py(t),this.extentRevision_=this.getRevision()}return J$(this.extent_,e)}rotate(e,t){go()}scale(e,t,r){go()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return go()}getType(){return go()}applyTransform(e){go()}intersectsExtent(e){return go()}translate(e,t){go()}transform(e,t){const r=Ia(e),i=r.getUnits()=="tile-pixels"?function(s,l,o){const p=r.getExtent(),v=r.getWorldExtent(),x=fA(v)/fA(p);Jp(aI,v[0],v[3],x,-x,0,0,0);const B=T0(s,0,s.length,o,aI,l),T=gC(r,t);return T?T(B,B,o):B}:gC(r,t);return this.applyTransform(i),this}}class Ng extends vL{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return wB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return go()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=lI(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){go()}setLayout(e,t,r){let i;if(e)i=lI(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=Wg(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();uL(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Tf(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();AH(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();cH(r,0,r.length,i,e,t,r),this.changed()}}}function Wg(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function lI(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function JH(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return T0(r,0,r.length,i,e,t)}function eZ(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function _x(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const l=t[i];for(let o=0;o<r;++o)n[e++]=l[o]}return e}function qC(n,e,t,r,i){i=i||[];let s=0;for(let l=0,o=t.length;l<o;++l){const p=_x(n,e,t[l],r);i[s++]=p,e=p}return i.length=s,i}function CL(n,e,t,r,i){i=i||[];let s=0;for(let l=0,o=t.length;l<o;++l){const p=qC(n,e,t[l],r,i[s]);p.length===0&&(p[0]=e),i[s++]=p,e=p[p.length-1]}return i.length=s,i}class a2 extends vL{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(gl),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(Fs(e[t],so.CHANGE,this.changed,this))}clone(){const e=new a2(a4(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<zg(this.getExtent(),e,t))return i;const s=this.geometries_;for(let l=0,o=s.length;l<o;++l)i=s[l].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){Py(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)XF(e,t[r].getExtent());return e}getGeometries(){return a4(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,l=r.length;s<l;++s){const o=r[s],p=o.getSimplifiedGeometry(e);t.push(p),p!==o&&(i=!0)}return i?new a2(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Tf(this.getExtent()));const i=this.geometries_;for(let s=0,l=i.length;s<l;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(a4(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function a4(n){return n.map(e=>e.clone())}function _L(n,e,t,r){let i=0;const s=n[t-r],l=n[t-r+1];let o=0,p=0;for(;e<t;e+=r){const v=n[e]-s,x=n[e+1]-l;i+=p*v-o*x,o=v,p=x}return i/2}function bL(n,e,t,r){let i=0;for(let s=0,l=t.length;s<l;++s){const o=t[s];i+=_L(n,e,o,r),e=o}return i}function tZ(n,e,t,r){let i=0;for(let s=0,l=t.length;s<l;++s){const o=t[s];i+=bL(n,e,o,r),e=o[o.length-1]}return i}function uI(n,e,t,r,i,s,l){const o=n[e],p=n[e+1],v=n[t]-o,x=n[t+1]-p;let B;if(v===0&&x===0)B=e;else{const T=((i-o)*v+(s-p)*x)/(v*v+x*x);if(T>1)B=t;else if(T>0){for(let P=0;P<r;++P)l[P]=Gh(n[e+P],n[t+P],T);l.length=r;return}else B=e}for(let T=0;T<r;++T)l[T]=n[B+T];l.length=r}function zB(n,e,t,r,i){let s=n[e],l=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],p=n[e+1],v=Bg(s,l,o,p);v>i&&(i=v),s=o,l=p}return i}function jB(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];i=zB(n,e,o,r,i),e=o}return i}function nZ(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];i=jB(n,e,o,r,i),e=o[o.length-1]}return i}function NB(n,e,t,r,i,s,l,o,p,v,x){if(e==t)return v;let B,T;if(i===0){if(T=Bg(l,o,n[e],n[e+1]),T<v){for(B=0;B<r;++B)p[B]=n[e+B];return p.length=r,T}return v}x=x||[NaN,NaN];let P=e+r;for(;P<t;)if(uI(n,P-r,P,r,l,o,x),T=Bg(l,o,x[0],x[1]),T<v){for(v=T,B=0;B<r;++B)p[B]=x[B];p.length=r,P+=r}else P+=r*Math.max((Math.sqrt(T)-Math.sqrt(v))/i|0,1);if(s&&(uI(n,t-r,e,r,l,o,x),T=Bg(l,o,x[0],x[1]),T<v)){for(v=T,B=0;B<r;++B)p[B]=x[B];p.length=r}return v}function WB(n,e,t,r,i,s,l,o,p,v,x){x=x||[NaN,NaN];for(let B=0,T=t.length;B<T;++B){const P=t[B];v=NB(n,e,P,r,i,s,l,o,p,v,x),e=P}return v}function rZ(n,e,t,r,i,s,l,o,p,v,x){x=x||[NaN,NaN];for(let B=0,T=t.length;B<T;++B){const P=t[B];v=WB(n,e,P,r,i,s,l,o,p,v,x),e=P[P.length-1]}return v}function x0(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=e;l<t;l+=r)i[s++]=n.slice(l,l+r);return i.length=s,i}function yC(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=0,o=t.length;l<o;++l){const p=t[l];i[s++]=x0(n,e,p,r,i[s]),e=p}return i.length=s,i}function f6(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let l=0,o=t.length;l<o;++l){const p=t[l];i[s++]=p.length===1&&p[0]===e?[]:yC(n,e,p,r,i[s]),e=p[p.length-1]}return i.length=s,i}class vC extends Ng{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new vC(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<zg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(zB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),NB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return _L(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return x0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=mx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new vC(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=_x(this.flatCoordinates,0,e,this.stride),this.changed()}}function xL(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function bx(n,e,t,r,i,s){return s=s??JF(kf(),n,e,t,r),Nu(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:xL(n,e,t,r,function(l,o){return eH(i,l,o)}):!1}function iZ(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){if(bx(n,e,t[s],r,i))return!0;e=t[s]}return!1}function ML(n,e,t,r,i){return!!(bx(n,e,t,r,i)||vg(n,e,t,r,i[0],i[1])||vg(n,e,t,r,i[0],i[3])||vg(n,e,t,r,i[2],i[1])||vg(n,e,t,r,i[2],i[3]))}function wL(n,e,t,r,i){if(!ML(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,l=t.length;s<l;++s)if(nH(n,t[s-1],t[s],r,i)&&!bx(n,t[s-1],t[s],r,i))return!1;return!0}function oZ(n,e,t,r,i){for(let s=0,l=t.length;s<l;++s){const o=t[s];if(wL(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function GB(n,e,t,r){let i=n[e],s=n[e+1],l=0;for(let o=e+r;o<t;o+=r){const p=n[o],v=n[o+1];l+=Math.sqrt((p-i)*(p-i)+(v-s)*(v-s)),i=p,s=v}return l}class Kg extends Ng{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Zp(this.flatCoordinates,e),this.changed()}clone(){const e=new Kg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<zg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(zB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),NB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return xL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,s6(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return x0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return n2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return GB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=mx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Kg(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return bx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=_x(this.flatCoordinates,0,e,this.stride),this.changed()}}class CC extends Ng{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],l=[];for(let p=0,v=i.length;p<v;++p){const x=i[p];Zp(s,x.getFlatCoordinates()),l.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=l}}appendLineString(e){Zp(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new CC(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<zg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(jB(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),WB(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,sH(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return yC(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Kg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let l=0,o=t.length;l<o;++l){const p=t[l],v=new Kg(e.slice(s,p),r);i.push(v),s=p}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=GB(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let l=0,o=i.length;l<o;++l){const p=i[l],v=n2(t,r,p,s,.5);Zp(e,v),r=p}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=lL(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new CC(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return iZ(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=qC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class Rg extends Ng{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Rg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,l=Bg(e,t,s[0],s[1]);if(l<i){const o=this.stride;for(let p=0;p<o;++p)r[p]=s[p];return r.length=o,l}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return ZF(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return MB(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=eZ(this.flatCoordinates,0,e,this.stride),this.changed()}}class VC extends Ng{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Zp(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new VC(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<zg(this.getExtent(),e,t))return i;const s=this.flatCoordinates,l=this.stride;for(let o=0,p=s.length;o<p;o+=l){const v=Bg(e,t,s[o],s[o+1]);if(v<i){i=v;for(let x=0;x<l;++x)r[x]=s[o+x];r.length=l}}return i}getCoordinates(){return x0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Rg(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,l=e.length;s<l;s+=r){const o=new Rg(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const l=t[i],o=t[i+1];if(MB(e,l,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=_x(this.flatCoordinates,0,e,this.stride),this.changed()}}class Lm extends Ng{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Zp(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Lm(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<zg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(jB(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),WB(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return SB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return bL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),r2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,yC(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Tf(this.getExtent());this.flatInteriorPoint_=EB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Rg(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new vC(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let l=0,o=r.length;l<o;++l){const p=r[l],v=new vC(t.slice(s,p),e);i.push(v),s=p}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;OB(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=r2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=IB(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Lm(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return wL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=qC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function AI(n){if(jg(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Lm(s,"XY",[s.length])}class _C extends Ng{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],l=[];for(let o=0,p=i.length;o<p;++o){const v=i[o],x=s.length,B=v.getEnds();for(let T=0,P=B.length;T<P;++T)B[T]+=x;Zp(s,v.getFlatCoordinates()),l.push(B)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=l}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;Zp(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new _C(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<zg(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(nZ(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rZ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return rH(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return tZ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),a6(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,f6(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=iL(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=oL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new VC(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;sL(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=a6(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=uH(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new _C(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,l=r.length;s<l;++s)r[s]-=t;return new Lm(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let l=0,o=r.length;l<o;++l){const p=r[l].slice(),v=p[p.length-1];if(s!==0)for(let B=0,T=p.length;B<T;++B)p[B]-=s;const x=new Lm(t.slice(s,v),e,p);i.push(x),s=v}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return oZ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=CL(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const cI=yh();class pd{constructor(e,t,r,i,s,l){this.styleFunction,this.extent_,this.id_=l,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?ZF(this.flatCoordinates_):wB(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Tf(this.getExtent());this.flatInteriorPoints_=EB(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=aL(this.flatCoordinates_,this.ends_),t=iL(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=oL(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=n2(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const l=r[i],o=n2(e,t,l,2,.5);Zp(this.flatMidpoints_,o),t=l}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ia(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=fA(r)/fA(t);Jp(cI,r[0],r[3],i,-i,0,0,0),T0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,cI,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new pd(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=$F((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=mx(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=lL(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=IB(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new pd(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}pd.prototype.getFlatCoordinates=pd.prototype.getOrientedFlatCoordinates;const fi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Dg=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",sZ=Dg.includes("safari")&&!Dg.includes("chrom");sZ&&(Dg.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Dg));const aZ=Dg.includes("webkit")&&!Dg.includes("edge"),SL=Dg.includes("macintosh"),lZ=typeof devicePixelRatio<"u"?devicePixelRatio:1,EL=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,BL=typeof Image<"u"&&Image.prototype.decode,uZ=typeof createImageBitmap=="function",OL=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function xu(n,e,t,r){let i;return t&&t.length?i=t.shift():EL?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let l4;function l2(){return l4||(l4=xu(1,1)),l4}function $C(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function AZ(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function cZ(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function dI(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function IL(n){for(;n.lastChild;)n.lastChild.remove()}function dZ(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}const QB=[NaN,NaN,NaN,0];let u4;function hZ(){return u4||(u4=xu(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),u4}const fZ=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,pZ=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,mZ=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,gZ=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function q_(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function Jv(n){throw new Error('failed to parse "'+n+'" as color')}function kL(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(pZ)||n.match(fZ)||n.match(mZ);if(s){const l=s[4],o=100/255;return[bu(q_(s[1],o)+.5|0,0,255),bu(q_(s[2],o)+.5|0,0,255),bu(q_(s[3],o)+.5|0,0,255),l!==void 0?bu(q_(l,100),0,1):1]}Jv(n)}if(n.startsWith("#")){if(gZ.test(n)){const s=n.substring(1),l=s.length<=4?1:2,o=[0,0,0,255];for(let p=0,v=s.length;p<v;p+=l){let x=parseInt(s.substring(p,p+l),16);l===1&&(x+=x<<4),o[p/l]=x}return o[3]=o[3]/255,o}Jv(n)}const e=hZ();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&Jv(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return kL(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=px(i[3]/255,3),i}function yZ(n){return typeof n=="string"?n:qB(n)}const vZ=1024,pv={};let A4=0;function CZ(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function c4(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function d4(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function h4(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function f4(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function hI(n){const e=h4(n[0]),t=h4(n[1]),r=h4(n[2]),i=f4(e*.222488403+t*.716873169+r*.06060791),s=500*(f4(e*.452247074+t*.399439023+r*.148375274)-i),l=200*(i-f4(e*.016863605+t*.117638439+r*.865350722)),o=Math.atan2(l,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+l*l),o<0?o+360:o,n[3]]}function _Z(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=d4(e),s=d4(e+t/500*Math.cos(r)),l=d4(e-t/200*Math.sin(r)),o=c4(s*3.021973625-i*1.617392459-l*.404875592),p=c4(s*-.943766287+i*1.916279586+l*.027607165),v=c4(s*.069407491-i*.22898585+l*1.159737864);return[bu(o+.5|0,0,255),bu(p+.5|0,0,255),bu(v+.5|0,0,255),n[3]]}function YB(n){if(n==="none")return QB;if(pv.hasOwnProperty(n))return pv[n];if(A4>=vZ){let t=0;for(const r in pv)(t++&3)===0&&(delete pv[r],--A4)}const e=kL(n);e.length!==4&&Jv(n);for(const t of e)isNaN(t)&&Jv(n);return pv[n]=e,++A4,e}function _y(n){return Array.isArray(n)?n:YB(n)}function qB(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}class VB extends WC{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?fi.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(so.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==fi.IDLE&&this.loader){this.state=fi.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;yy(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||uZ&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=fi.LOADED}).catch(r=>{this.state=fi.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function bZ(n,e,t){const r=n;let i=!0,s=!1,l=!1;const o=[e2(r,so.LOAD,function(){l=!0,s||e()})];return r.src&&BL?(s=!0,r.decode().then(function(){i&&e()}).catch(function(p){i&&(l?e():t())})):o.push(e2(r,so.ERROR,t)),function(){i=!1,o.forEach(gl)}}function xZ(n,e){return new Promise((t,r)=>{function i(){l(),t(n)}function s(){l(),r(new Error("Image load error"))}function l(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function MZ(n,e){return e&&(n.src=e),n.src&&BL?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):xZ(n)}class wZ{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=p4(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=p4(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const l=p4(e,t,r),o=l in this.cache_;this.cache_[l]=i,s&&(i.getImageState()===fi.IDLE&&i.load(),i.getImageState()===fi.LOADING?i.ready().then(()=>{this.patternCache_[l]=l2().createPattern(i.getImage(1),"repeat")}):this.patternCache_[l]=l2().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function p4(n,e,t){const r=t?_y(t):"null";return e+":"+n+":"+r}const Sf=new wZ;let mv=null;class TL extends WC{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?fi.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===fi.LOADED){mv||(mv=xu(1,1,void 0,{willReadFrequently:!0})),mv.drawImage(this.image_,0,0);try{mv.getImageData(0,0,1,1),this.tainted_=!1}catch{mv=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(so.CHANGE)}handleImageError_(){this.imageState_=fi.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=fi.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=xu(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===fi.IDLE){this.image_||this.initializeImage_(),this.imageState_=fi.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&MZ(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==fi.LOADED)return;const t=this.image_,r=xu(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=yZ(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===fi.LOADED||this.imageState_===fi.ERROR)e();else{const t=()=>{(this.imageState_===fi.LOADED||this.imageState_===fi.ERROR)&&(this.removeEventListener(so.CHANGE,t),e())};this.addEventListener(so.CHANGE,t)}})),this.ready_}}function $B(n,e,t,r,i,s){let l=e===void 0?void 0:Sf.get(e,t,i);return l||(l=new TL(n,n&&"src"in n?n.src||void 0:e,t,r,i),Sf.set(e,t,i,l,s)),s&&l&&!Sf.getPattern(e,t,i)&&Sf.set(e,t,i,l,s),l}function Yp(n){return n?Array.isArray(n)?qB(n):typeof n=="object"&&"src"in n?SZ(n):n:null}function SZ(n){if(!n.offset||!n.size)return Sf.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=Sf.getPattern(e,void 0,n.color);if(t)return t;const r=Sf.get(n.src,"anonymous",null);if(r.getImageState()!==fi.LOADED)return null;const i=xu(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),$B(i.canvas,e,void 0,fi.LOADED,n.color,!0),Sf.getPattern(e,void 0,n.color)}const V_="ol-hidden",EZ="ol-selectable",xx="ol-unselectable",HB="ol-control",fI="ol-collapsed",BZ=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),pI=["style","variant","weight","size","lineHeight","family"],PL=function(n){const e=n.match(BZ);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,i=pI.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[pI[r]]=s)}return t.families=t.family.split(/,\s?/),t},KL="10px sans-serif",fh="#000",by="round",Pm=[],Km=0,xy="round",bC=10,xC="#000",MC="center",u2="middle",_g=[0,0,0,0],wC=1,Rp=new Cp;let G1=null,p6;const m6={},RL=function(){const e="32px ",t=["monospace","serif"],r=t.length,i="wmytzilWMYTZIL@#/&?$%10";let s,l;function o(v,x,B){let T=!0;for(let P=0;P<r;++P){const U=t[P];if(l=A2(v+" "+x+" "+e+U,i),B!=U){const j=A2(v+" "+x+" "+e+B+","+U,i);T=T&&j!=l}}return!!T}function p(){let v=!0;const x=Rp.getKeys();for(let B=0,T=x.length;B<T;++B){const P=x[B];if(Rp.get(P)<100){const[U,j,N]=P.split(`
`);o(U,j,N)?(NC(m6),G1=null,p6=void 0,Rp.set(P,100)):(Rp.set(P,Rp.get(P)+1,!0),v=!1)}}v&&(clearInterval(s),s=void 0)}return function(v){const x=PL(v);if(!x)return;const B=x.families;for(let T=0,P=B.length;T<P;++T){const U=B[T],j=x.style+`
`+x.weight+`
`+U;Rp.get(j)===void 0&&(Rp.set(j,100,!0),o(x.style,x.weight,U)||(Rp.set(j,0,!0),s===void 0&&(s=setInterval(p,32))))}}}(),OZ=function(){let n;return function(e){let t=m6[e];if(t==null){if(EL){const r=PL(e),i=DL(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);m6[e]=t}return t}}();function DL(n,e){return G1||(G1=xu(1,1)),n!=p6&&(G1.font=n,p6=G1.font),G1.measureText(e)}function A2(n,e){return DL(n,e).width}function mI(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,A2(n,s)),0);return t[e]=r,r}function IZ(n,e){const t=[],r=[],i=[];let s=0,l=0,o=0,p=0;for(let v=0,x=e.length;v<=x;v+=2){const B=e[v];if(B===`
`||v===x){s=Math.max(s,l),i.push(l),l=0,o+=p,p=0;continue}const T=e[v+1]||n.font,P=A2(T,B);t.push(P),l+=P;const U=OZ(T);r.push(U),p=Math.max(p,U)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function kZ(n,e,t,r,i,s,l,o,p,v,x){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=B=>B.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(p,v),n.scale(x[0],x[1]),TZ(r,n)):x[0]<0||x[1]<0?(n.translate(p,v),n.scale(x[0],x[1]),n.drawImage(r,i,s,l,o,0,0,l,o)):n.drawImage(r,i,s,l,o,p,v,l*x[0],o*x[1]),n.restore()}function TZ(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}function gI(n){return n[0]>0&&n[1]>0}function PZ(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function md(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Mx{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=md(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Mx({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return go()}getImage(e){return go()}getHitDetectionImage(){return go()}getPixelRatio(e){return 1}getImageState(){return go()}getImageSize(){return go()}getOrigin(){return go()}getSize(){return go()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=md(e)}listenImageChange(e){go()}load(){go()}unlistenImageChange(e){go()}ready(){return Promise.resolve()}}class wx extends Mx{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?fi.LOADING:fi.LOADED,this.imageState_===fi.LOADING&&this.ready().then(()=>this.imageState_=fi.LOADED),this.render()}clone(){const e=this.getScale(),t=new wx({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,l;const t=(s=this.fill_)==null?void 0:s.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=(l=Sf.get(r,null,null))==null?void 0:l.getImage(1);if(!i){const o=this.renderOptions_,p=Math.ceil(o.size*e),v=xu(p,p);this.draw_(o,v,e),i=v.canvas,Sf.set(r,null,null,new TL(i,void 0,null,fi.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const ne=i;i=s,s=ne}const l=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/l,p=s*Math.sin(o),v=Math.sqrt(s*s-p*p),x=i-v,B=Math.sqrt(p*p+x*x),T=B/p;if(e==="miter"&&T<=r)return T*t;const P=t/2/T,U=t/2*(x/B),N=Math.sqrt((i+P)*(i+P)+U*U)-i;if(this.radius2_===void 0||e==="bevel")return N*2;const q=i*Math.sin(o),H=Math.sqrt(i*i-q*q),oe=s-H,V=Math.sqrt(q*q+oe*oe)/q;if(V<=r){const ne=V*t/2-s-i;return 2*Math.max(N,ne)}return N*2}createRenderOptions(){let e=by,t=xy,r=0,i=null,s=0,l,o=0;this.stroke_&&(l=Yp(this.stroke_.getColor()??xC),o=this.stroke_.getWidth()??wC,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??xy,e=this.stroke_.getLineCap()??by,r=this.stroke_.getMiterLimit()??bC);const p=this.calculateLineJoinSize_(t,o,r),v=Math.max(this.radius,this.radius2_||0),x=Math.ceil(2*v+p);return{strokeStyle:l,strokeWidth:o,size:x,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=fh),t.fillStyle=Yp(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=_y(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=xu(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,l=2*Math.PI/t;for(let o=0;o<t;o++){const p=s+o*l,v=o%2===0?r:i;e.lineTo(v*Math.cos(p),v*Math.sin(p))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=fh,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class HC extends wx{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new HC({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Im{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Im({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=$B(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===fi.IDLE&&t.load(),t.getImageState()===fi.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Ro(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:_y(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function yI(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let c2=class FL extends Mx{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const l=e.img!==void 0?e.img:null;let o=e.src;sa(!(o!==void 0&&l),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&l&&(o=l.src||Ro(l)),sa(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),sa(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let p;if(e.src!==void 0?p=fi.IDLE:l!==void 0&&("complete"in l?l.complete?p=l.src?fi.LOADED:fi.IDLE:p=fi.LOADING:p=fi.LOADED),this.color_=e.color!==void 0?_y(e.color):null,this.iconImage_=$B(l,o,this.crossOrigin_,p,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let v,x;if(e.size)[v,x]=e.size;else{const B=this.getImage(1);if(B.width&&B.height)v=B.width,x=B.height;else if(B instanceof HTMLImageElement){this.initialOptions_=e;const T=()=>{if(this.unlistenImageChange(T),!this.initialOptions_)return;const P=this.iconImage_.getSize();this.setScale(yI(P[0],P[1],e.width,e.height))};this.listenImageChange(T);return}}v!==void 0&&this.setScale(yI(v,x,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new FL({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==fi.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==fi.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(so.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(so.CHANGE,e)}ready(){return this.iconImage_.ready()}};class M0{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new M0({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Qh{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=vI,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Qh({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=vI,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function KZ(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(sa(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let m4=null;function LL(n,e){if(!m4){const t=new Im({color:"rgba(255,255,255,0.4)"}),r=new M0({color:"#3399CC",width:1.25});m4=[new Qh({image:new HC({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return m4}function vI(n){return n.getGeometry()}const RZ="#333";class Sx{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=md(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Im({color:RZ}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Sx({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=md(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const ph={ADD:"add",REMOVE:"remove"},CI={LENGTH:"length"};class $_ extends vp{constructor(e,t,r){super(e),this.element=t,this.index=r}}class qp extends Cp{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(CI.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new $_(ph.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new $_(ph.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new $_(ph.REMOVE,i,e)),this.dispatchEvent(new $_(ph.ADD,t,e))}updateLength_(){this.set(CI.LENGTH,this.array_.length)}assertUnique_(e,t){for(let r=0,i=this.array_.length;r<i;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}const Ef={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class UL{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class DZ extends UL{constructor(e,t,r,i,s,l,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?px(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=l,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=yh()}drawImages_(e,t,r,i){if(!this.image_)return;const s=T0(e,t,r,i,this.transform_,this.pixelCoordinates_),l=this.context_,o=this.tmpLocalTransform_,p=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=p*this.imageOpacity_);let v=this.imageRotation_;this.transformRotation_===0&&(v-=this.viewRotation_),this.imageRotateWithView_&&(v+=this.viewRotation_);for(let x=0,B=s.length;x<B;x+=2){const T=s[x]-this.imageAnchorX_,P=s[x+1]-this.imageAnchorY_;if(v!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const U=T+this.imageAnchorX_,j=P+this.imageAnchorY_;Jp(o,U,j,1,1,v,-U,-j),l.save(),l.transform.apply(l,o),l.translate(U,j),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.restore()}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,T,P,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=p)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=T0(e,t,r,i,this.transform_,this.pixelCoordinates_),l=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const p=s[t]+this.textOffsetX_,v=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(l.save(),l.translate(p-this.textOffsetX_,v-this.textOffsetY_),l.rotate(o),l.translate(this.textOffsetX_,this.textOffsetY_),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.restore()):(this.textStrokeState_&&l.strokeText(this.text_,p,v),this.textFillState_&&l.fillText(this.text_,p,v))}}moveToLineTo_(e,t,r,i,s){const l=this.context_,o=T0(e,t,r,i,this.transform_,this.pixelCoordinates_);l.moveTo(o[0],o[1]);let p=o.length;s&&(p-=2);for(let v=2;v<p;v+=2)l.lineTo(o[v],o[v+1]);return s&&l.closePath(),r}drawRings_(e,t,r,i){for(let s=0,l=r.length;s<l;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Nu(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=JH(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),l=this.context_;l.beginPath(),l.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Nu(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Nu(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const l=e.getEnds(),o=e.getStride();r.beginPath();for(let p=0,v=l.length;p<v;++p)s=this.moveToLineTo_(i,s,l[p],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Nu(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Nu(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),l=e.getStride();t.beginPath();for(let o=0,p=s.length;o<p;++o){const v=s[o];i=this.drawRings_(r,i,v,l)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),F0(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:MC;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Yp(r||fh)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),l=t.getLineDashOffset(),o=t.getLineJoin(),p=t.getWidth(),v=t.getMiterLimit(),x=s||Pm;this.strokeState_={lineCap:i!==void 0?i:by,lineDash:this.pixelRatio_===1?x:x.map(B=>B*this.pixelRatio_),lineDashOffset:(l||Km)*this.pixelRatio_,lineJoin:o!==void 0?o:xy,lineWidth:(p!==void 0?p:wC)*this.pixelRatio_,miterLimit:v!==void 0?v:bC,strokeStyle:Yp(r||xC)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const l=e.getScaleArray();this.imageScale_=[l[0]*this.pixelRatio_/r,l[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const P=t.getColor();this.textFillState_={fillStyle:Yp(P||fh)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const P=r.getColor(),U=r.getLineCap(),j=r.getLineDash(),N=r.getLineDashOffset(),q=r.getLineJoin(),H=r.getWidth(),oe=r.getMiterLimit();this.textStrokeState_={lineCap:U!==void 0?U:by,lineDash:j||Pm,lineDashOffset:N||Km,lineJoin:q!==void 0?q:xy,lineWidth:H!==void 0?H:wC,miterLimit:oe!==void 0?oe:bC,strokeStyle:Yp(P||xC)}}const i=e.getFont(),s=e.getOffsetX(),l=e.getOffsetY(),o=e.getRotateWithView(),p=e.getRotation(),v=e.getScaleArray(),x=e.getText(),B=e.getTextAlign(),T=e.getTextBaseline();this.textState_={font:i!==void 0?i:KL,textAlign:B!==void 0?B:MC,textBaseline:T!==void 0?T:u2},this.text_=x!==void 0?Array.isArray(x)?x.reduce((P,U,j)=>P+=j%2?" ":U,""):x:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=l!==void 0?this.pixelRatio_*l:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=p!==void 0?p:0,this.textScale_=[this.pixelRatio_*v[0],this.pixelRatio_*v[1]]}}}const FZ=.5,zL={Point:QZ,LineString:NZ,Polygon:qZ,MultiPoint:YZ,MultiLineString:WZ,MultiPolygon:GZ,GeometryCollection:jZ,Circle:UZ};function LZ(n,e){return parseInt(Ro(n),10)-parseInt(Ro(e),10)}function g6(n,e){const t=jL(n,e);return t*t}function jL(n,e){return FZ*n/e}function UZ(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(s||l){const p=n.getBuilder(t.getZIndex(),"Circle");p.setFillStrokeStyle(s,l),p.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(o),p.drawText(e,r)}}function d2(n,e,t,r,i,s,l,o){const p=[],v=t.getImage();if(v){let T=!0;const P=v.getImageState();P==fi.LOADED||P==fi.ERROR?T=!1:P==fi.IDLE&&v.load(),T&&p.push(v.ready())}const x=t.getFill();x&&x.loading()&&p.push(x.ready());const B=p.length>0;return B&&Promise.all(p).then(()=>i(null)),zZ(n,e,t,r,s,l,o),B}function zZ(n,e,t,r,i,s,l){const o=t.getGeometryFunction()(e);if(!o)return;const p=o.simplifyTransformed(r,i);if(t.getRenderer())NL(n,p,t,e,l);else{const x=zL[p.getType()];x(n,p,t,e,l,s)}}function NL(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const l=e.getGeometries();for(let o=0,p=l.length;o<p;++o)NL(n,l[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function jZ(n,e,t,r,i,s){const l=e.getGeometriesArray();let o,p;for(o=0,p=l.length;o<p;++o){const v=zL[l[o].getType()];v(n,l[o],t,r,i,s)}}function NZ(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}function WZ(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const l=t.getText();if(l&&l.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(l),o.drawText(e,r,i)}}function GZ(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(l||s){const p=n.getBuilder(t.getZIndex(),"Polygon");p.setFillStrokeStyle(s,l),p.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(o),p.drawText(e,r,i)}}function QZ(n,e,t,r,i,s){const l=t.getImage(),o=t.getText(),p=o&&o.getText(),v=s&&l&&p?{}:void 0;if(l){if(l.getImageState()!=fi.LOADED)return;const x=n.getBuilder(t.getZIndex(),"Image");x.setImageStyle(l,v),x.drawPoint(e,r,i)}if(p){const x=n.getBuilder(t.getZIndex(),"Text");x.setTextStyle(o,v),x.drawText(e,r,i)}}function YZ(n,e,t,r,i,s){const l=t.getImage(),o=l&&l.getOpacity()!==0,p=t.getText(),v=p&&p.getText(),x=s&&o&&v?{}:void 0;if(o){if(l.getImageState()!=fi.LOADED)return;const B=n.getBuilder(t.getZIndex(),"Image");B.setImageStyle(l,x),B.drawMultiPoint(e,r,i)}if(v){const B=n.getBuilder(t.getZIndex(),"Text");B.setTextStyle(p,x),B.drawText(e,r,i)}}function qZ(n,e,t,r,i){const s=t.getFill(),l=t.getStroke();if(s||l){const p=n.getBuilder(t.getZIndex(),"Polygon");p.setFillStrokeStyle(s,l),p.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(o),p.drawText(e,r,i)}}let VZ=!1;function WL(n,e,t,r,i,s,l){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=VZ,o.onload=function(p){if(!o.status||o.status>=200&&o.status<300){const v=e.getType();try{let x;v=="text"||v=="json"?x=o.responseText:v=="xml"?x=o.responseXML||o.responseText:v=="arraybuffer"&&(x=o.response),x?s(e.readFeatures(x,{extent:t,featureProjection:i}),e.readProjection(x)):l()}catch{l()}}else l()},o.onerror=l,o.send()}function _I(n,e){return function(t,r,i,s,l){WL(n,e,t,r,i,(o,p)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),l!==void 0&&l()})}}function $Z(n,e){return[[-1/0,-1/0,1/0,1/0]]}function HZ(n,e){return[n]}function GL(n,e,t=0,r=n.length-1,i=ZZ){for(;r>t;){if(r-t>600){const p=r-t+1,v=e-t+1,x=Math.log(p),B=.5*Math.exp(2*x/3),T=.5*Math.sqrt(x*B*(p-B)/p)*(v-p/2<0?-1:1),P=Math.max(t,Math.floor(e-v*B/p+T)),U=Math.min(r,Math.floor(e+(p-v)*B/p+T));GL(n,e,P,U,i)}const s=n[e];let l=t,o=r;for(gv(n,t,e),i(n[r],s)>0&&gv(n,t,r);l<o;){for(gv(n,l,o),l++,o--;i(n[l],s)<0;)l++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?gv(n,t,o):(o++,gv(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function gv(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function ZZ(n,e){return n<e?-1:n>e?1:0}let QL=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!Z_(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let l=0;l<t.children.length;l++){const o=t.children[l],p=t.leaf?i(o):o;Z_(e,p)&&(t.leaf?r.push(o):y4(e,p)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!Z_(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],l=t.leaf?this.toBBox(s):s;if(Z_(e,l)){if(t.leaf||y4(e,l))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Q1([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],l=[];let o,p,v;for(;r||s.length;){if(r||(r=s.pop(),p=s[s.length-1],o=l.pop(),v=!0),r.leaf){const x=XZ(e,r.children,t);if(x!==-1)return r.children.splice(x,1),s.push(r),this._condense(s),this}!v&&!r.leaf&&y4(r,i)?(s.push(r),l.push(o),o=0,p=r,r=r.children[0]):p?(o++,r=p.children[o],v=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let l=this._maxEntries,o;if(s<=l)return o=Q1(e.slice(t,r+1)),h1(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(l)),l=Math.ceil(s/Math.pow(l,i-1))),o=Q1([]),o.leaf=!1,o.height=i;const p=Math.ceil(s/l),v=p*Math.ceil(Math.sqrt(l));bI(e,t,r,v,this.compareMinX);for(let x=t;x<=r;x+=v){const B=Math.min(x+v-1,r);bI(e,x,B,p,this.compareMinY);for(let T=x;T<=B;T+=p){const P=Math.min(T+p-1,B);o.children.push(this._build(e,T,P,i-1))}}return h1(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,l=1/0,o;for(let p=0;p<t.children.length;p++){const v=t.children[p],x=g4(v),B=tX(e,v)-x;B<l?(l=B,s=x<s?x:s,o=v):B===l&&x<s&&(s=x,o=v)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],l=this._chooseSubtree(i,this.data,t,s);for(l.children.push(e),Iv(l,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const l=this._chooseSplitIndex(r,s,i),o=Q1(r.children.splice(l,r.children.length-l));o.height=r.height,o.leaf=r.leaf,h1(r,this.toBBox),h1(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=Q1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,h1(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,l=1/0;for(let o=t;o<=r-t;o++){const p=Ov(e,0,o,this.toBBox),v=Ov(e,o,r,this.toBBox),x=nX(p,v),B=g4(p)+g4(v);x<s?(s=x,i=o,l=B<l?B:l):x===s&&B<l&&(l=B,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:JZ,s=e.leaf?this.compareMinY:eX,l=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);l<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,l=Ov(e,0,t,s),o=Ov(e,r-t,r,s);let p=H_(l)+H_(o);for(let v=t;v<r-t;v++){const x=e.children[v];Iv(l,e.leaf?s(x):x),p+=H_(l)}for(let v=r-t-1;v>=t;v--){const x=e.children[v];Iv(o,e.leaf?s(x):x),p+=H_(o)}return p}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Iv(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():h1(e[t],this.toBBox)}};function XZ(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function h1(n,e){Ov(n,0,n.children.length,e,n)}function Ov(n,e,t,r,i){i||(i=Q1(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const l=n.children[s];Iv(i,n.leaf?r(l):l)}return i}function Iv(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function JZ(n,e){return n.minX-e.minX}function eX(n,e){return n.minY-e.minY}function g4(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function H_(n){return n.maxX-n.minX+(n.maxY-n.minY)}function tX(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function nX(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function y4(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Z_(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function Q1(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function bI(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const l=e+Math.ceil((t-e)/r/2)*r;GL(n,l,e,t,i),s.push(e,l,l,t)}}class xI{constructor(e){this.rbush_=new QL(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[Ro(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const l=e[i],o=t[i],p={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:o};r[i]=p,this.items_[Ro(o)]=p}this.rbush_.load(r)}remove(e){const t=Ro(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[Ro(t)],i=[r.minX,r.minY,r.maxX,r.maxY];Fm(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return R0(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Dm(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Ky extends Cp{constructor(e){super(),this.projection=Ia(e.projection),this.attributions_=MI(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=MI(e),this.changed()}setState(e){this.state_=e,this.changed()}}function MI(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const vf={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class A0 extends vp{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class wb extends Ky{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=pC,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(sa(this.format_,"`format` must be set when `url` is set"),this.loader_=_I(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:$Z;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new xI:null,this.loadedExtentsRtree_=new xI,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new qp(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Ro(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new A0(vf.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof pd||(this.featureChangeKeys_[e]=[Fs(t,so.CHANGE,this.handleFeatureChange_,this),Fs(t,vy.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof pd){const s=this.idIndex_[i];s instanceof pd?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(sa(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,l=e.length;s<l;s++){const o=e[s],p=Ro(o);this.addToIndex_(p,o)&&r.push(o)}for(let s=0,l=r.length;s<l;s++){const o=r[s],p=Ro(o);this.setupChangeEvents_(p,o);const v=o.getGeometry();if(v){const x=v.getExtent();t.push(x),i.push(o)}else this.nullGeometryFeatures_[p]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(vf.ADDFEATURE))for(let s=0,l=r.length;s<l;s++)this.dispatchEvent(new A0(vf.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(vf.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(vf.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(ph.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(ph.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(gl);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new A0(vf.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof pd||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof pd||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),R0(this.nullGeometryFeatures_)||Zp(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=rL(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const l=[NaN,NaN];let o=1/0;const p=[-1/0,-1/0,1/0,1/0];return t=t||fC,this.featuresRtree_.forEachInExtent(p,function(v){if(t(v)){const x=v.getGeometry(),B=o;if(o=x instanceof pd?0:x.closestPointXY(r,i,l,o),o<B){s=v;const T=Math.sqrt(o);p[0]=r-T,p[1]=i-T,p[2]=r+T,p[3]=i+T}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=Ro(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const l=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(l,t)):this.featuresRtree_&&this.featuresRtree_.update(l,t)}const s=t.getId();if(s!==void 0){const l=s.toString();this.idIndex_[l]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[l]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new A0(vf.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Ro(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&R0(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let l=0,o=s.length;l<o;++l){const p=s[l];i.forEachInExtent(p,function(x){return Gp(x.extent,p)})||(++this.loadingExtentsCount_,this.dispatchEvent(new A0(vf.FEATURESLOADSTART)),this.loader_.call(this,p,t,r,x=>{--this.loadingExtentsCount_,this.dispatchEvent(new A0(vf.FEATURESLOADEND,void 0,x))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new A0(vf.FEATURESLOADERROR))}),i.insert(p,{extent:p.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(Fm(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Ro(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const r=this.featureChangeKeys_[t];r==null||r.forEach(gl),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),l=this.idIndex_[s];l===e?delete this.idIndex_[s]:Array.isArray(l)&&(l.splice(l.indexOf(e),1),l.length===1&&(this.idIndex_[s]=l[0]))}return delete this.uidIndex_[t],this.hasListener(vf.REMOVEFEATURE)&&this.dispatchEvent(new A0(vf.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){sa(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(_I(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const ru={ANIMATING:0,INTERACTING:1},qi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},X_=[qi.FILL],w0=[qi.STROKE],bg=[qi.BEGIN_PATH],wI=[qi.CLOSE_PATH];class ZC extends UL{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let l=s.length;for(let o=0,p=e.length;o<p;o+=t)i[0]=e[o],i[1]=e[o+1],Pg(r,i)&&(s[l++]=i[0],s[l++]=i[1]);return l}appendFlatLineCoordinates(e,t,r,i,s,l){const o=this.coordinates;let p=o.length;const v=this.getBufferedMaxExtent();l&&(t+=i);let x=e[t],B=e[t+1];const T=this.tmpCoordinate_;let P=!0,U,j,N;for(U=t+i;U<r;U+=i)T[0]=e[U],T[1]=e[U+1],N=r6(v,T),N!==j?(P&&(o[p++]=x,o[p++]=B,P=!1),o[p++]=T[0],o[p++]=T[1]):N===yc.INTERSECTING?(o[p++]=T[0],o[p++]=T[1],P=!1):P=!0,x=T[0],B=T[1],j=N;return(s&&P||U===t+i)&&(o[p++]=x,o[p++]=B),p}drawCustomCoordinates_(e,t,r,i,s){for(let l=0,o=r.length;l<o;++l){const p=r[l],v=this.appendFlatLineCoordinates(e,t,p,i,!1,!1);s.push(v),t=p}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const l=e.getType(),o=e.getStride(),p=this.coordinates.length;let v,x,B,T,P;switch(l){case"MultiPolygon":v=e.getOrientedFlatCoordinates(),T=[];const U=e.getEndss();P=0;for(let j=0,N=U.length;j<N;++j){const q=[];P=this.drawCustomCoordinates_(v,P,U[j],o,q),T.push(q)}this.instructions.push([qi.CUSTOM,p,T,e,r,f6,s]),this.hitDetectionInstructions.push([qi.CUSTOM,p,T,e,i||r,f6,s]);break;case"Polygon":case"MultiLineString":B=[],v=l=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),P=this.drawCustomCoordinates_(v,0,e.getEnds(),o,B),this.instructions.push([qi.CUSTOM,p,B,e,r,yC,s]),this.hitDetectionInstructions.push([qi.CUSTOM,p,B,e,i||r,yC,s]);break;case"LineString":case"Circle":v=e.getFlatCoordinates(),x=this.appendFlatLineCoordinates(v,0,v.length,o,!1,!1),this.instructions.push([qi.CUSTOM,p,x,e,r,x0,s]),this.hitDetectionInstructions.push([qi.CUSTOM,p,x,e,i||r,x0,s]);break;case"MultiPoint":v=e.getFlatCoordinates(),x=this.appendFlatPointCoordinates(v,o),x>p&&(this.instructions.push([qi.CUSTOM,p,x,e,r,x0,s]),this.hitDetectionInstructions.push([qi.CUSTOM,p,x,e,i||r,x0,s]));break;case"Point":v=e.getFlatCoordinates(),this.coordinates.push(v[0],v[1]),x=this.coordinates.length,this.instructions.push([qi.CUSTOM,p,x,e,r,void 0,s]),this.hitDetectionInstructions.push([qi.CUSTOM,p,x,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[qi.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[qi.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,l=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==qi.END_GEOMETRY?l=t:s==qi.BEGIN_GEOMETRY&&(i[2]=t,Q$(this.hitDetectionInstructions,l,t),l=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Yp(r||fh)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=Yp(r||xC);const i=e.getLineCap();t.lineCap=i!==void 0?i:by;const s=e.getLineDash();t.lineDash=s?s.slice():Pm;const l=e.getLineDashOffset();t.lineDashOffset=l||Km;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:xy;const p=e.getWidth();t.lineWidth=p!==void 0?p:wC;const v=e.getMiterLimit();t.miterLimit=v!==void 0?v:bC,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[qi.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[qi.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(r!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,l=e.lineDashOffset,o=e.lineJoin,p=e.lineWidth,v=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!F0(e.currentLineDash,s)||e.currentLineDashOffset!=l||e.currentLineJoin!=o||e.currentLineWidth!=p||e.currentMiterLimit!=v)&&(r!==void 0&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=l,e.currentLineJoin=o,e.currentLineWidth=p,e.currentMiterLimit=v)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[qi.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=HF(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;I0(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class rX extends ZC{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Pg(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),l=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([qi.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let p=0,v=i.length;p<v;p+=e.getStride())(!this.maxExtent||Pg(this.maxExtent,i.slice(p,p+2)))&&s.push(i[p],i[p+1]);const l=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([qi.DRAW_IMAGE,l,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,l,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class iX extends ZC{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,l=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[qi.MOVE_TO_LINE_TO,s,l];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,l=i.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pm,Km],bg);const o=e.getFlatCoordinates(),p=e.getStride();this.drawFlatCoordinates_(o,0,o.length,p),this.hitDetectionInstructions.push(w0),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,l=i.lineWidth;if(s===void 0||l===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pm,Km],bg);const o=e.getEnds(),p=e.getFlatCoordinates(),v=e.getStride();let x=0;for(let B=0,T=o.length;B<T;++B)x=this.drawFlatCoordinates_(p,x,o[B],v);this.hitDetectionInstructions.push(w0),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(w0),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(w0),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(bg)}}class SI extends ZC{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,l=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,p=r.length;this.instructions.push(bg),this.hitDetectionInstructions.push(bg);for(let v=0;v<p;++v){const x=r[v],B=this.coordinates.length,T=this.appendFlatLineCoordinates(e,t,x,i,!0,!o),P=[qi.MOVE_TO_LINE_TO,B,T];this.instructions.push(P),this.hitDetectionInstructions.push(P),o&&(this.instructions.push(wI),this.hitDetectionInstructions.push(wI)),t=x}return l&&(this.instructions.push(X_),this.hitDetectionInstructions.push(X_)),o&&(this.instructions.push(w0),this.hitDetectionInstructions.push(w0)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,fh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pm,Km]);const o=e.getFlatCoordinates(),p=e.getStride(),v=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,p,!1,!1);const x=[qi.CIRCLE,v];this.instructions.push(bg,x),this.hitDetectionInstructions.push(bg,x),i.fillStyle!==void 0&&(this.instructions.push(X_),this.hitDetectionInstructions.push(X_)),i.strokeStyle!==void 0&&(this.instructions.push(w0),this.hitDetectionInstructions.push(w0)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,fh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pm,Km]);const o=e.getEnds(),p=e.getOrientedFlatCoordinates(),v=e.getStride();this.drawFlatCoordinatess_(p,0,o,v),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,l=i.strokeStyle;if(s===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_FILL_STYLE,fh]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([qi.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Pm,Km]);const o=e.getEndss(),p=e.getOrientedFlatCoordinates(),v=e.getStride();let x=0;for(let B=0,T=o.length;B<T;++B)x=this.drawFlatCoordinatess_(p,x,o[B],v);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=dg(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function oX(n,e,t,r,i){const s=[];let l=t,o=0,p=e.slice(t,2);for(;o<n&&l+i<r;){const[v,x]=p.slice(-2),B=e[l+i],T=e[l+i+1],P=Math.sqrt((B-v)*(B-v)+(T-x)*(T-x));if(o+=P,o>=n){const U=(n-o+P)/P,j=Gh(v,B,U),N=Gh(x,T,U);p.push(j,N),s.push(p),p=[j,N],o==n&&(l+=i),o=0}else if(o<n)p.push(e[l+i],e[l+i+1]),l+=i;else{const U=P-o,j=Gh(v,B,U/P),N=Gh(x,T,U/P);p.push(j,N),s.push(p),p=[j,N],o=0,l+=i}}return o>0&&s.push(p),s}function sX(n,e,t,r,i){let s=t,l=t,o=0,p=0,v=t,x,B,T,P,U,j,N,q,H,oe;for(B=t;B<r;B+=i){const te=e[B],V=e[B+1];U!==void 0&&(H=te-U,oe=V-j,P=Math.sqrt(H*H+oe*oe),N!==void 0&&(p+=T,x=Math.acos((N*H+q*oe)/(T*P)),x>n&&(p>o&&(o=p,s=v,l=B),p=0,v=B-i)),T=P,N=H,q=oe),U=te,j=V}return p+=P,p>o?[v,B]:[s,l]}const h2={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class aX extends ZC{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[fh]={fillStyle:fh},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,l=this.textState_;if(this.text_===""||!l||!i&&!s)return;const o=this.coordinates;let p=o.length;const v=e.getType();let x=null,B=e.getStride();if(l.placement==="line"&&(v=="LineString"||v=="MultiLineString"||v=="Polygon"||v=="MultiPolygon")){if(!Nu(this.maxExtent,e.getExtent()))return;let T;if(x=e.getFlatCoordinates(),v=="LineString")T=[x.length];else if(v=="MultiLineString")T=e.getEnds();else if(v=="Polygon")T=e.getEnds().slice(0,1);else if(v=="MultiPolygon"){const N=e.getEndss();T=[];for(let q=0,H=N.length;q<H;++q)T.push(N[q][0])}this.beginGeometry(e,t,r);const P=l.repeat,U=P?void 0:l.textAlign;let j=0;for(let N=0,q=T.length;N<q;++N){let H;P?H=oX(P*this.resolution,x,j,T[N],B):H=[x.slice(j,T[N])];for(let oe=0,te=H.length;oe<te;++oe){const V=H[oe];let ne=0,W=V.length;if(U==null){const he=sX(l.maxAngle,V,0,V.length,2);ne=he[0],W=he[1]}for(let he=ne;he<W;he+=B)o.push(V[he],V[he+1]);const ie=o.length;j=T[N],this.drawChars_(p,ie),p=ie}}this.endGeometry(t)}else{let T=l.overflow?null:[];switch(v){case"Point":case"MultiPoint":x=e.getFlatCoordinates();break;case"LineString":x=e.getFlatMidpoint();break;case"Circle":x=e.getCenter();break;case"MultiLineString":x=e.getFlatMidpoints(),B=2;break;case"Polygon":x=e.getFlatInteriorPoint(),l.overflow||T.push(x[2]/this.resolution),B=3;break;case"MultiPolygon":const te=e.getFlatInteriorPoints();x=[];for(let V=0,ne=te.length;V<ne;V+=3)l.overflow||T.push(te[V+2]/this.resolution),x.push(te[V],te[V+1]);if(x.length===0)return;B=2;break}const P=this.appendFlatPointCoordinates(x,B);if(P===p)return;if(T&&(P-p)/2!==x.length/B){let te=p/2;T=T.filter((V,ne)=>{const W=o[(te+ne)*2]===x[ne*B]&&o[(te+ne)*2+1]===x[ne*B+1];return W||--te,W})}this.saveTextStates_();const U=l.backgroundFill?this.createFill(this.fillStyleToState(l.backgroundFill)):null,j=l.backgroundStroke?this.createStroke(this.strokeStyleToState(l.backgroundStroke)):null;this.beginGeometry(e,t,r);let N=l.padding;if(N!=_g&&(l.scale[0]<0||l.scale[1]<0)){let te=l.padding[0],V=l.padding[1],ne=l.padding[2],W=l.padding[3];l.scale[0]<0&&(V=-V,W=-W),l.scale[1]<0&&(te=-te,ne=-ne),N=[te,V,ne,W]}const q=this.pixelRatio;this.instructions.push([qi.DRAW_IMAGE,p,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,N==_g?_g:N.map(function(te){return te*q}),U,j,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,T]);const H=1/q,oe=U?U.slice(0):null;oe&&(oe[1]=fh),this.hitDetectionInstructions.push([qi.DRAW_IMAGE,p,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[H,H],NaN,this.declutterMode_,this.declutterImageWithText_,N,oe,j,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?fh:this.fillKey_,this.textOffsetX_,this.textOffsetY_,T]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||MC,justify:t.justify,textBaseline:t.textBaseline||u2,scale:t.scale});const l=this.fillKey_;r&&(l in this.fillStates||(this.fillStates[l]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,l=this.textKey_,o=this.fillKey_;this.saveTextStates_();const p=this.pixelRatio,v=h2[i.textBaseline],x=this.textOffsetY_*p,B=this.text_,T=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([qi.DRAW_CHARS,e,t,v,i.overflow,o,i.maxAngle,p,x,s,T*p,B,l,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([qi.DRAW_CHARS,e,t,v,i.overflow,o&&fh,i.maxAngle,p,x,s,T*p,B,l,1/p,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const l=e.getFill();l?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Yp(l.getColor()||fh)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const j=o.getLineDash(),N=o.getLineDashOffset(),q=o.getWidth(),H=o.getMiterLimit();s.lineCap=o.getLineCap()||by,s.lineDash=j?j.slice():Pm,s.lineDashOffset=N===void 0?Km:N,s.lineJoin=o.getLineJoin()||xy,s.lineWidth=q===void 0?wC:q,s.miterLimit=H===void 0?bC:H,s.strokeStyle=Yp(o.getColor()||xC)}r=this.textState_;const p=e.getFont()||KL;RL(p);const v=e.getScaleArray();r.overflow=e.getOverflow(),r.font=p,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||u2,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||_g,r.scale=v===void 0?[1,1]:v;const x=e.getOffsetX(),B=e.getOffsetY(),T=e.getRotateWithView(),P=e.getKeepUpright(),U=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=x===void 0?0:x,this.textOffsetY_=B===void 0?0:B,this.textRotateWithView_=T===void 0?!1:T,this.textKeepUpright_=P===void 0?!0:P,this.textRotation_=U===void 0?0:U,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Ro(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Ro(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const lX={Circle:SI,Default:ZC,Image:rX,LineString:iX,Polygon:SI,Text:aX};class YL{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const l=lX[t];s=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function uX(n,e,t,r,i,s,l,o,p,v,x,B,T=!0){let P=n[e],U=n[e+1],j=0,N=0,q=0,H=0;function oe(){j=P,N=U,e+=r,P=n[e],U=n[e+1],H+=q,q=Math.sqrt((P-j)*(P-j)+(U-N)*(U-N))}do oe();while(e<t-r&&H+q<s);let te=q===0?0:(s-H)/q;const V=Gh(j,P,te),ne=Gh(N,U,te),W=e-r,ie=H,he=s+o*p(v,i,x);for(;e<t-r&&H+q<he;)oe();te=q===0?0:(he-H)/q;const fe=Gh(j,P,te),Ee=Gh(N,U,te);let me=!1;if(T)if(B){const Ze=[V,ne,fe,Ee];uL(Ze,0,4,2,B,Ze,Ze),me=Ze[0]>Ze[2]}else me=V>fe;const Me=Math.PI,De=[],xe=W+r===e;e=W,q=0,H=ie,P=n[e],U=n[e+1];let At;if(xe){oe(),At=Math.atan2(U-N,P-j),me&&(At+=At>0?-Me:Me);const Ze=(fe+V)/2,Xe=(Ee+ne)/2;return De[0]=[Ze,Xe,(he-s)/2,At,i],De}i=i.replace(/\n/g," ");for(let Ze=0,Xe=i.length;Ze<Xe;){oe();let Ne=Math.atan2(U-N,P-j);if(me&&(Ne+=Ne>0?-Me:Me),At!==void 0){let yt=Ne-At;if(yt+=yt>Me?-2*Me:yt<-Me?2*Me:0,Math.abs(yt)>l)return null}At=Ne;const Se=Ze;let Re=0;for(;Ze<Xe;++Ze){const yt=me?Xe-Ze-1:Ze,Ft=o*p(v,i[yt],x);if(e+r<t&&H+q<s+Re+Ft/2)break;Re+=Ft}if(Ze===Se)continue;const He=me?i.substring(Xe-Se,Xe-Ze):i.substring(Se,Ze);te=q===0?0:(s+Re/2-H)/q;const _t=Gh(j,P,te),Gt=Gh(N,U,te);De.push([_t,Gt,Re/2,Ne,He]),s+=Re}return De}class ZB{constructor(){Pn(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(l2(),{get:(e,t)=>{if(typeof l2()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const l=t[++r];if(typeof e[s]=="function")e[s](...l);else{if(typeof l=="function"){e[s]=l(e);continue}e[s]=l}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const f1=kf(),c0=[],Mm=[],wm=[],d0=[];function EI(n){return n[3].declutterBox}const BI=new RegExp("[-----]");function v4(n,e){return e==="start"?e=BI.test(n)?"right":"left":e==="end"&&(e=BI.test(n)?"left":"right"),h2[e]}function AX(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function cX(n,e,t){return t%2===0&&(n+=e),n}class dX{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=yh(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new ZB:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const l=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,p=this.textStates[t],v=this.pixelRatio,x=[p.scale[0]*v,p.scale[1]*v],B=p.justify?h2[p.justify]:v4(Array.isArray(e)?e[0]:e,p.textAlign||MC),T=i&&l.lineWidth?l.lineWidth:0,P=Array.isArray(e)?e:String(e).split(`
`).reduce(AX,[]),{width:U,height:j,widths:N,heights:q,lineWidths:H}=IZ(p,P),oe=U+T,te=[],V=(oe+2)*x[0],ne=(j+T)*x[1],W={width:V<0?Math.floor(V):Math.ceil(V),height:ne<0?Math.floor(ne):Math.ceil(ne),contextInstructions:te};(x[0]!=1||x[1]!=1)&&te.push("scale",x),i&&(te.push("strokeStyle",l.strokeStyle),te.push("lineWidth",T),te.push("lineCap",l.lineCap),te.push("lineJoin",l.lineJoin),te.push("miterLimit",l.miterLimit),te.push("setLineDash",[l.lineDash]),te.push("lineDashOffset",l.lineDashOffset)),r&&te.push("fillStyle",o.fillStyle),te.push("textBaseline","middle"),te.push("textAlign","center");const ie=.5-B;let he=B*oe+ie*T;const fe=[],Ee=[];let me=0,Me=0,De=0,xe=0,At;for(let Ze=0,Xe=P.length;Ze<Xe;Ze+=2){const Ne=P[Ze];if(Ne===`
`){Me+=me,me=0,he=B*oe+ie*T,++xe;continue}const Se=P[Ze+1]||p.font;Se!==At&&(i&&fe.push("font",Se),r&&Ee.push("font",Se),At=Se),me=Math.max(me,q[De]);const Re=[Ne,he+ie*N[De]+B*(N[De]-H[xe]),.5*(T+me)+Me];he+=N[De],i&&fe.push("strokeText",Re),r&&Ee.push("fillText",Re),++De}return Array.prototype.push.apply(te,fe),Array.prototype.push.apply(te,Ee),this.labels_[s]=W,W}replayTextBackground_(e,t,r,i,s,l,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),l&&(this.alignAndScaleFill_=l[2],e.fillStyle=l[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,l,o,p,v,x,B,T,P,U,j,N){o*=T[0],p*=T[1];let q=r-o,H=i-p;const oe=s+v>e?e-v:s,te=l+x>t?t-x:l,V=U[3]+oe*T[0]+U[1],ne=U[0]+te*T[1]+U[2],W=q-U[3],ie=H-U[0];(j||B!==0)&&(c0[0]=W,d0[0]=W,c0[1]=ie,Mm[1]=ie,Mm[0]=W+V,wm[0]=Mm[0],wm[1]=ie+ne,d0[1]=wm[1]);let he;return B!==0?(he=Jp(yh(),r,i,1,1,B,-r,-i),FA(he,c0),FA(he,Mm),FA(he,wm),FA(he,d0),Dm(Math.min(c0[0],Mm[0],wm[0],d0[0]),Math.min(c0[1],Mm[1],wm[1],d0[1]),Math.max(c0[0],Mm[0],wm[0],d0[0]),Math.max(c0[1],Mm[1],wm[1],d0[1]),f1)):Dm(Math.min(W,W+V),Math.min(ie,ie+ne),Math.max(W,W+V),Math.max(ie,ie+ne),f1),P&&(q=Math.round(q),H=Math.round(H)),{drawImageX:q,drawImageY:H,drawImageW:oe,drawImageH:te,originX:v,originY:x,declutterBox:{minX:f1[0],minY:f1[1],maxX:f1[2],maxY:f1[3],value:N},canvasTransform:he,scale:T}}replayImageOrLabel_(e,t,r,i,s,l,o){const p=!!(l||o),v=i.declutterBox,x=o?o[2]*i.scale[0]/2:0;return v.minX-x<=t[0]&&v.maxX+x>=0&&v.minY-x<=t[1]&&v.maxY+x>=0&&(p&&this.replayTextBackground_(e,c0,Mm,wm,d0,l,o),kZ(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=FA(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],l=this.createLabel(e,t,i,r),o=this.strokeStates[r],p=this.pixelRatio,v=v4(Array.isArray(e)?e[0]:e,s.textAlign||MC),x=h2[s.textBaseline||u2],B=o&&o.lineWidth?o.lineWidth:0,T=l.width/p-2*s.scale[0],P=v*T+2*(.5-v)*B,U=x*l.height/p+2*(.5-x)*B;return{label:l,anchorX:P,anchorY:U}}execute_(e,t,r,i,s,l,o,p){const v=this.zIndexContext_;let x;this.pixelCoordinates_&&F0(r,this.renderedTransform_)?x=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),x=T0(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),YH(this.renderedTransform_,r));let B=0;const T=i.length;let P=0,U,j,N,q,H,oe,te,V,ne,W,ie,he,fe,Ee=0,me=0;const Me=this.coordinateCache_,De=this.viewRotation_,xe=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,At={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:De},Ze=this.instructions!=i||this.overlaps?0:200;let Xe,Ne,Se,Re;for(;B<T;){const He=i[B];switch(He[0]){case qi.BEGIN_GEOMETRY:Xe=He[1],Re=He[3],Xe.getGeometry()?o!==void 0&&!Nu(o,Re.getExtent())?B=He[2]+1:++B:B=He[2],v&&(v.zIndex=He[4]);break;case qi.BEGIN_PATH:Ee>Ze&&(this.fill_(e),Ee=0),me>Ze&&(e.stroke(),me=0),!Ee&&!me&&(e.beginPath(),H=NaN,oe=NaN),++B;break;case qi.CIRCLE:P=He[1];const Gt=x[P],yt=x[P+1],Ft=x[P+2],Tt=x[P+3],Le=Ft-Gt,Pe=Tt-yt,Be=Math.sqrt(Le*Le+Pe*Pe);e.moveTo(Gt+Be,yt),e.arc(Gt,yt,Be,0,2*Math.PI,!0),++B;break;case qi.CLOSE_PATH:e.closePath(),++B;break;case qi.CUSTOM:P=He[1],U=He[2];const it=He[3],Ct=He[4],ft=He[5];At.geometry=it,At.feature=Xe,B in Me||(Me[B]=[]);const Lt=Me[B];ft?ft(x,P,U,2,Lt):(Lt[0]=x[P],Lt[1]=x[P+1],Lt.length=2),v&&(v.zIndex=He[6]),Ct(Lt,At),++B;break;case qi.DRAW_IMAGE:P=He[1],U=He[2],ne=He[3],j=He[4],N=He[5];let Zt=He[6];const Rt=He[7],_n=He[8],qn=He[9],rn=He[10];let ar=He[11];const kn=He[12];let mn=He[13];q=He[14]||"declutter";const zn=He[15];if(!ne&&He.length>=20){W=He[19],ie=He[20],he=He[21],fe=He[22];const Wt=this.drawLabelWithPointPlacement_(W,ie,he,fe);ne=Wt.label,He[3]=ne;const jt=He[23];j=(Wt.anchorX-jt)*this.pixelRatio,He[4]=j;const tn=He[24];N=(Wt.anchorY-tn)*this.pixelRatio,He[5]=N,Zt=ne.height,He[6]=Zt,mn=ne.width,He[13]=mn}let br;He.length>25&&(br=He[25]);let gr,tr,Ge;He.length>17?(gr=He[16],tr=He[17],Ge=He[18]):(gr=_g,tr=null,Ge=null),rn&&xe?ar+=De:!rn&&!xe&&(ar-=De);let ce=0;for(;P<U;P+=2){if(br&&br[ce++]<mn/this.pixelRatio)continue;const Wt=this.calculateImageOrLabelDimensions_(ne.width,ne.height,x[P],x[P+1],mn,Zt,j,N,_n,qn,ar,kn,s,gr,!!tr||!!Ge,Xe),jt=[e,t,ne,Wt,Rt,tr,Ge];if(p){let tn,Dn,Fn;if(zn){const Hn=U-P;if(!zn[Hn]){zn[Hn]={args:jt,declutterMode:q};continue}const xr=zn[Hn];tn=xr.args,Dn=xr.declutterMode,delete zn[Hn],Fn=EI(tn)}let on,Sr;if(tn&&(Dn!=="declutter"||!p.collides(Fn))&&(on=!0),(q!=="declutter"||!p.collides(Wt.declutterBox))&&(Sr=!0),Dn==="declutter"&&q==="declutter"){const Hn=on&&Sr;on=Hn,Sr=Hn}on&&(Dn!=="none"&&p.insert(Fn),this.replayImageOrLabel_.apply(this,tn)),Sr&&(q!=="none"&&p.insert(Wt.declutterBox),this.replayImageOrLabel_.apply(this,jt))}else this.replayImageOrLabel_.apply(this,jt)}++B;break;case qi.DRAW_CHARS:const pe=He[1],rt=He[2],St=He[3],Ht=He[4];fe=He[5];const sn=He[6],nr=He[7],$e=He[8];he=He[9];const ae=He[10];W=He[11],Array.isArray(W)&&(W=W.reduce(cX,"")),ie=He[12];const Ce=[He[13],He[13]];q=He[14]||"declutter";const f=He[15],je=this.textStates[ie],qe=je.font,Je=[je.scale[0]*nr,je.scale[1]*nr];let ut;qe in this.widths_?ut=this.widths_[qe]:(ut={},this.widths_[qe]=ut);const dt=GB(x,pe,rt,2),Qt=Math.abs(Je[0])*mI(qe,W,ut);if(Ht||Qt<=dt){const Wt=this.textStates[ie].textAlign,jt=(dt-Qt)*v4(W,Wt),tn=uX(x,pe,rt,2,W,jt,sn,Math.abs(Je[0]),mI,qe,ut,xe?0:this.viewRotation_,f);e:if(tn){const Dn=[];let Fn,on,Sr,Hn,xr;if(he)for(Fn=0,on=tn.length;Fn<on;++Fn){xr=tn[Fn],Sr=xr[4],Hn=this.createLabel(Sr,ie,"",he),j=xr[2]+(Je[0]<0?-ae:ae),N=St*Hn.height+(.5-St)*2*ae*Je[1]/Je[0]-$e;const qr=this.calculateImageOrLabelDimensions_(Hn.width,Hn.height,xr[0],xr[1],Hn.width,Hn.height,j,N,0,0,xr[3],Ce,!1,_g,!1,Xe);if(p&&q==="declutter"&&p.collides(qr.declutterBox))break e;Dn.push([e,t,Hn,qr,1,null,null])}if(fe)for(Fn=0,on=tn.length;Fn<on;++Fn){xr=tn[Fn],Sr=xr[4],Hn=this.createLabel(Sr,ie,fe,""),j=xr[2],N=St*Hn.height-$e;const qr=this.calculateImageOrLabelDimensions_(Hn.width,Hn.height,xr[0],xr[1],Hn.width,Hn.height,j,N,0,0,xr[3],Ce,!1,_g,!1,Xe);if(p&&q==="declutter"&&p.collides(qr.declutterBox))break e;Dn.push([e,t,Hn,qr,1,null,null])}p&&q!=="none"&&p.load(Dn.map(EI));for(let qr=0,Bn=Dn.length;qr<Bn;++qr)this.replayImageOrLabel_.apply(this,Dn[qr])}}++B;break;case qi.END_GEOMETRY:if(l!==void 0){Xe=He[1];const Wt=l(Xe,Re,q);if(Wt)return Wt}++B;break;case qi.FILL:Ze?Ee++:this.fill_(e),++B;break;case qi.MOVE_TO_LINE_TO:for(P=He[1],U=He[2],Ne=x[P],Se=x[P+1],e.moveTo(Ne,Se),H=Ne+.5|0,oe=Se+.5|0,P+=2;P<U;P+=2)Ne=x[P],Se=x[P+1],te=Ne+.5|0,V=Se+.5|0,(P==U-2||te!==H||V!==oe)&&(e.lineTo(Ne,Se),H=te,oe=V);++B;break;case qi.SET_FILL_STYLE:this.alignAndScaleFill_=He[2],Ee&&(this.fill_(e),Ee=0,me&&(e.stroke(),me=0)),e.fillStyle=He[1],++B;break;case qi.SET_STROKE_STYLE:me&&(e.stroke(),me=0),this.setStrokeStyle_(e,He),++B;break;case qi.STROKE:Ze?me++:e.stroke(),++B;break;default:++B;break}}Ee&&this.fill_(e),me&&e.stroke()}execute(e,t,r,i,s,l){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,l)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const Z1=["Polygon","Circle","LineString","Image","Text","Default"],f2=["Image","Text"],hX=Z1.filter(n=>!f2.includes(n));class qL{constructor(e,t,r,i,s,l,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=yh(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const l in s){const o=s[l];i[l]=new dX(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,l){i=Math.round(i);const o=i*2+1,p=Jp(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),v=!this.hitDetectionContext_;v&&(this.hitDetectionContext_=xu(o,o));const x=this.hitDetectionContext_;x.canvas.width!==o||x.canvas.height!==o?(x.canvas.width=o,x.canvas.height=o):v||x.clearRect(0,0,o,o);let B;this.renderBuffer_!==void 0&&(B=kf(),Xv(B,e),I0(B,t*(this.renderBuffer_+i),B));const T=fX(i);let P;function U(V,ne,W){const ie=x.getImageData(0,0,o,o).data;for(let he=0,fe=T.length;he<fe;he++)if(ie[T[he]]>0){if(!l||W==="none"||P!=="Image"&&P!=="Text"||l.includes(V)){const Ee=(T[he]-3)/4,me=i-Ee%o,Me=i-(Ee/o|0),De=s(V,ne,me*me+Me*Me);if(De)return De}x.clearRect(0,0,o,o);break}}const j=Object.keys(this.executorsByZIndex_).map(Number);j.sort(Tm);let N,q,H,oe,te;for(N=j.length-1;N>=0;--N){const V=j[N].toString();for(H=this.executorsByZIndex_[V],q=Z1.length-1;q>=0;--q)if(P=Z1[q],oe=H[P],oe!==void 0&&(te=oe.executeHitDetection(x,p,r,U,B),te))return te}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],l=t[3],o=[r,i,r,l,s,l,s,i];return T0(o,0,8,2,e,o),o}isEmpty(){return R0(this.executorsByZIndex_)}execute(e,t,r,i,s,l,o){const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(o?G$:Tm),l=l||Z1;const v=Z1.length;for(let x=0,B=p.length;x<B;++x){const T=p[x].toString(),P=this.executorsByZIndex_[T];for(let U=0,j=l.length;U<j;++U){const N=l[U],q=P[N];if(q!==void 0){const H=o===null?void 0:q.getZIndexContext(),oe=H?H.getContext():e,te=this.maxExtent_&&N!=="Image"&&N!=="Text";if(te&&(oe.save(),this.clip(oe,r)),!H||N==="Text"||N==="Image"?q.execute(oe,t,r,i,s,o):H.pushFunction(V=>q.execute(V,t,r,i,s,o)),te&&oe.restore(),H){H.offset();const V=p[x]*v+U;this.deferredZIndexContexts_[V]||(this.deferredZIndexContexts_[V]=[]),this.deferredZIndexContexts_[V].push(H)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Tm);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const C4={};function fX(n){if(C4[n]!==void 0)return C4[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let l=0;l<=n;++l){const o=s*s+l*l;if(o>t)break;let p=r[o];p||(p=[],r[o]=p),p.push(((n+s)*e+(n+l))*4+3),s>0&&p.push(((n-s)*e+(n+l))*4+3),l>0&&(p.push(((n+s)*e+(n-l))*4+3),s>0&&p.push(((n-s)*e+(n-l))*4+3))}const i=[];for(let s=0,l=r.length;s<l;++s)r[s]&&i.push(...r[s]);return C4[n]=i,i}const Vh=.5;function VL(n,e,t,r,i,s,l,o,p){const v=p?FB(i):i,x=n[0]*Vh,B=n[1]*Vh,T=xu(x,B);T.imageSmoothingEnabled=!1;const P=T.canvas,U=new DZ(T,Vh,i,null,l,o,p?YC(GH(),p):null),j=t.length,N=Math.floor((256*256*256-1)/j),q={};for(let oe=1;oe<=j;++oe){const te=t[oe-1],V=te.getStyleFunction()||r;if(!V)continue;let ne=V(te,s);if(!ne)continue;Array.isArray(ne)||(ne=[ne]);const ie=(oe*N).toString(16).padStart(7,"#00000");for(let he=0,fe=ne.length;he<fe;++he){const Ee=ne[he],me=Ee.getGeometryFunction()(te);if(!me||!Nu(v,me.getExtent()))continue;const Me=Ee.clone(),De=Me.getFill();De&&De.setColor(ie);const xe=Me.getStroke();xe&&(xe.setColor(ie),xe.setLineDash(null)),Me.setText(void 0);const At=Ee.getImage();if(At){const Se=At.getImageSize();if(!Se)continue;const Re=xu(Se[0],Se[1],void 0,{alpha:!1}),He=Re.canvas;Re.fillStyle=ie,Re.fillRect(0,0,He.width,He.height),Me.setImage(new c2({img:He,anchor:At.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:At.getOrigin(),opacity:1,size:At.getSize(),scale:At.getScale(),rotation:At.getRotation(),rotateWithView:At.getRotateWithView()}))}const Ze=Me.getZIndex()||0;let Xe=q[Ze];Xe||(Xe={},q[Ze]=Xe,Xe.Polygon=[],Xe.Circle=[],Xe.LineString=[],Xe.Point=[]);const Ne=me.getType();if(Ne==="GeometryCollection"){const Se=me.getGeometriesArrayRecursive();for(let Re=0,He=Se.length;Re<He;++Re){const _t=Se[Re];Xe[_t.getType().replace("Multi","")].push(_t,Me)}}else Xe[Ne.replace("Multi","")].push(me,Me)}}const H=Object.keys(q).map(Number).sort(Tm);for(let oe=0,te=H.length;oe<te;++oe){const V=q[H[oe]];for(const ne in V){const W=V[ne];for(let ie=0,he=W.length;ie<he;ie+=2){U.setStyle(W[ie+1]);for(let fe=0,Ee=e.length;fe<Ee;++fe)U.setTransform(e[fe]),U.drawGeometry(W[ie])}}}return T.getImageData(0,0,P.width,P.height)}function $L(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*Vh),s=Math.floor(Math.round(n[1])*Vh),l=(bu(i,0,t.width-1)+bu(s,0,t.height-1)*t.width)*4,o=t.data[l],p=t.data[l+1],x=t.data[l+2]+256*(p+256*o),B=Math.floor((256*256*256-1)/e.length);x&&x%B===0&&r.push(e[x/B-1])}return r}class HL extends vp{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const pX=5;class mX extends GC{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=pX}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return go()}getData(e){return null}prepareFrame(e){return go()}renderFrame(e,t){return go()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===fi.LOADED||t.getState()===fi.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=fi.LOADED&&t!=fi.ERROR&&e.addEventListener(so.CHANGE,this.boundHandleImageChange_),t==fi.IDLE&&(e.load(),t=e.getState()),t==fi.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const OI=[];let Y1=null;function gX(){Y1=xu(1,1,void 0,{willReadFrequently:!0})}class XB extends mX{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=yh(),this.pixelTransform=yh(),this.inversePixelTransform=yh(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){Y1||gX(),Y1.clearRect(0,0,1,1);let i;try{Y1.drawImage(e,t,r,1,1,0,0,1,1),i=Y1.getImageData(0,0,1,1).data}catch{return Y1=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,l;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&F0(_y(e.style.backgroundColor),_y(r)))){const o=e.firstElementChild;o instanceof HTMLCanvasElement&&(l=o.getContext("2d"))}if(l&&ZH(l.canvas.style.transform,t)?(this.container=e,this.context=l,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",l=xu();const p=l.canvas;s.appendChild(p),o=p.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=l}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=zm(r),s=fx(r),l=hx(r),o=dx(r);FA(t.coordinateToPixelTransform,i),FA(t.coordinateToPixelTransform,s),FA(t.coordinateToPixelTransform,l),FA(t.coordinateToPixelTransform,o);const p=this.inversePixelTransform;FA(p,i),FA(p,s),FA(p,l),FA(p,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,l=e.pixelRatio,o=Math.round(Ls(r)/i*l),p=Math.round(fA(r)/i*l);Jp(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,s,-o/2,-p/2),yL(this.inversePixelTransform,this.pixelTransform);const v=HH(this.pixelTransform);if(this.useContainer(t,v,this.getBackground(e)),!this.containerReused){const x=this.context.canvas;x.width!=o||x.height!=p?(x.width=o,x.height=p):this.context.clearRect(0,0,o,p),v!==x.style.transform&&(x.style.transform=v)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new HL(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ef.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ef.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new ZB),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ef.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ef.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,l,o){const p=s/2,v=l/2,x=i/t,B=-x,T=-e[0]+o,P=-e[1];return Jp(this.tempTransform,p,v,x,B,-r,T,P)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class yX extends XB{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=kf(),this.wrappedRenderedExtent_=kf(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,l=s.center,o=s.resolution,p=s.projection,v=s.rotation,x=p.getExtent(),B=this.getLayer().getSource(),T=this.getLayer().getDeclutter(),P=t.pixelRatio,U=t.viewHints,j=!(U[ru.ANIMATING]||U[ru.INTERACTING]),N=this.context,q=Math.round(Ls(i)/o*P),H=Math.round(fA(i)/o*P),oe=B.getWrapX()&&p.canWrapX(),te=oe?Ls(x):null,V=oe?Math.ceil((i[2]-x[2])/te)+1:1;let ne=oe?Math.floor((i[0]-x[0])/te):0;do{let W=this.getRenderTransform(l,o,0,P,q,H,ne*te);t.declutter&&(W=W.slice(0)),e.execute(N,[N.canvas.width,N.canvas.height],W,v,j,r===void 0?Z1:r?f2:hX,r?T&&t.declutter[T]:void 0)}while(++ne<V)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=xu(this.context.canvas.width,this.context.canvas.height,OI))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,$C(this.context),OI.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,l=this.replayGroup_;let o=l&&!l.isEmpty();if(!o&&!(this.getLayer().hasListener(Ef.PRERENDER)||this.getLayer().hasListener(Ef.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const p=Qp(r.extent);o=Nu(p,e.extent),this.clipped_=o&&!Gp(p,e.extent),this.clipped_&&this.clipUnrotated(s,e,p)}return o&&this.renderWorlds(l,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,l=this.renderedRotation_,o=this.renderedProjection_,p=this.wrappedRenderedExtent_,v=this.getLayer(),x=[],B=r[0]*Vh,T=r[1]*Vh;x.push(this.getRenderTransform(i,s,l,Vh,B,T,0).slice());const P=v.getSource(),U=o.getExtent();if(P.getWrapX()&&o.canWrapX()&&!Gp(U,p)){let j=p[0];const N=Ls(U);let q=0,H;for(;j<U[0];)--q,H=N*q,x.push(this.getRenderTransform(i,s,l,Vh,B,T,H).slice()),j+=N;for(q=0,j=p[2];j>U[2];)++q,H=N*q,x.push(this.getRenderTransform(i,s,l,Vh,B,T,H).slice()),j-=N}this.hitDetectionImageData_=VL(r,x,this.renderedFeatures_,v.getStyleFunction(),p,s,l,g6(s,this.renderedPixelRatio_),null)}t($L(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){var T,P;if(!this.replayGroup_)return;const l=t.viewState.resolution,o=t.viewState.rotation,p=this.getLayer(),v={},x=function(U,j,N){const q=Ro(U),H=v[q];if(H){if(H!==!0&&N<H.distanceSq){if(N===0)return v[q]=!0,s.splice(s.lastIndexOf(H),1),i(U,p,j);H.geometry=j,H.distanceSq=N}}else{if(N===0)return v[q]=!0,i(U,p,j);s.push(v[q]={feature:U,layer:p,geometry:j,distanceSq:N,callback:i})}},B=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,l,o,r,x,B?(P=(T=t.declutter)==null?void 0:T[B])==null?void 0:P.all().map(U=>U.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[ru.ANIMATING],s=e.viewHints[ru.INTERACTING],l=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!l&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const p=e.extent,v=e.viewState,x=v.projection,B=v.resolution,T=e.pixelRatio,P=t.getRevision(),U=t.getRenderBuffer();let j=t.getRenderOrder();j===void 0&&(j=LZ);const N=v.center.slice(),q=I0(p,U*B),H=q.slice(),oe=[q.slice()],te=x.getExtent();if(r.getWrapX()&&x.canWrapX()&&!Gp(te,e.extent)){const De=Ls(te),xe=Math.max(Ls(q)/2,De);q[0]=te[0]-xe,q[2]=te[2]+xe,TB(N,x);const At=nL(oe[0],x);At[0]<te[0]&&At[2]<te[2]?oe.push([At[0]+De,At[1],At[2]+De,At[3]]):At[0]>te[0]&&At[2]>te[2]&&oe.push([At[0]-De,At[1],At[2]-De,At[3]])}if(this.ready&&this.renderedResolution_==B&&this.renderedRevision_==P&&this.renderedRenderOrder_==j&&this.renderedFrameDeclutter_===!!e.declutter&&Gp(this.wrappedRenderedExtent_,q))return F0(this.renderedExtent_,H)||(this.hitDetectionImageData_=null,this.renderedExtent_=H),this.renderedCenter_=N,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const V=new YL(jL(B,T),q,B,T);let ne;for(let De=0,xe=oe.length;De<xe;++De)r.loadFeatures(oe[De],B,x);const W=g6(B,T);let ie=!0;const he=(De,xe)=>{let At;const Ze=De.getStyleFunction()||t.getStyleFunction();if(Ze&&(At=Ze(De,B)),At){const Xe=this.renderFeature(De,W,At,V,ne,this.getLayer().getDeclutter(),xe);ie=ie&&!Xe}},fe=FB(q),Ee=r.getFeaturesInExtent(fe);j&&Ee.sort(j);for(let De=0,xe=Ee.length;De<xe;++De)he(Ee[De],De);this.renderedFeatures_=Ee,this.ready=ie;const me=V.finish(),Me=new qL(q,B,T,r.getOverlaps(),me,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=B,this.renderedRevision_=P,this.renderedRenderOrder_=j,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=H,this.wrappedRenderedExtent_=q,this.renderedCenter_=N,this.renderedProjection_=x,this.renderedPixelRatio_=T,this.replayGroup_=Me,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,l,o){if(!r)return!1;let p=!1;if(Array.isArray(r))for(let v=0,x=r.length;v<x;++v)p=d2(i,e,r[v],t,this.boundHandleStyleImageChange_,s,l,o)||p;else p=d2(i,e,r,t,this.boundHandleStyleImageChange_,s,l,o);return p}}let Gg=0;const Wd=1<<Gg++,Rs=1<<Gg++,mh=1<<Gg++,cp=1<<Gg++,Fg=1<<Gg++,kv=1<<Gg++,J_=Math.pow(2,Gg)-1,JB={[Wd]:"boolean",[Rs]:"number",[mh]:"string",[cp]:"color",[Fg]:"number[]",[kv]:"size"},vX=Object.keys(JB).map(Number).sort(Tm);function CX(n){return n in JB}function Tv(n){const e=[];for(const t of vX)Pv(n,t)&&e.push(JB[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Pv(n,e){return(n&e)===e}function h0(n,e){return n===e}class ic{constructor(e,t){if(!CX(e))throw new Error(`literal expressions must have a specific type, got ${Tv(e)}`);this.type=e,this.value=t}}class _X{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function ZL(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Gc(n,e,t){switch(typeof n){case"boolean":{if(h0(e,mh))return new ic(mh,n?"true":"false");if(!Pv(e,Wd))throw new Error(`got a boolean, but expected ${Tv(e)}`);return new ic(Wd,n)}case"number":{if(h0(e,kv))return new ic(kv,md(n));if(h0(e,Wd))return new ic(Wd,!!n);if(h0(e,mh))return new ic(mh,n.toString());if(!Pv(e,Rs))throw new Error(`got a number, but expected ${Tv(e)}`);return new ic(Rs,n)}case"string":{if(h0(e,cp))return new ic(cp,YB(n));if(h0(e,Wd))return new ic(Wd,!!n);if(!Pv(e,mh))throw new Error(`got a string, but expected ${Tv(e)}`);return new ic(mh,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return TX(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(h0(e,kv)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new ic(kv,n)}if(h0(e,cp)){if(n.length===3)return new ic(cp,[...n,1]);if(n.length===4)return new ic(cp,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Pv(e,Fg))throw new Error(`got an array of numbers, but expected ${Tv(e)}`);return new ic(Fg,n)}const Gn={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},bX={[Gn.Get]:po(Yo(1,1/0),II),[Gn.Var]:po(Yo(1,1),xX),[Gn.Has]:po(Yo(1,1/0),II),[Gn.Id]:po(MX,p1),[Gn.Concat]:po(Yo(2,1/0),ha(mh)),[Gn.GeometryType]:po(wX,p1),[Gn.LineMetric]:po(p1),[Gn.Resolution]:po(_4,p1),[Gn.Zoom]:po(_4,p1),[Gn.Time]:po(_4,p1),[Gn.Any]:po(Yo(2,1/0),ha(Wd)),[Gn.All]:po(Yo(2,1/0),ha(Wd)),[Gn.Not]:po(Yo(1,1),ha(Wd)),[Gn.Equal]:po(Yo(2,2),ha(J_)),[Gn.NotEqual]:po(Yo(2,2),ha(J_)),[Gn.GreaterThan]:po(Yo(2,2),ha(Rs)),[Gn.GreaterThanOrEqualTo]:po(Yo(2,2),ha(Rs)),[Gn.LessThan]:po(Yo(2,2),ha(Rs)),[Gn.LessThanOrEqualTo]:po(Yo(2,2),ha(Rs)),[Gn.Multiply]:po(Yo(2,1/0),kI),[Gn.Coalesce]:po(Yo(2,1/0),kI),[Gn.Divide]:po(Yo(2,2),ha(Rs)),[Gn.Add]:po(Yo(2,1/0),ha(Rs)),[Gn.Subtract]:po(Yo(2,2),ha(Rs)),[Gn.Clamp]:po(Yo(3,3),ha(Rs)),[Gn.Mod]:po(Yo(2,2),ha(Rs)),[Gn.Pow]:po(Yo(2,2),ha(Rs)),[Gn.Abs]:po(Yo(1,1),ha(Rs)),[Gn.Floor]:po(Yo(1,1),ha(Rs)),[Gn.Ceil]:po(Yo(1,1),ha(Rs)),[Gn.Round]:po(Yo(1,1),ha(Rs)),[Gn.Sin]:po(Yo(1,1),ha(Rs)),[Gn.Cos]:po(Yo(1,1),ha(Rs)),[Gn.Atan]:po(Yo(1,2),ha(Rs)),[Gn.Sqrt]:po(Yo(1,1),ha(Rs)),[Gn.Match]:po(Yo(4,1/0),TI,EX),[Gn.Between]:po(Yo(3,3),ha(Rs)),[Gn.Interpolate]:po(Yo(6,1/0),TI,BX),[Gn.Case]:po(Yo(3,1/0),SX,OX),[Gn.In]:po(Yo(2,2),IX),[Gn.Number]:po(Yo(1,1/0),ha(J_)),[Gn.String]:po(Yo(1,1/0),ha(J_)),[Gn.Array]:po(Yo(1,1/0),ha(Rs)),[Gn.Color]:po(Yo(1,4),ha(Rs)),[Gn.Band]:po(Yo(1,3),ha(Rs)),[Gn.Palette]:po(Yo(2,2),kX),[Gn.ToString]:po(Yo(1,1),ha(Wd|Rs|mh|cp))};function II(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const l=n[s+1];switch(typeof l){case"number":{i[s]=new ic(Rs,l);break}case"string":{i[s]=new ic(mh,l);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${l}`)}s===0&&t.properties.add(String(l))}return i}function xX(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new ic(mh,r)]}function MX(n,e,t){t.featureId=!0}function wX(n,e,t){t.geometryType=!0}function _4(n,e,t){t.mapState=!0}function p1(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Yo(n,e){return function(t,r,i){const s=t[0],l=t.length-1;if(n===e){if(l!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${l}`)}}else if(l<n||l>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${l}`)}}}function kI(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const l=Gc(n[s+1],e,t);i[s]=l}return i}function ha(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let l=0;l<i;++l){const o=Gc(e[l+1],n,r);s[l]=o}return s}}function SX(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function TI(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function EX(n,e,t){const r=n.length-1,i=mh|Rs|Wd,s=Gc(n[1],i,t),l=Gc(n[n.length-1],e,t),o=new Array(r-2);for(let p=0;p<r-2;p+=2){try{const v=Gc(n[p+2],s.type,t);o[p]=v}catch(v){throw new Error(`failed to parse argument ${p+1} of match expression: ${v.message}`)}try{const v=Gc(n[p+3],l.type,t);o[p+1]=v}catch(v){throw new Error(`failed to parse argument ${p+2} of match expression: ${v.message}`)}}return[s,...o,l]}function BX(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const p=r[1];if(typeof p!="number"||p<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(p)} instead`);i=p;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new ic(Rs,i);let l;try{l=Gc(n[2],Rs,t)}catch(p){throw new Error(`failed to parse argument 1 in interpolate expression: ${p.message}`)}const o=new Array(n.length-3);for(let p=0;p<o.length;p+=2){try{const v=Gc(n[p+3],Rs,t);o[p]=v}catch(v){throw new Error(`failed to parse argument ${p+2} for interpolate expression: ${v.message}`)}try{const v=Gc(n[p+4],e,t);o[p+1]=v}catch(v){throw new Error(`failed to parse argument ${p+3} for interpolate expression: ${v.message}`)}}return[s,l,...o]}function OX(n,e,t){const r=Gc(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const l=Gc(n[s+1],Wd,t);i[s]=l}catch(l){throw new Error(`failed to parse argument ${s} of case expression: ${l.message}`)}try{const l=Gc(n[s+2],r.type,t);i[s+1]=l}catch(l){throw new Error(`failed to parse argument ${s+1} of case expression: ${l.message}`)}}return i[i.length-1]=r,i}function IX(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=mh}else i=Rs;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const p=Gc(r[o],i,t);s[o]=p}catch(p){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${p.message}`)}return[Gc(n[1],i,t),...s]}function kX(n,e,t){let r;try{r=Gc(n[1],Rs,t)}catch(l){throw new Error(`failed to parse first argument in palette expression: ${l.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let l=0;l<s.length;l++){let o;try{o=Gc(i[l],cp,t)}catch(p){throw new Error(`failed to parse color at index ${l} in palette expression: ${p.message}`)}if(!(o instanceof ic))throw new Error(`the palette color at index ${l} must be a literal value`);s[l]=o}return[r,...s]}function po(...n){return function(e,t,r){const i=e[0];let s;for(let l=0;l<n.length;l++){const o=n[l](e,t,r);if(l==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new _X(t,i,...s)}}function TX(n,e,t){const r=n[0],i=bX[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function XL(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return XL(n.getGeometries()[0]);default:return""}}function JL(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function jm(n,e,t){const r=Gc(n,e,t);return gp(r)}function gp(n,e){if(n instanceof ic){if(n.type===cp&&typeof n.value=="string"){const r=YB(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Gn.Number:case Gn.String:case Gn.Coalesce:return PX(n);case Gn.Get:case Gn.Var:case Gn.Has:return KX(n);case Gn.Id:return r=>r.featureId;case Gn.GeometryType:return r=>r.geometryType;case Gn.Concat:{const r=n.args.map(i=>gp(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Gn.Resolution:return r=>r.resolution;case Gn.Any:case Gn.All:case Gn.Between:case Gn.In:case Gn.Not:return DX(n);case Gn.Equal:case Gn.NotEqual:case Gn.LessThan:case Gn.LessThanOrEqualTo:case Gn.GreaterThan:case Gn.GreaterThanOrEqualTo:return RX(n);case Gn.Multiply:case Gn.Divide:case Gn.Add:case Gn.Subtract:case Gn.Clamp:case Gn.Mod:case Gn.Pow:case Gn.Abs:case Gn.Floor:case Gn.Ceil:case Gn.Round:case Gn.Sin:case Gn.Cos:case Gn.Atan:case Gn.Sqrt:return FX(n);case Gn.Case:return LX(n);case Gn.Match:return UX(n);case Gn.Interpolate:return zX(n);case Gn.ToString:return jX(n);default:throw new Error(`Unsupported operator ${t}`)}}function PX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=gp(n.args[s]);switch(t){case Gn.Coalesce:return s=>{for(let l=0;l<r;++l){const o=i[l](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Gn.Number:case Gn.String:return s=>{for(let l=0;l<r;++l){const o=i[l](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function KX(n,e){const r=n.args[0].value;switch(n.operator){case Gn.Get:return i=>{const s=n.args;let l=i.properties[r];for(let o=1,p=s.length;o<p;++o){const x=s[o].value;l=l[x]}return l};case Gn.Var:return i=>i.variables[r];case Gn.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let l=i.properties[r];for(let o=1,p=s.length;o<p;++o){const x=s[o].value;if(!l||!Object.hasOwn(l,x))return!1;l=l[x]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function RX(n,e){const t=n.operator,r=gp(n.args[0]),i=gp(n.args[1]);switch(t){case Gn.Equal:return s=>r(s)===i(s);case Gn.NotEqual:return s=>r(s)!==i(s);case Gn.LessThan:return s=>r(s)<i(s);case Gn.LessThanOrEqualTo:return s=>r(s)<=i(s);case Gn.GreaterThan:return s=>r(s)>i(s);case Gn.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function DX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=gp(n.args[s]);switch(t){case Gn.Any:return s=>{for(let l=0;l<r;++l)if(i[l](s))return!0;return!1};case Gn.All:return s=>{for(let l=0;l<r;++l)if(!i[l](s))return!1;return!0};case Gn.Between:return s=>{const l=i[0](s),o=i[1](s),p=i[2](s);return l>=o&&l<=p};case Gn.In:return s=>{const l=i[0](s);for(let o=1;o<r;++o)if(l===i[o](s))return!0;return!1};case Gn.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function FX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=gp(n.args[s]);switch(t){case Gn.Multiply:return s=>{let l=1;for(let o=0;o<r;++o)l*=i[o](s);return l};case Gn.Divide:return s=>i[0](s)/i[1](s);case Gn.Add:return s=>{let l=0;for(let o=0;o<r;++o)l+=i[o](s);return l};case Gn.Subtract:return s=>i[0](s)-i[1](s);case Gn.Clamp:return s=>{const l=i[0](s),o=i[1](s);if(l<o)return o;const p=i[2](s);return l>p?p:l};case Gn.Mod:return s=>i[0](s)%i[1](s);case Gn.Pow:return s=>Math.pow(i[0](s),i[1](s));case Gn.Abs:return s=>Math.abs(i[0](s));case Gn.Floor:return s=>Math.floor(i[0](s));case Gn.Ceil:return s=>Math.ceil(i[0](s));case Gn.Round:return s=>Math.round(i[0](s));case Gn.Sin:return s=>Math.sin(i[0](s));case Gn.Cos:return s=>Math.cos(i[0](s));case Gn.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Gn.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function LX(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=gp(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function UX(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=gp(n.args[i]);return i=>{const s=r[0](i);for(let l=1;l<t-1;l+=2)if(s===r[l](i))return r[l+1](i);return r[t-1](i)}}function zX(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=gp(n.args[i]);return i=>{const s=r[0](i),l=r[1](i);let o,p;for(let v=2;v<t;v+=2){const x=r[v](i);let B=r[v+1](i);const T=Array.isArray(B);if(T&&(B=CZ(B)),x>=l)return v===2?B:T?NX(s,l,o,p,x,B):Kv(s,l,o,p,x,B);o=x,p=B}return p}}function jX(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=gp(n.args[s]);switch(t){case Gn.ToString:return s=>{const l=i[0](s);return n.args[0].type===cp?qB(l):l.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Kv(n,e,t,r,i,s){const l=i-t;if(l===0)return r;const o=e-t,p=n===1?o/l:(Math.pow(n,o)-1)/(Math.pow(n,l)-1);return r+p*(s-r)}function NX(n,e,t,r,i,s){if(i-t===0)return r;const o=hI(r),p=hI(s);let v=p[2]-o[2];v>180?v-=360:v<-180&&(v+=360);const x=[Kv(n,e,t,o[0],i,p[0]),Kv(n,e,t,o[1],i,p[1]),o[2]+Kv(n,e,t,0,i,v),Kv(n,e,t,r[3],i,s[3])];return _Z(x)}function WX(n){return!0}function GX(n){const e=ZL(),t=QX(n,e),r=JL();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const l=i.getId();l!==void 0?r.featureId=l:r.featureId=null}return e.geometryType&&(r.geometryType=XL(i.getGeometry())),t(r)}}function PI(n){const e=ZL(),t=n.length,r=new Array(t);for(let l=0;l<t;++l)r[l]=y6(n[l],e);const i=JL(),s=new Array(t);return function(l,o){if(i.properties=l.getPropertiesInternal(),i.resolution=o,e.featureId){const v=l.getId();v!==void 0?i.featureId=v:i.featureId=null}let p=0;for(let v=0;v<t;++v){const x=r[v](i);x&&(s[p]=x,p+=1)}return s.length=p,s}}function QX(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],l="filter"in s?jm(s.filter,Wd,e):WX;let o;if(Array.isArray(s.style)){const p=s.style.length;o=new Array(p);for(let v=0;v<p;++v)o[v]=y6(s.style[v],e)}else o=[y6(s.style,e)];r[i]={filter:l,styles:o}}return function(i){const s=[];let l=!1;for(let o=0;o<t;++o){const p=r[o].filter;if(p(i)&&!(n[o].else&&l)){l=!0;for(const v of r[o].styles){const x=v(i);x&&s.push(x)}}}return s}}function y6(n,e){const t=SC(n,"",e),r=EC(n,"",e),i=YX(n,e),s=qX(n,e),l=gh(n,"z-index",e);if(!t&&!r&&!i&&!s&&!R0(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Qh;return function(p){let v=!0;if(t){const x=t(p);x&&(v=!1),o.setFill(x)}if(r){const x=r(p);x&&(v=!1),o.setStroke(x)}if(i){const x=i(p);x&&(v=!1),o.setText(x)}if(s){const x=s(p);x&&(v=!1),o.setImage(x)}return l&&o.setZIndex(l(p)),v?null:o}}function SC(n,e,t){let r;if(e+"fill-pattern-src"in n)r=ZX(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=eO(n,e+"fill-color",t)}if(!r)return null;const i=new Im;return function(s){const l=r(s);return l===QB?null:(i.setColor(l),i)}}function EC(n,e,t){const r=gh(n,e+"stroke-width",t),i=eO(n,e+"stroke-color",t);if(!r&&!i)return null;const s=Om(n,e+"stroke-line-cap",t),l=Om(n,e+"stroke-line-join",t),o=eU(n,e+"stroke-line-dash",t),p=gh(n,e+"stroke-line-dash-offset",t),v=gh(n,e+"stroke-miter-limit",t),x=new M0;return function(B){if(i){const T=i(B);if(T===QB)return null;x.setColor(T)}if(r&&x.setWidth(r(B)),s){const T=s(B);if(T!=="butt"&&T!=="round"&&T!=="square")throw new Error("Expected butt, round, or square line cap");x.setLineCap(T)}if(l){const T=l(B);if(T!=="bevel"&&T!=="round"&&T!=="miter")throw new Error("Expected bevel, round, or miter line join");x.setLineJoin(T)}return o&&x.setLineDash(o(B)),p&&x.setLineDashOffset(p(B)),v&&x.setMiterLimit(v(B)),x}}function YX(n,e){const t="text-",r=Om(n,t+"value",e);if(!r)return null;const i=SC(n,t,e),s=SC(n,t+"background-",e),l=EC(n,t,e),o=EC(n,t+"background-",e),p=Om(n,t+"font",e),v=gh(n,t+"max-angle",e),x=gh(n,t+"offset-x",e),B=gh(n,t+"offset-y",e),T=ay(n,t+"overflow",e),P=Om(n,t+"placement",e),U=gh(n,t+"repeat",e),j=Ex(n,t+"scale",e),N=ay(n,t+"rotate-with-view",e),q=gh(n,t+"rotation",e),H=Om(n,t+"align",e),oe=Om(n,t+"justify",e),te=Om(n,t+"baseline",e),V=ay(n,t+"keep-upright",e),ne=eU(n,t+"padding",e),W=Bx(n,t+"declutter-mode"),ie=new Sx({declutterMode:W});return function(he){if(ie.setText(r(he)),i&&ie.setFill(i(he)),s&&ie.setBackgroundFill(s(he)),l&&ie.setStroke(l(he)),o&&ie.setBackgroundStroke(o(he)),p&&ie.setFont(p(he)),v&&ie.setMaxAngle(v(he)),x&&ie.setOffsetX(x(he)),B&&ie.setOffsetY(B(he)),T&&ie.setOverflow(T(he)),P){const fe=P(he);if(fe!=="point"&&fe!=="line")throw new Error("Expected point or line for text-placement");ie.setPlacement(fe)}if(U&&ie.setRepeat(U(he)),j&&ie.setScale(j(he)),N&&ie.setRotateWithView(N(he)),q&&ie.setRotation(q(he)),H){const fe=H(he);if(fe!=="left"&&fe!=="center"&&fe!=="right"&&fe!=="end"&&fe!=="start")throw new Error("Expected left, right, center, start, or end for text-align");ie.setTextAlign(fe)}if(oe){const fe=oe(he);if(fe!=="left"&&fe!=="right"&&fe!=="center")throw new Error("Expected left, right, or center for text-justify");ie.setJustify(fe)}if(te){const fe=te(he);if(fe!=="bottom"&&fe!=="top"&&fe!=="middle"&&fe!=="alphabetic"&&fe!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");ie.setTextBaseline(fe)}return ne&&ie.setPadding(ne(he)),V&&ie.setKeepUpright(V(he)),ie}}function qX(n,e){return"icon-src"in n?VX(n,e):"shape-points"in n?$X(n,e):"circle-radius"in n?HX(n,e):null}function VX(n,e){const t="icon-",r=t+"src",i=tU(n[r],r),s=p2(n,t+"anchor",e),l=Ex(n,t+"scale",e),o=gh(n,t+"opacity",e),p=p2(n,t+"displacement",e),v=gh(n,t+"rotation",e),x=ay(n,t+"rotate-with-view",e),B=RI(n,t+"anchor-origin"),T=DI(n,t+"anchor-x-units"),P=DI(n,t+"anchor-y-units"),U=tJ(n,t+"color"),j=JX(n,t+"cross-origin"),N=eJ(n,t+"offset"),q=RI(n,t+"offset-origin"),H=m2(n,t+"width"),oe=m2(n,t+"height"),te=XX(n,t+"size"),V=Bx(n,t+"declutter-mode"),ne=new c2({src:i,anchorOrigin:B,anchorXUnits:T,anchorYUnits:P,color:U,crossOrigin:j,offset:N,offsetOrigin:q,height:oe,width:H,size:te,declutterMode:V});return function(W){return o&&ne.setOpacity(o(W)),p&&ne.setDisplacement(p(W)),v&&ne.setRotation(v(W)),x&&ne.setRotateWithView(x(W)),l&&ne.setScale(l(W)),s&&ne.setAnchor(s(W)),ne}}function $X(n,e){const t="shape-",r=t+"points",i=t+"radius",s=v6(n[r],r),l=v6(n[i],i),o=SC(n,t,e),p=EC(n,t,e),v=Ex(n,t+"scale",e),x=p2(n,t+"displacement",e),B=gh(n,t+"rotation",e),T=ay(n,t+"rotate-with-view",e),P=m2(n,t+"radius2"),U=m2(n,t+"angle"),j=Bx(n,t+"declutter-mode"),N=new wx({points:s,radius:l,radius2:P,angle:U,declutterMode:j});return function(q){return o&&N.setFill(o(q)),p&&N.setStroke(p(q)),x&&N.setDisplacement(x(q)),B&&N.setRotation(B(q)),T&&N.setRotateWithView(T(q)),v&&N.setScale(v(q)),N}}function HX(n,e){const t="circle-",r=SC(n,t,e),i=EC(n,t,e),s=gh(n,t+"radius",e),l=Ex(n,t+"scale",e),o=p2(n,t+"displacement",e),p=gh(n,t+"rotation",e),v=ay(n,t+"rotate-with-view",e),x=Bx(n,t+"declutter-mode"),B=new HC({radius:5,declutterMode:x});return function(T){return s&&B.setRadius(s(T)),r&&B.setFill(r(T)),i&&B.setStroke(i(T)),o&&B.setDisplacement(o(T)),p&&B.setRotation(p(T)),v&&B.setRotateWithView(v(T)),l&&B.setScale(l(T)),B}}function gh(n,e,t){if(!(e in n))return;const r=jm(n[e],Rs,t);return function(i){return v6(r(i),e)}}function Om(n,e,t){if(!(e in n))return null;const r=jm(n[e],mh,t);return function(i){return tU(r(i),e)}}function ZX(n,e,t){const r=Om(n,e+"pattern-src",t),i=KI(n,e+"pattern-offset",t),s=KI(n,e+"pattern-size",t),l=eO(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:l&&l(o)}}}function ay(n,e,t){if(!(e in n))return null;const r=jm(n[e],Wd,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function eO(n,e,t){if(!(e in n))return null;const r=jm(n[e],cp,t);return function(i){return nU(r(i),e)}}function eU(n,e,t){if(!(e in n))return null;const r=jm(n[e],Fg,t);return function(i){return XC(r(i),e)}}function p2(n,e,t){if(!(e in n))return null;const r=jm(n[e],Fg,t);return function(i){const s=XC(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function KI(n,e,t){if(!(e in n))return null;const r=jm(n[e],Fg,t);return function(i){return rU(r(i),e)}}function Ex(n,e,t){if(!(e in n))return null;const r=jm(n[e],Fg|Rs,t);return function(i){return nJ(r(i),e)}}function m2(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function XX(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return md(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function JX(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function RI(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function DI(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function eJ(n,e){const t=n[e];if(t!==void 0)return XC(t,e)}function Bx(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function tJ(n,e){const t=n[e];if(t!==void 0)return nU(t,e)}function XC(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function tU(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function v6(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function nU(n,e){if(typeof n=="string")return n;const t=XC(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function rU(n,e){const t=XC(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function nJ(n,e){return typeof n=="number"?n:rU(n,e)}const ip={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function FI(n,e,t){return function(r,i,s,l,o){if(!r)return;if(!i&&!e)return r;const p=e?0:s[0]*i,v=e?0:s[1]*i,x=o?o[0]:0,B=o?o[1]:0;let T=n[0]+p/2+x,P=n[2]-p/2+x,U=n[1]+v/2+B,j=n[3]-v/2+B;T>P&&(T=(P+T)/2,P=T),U>j&&(U=(j+U)/2,j=U);let N=bu(r[0],T,P),q=bu(r[1],U,j);if(l&&t&&i){const H=30*i;N+=-H*Math.log(1+Math.max(0,T-r[0])/H)+H*Math.log(1+Math.max(0,r[0]-P)/H),q+=-H*Math.log(1+Math.max(0,U-r[1])/H)+H*Math.log(1+Math.max(0,r[1]-j)/H)}return[N,q]}}function rJ(n){return n}function iU(n){return Math.pow(n,3)}function Ry(n){return 1-iU(1-n)}function iJ(n){return 3*n*n-2*n*n*n}function oJ(n){return n}function tO(n,e,t,r){const i=Ls(e)/t[0],s=fA(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function nO(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),bu(r,t/2,e*2)}function sJ(n,e,t,r){return e=e!==void 0?e:!0,function(i,s,l,o){if(i!==void 0){const p=n[0],v=n[n.length-1],x=t?tO(p,t,l,r):p;if(o)return e?nO(i,x,v):bu(i,v,x);const B=Math.min(x,i),T=Math.floor(ux(n,B,s));return n[T]>x&&T<n.length-1?n[T+1]:n[T]}}}function aJ(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,function(l,o,p,v){if(l!==void 0){const x=i?tO(e,i,p,s):e;if(v)return r?nO(l,x,t):bu(l,t,x);const B=1e-9,T=Math.ceil(Math.log(e/x)/Math.log(n)-B),P=-o*(.5-B)+.5,U=Math.min(x,l),j=Math.floor(Math.log(e/U)/Math.log(n)+P),N=Math.max(T,j),q=e/Math.pow(n,N);return bu(q,t,x)}}}function LI(n,e,t,r,i){return t=t!==void 0?t:!0,function(s,l,o,p){if(s!==void 0){const v=r?tO(n,r,o,i):n;return!t||!p?bu(s,e,v):nO(s,v,e)}}}function rO(n){if(n!==void 0)return 0}function UI(n){if(n!==void 0)return n}function lJ(n){const e=2*Math.PI/n;return function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function uJ(n){const e=k0(5);return function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t}}const oU=42,iO=256,b4=0;class dp extends Cp{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=DB(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&mL(),e.center&&(e.center=Em(e.center,this.projection_)),e.extent&&(e.extent=Qp(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in ip)delete t[o];this.setProperties(t,!0);const r=cJ(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=AJ(e),s=r.constraint,l=dJ(e);this.constraints_={center:i,resolution:s,rotation:l},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),l=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+l,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Em(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Em(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const x=arguments[i];x.center&&this.setCenterInternal(x.center),x.zoom!==void 0?this.setZoom(x.zoom):x.resolution&&this.setResolution(x.resolution),x.rotation!==void 0&&this.setRotation(x.rotation)}if(i===t){r&&eb(r,!0);return}let s=Date.now(),l=this.targetCenter_.slice(),o=this.targetResolution_,p=this.targetRotation_;const v=[];for(;i<t;++i){const x=arguments[i],B={start:s,complete:!1,anchor:x.anchor,duration:x.duration!==void 0?x.duration:1e3,easing:x.easing||iJ,callback:r};if(x.center&&(B.sourceCenter=l,B.targetCenter=x.center.slice(),l=B.targetCenter),x.zoom!==void 0?(B.sourceResolution=o,B.targetResolution=this.getResolutionForZoom(x.zoom),o=B.targetResolution):x.resolution&&(B.sourceResolution=o,B.targetResolution=x.resolution,o=B.targetResolution),x.rotation!==void 0){B.sourceRotation=p;const T=Og(x.rotation-p+Math.PI,2*Math.PI)-Math.PI;B.targetRotation=p+T,p=B.targetRotation}hJ(B)?B.complete=!0:s+=B.duration,v.push(B)}this.animations_.push(v),this.setHint(ru.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ru.ANIMATING]>0}getInteracting(){return this.hints_[ru.INTERACTING]>0}cancelAnimations(){this.setHint(ru.ANIMATING,-this.hints_[ru.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&eb(i[0].callback,!1),!e)for(let s=0,l=i.length;s<l;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let l=0,o=i.length;l<o;++l){const p=i[l];if(p.complete)continue;const v=e-p.start;let x=p.duration>0?v/p.duration:1;x>=1?(p.complete=!0,x=1):s=!1;const B=p.easing(x);if(p.sourceCenter){const T=p.sourceCenter[0],P=p.sourceCenter[1],U=p.targetCenter[0],j=p.targetCenter[1];this.nextCenter_=p.targetCenter;const N=T+B*(U-T),q=P+B*(j-P);this.targetCenter_=[N,q]}if(p.sourceResolution&&p.targetResolution){const T=B===1?p.targetResolution:p.sourceResolution+B*(p.targetResolution-p.sourceResolution);if(p.anchor){const P=this.getViewportSize_(this.getRotation()),U=this.constraints_.resolution(T,0,P,!0);this.targetCenter_=this.calculateCenterZoom(U,p.anchor)}this.nextResolution_=p.targetResolution,this.targetResolution_=T,this.applyTargetState_(!0)}if(p.sourceRotation!==void 0&&p.targetRotation!==void 0){const T=B===1?Og(p.targetRotation+Math.PI,2*Math.PI)-Math.PI:p.sourceRotation+B*(p.targetRotation-p.sourceRotation);if(p.anchor){const P=this.constraints_.rotation(T,!0);this.targetCenter_=this.calculateCenterRotate(P,p.anchor)}this.nextRotation_=p.targetRotation,this.targetRotation_=T}if(this.applyTargetState_(!0),t=!0,!p.complete)break}if(s){this.animations_[r]=null,this.setHint(ru.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const l=i[0].callback;l&&eb(l,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],kB(r,e-this.getRotation()),dH(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const l=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[l,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&h6(e,this.getProjection())}getCenterInternal(){return this.get(ip.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return FB(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();sa(t,"The view center is not defined");const r=this.getResolution();sa(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return sa(i!==void 0,"The view rotation is not defined"),t2(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ip.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Qp(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Ls(e)/t[0],i=fA(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return function(s){return t/Math.pow(e,s*i)}}getRotation(){return this.get(ip.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return function(l){return Math.log(r/l)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const l=this.getViewportSizeMinusPadding_();i=x4(i,this.getViewportSize_(),[l[0]/2+s[3],l[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=ux(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=bu(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(i,bu(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(sa(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){sa(!jg(e),"Cannot fit empty extent provided as `geometry`");const i=Qp(e,this.getProjection());r=AI(i)}else if(e.getType()==="Circle"){const i=Qp(e.getExtent(),this.getProjection());r=AI(i),r.rotate(this.getRotation(),Tf(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),l=e.getStride();let o=1/0,p=1/0,v=-1/0,x=-1/0;for(let B=0,T=s.length;B<T;B+=l){const P=s[B]*r-s[B+1]*i,U=s[B]*i+s[B+1]*r;o=Math.min(o,P),p=Math.min(p,U),v=Math.max(v,P),x=Math.max(x,U)}return[o,p,v,x]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let l;t.minResolution!==void 0?l=t.minResolution:t.maxZoom!==void 0?l=this.getResolutionForZoom(t.maxZoom):l=0;const o=this.rotatedExtentForGeometry(e);let p=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);p=isNaN(p)?l:Math.max(p,l),p=this.getConstrainedResolution(p,s?0:1);const v=this.getRotation(),x=Math.sin(v),B=Math.cos(v),T=Tf(o);T[0]+=(i[1]-i[3])/2*p,T[1]+=(i[0]-i[2])/2*p;const P=T[0]*B-T[1]*x,U=T[1]*B+T[0]*x,j=this.getConstrainedCenter([P,U],p),N=t.callback?t.callback:pC;t.duration!==void 0?this.animateInternal({resolution:p,center:j,duration:t.duration,easing:t.easing},N):(this.targetResolution_=p,this.targetCenter_=j,this.applyTargetState_(!1,!0),eb(N,!0))}centerOn(e,t,r){this.centerOnInternal(Em(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(x4(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const l=this.padding_;if(l&&e){const o=this.getViewportSizeMinusPadding_(-r),p=x4(e,i,[o[0]/2+l[3],o[1]/2+l[0]],t,r);s=[e[0]-p[0],e[1]-p[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=h6(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Em(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Em(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Em(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),l=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,l,s,r,this.calculateCenterShift(this.targetCenter_,l,i,s));this.get(ip.ROTATION)!==i&&this.set(ip.ROTATION,i),this.get(ip.RESOLUTION)!==l&&(this.set(ip.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(ip.CENTER)||!i2(this.get(ip.CENTER),o))&&this.set(ip.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,l),p=this.constraints_.center(this.targetCenter_,o,l,!1,this.calculateCenterShift(this.targetCenter_,o,s,l));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=p,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!i2(this.getCenterInternal(),p))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:p,resolution:o,duration:e,easing:Ry,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ru.INTERACTING,1)}endInteraction(e,t,r){r=r&&Em(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(ru.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function eb(n,e){setTimeout(function(){n(e)},0)}function AJ(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return FI(n.extent,n.constrainOnlyCenter,t)}const e=DB(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,FI(t,!1,!1)}return rJ}function cJ(n){let e,t,r,l=n.minZoom!==void 0?n.minZoom:b4,o=n.maxZoom!==void 0?n.maxZoom:28;const p=n.zoomFactor!==void 0?n.zoomFactor:2,v=n.multiWorld!==void 0?n.multiWorld:!1,x=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,B=n.showFullExtent!==void 0?n.showFullExtent:!1,T=DB(n.projection,"EPSG:3857"),P=T.getExtent();let U=n.constrainOnlyCenter,j=n.extent;if(!v&&!j&&T.isGlobal()&&(U=!1,j=P),n.resolutions!==void 0){const N=n.resolutions;t=N[l],r=N[o]!==void 0?N[o]:N[N.length-1],n.constrainResolution?e=sJ(N,x,!U&&j,B):e=LI(t,r,x,!U&&j,B)}else{const q=(P?Math.max(Ls(P),fA(P)):360*D0.degrees/T.getMetersPerUnit())/iO/Math.pow(2,b4),H=q/Math.pow(2,28-b4);t=n.maxResolution,t!==void 0?l=0:t=q/Math.pow(p,l),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(p,o):r=q/Math.pow(p,o):r=H),o=l+Math.floor(Math.log(t/r)/Math.log(p)),r=t/Math.pow(p,o-l),n.constrainResolution?e=aJ(p,t,r,x,!U&&j,B):e=LI(t,r,x,!U&&j,B)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:l,zoomFactor:p}}function dJ(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?uJ():t===!1?UI:typeof t=="number"?lJ(t):UI}return rO}function hJ(n){return!(n.sourceCenter&&n.targetCenter&&!i2(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function x4(n,e,t,r,i){const s=Math.cos(-i);let l=Math.sin(-i),o=n[0]*s-n[1]*l,p=n[1]*s+n[0]*l;o+=(e[0]/2-t[0])*r,p+=(t[1]-e[1]/2)*r,l=-l;const v=o*s-p*l,x=p*s+o*l;return[v,x]}const za={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class sU extends Cp{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[za.OPACITY]=e.opacity!==void 0?e.opacity:1,sa(typeof t[za.OPACITY]=="number","Layer opacity must be a number"),t[za.VISIBLE]=e.visible!==void 0?e.visible:!0,t[za.Z_INDEX]=e.zIndex,t[za.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[za.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[za.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[za.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=bu(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return go()}getLayerStatesArray(e){return go()}getExtent(){return this.get(za.EXTENT)}getMaxResolution(){return this.get(za.MAX_RESOLUTION)}getMinResolution(){return this.get(za.MIN_RESOLUTION)}getMinZoom(){return this.get(za.MIN_ZOOM)}getMaxZoom(){return this.get(za.MAX_ZOOM)}getOpacity(){return this.get(za.OPACITY)}getSourceState(){return go()}getVisible(){return this.get(za.VISIBLE)}getZIndex(){return this.get(za.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(za.EXTENT,e)}setMaxResolution(e){this.set(za.MAX_RESOLUTION,e)}setMinResolution(e){this.set(za.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(za.MAX_ZOOM,e)}setMinZoom(e){this.set(za.MIN_ZOOM,e)}setOpacity(e){sa(typeof e=="number","Layer opacity must be a number"),this.set(za.OPACITY,e)}setVisible(e){this.set(za.VISIBLE,e)}setZIndex(e){this.set(za.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Dy extends sU{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(za.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(za.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(gl(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Fs(e,so.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof dp?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(l=>l.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return oO(i,t.viewState)&&(!s||Nu(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const r=e instanceof dp?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(za.MAP,e)}getMapInternal(){return this.get(za.MAP)}setMap(e){this.mapPrecomposeKey_&&(gl(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(gl(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Fs(e,Ef.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Fs(this,so.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);sa(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(za.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function oO(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const zI={RENDER_ORDER:"renderOrder"};class sO extends Dy{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(zI.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new QL(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(zI.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?LL:e;const t=fJ(e);this.styleFunction_=e===null?void 0:KZ(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function fJ(n){if(n===void 0)return LL;if(!n)return null;if(typeof n=="function"||n instanceof Qh)return n;if(!Array.isArray(n))return PI([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Qh){const i=new Array(e);for(let s=0;s<e;++s){const l=n[s];if(!(l instanceof Qh))throw new Error("Expected a list of style instances");i[s]=l}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const l=n[s];if(!("style"in l))throw new Error("Expected a list of rules with a style property");i[s]=l}return GX(i)}return PI(n)}class aO extends sO{constructor(e){super(e)}createRenderer(){return new yX(this)}}class pJ extends VB{constructor(e,t,r,i,s){const l=s!==void 0?fi.IDLE:fi.LOADED;super(e,t,r,l),this.loader_=s!==void 0?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=fi.ERROR):this.state=fi.LOADED,this.changed()}load(){this.state==fi.IDLE&&(this.state=fi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const Ur={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class JC extends WC{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(so.CHANGE)}release(){this.setState(Ur.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Ur.EMPTY){if(this.state!==Ur.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){go()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:iU(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class aU extends JC{constructor(e,t,r,i,s,l){super(e,t,l),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_=new Image,i!==null&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Ur.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Ur.ERROR,this.unlistenImage_(),this.image_=mJ(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Ur.LOADED:this.state=Ur.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Ur.ERROR&&(this.state=Ur.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ur.IDLE&&(this.state=Ur.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=bZ(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function mJ(){const n=xu(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class gJ{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],l=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(l,s),this.initialVelocity_=Math.sqrt(s*s+l*l)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class q1 extends vp{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class m0 extends q1{constructor(e,t,r,i,s,l){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=l}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const zu={SINGLECLICK:"singleclick",CLICK:so.CLICK,DBLCLICK:so.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},C6={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class yJ extends WC{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Fs(r,C6.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Fs(r,C6.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(so.TOUCHMOVE,this.boundHandleTouchMove_,OL?{passive:!1}:!1)}emulateClick_(e){let t=new m0(zu.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new m0(zu.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new m0(zu.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==zu.POINTERUP||t.type==zu.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==zu.POINTERDOWN||t.type==zu.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new m0(zu.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(gl),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new m0(zu.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Fs(r,zu.POINTERMOVE,this.handlePointerMove_,this),Fs(r,zu.POINTERUP,this.handlePointerUp_,this),Fs(this.element_,zu.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Fs(this.element_.getRootNode(),zu.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new m0(zu.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new m0(zu.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(gl(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(so.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(gl(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(gl),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Bm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},hd={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},g2=1/0;class vJ{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,NC(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){sa(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=g2?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],l=r[e],o=e;for(;e<i>>1;){const p=this.getLeftChildIndex_(e),v=this.getRightChildIndex_(e),x=v<i&&r[v]<r[p]?v:p;t[e]=t[x],r[e]=r[x],e=x}t[e]=s,r[e]=l,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],l=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>l)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=l}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let l,o,p;for(o=0;o<s;++o)l=t[o],p=e(l),p==g2?delete this.queuedElements_[this.keyFunction_(l)]:(r[i]=p,t[i++]=l);t.length=i,r.length=i,this.heapify_()}}class lU extends vJ{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(so.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===Ur.LOADED||r===Ur.ERROR||r===Ur.EMPTY){r!==Ur.ERROR&&t.removeEventListener(so.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===Ur.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function CJ(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return g2;const s=n.viewState.center,l=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(l*l+o*o)/i}class lO extends Cp{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let r=0,i=this.listenerKeys.length;r<i;++r)gl(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=e,e){const r=this.target_??e.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==pC&&this.listenerKeys.push(Fs(e,Bm.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class _J extends lO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",l=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=l):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const p=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(p),this.toggleButton_.addEventListener(so.CLICK,this.handleClick_.bind(this),!1);const v=t+" "+xx+" "+HB+(this.collapsed_&&this.collapsible_?" "+fI:"")+(this.collapsible_?"":" ol-uncollapsible"),x=this.element;x.className=v,x.appendChild(this.toggleButton_),x.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>{var l;return((l=s.getSource())==null?void 0:l.getAttributionsCollapsible())===!1});this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>yy(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!F0(t,this.renderedAttributions_)){IL(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const l=document.createElement("li");l.innerHTML=t[i],this.ulElement_.appendChild(l)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(fI),this.collapsed_?dI(this.collapseLabel_,this.label_):dI(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class bJ extends lO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",l=document.createElement("button");l.className=t+"-reset",l.setAttribute("type","button"),l.title=s,l.appendChild(this.label_),l.addEventListener(so.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+xx+" "+HB,p=this.element;p.className=o,p.appendChild(l),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(V_)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Ry}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(V_);!s&&r===0?this.element.classList.add(V_):s&&r!==0&&this.element.classList.remove(V_)}this.label_.style.transform=i}this.rotation_=r}}class xJ extends lO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",l=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",p=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",v=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",x=document.createElement("button");x.className=i,x.setAttribute("type","button"),x.title=p,x.appendChild(typeof l=="string"?document.createTextNode(l):l),x.addEventListener(so.CLICK,this.handleClick_.bind(this,r),!1);const B=document.createElement("button");B.className=s,B.setAttribute("type","button"),B.title=v,B.appendChild(typeof o=="string"?document.createTextNode(o):o),B.addEventListener(so.CLICK,this.handleClick_.bind(this,-r),!1);const T=t+" "+xx+" "+HB,P=this.element;P.className=T,P.appendChild(x),P.appendChild(B),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:Ry})):r.setZoom(s)}}}function MJ(n){n=n||{};const e=new qp;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new xJ(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new bJ(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new _J(n.attributionOptions)),e}const jI={ACTIVE:"active"};class e_ extends Cp{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(jI.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(jI.ACTIVE,e)}setMap(e){this.map_=e}}function wJ(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:oJ,center:n.getConstrainedCenter(i)})}}function uO(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),l=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:l,anchor:t,duration:r!==void 0?r:250,easing:Ry})}class SJ extends e_{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==zu.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,l=r.shiftKey?-this.delta_:this.delta_,o=i.getView();uO(o,l,s,this.duration_),r.preventDefault(),t=!0}return!t}}function _6(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const EJ=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},BJ=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},uU=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?BJ(n):!0},OJ=fC,AU=function(n){const e=n.originalEvent;return e instanceof PointerEvent&&e.button==0&&!(aZ&&SL&&e.ctrlKey)},cU=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},IJ=function(n){const e=n.originalEvent;return SL?e.metaKey:e.ctrlKey},kJ=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},dU=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},M4=function(n){const e=n.originalEvent;return e instanceof PointerEvent&&e.pointerType=="mouse"},TJ=function(n){const e=n.originalEvent;return e instanceof PointerEvent&&e.isPrimary&&e.button===0};class t_ extends e_{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==zu.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==zu.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==zu.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==zu.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function AO(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class PJ extends t_{constructor(e){super({stopDown:Ax}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:_6(cU,TJ);this.condition_=e.onFocusOnly?_6(uU,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(AO(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();hH(s,o.getResolution()),kB(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),l=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(l),p=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(p),duration:500,easing:Ry})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class KJ extends t_{constructor(e){e=e||{},super({stopDown:Ax}),this.condition_=e.condition?e.condition:EJ,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!M4(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===rO)return;const i=t.getSize(),s=e.pixel,l=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=l-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=l}handleUpEvent(e){return M4(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return M4(e)&&AU(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class RJ extends jC{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Lm([i])}getGeometry(){return this.geometry_}}const m1={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class yv extends vp{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class DJ extends t_{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new RJ(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??AU,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new yv(m1.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new yv(t?m1.BOXEND:m1.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new yv(m1.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new yv(m1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new yv(m1.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class FJ extends DJ{constructor(e){e=e||{};const t=e.condition?e.condition:kJ;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),l=r.getResolutionForExtentInternal(s),o=r.getResolution()/l;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:Ry})}}const og={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class LJ extends e_{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return cU(t)&&dU(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==so.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==og.DOWN||i==og.LEFT||i==og.RIGHT||i==og.UP)){const l=e.map.getView(),o=l.getResolution()*this.pixelDelta_;let p=0,v=0;i==og.DOWN?v=-o:i==og.LEFT?p=-o:i==og.RIGHT?p=o:v=o;const x=[p,v];kB(x,l.getRotation()),wJ(l,x,this.duration_),r.preventDefault(),t=!0}}return!t}}class UJ extends e_{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!IJ(t)&&dU(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==so.KEYDOWN||e.type==so.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,l=i==="+"?this.delta_:-this.delta_,o=s.getView();uO(o,l,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}class zJ extends e_{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:OJ;this.condition_=e.onFocusOnly?_6(uU,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==so.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==so.WHEEL&&(s=i.deltaY,i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=l,!1;this.totalDelta_+=s;const p=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),p),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-bu(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),uO(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class jJ extends t_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ax),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const p=s-this.lastAngle_;this.rotationDelta_+=p,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=p}this.lastAngle_=s;const l=e.map,o=l.getView();o.getConstraints().rotation!==rO&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(AO(this.targetPointers))),this.rotating_&&(l.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class NJ extends t_{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Ax),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,l=r.clientY-i.clientY,o=Math.sqrt(s*s+l*l);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const p=e.map,v=p.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=p.getCoordinateFromPixelInternal(p.getEventPixel(AO(this.targetPointers))),p.render(),v.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function WJ(n){n=n||{};const e=new qp,t=new gJ(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new KJ),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new SJ({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new PJ({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new jJ),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new NJ({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new LJ),e.push(new UJ({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new zJ({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new FJ({duration:n.zoomDuration})),e}class y0 extends vp{constructor(e,t){super(e),this.layer=t}}const w4={LAYERS:"layers"};class Fy extends sU{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(w4.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new qp(r.slice(),{unique:!0}):sa(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new qp(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(gl),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Fs(e,ph.ADD,this.handleLayersAdd_,this),Fs(e,ph.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(gl);NC(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new y0("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Fs(e,vy.PROPERTYCHANGE,this.handleLayerChange_,this),Fs(e,so.CHANGE,this.handleLayerChange_,this)];e instanceof Fy&&t.push(Fs(e,"addlayer",this.handleLayerGroupAdd_,this),Fs(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ro(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new y0("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new y0("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new y0("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=Ro(t);this.listenerKeys_[r].forEach(gl),delete this.listenerKeys_[r],this.dispatchEvent(new y0("removelayer",t)),this.changed()}getLayers(){return this.get(w4.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new y0("removelayer",r[i]))}this.set(w4.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(l){l.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let l=r,o=t.length;l<o;l++){const p=t[l];p.opacity*=i.opacity,p.visible=p.visible&&i.visible,p.maxResolution=Math.min(p.maxResolution,i.maxResolution),p.minResolution=Math.max(p.minResolution,i.minResolution),p.minZoom=Math.max(p.minZoom,i.minZoom),p.maxZoom=Math.min(p.maxZoom,i.maxZoom),i.extent!==void 0&&(p.extent!==void 0?p.extent=mp(p.extent,i.extent):p.extent=i.extent),p.zIndex===void 0&&(p.zIndex=s)}return t}getSourceState(){return"ready"}}class GJ extends jC{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){go()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;Jp(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),yL(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,l,o,p){let v;const x=t.viewState;function B(te,V,ne,W){return s.call(l,V,te?ne:null,W)}const T=x.projection,P=TB(e.slice(),T),U=[[0,0]];if(T.canWrapX()&&i){const te=T.getExtent(),V=Ls(te);U.push([-V,0],[V,0])}const j=t.layerStatesArray,N=j.length,q=[],H=[];for(let te=0;te<U.length;te++)for(let V=N-1;V>=0;--V){const ne=j[V],W=ne.layer;if(W.hasRenderer()&&oO(ne,x)&&o.call(p,W)){const ie=W.getRenderer(),he=W.getSource();if(ie&&he){const fe=he.getWrapX()?P:e,Ee=B.bind(null,ne.managed);H[0]=fe[0]+U[te][0],H[1]=fe[1]+U[te][1],v=ie.forEachFeatureAtCoordinate(H,t,r,Ee,q)}if(v)return v}}if(q.length===0)return;const oe=1/q.length;return q.forEach((te,V)=>te.distanceSq+=V*oe),q.sort((te,V)=>te.distanceSq-V.distanceSq),q.some(te=>v=te.callback(te.feature,te.layer,te.geometry)),v}hasFeatureAtCoordinate(e,t,r,i,s,l){return this.forEachFeatureAtCoordinate(e,t,r,i,fC,this,s,l)!==void 0}getMap(){return this.map_}renderFrame(e){go()}scheduleExpireIconCache(e){Sf.canExpireCache()&&e.postRenderFunctions.push(QJ)}}function QJ(n,e){Sf.expire()}class YJ extends GJ{constructor(e){super(e),this.fontChangeListenerKey_=Fs(Rp,vy.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=xx+" ol-layers";const r=e.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new HL(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){gl(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ef.PRECOMPOSE,e);const t=e.layerStatesArray.sort((o,p)=>o.zIndex-p.zIndex);t.some(o=>o.layer instanceof sO&&o.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let l=null;for(let o=0,p=t.length;o<p;++o){const v=t[o];e.layerIndex=o;const x=v.layer,B=x.getSourceState();if(!oO(v,i)||B!="ready"&&B!="undefined"){x.unrender();continue}const T=x.render(e,l);T&&(T!==l&&(this.children_.push(T),l=T),s.push(v))}this.declutter(e,s),dZ(this.element_,this.children_),this.dispatchRenderEvent(Ef.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function hU(n){if(n instanceof Dy){n.setMapInternal(null);return}n instanceof Fy&&n.getLayers().forEach(hU)}function fU(n,e){if(n instanceof Dy){n.setMapInternal(e);return}if(n instanceof Fy){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)fU(t[r],e)}}let cO=class extends Cp{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=qJ(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:lZ,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=yh(),this.pixelToCoordinateTransform_=yh(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||MJ(),this.interactions=t.interactions||WJ({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new lU(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(hd.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(hd.VIEW,this.handleViewChanged_),this.addChangeListener(hd.SIZE,this.handleSizeChanged_),this.addChangeListener(hd.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof dp)&&e.view.then(function(i){r.setView(new dp(i))}),this.controls.addEventListener(ph.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(ph.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(ph.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(ph.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(ph.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(ph.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){fU(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,l=r.layerFilter!==void 0?r.layerFilter:fC,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,l,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Fy?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:fC,s=t.hitTolerance!==void 0?t.hitTolerance:0,l=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,l,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],l=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/l]}getTarget(){return this.get(hd.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return h6(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?FA(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(hd.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof qp){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const l=i.layer.getSource();if(l&&l.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Em(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?FA(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(hd.SIZE)}getView(){return this.get(hd.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return CJ(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new m0(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===C6.POINTERDOWN||r===so.WHEEL||r===so.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,l=t.target,o=s instanceof ShadowRoot?s.host===l?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(l)||!o.contains(l))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const l=i[s];if(l.getMap()!==this||!l.getActive()||!this.getTargetElement())continue;if(!l.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const l=e.viewHints;if(l[ru.ANIMATING]||l[ru.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ef.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ef.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new q1(Bm.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new q1(Bm.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)gl(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(so.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(so.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new YJ(this)),this.mapBrowserEventHandler_=new yJ(this,this.moveTolerance_);for(const s in zu)this.mapBrowserEventHandler_.addEventListener(zu[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(so.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(so.WHEEL,this.boundHandleBrowserEvent_,OL?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const s=t.getRootNode();r=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Fs(r,so.KEYDOWN,this.handleBrowserEvent,this),Fs(r,so.KEYPRESS,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(gl(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(gl(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Fs(e,vy.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Fs(e,so.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(gl),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new y0("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Fs(e,vy.PROPERTYCHANGE,this.render,this),Fs(e,so.CHANGE,this.render,this),Fs(e,"addlayer",this.handleLayerAdd_,this),Fs(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){hU(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&gI(t)&&r&&r.isDef()){const l=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:t2(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:l,wantedTiles:{},mapId:Ro(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const p=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=t2(o.nextCenter,o.nextResolution,p,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!jg(this.previousExtent_)&&!Fm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new q1(Bm.MOVESTART,this,i)),this.previousExtent_=Py(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ru.ANIMATING]&&!s.viewHints[ru.INTERACTING]&&!Fm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new q1(Bm.MOVEEND,this,s)),HF(s.extent,this.previousExtent_))),this.dispatchEvent(new q1(Bm.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Bm.LOADSTART)||this.hasListener(Bm.LOADEND)||this.hasListener(Ef.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new y0("removelayer",t)),this.set(hd.LAYERGROUP,e)}setSize(e){this.set(hd.SIZE,e)}setTarget(e){this.set(hd.TARGET,e)}setView(e){if(!e||e instanceof dp){this.set(hd.VIEW,e);return}this.set(hd.VIEW,new dp);const t=this;e.then(function(r){t.setView(new dp(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),s=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),l=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(s)&&!isNaN(l)&&(t=[Math.max(0,s),Math.max(0,l)],!gI(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&AL("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!F0(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function qJ(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Fy({layers:n.layers});t[hd.LAYERGROUP]=r,t[hd.TARGET]=n.target,t[hd.VIEW]=n.view instanceof dp?n.view:new dp;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new qp(n.controls.slice()):(sa(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new qp(n.interactions.slice()):(sa(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let l;return n.overlays!==void 0?Array.isArray(n.overlays)?l=new qp(n.overlays.slice()):(sa(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),l=n.overlays):l=new qp,{controls:i,interactions:s,keyboardEventTarget:e,overlays:l,values:t}}const dd={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class VJ extends Cp{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+EZ,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(dd.ELEMENT,this.handleElementChanged),this.addChangeListener(dd.MAP,this.handleMapChanged),this.addChangeListener(dd.OFFSET,this.handleOffsetChanged),this.addChangeListener(dd.POSITION,this.handlePositionChanged),this.addChangeListener(dd.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(dd.ELEMENT)}getId(){return this.id}getMap(){return this.get(dd.MAP)||null}getOffset(){return this.get(dd.OFFSET)}getPosition(){return this.get(dd.POSITION)}getPositioning(){return this.get(dd.POSITIONING)}handleElementChanged(){IL(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),gl(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Fs(e,Bm.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(dd.ELEMENT,e)}setMap(e){this.set(dd.MAP,e)}setOffset(e){this.set(dd.OFFSET,e)}setPosition(e){this.set(dd.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(dd.POSITION))return;const r=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),s=this.getRect(i,[AZ(i),cZ(i)]);e=e||{};const l=e.margin===void 0?20:e.margin;if(!Gp(r,s)){const o=s[0]-r[0],p=r[2]-s[2],v=s[1]-r[1],x=r[3]-s[3],B=[0,0];if(o<0?B[0]=o-l:p<0&&(B[0]=Math.abs(p)+l),v<0?B[1]=v-l:x<0&&(B[1]=Math.abs(x)+l),B[0]!==0||B[1]!==0){const T=t.getView().getCenterInternal(),P=t.getPixelFromCoordinateInternal(T);if(!P)return;const U=[P[0]+B[0],P[1]+B[1]],j=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(U),duration:j.duration,easing:j.easing})}}}getRect(e,t){const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[i,s,i+t[0],s+t[1]]}setPositioning(e){this.set(dd.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const r=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(r,i)}updateRenderedPosition(e,t){const r=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const l=Math.round(e[0]+i[0])+"px",o=Math.round(e[1]+i[1])+"px";let p="0%",v="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?p="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(p="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?v="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(v="-50%");const x=`translate(${p}, ${v}) translate(${l}, ${o})`;this.rendered.transform_!=x&&(this.rendered.transform_=x,r.transform=x)}getOptions(){return this.options}}class dO{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function g1(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new dO(n,e,t,r)}const NI=[];class $J extends JC{constructor(e,t,r,i,s){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=s,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=xu(1,1,NI)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=Ro(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&($C(this.context_),NI.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let pU=class extends JC{constructor(e,t,r,i,s,l){super(e,t,l),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Ur.IDLE&&(this.setState(Ur.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Ur.ERROR)}setFeatures(e){this.features_=e,this.setState(Ur.LOADED)}setLoader(e){this.loader_=e}};const mU="https://api.mapbox.com";function hO(n){const e="mapbox://";return n.indexOf(e)!==0?"":n.slice(e.length)}function HJ(n,e,t){const r=hO(n);if(!r)return decodeURI(new URL(n,t).href);const i="sprites/";if(r.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${n}`);const s=r.slice(i.length);return`${mU}/styles/v1/${s}/sprite?access_token=${e}`}function y2(n,e){const t=hO(n);if(!t)return decodeURI(new URL(n,location.href).href);const r="styles/";if(t.indexOf(r)!==0)throw new Error(`unexpected style url: ${n}`);const i=t.slice(r.length);return`${mU}/styles/v1/${i}?&access_token=${e}`}const ZJ=["a","b","c","d"];function Sb(n,e,t,r){const i=new URL(n,r||location.href),s=hO(n);if(!s)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(s==="mapbox.satellite"){const l=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${l}.webp?access_token=${e}`]}return ZJ.map(l=>`https://${l}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const WI={},GI={};let XJ=0;function fO(n){return n.id||(n.id=XJ++),n.id}function JJ(n,e){return fO(n)+"."+Ro(e)}function gU(n){let e=WI[n.id];return e||(e={},WI[fO(n)]=e),e}function eee(n){let e=GI[n.id];return e||(e={},GI[fO(n)]=e),e}function S4(n){return n*Math.PI/180}const Xp=function(){const n=[];for(let e=78271.51696402048;n.length<=24;e/=2)n.push(e);return n}();function Ox(n,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,e);const t=document.createElement("canvas");return t.width=n,t.height=e,t}function pO(n,e){let t=0;const r=e.length;for(;t<r;++t)if(e[t]<n&&t+1<r){const s=e[t]/e[t+1];return t+Math.log(e[t]/n)/Math.log(s)}return r-1}function Rv(n,e){const t=Math.floor(n),r=Math.pow(2,n-t);return e[t]/r}const y1={};function My(n,e,t={},r){if(e in y1)return r&&(r.url=y1[e][0].url),y1[e][1];const i=t.transformRequest&&t.transformRequest(e,n)||e,s=function(p){return delete y1[e],Promise.reject(new Error("Error fetching source "+e))},l=function(p){return delete y1[e],p.ok?p.json():Promise.reject(new Error("Error fetching source "+e))},o=yy(()=>i).then(p=>p instanceof Response?(r&&(r.url=p.url),l(p)):(p instanceof Request||(p=new Request(p)),p.headers.get("Accept")||p.headers.set("Accept","application/json"),r&&(r.url=p.url),fetch(p).then(l).catch(s))).catch(s);return y1[e]=[i,o],o}function yU(n,e){if(typeof n=="string")if(n.trim().startsWith("{"))try{const t=JSON.parse(n);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return n=y2(n,e.accessToken),My("Style",n,e);else return Promise.resolve(n)}const QI={};function vU(n,e,t={}){const r=[e,JSON.stringify(n)].toString();let i=QI[r];if(!i||t.transformRequest){let s;t.transformRequest&&(s=(o,p)=>{const v=t.transformRequest&&t.transformRequest(p,"Tiles")||p;if(o instanceof pU)o.setLoader((x,B,T)=>{const P=function(U){U.arrayBuffer().then(j=>{const q=o.getFormat().readFeatures(j,{extent:x,featureProjection:T});o.setFeatures(q)})};yy(()=>v).then(U=>{if(U instanceof Response)return P(U);fetch(U).then(P).catch(j=>o.setState(Ur.ERROR))}).catch(U=>o.setState(Ur.ERROR))});else{const x=o.getImage();yy(()=>v).then(B=>{if(typeof B=="string"){x.src=B;return}const T=P=>P.blob().then(U=>{const j=URL.createObjectURL(U);x.addEventListener("load",()=>URL.revokeObjectURL(j)),x.addEventListener("error",()=>URL.revokeObjectURL(j)),x.src=j});if(B instanceof Response)return T(B);fetch(B).then(T).catch(P=>o.setState(Ur.ERROR))}).catch(B=>o.setState(Ur.ERROR))}});const l=n.url;if(l&&!n.tiles){const o=Sb(l,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(l.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},n,{url:void 0,tiles:o}),tileLoadFunction:s});else{const p={};i=My("Source",o[0],t,p).then(function(v){return v.tiles=v.tiles.map(function(x){return v.scheme==="tms"&&(x=x.replace("{y}","{-y}")),Sb(x,t.accessToken,t.accessTokenParam||"access_token",p.url)[0]}),Promise.resolve({tileJson:v,tileLoadFunction:s})})}}else n=Object.assign({},n,{tiles:n.tiles.map(function(o){return n.scheme==="tms"&&(o=o.replace("{y}","{-y}")),Sb(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},n),tileLoadFunction:s});QI[r]=i}return i}function YI(n,e,t,r){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],s=Ox(i[0],i[1]),l=s.getContext("2d");l.drawImage(n,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const o=l.getImageData(0,0,i[0],i[1]);l.globalCompositeOperation="destination-over",l.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const p=o.data;for(let v=0,x=o.width;v<x;++v)for(let B=0,T=o.height;B<T;++B){const P=(B*x+v)*4;p[P+3]>0&&l.arc(v,B,t*e.pixelRatio,0,2*Math.PI)}return l.fill(),s}function tee(n,e,t){const r=Math.max(0,Math.min(1,(t-n)/(e-n)));return r*r*(3-2*r)}function qI(n,e,t){const r=Ox(e.width,e.height),i=r.getContext("2d");i.drawImage(n,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),l=s.data;for(let o=0,p=s.width;o<p;++o)for(let v=0,x=s.height;v<x;++v){const B=(v*p+o)*4,T=l[B+3]/255,P=.75,U=.1,j=tee(P-U,P+U,T);j>0?(l[B+0]=Math.round(255*t.r*j),l[B+1]=Math.round(255*t.g*j),l[B+2]=Math.round(255*t.b*j),l[B+3]=Math.round(255*j)):l[B+3]=0}return i.putImageData(s,0,0),r}const nee=Array(256).join("");function b6(n,e){if(e>=.05){let t="";const r=n.split(`
`),i=nee.slice(0,Math.round(e/.1));for(let s=0,l=r.length;s<l;++s)s>0&&(t+=`
`),t+=r[s].split("").join(i);return t}return n}let E4;function CU(){return E4||(E4=Ox(1,1).getContext("2d")),E4}function sg(n,e){return CU().measureText(n).width+(n.length-1)*e}const VI={};function x6(n,e,t,r){if(n.indexOf(`
`)!==-1){const l=n.split(`
`),o=[];for(let p=0,v=l.length;p<v;++p)o.push(x6(l[p],e,t,r));return o.join(`
`)}const i=t+","+e+","+n+","+r;let s=VI[i];if(!s){const l=n.split(" ");if(l.length>1){const o=CU();o.font=e;const v=o.measureText("M").width*t;let x="";const B=[];for(let T=0,P=l.length;T<P;++T){const U=l[T],j=x+(x?" ":"")+U;sg(j,r)<=v?x=j:(x&&B.push(x),x=U)}x&&B.push(x);for(let T=0,P=B.length;T<P&&P>1;++T){const U=B[T];if(sg(U,r)<v*.35){const j=T>0?sg(B[T-1],r):1/0,N=T<P-1?sg(B[T+1],r):1/0;B.splice(T,1),P-=1,j<N?(B[T-1]+=" "+U,T-=1):B[T]=U+" "+B[T]}}for(let T=0,P=B.length-1;T<P;++T){const U=B[T],j=B[T+1];if(sg(U,r)>v*.7&&sg(j,r)<v*.6){const N=U.split(" "),q=N.pop();sg(q,r)<v*.2&&(B[T]=N.join(" "),B[T+1]=q+" "+j),P-=1}}s=B.join(`
`)}else s=n;s=b6(s,r),VI[i]=s}return s}const ree=/font-family: ?([^;]*);/,iee=/("|')/g;let tb;function oee(n){if(!tb){tb={};const e=document.styleSheets;for(let t=0,r=e.length;t<r;++t){const i=e[t];try{const s=i.rules||i.cssRules;if(s)for(let l=0,o=s.length;l<o;++l){const p=s[l];if(p.type==5){const v=p.cssText.match(ree);tb[v[1].replace(iee,"")]=!0}}}catch{}}}return n in tb}const B4={};function see(n,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=n.toString();if(t in B4)return B4[t];const r=[];for(let i=0,s=n.length;i<s;++i){n[i]=n[i].replace("Arial Unicode MS","Arial");const l=n[i],o=t6(l,1);RL(o);const p=o.split(" ");r.push([p.slice(3).join(" ").replace(/"/g,""),p[1],p[0]])}for(let i=0,s=r.length;i<s;++i){const l=r[i],o=l[0];if(!oee(o)&&Rp.get(`${l[2]}
${l[1]} 
${o}`)!==100){const p=e.replace("{font-family}",o.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",o.replace(/ /g,"+")).replace("{fontweight}",l[1]).replace("{-fontstyle}",l[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",l[2]);if(!document.querySelector('link[href="'+p+'"]')){const v=document.createElement("link");v.href=p,v.rel="stylesheet",document.head.appendChild(v)}}}return B4[t]=n,n}const aee={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},lee={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},uee=function(n,e){const t=ox(n,e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return t.value},M6={},v2={zoom:0};let nb,O4;function xi(n,e,t,r,i,s,l){const o=n.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[o]||(s[o]={});const p=s[o];if(!p[t]){let v=(n[e]||M6)[t];const x=$q[`${e}_${n.type}`][t];v===void 0&&(v=x.default);let B=ky(v);if(!B&&Iy(v)&&(v=fB(v,x),B=!0),B){const T=uee(v,x);p[t]=T.evaluate.bind(T)}else x.type=="color"&&(v=Ol.parse(v)),p[t]=function(){return v}}return v2.zoom=r,p[t](v2,i,l)}function $I(n,e,t,r,i){return xi(n,"layout",`${r}-allow-overlap`,e,t,i)?xi(n,"layout",`${r}-ignore-placement`,e,t,i)?"none":"obstacle":"declutter"}function Aee(n,e,t,r,i){return i||console.warn("No filterCache provided to evaluateFilter()"),n in i||(i[n]=yq(e).filter),v2.zoom=r,i[n](v2,t)}function g0(n,e){if(n){if(n.a===0||e===0)return;const t=n.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(n.r*255/t)+","+Math.round(n.g*255/t)+","+Math.round(n.b*255/t)+","+t*e+")"}return n}const cee=/\{[^{}}]*\}/g;function I4(n,e){return n.replace(cee,function(t){return e[t.slice(1,-1)]||""})}const dee={};function hee(n,e,t,r=Xp,i=void 0,s=void 0,l=void 0,o=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");dee[JJ(e,n)]=Array.from(arguments);let p,v,x;s&&yy(()=>s).then(async W=>{let ie;if(typeof Image<"u"){const he=new Image;if(typeof W=="string")he.crossOrigin="anonymous",he.src=W;else{let fe;W instanceof Request?fe=await fetch(W):W instanceof Response&&(fe=W);const Ee=await fe.blob();ie=URL.createObjectURL(Ee),he.src=ie}he.addEventListener("load",function fe(){he.removeEventListener("load",fe),p=he,v=[he.width,he.height],n.changed(),ie&&URL.revokeObjectURL(ie)}),he.addEventListener("error",function fe(){URL.revokeObjectURL(ie),he.removeEventListener("error",fe)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const he=self;he.postMessage({action:"loadImage",src:W}),he.addEventListener("message",function(Ee){Ee.data.action==="imageLoaded"&&Ee.data.src===W&&(p=Ee.data.image,v=[p.width,p.height])})}});const B=V6(e.layers),T={},P=[],U={},j={},N=gU(e),q=eee(e);let H;for(let W=0,ie=B.length;W<ie;++W){const he=B[W],fe=he.id;if(typeof t=="string"&&he.source==t||Array.isArray(t)&&t.indexOf(fe)!==-1){const Ee=he["source-layer"];if(H){if(he.source!==H)throw new Error(`Layer "${fe}" does not use source "${H}`)}else{H=he.source;const Me=e.sources[H];if(!Me)throw new Error(`Source "${H}" is not defined`);const De=Me.type;if(De!=="vector"&&De!=="geojson")throw new Error(`Source "${H}" is not of type "vector" or "geojson", but "${De}"`)}let me=T[Ee];me||(me=[],T[Ee]=me),me.push({layer:he,index:W}),P.push(fe)}}const oe=new M0,te=new Im,V=[],ne=function(W,ie,he){const fe=W.getProperties(),Ee=T[fe.layer];if(!Ee)return;let me=r.indexOf(ie);me==-1&&(me=pO(ie,r));const Me=aee[W.getGeometry().getType()],De={id:W.getId(),properties:fe,type:Me},xe=n.get("mapbox-featurestate")[W.getId()];let At=-1;for(let Ze=0,Xe=Ee.length;Ze<Xe;++Ze){const Ne=Ee[Ze],Se=Ne.layer,Re=Se.id;if(he!==void 0&&he!==Re)continue;const He=Se.layout||M6,_t=Se.paint||M6;if(He.visibility==="none"||"minzoom"in Se&&me<Se.minzoom||"maxzoom"in Se&&me>=Se.maxzoom)continue;const Gt=Se.filter;if(!Gt||Aee(Re,Gt,De,me,q)){let yt,Ft,Tt,Le,Pe,Be;const it=Ne.index;if(Me==3&&(Se.type=="fill"||Se.type=="fill-extrusion"))if(Ft=xi(Se,"paint",Se.type+"-opacity",me,De,N,xe),Se.type+"-pattern"in _t){const br=xi(Se,"paint",Se.type+"-pattern",me,De,N,xe);if(br){const gr=typeof br=="string"?I4(br,fe):br.toString();if(p&&i&&i[gr]){++At,Be=V[At],(!Be||!Be.getFill()||Be.getStroke()||Be.getText())&&(Be=new Qh({fill:new Im}),V[At]=Be),Tt=Be.getFill(),Be.setZIndex(it);const tr=gr+"."+Ft;let Ge=j[tr];if(!Ge){const ce=i[gr],pe=Ox(ce.width,ce.height),rt=pe.getContext("2d");rt.globalAlpha=Ft,rt.drawImage(p,ce.x,ce.y,ce.width,ce.height,0,0,ce.width,ce.height),Ge=rt.createPattern(pe,"repeat"),j[tr]=Ge}Tt.setColor(Ge)}}}else yt=g0(xi(Se,"paint",Se.type+"-color",me,De,N,xe),Ft),Se.type+"-outline-color"in _t&&(Pe=g0(xi(Se,"paint",Se.type+"-outline-color",me,De,N,xe),Ft)),Pe||(Pe=yt),(yt||Pe)&&(++At,Be=V[At],(!Be||yt&&!Be.getFill()||!yt&&Be.getFill()||Pe&&!Be.getStroke()||!Pe&&Be.getStroke()||Be.getText())&&(Be=new Qh({fill:yt?new Im:void 0,stroke:Pe?new M0:void 0}),V[At]=Be),yt&&(Tt=Be.getFill(),Tt.setColor(yt)),Pe&&(Le=Be.getStroke(),Le.setColor(Pe),Le.setWidth(.5)),Be.setZIndex(it));if(Me!=1&&Se.type=="line"){"line-pattern"in _t?yt=void 0:yt=g0(xi(Se,"paint","line-color",me,De,N,xe),xi(Se,"paint","line-opacity",me,De,N,xe));const br=xi(Se,"paint","line-width",me,De,N,xe);yt&&br>0&&(++At,Be=V[At],(!Be||!Be.getStroke()||Be.getFill()||Be.getText())&&(Be=new Qh({stroke:new M0}),V[At]=Be),Le=Be.getStroke(),Le.setLineCap(xi(Se,"layout","line-cap",me,De,N,xe)),Le.setLineJoin(xi(Se,"layout","line-join",me,De,N,xe)),Le.setMiterLimit(xi(Se,"layout","line-miter-limit",me,De,N,xe)),Le.setColor(yt),Le.setWidth(br),Le.setLineDash(_t["line-dasharray"]?xi(Se,"paint","line-dasharray",me,De,N,xe).map(function(gr){return gr*br}):null),Be.setZIndex(it))}let Ct=!1,ft=null,Lt=0,Zt,Rt,_n;if((Me==1||Me==2)&&"icon-image"in He){const br=xi(Se,"layout","icon-image",me,De,N,xe);if(br){Zt=typeof br=="string"?I4(br,fe):br.toString();let gr;const tr=o?o(n,Zt):void 0;if(p&&i&&i[Zt]||tr){const Ge=xi(Se,"layout","icon-rotation-alignment",me,De,N,xe);if(Me==2){const ce=W.getGeometry();if(ce.getFlatMidpoint||ce.getFlatMidpoints){const pe=ce.getExtent();if(Math.sqrt(Math.max(Math.pow((pe[2]-pe[0])/ie,2),Math.pow((pe[3]-pe[1])/ie,2)))>150){const St=ce.getType()==="MultiLineString"?ce.getFlatMidpoints():ce.getFlatMidpoint();if(O4||(nb=[NaN,NaN],O4=new pd("Point",nb,[],2,{},void 0)),gr=O4,nb[0]=St[0],nb[1]=St[1],xi(Se,"layout","symbol-placement",me,De,N,xe)==="line"&&Ge==="map"){const sn=ce.getStride(),nr=ce.getFlatCoordinates();for(let $e=0,ae=nr.length-sn;$e<ae;$e+=sn){const Ce=nr[$e],f=nr[$e+1],je=nr[$e+sn],qe=nr[$e+sn+1],Je=Math.min(Ce,je),ut=Math.max(Ce,je),dt=St[0],Qt=St[1],Wt=(qe-f)*(dt-Ce)-(je-Ce)*(Qt-f);if(Math.abs(Wt)<.001&&dt<=ut&&dt>=Je){Lt=Math.atan2(f-qe,je-Ce);break}}}}}}if(Me!==2||gr){const ce=xi(Se,"layout","icon-size",me,De,N,xe),pe=_t["icon-color"]!==void 0?xi(Se,"paint","icon-color",me,De,N,xe):null;if(!pe||pe.a!==0){const rt=xi(Se,"paint","icon-halo-color",me,De,N,xe),St=xi(Se,"paint","icon-halo-width",me,De,N,xe);let Ht=`${Zt}.${ce}.${St}.${rt}`;if(pe!==null&&(Ht+=`.${pe}`),Rt=U[Ht],!Rt){const sn=$I(Se,me,De,"icon",N);let nr;"icon-offset"in He&&(nr=xi(Se,"layout","icon-offset",me,De,N,xe).slice(0),nr[0]*=ce,nr[1]*=-ce);let $e=pe?[pe.r*255,pe.g*255,pe.b*255,pe.a]:void 0;if(tr){const ae={color:$e,rotateWithView:Ge==="map",displacement:nr,declutterMode:sn,scale:ce};typeof tr=="string"?ae.src=tr:(ae.img=tr,ae.imgSize=[tr.width,tr.height]),Rt=new c2(ae)}else{const ae=i[Zt];let Ce,f,je;St?ae.sdf?(Ce=YI(qI(p,ae,pe||[0,0,0,1]),{x:0,y:0,width:ae.width,height:ae.height,pixelRatio:ae.pixelRatio},St,rt),$e=void 0):Ce=YI(p,ae,St,rt):(ae.sdf?(x||(x=qI(p,{x:0,y:0,width:v[0],height:v[1]},{r:1,g:1,b:1,a:1})),Ce=x):Ce=p,f=[ae.width,ae.height],je=[ae.x,ae.y]),Rt=new c2({color:$e,img:Ce,imgSize:v,size:f,offset:je,rotateWithView:Ge==="map",scale:ce/ae.pixelRatio,displacement:nr,declutterMode:sn})}U[Ht]=Rt}}Rt&&(++At,Be=V[At],(!Be||!Be.getImage()||Be.getFill()||Be.getStroke())&&(Be=new Qh,V[At]=Be),Be.setGeometry(gr),Rt.setRotation(Lt+S4(xi(Se,"layout","icon-rotate",me,De,N,xe))),Rt.setOpacity(xi(Se,"paint","icon-opacity",me,De,N,xe)),Rt.setAnchor(lee[xi(Se,"layout","icon-anchor",me,De,N,xe)]),Be.setImage(Rt),ft=Be.getText(),Be.setText(void 0),Be.setZIndex(it),Ct=!0,_n=!1)}else _n=!0}}}if(Me==1&&Se.type==="circle"){++At,Be=V[At],(!Be||!Be.getImage()||Be.getFill()||Be.getStroke())&&(Be=new Qh,V[At]=Be);const br="circle-radius"in _t?xi(Se,"paint","circle-radius",me,De,N,xe):5,gr=g0(xi(Se,"paint","circle-stroke-color",me,De,N,xe),xi(Se,"paint","circle-stroke-opacity",me,De,N,xe)),tr=xi(Se,"paint","circle-translate",me,De,N,xe),Ge=g0(xi(Se,"paint","circle-color",me,De,N,xe),xi(Se,"paint","circle-opacity",me,De,N,xe)),ce=xi(Se,"paint","circle-stroke-width",me,De,N,xe),pe=br+"."+gr+"."+Ge+"."+ce+"."+tr[0]+"."+tr[1];Rt=U[pe],Rt||(Rt=new HC({radius:br,displacement:[tr[0],-tr[1]],stroke:gr&&ce>0?new M0({width:ce,color:gr}):void 0,fill:Ge?new Im({color:Ge}):void 0,declutterMode:"none"}),U[pe]=Rt),Be.setImage(Rt),ft=Be.getText(),Be.setText(void 0),Be.setGeometry(void 0),Be.setZIndex(it),Ct=!0}let qn,rn,ar,kn,mn,zn;if("text-field"in He){kn=Math.round(xi(Se,"layout","text-size",me,De,N,xe));const br=xi(Se,"layout","text-font",me,De,N,xe);ar=xi(Se,"layout","text-line-height",me,De,N,xe),rn=t6(l?l(br,e.metadata?e.metadata["ol:webfonts"]:void 0):br,kn,ar),rn.includes("sans-serif")||(rn+=",sans-serif"),mn=xi(Se,"layout","text-letter-spacing",me,De,N,xe),zn=xi(Se,"layout","text-max-width",me,De,N,xe);const gr=xi(Se,"layout","text-field",me,De,N,xe);typeof gr=="object"&&gr.sections?gr.sections.length===1?qn=gr.toString():qn=gr.sections.reduce((tr,Ge,ce)=>{const pe=Ge.fontStack?Ge.fontStack.split(","):br,rt=t6(l?l(pe):pe,kn*(Ge.scale||1),ar);let St=Ge.text;if(St===`
`)return tr.push(`
`,""),tr;if(Me==2)return tr.push(b6(St,mn),rt),tr;St=x6(St,rt,zn,mn).split(`
`);for(let Ht=0,sn=St.length;Ht<sn;++Ht)Ht>0&&tr.push(`
`,""),tr.push(St[Ht],rt);return tr},[]):qn=I4(gr,fe).trim(),Ft=xi(Se,"paint","text-opacity",me,De,N,xe)}if(qn&&Ft&&!_n){Ct||(++At,Be=V[At],(!Be||!Be.getText()||Be.getFill()||Be.getStroke())&&(Be=new Qh,V[At]=Be),Be.setImage(void 0),Be.setGeometry(void 0));const br=$I(Se,me,De,"text",N);Be.getText()||Be.setText(ft),ft=Be.getText(),(!ft||"getDeclutterMode"in ft&&ft.getDeclutterMode()!==br)&&(ft=new Sx({padding:[2,2,2,2],declutterMode:br}),Be.setText(ft));const gr=xi(Se,"layout","text-transform",me,De,N,xe);gr=="uppercase"?qn=Array.isArray(qn)?qn.map((qe,Je)=>Je%2?qe:qe.toUpperCase()):qn.toUpperCase():gr=="lowercase"&&(qn=Array.isArray(qn)?qn.map((qe,Je)=>Je%2?qe:qe.toLowerCase()):qn.toLowerCase());const tr=Array.isArray(qn)?qn:Me==2?b6(qn,mn):x6(qn,rn,zn,mn);if(ft.setText(tr),ft.setFont(rn),ft.setRotation(S4(xi(Se,"layout","text-rotate",me,De,N,xe))),typeof ft.setKeepUpright=="function"){const qe=xi(Se,"layout","text-keep-upright",me,De,N,xe);ft.setKeepUpright(qe)}const Ge=xi(Se,"layout","text-anchor",me,De,N,xe),ce=Ct||Me==1?"point":xi(Se,"layout","symbol-placement",me,De,N,xe);let pe;if(ce==="line-center"?(ft.setPlacement("line"),pe="center"):ft.setPlacement(ce),ce==="line"&&typeof ft.setRepeat=="function"){const qe=xi(Se,"layout","symbol-spacing",me,De,N,xe);ft.setRepeat(qe*2)}ft.setOverflow(ce==="point");let rt=xi(Se,"paint","text-halo-width",me,De,N,xe);const St=xi(Se,"layout","text-offset",me,De,N,xe),Ht=xi(Se,"paint","text-translate",me,De,N,xe);let sn=0,nr=0;if(ce=="point"){pe="center",Ge.indexOf("left")!==-1?(pe="left",nr=rt):Ge.indexOf("right")!==-1&&(pe="right",nr=-rt);const qe=xi(Se,"layout","text-rotation-alignment",me,De,N,xe);ft.setRotateWithView(qe=="map")}else ft.setMaxAngle(S4(xi(Se,"layout","text-max-angle",me,De,N,xe))*qn.length/tr.length),ft.setRotateWithView(!1);ft.setTextAlign(pe);let $e="middle";Ge.indexOf("bottom")==0?($e="bottom",sn=-rt-.5*(ar-1)*kn):Ge.indexOf("top")==0&&($e="top",sn=rt+.5*(ar-1)*kn),ft.setTextBaseline($e);const ae=xi(Se,"layout","text-justify",me,De,N,xe);ft.setJustify(ae==="auto"?void 0:ae),ft.setOffsetX(St[0]*kn+nr+Ht[0]),ft.setOffsetY(St[1]*kn+sn+Ht[1]),te.setColor(g0(xi(Se,"paint","text-color",me,De,N,xe),Ft)),ft.setFill(te);const Ce=g0(xi(Se,"paint","text-halo-color",me,De,N,xe),Ft);if(Ce&&rt>0){oe.setColor(Ce),rt*=2;const qe=.5*kn;oe.setWidth(rt<=qe?rt:qe),ft.setStroke(oe)}else ft.setStroke(void 0);const f=xi(Se,"layout","text-padding",me,De,N,xe),je=ft.getPadding();f!==je[0]&&(je[0]=f,je[1]=f,je[2]=f,je[3]=f),Be.setZIndex(it)}}}if(At>-1)return V.length=At+1,V};return n.setStyle(ne),n.set("mapbox-source",H),n.set("mapbox-layers",P),n.set("mapbox-featurestate",n.get("mapbox-featurestate")||{}),ne}class _U{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=cx,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Ia(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Ia(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return go()}readFeature(e,t){return go()}readFeatures(e,t){return go()}readGeometry(e,t){return go()}readProjection(e){return go()}writeFeature(e,t){return go()}writeFeatures(e,t){return go()}writeGeometry(e,t){return go()}}function Ix(n,e,t){const r=t?Ia(t.featureProjection):null,i=t?Ia(t.dataProjection):null;let s=n;if(r&&i&&!P0(r,i)){e&&(s=n.clone());const l=e?r:i,o=e?i:r;l.getUnits()==="tile-pixels"?s.transform(l,o):s.applyTransform(gC(l,o))}if(e&&t&&t.decimals!==void 0){const l=Math.pow(10,t.decimals),o=function(p){for(let v=0,x=p.length;v<x;++v)p[v]=Math.round(p[v]*l)/l;return p};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const fee={Point:Rg,LineString:Kg,Polygon:Lm,MultiPoint:VC,MultiLineString:CC,MultiPolygon:_C};function pee(n,e,t){return Array.isArray(e[0])?(sL(n,0,e,t)||(n=n.slice(),a6(n,0,e,t)),n):(OB(n,0,e,t)||(n=n.slice(),r2(n,0,e,t)),n)}function bU(n,e){var s;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(l=>bU({...n,geometry:l})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return Ix(new pd(r,r==="Polygon"?pee(t.flatCoordinates,t.ends,i):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function mO(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>mO(i,e));return new a2(r)}const t=fee[n.type];return Ix(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class mee extends _U{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(rb(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(rb(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return go()}readFeaturesFromObject(e,t){return go()}readGeometry(e,t){return this.readGeometryFromObject(rb(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return go()}readProjection(e){return this.readProjectionFromObject(rb(e))}readProjectionFromObject(e){return go()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return go()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return go()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return go()}}function rb(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class HI extends mee{constructor(e){e=e||{},super(),this.dataProjection=Ia(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ia(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=gO(r.geometry);if(this.featureClass===pd)return bU({geometry:i,id:r.id,properties:r.properties},t);const s=new cx;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(mO(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const l=s.features;for(let o=0,p=l.length;o<p;++o){const v=this.readFeatureFromObject(l[o],t);v&&i.push(v)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return gee(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Ia(t.properties.name);else if(t.type==="EPSG")r=Ia("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),l=e.getGeometry();return l&&(r.geometry=w6(l,t),delete s[e.getGeometryName()]),R0(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return w6(e,this.adaptOptions(t))}}function gO(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=vee(n);break}case"LineString":{t=Cee(n);break}case"Polygon":{t=Mee(n);break}case"MultiPoint":{t=bee(n);break}case"MultiLineString":{t=_ee(n);break}case"MultiPolygon":{t=xee(n);break}case"GeometryCollection":{t=yee(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function gee(n,e){const t=gO(n);return mO(t,e)}function yee(n,e){return n.geometries.map(function(r){return gO(r)})}function vee(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Wg(e.length)}}function Cee(n){var r;const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Wg(((r=e[0])==null?void 0:r.length)||2)}}function _ee(n){var s,l;const e=n.coordinates,t=((l=(s=e[0])==null?void 0:s[0])==null?void 0:l.length)||2,r=[],i=qC(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:Wg(t)}}function bee(n){var t;const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Wg(((t=e[0])==null?void 0:t.length)||2)}}function xee(n){var s,l;const e=n.coordinates,t=[],r=((l=(s=e[0])==null?void 0:s[0])==null?void 0:l[0].length)||2,i=CL(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:Wg(r)}}function Mee(n){var s,l;const e=n.coordinates,t=[],r=(l=(s=e[0])==null?void 0:s[0])==null?void 0:l.length,i=qC(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:Wg(r)}}function w6(n,e){n=Ix(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=Iee(n);break}case"LineString":{r=See(n);break}case"Polygon":{r=kee(n,e);break}case"MultiPoint":{r=Bee(n);break}case"MultiLineString":{r=Eee(n);break}case"MultiPolygon":{r=Oee(n,e);break}case"GeometryCollection":{r=wee(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function wee(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return w6(r,e)})}}function See(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Eee(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Bee(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Oee(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Iee(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function kee(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const S6=65536*65536,ZI=1/S6,Tee=12,XI=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),k4=0,ib=1,vv=2,ob=5;class Pee{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){const i=this.readVarint(),s=i>>3,l=this.pos;this.type=i&7,e(s,t,this),this.pos===l&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*S6;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*S6;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,Kee(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Tee&&XI?XI.decode(this.buf.subarray(t,e)):qee(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===vv?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===k4)for(;this.buf[this.pos++]>127;);else if(t===vv)this.pos=this.readVarint()+this.pos;else if(t===ob)this.pos+=4;else if(t===ib)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*ZI),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*ZI),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Ree(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=Vee(this.buf,e,this.pos);const r=this.pos-t;r>=128&&JI(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;const r=this.pos;e(t,this);const i=this.pos-r;i>=128&&JI(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,vv),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,Lee,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,Uee,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,Nee,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,zee,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,jee,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Wee,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Gee,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,Qee,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,Yee,t)}writeBytesField(e,t){this.writeTag(e,vv),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,ob),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,ob),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,ib),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,ib),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,k4),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,k4),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,vv),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,ob),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,ib),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function Kee(n,e,t){const r=t.buf;let i,s;if(s=r[t.pos++],i=(s&112)>>4,s<128||(s=r[t.pos++],i|=(s&127)<<3,s<128)||(s=r[t.pos++],i|=(s&127)<<10,s<128)||(s=r[t.pos++],i|=(s&127)<<17,s<128)||(s=r[t.pos++],i|=(s&127)<<24,s<128)||(s=r[t.pos++],i|=(s&1)<<31,s<128))return v1(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function v1(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function Ree(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Dee(t,r,e),Fee(r,e)}function Dee(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function Fee(n,e){const t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function JI(n,e,t){const r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function Lee(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function Uee(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function zee(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function jee(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function Nee(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function Wee(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function Gee(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function Qee(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function Yee(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function qee(n,e,t){let r="",i=e;for(;i<t;){const s=n[i];let l=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o>t)break;let p,v,x;o===1?s<128&&(l=s):o===2?(p=n[i+1],(p&192)===128&&(l=(s&31)<<6|p&63,l<=127&&(l=null))):o===3?(p=n[i+1],v=n[i+2],(p&192)===128&&(v&192)===128&&(l=(s&15)<<12|(p&63)<<6|v&63,(l<=2047||l>=55296&&l<=57343)&&(l=null))):o===4&&(p=n[i+1],v=n[i+2],x=n[i+3],(p&192)===128&&(v&192)===128&&(x&192)===128&&(l=(s&15)<<18|(p&63)<<12|(v&63)<<6|x&63,(l<=65535||l>=1114112)&&(l=null))),l===null?(l=65533,o=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|l&1023),r+=String.fromCharCode(l),i+=o}return r}function Vee(n,e,t){for(let r=0,i,s;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(s)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,s=i;continue}else i=s-55296<<10|i-56320|65536,s=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):s=i;continue}else s&&(n[t++]=239,n[t++]=191,n[t++]=189,s=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}class $ee extends _U{constructor(e){super(),e=e||{},this.dataProjection=new gx({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:pd,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;const s=e.readVarint()+e.pos;let l=1,o=0,p=0,v=0,x=0,B=0;for(;e.pos<s;){if(!o){const T=e.readVarint();l=T&7,o=T>>3}if(o--,l===1||l===2)p+=e.readSVarint(),v+=e.readSVarint(),l===1&&x>B&&(i.push(x),B=x),r.push(p,v),x+=2;else if(l===7)x>B&&(r.push(r[B],r[B+1]),x+=2);else throw new Error("Invalid command found in the PBF")}x>B&&(i.push(x),B=x)}createFeature_(e,t,r){const i=t.type;if(i===0)return null;let s;const l=t.properties;let o;this.idProperty_?(o=l[this.idProperty_],delete l[this.idProperty_]):o=t.id,l[this.layerName_]=t.layer.name;const p=[],v=[];this.readRawGeometry_(e,t,p,v);const x=ete(i,v.length);if(this.featureClass===pd)s=new this.featureClass(x,p,v,2,l,o),s.transform(r.dataProjection);else{let B;if(x=="Polygon"){const U=aL(p,v);B=U.length>1?new _C(p,"XY",U):new Lm(p,"XY",v)}else B=x==="Point"?new Rg(p,"XY"):x==="LineString"?new Kg(p,"XY"):x==="MultiPoint"?new VC(p,"XY"):x==="MultiLineString"?new CC(p,"XY",v):null;const T=this.featureClass;s=new T,this.geometryName_&&s.setGeometryName(this.geometryName_);const P=Ix(B,!1,r);s.setGeometry(P),o!==void 0&&s.setId(o),s.setProperties(l,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const r=this.layers_;t=this.adaptOptions(t);const i=Ia(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const s=new Pee(e),l=s.readFields(Hee,{}),o=[];for(const p in l){if(r&&!r.includes(p))continue;const v=l[p],x=v?[0,0,v.extent,v.extent]:null;i.setExtent(x);for(let B=0,T=v.length;B<T;++B){const P=Jee(s,v,B),U=this.createFeature_(s,P,t);U!==null&&o.push(U)}}return o}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Hee(n,e,t){if(n===3){const r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(Zee,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Zee(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function Xee(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){const r=t.readVarint()+t.pos;for(;t.pos<r;){const i=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[i]=s}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function Jee(n,e,t){n.pos=e.features[t];const r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(Xee,i,r),i}function ete(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}class tte extends XB{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,l=this.getLayer().getSource(),o=e.viewHints;let p=e.extent;if(t.extent!==void 0&&(p=mp(p,Qp(t.extent,i.projection))),!o[ru.ANIMATING]&&!o[ru.INTERACTING]&&!jg(p))if(l){const v=i.projection,x=l.getImage(p,s,r,v);x&&(this.loadImage(x)?this.image=x:x.getState()===fi.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=FA(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Pg(s,i))return null;const l=this.image.getExtent(),o=this.image.getImage(),p=Ls(l),v=Math.floor(o.width*((i[0]-l[0])/p));if(v<0||v>=o.width)return null;const x=fA(l),B=Math.floor(o.height*((l[3]-i[1])/x));return B<0||B>=o.height?null:this.getImageData(o,v,B)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[l,o]=Array.isArray(s)?s:[s,s],p=r.getPixelRatio(),v=e.layerStatesArray[e.layerIndex],x=e.pixelRatio,B=e.viewState,T=B.center,P=B.resolution,U=x*l/(P*p),j=x*o/(P*p);this.prepareContainer(e,t);const N=this.context.canvas.width,q=this.context.canvas.height,H=this.getRenderContext(e);let oe=!1,te=!0;if(v.extent){const he=Qp(v.extent,B.projection);te=Nu(he,e.extent),oe=te&&!Gp(he,e.extent),oe&&this.clipUnrotated(H,e,he)}const V=r.getImage(),ne=Jp(this.tempTransform,N/2,q/2,U,j,0,p*(i[0]-T[0])/l,p*(T[1]-i[3])/o);this.renderedResolution=o*x/p;const W=V.width*ne[0],ie=V.height*ne[3];if(this.getLayer().getSource().getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,e),te&&W>=.5&&ie>=.5){const he=ne[4],fe=ne[5],Ee=v.opacity;Ee!==1&&(H.save(),H.globalAlpha=Ee),H.drawImage(V,0,0,+V.width,+V.height,he,fe,W,ie),Ee!==1&&H.restore()}return this.postRender(this.context,e),oe&&H.restore(),H.imageSmoothingEnabled=!0,this.container}}class nte extends Dy{constructor(e){e=e||{},super(e)}}class xU extends nte{constructor(e){super(e)}createRenderer(){return new tte(this)}getData(e){return super.getData(e)}}function E6(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const rte=new Error("disposed"),ite=[256,256];class e9 extends JC{constructor(e){const t=Ur.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=E6(this.data_);return e?[e.width,e.height]:ite}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Ur.IDLE&&this.state!==Ur.ERROR)return;this.state=Ur.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Ur.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Ur.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(rte),this.controller_=null),super.disposeInternal()}}let T4;const ly=[];function t9(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function P4(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function ote(){if(T4===void 0){const n=xu(6,6,ly);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",t9(n,4,5,4,0),t9(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;T4=P4(e,0)||P4(e,4)||P4(e,8),$C(n),ly.push(n.canvas)}return T4}function B6(n,e,t,r){const i=Cx(t,e,n);let s=c6(e,r,t);const l=e.getMetersPerUnit();l!==void 0&&(s*=l);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const p=n.getExtent();if(!p||Pg(p,i)){const v=c6(n,s,i)/s;isFinite(v)&&v>0&&(s/=v)}return s}function ste(n,e,t,r){const i=Tf(t);let s=B6(n,e,i,r);return(!isFinite(s)||s<=0)&&eL(t,function(l){return s=B6(n,e,l,r),isFinite(s)&&s>0}),s}function MU(n,e,t,r,i,s,l,o,p,v,x,B,T,P){const U=xu(Math.round(t*n),Math.round(t*e),ly);if(B||(U.imageSmoothingEnabled=!1),p.length===0)return U.canvas;U.scale(t,t);function j(V){return Math.round(V*t)/t}U.globalCompositeOperation="lighter";const N=kf();p.forEach(function(V,ne,W){XF(N,V.extent)});let q;const H=t/r,oe=(B?1:1+Math.pow(2,-24))/H;if(!T||p.length!==1||v!==0){if(q=xu(Math.round(Ls(N)*H),Math.round(fA(N)*H),ly),B||(q.imageSmoothingEnabled=!1),i&&P){const V=(i[0]-N[0])*H,ne=-(i[3]-N[3])*H,W=Ls(i)*H,ie=fA(i)*H;q.rect(V,ne,W,ie),q.clip()}p.forEach(function(V,ne,W){if(V.image.width>0&&V.image.height>0){if(V.clipExtent){q.save();const me=(V.clipExtent[0]-N[0])*H,Me=-(V.clipExtent[3]-N[3])*H,De=Ls(V.clipExtent)*H,xe=fA(V.clipExtent)*H;q.rect(B?me:Math.round(me),B?Me:Math.round(Me),B?De:Math.round(me+De)-Math.round(me),B?xe:Math.round(Me+xe)-Math.round(Me)),q.clip()}const ie=(V.extent[0]-N[0])*H,he=-(V.extent[3]-N[3])*H,fe=Ls(V.extent)*H,Ee=fA(V.extent)*H;q.drawImage(V.image,v,v,V.image.width-2*v,V.image.height-2*v,B?ie:Math.round(ie),B?he:Math.round(he),B?fe:Math.round(ie+fe)-Math.round(ie),B?Ee:Math.round(he+Ee)-Math.round(he)),V.clipExtent&&q.restore()}})}const te=zm(l);return o.getTriangles().forEach(function(V,ne,W){const ie=V.source,he=V.target;let fe=ie[0][0],Ee=ie[0][1],me=ie[1][0],Me=ie[1][1],De=ie[2][0],xe=ie[2][1];const At=j((he[0][0]-te[0])/s),Ze=j(-(he[0][1]-te[1])/s),Xe=j((he[1][0]-te[0])/s),Ne=j(-(he[1][1]-te[1])/s),Se=j((he[2][0]-te[0])/s),Re=j(-(he[2][1]-te[1])/s),He=fe,_t=Ee;fe=0,Ee=0,me-=He,Me-=_t,De-=He,xe-=_t;const Gt=[[me,Me,0,0,Xe-At],[De,xe,0,0,Se-At],[0,0,me,Me,Ne-Ze],[0,0,De,xe,Re-Ze]],yt=oH(Gt);if(!yt)return;if(U.save(),U.beginPath(),ote()||!B){U.moveTo(Xe,Ne);const Tt=4,Le=At-Xe,Pe=Ze-Ne;for(let Be=0;Be<Tt;Be++)U.lineTo(Xe+j((Be+1)*Le/Tt),Ne+j(Be*Pe/(Tt-1))),Be!=Tt-1&&U.lineTo(Xe+j((Be+1)*Le/Tt),Ne+j((Be+1)*Pe/(Tt-1)));U.lineTo(Se,Re)}else U.moveTo(Xe,Ne),U.lineTo(At,Ze),U.lineTo(Se,Re);U.clip(),U.transform(yt[0],yt[2],yt[1],yt[3],At,Ze),U.translate(N[0]-He,N[3]-_t);let Ft;if(q)Ft=q.canvas,U.scale(oe,-oe);else{const Tt=p[0],Le=Tt.extent;Ft=Tt.image,U.scale(Ls(Le)/Ft.width,-fA(Le)/Ft.height)}U.drawImage(Ft,0,0),U.restore()}),q&&($C(q),ly.push(q.canvas)),x&&(U.save(),U.globalCompositeOperation="source-over",U.strokeStyle="black",U.lineWidth=1,o.getTriangles().forEach(function(V,ne,W){const ie=V.target,he=(ie[0][0]-te[0])/s,fe=-(ie[0][1]-te[1])/s,Ee=(ie[1][0]-te[0])/s,me=-(ie[1][1]-te[1])/s,Me=(ie[2][0]-te[0])/s,De=-(ie[2][1]-te[1])/s;U.beginPath(),U.moveTo(Ee,me),U.lineTo(he,fe),U.lineTo(Me,De),U.closePath(),U.stroke()}),U.restore()),U.canvas}const ate=10,n9=.25;class wU{constructor(e,t,r,i,s,l,o){this.sourceProj_=e,this.targetProj_=t;let p={};const v=o?NH(oe=>FA(o,Cx(oe,this.targetProj_,this.sourceProj_))):gC(this.targetProj_,this.sourceProj_);this.transformInv_=function(oe){const te=oe[0]+"/"+oe[1];return p[te]||(p[te]=v(oe)),p[te]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Ls(i)>=Ls(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ls(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ls(this.targetProj_.getExtent()):null;const x=zm(r),B=fx(r),T=hx(r),P=dx(r),U=this.transformInv_(x),j=this.transformInv_(B),N=this.transformInv_(T),q=this.transformInv_(P),H=ate+(l?Math.max(0,Math.ceil(Math.log2(i6(r)/(l*l*256*256)))):0);if(this.addQuad_(x,B,T,P,U,j,N,q,H),this.wrapsXInSource_){let oe=1/0;this.triangles_.forEach(function(te,V,ne){oe=Math.min(oe,te.source[0][0],te.source[1][0],te.source[2][0])}),this.triangles_.forEach(te=>{if(Math.max(te.source[0][0],te.source[1][0],te.source[2][0])-oe>this.sourceWorldWidth_/2){const V=[[te.source[0][0],te.source[0][1]],[te.source[1][0],te.source[1][1]],[te.source[2][0],te.source[2][1]]];V[0][0]-oe>this.sourceWorldWidth_/2&&(V[0][0]-=this.sourceWorldWidth_),V[1][0]-oe>this.sourceWorldWidth_/2&&(V[1][0]-=this.sourceWorldWidth_),V[2][0]-oe>this.sourceWorldWidth_/2&&(V[2][0]-=this.sourceWorldWidth_);const ne=Math.min(V[0][0],V[1][0],V[2][0]);Math.max(V[0][0],V[1][0],V[2][0])-ne<this.sourceWorldWidth_/2&&(te.source=V)}})}p={}}addTriangle_(e,t,r,i,s,l){this.triangles_.push({source:[i,s,l],target:[e,t,r]})}addQuad_(e,t,r,i,s,l,o,p,v){const x=n6([s,l,o,p]),B=this.sourceWorldWidth_?Ls(x)/this.sourceWorldWidth_:null,T=this.sourceWorldWidth_,P=this.sourceProj_.canWrapX()&&B>.5&&B<1;let U=!1;if(v>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const N=n6([e,t,r,i]);U=Ls(N)/this.targetWorldWidth_>n9||U}!P&&this.sourceProj_.isGlobal()&&B&&(U=B>n9||U)}if(!U&&this.maxSourceExtent_&&isFinite(x[0])&&isFinite(x[1])&&isFinite(x[2])&&isFinite(x[3])&&!Nu(x,this.maxSourceExtent_))return;let j=0;if(!U&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(p[0])||!isFinite(p[1]))){if(v>0)U=!0;else if(j=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(p[0])||!isFinite(p[1])?1:0),j!=1&&j!=2&&j!=4&&j!=8)return}if(v>0){if(!U){const N=[(e[0]+r[0])/2,(e[1]+r[1])/2],q=this.transformInv_(N);let H;P?H=(Og(s[0],T)+Og(o[0],T))/2-Og(q[0],T):H=(s[0]+o[0])/2-q[0];const oe=(s[1]+o[1])/2-q[1];U=H*H+oe*oe>this.errorThresholdSquared_}if(U){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const N=[(t[0]+r[0])/2,(t[1]+r[1])/2],q=this.transformInv_(N),H=[(i[0]+e[0])/2,(i[1]+e[1])/2],oe=this.transformInv_(H);this.addQuad_(e,t,N,H,s,l,q,oe,v-1),this.addQuad_(H,N,r,i,oe,q,o,p,v-1)}else{const N=[(e[0]+t[0])/2,(e[1]+t[1])/2],q=this.transformInv_(N),H=[(r[0]+i[0])/2,(r[1]+i[1])/2],oe=this.transformInv_(H);this.addQuad_(e,N,H,i,s,q,oe,p,v-1),this.addQuad_(N,t,r,H,q,l,o,oe,v-1)}return}}if(P){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(j&11)==0&&this.addTriangle_(e,r,i,s,o,p),(j&14)==0&&this.addTriangle_(e,r,t,s,o,l),j&&((j&13)==0&&this.addTriangle_(t,i,e,l,p,s),(j&7)==0&&this.addTriangle_(t,i,r,l,p,o))}calculateSourceExtent(){const e=kf();return this.triangles_.forEach(function(t,r,i){const s=t.source;Xv(e,s[0]),Xv(e,s[1]),Xv(e,s[2])}),e}getTriangles(){return this.triangles_}}const SU=.5;class EU extends JC{constructor(e,t,r,i,s,l,o,p,v,x,B,T){super(s,Ur.IDLE,T),this.renderEdges_=B!==void 0?B:!1,this.pixelRatio_=o,this.gutter_=p,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=l||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const P=i.getTileCoordExtent(this.wrappedTileCoord_),U=this.targetTileGrid_.getExtent();let j=this.sourceTileGrid_.getExtent();const N=U?mp(P,U):P;if(i6(N)===0){this.state=Ur.EMPTY;return}const q=e.getExtent();q&&(j?j=mp(j,q):j=q);const H=i.getResolution(this.wrappedTileCoord_[0]),oe=ste(e,r,N,H);if(!isFinite(oe)||oe<=0){this.state=Ur.EMPTY;return}const te=x!==void 0?x:SU;if(this.triangulation_=new wU(e,r,N,j,oe*te,H),this.triangulation_.getTriangles().length===0){this.state=Ur.EMPTY;return}this.sourceZ_=t.getZForResolution(oe);let V=this.triangulation_.calculateSourceExtent();if(j&&(e.canWrapX()?(V[1]=bu(V[1],j[1],j[3]),V[3]=bu(V[3],j[1],j[3])):V=mp(V,j)),!i6(V))this.state=Ur.EMPTY;else{let ne=0,W=0;e.canWrapX()&&(ne=Ls(q),W=Math.floor((V[0]-q[0])/ne)),rL(V.slice(),e,!0).forEach(he=>{const fe=t.getTileRangeForExtentAndZ(he,this.sourceZ_);for(let Ee=fe.minX;Ee<=fe.maxX;Ee++)for(let me=fe.minY;me<=fe.maxY;me++){const Me=v(this.sourceZ_,Ee,me,o);if(Me){const De=W*ne;this.sourceTiles_.push({tile:Me,offset:De})}}++W}),this.sourceTiles_.length===0&&(this.state=Ur.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var i;const r=t.tile;if(r&&r.getState()==Ur.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const l=(i=this.clipExtent_)==null?void 0:i.slice();l&&(l[0]+=t.offset,l[2]+=t.offset),e.push({extent:s,clipExtent:l,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Ur.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],l=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),p=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=MU(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),l,p,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Ur.LOADED}this.changed()}load(){if(this.state==Ur.IDLE){this.state=Ur.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==Ur.IDLE||r==Ur.LOADING){e++;const i=Fs(t,so.CHANGE,s=>{const l=t.getState();(l==Ur.LOADED||l==Ur.ERROR||l==Ur.EMPTY)&&(gl(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Ur.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(gl),this.sourcesListenerKeys_=null}release(){this.canvas_&&($C(this.canvas_.getContext("2d")),ly.push(this.canvas_),this.canvas_=null),super.release()}}class lte{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof jC&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return sa(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return sa(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){sa(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function C2(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function ute(n,e,t){return n+"/"+e+"/"+t}function Ate(n){return cte(n[0],n[1],n[2])}function cte(n,e,t){return(e<<n)+t}function dte(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}function K4(n,e,t,r){return`${n},${ute(e,t,r)}`}function R4(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function hte(n,e,t){const r=n[t];return r?r.delete(e):!1}function r9(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=mp(e,Qp(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=mp(e,i))}return e}class BU extends XB{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=kf(),this.tempTileRange_=new dO(0,0,0,0),this.tempTileCoord_=C2(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new lte(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),p=K4(o.getKey(),e,t,r);let v;if(s.containsKey(p))v=s.get(p);else{if(v=o.getTile(e,t,r,i.pixelRatio,i.viewState.projection),!v)return null;s.set(p,v)}return v}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=FA(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Pg(s,i))return null;const l=t.viewState,o=r.getRenderSource(),p=o.getTileGridForProjection(l.projection),v=o.getTilePixelRatio(t.pixelRatio);for(let x=p.getZForResolution(l.resolution);x>=p.getMinZoom();--x){const B=p.getTileCoordForCoordAndZ(i,x),T=this.getTile(x,B[1],B[2],t);if(!T||T.getState()!==Ur.LOADED)continue;const P=p.getOrigin(x),U=md(p.getTileSize(x)),j=p.getResolution(x);let N;if(T instanceof aU||T instanceof EU)N=T.getImage();else if(T instanceof e9){if(N=E6(T.getData()),!N)continue}else continue;const q=Math.floor(v*((i[0]-P[0])/j-B[1]*U[0])),H=Math.floor(v*((P[1]-i[1])/j-B[2]*U[1])),oe=Math.round(v*o.getGutterForProjection(l.projection));return this.getImageData(N,q+oe,H+oe)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==r&&(this.renderedRevision_=r,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=r,!0}enqueueTiles(e,t,r,i,s){const l=e.viewState,o=this.getLayer(),p=o.getRenderSource(),v=p.getTileGridForProjection(l.projection),x=Ro(p);x in e.wantedTiles||(e.wantedTiles[x]={});const B=e.wantedTiles[x],T=o.getMapInternal(),P=Math.max(r-s,v.getMinZoom(),v.getZForResolution(Math.min(o.getMaxResolution(),T?T.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):v.getResolution(0)),p.zDirection)),U=l.rotation,j=U?tL(l.center,l.resolution,U,e.size):void 0;for(let N=r;N>=P;--N){const q=v.getTileRangeForExtentAndZ(t,N,this.tempTileRange_),H=v.getResolution(N);for(let oe=q.minX;oe<=q.maxX;++oe)for(let te=q.minY;te<=q.maxY;++te){if(U&&!v.tileCoordIntersectsViewport([N,oe,te],j))continue;const V=this.getTile(N,oe,te,e);if(!V||!R4(i,V,N))continue;const W=V.getKey();if(B[W]=!0,V.getState()===Ur.IDLE&&!e.tileQueue.isKeyQueued(W)){const ie=C2(N,oe,te,this.tempTileCoord_);e.tileQueue.enqueue([V,x,v.getTileCoordCenter(ie),H])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],l=e[2],o=this.getStaleKeys();for(let p=0;p<o.length;++p){const v=K4(o[p],i,s,l);if(r.containsKey(v)){const x=r.peek(v);if(x.getState()===Ur.LOADED)return x.endTransition(Ro(this)),R4(t,x,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let l=!0;const o=this.tileCache_,v=this.getLayer().getRenderSource().getKey();for(let x=s.minX;x<=s.maxX;++x)for(let B=s.minY;B<=s.maxY;++B){const T=K4(v,r,x,B);let P=!1;if(o.containsKey(T)){const U=o.peek(T);U.getState()===Ur.LOADED&&(R4(i,U,r),P=!0)}P||(l=!1)}return l}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,l=i.resolution,o=i.center,p=e.pixelRatio,v=this.getLayer(),x=v.getSource(),B=x.getTileGridForProjection(s),T=B.getZForResolution(l,x.zDirection),P=B.getResolution(T),U=x.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==U&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=U):this.renderedSourceKey_=U;let j=e.extent;const N=x.getTilePixelRatio(p);this.prepareContainer(e,t);const q=this.context.canvas.width,H=this.context.canvas.height,oe=r.extent&&Qp(r.extent);oe&&(j=mp(j,Qp(r.extent)));const te=P*q/2/N,V=P*H/2/N,ne=[o[0]-te,o[1]-V,o[0]+te,o[1]+V],W={};this.renderedTiles.length=0;const ie=v.getPreload();if(e.nextExtent){const Xe=B.getZForResolution(i.nextResolution,x.zDirection),Ne=r9(e,e.nextExtent);this.enqueueTiles(e,Ne,Xe,W,ie)}const he=r9(e,j);if(this.enqueueTiles(e,he,T,W,0),ie>0&&setTimeout(()=>{this.enqueueTiles(e,he,T-1,W,ie-1)},0),!(T in W))return this.container;const fe=Ro(this),Ee=e.time;for(const Xe of W[T]){const Ne=Xe.getState();if(Ne===Ur.EMPTY)continue;const Se=Xe.tileCoord;if(Ne===Ur.LOADED&&Xe.getAlpha(fe,Ee)===1){Xe.endTransition(fe);continue}if(Ne!==Ur.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Se,W)){hte(W,Xe,T),e.animate=!0;continue}if(this.findAltTiles_(B,Se,T+1,W))continue;const _t=B.getMinZoom();for(let Gt=T-1;Gt>=_t&&!this.findAltTiles_(B,Se,Gt,W);--Gt);}const me=P/l*p/N,Me=this.getRenderContext(e);Jp(this.tempTransform,q/2,H/2,me,me,0,-q/2,-H/2),r.extent&&this.clipUnrotated(Me,e,oe),x.getInterpolate()||(Me.imageSmoothingEnabled=!1),this.preRender(Me,e);const De=Object.keys(W).map(Number);De.sort(Tm);let xe;const At=[],Ze=[];for(let Xe=De.length-1;Xe>=0;--Xe){const Ne=De[Xe],Se=x.getTilePixelSize(Ne,p,s),He=B.getResolution(Ne)/P,_t=Se[0]*He*me,Gt=Se[1]*He*me,yt=B.getTileCoordForCoordAndZ(zm(ne),Ne),Ft=B.getTileCoordExtent(yt),Tt=FA(this.tempTransform,[N*(Ft[0]-ne[0])/P,N*(ne[3]-Ft[3])/P]),Le=N*x.getGutterForProjection(s);for(const Pe of W[Ne]){if(Pe.getState()!==Ur.LOADED)continue;const Be=Pe.tileCoord,it=yt[1]-Be[1],Ct=Math.round(Tt[0]-(it-1)*_t),ft=yt[2]-Be[2],Lt=Math.round(Tt[1]-(ft-1)*Gt),Zt=Math.round(Tt[0]-it*_t),Rt=Math.round(Tt[1]-ft*Gt),_n=Ct-Zt,qn=Lt-Rt,rn=De.length===1;let ar=!1;xe=[Zt,Rt,Zt+_n,Rt,Zt+_n,Rt+qn,Zt,Rt+qn];for(let kn=0,mn=At.length;kn<mn;++kn)if(!rn&&Ne<Ze[kn]){const zn=At[kn];Nu([Zt,Rt,Zt+_n,Rt+qn],[zn[0],zn[3],zn[4],zn[7]])&&(ar||(Me.save(),ar=!0),Me.beginPath(),Me.moveTo(xe[0],xe[1]),Me.lineTo(xe[2],xe[3]),Me.lineTo(xe[4],xe[5]),Me.lineTo(xe[6],xe[7]),Me.moveTo(zn[6],zn[7]),Me.lineTo(zn[4],zn[5]),Me.lineTo(zn[2],zn[3]),Me.lineTo(zn[0],zn[1]),Me.clip())}At.push(xe),Ze.push(Ne),this.drawTile(Pe,e,Zt,Rt,_n,qn,Le,rn),ar&&Me.restore(),this.renderedTiles.unshift(Pe),this.updateUsedTiles(e.usedTiles,x,Pe)}}if(this.renderedResolution=P,this.extentChanged=!this.renderedExtent_||!Fm(this.renderedExtent_,ne),this.renderedExtent_=ne,this.renderedPixelRatio=p,this.postRender(this.context,e),r.extent&&Me.restore(),Me.imageSmoothingEnabled=!0,this.renderComplete){const Xe=(Ne,Se)=>{const Re=Ro(x),He=Se.wantedTiles[Re],_t=He?Object.keys(He).length:0;this.updateCacheSize(_t),this.tileCache_.expireCache()};e.postRenderFunctions.push(Xe)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,l,o,p){let v;if(e instanceof e9){if(v=E6(e.getData()),!v)throw new Error("Rendering array data is not yet supported")}else v=this.getTileImage(e);if(!v)return;const x=this.getRenderContext(t),B=Ro(this),T=t.layerStatesArray[t.layerIndex],P=T.opacity*(p?e.getAlpha(B,t.time):1),U=P!==x.globalAlpha;U&&(x.save(),x.globalAlpha=P),x.drawImage(v,o,o,v.width-2*o,v.height-2*o,r,i,s,l),U&&x.restore(),P!==T.opacity?t.animate=!0:p&&e.endTransition(B)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=Ro(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const S0={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class fte extends Dy{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(S0.PRELOAD)}setPreload(e){this.set(S0.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(S0.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(S0.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class OU extends fte{constructor(e){super(e)}createRenderer(){return new BU(this,{cacheSize:this.getCacheSize()})}}const pte={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},i9={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class mte extends BU{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=yh(),this.tileClipContexts_=null}drawTile(e,t,r,i,s,l,o,p){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,s,l,o,p)}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);if(!s)return null;const o=i.viewState.resolution,p=i.viewHints;return(!(p[ru.ANIMATING]||p[ru.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=o),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){const i=this.getLayer(),s=i.getRevision(),l=i.getRenderOrder()||null,o=e.wantedResolution,p=e.getReplayState(i);if(!p.dirty&&p.renderedResolution===o&&p.renderedRevision==s&&p.renderedRenderOrder==l)return;const v=i.getSource(),x=!!i.getDeclutter(),B=v.getTileGrid(),P=v.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),U=v.getSourceTiles(t,r,e),j=Ro(i);delete e.hitDetectionImageData[j],e.executorGroups[j]=[],p.dirty=!1;for(let N=0,q=U.length;N<q;++N){const H=U[N];if(H.getState()!=Ur.LOADED)continue;const oe=H.tileCoord,te=B.getTileCoordExtent(oe),V=mp(P,te),ne=I0(V,i.getRenderBuffer()*o,this.tempExtent),W=Fm(te,V)?null:ne,ie=new YL(0,V,o,t),he=g6(o,t),fe=function(xe,At){let Ze;const Xe=xe.getStyleFunction()||i.getStyleFunction();if(Xe&&(Ze=Xe(xe,o)),Ze){const Ne=this.renderFeature(xe,he,Ze,ie,x,At);p.dirty=p.dirty||Ne}},Ee=H.getFeatures();l&&l!==p.renderedRenderOrder&&Ee.sort(l);for(let xe=0,At=Ee.length;xe<At;++xe){const Ze=Ee[xe];(!W||Nu(W,Ze.getGeometry().getExtent()))&&fe.call(this,Ze,xe)}const me=ie.finish(),Me=i.getRenderMode()!=="vector"&&x&&U.length===1?null:V,De=new qL(Me,o,t,v.getOverlaps(),me,i.getRenderBuffer(),!0);e.executorGroups[j].push(De)}p.renderedRevision=s,p.renderedRenderOrder=l,p.renderedResolution=o}forEachFeatureAtCoordinate(e,t,r,i,s){var oe,te;const l=t.viewState.resolution,o=t.viewState.rotation;r=r??0;const p=this.getLayer(),x=p.getSource().getTileGridForProjection(t.viewState.projection),B=n6([e]);I0(B,l*r,B);const T={},P=function(V,ne,W){let ie=V.getId();ie===void 0&&(ie=Ro(V));const he=T[ie];if(he){if(he!==!0&&W<he.distanceSq){if(W===0)return T[ie]=!0,s.splice(s.lastIndexOf(he),1),i(V,p,ne);he.geometry=ne,he.distanceSq=W}}else{if(W===0)return T[ie]=!0,i(V,p,ne);s.push(T[ie]={feature:V,layer:p,geometry:ne,distanceSq:W,callback:i})}},U=this.renderedTiles,j=Ro(p),N=p.getDeclutter(),q=N?(te=(oe=t.declutter)==null?void 0:oe[N])==null?void 0:te.all().map(V=>V.value):null;let H;e:for(let V=0,ne=U.length;V<ne;++V){const W=U[V],ie=x.getTileCoordExtent(W.wrappedTileCoord);if(!Nu(ie,B))continue;const he=W.executorGroups[j];for(let fe=0,Ee=he.length;fe<Ee;++fe)if(H=he[fe].forEachFeatureAtCoordinate(e,l,o,r,P,q),H)break e}return H}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{const i=this.getLayer(),s=i.getSource(),l=this.renderedProjection,o=l.getExtent(),p=this.renderedResolution,v=s.getTileGridForProjection(l),x=FA(this.renderedPixelToCoordinateTransform_,e.slice()),B=v.getTileCoordForCoordAndResolution(x,p).toString(),T=this.renderedTiles.find(oe=>oe.tileCoord.toString()===B&&oe.getState()===Ur.LOADED);if(!T||T.loadingSourceTiles>0){t([]);return}s.getWrapX()&&l.canWrapX()&&!Gp(o,v.getTileCoordExtent(T.tileCoord))&&TB(x,l);const P=Ro(i),U=v.getTileCoordExtent(T.wrappedTileCoord),j=zm(U),N=[(x[0]-j[0])/p,(j[1]-x[1])/p],q=T.getSourceTiles().reduce((oe,te)=>oe.concat(te.getFeatures()),[]);let H=T.hitDetectionImageData[P];if(!H){const oe=md(v.getTileSize(v.getZForResolution(p,s.zDirection))),te=this.renderedRotation_,V=[this.getRenderTransform(v.getTileCoordCenter(T.wrappedTileCoord),p,0,Vh,oe[0]*Vh,oe[1]*Vh,0)];H=VL(oe,V,q,i.getStyleFunction(),v.getTileCoordExtent(T.wrappedTileCoord),T.getReplayState(i).renderedResolution,te),T.hitDetectionImageData[P]=H}t($L(N,q,H))})}getFeaturesInExtent(e){const t=[],r=this.getTileCache();if(r.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),l=s.getZForResolution(this.renderedResolution),o={};return r.forEach(p=>{if(p.tileCoord[0]!==l||p.getState()!==Ur.LOADED)return;const v=p.getSourceTiles();for(let x=0,B=v.length;x<B;++x){const T=v[x],P=T.getKey();if(P in o)continue;o[P]=!0;const U=T.tileCoord;if(Nu(e,s.getTileCoordExtent(U))){const j=T.getFeatures();if(j)for(let N=0,q=j.length;N<q;++N){const H=j[N],oe=H.getGeometry();Nu(e,oe.getExtent())&&t.push(H)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var T;const r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;const s=e.viewHints,l=!(s[ru.ANIMATING]||s[ru.INTERACTING]),o=[this.context.canvas.width,this.context.canvas.height],p=this.getLayer().getDeclutter(),v=p?(T=e.declutter)==null?void 0:T[p]:void 0,x=Ro(this.getLayer()),B=this.renderedTiles;for(let P=0,U=B.length;P<U;++P){const j=B[P],N=j.executorGroups[x];if(N)for(let q=N.length-1;q>=0;--q)N[q].execute(this.context,o,this.getTileRenderTransform(j,e),e.viewState.rotation,l,f2,v)}r.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,r=Ro(this.getLayer()),i=t.reduce((p,v,x)=>(v.executorGroups[r].forEach(B=>p.push({executorGroup:B,index:x})),p),[]),s=i.map(({executorGroup:p})=>p.getDeferredZIndexContexts()),l={};for(let p=0,v=i.length;p<v;++p){const x=i[p].executorGroup.getDeferredZIndexContexts();for(const B in x)l[B]=!0}Object.keys(l).map(Number).sort(Tm).forEach(p=>{s.forEach((v,x)=>{v[p]&&(v[p].forEach(B=>{const{executorGroup:T,index:P}=i[x],U=T.getRenderedContext(),j=U.globalAlpha;U.globalAlpha=this.renderedOpacity_;const N=this.tileClipContexts_[P];N&&N.draw(U),B.draw(U),N&&U.restore(),U.globalAlpha=j,B.clear()}),v[p].length=0)})})}getTileRenderTransform(e,t){const r=t.pixelRatio,i=t.viewState,s=i.center,l=i.resolution,o=i.rotation,p=t.size,v=Math.round(p[0]*r),x=Math.round(p[1]*r),T=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),P=e.tileCoord,U=T.getTileCoordExtent(e.wrappedTileCoord),j=T.getTileCoordExtent(P,this.tempExtent)[0]-U[0];return LB(s4(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(s,l,o,r,v,x,j))}postRender(e,t){var V;const r=t.viewHints,i=!(r[ru.ANIMATING]||r[ru.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),l=s.getRenderMode(),o=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const p=s.getDeclutter(),v=p?i9[l].filter(ne=>!f2.includes(ne)):i9[l],x=t.viewState,B=x.rotation,T=s.getSource(),U=T.getTileGridForProjection(x.projection).getZForResolution(x.resolution,T.zDirection),j=this.renderedTiles,N=[],q=[],H=[],oe=Ro(s);let te=!0;for(let ne=j.length-1;ne>=0;--ne){const W=j[ne];te=te&&!W.getReplayState(s).dirty;const ie=W.executorGroups[oe].filter(xe=>xe.hasExecutors(v));if(ie.length===0)continue;const he=this.getTileRenderTransform(W,t),fe=W.tileCoord[0];let Ee=!1;const me=ie[0].getClipCoords(he);let Me=e,De;if(me){De=new ZB,Me=De.getContext();for(let xe=0,At=N.length;xe<At;++xe)if(U!==fe&&fe<q[xe]){const Ze=N[xe];Nu([me[0],me[3],me[4],me[7]],[Ze[0],Ze[3],Ze[4],Ze[7]])&&(Ee||(Me.save(),Ee=!0),Me.beginPath(),Me.moveTo(me[0],me[1]),Me.lineTo(me[2],me[3]),Me.lineTo(me[4],me[5]),Me.lineTo(me[6],me[7]),Me.moveTo(Ze[6],Ze[7]),Me.lineTo(Ze[4],Ze[5]),Me.lineTo(Ze[2],Ze[3]),Me.lineTo(Ze[0],Ze[1]),Me.clip())}N.push(me),q.push(fe)}for(let xe=0,At=ie.length;xe<At;++xe)ie[xe].execute(e,[e.canvas.width,e.canvas.height],he,B,i,v,(V=t.declutter)==null?void 0:V[p]);Ee&&(Me===e?Me.restore():H[ne]=De)}e.globalAlpha=o,this.ready=te,this.tileClipContexts_=H,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,s,l){if(!r)return!1;let o=!1;if(Array.isArray(r))for(let p=0,v=r.length;p<v;++p)o=d2(i,e,r[p],t,this.boundHandleStyleImageChange_,void 0,s,l)||o;else o=d2(i,e,r,t,this.boundHandleStyleImageChange_,void 0,s,l);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const r=e.getReplayState(t),i=t.getRevision(),s=e.wantedResolution;return r.renderedTileResolution!==s||r.renderedTileRevision!==i}renderTileImage_(e,t){const r=this.getLayer(),i=e.getReplayState(r),s=r.getRevision(),l=e.executorGroups[Ro(r)];i.renderedTileRevision=s;const o=e.wrappedTileCoord,p=o[0],v=r.getSource();let x=t.pixelRatio;const T=t.viewState.projection,P=v.getTileGridForProjection(T),U=P.getResolution(e.tileCoord[0]),j=t.pixelRatio/e.wantedResolution*U,N=P.getResolution(p),q=e.getContext();x=Math.round(Math.max(x,j/x));const H=v.getTilePixelSize(p,x,T);q.canvas.width=H[0],q.canvas.height=H[1];const oe=x/j;if(oe!==1){const W=oI(this.tmpTransform_);s4(W,oe,oe),q.setTransform.apply(q,W)}const te=P.getTileCoordExtent(o,this.tempExtent),V=j/N,ne=oI(this.tmpTransform_);s4(ne,V,-V),qH(ne,-te[0],-te[3]);for(let W=0,ie=l.length;W<ie;++W)l[W].execute(q,[q.canvas.width*oe,q.canvas.height*oe],ne,0,!0,pte[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class eC extends sO{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;const i=e.renderMode||"hybrid";sa(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new mte(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(S0.PRELOAD)}getUseInterimTilesOnError(){return this.get(S0.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(S0.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(S0.USE_INTERIM_TILES_ON_ERROR,e)}}function O6(n){return Array.isArray(n)?Math.min(...n):n}class gte extends VB{constructor(e,t,r,i,s,l,o){let p=e.getExtent();p&&e.canWrapX()&&(p=p.slice(),p[0]=-1/0,p[2]=1/0);let v=t.getExtent();v&&t.canWrapX()&&(v=v.slice(),v[0]=-1/0,v[2]=1/0);const x=v?mp(r,v):r,B=Tf(x),T=B6(e,t,B,i),P=SU,U=new wU(e,t,x,p,T*P,i),j=U.calculateSourceExtent(),N=jg(j)?null:l(j,T,s),q=N?fi.IDLE:fi.EMPTY,H=N?N.getPixelRatio():1;super(r,i,H,q),this.targetProj_=t,this.maxSourceExtent_=p,this.triangulation_=U,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=N,this.sourcePixelRatio_=H,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==fi.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==fi.LOADED){const t=Ls(this.targetExtent_)/this.targetResolution_,r=fA(this.targetExtent_)/this.targetResolution_;this.canvas_=MU(t,r,this.sourcePixelRatio_,O6(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==fi.IDLE){this.state=fi.LOADING,this.changed();const e=this.sourceImage_.getState();e==fi.LOADED||e==fi.ERROR?this.reproject_():(this.sourceListenerKey_=Fs(this.sourceImage_,so.CHANGE,t=>{const r=this.sourceImage_.getState();(r==fi.LOADED||r==fi.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){gl(this.sourceListenerKey_),this.sourceListenerKey_=null}}const sb=4,D4={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class yte extends vp{constructor(e,t){super(e),this.image=t}}class IU extends Ky{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=ux(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||P0(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&P0(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&Fm(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new gte(s,i,e,t,r,(l,o,p)=>this.getImageInternal(l,o,p,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=vte(e,t,r,1),l=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Gp(this.wantedExtent_,s)||Gp(this.image.getExtent(),s))&&(this.wantedResolution_&&O6(this.wantedResolution_)===l||O6(this.image.getResolution())===l)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=l,this.image=new VB(s,l,r,this.loader),this.image.addEventListener(so.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case fi.LOADING:this.loading=!0,r=D4.IMAGELOADSTART;break;case fi.LOADED:this.loading=!1,r=D4.IMAGELOADEND;break;case fi.ERROR:this.loading=!1,r=D4.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new yte(r,t))}}function vte(n,e,t,r){const i=e/t,s=Tf(n),l=b0(Ls(n)/i,sb),o=b0(fA(n)/i,sb),p=b0((r-1)*l/2,sb),v=l+2*p,x=b0((r-1)*o/2,sb),B=o+2*x;return t2(s,i,0,[v,B])}const C1=[0,0,0],f0=5;class kx{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,sa(Y$(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,sa(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=zm(r)),sa(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,sa(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:iO,sa(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const l=new dO(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);l.minX=Math.max(o.minX,l.minX),l.maxX=Math.min(o.maxX,l.maxX),l.minY=Math.max(o.minY,l.minY),l.maxY=Math.min(o.maxY,l.maxY)}return l}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,l=i.maxX;s<=l;++s)for(let o=i.minY,p=i.maxY;o<=p;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,l,o,p=null,v=e[0]-1;for(this.zoomFactor_===2?(l=e[1],o=e[2]):p=this.getTileCoordExtent(e,i);v>=this.minZoom;){if(l!==void 0&&o!==void 0?(l=Math.floor(l/2),o=Math.floor(o/2),s=g1(l,l,o,o,r)):s=this.getTileRangeForExtentAndZ(p,v,r),t(v,s))return!0;--v}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,l=e[2]*2;return g1(s,s+1,l,l+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],l=e[2];if(t===i)return g1(s,l,s,l,r);if(this.zoomFactor_){const p=Math.pow(this.zoomFactor_,t-i),v=Math.floor(s*p),x=Math.floor(l*p);if(t<i)return g1(v,v,x,x,r);const B=Math.floor(p*(s+1))-1,T=Math.floor(p*(l+1))-1;return g1(v,B,x,T,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,C1);const i=C1[1],s=C1[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,C1);const l=C1[1],o=C1[2];return g1(i,l,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=md(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=md(this.getTileSize(e[0]),this.tmpSize_),l=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,p=l+s[0]*i,v=o+s[1]*i;return Dm(l,o,p,v,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const l=this.getZForResolution(r),o=r/this.getResolution(l),p=this.getOrigin(l),v=md(this.getTileSize(l),this.tmpSize_);let x=o*(e-p[0])/r/v[0],B=o*(p[1]-t)/r/v[1];return i?(x=b0(x,f0)-1,B=b0(B,f0)-1):(x=Q_(x,f0),B=Q_(B,f0)),C2(l,x,B,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const l=this.getOrigin(r),o=this.getResolution(r),p=md(this.getTileSize(r),this.tmpSize_);let v=(e-l[0])/o/p[0],x=(l[1]-t)/o/p[1];return i?(v=b0(v,f0)-1,x=b0(x,f0)-1):(v=Q_(v,f0),x=Q_(x,f0)),C2(r,v,x,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=ux(this.resolutions_,e,t||0);return bu(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return ML(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function kU(n){let e=n.getDefaultTileGrid();return e||(e=bte(n),n.setDefaultTileGrid(e)),e}function Cte(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=Tx(t);if(!Pg(s,i)){const l=Ls(s),o=Math.ceil((s[0]-i[0])/l);return i[0]+=l*o,n.getTileCoordForCoordAndZ(i,r)}return e}function _te(n,e,t,r){r=r!==void 0?r:"top-left";const i=TU(n,e,t);return new kx({extent:n,origin:X$(n,r),resolutions:i,tileSize:t})}function yO(n){const e=n||{},t=e.extent||Ia("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:TU(t,e.maxZoom,e.tileSize,e.maxResolution)};return new kx(r)}function TU(n,e,t,r){e=e!==void 0?e:oU,t=md(t!==void 0?t:iO);const i=fA(n),s=Ls(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const l=e+1,o=new Array(l);for(let p=0;p<l;++p)o[p]=r/Math.pow(2,p);return o}function bte(n,e,t,r){const i=Tx(n);return _te(i,e,t,r)}function Tx(n){n=Ia(n);let e=n.getExtent();if(!e){const t=180*D0.degrees/n.getMetersPerUnit();e=Dm(-t,-t,t,t)}return e}class PU extends Ky{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&md(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Ro(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s){return go()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:kU(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),l=md(i.getTileSize(e),this.tmpSize);return s==1?l:PZ(l,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=Cte(i,e,r)),dte(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class xte extends vp{constructor(e,t){super(e),this.tile=t}}function KU(n){return function(e){const t=e.buffers,r=e.meta,i=e.imageOps,s=e.width,l=e.height,o=t.length,p=t[0].byteLength;if(i){const T=new Array(o);for(let U=0;U<o;++U)T[U]=new ImageData(new Uint8ClampedArray(t[U]),s,l);return n(T,r).data.buffer}const v=new Uint8ClampedArray(p),x=new Array(o),B=new Array(o);for(let T=0;T<o;++T)x[T]=new Uint8ClampedArray(t[T]),B[T]=[0,0,0,0];for(let T=0;T<p;T+=4){for(let U=0;U<o;++U){const j=x[U];B[U][0]=j[T],B[U][1]=j[T+1],B[U][2]=j[T+2],B[U][3]=j[T+3]}const P=n(B,r);v[T]=P[0],v[T+1]=P[1],v[T+2]=P[2],v[T+3]=P[3]}return v.buffer}}function Mte(n,e){const r=Object.keys(n.lib||{}).map(function(s){return"const "+s+" = "+n.lib[s].toString()+";"}).concat(["const __minion__ = ("+KU.toString()+")(",n.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(r.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return i.addEventListener("message",e),i}function wte(n,e){const t=KU(n.operation);let r=!1;return{postMessage:function(i){setTimeout(function(){r||e({data:{buffer:t(i),meta:i.meta}})},0)},terminate:function(){r=!0}}}class Ste extends jC{constructor(e){super(),this.imageOps_=!!e.imageOps;let t;e.threads===0?t=0:this.imageOps_?t=1:t=e.threads||1;const r=new Array(t);if(t)for(let i=0;i<t;++i)r[i]=Mte(e,this.onWorkerMessage_.bind(this,i));else r[0]=wte(e,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=e.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(e,t,r){this.enqueue_({inputs:e,meta:t,callback:r}),this.dispatch_()}enqueue_(e){for(this.queue_.push(e);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const e=this.queue_.shift();this.job_=e;const t=e.inputs[0].width,r=e.inputs[0].height,i=e.inputs.map(function(p){return p.data.buffer}),s=this.workers_.length;if(this.running_=s,s===1){this.workers_[0].postMessage({buffers:i,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},i);return}const l=e.inputs[0].data.length,o=4*Math.ceil(l/4/s);for(let p=0;p<s;++p){const v=p*o,x=[];for(let B=0,T=i.length;B<T;++B)x.push(i[B].slice(v,v+o));this.workers_[p].postMessage({buffers:x,meta:e.meta,imageOps:this.imageOps_,width:t,height:r},x)}}onWorkerMessage_(e,t){this.disposed||(this.dataLookup_[e]=t.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const e=this.job_,t=this.workers_.length;let r,i;if(t===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const s=e.inputs[0].data.length;r=new Uint8ClampedArray(s),i=new Array(t);const l=4*Math.ceil(s/4/t);for(let o=0;o<t;++o){const p=this.dataLookup_[o].buffer,v=o*l;r.set(new Uint8ClampedArray(p),v),i[o]=this.dataLookup_[o].meta}}this.job_=null,this.dataLookup_={},e.callback(null,new ImageData(r,e.inputs[0].width,e.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let e=0;e<this.workers_.length;++e)this.workers_[e].terminate();this.workers_.length=0}}const o9={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class s9 extends vp{constructor(e,t,r){super(e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=r}}class RU extends IU{constructor(e){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=e.operationType!==void 0?e.operationType:"pixel",this.threads_=e.threads!==void 0?e.threads:1,this.layers_=Ote(e.sources);const t=this.changed.bind(this);for(let r=0,i=this.layers_.length;r<i;++r)this.layers_[r].addEventListener(so.CHANGE,t);this.useResolutions_=e.resolutions!==null,this.tileQueue_=new lU(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:yh(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:Bte(this.layers_),pixelRatio:1,pixelToCoordinateTransform:yh(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Ro(this),renderTargets:{}},this.setAttributions(function(r){var s;const i=[];for(let l=0,o=e.sources.length;l<o;++l){const p=e.sources[l],v=p instanceof Ky?p:p.getSource();if(!v)continue;const x=(s=v.getAttributions())==null?void 0:s(r);typeof x=="string"?i.push(x):x!==void 0&&i.push(...x)}return i}),e.operation!==void 0&&this.setOperation(e.operation,e.lib)}setOperation(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new Ste({operation:e,imageOps:this.operationType_==="image",queue:1,lib:t,threads:this.threads_}),this.changed()}updateFrameState_(e,t,r){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const s=Tf(e);i.size[0]=Math.ceil(Ls(e)/t),i.size[1]=Math.ceil(fA(e)/t),i.extent=[s[0]-i.size[0]*t/2,s[1]-i.size[1]*t/2,s[0]+i.size[0]*t/2,s[1]+i.size[1]*t/2],i.time=Date.now();const l=i.viewState;return l.center=s,l.projection=r,l.resolution=t,i}allSourcesReady_(){let e=!0,t;for(let r=0,i=this.layers_.length;r<i;++r)if(t=this.layers_[r].getSource(),!t||t.getState()!=="ready"){e=!1;break}return e}getImage(e,t,r,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);const s=this.updateFrameState_(e,t,i);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const l=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();(t!==l||!Fm(s.extent,o))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t);for(let s=0;s<t;++s){e.layerIndex=s,e.renderTargets={};const l=Ete(this.layers_[s],e);if(l)r[s]=l;else return}const i={};this.dispatchEvent(new s9(o9.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}onWorkerComplete_(e,t,r,i){if(t||!r)return;const s=e.extent,l=e.viewState.resolution;if(l!==this.requestedFrameState_.viewState.resolution||!Fm(s,this.requestedFrameState_.extent))return;let o;if(this.renderedImageCanvas_)o=this.renderedImageCanvas_.getImage().getContext("2d");else{const p=Math.round(Ls(s)/l),v=Math.round(fA(s)/l);o=xu(p,v),this.renderedImageCanvas_=new pJ(s,l,1,o.canvas)}o.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new s9(o9.AFTEROPERATIONS,e,i))}getResolutions(e){if(!this.useResolutions_)return null;let t=super.getResolutions();if(!t)for(let r=0,i=this.layers_.length;r<i&&(t=this.layers_[r].getSource().getResolutions(e),!t);++r);return t}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}RU.prototype.dispose;let ag=null;function Ete(n,e){const t=n.getRenderer();if(!t)throw new Error("Unsupported layer type: "+n);if(!t.prepareFrame(e))return null;const r=e.size[0],i=e.size[1];if(r===0||i===0)return null;const s=t.renderFrame(e,null);let l;if(s instanceof HTMLCanvasElement)l=s;else{if(s&&(l=s.firstElementChild),!(l instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+l);if(l.width===r&&l.height===i)return l.getContext("2d").getImageData(0,0,r,i)}if(!ag)ag=xu(r,i,void 0,{willReadFrequently:!0});else{const o=ag.canvas;o.width!==r||o.height!==i?ag=xu(r,i,void 0,{willReadFrequently:!0}):ag.clearRect(0,0,r,i)}return ag.drawImage(l,0,0,r,i),ag.getImageData(0,0,r,i)}function Bte(n){return n.map(function(e){return e.getLayerState()})}function Ote(n){const e=n.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=Ite(n[r]);return t}function Ite(n){let e;return n instanceof Ky?n instanceof PU?e=new OU({source:n}):n instanceof IU&&(e=new xU({source:n})):e=n,e}function kte(n,e,t,r){const i=document.createElement("script"),s="olc_"+Ro(e);function l(){delete window[s],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+"callback="+s;const o=setTimeout(function(){l(),t&&t()},1e4);window[s]=function(p){clearTimeout(o),l(),e(p)},document.head.appendChild(i)}const Tte=/\{z\}/g,Pte=/\{x\}/g,Kte=/\{y\}/g,Rte=/\{-y\}/g;function Dte(n,e,t,r,i){return n.replace(Tte,e.toString()).replace(Pte,t.toString()).replace(Kte,r.toString()).replace(Rte,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function Fte(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function Lte(n,e){return function(t,r,i){if(!t)return;let s;const l=t[0];if(e){const o=e.getFullTileRange(l);o&&(s=o.getHeight()-1)}return Dte(n,l,t[1],t[2],s)}}function DU(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Lte(n[i],e);return Ute(r)}function Ute(n){return n.length===1?n[0]:function(e,t,r){if(!e)return;const i=Ate(e),s=Og(i,n.length);return n[s](e,t,r)}}const F4={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Px extends PU{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Px.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=Ro(t),i=t.getState();let s;i==Ur.LOADING?(this.tileLoadingKeys_[r]=!0,s=F4.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Ur.ERROR?F4.TILELOADERROR:i==Ur.LOADED?F4.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new xte(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Fte(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(DU(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class zte extends Px{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:jte,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:aU,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!P0(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||P0(t,e)))return this.tileGrid;const r=Ro(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=kU(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,l){const o=[e,t,r],p=this.getTileCoordForTileUrlFunction(o,s),v=p?this.tileUrlFunction(p,i,s):void 0,x=new this.tileClass(o,v!==void 0?Ur.IDLE:Ur.EMPTY,v!==void 0?v:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return x.key=l,x.addEventListener(so.CHANGE,this.handleTileChange.bind(this)),x}getTile(e,t,r,i,s){const l=this.getProjection();if(!l||!s||P0(l,s))return this.getTileInternal(e,t,r,i,l||s);const o=[e,t,r],p=this.getKey(),v=this.getTileGridForProjection(l),x=this.getTileGridForProjection(s),B=this.getTileCoordForTileUrlFunction(o,s),T=new EU(l,v,s,x,o,B,this.getTilePixelRatio(i),this.getGutter(),(P,U,j,N)=>this.getTileInternal(P,U,j,N,l),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return T.key=p,T}getTileInternal(e,t,r,i,s){const l=this.getKey();return this.createTile_(e,t,r,i,s,l)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Ia(e);if(r){const i=Ro(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function jte(n,e){n.getImage().src=e}class FU extends zte{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Ia("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)kte(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Ia("EPSG:4326"),r=this.getProjection();let i;if(e.bounds!==void 0){const v=YC(t,r);i=tH(e.bounds,v)}const s=Tx(r),l=e.minzoom||0,o=e.maxzoom||22,p=yO({extent:s,maxZoom:o,minZoom:l,tileSize:this.tileSize_});if(this.tileGrid=p,this.tileUrlFunction=DU(e.tiles,p),e.attribution&&!this.getAttributions()){const v=i!==void 0?i:s;this.setAttributions(function(x){return Nu(v,x.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class LU extends Px{constructor(e){const t=e.projection||"EPSG:3857",r=e.extent||Tx(t),i=e.tileGrid||yO({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:UU,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:pU,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===Ur.IDLE){r.setState(Ur.LOADING);const i=r.wrappedTileCoord,s=this.getTileGridForProjection(t),l=s.getTileCoordExtent(i),o=i[0],p=s.getResolution(o);I0(l,-p,l);const v=this.tileGrid,x=v.getExtent();x&&mp(l,x,l);const B=v.getZForResolution(p,this.zDirection);v.forEachTileCoord(l,B,T=>{const P=this.tileUrlFunction(T,e,t);this.sourceTiles_[P]||(this.sourceTiles_[P]=new this.tileClass(T,P?Ur.IDLE:Ur.EMPTY,P,this.format_,this.tileLoadFunction));const U=this.sourceTiles_[P];r.sourceTiles.push(U),this.tileKeysBySourceTileUrl_[P]||(this.tileKeysBySourceTileUrl_[P]=[]),this.tileKeysBySourceTileUrl_[P].push(r.getKey());const j=U.getState();if(j<Ur.LOADED){const N=q=>{this.handleTileChange(q);const H=U.getState();if(H===Ur.LOADED||H===Ur.ERROR){const oe=U.getKey();oe in r.errorTileKeys?U.getState()===Ur.LOADED&&delete r.errorTileKeys[oe]:r.loadingSourceTiles--,H===Ur.ERROR?r.errorTileKeys[oe]=!0:U.removeEventListener(so.CHANGE,N),r.loadingSourceTiles===0&&r.setState(R0(r.errorTileKeys)?Ur.LOADED:Ur.ERROR)}};U.addEventListener(so.CHANGE,N),r.loadingSourceTiles++}j===Ur.IDLE&&(U.extent=v.getTileCoordExtent(T),U.projection=t,U.resolution=v.getResolution(T[0]),U.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(T=>T.getState()===Ur.ERROR)?Ur.ERROR:Ur.LOADED)}return r.sourceTiles}removeSourceTiles(e){const t=e.getKey(),r=e.sourceTiles;for(let i=0,s=r.length;i<s;++i){const l=r[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[l])return;const o=this.tileKeysBySourceTileUrl_[l].indexOf(t);o!==-1&&(this.tileKeysBySourceTileUrl_[l].splice(o,1),this.tileKeysBySourceTileUrl_[l].length===0&&(delete this.tileKeysBySourceTileUrl_[l],delete this.sourceTiles_[l]))}}getTile(e,t,r,i,s){const l=[e,t,r];let o=this.getTileCoordForTileUrlFunction(l,s);const p=this.getTileGrid().getExtent(),v=this.getTileGridForProjection(s);if(o&&p){const T=v.getTileCoordExtent(o);I0(T,-v.getResolution(e),T),Nu(p,T)||(o=null)}let x=!0;if(o!==null){const T=this.tileGrid,P=v.getResolution(e),U=T.getZForResolution(P,1),j=v.getTileCoordExtent(o);I0(j,-P,j),T.forEachTileCoord(j,U,N=>{x=x&&!this.tileUrlFunction(N,i,s)})}const B=new $J(l,x?Ur.EMPTY:Ur.IDLE,o,this.getSourceTiles.bind(this,i,s),this.removeSourceTiles.bind(this));return B.key=this.getKey(),B}getTileGridForProjection(e){const t=e.getCode();let r=this.tileGrids_[t];if(!r){const i=this.getProjection();sa(i===null||P0(i,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const s=this.tileGrid,l=s.getResolutions().slice(),o=l.map(function(x,B){return s.getOrigin(B)}),p=l.map(function(x,B){return s.getTileSize(B)}),v=oU+1;for(let x=l.length;x<v;++x)l.push(l[x-1]/2),o.push(o[x-1]),p.push(p[x-1]);r=new kx({extent:s.getExtent(),origins:o,resolutions:l,tileSizes:p}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=md(i.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function UU(n,e){n.setLoader(function(t,r,i){WL(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}function Nte(n,e){const t=n[0],r=t.width,i=t.height,s=t.data,l=new Uint8ClampedArray(s.length),o=e.resolution*2,p=r-1,v=i-1,x=[0,0,0,0],B=2*Math.PI,T=Math.PI/2,P=Math.PI*e.sunEl/180,U=Math.PI*e.sunAz/180,j=Math.cos(P),N=Math.sin(P),q=e.highlightColor,H=e.shadowColor,oe=e.accentColor,te=e.encoding;let V,ne,W,ie,he,fe,Ee,me,Me,De,xe,At,Ze,Xe,Ne,Se,Re,He,_t,Gt,yt,Ft;function Tt(Le,Pe="mapbox"){if(Pe==="mapbox")return(Le[0]*256*256+Le[1]*256+Le[2])*.1-1e4;if(Pe==="terrarium")return Le[0]*256+Le[1]+Le[2]/256-32768}for(ne=0;ne<=v;++ne)for(he=ne===0?0:ne-1,fe=ne===v?v:ne+1,V=0;V<=p;++V)W=V===0?0:V-1,ie=V===p?p:V+1,Ee=(ne*r+W)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],me=e.vert*Tt(x,te),Ee=(ne*r+ie)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],Me=e.vert*Tt(x,te),De=(Me-me)/o,Ee=(he*r+V)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],me=e.vert*Tt(x,te),Ee=(fe*r+V)*4,x[0]=s[Ee],x[1]=s[Ee+1],x[2]=s[Ee+2],x[3]=s[Ee+3],Me=e.vert*Tt(x,te),xe=(Me-me)/o,Ze=Math.atan2(xe,-De),Ze<0?Ze=T-Ze:Ze>T?Ze=B-Ze+T:Ze=T-Ze,At=Math.atan(Math.sqrt(De*De+xe*xe)),Ft=N*Math.cos(At)+j*Math.sin(At)*Math.cos(U-Ze),Xe=Math.cos(At),Ne=255*Ft,_t=Math.min(Math.max(2*e.sunEl,0),1),Gt=1.875-e.opacity*1.75,yt=e.opacity!==.5?T*((Math.pow(Gt,At)-1)/(Math.pow(Gt,T)-1)):At,Re={r:(1-Xe)*oe.r*_t*255,g:(1-Xe)*oe.g*_t*255,b:(1-Xe)*oe.b*_t*255,a:(1-Xe)*oe.a*_t*255},Se=Math.abs(((Ze+U)/Math.PI+.5)%2-1),He={r:(q.r*(1-Se)+H.r*Se)*Ne,g:(q.g*(1-Se)+H.g*Se)*Ne,b:(q.b*(1-Se)+H.b*Se)*Ne,a:(q.a*(1-Se)+H.a*Se)*Ne},Ee=(ne*r+V)*4,l[Ee]=Re.r*(1-Se)+He.r,l[Ee+1]=Re.g*(1-Se)+He.g,l[Ee+2]=Re.b*(1-Se)+He.b,l[Ee+3]=s[Ee+3]*e.opacity*_t*Math.sin(yt);return new ImageData(l,r,i)}function Wte(n,e=512){return n.getExtent()?yO({extent:n.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Xp}function zU(n,e){return e.accessToken||(e=Object.assign({},e),new URL(n).searchParams.forEach((r,i)=>{e.accessToken=r,e.accessTokenParam=i})),e}function Gte(n,e,t="",r={},i=void 0){let s,l,o,p,v=!0;return typeof t!="string"&&!Array.isArray(t)?(o=t,p=o.source||o.layers,r=o):p=t,typeof r=="string"?(s=r,o={}):(s=r.styleUrl,o=r),o.updateSource===!1&&(v=!1),i||(i=o.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:y2(s,o.accessToken),o=zU(s,o)),new Promise(function(x,B){yU(e,o).then(function(T){if(T.version!=8)return B(new Error("glStyle version 8 required."));if(!(n instanceof aO||n instanceof eC))return B(new Error("Can only apply to VectorLayer or VectorTileLayer"));const P=n instanceof eC?"vector":"geojson";if(p?Array.isArray(p)?l=T.layers.find(function(te){return te.id===p[0]}).source:l=p:(l=Object.keys(T.sources).find(function(te){return T.sources[te].type===P}),p=l),!l)return B(new Error(`No ${P} source found in the glStyle.`));function U(){if(!v)return Promise.resolve();if(n instanceof eC)return WU(T.sources[l],s,o).then(function(W){const ie=n.getSource();ie?W!==ie&&(ie.setTileUrlFunction(W.getTileUrlFunction()),typeof ie.setUrls=="function"&&typeof W.getUrls=="function"&&ie.setUrls(W.getUrls()),ie.format_||(ie.format_=W.format_),ie.getAttributions()||ie.setAttributions(W.getAttributions()),ie.getTileLoadFunction()===UU&&ie.setTileLoadFunction(W.getTileLoadFunction()),P0(ie.getProjection(),W.getProjection())&&(ie.tileGrid=W.getTileGrid())):n.setSource(W);const he=n.getSource().getTileGrid();!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())&&he.getMinZoom()>0&&n.setMaxResolution(Rv(Math.max(0,he.getMinZoom()-1e-12),he.getResolutions()))});const te=T.sources[l];let V=n.getSource();(!V||V.get("mapbox-source")!==te)&&(V=YU(te,s,o));const ne=n.getSource();return ne?V!==ne&&(ne.getAttributions()||ne.setAttributions(V.getAttributions()),ne.format_||(ne.format_=V.getFormat()),ne.url_=V.getUrl()):n.setSource(V),Promise.resolve()}let j,N,q,H;function oe(){if(!H&&(!T.sprite||N)){if(o.projection&&!i){const V=Ia(o.projection).getUnits();V!=="m"&&(i=Xp.map(ne=>ne/D0[V]))}H=hee(n,T,p,i,N,q,(te,V=o.webfonts)=>see(te,V),o.getImage),n.getStyle()?U().then(x).catch(B):B(new Error(`Nothing to show for source [${l}]`))}else H?(n.setStyle(H),U().then(x).catch(B)):B(new Error("Something went wrong trying to apply style."))}if(T.sprite){const te=new URL(HJ(T.sprite,o.accessToken,s||location.href));j=window.devicePixelRatio>=1.5?.5:1;const V=j==.5?"@2x":"";let ne=te.origin+te.pathname+V+".json"+te.search;new Promise(function(W,ie){My("Sprite",ne,o).then(W).catch(function(he){ne=te.origin+te.pathname+".json"+te.search,My("Sprite",ne,o).then(W).catch(ie)})}).then(function(W){if(W===void 0&&B(new Error("No sprites found.")),N=W,q=te.origin+te.pathname+V+".png"+te.search,o.transformRequest){const ie=o.transformRequest(q,"SpriteImage")||q;(ie instanceof Request||ie instanceof Promise)&&(q=ie)}oe()}).catch(function(W){B(new Error(`Sprites cannot be loaded: ${ne}: ${W.message}`))})}else oe()}).catch(B)})}const v0={};function jU(n,e){let t;return n.some(function(r){if(r.id==e)return t=r.source,!0}),t}function Qte(n,e){const t=n.bounds;if(t){const r=d6([t[0],t[1]],e),i=d6([t[2],t[3]],e);return[r[0],r[1],i[0],i[1]]}return Ia(e).getExtent()}function NU(n,e,t){const r=new FU({tileJSON:e,tileSize:n.tileSize||e.tileSize||512}),i=r.getTileJSON(),s=r.getTileGrid(),l=Ia(t.projection||"EPSG:3857"),o=Qte(i,l),p=l.getExtent(),v=i.minzoom||0,x=i.maxzoom||22,B={attributions:r.getAttributions(),projection:l,tileGrid:new kx({origin:p?zm(p):s.getOrigin(0),extent:o||s.getExtent(),minZoom:v,resolutions:Wte(l,e.tileSize).slice(0,x+1),tileSize:s.getTileSize(0)})};return Array.isArray(i.tiles)?B.urls=i.tiles:B.url=i.tiles,B}function Yte(n,e,t,r){const i={id:n.id,type:n.type},s=n.layout||{},l=n.paint||{};i.paint=l;const o=pO(e,t.resolutions||Xp);let p;const v=xi(i,"paint","background-color",o,v0,r);return l["background-opacity"]!==void 0&&(p=xi(i,"paint","background-opacity",o,v0,r)),s.visibility=="none"?void 0:g0(v,p)}function qte(n,e,t){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new Dy({source:new Ky({}),render(i){const s=Yte(n,i.viewState.resolution,e,t);return r.style.backgroundColor=s,r}})}function WU(n,e,t){return new Promise(function(r,i){vU(n,e,t).then(function({tileJson:s,tileLoadFunction:l}){const o=NU(n,s,t);o.tileLoadFunction=l,o.format=new $ee,r(new LU(o))}).catch(i)})}function Vte(n,e,t){const r=new eC({declutter:!0,visible:!1});return WU(n,e,t).then(function(i){i.set("mapbox-source",n),r.setSource(i)}).catch(function(i){r.setSource(void 0)}),r}function GU(n){return`{bbox-${(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function $te(n,e,t){return new Promise(function(r,i){vU(n,e,t).then(function({tileJson:s,tileLoadFunction:l}){const o=new FU({interpolate:t.interpolate===void 0?!0:t.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:s});o.tileGrid=NU(n,s,t).tileGrid,t.projection&&(o.projection=Ia(t.projection));const p=o.getTileUrlFunction();l&&o.setTileLoadFunction(l),o.setTileUrlFunction(function(v,x,B){const T=GU(B);let P=p(v,x,B);if(P.indexOf(T)!=-1){const U=o.getTileGrid().getTileCoordExtent(v);P=P.replace(T,U.toString())}return P}),o.set("mapbox-source",n),r(o)}).catch(function(s){i(s)})})}function QU(n,e,t){const r=new OU;return $te(n,e,t).then(function(i){r.setSource(i)}).catch(function(){r.setSource(void 0)}),r}function Hte(n,e,t){const r=QU(n,e,t);return new xU({source:new RU({operationType:"image",operation:Nte,sources:[r]})})}function YU(n,e,t){const r=t.projection?new HI({dataProjection:t.projection}):new HI,i=n.data,s={};if(typeof i=="string"){const[o]=Sb(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(o)){const v=(B,T,P)=>{const U=GU(P);return o.replace(U,`${B.join(",")}`)},x=new wb({attributions:n.attribution,format:r,loader:(B,T,P,U,j)=>{const N=typeof v=="function"?v(B,T,P):v;My("GeoJSON",N,t).then(q=>{const H=x.getFormat().readFeatures(q,{featureProjection:P});x.addFeatures(H),U(H)}).catch(q=>{x.removeLoadedExtent(B),j()})},strategy:HZ});return x.set("mapbox-source",n),x}const p=new wb({attributions:n.attribution,format:r,url:o,loader:(v,x,B,T,P)=>{My("GeoJSON",o,t).then(U=>{const j=p.getFormat().readFeatures(U,{featureProjection:B});p.addFeatures(j),T(j)}).catch(U=>{p.removeLoadedExtent(v),P()})}});return p}s.features=r.readFeatures(i,{featureProjection:"EPSG:3857"});const l=new wb(Object.assign({attributions:n.attribution,format:r},s));return l.set("mapbox-source",n),l}function Zte(n,e,t){return new aO({declutter:!0,source:YU(n,e,t),visible:!1})}function Xte(n,e,t){let r=null;return function(i){n.paint&&"raster-opacity"in n.paint&&i.frameState.viewState.zoom!==r&&(r=i.frameState.viewState.zoom,delete t[n.id],Jte(n,e,r,t))}}function Jte(n,e,t,r){const i=xi(n,"paint","raster-opacity",t,v0,r);e.setOpacity(i)}function ene(n,e){function t(){const r=e.get("mapbox-style");if(!r)return;const i=V6(r.layers),s=n.get("mapbox-layers"),l=i.filter(function(o){return s.includes(o.id)}).some(function(o){return!o.layout||!o.layout.visibility||o.layout.visibility==="visible"});n.get("visible")!==l&&n.setVisible(l)}n.on("change",t),t()}function tne(n,e,t,r){const i=gU(n),s=n.layers,l=t.type,o=t.source||jU(s,t.ref),p=n.sources[o];let v;if(l=="background")v=qte(t,r,i);else if(p.type=="vector")v=Vte(p,e,r);else if(p.type=="raster")v=QU(p,e,r),v.setVisible(t.layout?t.layout.visibility!=="none":!0),v.on("prerender",Xte(t,v,i));else if(p.type=="geojson")v=Zte(p,e,r);else if(p.type=="raster-dem"&&t.type=="hillshade"){const B=Hte(p,e,r);v=B,B.getSource().on("beforeoperations",function(T){const P=T.data;P.resolution=c6(r.projection||"EPSG:3857",T.resolution,Tf(T.extent),"m");const U=pO(T.resolution,r.resolutions||Xp);P.encoding=p.encoding,P.vert=5*xi(t,"paint","hillshade-exaggeration",U,v0,i),P.sunAz=xi(t,"paint","hillshade-illumination-direction",U,v0,i),P.sunEl=35,P.opacity=.3,P.highlightColor=xi(t,"paint","hillshade-highlight-color",U,v0,i),P.shadowColor=xi(t,"paint","hillshade-shadow-color",U,v0,i),P.accentColor=xi(t,"paint","hillshade-accent-color",U,v0,i)}),v.setVisible(t.layout?t.layout.visibility!=="none":!0)}const x=o;return v&&v.set("mapbox-source",x),v}function a9(n,e,t,r){const i=[];let s=null;if(e instanceof cO){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const B=r.projection?Ia(r.projection):s.getProjection();s=new dp(Object.assign(s.getProperties(),{maxResolution:Xp[0]/D0[B.getUnits()],projection:r.projection||s.getProjection()})),e.setView(s)}"center"in n&&!s.getCenter()&&s.setCenter(d6(n.center,s.getProjection())),"zoom"in n&&s.getZoom()===void 0&&s.setResolution(Xp[0]/D0[s.getProjection().getUnits()]/Math.pow(2,n.zoom)),(!s.getCenter()||s.getZoom()===void 0)&&s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",n),e.set("mapbox-metadata",{styleUrl:t,options:r});const l=n.layers;let o=[],p,v,x;for(let B=0,T=l.length;B<T;++B){const P=l[B],U=P.type;if(U=="heatmap"){console.debug(`layers[${B}].type "${U}" not supported`);continue}else x=P.source||jU(l,P.ref),(!x||x!=v)&&(o.length&&(i.push(l9(p,o,n,t,e,r)),o=[]),p=tne(n,t,P,r),p instanceof aO||p instanceof eC||(o=[]),v=p.get("mapbox-source")),o.push(P.id)}return i.push(l9(p,o,n,t,e,r)),Promise.all(i)}function nne(n,e,t={}){let r,i;if(typeof n=="string"||n instanceof HTMLElement?i=new cO({target:n}):i=n,typeof e=="string"){const s=e.startsWith("data:")?location.href:y2(e,t.accessToken);t=zU(s,t),r=new Promise(function(l,o){yU(e,t).then(function(p){a9(p,i,s,t).then(function(){l(i)}).catch(o)}).catch(function(p){o(new Error(`Could not load ${e}: ${p.message}`))})})}else r=new Promise(function(s,l){a9(e,i,!t.styleUrl||t.styleUrl.startsWith("data:")?location.href:y2(t.styleUrl,t.accessToken),t).then(function(){s(i)}).catch(l)});return r}function l9(n,e,t,r,i,s={}){let l=24,o=0;const p=t.layers;for(let v=0,x=p.length;v<x;++v){const B=p[v];e.indexOf(B.id)!==-1&&(l=Math.min("minzoom"in B?B.minzoom:0,l),o=Math.max("maxzoom"in B?B.maxzoom:24,o))}return new Promise(function(v,x){const B=function(){const P=n.getSource();if(!P||P.getState()==="error"){x(new Error("Error accessing data for source "+n.get("mapbox-source")));return}if("getTileGrid"in P){const U=P.getTileGrid();if(U){const j=U.getMinZoom();(l>0||j>0)&&n.setMaxResolution(Math.min(Rv(Math.max(0,l-1e-12),Xp),Rv(Math.max(0,j-1e-12),U.getResolutions()))),o<24&&n.setMinResolution(Rv(o,Xp))}}else l>0&&n.setMaxResolution(Rv(Math.max(0,l-1e-12),Xp));P instanceof wb||P instanceof LU?Gte(n,t,e,Object.assign({styleUrl:r},s)).then(function(){ene(n,i),v()}).catch(x):v()};n.set("mapbox-layers",e);const T=i.getLayers();T.getArray().indexOf(n)===-1&&T.push(n),n.getSource()?B():n.once("change:source",B)})}function ni(){var n="/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",e="28a80ffabe289131cb2e371ab6bf55f9bb46f37a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx",statementMap:{0:{start:{line:11,column:2},end:{line:15,column:3}},1:{start:{line:12,column:4},end:{line:12,column:16}},2:{start:{line:14,column:4},end:{line:14,column:149}},3:{start:{line:14,column:103},end:{line:14,column:133}},4:{start:{line:18,column:24},end:{line:25,column:3}},5:{start:{line:28,column:14},end:{line:28,column:18}},6:{start:{line:30,column:19},end:{line:30,column:23}},7:{start:{line:32,column:4},end:{line:32,column:17}},8:{start:{line:33,column:4},end:{line:38,column:6}},9:{start:{line:39,column:4},end:{line:39,column:67}},10:{start:{line:42,column:4},end:{line:42,column:26}},11:{start:{line:42,column:19},end:{line:42,column:26}},12:{start:{line:43,column:4},end:{line:43,column:33}},13:{start:{line:44,column:4},end:{line:44,column:33}},14:{start:{line:47,column:4},end:{line:51,column:5}},15:{start:{line:48,column:6},end:{line:50,column:8}},16:{start:{line:54,column:4},end:{line:61,column:7}},17:{start:{line:62,column:16},end:{line:69,column:6}},18:{start:{line:70,column:4},end:{line:78,column:7}},19:{start:{line:71,column:21},end:{line:71,column:45}},20:{start:{line:72,column:6},end:{line:77,column:9}},21:{start:{line:79,column:22},end:{line:89,column:5}},22:{start:{line:80,column:19},end:{line:80,column:42}},23:{start:{line:81,column:21},end:{line:81,column:56}},24:{start:{line:82,column:6},end:{line:88,column:9}},25:{start:{line:90,column:4},end:{line:90,column:16}},26:{start:{line:91,column:4},end:{line:91,column:33}},27:{start:{line:92,column:4},end:{line:102,column:7}},28:{start:{line:93,column:21},end:{line:93,column:56}},29:{start:{line:94,column:6},end:{line:101,column:9}},30:{start:{line:103,column:4},end:{line:103,column:19}},31:{start:{line:104,column:4},end:{line:106,column:6}},32:{start:{line:108,column:17},end:{line:111,column:3}},33:{start:{line:109,column:4},end:{line:109,column:20}},34:{start:{line:110,column:4},end:{line:110,column:37}},35:{start:{line:113,column:14},end:{line:113,column:26}},36:{start:{line:114,column:4},end:{line:181,column:9}},37:{start:{line:118,column:22},end:{line:118,column:45}},38:{start:{line:173,column:22},end:{line:173,column:40}},39:{start:{line:184,column:22},end:{line:184,column:62}}},fnMap:{0:{name:"renderCoords",decl:{start:{line:10,column:9},end:{line:10,column:21}},loc:{start:{line:10,column:30},end:{line:16,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:14,column:92},end:{line:14,column:93}},loc:{start:{line:14,column:103},end:{line:14,column:133}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:19,column:17},end:{line:19,column:18}},loc:{start:{line:19,column:23},end:{line:20,column:5}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:24},end:{line:22,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:25},end:{line:24,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:31,column:2},end:{line:31,column:3}},loc:{start:{line:31,column:21},end:{line:40,column:3}},line:31},6:{name:"(anonymous_6)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:28},end:{line:45,column:3}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:32},end:{line:52,column:3}},line:46},8:{name:"(anonymous_8)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:107,column:3}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:70,column:26},end:{line:70,column:27}},loc:{start:{line:70,column:35},end:{line:78,column:5}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:28},end:{line:89,column:5}},line:79},11:{name:"(anonymous_11)",decl:{start:{line:92,column:25},end:{line:92,column:26}},loc:{start:{line:92,column:33},end:{line:102,column:5}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:108,column:17},end:{line:108,column:18}},loc:{start:{line:108,column:24},end:{line:111,column:3}},line:108},13:{name:"(anonymous_13)",decl:{start:{line:112,column:2},end:{line:112,column:3}},loc:{start:{line:112,column:11},end:{line:182,column:3}},line:112},14:{name:"(anonymous_14)",decl:{start:{line:118,column:15},end:{line:118,column:16}},loc:{start:{line:118,column:22},end:{line:118,column:45}},line:118},15:{name:"(anonymous_15)",decl:{start:{line:173,column:15},end:{line:173,column:16}},loc:{start:{line:173,column:22},end:{line:173,column:40}},line:173}},branchMap:{0:{loc:{start:{line:11,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:15,column:3}},{start:{line:13,column:9},end:{line:15,column:3}}],line:11},1:{loc:{start:{line:11,column:6},end:{line:11,column:34}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:13}},{start:{line:11,column:17},end:{line:11,column:34}}],line:11},2:{loc:{start:{line:42,column:4},end:{line:42,column:26}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},3:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},4:{loc:{start:{line:134,column:26},end:{line:134,column:59}},type:"binary-expr",locations:[{start:{line:134,column:26},end:{line:134,column:53}},{start:{line:134,column:57},end:{line:134,column:59}}],line:134},5:{loc:{start:{line:146,column:6},end:{line:168,column:10}},type:"binary-expr",locations:[{start:{line:146,column:6},end:{line:146,column:29}},{start:{line:146,column:49},end:{line:168,column:10}}],line:146}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/MapOpenLayers.tsx"],names:[],mappings:"AAoBW,cAyIL,YAzIK;AApBX,OAAO,WAAW;AAClB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,6BAA6B;AAEpC,OAAO;AAEP,SAAQ,aAAY;AACpB,SAAQ,KAAK,MAAM,eAAc;AAEjC,SAAQ,gBAAe;AAIvB,SAAS,aAAc,QAAkB;AACvC,MAAI,CAAC,UAAU,OAAO,SAAS,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO,oBAAC,UAAK,WAAU,mBACpB,iBAAO,IAAI,CAAC,UAAU,OAAO,KAAK,EAAE,SAAS,GAAG,GAAQ,CAAC,EAAE,KAAK,IAAI,GACvE;AAAA,EACF;AACF;AAqBA,MAAM,8BAA8B,MAAM,UAA0D;AAAA,EAClG,OAAO,eAAe;AAAA,IACpB,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,cAAc,MAAM;AAAA,IAAC;AAAA,IACrB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAmC;AAAA,EACnC;AAAA,EACA,iBAAqC;AAAA,EAErC,YAAY,OAAmC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,MACV,QAAQ,CAAC;AAAA,MACT,QAAQ,CAAC;AAAA,IACX;AACA,SAAK,cAAc,SAAS,KAAK,aAAa,KAAK,IAAI,GAAG,GAAG;AAAA,EAC/D;AAAA,EAEA,aAAa,aAAiC;AAC5C,QAAG,CAAC,KAAK,IAAK;AAGd,SAAK,IAAI,UAAU,EAAE,MAAM;AAC3B,UAAM,KAAK,KAAK,WAAW;AAAA,EAC7B;AAAA,EAEA,mBAAmB,WAAuC;AACxD,QAAI,KAAK,MAAM,aAAa,UAAU,UAAU;AAC9C,WAAK;AAAA,QACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,UAAU,IAAI,QAAQ;AAAA,MACzB,SAAS,KAAK;AAAA,MACd,SAAS;AAAA,QACP,WAAW;AAAA,UACT,UAAU;AAAA,QACZ;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,MAAM,IAAI,IAAI;AAAA,MAClB,QAAQ,KAAK;AAAA,MACb,UAAU,CAAC,KAAK,OAAO;AAAA,MACvB,MAAM,IAAI,KAAK;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,CAAC,KAAK,GAAG;AAAA,MACnB,CAAC;AAAA,IACH,CAAC;AAED,QAAI,GAAG,eAAe,CAAC,QAAQ;AAC7B,YAAM,SAAS,SAAS,IAAI,UAAU;AACtC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAED,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO,IAAI,QAAQ,EAAE,QAAQ;AACnC,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAElD,WAAK,MAAM,SAAS;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,KAAK,OAAO,CAAC;AAAA,UACb,KAAK,OAAO,CAAC;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,cAAU;AACV,QAAI,GAAG,WAAW,SAAS;AAE3B,QAAI,GAAG,cAAc,CAAC,OAAO;AAC3B,YAAM,SAAS,SAAS,IAAI,QAAQ,EAAE,UAAU,CAAE;AAClD,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,UACnB,OAAO,CAAC,EAAE,QAAQ,CAAC;AAAA,QACrB;AAAA,QACA,UAAU,IAAI,QAAQ,EAAE,YAAY,EAAE,QAAQ,CAAC;AAAA,QAC/C,MAAM,IAAI,QAAQ,EAAE,QAAQ,EAAG,QAAQ,CAAC;AAAA,MAC1C,CAAC;AAAA,IACH,CAAC;AAID,SAAK,MAAM;AACX,SAAK;AAAA,MACH,KAAK,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,IACpD;AAAA,EACF;AAAA,EAEA,eAAe,CAAC,MAAW;AACzB,MAAE,OAAO,KAAK;AACd,SAAK,QAAS,YAAY,MAAS;AAAA,EACrC;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,yBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK,OAAK,KAAK,iBAAiB;AAAA,UAChC,OAAO,EAAC,YAAY,QAAO;AAAA,UAC3B,WAAU;AAAA,UAEV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBACd,cAAY,EAAE,aAAa;AAAA,gBAC5B;AAAA;AAAA,YAED;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,UAAU,KAAK,MAAM,oBAAoB,CAAC;AAAA,gBAC1C,eAAe,KAAK,MAAM;AAAA;AAAA,YAC5B;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,oBACZ;AAAA,UAAE,OAAO;AAAA,QAAE;AAAA,QAAE,KAAK,MAAM;AAAA,SAC3B;AAAA,MACC,KAAK,MAAM,gBACV,qBAAC,SAAI,WAAU,qBACb;AAAA,6BAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,SAAS;AAAA,YAAE;AAAA,aAAC;AAAA,UACtB,oBAAC,UAAM,uBAAa,KAAK,MAAM,MAAM,GAAE;AAAA,WACzC;AAAA,QACA,qBAAC,SACC;AAAA,+BAAC,WAAO;AAAA,cAAE,WAAW;AAAA,YAAE;AAAA,aAAC;AAAA,UACxB,oBAAC,UAAM,eAAK,MAAM,UAAS;AAAA,WAC7B;AAAA,SACF;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,KAAK,OAAK,KAAK,YAAY;AAAA,UAC3B,MAAK;AAAA,UACL,cAAY,EAAE,UAAU;AAAA,UACxB,OAAO;AAAA,YACL,GAAG,KAAK,MAAM;AAAA,UAChB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"28a80ffabe289131cb2e371ab6bf55f9bb46f37a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ni=function(){return l},l}ni();function u9(n){return ni().f[0]++,ni().s[0]++,ni().b[1][0]++,!n||(ni().b[1][1]++,n.length<2)?(ni().b[0][0]++,ni().s[1]++,null):(ni().b[0][1]++,ni().s[2]++,le.jsx("span",{className:"maputnik-coords",children:n.map(e=>(ni().f[1]++,ni().s[3]++,String(e).padStart(7,""))).join(", ")}))}class qU extends sr.Component{constructor(t){ni().f[5]++,ni().s[7]++;super(t);Pn(this,"updateStyle");Pn(this,"map");Pn(this,"container",(ni().s[5]++,null));Pn(this,"overlay");Pn(this,"popupContainer",(ni().s[6]++,null));Pn(this,"closeOverlay",(ni().s[32]++,t=>{ni().f[12]++,ni().s[33]++,t.target.blur(),ni().s[34]++,this.overlay.setPosition(void 0)}));ni().s[8]++,this.state={zoom:"0",rotation:"0",cursor:[],center:[]},ni().s[9]++,this.updateStyle=j2.throttle(this._updateStyle.bind(this),200)}_updateStyle(t){if(ni().f[6]++,ni().s[10]++,this.map)ni().b[2][1]++;else{ni().b[2][0]++,ni().s[11]++;return}ni().s[12]++,this.map.getLayers().clear(),ni().s[13]++,nne(this.map,t)}componentDidUpdate(t){ni().f[7]++,ni().s[14]++,this.props.mapStyle!==t.mapStyle?(ni().b[3][0]++,ni().s[15]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))):ni().b[3][1]++}componentDidMount(){ni().f[8]++,ni().s[16]++,this.overlay=new VJ({element:this.popupContainer,autoPan:{animation:{duration:250}}});const t=(ni().s[17]++,new cO({target:this.container,overlays:[this.overlay],view:new dp({zoom:1,center:[180,-90]})}));ni().s[18]++,t.on("pointermove",i=>{ni().f[9]++;const s=(ni().s[19]++,i4(i.coordinate));ni().s[20]++,this.setState({cursor:[s[0].toFixed(2),s[1].toFixed(2)]})}),ni().s[21]++;const r=()=>{ni().f[10]++;const i=(ni().s[22]++,t.getView().getZoom()),s=(ni().s[23]++,i4(t.getView().getCenter()));ni().s[24]++,this.props.onChange({zoom:i,center:{lng:s[0],lat:s[1]}})};ni().s[25]++,r(),ni().s[26]++,t.on("moveend",r),ni().s[27]++,t.on("postrender",i=>{ni().f[11]++;const s=(ni().s[28]++,i4(t.getView().getCenter()));ni().s[29]++,this.setState({center:[s[0].toFixed(2),s[1].toFixed(2)],rotation:t.getView().getRotation().toFixed(2),zoom:t.getView().getZoom().toFixed(2)})}),ni().s[30]++,this.map=t,ni().s[31]++,this.updateStyle(this.props.replaceAccessTokens(this.props.mapStyle))}render(){ni().f[13]++;const t=(ni().s[35]++,this.props.t);return ni().s[36]++,le.jsxs("div",{className:"maputnik-ol-container",children:[le.jsxs("div",{ref:r=>(ni().f[14]++,ni().s[37]++,this.popupContainer=r),style:{background:"black"},className:"maputnik-popup",children:[le.jsx("button",{className:"maplibregl-popup-close-button",onClick:this.closeOverlay,"aria-label":t("Close popup"),children:""}),le.jsx(WF,{features:(ni().b[4][0]++,this.state.selectedFeatures||(ni().b[4][1]++,[])),onLayerSelect:this.props.onLayerSelect})]}),le.jsxs("div",{className:"maputnik-ol-zoom",children:[t("Zoom:")," ",this.state.zoom]}),(ni().b[5][0]++,this.props.debugToolbox&&(ni().b[5][1]++,le.jsxs("div",{className:"maputnik-ol-debug",children:[le.jsxs("div",{children:[le.jsxs("label",{children:[t("cursor:")," "]}),le.jsx("span",{children:u9(this.state.cursor)})]}),le.jsxs("div",{children:[le.jsxs("label",{children:[t("center:")," "]}),le.jsx("span",{children:u9(this.state.center)})]}),le.jsxs("div",{children:[le.jsxs("label",{children:[t("rotation:")," "]}),le.jsx("span",{children:this.state.rotation})]})]}))),le.jsx("div",{className:"maputnik-ol",ref:r=>(ni().f[15]++,ni().s[38]++,this.container=r),role:"region","aria-label":t("Map view"),style:{...this.props.style}})]})}}Pn(qU,"defaultProps",(ni().s[4]++,{onMapLoaded:()=>{ni().f[2]++},onDataChange:()=>{ni().f[3]++},onLayerSelect:()=>{ni().f[4]++}}));const rne=(ni().s[39]++,Ws()(qU));var L4={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var A9;function ine(){return A9||(A9=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(s=i(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var l="";for(var o in s)e.call(s,o)&&s[o]&&(l=i(l,o));return l}function i(s,l){return l?s?s+" "+l:s+l:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(L4)),L4.exports}var one=ine();const em=yl(one);function pg(){var n="/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",e="e73e8fb606fcd7318a8222b2e50c576ed3ad8702",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx",statementMap:{0:{start:{line:6,column:22},end:{line:10,column:5}},1:{start:{line:11,column:4},end:{line:11,column:154}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:12,column:3}},line:5}},branchMap:{0:{loc:{start:{line:11,column:11},end:{line:11,column:153}},type:"cond-expr",locations:[{start:{line:11,column:52},end:{line:11,column:92}},{start:{line:11,column:111},end:{line:11,column:153}}],line:11}},s:{0:0,1:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Collapser.tsx"],names:[],mappings:"AAeoC;AAfpC,OAAO,WAAW;AAClB,SAAQ,iBAAiB,qBAAoB;AAO7C,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY;AAAA,MAChB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,GAAG,KAAK,MAAM;AAAA,IAChB;AACA,WAAO,KAAK,MAAM,cAAc,oBAAC,iBAAc,OAAO,WAAU,IAAK,oBAAC,mBAAgB,OAAO,WAAW;AAAA,EAC1G;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e73e8fb606fcd7318a8222b2e50c576ed3ad8702"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return pg=function(){return l},l}pg();class sne extends sr.Component{render(){pg().f[0]++;const e=(pg().s[0]++,{width:20,height:20,...this.props.style});return pg().s[1]++,this.props.isCollapsed?(pg().b[0][0]++,le.jsx($V,{style:e})):(pg().b[0][1]++,le.jsx(VV,{style:e}))}}function X1(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",e="b04bfec534013c327fd210571832bbd2813a944a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:32,column:9}},1:{start:{line:11,column:25},end:{line:11,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:33,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:25},end:{line:11,column:72}},line:11}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListGroup.tsx"],names:[],mappings:"AAcM,SAIE,KAJF;AAdN,OAAO,WAAW;AAClB,OAAO,eAAe;AAUtB,qBAAqB,uBAAuB,MAAM,UAA+B;AAAA,EAC/E,SAAS;AACP,WAAO,oBAAC,QAAG,WAAU,6BACnB;AAAA,MAAC;AAAA;AAAA,QAAI,WAAU;AAAA,QACb,eAAa,sBAAoB,KAAK,MAAM,aAAa;AAAA,QACzD,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,QAE7D;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,iBAAe,KAAK,MAAM,eAAe;AAAA,cACzC,iBAAe,KAAK,MAAM;AAAA,cAEzB,eAAK,MAAM;AAAA;AAAA,UACd;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ,IAAI,OAAO,GAAG;AAAA,cAC/B,aAAa,KAAK,MAAM;AAAA;AAAA,UAC1B;AAAA;AAAA;AAAA,IACF,GACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b04bfec534013c327fd210571832bbd2813a944a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return X1=function(){return l},l}X1();class ane extends sr.Component{render(){return X1().f[0]++,X1().s[0]++,le.jsx("li",{className:"maputnik-layer-list-group",children:le.jsxs("div",{className:"maputnik-layer-list-group-header","data-wd-key":"layer-list-group:"+this.props["data-wd-key"],onClick:e=>(X1().f[1]++,X1().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:[le.jsx("button",{className:"maputnik-layer-list-group-title","aria-controls":this.props["aria-controls"],"aria-expanded":this.props.isActive,children:this.props.title}),le.jsx("span",{className:"maputnik-space"}),le.jsx(sne,{style:{height:14,width:14},isCollapsed:this.props.isActive})]})})}}function BC(){return BC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},BC.apply(null,arguments)}function lne(n){if(Array.isArray(n))return n}function une(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,l,o=[],p=!0,v=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(p=(r=s.call(t)).done)&&(o.push(r.value),o.length!==e);p=!0);}catch(x){v=!0,i=x}finally{try{if(!p&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(v)throw i}}return o}}function I6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function VU(n,e){if(n){if(typeof n=="string")return I6(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?I6(n,e):void 0}}function Ane(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $U(n,e){return lne(n)||une(n,e)||VU(n,e)||Ane()}function wy(n){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(n)}function cne(n,e){if(wy(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(wy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function HU(n){var e=cne(n,"string");return wy(e)=="symbol"?e:e+""}function ja(n,e,t){return(e=HU(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function U4(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&r.push.apply(r,Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.forEach(function(i){ja(n,i,t[i])})}return n}function n_(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function dne(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,HU(r.key),r)}}function r_(n,e,t){return e&&dne(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ss(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vO(n,e){if(e&&(wy(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ss(n)}function OC(n){return OC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},OC(n)}function k6(n,e){return k6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},k6(n,e)}function CO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&k6(n,e)}var z4,c9;function hne(){if(c9)return z4;c9=1;var n=function(e,t,r,i,s,l,o,p){if(!e){var v;if(t===void 0)v=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var x=[r,i,s,l,o,p],B=0;v=new Error(t.replace(/%s/g,function(){return x[B++]})),v.name="Invariant Violation"}throw v.framesToPop=1,v}};return z4=n,z4}var fne=hne();const Lg=yl(fne);function pne(n){if(Array.isArray(n))return I6(n)}function mne(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function gne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yne(n){return pne(n)||mne(n)||VU(n)||gne()}var vne=function(){function n(){n_(this,n),ja(this,"refs",{})}return r_(n,[{key:"add",value:function(t,r){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(r)}},{key:"remove",value:function(t,r){var i=this.getIndex(t,r);i!==-1&&this.refs[t].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find(function(r){var i=r.node;return i.sortableInfo.index==t.active.index})}},{key:"getIndex",value:function(t,r){return this.refs[t].indexOf(r)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[t].sort(Cne)}}]),n}();function Cne(n,e){var t=n.node.sortableInfo.index,r=e.node.sortableInfo.index;return t-r}function ZU(n,e){return Object.keys(n).reduce(function(t,r){return e.indexOf(r)===-1&&(t[r]=n[r]),t},{})}var _1={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},XU=function(){if(typeof window>"u"||typeof document>"u")return"";var n=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(n).join("").match(/-(moz|webkit|ms)-/)||n.OLink===""&&["","o"])[1];switch(e){case"ms":return"ms";default:return e&&e.length?e[0].toUpperCase()+e.substr(1):""}}();function ab(n,e){Object.keys(e).forEach(function(t){n.style[t]=e[t]})}function lb(n,e){n.style["".concat(XU,"Transform")]=e==null?"":"translate3d(".concat(e.x,"px,").concat(e.y,"px,0)")}function j4(n,e){n.style["".concat(XU,"TransitionDuration")]=e==null?"":"".concat(e,"ms")}function Dv(n,e){for(;n;){if(e(n))return n;n=n.parentNode}return null}function d9(n,e,t){return Math.max(n,Math.min(t,e))}function J1(n){return n.substr(-2)==="px"?parseFloat(n):0}function _ne(n){var e=window.getComputedStyle(n);return{bottom:J1(e.marginBottom),left:J1(e.marginLeft),right:J1(e.marginRight),top:J1(e.marginTop)}}function _O(n,e){var t=e.displayName||e.name;return t?"".concat(n,"(").concat(t,")"):n}function N4(n,e){var t=n.getBoundingClientRect();return{top:t.top+e.top,left:t.left+e.left}}function Cv(n){return n.touches&&n.touches.length?{x:n.touches[0].pageX,y:n.touches[0].pageY}:n.changedTouches&&n.changedTouches.length?{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}:{x:n.pageX,y:n.pageY}}function bne(n){return n.touches&&n.touches.length||n.changedTouches&&n.changedTouches.length}function Eb(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(n){var r={left:t.left+n.offsetLeft,top:t.top+n.offsetTop};return n.parentNode===e?r:Eb(n.parentNode,e,r)}}function xne(n,e,t){return n<t&&n>e?n-1:n>t&&n<e?n+1:n}function h9(n){var e=n.lockOffset,t=n.width,r=n.height,i=e,s=e,l="px";if(typeof e=="string"){var o=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(e);Lg(o!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',e),i=parseFloat(e),s=parseFloat(e),l=o[1]}return Lg(isFinite(i)&&isFinite(s),"lockOffset value should be a finite. Given %s",e),l==="%"&&(i=i*t/100,s=s*r/100),{x:i,y:s}}function Mne(n){var e=n.height,t=n.width,r=n.lockOffset,i=Array.isArray(r)?r:[r,r];Lg(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var s=$U(i,2),l=s[0],o=s[1];return[h9({height:e,lockOffset:l,width:t}),h9({height:e,lockOffset:o,width:t})]}function wne(n){var e=window.getComputedStyle(n),t=/(auto|scroll)/,r=["overflow","overflowX","overflowY"];return r.find(function(i){return t.test(e[i])})}function JU(n){return n instanceof HTMLElement?wne(n)?n:JU(n.parentNode):null}function Sne(n){var e=window.getComputedStyle(n);return e.display==="grid"?{x:J1(e.gridColumnGap),y:J1(e.gridRowGap)}:{x:0,y:0}}var lg={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},mg={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Ene(n){var e="input, textarea, select, canvas, [contenteditable]",t=n.querySelectorAll(e),r=n.cloneNode(!0),i=yne(r.querySelectorAll(e));return i.forEach(function(s,l){if(s.type!=="file"&&(s.value=t[l].value),s.type==="radio"&&s.name&&(s.name="__sortableClone__".concat(s.name)),s.tagName===mg.Canvas&&t[l].width>0&&t[l].height>0){var o=s.getContext("2d");o.drawImage(t[l],0,0)}}),r}function Bne(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){CO(s,i);function s(){var l,o;n_(this,s);for(var p=arguments.length,v=new Array(p),x=0;x<p;x++)v[x]=arguments[x];return o=vO(this,(l=OC(s)).call.apply(l,[this].concat(v))),ja(ss(ss(o)),"wrappedInstance",Ai.createRef()),o}return r_(s,[{key:"componentDidMount",value:function(){var o=ax.findDOMNode(this);o.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Lg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return Ai.createElement(n,BC({ref:o},this.props))}}]),s}(Ai.Component),ja(e,"displayName",_O("sortableHandle",n)),t}function f9(n){return n.sortableHandle!=null}var One=function(){function n(e,t){n_(this,n),this.container=e,this.onScrollCallback=t}return r_(n,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(t){var r=this,i=t.translate,s=t.minTranslate,l=t.maxTranslate,o=t.width,p=t.height,v={x:0,y:0},x={x:1,y:1},B={x:10,y:10},T=this.container,P=T.scrollTop,U=T.scrollLeft,j=T.scrollHeight,N=T.scrollWidth,q=T.clientHeight,H=T.clientWidth,oe=P===0,te=j-P-q===0,V=U===0,ne=N-U-H===0;i.y>=l.y-p/2&&!te?(v.y=1,x.y=B.y*Math.abs((l.y-p/2-i.y)/p)):i.x>=l.x-o/2&&!ne?(v.x=1,x.x=B.x*Math.abs((l.x-o/2-i.x)/o)):i.y<=s.y+p/2&&!oe?(v.y=-1,x.y=B.y*Math.abs((i.y-p/2-s.y)/p)):i.x<=s.x+o/2&&!V&&(v.x=-1,x.x=B.x*Math.abs((i.x-o/2-s.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(v.x!==0||v.y!==0)&&(this.interval=setInterval(function(){r.isAutoScrolling=!0;var W={left:x.x*v.x,top:x.y*v.y};r.container.scrollTop+=W.top,r.container.scrollLeft+=W.left,r.onScrollCallback(W)},5))}}]),n}();function Ine(n){var e=n.node;return{height:e.offsetHeight,width:e.offsetWidth}}function kne(n){var e=[mg.Input,mg.Textarea,mg.Select,mg.Option,mg.Button];return!!(e.indexOf(n.target.tagName)!==-1||Dv(n.target,function(t){return t.contentEditable==="true"}))}var ez={axis:pi.oneOf(["x","y","xy"]),contentWindow:pi.any,disableAutoscroll:pi.bool,distance:pi.number,getContainer:pi.func,getHelperDimensions:pi.func,helperClass:pi.string,helperContainer:pi.oneOfType([pi.func,typeof HTMLElement>"u"?pi.any:pi.instanceOf(HTMLElement)]),hideSortableGhost:pi.bool,keyboardSortingTransitionDuration:pi.number,lockAxis:pi.string,lockOffset:pi.oneOfType([pi.number,pi.string,pi.arrayOf(pi.oneOfType([pi.number,pi.string]))]),lockToContainerEdges:pi.bool,onSortEnd:pi.func,onSortMove:pi.func,onSortOver:pi.func,onSortStart:pi.func,pressDelay:pi.number,pressThreshold:pi.number,keyCodes:pi.shape({lift:pi.arrayOf(pi.number),drop:pi.arrayOf(pi.number),cancel:pi.arrayOf(pi.number),up:pi.arrayOf(pi.number),down:pi.arrayOf(pi.number)}),shouldCancelStart:pi.func,transitionDuration:pi.number,updateBeforeSortStart:pi.func,useDragHandle:pi.bool,useWindowAsScrollContainer:pi.bool},tz={lift:[lg.SPACE],drop:[lg.SPACE],cancel:[lg.ESC],up:[lg.UP,lg.LEFT],down:[lg.DOWN,lg.RIGHT]},Tne={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:Ine,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:tz,shouldCancelStart:kne,transitionDuration:300,useWindowAsScrollContainer:!1},Pne=Object.keys(ez);function Kne(n){Lg(!(n.distance&&n.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function Rne(n,e){try{var t=n()}catch(r){return e(!0,r)}return t&&t.then?t.then(e.bind(null,!1),e.bind(null,!0)):e(!1,value)}var nz=Ai.createContext({manager:{}});function Dne(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){CO(s,i);function s(l){var o;n_(this,s),o=vO(this,OC(s).call(this,l)),ja(ss(ss(o)),"state",{}),ja(ss(ss(o)),"handleStart",function(v){var x=o.props,B=x.distance,T=x.shouldCancelStart;if(!(v.button===2||T(v))){o.touched=!0,o.position=Cv(v);var P=Dv(v.target,function(oe){return oe.sortableInfo!=null});if(P&&P.sortableInfo&&o.nodeIsChild(P)&&!o.state.sorting){var U=o.props.useDragHandle,j=P.sortableInfo,N=j.index,q=j.collection,H=j.disabled;if(H||U&&!Dv(v.target,f9))return;o.manager.active={collection:q,index:N},!bne(v)&&v.target.tagName===mg.Anchor&&v.preventDefault(),B||(o.props.pressDelay===0?o.handlePress(v):o.pressTimer=setTimeout(function(){return o.handlePress(v)},o.props.pressDelay))}}}),ja(ss(ss(o)),"nodeIsChild",function(v){return v.sortableInfo.manager===o.manager}),ja(ss(ss(o)),"handleMove",function(v){var x=o.props,B=x.distance,T=x.pressThreshold;if(!o.state.sorting&&o.touched&&!o._awaitingUpdateBeforeSortStart){var P=Cv(v),U={x:o.position.x-P.x,y:o.position.y-P.y},j=Math.abs(U.x)+Math.abs(U.y);o.delta=U,!B&&(!T||j>=T)?(clearTimeout(o.cancelTimer),o.cancelTimer=setTimeout(o.cancel,0)):B&&j>=B&&o.manager.isActive()&&o.handlePress(v)}}),ja(ss(ss(o)),"handleEnd",function(){o.touched=!1,o.cancel()}),ja(ss(ss(o)),"cancel",function(){var v=o.props.distance,x=o.state.sorting;x||(v||clearTimeout(o.pressTimer),o.manager.active=null)}),ja(ss(ss(o)),"handlePress",function(v){try{var x=o.manager.getActive(),B=function(){if(x){var T=function(){var fe=V.sortableInfo.index,Ee=_ne(V),me=Sne(o.container),Me=o.scrollContainer.getBoundingClientRect(),De=j({index:fe,node:V,collection:ne});if(o.node=V,o.margin=Ee,o.gridGap=me,o.width=De.width,o.height=De.height,o.marginOffset={x:o.margin.left+o.margin.right+o.gridGap.x,y:Math.max(o.margin.top,o.margin.bottom,o.gridGap.y)},o.boundingClientRect=V.getBoundingClientRect(),o.containerBoundingRect=Me,o.index=fe,o.newIndex=fe,o.axis={x:U.indexOf("x")>=0,y:U.indexOf("y")>=0},o.offsetEdge=Eb(V,o.container),W?o.initialOffset=Cv(U4({},v,{pageX:o.boundingClientRect.left,pageY:o.boundingClientRect.top})):o.initialOffset=Cv(v),o.initialScroll={left:o.scrollContainer.scrollLeft,top:o.scrollContainer.scrollTop},o.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},o.helper=o.helperContainer.appendChild(Ene(V)),ab(o.helper,{boxSizing:"border-box",height:"".concat(o.height,"px"),left:"".concat(o.boundingClientRect.left-Ee.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(o.boundingClientRect.top-Ee.top,"px"),width:"".concat(o.width,"px")}),W&&o.helper.focus(),q&&(o.sortableGhost=V,ab(V,{opacity:0,visibility:"hidden"})),o.minTranslate={},o.maxTranslate={},W){var xe=te?{top:0,left:0,width:o.contentWindow.innerWidth,height:o.contentWindow.innerHeight}:o.containerBoundingRect,At=xe.top,Ze=xe.left,Xe=xe.width,Ne=xe.height,Se=At+Ne,Re=Ze+Xe;o.axis.x&&(o.minTranslate.x=Ze-o.boundingClientRect.left,o.maxTranslate.x=Re-(o.boundingClientRect.left+o.width)),o.axis.y&&(o.minTranslate.y=At-o.boundingClientRect.top,o.maxTranslate.y=Se-(o.boundingClientRect.top+o.height))}else o.axis.x&&(o.minTranslate.x=(te?0:Me.left)-o.boundingClientRect.left-o.width/2,o.maxTranslate.x=(te?o.contentWindow.innerWidth:Me.left+Me.width)-o.boundingClientRect.left-o.width/2),o.axis.y&&(o.minTranslate.y=(te?0:Me.top)-o.boundingClientRect.top-o.height/2,o.maxTranslate.y=(te?o.contentWindow.innerHeight:Me.top+Me.height)-o.boundingClientRect.top-o.height/2);N&&N.split(" ").forEach(function(He){return o.helper.classList.add(He)}),o.listenerNode=v.touches?v.target:o.contentWindow,W?(o.listenerNode.addEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.addEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.addEventListener("keydown",o.handleKeyDown)):(_1.move.forEach(function(He){return o.listenerNode.addEventListener(He,o.handleSortMove,!1)}),_1.end.forEach(function(He){return o.listenerNode.addEventListener(He,o.handleSortEnd,!1)})),o.setState({sorting:!0,sortingIndex:fe}),oe&&oe({node:V,index:fe,collection:ne,isKeySorting:W,nodes:o.manager.getOrderedRefs(),helper:o.helper},v),W&&o.keyMove(0)},P=o.props,U=P.axis,j=P.getHelperDimensions,N=P.helperClass,q=P.hideSortableGhost,H=P.updateBeforeSortStart,oe=P.onSortStart,te=P.useWindowAsScrollContainer,V=x.node,ne=x.collection,W=o.manager.isKeySorting,ie=function(){if(typeof H=="function"){o._awaitingUpdateBeforeSortStart=!0;var he=Rne(function(){var fe=V.sortableInfo.index;return Promise.resolve(H({collection:ne,index:fe,node:V,isKeySorting:W},v)).then(function(){})},function(fe,Ee){if(o._awaitingUpdateBeforeSortStart=!1,fe)throw Ee;return Ee});if(he&&he.then)return he.then(function(){})}}();return ie&&ie.then?ie.then(T):T(ie)}}();return Promise.resolve(B&&B.then?B.then(function(){}):void 0)}catch(T){return Promise.reject(T)}}),ja(ss(ss(o)),"handleSortMove",function(v){var x=o.props.onSortMove;typeof v.preventDefault=="function"&&v.cancelable&&v.preventDefault(),o.updateHelperPosition(v),o.animateNodes(),o.autoscroll(),x&&x(v)}),ja(ss(ss(o)),"handleSortEnd",function(v){var x=o.props,B=x.hideSortableGhost,T=x.onSortEnd,P=o.manager,U=P.active.collection,j=P.isKeySorting,N=o.manager.getOrderedRefs();o.listenerNode&&(j?(o.listenerNode.removeEventListener("wheel",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("mousedown",o.handleKeyEnd,!0),o.listenerNode.removeEventListener("keydown",o.handleKeyDown)):(_1.move.forEach(function(V){return o.listenerNode.removeEventListener(V,o.handleSortMove)}),_1.end.forEach(function(V){return o.listenerNode.removeEventListener(V,o.handleSortEnd)}))),o.helper.parentNode.removeChild(o.helper),B&&o.sortableGhost&&ab(o.sortableGhost,{opacity:"",visibility:""});for(var q=0,H=N.length;q<H;q++){var oe=N[q],te=oe.node;oe.edgeOffset=null,oe.boundingClientRect=null,lb(te,null),j4(te,null),oe.translate=null}o.autoScroller.clear(),o.manager.active=null,o.manager.isKeySorting=!1,o.setState({sorting:!1,sortingIndex:null}),typeof T=="function"&&T({collection:U,newIndex:o.newIndex,oldIndex:o.index,isKeySorting:j,nodes:N},v),o.touched=!1}),ja(ss(ss(o)),"autoscroll",function(){var v=o.props.disableAutoscroll,x=o.manager.isKeySorting;if(v){o.autoScroller.clear();return}if(x){var B=U4({},o.translate),T=0,P=0;o.axis.x&&(B.x=Math.min(o.maxTranslate.x,Math.max(o.minTranslate.x,o.translate.x)),T=o.translate.x-B.x),o.axis.y&&(B.y=Math.min(o.maxTranslate.y,Math.max(o.minTranslate.y,o.translate.y)),P=o.translate.y-B.y),o.translate=B,lb(o.helper,o.translate),o.scrollContainer.scrollLeft+=T,o.scrollContainer.scrollTop+=P;return}o.autoScroller.update({height:o.height,maxTranslate:o.maxTranslate,minTranslate:o.minTranslate,translate:o.translate,width:o.width})}),ja(ss(ss(o)),"onAutoScroll",function(v){o.translate.x+=v.left,o.translate.y+=v.top,o.animateNodes()}),ja(ss(ss(o)),"handleKeyDown",function(v){var x=v.keyCode,B=o.props,T=B.shouldCancelStart,P=B.keyCodes,U=P===void 0?{}:P,j=U4({},tz,U);o.manager.active&&!o.manager.isKeySorting||!o.manager.active&&(!j.lift.includes(x)||T(v)||!o.isValidSortingTarget(v))||(v.stopPropagation(),v.preventDefault(),j.lift.includes(x)&&!o.manager.active?o.keyLift(v):j.drop.includes(x)&&o.manager.active?o.keyDrop(v):j.cancel.includes(x)?(o.newIndex=o.manager.active.index,o.keyDrop(v)):j.up.includes(x)?o.keyMove(-1):j.down.includes(x)&&o.keyMove(1))}),ja(ss(ss(o)),"keyLift",function(v){var x=v.target,B=Dv(x,function(j){return j.sortableInfo!=null}),T=B.sortableInfo,P=T.index,U=T.collection;o.initialFocusedNode=x,o.manager.isKeySorting=!0,o.manager.active={index:P,collection:U},o.handlePress(v)}),ja(ss(ss(o)),"keyMove",function(v){var x=o.manager.getOrderedRefs(),B=x[x.length-1].node.sortableInfo.index,T=o.newIndex+v,P=o.newIndex;if(!(T<0||T>B)){o.prevIndex=P,o.newIndex=T;var U=xne(o.newIndex,o.prevIndex,o.index),j=x.find(function(W){var ie=W.node;return ie.sortableInfo.index===U}),N=j.node,q=o.containerScrollDelta,H=j.boundingClientRect||N4(N,q),oe=j.translate||{x:0,y:0},te={top:H.top+oe.y-q.top,left:H.left+oe.x-q.left},V=P<T,ne={x:V&&o.axis.x?N.offsetWidth-o.width:0,y:V&&o.axis.y?N.offsetHeight-o.height:0};o.handleSortMove({pageX:te.left+ne.x,pageY:te.top+ne.y,ignoreTransition:v===0})}}),ja(ss(ss(o)),"keyDrop",function(v){o.handleSortEnd(v),o.initialFocusedNode&&o.initialFocusedNode.focus()}),ja(ss(ss(o)),"handleKeyEnd",function(v){o.manager.active&&o.keyDrop(v)}),ja(ss(ss(o)),"isValidSortingTarget",function(v){var x=o.props.useDragHandle,B=v.target,T=Dv(B,function(P){return P.sortableInfo!=null});return T&&T.sortableInfo&&!T.sortableInfo.disabled&&(x?f9(B):B.sortableInfo)});var p=new vne;return Kne(l),o.manager=p,o.wrappedInstance=Ai.createRef(),o.sortableContextValue={manager:p},o.events={end:o.handleEnd,move:o.handleMove,start:o.handleStart},o}return r_(s,[{key:"componentDidMount",value:function(){var o=this,p=this.props.useWindowAsScrollContainer,v=this.getContainer();Promise.resolve(v).then(function(x){o.container=x,o.document=o.container.ownerDocument||document;var B=o.props.contentWindow||o.document.defaultView||window;o.contentWindow=typeof B=="function"?B():B,o.scrollContainer=p?o.document.scrollingElement||o.document.documentElement:JU(o.container)||o.container,o.autoScroller=new One(o.scrollContainer,o.onAutoScroll),Object.keys(o.events).forEach(function(T){return _1[T].forEach(function(P){return o.container.addEventListener(P,o.events[T],!1)})}),o.container.addEventListener("keydown",o.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var o=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(p){return _1[p].forEach(function(v){return o.container.removeEventListener(v,o.events[p])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(o){var p=this.props,v=p.lockAxis,x=p.lockOffset,B=p.lockToContainerEdges,T=p.transitionDuration,P=p.keyboardSortingTransitionDuration,U=P===void 0?T:P,j=this.manager.isKeySorting,N=o.ignoreTransition,q=Cv(o),H={x:q.x-this.initialOffset.x,y:q.y-this.initialOffset.y};if(H.y-=window.pageYOffset-this.initialWindowScroll.top,H.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=H,B){var oe=Mne({height:this.height,lockOffset:x,width:this.width}),te=$U(oe,2),V=te[0],ne=te[1],W={x:this.width/2-V.x,y:this.height/2-V.y},ie={x:this.width/2-ne.x,y:this.height/2-ne.y};H.x=d9(this.minTranslate.x+W.x,this.maxTranslate.x-ie.x,H.x),H.y=d9(this.minTranslate.y+W.y,this.maxTranslate.y-ie.y,H.y)}v==="x"?H.y=0:v==="y"&&(H.x=0),j&&U&&!N&&j4(this.helper,U),lb(this.helper,H)}},{key:"animateNodes",value:function(){var o=this.props,p=o.transitionDuration,v=o.hideSortableGhost,x=o.onSortOver,B=this.containerScrollDelta,T=this.windowScrollDelta,P=this.manager.getOrderedRefs(),U={left:this.offsetEdge.left+this.translate.x+B.left,top:this.offsetEdge.top+this.translate.y+B.top},j=this.manager.isKeySorting,N=this.newIndex;this.newIndex=null;for(var q=0,H=P.length;q<H;q++){var oe=P[q].node,te=oe.sortableInfo.index,V=oe.offsetWidth,ne=oe.offsetHeight,W={height:this.height>ne?ne/2:this.height/2,width:this.width>V?V/2:this.width/2},ie=j&&te>this.index&&te<=N,he=j&&te<this.index&&te>=N,fe={x:0,y:0},Ee=P[q].edgeOffset;Ee||(Ee=Eb(oe,this.container),P[q].edgeOffset=Ee,j&&(P[q].boundingClientRect=N4(oe,B)));var me=q<P.length-1&&P[q+1],Me=q>0&&P[q-1];if(me&&!me.edgeOffset&&(me.edgeOffset=Eb(me.node,this.container),j&&(me.boundingClientRect=N4(me.node,B))),te===this.index){v&&(this.sortableGhost=oe,ab(oe,{opacity:0,visibility:"hidden"}));continue}p&&j4(oe,p),this.axis.x?this.axis.y?he||te<this.index&&(U.left+T.left-W.width<=Ee.left&&U.top+T.top<=Ee.top+W.height||U.top+T.top+W.height<=Ee.top)?(fe.x=this.width+this.marginOffset.x,Ee.left+fe.x>this.containerBoundingRect.width-W.width&&me&&(fe.x=me.edgeOffset.left-Ee.left,fe.y=me.edgeOffset.top-Ee.top),this.newIndex===null&&(this.newIndex=te)):(ie||te>this.index&&(U.left+T.left+W.width>=Ee.left&&U.top+T.top+W.height>=Ee.top||U.top+T.top+W.height>=Ee.top+ne))&&(fe.x=-(this.width+this.marginOffset.x),Ee.left+fe.x<this.containerBoundingRect.left+W.width&&Me&&(fe.x=Me.edgeOffset.left-Ee.left,fe.y=Me.edgeOffset.top-Ee.top),this.newIndex=te):ie||te>this.index&&U.left+T.left+W.width>=Ee.left?(fe.x=-(this.width+this.marginOffset.x),this.newIndex=te):(he||te<this.index&&U.left+T.left<=Ee.left+W.width)&&(fe.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=te)):this.axis.y&&(ie||te>this.index&&U.top+T.top+W.height>=Ee.top?(fe.y=-(this.height+this.marginOffset.y),this.newIndex=te):(he||te<this.index&&U.top+T.top<=Ee.top+W.height)&&(fe.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=te))),lb(oe,fe),P[q].translate=fe}this.newIndex==null&&(this.newIndex=this.index),j&&(this.newIndex=N);var De=j?this.prevIndex:N;x&&this.newIndex!==De&&x({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:De,isKeySorting:j,nodes:P,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Lg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var o=this.props.getContainer;return typeof o!="function"?ax.findDOMNode(this):o(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return Ai.createElement(nz.Provider,{value:this.sortableContextValue},Ai.createElement(n,BC({ref:o},ZU(this.props,Pne))))}},{key:"helperContainer",get:function(){var o=this.props.helperContainer;return typeof o=="function"?o():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var o=this.props.useWindowAsScrollContainer;return o?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),s}(Ai.Component),ja(e,"displayName",_O("sortableList",n)),ja(e,"defaultProps",Tne),ja(e,"propTypes",ez),t}var rz={index:pi.number.isRequired,collection:pi.oneOfType([pi.number,pi.string]),disabled:pi.bool},Fne=Object.keys(rz);function Lne(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return t=e=function(i){CO(s,i);function s(){var l,o;n_(this,s);for(var p=arguments.length,v=new Array(p),x=0;x<p;x++)v[x]=arguments[x];return o=vO(this,(l=OC(s)).call.apply(l,[this].concat(v))),ja(ss(ss(o)),"wrappedInstance",Ai.createRef()),o}return r_(s,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(o){this.node&&(o.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),o.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),o.collection!==this.props.collection&&(this.unregister(o.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var o=this.props,p=o.collection,v=o.disabled,x=o.index,B=ax.findDOMNode(this);B.sortableInfo={collection:p,disabled:v,index:x,manager:this.context.manager},this.node=B,this.ref={node:B},this.context.manager.add(p,this.ref)}},{key:"unregister",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(o,this.ref)}},{key:"getWrappedInstance",value:function(){return Lg(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var o=r.withRef?this.wrappedInstance:null;return Ai.createElement(n,BC({ref:o},ZU(this.props,Fne)))}}]),s}(Ai.Component),ja(e,"displayName",_O("sortableElement",n)),ja(e,"contextType",nz),ja(e,"propTypes",rz),ja(e,"defaultProps",{collection:0}),t}function ro(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",e="c4894131c5d7f6ef28da960f43f4c830425a38cb",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx",statementMap:{0:{start:{line:8,column:23},end:{line:19,column:2}},1:{start:{line:9,column:2},end:{line:18,column:7}},2:{start:{line:22,column:4},end:{line:31,column:5}},3:{start:{line:24,column:8},end:{line:24,column:54}},4:{start:{line:26,column:8},end:{line:26,column:53}},5:{start:{line:28,column:8},end:{line:28,column:56}},6:{start:{line:30,column:8},end:{line:30,column:49}},7:{start:{line:34,column:51},end:{line:34,column:61}},8:{start:{line:35,column:25},end:{line:35,column:27}},9:{start:{line:36,column:4},end:{line:41,column:5}},10:{start:{line:37,column:6},end:{line:37,column:76}},11:{start:{line:38,column:6},end:{line:40,column:7}},12:{start:{line:39,column:8},end:{line:39,column:103}},13:{start:{line:42,column:4},end:{line:53,column:6}},14:{start:{line:57,column:24},end:{line:66,column:3}},15:{start:{line:67,column:29},end:{line:69,column:3}},16:{start:{line:71,column:4},end:{line:73,column:6}},17:{start:{line:76,column:29},end:{line:76,column:82}},18:{start:{line:77,column:4},end:{line:122,column:6}},19:{start:{line:81,column:25},end:{line:81,column:72}},20:{start:{line:97,column:31},end:{line:97,column:79}},21:{start:{line:106,column:31},end:{line:106,column:76}},22:{start:{line:116,column:31},end:{line:116,column:88}},23:{start:{line:125,column:30},end:{line:125,column:106}},24:{start:{line:125,column:73},end:{line:125,column:105}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:38},end:{line:8,column:39}},loc:{start:{line:8,column:49},end:{line:19,column:1}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:15},end:{line:32,column:3}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:11},end:{line:54,column:3}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:60,column:17},end:{line:60,column:18}},loc:{start:{line:60,column:23},end:{line:61,column:5}},line:60},4:{name:"(anonymous_4)",decl:{start:{line:62,column:20},end:{line:62,column:21}},loc:{start:{line:62,column:26},end:{line:63,column:5}},line:62},5:{name:"(anonymous_5)",decl:{start:{line:64,column:29},end:{line:64,column:30}},loc:{start:{line:64,column:35},end:{line:65,column:5}},line:64},6:{name:"(anonymous_6)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:20},end:{line:74,column:3}},line:70},7:{name:"(anonymous_7)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:11},end:{line:123,column:3}},line:75},8:{name:"(anonymous_8)",decl:{start:{line:81,column:17},end:{line:81,column:18}},loc:{start:{line:81,column:25},end:{line:81,column:72}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:97,column:23},end:{line:97,column:24}},loc:{start:{line:97,column:31},end:{line:97,column:79}},line:97},10:{name:"(anonymous_10)",decl:{start:{line:106,column:23},end:{line:106,column:24}},loc:{start:{line:106,column:31},end:{line:106,column:76}},line:106},11:{name:"(anonymous_11)",decl:{start:{line:116,column:23},end:{line:116,column:24}},loc:{start:{line:116,column:31},end:{line:116,column:88}},line:116},12:{name:"(anonymous_12)",decl:{start:{line:125,column:46},end:{line:125,column:47}},loc:{start:{line:125,column:73},end:{line:125,column:105}},line:125}},branchMap:{0:{loc:{start:{line:22,column:4},end:{line:31,column:5}},type:"switch",locations:[{start:{line:23,column:6},end:{line:24,column:54}},{start:{line:25,column:6},end:{line:26,column:53}},{start:{line:27,column:6},end:{line:28,column:56}},{start:{line:29,column:6},end:{line:30,column:49}}],line:22},1:{loc:{start:{line:36,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},2:{loc:{start:{line:38,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:38,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},3:{loc:{start:{line:76,column:29},end:{line:76,column:82}},type:"cond-expr",locations:[{start:{line:76,column:67},end:{line:76,column:73}},{start:{line:76,column:76},end:{line:76,column:82}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0,0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerListItem.tsx"],names:[],mappings:"AAgBS,SACL,KADK;AAhBT,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AAEvB,SAAQ,eAAe,cAAc,iBAAiB,gBAAe;AAErE,OAAO,eAAe;AACtB,SAAQ,iBAAiB,sBAAqB;AAQ9C,MAAM,iBAAiB,eAAe,CAAC,UAA+B;AACpE,SAAO,qBAAC,SAAI,WAAU,mCACpB;AAAA;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,IACd;AAAA,IACA,oBAAC,YAAO,WAAU,+BACf,gBAAM,SACT;AAAA,KACF;AACF,CAAC;AAUD,MAAM,mBAAmB,MAAM,UAA2B;AAAA,EACxD,aAAa;AACX,YAAO,KAAK,MAAM,QAAQ;AAAA,MAC1B,KAAK;AAAa,eAAO,oBAAC,iBAAc;AAAA,MACxC,KAAK;AAAQ,eAAO,oBAAC,gBAAa;AAAA,MAClC,KAAK;AAAQ,eAAO,oBAAC,mBAAgB;AAAA,MACrC,KAAK;AAAU,eAAO,oBAAC,YAAS;AAAA,IAChC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,gBAAgB,mBAAkB,IAAI,KAAK;AAElD,QAAI,iBAAiB;AACrB,QAAI,gBAAgB;AAClB,uBAAiB,oCAAoC,cAAc;AAEnE,UAAI,oBAAoB;AACtB,0BAAkB,qCAAqC,cAAc,KAAK,kBAAkB;AAAA,MAC9F;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,UAAU;AAAA,QACV,OAAO,KAAK,MAAM;AAAA,QAClB,WAAW,mCAAmC,cAAc;AAAA,QAC5D,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QACpB,eAAY;AAAA,QAEX,eAAK,WAAW;AAAA;AAAA,IACnB;AAAA,EACF;AACF;AAgBA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,aAAa,MAAM;AAAA,IAAC;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,yBAAyB,MAAM;AAAA,IAAC;AAAA,EAClC;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,mBAAmB,KAAK,MAAM,eAAe,YAAY,SAAS;AAExE,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QAEf,SAAS,QAAM,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU;AAAA,QAC7D,eAAa,qBAAmB,KAAK,MAAM;AAAA,QAC3C,WAAW,WAAW;AAAA,UACpB,4BAA4B;AAAA,UAC5B,qCAAqC,KAAK,MAAM;AAAA,UAChD,CAAC,KAAK,MAAM,SAAU,GAAG;AAAA,QAC3B,CAAC;AAAA,QACD;AAAA,8BAAC,kBAAgB,GAAG,KAAK,OAAO;AAAA,UAChC,oBAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAG;AAAA,UAC5B;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,eAAgB,KAAK,MAAM,UAAU;AAAA;AAAA,UACjE;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,SAAS,QAAM,KAAK,MAAM,YAAa,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9D;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,qBAAmB,KAAK,MAAM,UAAQ;AAAA,cAC7C,QAAQ;AAAA,cACR,gBAAe;AAAA,cACf,oBAAoB;AAAA,cACpB,SAAS,QAAM,KAAK,MAAM,wBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1E;AAAA;AAAA;AAAA,MA5BK,KAAK,MAAM;AAAA,IA6BlB;AAAA,EACF;AACF;AAEA,MAAM,wBAAwB,gBAAoC,CAAC,UAA8B,oBAAC,iBAAe,GAAG,OAAO,CAAE;AAE7H,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4894131c5d7f6ef28da960f43f4c830425a38cb"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ro=function(){return l},l}ro();const Une=(ro().s[0]++,Bne(n=>(ro().f[0]++,ro().s[1]++,le.jsxs("div",{className:"maputnik-layer-list-item-handle",children:[le.jsx(NF,{className:"layer-handle__icon",type:n.layerType}),le.jsx("button",{className:"maputnik-layer-list-item-id",children:n.layerId})]}))));class W4 extends sr.Component{renderIcon(){switch(ro().f[1]++,ro().s[2]++,this.props.action){case"duplicate":return ro().b[0][0]++,ro().s[3]++,le.jsx(NV,{});case"show":return ro().b[0][1]++,ro().s[4]++,le.jsx(jV,{});case"hide":return ro().b[0][2]++,ro().s[5]++,le.jsx(zV,{});case"delete":return ro().b[0][3]++,ro().s[6]++,le.jsx(Ty,{})}}render(){ro().f[2]++;const{classBlockName:e,classBlockModifier:t}=(ro().s[7]++,this.props);let r=(ro().s[8]++,"");return ro().s[9]++,e?(ro().b[1][0]++,ro().s[10]++,r=`maputnik-layer-list-icon-action__${e}`,ro().s[11]++,t?(ro().b[2][0]++,ro().s[12]++,r+=` maputnik-layer-list-icon-action__${e}--${t}`):ro().b[2][1]++):ro().b[1][1]++,ro().s[13]++,le.jsx("button",{tabIndex:-1,title:this.props.action,className:`maputnik-layer-list-icon-action ${r}`,"data-wd-key":this.props.wdKey,onClick:this.props.onClick,"aria-hidden":"true",children:this.renderIcon()})}}class T6 extends sr.Component{getChildContext(){return ro().f[6]++,ro().s[16]++,{reactIconBase:{size:14}}}render(){ro().f[7]++;const e=(ro().s[17]++,this.props.visibility==="visible"?(ro().b[3][0]++,"show"):(ro().b[3][1]++,"hide"));return ro().s[18]++,le.jsxs("li",{id:this.props.id,onClick:t=>(ro().f[8]++,ro().s[19]++,this.props.onLayerSelect(this.props.layerIndex)),"data-wd-key":"layer-list-item:"+this.props.layerId,className:em({"maputnik-layer-list-item":!0,"maputnik-layer-list-item-selected":this.props.isSelected,[this.props.className]:!0}),children:[le.jsx(Une,{...this.props}),le.jsx("span",{style:{flexGrow:1}}),le.jsx(W4,{wdKey:"layer-list-item:"+this.props.layerId+":delete",action:"delete",classBlockName:"delete",onClick:t=>(ro().f[9]++,ro().s[20]++,this.props.onLayerDestroy(this.props.layerIndex))}),le.jsx(W4,{wdKey:"layer-list-item:"+this.props.layerId+":copy",action:"duplicate",classBlockName:"duplicate",onClick:t=>(ro().f[10]++,ro().s[21]++,this.props.onLayerCopy(this.props.layerIndex))}),le.jsx(W4,{wdKey:"layer-list-item:"+this.props.layerId+":toggle-visibility",action:e,classBlockName:"visibility",classBlockModifier:e,onClick:t=>(ro().f[11]++,ro().s[22]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))})]},this.props.layerId)}}Pn(T6,"defaultProps",(ro().s[14]++,{isSelected:!1,visibility:"visible",onLayerCopy:()=>{ro().f[3]++},onLayerDestroy:()=>{ro().f[4]++},onLayerVisibilityToggle:()=>{ro().f[5]++}})),Pn(T6,"childContextTypes",(ro().s[15]++,{reactIconBase:pi.object}));const zne=(ro().s[23]++,Lne(n=>(ro().f[12]++,ro().s[24]++,le.jsx(T6,{...n}))));function _2(){var n="/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",e="522bfc6b8aacbfd03b55d947af2897dc69beb570",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:20,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:21,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputButton.tsx"],names:[],mappings:"AAkBW;AAlBX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAevB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,IAAI,KAAK,MAAM;AAAA,QACf,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,SAAS,KAAK,MAAM;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,cAAY,KAAK,MAAM,YAAY;AAAA,QACnC,WAAW,WAAW,mBAAmB,KAAK,MAAM,SAAS;AAAA,QAC7D,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAEjB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"522bfc6b8aacbfd03b55d947af2897dc69beb570"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _2=function(){return l},l}_2();class il extends sr.Component{render(){return _2().f[0]++,_2().s[0]++,le.jsx("button",{id:this.props.id,title:this.props.title,type:this.props.type,onClick:this.props.onClick,disabled:this.props.disabled,"aria-label":this.props["aria-label"],className:em("maputnik-button",this.props.className),"data-wd-key":this.props["data-wd-key"],style:this.props.style,children:this.props.children})}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var iz=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],b2=iz.join(","),oz=typeof Element>"u",Ug=oz?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,x2=!oz&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},M2=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",l=s||t&&e&&n(e.parentNode);return l},jne=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},sz=function(e,t,r){if(M2(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(b2));return t&&Ug.call(e,b2)&&i.unshift(e),i=i.filter(r),i},az=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var l=s.shift();if(!M2(l,!1))if(l.tagName==="SLOT"){var o=l.assignedElements(),p=o.length?o:l.children,v=n(p,!0,r);r.flatten?i.push.apply(i,v):i.push({scopeParent:l,candidates:v})}else{var x=Ug.call(l,b2);x&&r.filter(l)&&(t||!e.includes(l))&&i.push(l);var B=l.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(l),T=!M2(B,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(B&&T){var P=n(B===!0?l.children:B.children,!0,r);r.flatten?i.push.apply(i,P):i.push({scopeParent:l,candidates:P})}else s.unshift.apply(s,l.children)}}return i},lz=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},C0=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||jne(e))&&!lz(e)?0:e.tabIndex},Nne=function(e,t){var r=C0(e);return r<0&&t&&!lz(e)?0:r},Wne=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},uz=function(e){return e.tagName==="INPUT"},Gne=function(e){return uz(e)&&e.type==="hidden"},Qne=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},Yne=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},qne=function(e){if(!e.name)return!0;var t=e.form||x2(e),r=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var s=Yne(i,e.form);return!s||s===e},Vne=function(e){return uz(e)&&e.type==="radio"},$ne=function(e){return Vne(e)&&!qne(e)},Hne=function(e){var t,r=e&&x2(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var l,o,p;for(s=!!((l=i)!==null&&l!==void 0&&(o=l.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(p=e.ownerDocument)!==null&&p!==void 0&&p.contains(e));!s&&i;){var v,x,B;r=x2(i),i=(v=r)===null||v===void 0?void 0:v.host,s=!!((x=i)!==null&&x!==void 0&&(B=x.ownerDocument)!==null&&B!==void 0&&B.contains(i))}}return s},p9=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},Zne=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Ug.call(e,"details>summary:first-of-type"),l=s?e.parentElement:e;if(Ug.call(l,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var o=e;e;){var p=e.parentElement,v=x2(e);if(p&&!p.shadowRoot&&i(p)===!0)return p9(e);e.assignedSlot?e=e.assignedSlot:!p&&v!==e.ownerDocument?e=v.host:e=p}e=o}if(Hne(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return p9(e);return!1},Xne=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return Ug.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},w2=function(e,t){return!(t.disabled||M2(t)||Gne(t)||Zne(t,e)||Qne(t)||Xne(t))},P6=function(e,t){return!($ne(t)||C0(t)<0||!w2(e,t))},Jne=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},ere=function n(e){var t=[],r=[];return e.forEach(function(i,s){var l=!!i.scopeParent,o=l?i.scopeParent:i,p=Nne(o,l),v=l?n(i.candidates):o;p===0?l?t.push.apply(t,v):t.push(o):r.push({documentOrder:s,tabIndex:p,item:i,isScope:l,content:v})}),r.sort(Wne).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},Az=function(e,t){t=t||{};var r;return t.getShadowRoot?r=az([e],t.includeContainer,{filter:P6.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Jne}):r=sz(e,t.includeContainer,P6.bind(null,t)),ere(r)},cz=function(e,t){t=t||{};var r;return t.getShadowRoot?r=az([e],t.includeContainer,{filter:w2.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=sz(e,t.includeContainer,w2.bind(null,t)),r},hg=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Ug.call(e,b2)===!1?!1:P6(t,e)},tre=iz.concat("iframe").join(","),Bb=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Ug.call(e,tre)===!1?!1:w2(t,e)};const nre=Object.freeze(Object.defineProperty({__proto__:null,focusable:cz,getTabIndex:C0,isFocusable:Bb,isTabbable:hg,tabbable:Az},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function m9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function g9(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?m9(Object(t),!0).forEach(function(r){rre(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function rre(n,e,t){return e=ore(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ire(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ore(n){var e=ire(n,"string");return typeof e=="symbol"?e:String(e)}var y9={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},sre=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},are=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},tC=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},lre=function(e){return tC(e)&&!e.shiftKey},ure=function(e){return tC(e)&&e.shiftKey},v9=function(e){return setTimeout(e,0)},C9=function(e,t){var r=-1;return e.every(function(i,s){return t(i)?(r=s,!1):!0}),r},_v=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},ub=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Are=[],cre=function(e,t){var r=(t==null?void 0:t.document)||document,i=(t==null?void 0:t.trapStack)||Are,s=g9({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:lre,isKeyBackward:ure},t),l={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,p=function(me,Me,De){return me&&me[Me]!==void 0?me[Me]:s[De||Me]},v=function(me,Me){var De=typeof(Me==null?void 0:Me.composedPath)=="function"?Me.composedPath():void 0;return l.containerGroups.findIndex(function(xe){var At=xe.container,Ze=xe.tabbableNodes;return At.contains(me)||(De==null?void 0:De.includes(At))||Ze.find(function(Xe){return Xe===me})})},x=function(me){var Me=s[me];if(typeof Me=="function"){for(var De=arguments.length,xe=new Array(De>1?De-1:0),At=1;At<De;At++)xe[At-1]=arguments[At];Me=Me.apply(void 0,xe)}if(Me===!0&&(Me=void 0),!Me){if(Me===void 0||Me===!1)return Me;throw new Error("`".concat(me,"` was specified but was not a node, or did not return a node"))}var Ze=Me;if(typeof Me=="string"&&(Ze=r.querySelector(Me),!Ze))throw new Error("`".concat(me,"` as selector refers to no known node"));return Ze},B=function(){var me=x("initialFocus");if(me===!1)return!1;if(me===void 0||!Bb(me,s.tabbableOptions))if(v(r.activeElement)>=0)me=r.activeElement;else{var Me=l.tabbableGroups[0],De=Me&&Me.firstTabbableNode;me=De||x("fallbackFocus")}if(!me)throw new Error("Your focus-trap needs to have at least one focusable element");return me},T=function(){if(l.containerGroups=l.containers.map(function(me){var Me=Az(me,s.tabbableOptions),De=cz(me,s.tabbableOptions),xe=Me.length>0?Me[0]:void 0,At=Me.length>0?Me[Me.length-1]:void 0,Ze=De.find(function(Se){return hg(Se)}),Xe=De.slice().reverse().find(function(Se){return hg(Se)}),Ne=!!Me.find(function(Se){return C0(Se)>0});return{container:me,tabbableNodes:Me,focusableNodes:De,posTabIndexesFound:Ne,firstTabbableNode:xe,lastTabbableNode:At,firstDomTabbableNode:Ze,lastDomTabbableNode:Xe,nextTabbableNode:function(Re){var He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,_t=Me.indexOf(Re);return _t<0?He?De.slice(De.indexOf(Re)+1).find(function(Gt){return hg(Gt)}):De.slice(0,De.indexOf(Re)).reverse().find(function(Gt){return hg(Gt)}):Me[_t+(He?1:-1)]}}}),l.tabbableGroups=l.containerGroups.filter(function(me){return me.tabbableNodes.length>0}),l.tabbableGroups.length<=0&&!x("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(l.containerGroups.find(function(me){return me.posTabIndexesFound})&&l.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},P=function Ee(me){var Me=me.activeElement;if(Me)return Me.shadowRoot&&Me.shadowRoot.activeElement!==null?Ee(Me.shadowRoot):Me},U=function Ee(me){if(me!==!1&&me!==P(document)){if(!me||!me.focus){Ee(B());return}me.focus({preventScroll:!!s.preventScroll}),l.mostRecentlyFocusedNode=me,sre(me)&&me.select()}},j=function(me){var Me=x("setReturnFocus",me);return Me||(Me===!1?!1:me)},N=function(me){var Me=me.target,De=me.event,xe=me.isBackward,At=xe===void 0?!1:xe;Me=Me||ub(De),T();var Ze=null;if(l.tabbableGroups.length>0){var Xe=v(Me,De),Ne=Xe>=0?l.containerGroups[Xe]:void 0;if(Xe<0)At?Ze=l.tabbableGroups[l.tabbableGroups.length-1].lastTabbableNode:Ze=l.tabbableGroups[0].firstTabbableNode;else if(At){var Se=C9(l.tabbableGroups,function(Ft){var Tt=Ft.firstTabbableNode;return Me===Tt});if(Se<0&&(Ne.container===Me||Bb(Me,s.tabbableOptions)&&!hg(Me,s.tabbableOptions)&&!Ne.nextTabbableNode(Me,!1))&&(Se=Xe),Se>=0){var Re=Se===0?l.tabbableGroups.length-1:Se-1,He=l.tabbableGroups[Re];Ze=C0(Me)>=0?He.lastTabbableNode:He.lastDomTabbableNode}else tC(De)||(Ze=Ne.nextTabbableNode(Me,!1))}else{var _t=C9(l.tabbableGroups,function(Ft){var Tt=Ft.lastTabbableNode;return Me===Tt});if(_t<0&&(Ne.container===Me||Bb(Me,s.tabbableOptions)&&!hg(Me,s.tabbableOptions)&&!Ne.nextTabbableNode(Me))&&(_t=Xe),_t>=0){var Gt=_t===l.tabbableGroups.length-1?0:_t+1,yt=l.tabbableGroups[Gt];Ze=C0(Me)>=0?yt.firstTabbableNode:yt.firstDomTabbableNode}else tC(De)||(Ze=Ne.nextTabbableNode(Me))}}else Ze=x("fallbackFocus");return Ze},q=function(me){var Me=ub(me);if(!(v(Me,me)>=0)){if(_v(s.clickOutsideDeactivates,me)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}_v(s.allowOutsideClick,me)||me.preventDefault()}},H=function(me){var Me=ub(me),De=v(Me,me)>=0;if(De||Me instanceof Document)De&&(l.mostRecentlyFocusedNode=Me);else{me.stopImmediatePropagation();var xe,At=!0;if(l.mostRecentlyFocusedNode)if(C0(l.mostRecentlyFocusedNode)>0){var Ze=v(l.mostRecentlyFocusedNode),Xe=l.containerGroups[Ze].tabbableNodes;if(Xe.length>0){var Ne=Xe.findIndex(function(Se){return Se===l.mostRecentlyFocusedNode});Ne>=0&&(s.isKeyForward(l.recentNavEvent)?Ne+1<Xe.length&&(xe=Xe[Ne+1],At=!1):Ne-1>=0&&(xe=Xe[Ne-1],At=!1))}}else l.containerGroups.some(function(Se){return Se.tabbableNodes.some(function(Re){return C0(Re)>0})})||(At=!1);else At=!1;At&&(xe=N({target:l.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(l.recentNavEvent)})),U(xe||l.mostRecentlyFocusedNode||B())}l.recentNavEvent=void 0},oe=function(me){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;l.recentNavEvent=me;var De=N({event:me,isBackward:Me});De&&(tC(me)&&me.preventDefault(),U(De))},te=function(me){if(are(me)&&_v(s.escapeDeactivates,me)!==!1){me.preventDefault(),o.deactivate();return}(s.isKeyForward(me)||s.isKeyBackward(me))&&oe(me,s.isKeyBackward(me))},V=function(me){var Me=ub(me);v(Me,me)>=0||_v(s.clickOutsideDeactivates,me)||_v(s.allowOutsideClick,me)||(me.preventDefault(),me.stopImmediatePropagation())},ne=function(){if(l.active)return y9.activateTrap(i,o),l.delayInitialFocusTimer=s.delayInitialFocus?v9(function(){U(B())}):U(B()),r.addEventListener("focusin",H,!0),r.addEventListener("mousedown",q,{capture:!0,passive:!1}),r.addEventListener("touchstart",q,{capture:!0,passive:!1}),r.addEventListener("click",V,{capture:!0,passive:!1}),r.addEventListener("keydown",te,{capture:!0,passive:!1}),o},W=function(){if(l.active)return r.removeEventListener("focusin",H,!0),r.removeEventListener("mousedown",q,!0),r.removeEventListener("touchstart",q,!0),r.removeEventListener("click",V,!0),r.removeEventListener("keydown",te,!0),o},ie=function(me){var Me=me.some(function(De){var xe=Array.from(De.removedNodes);return xe.some(function(At){return At===l.mostRecentlyFocusedNode})});Me&&U(B())},he=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ie):void 0,fe=function(){he&&(he.disconnect(),l.active&&!l.paused&&l.containers.map(function(me){he.observe(me,{subtree:!0,childList:!0})}))};return o={get active(){return l.active},get paused(){return l.paused},activate:function(me){if(l.active)return this;var Me=p(me,"onActivate"),De=p(me,"onPostActivate"),xe=p(me,"checkCanFocusTrap");xe||T(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=r.activeElement,Me==null||Me();var At=function(){xe&&T(),ne(),fe(),De==null||De()};return xe?(xe(l.containers.concat()).then(At,At),this):(At(),this)},deactivate:function(me){if(!l.active)return this;var Me=g9({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},me);clearTimeout(l.delayInitialFocusTimer),l.delayInitialFocusTimer=void 0,W(),l.active=!1,l.paused=!1,fe(),y9.deactivateTrap(i,o);var De=p(Me,"onDeactivate"),xe=p(Me,"onPostDeactivate"),At=p(Me,"checkCanReturnFocus"),Ze=p(Me,"returnFocus","returnFocusOnDeactivate");De==null||De();var Xe=function(){v9(function(){Ze&&U(j(l.nodeFocusedBeforeActivation)),xe==null||xe()})};return Ze&&At?(At(j(l.nodeFocusedBeforeActivation)).then(Xe,Xe),this):(Xe(),this)},pause:function(me){if(l.paused||!l.active)return this;var Me=p(me,"onPause"),De=p(me,"onPostPause");return l.paused=!0,Me==null||Me(),W(),fe(),De==null||De(),this},unpause:function(me){if(!l.paused||!l.active)return this;var Me=p(me,"onUnpause"),De=p(me,"onPostUnpause");return l.paused=!1,Me==null||Me(),T(),ne(),fe(),De==null||De(),this},updateContainerElements:function(me){var Me=[].concat(me).filter(Boolean);return l.containers=Me.map(function(De){return typeof De=="string"?r.querySelector(De):De}),l.active&&T(),fe(),this}},o.updateContainerElements(e),o};const dre=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:cre},Symbol.toStringTag,{value:"Module"})),hre=j6(dre),fre=j6(nre);var G4,_9;function pre(){if(_9)return G4;_9=1;function n(ne){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},n(ne)}function e(ne,W){if(!(ne instanceof W))throw new TypeError("Cannot call a class as a function")}function t(ne,W){for(var ie=0;ie<W.length;ie++){var he=W[ie];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(ne,T(he.key),he)}}function r(ne,W,ie){return t(ne.prototype,W),Object.defineProperty(ne,"prototype",{writable:!1}),ne}function i(ne,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(W&&W.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),Object.defineProperty(ne,"prototype",{writable:!1}),W&&s(ne,W)}function s(ne,W){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,fe){return he.__proto__=fe,he},s(ne,W)}function l(ne){var W=v();return function(){var he=x(ne),fe;if(W){var Ee=x(this).constructor;fe=Reflect.construct(he,arguments,Ee)}else fe=he.apply(this,arguments);return o(this,fe)}}function o(ne,W){if(W&&(n(W)==="object"||typeof W=="function"))return W;if(W!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(ne)}function p(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(ne){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},x(ne)}function B(ne,W,ie){return W=T(W),W in ne?Object.defineProperty(ne,W,{value:ie,enumerable:!0,configurable:!0,writable:!0}):ne[W]=ie,ne}function T(ne){var W=P(ne,"string");return n(W)==="symbol"?W:String(W)}function P(ne,W){if(n(ne)!=="object"||ne===null)return ne;var ie=ne[Symbol.toPrimitive];if(ie!==void 0){var he=ie.call(ne,W||"default");if(n(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(ne)}var U=Na(),j=yp(),N=hre,q=N.createFocusTrap,H=fre,oe=H.isFocusable,te=function(ne){i(ie,ne);var W=l(ie);function ie(he){var fe;e(this,ie),fe=W.call(this,he),B(p(fe),"getNodeForOption",function(Me){var De,xe=(De=this.internalOptions[Me])!==null&&De!==void 0?De:this.originalOptions[Me];if(typeof xe=="function"){for(var At=arguments.length,Ze=new Array(At>1?At-1:0),Xe=1;Xe<At;Xe++)Ze[Xe-1]=arguments[Xe];xe=xe.apply(void 0,Ze)}if(xe===!0&&(xe=void 0),!xe){if(xe===void 0||xe===!1)return xe;throw new Error("`".concat(Me,"` was specified but was not a node, or did not return a node"))}var Ne=xe;if(typeof xe=="string"){var Se;if(Ne=(Se=this.getDocument())===null||Se===void 0?void 0:Se.querySelector(xe),!Ne)throw new Error("`".concat(Me,"` as selector refers to no known node"))}return Ne}),fe.handleDeactivate=fe.handleDeactivate.bind(p(fe)),fe.handlePostDeactivate=fe.handlePostDeactivate.bind(p(fe)),fe.handleClickOutsideDeactivates=fe.handleClickOutsideDeactivates.bind(p(fe)),fe.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:fe.handleDeactivate,onPostDeactivate:fe.handlePostDeactivate,clickOutsideDeactivates:fe.handleClickOutsideDeactivates},fe.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var Ee=he.focusTrapOptions;for(var me in Ee)if(Object.prototype.hasOwnProperty.call(Ee,me)){if(me==="returnFocusOnDeactivate"||me==="onDeactivate"||me==="onPostDeactivate"||me==="checkCanReturnFocus"||me==="clickOutsideDeactivates"){fe.originalOptions[me]=Ee[me];continue}fe.internalOptions[me]=Ee[me]}return fe.outsideClick=null,fe.focusTrapElements=he.containerElements||[],fe.updatePreviousElement(),fe}return r(ie,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var fe=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return fe||(fe===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var fe=this.getDocument();fe&&(this.previouslyFocusedElement=fe.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(fe){var Ee=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,fe):this.originalOptions.clickOutsideDeactivates;return Ee&&(this.outsideClick={target:fe.target,allowDeactivation:Ee}),Ee}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var fe=this,Ee=function(){var Me=fe.getReturnFocusNode(),De=!!(fe.originalOptions.returnFocusOnDeactivate&&Me!==null&&Me!==void 0&&Me.focus&&(!fe.outsideClick||fe.outsideClick.allowDeactivation&&!oe(fe.outsideClick.target,fe.internalOptions.tabbableOptions))),xe=fe.internalOptions.preventScroll,At=xe===void 0?!1:xe;De&&Me.focus({preventScroll:At}),fe.originalOptions.onPostDeactivate&&fe.originalOptions.onPostDeactivate.call(null),fe.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(Ee,Ee):Ee()}},{key:"setupFocusTrap",value:function(){if(this.focusTrap)this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause());else{var fe=this.focusTrapElements.some(Boolean);fe&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(fe){if(this.focusTrap){fe.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var Ee=!fe.active&&this.props.active,me=fe.active&&!this.props.active,Me=!fe.paused&&this.props.paused,De=fe.paused&&!this.props.paused;if(Ee&&(this.updatePreviousElement(),this.focusTrap.activate()),me){this.deactivateTrap();return}Me&&this.focusTrap.pause(),De&&this.focusTrap.unpause()}else fe.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var fe=this,Ee=this.props.children?U.Children.only(this.props.children):void 0;if(Ee){if(Ee.type&&Ee.type===U.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var me=function(xe){var At=fe.props.containerElements;Ee&&(typeof Ee.ref=="function"?Ee.ref(xe):Ee.ref&&(Ee.ref.current=xe)),fe.focusTrapElements=At||[xe]},Me=U.cloneElement(Ee,{ref:me});return Me}return null}}]),ie}(U.Component),V=typeof Element>"u"?Function:Element;return te.propTypes={active:j.bool,paused:j.bool,focusTrapOptions:j.shape({document:j.object,onActivate:j.func,onPostActivate:j.func,checkCanFocusTrap:j.func,onPause:j.func,onPostPause:j.func,onUnpause:j.func,onPostUnpause:j.func,onDeactivate:j.func,onPostDeactivate:j.func,checkCanReturnFocus:j.func,initialFocus:j.oneOfType([j.instanceOf(V),j.string,j.bool,j.func]),fallbackFocus:j.oneOfType([j.instanceOf(V),j.string,j.func]),escapeDeactivates:j.oneOfType([j.bool,j.func]),clickOutsideDeactivates:j.oneOfType([j.bool,j.func]),returnFocusOnDeactivate:j.bool,setReturnFocus:j.oneOfType([j.instanceOf(V),j.string,j.bool,j.func]),allowOutsideClick:j.oneOfType([j.bool,j.func]),preventScroll:j.bool,tabbableOptions:j.shape({displayCheck:j.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:j.oneOfType([j.bool,j.func])}),trapStack:j.array,isKeyForward:j.func,isKeyBackward:j.func}),containerElements:j.arrayOf(j.instanceOf(V)),children:j.oneOfType([j.element,j.instanceOf(V)])},te.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:q},G4=te,G4}var Q4={exports:{}},b9;function mre(){return b9||(b9=1,function(n){(function(e){var t=!1,r,i;function s(){if(typeof r<"u")return r;var B=document.documentElement,T=document.createElement("div");return T.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),B.appendChild(T),r=T.offsetWidth-T.clientWidth,B.removeChild(T),r}function l(){return document.documentElement.scrollHeight>window.innerHeight}function o(B){if(!(typeof document>"u"||t)){var T=document.documentElement;i=window.pageYOffset,l()?T.style.width="calc(100% - "+s()+"px)":T.style.width="100%",T.style.position="fixed",T.style.top=-i+"px",T.style.overflow="hidden",t=!0}}function p(){if(!(typeof document>"u"||!t)){var B=document.documentElement;B.style.width="",B.style.position="",B.style.top="",B.style.overflow="",window.scroll(0,i),t=!1}}function v(){if(t){p();return}o()}var x={on:o,off:p,toggle:v};n.exports=x})()}(Q4)),Q4.exports}var Y4,x9;function gre(){if(x9)return Y4;x9=1;function n(oe){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},n(oe)}function e(oe,te){if(!(oe instanceof te))throw new TypeError("Cannot call a class as a function")}function t(oe,te){for(var V=0;V<te.length;V++){var ne=te[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(oe,ne.key,ne)}}function r(oe,te,V){return te&&t(oe.prototype,te),Object.defineProperty(oe,"prototype",{writable:!1}),oe}function i(oe,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(te&&te.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),Object.defineProperty(oe,"prototype",{writable:!1}),te&&s(oe,te)}function s(oe,te){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ne,W){return ne.__proto__=W,ne},s(oe,te)}function l(oe){var te=v();return function(){var ne=x(oe),W;if(te){var ie=x(this).constructor;W=Reflect.construct(ne,arguments,ie)}else W=ne.apply(this,arguments);return o(this,W)}}function o(oe,te){if(te&&(n(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(oe)}function p(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x(oe){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(V){return V.__proto__||Object.getPrototypeOf(V)},x(oe)}function B(oe,te,V){return te in oe?Object.defineProperty(oe,te,{value:V,enumerable:!0,configurable:!0,writable:!0}):oe[te]=V,oe}var T=Na(),P=RC(),U=pre(),j=mre(),N=function(oe){i(V,oe);var te=l(V);function V(ne){var W;if(e(this,V),W=te.call(this,ne),B(p(W),"getApplicationNode",function(){return W.props.getApplicationNode?W.props.getApplicationNode():W.props.applicationNode}),B(p(W),"checkUnderlayClick",function(ie){W.dialogNode&&W.dialogNode.contains(ie.target)||ie.pageX>ie.target.ownerDocument.documentElement.offsetWidth||ie.pageY>ie.target.ownerDocument.documentElement.offsetHeight||W.exit(ie)}),B(p(W),"checkDocumentKeyDown",function(ie){W.props.escapeExits&&(ie.key==="Escape"||ie.key==="Esc"||ie.keyCode===27)&&W.exit(ie)}),B(p(W),"exit",function(ie){W.props.onExit&&W.props.onExit(ie)}),!ne.titleText&&!ne.titleId)throw new Error("react-aria-modal instances should have a `titleText` or `titleId`");return W}return r(V,[{key:"componentDidMount",value:function(){this.props.onEnter&&this.props.onEnter();var W=this.getApplicationNode();setTimeout(function(){W&&W.setAttribute("aria-hidden","true")},0),this.props.escapeExits&&this.addKeyDownListener(),this.props.scrollDisabled&&j.on()}},{key:"componentDidUpdate",value:function(W){W.scrollDisabled&&!this.props.scrollDisabled?j.off():!W.scrollDisabled&&this.props.scrollDisabled&&j.on(),this.props.escapeExits&&!W.escapeExits?this.addKeyDownListener():!this.props.escapeExits&&W.escapeExits&&this.removeKeyDownListener()}},{key:"componentWillUnmount",value:function(){this.props.scrollDisabled&&j.off();var W=this.getApplicationNode();W&&W.setAttribute("aria-hidden","false"),this.removeKeyDownListener()}},{key:"addKeyDownListener",value:function(){var W=this;setTimeout(function(){document.addEventListener("keydown",W.checkDocumentKeyDown)})}},{key:"removeKeyDownListener",value:function(){var W=this;setTimeout(function(){document.removeEventListener("keydown",W.checkDocumentKeyDown)})}},{key:"render",value:function(){var W=this.props,ie={};if(W.includeDefaultStyles&&(ie={position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050,overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch",textAlign:"center"},W.underlayColor&&(ie.background=W.underlayColor),W.underlayClickExits&&(ie.cursor="pointer")),W.underlayStyle)for(var he in W.underlayStyle)W.underlayStyle.hasOwnProperty(he)&&(ie[he]=W.underlayStyle[he]);var fe={className:W.underlayClass,style:ie};W.underlayClickExits&&(fe.onMouseDown=this.checkUnderlayClick);for(var Ee in this.props.underlayProps)fe[Ee]=this.props.underlayProps[Ee];var me={};W.includeDefaultStyles&&(me={display:"inline-block",height:"100%",verticalAlign:"middle"});var Me={key:"a",style:me},De={};if(W.includeDefaultStyles&&(De={display:"inline-block",textAlign:"left",top:0,maxWidth:"100%",cursor:"auto",outline:W.focusDialog?0:null},W.verticallyCenter&&(De.verticalAlign="middle",De.top=0)),W.dialogStyle)for(var xe in W.dialogStyle)W.dialogStyle.hasOwnProperty(xe)&&(De[xe]=W.dialogStyle[xe]);var At={key:"b",ref:(function(Se){this.dialogNode=Se}).bind(this),role:W.alert?"alertdialog":"dialog",id:W.dialogId,className:W.dialogClass,style:De};W.titleId?At["aria-labelledby"]=W.titleId:W.titleText&&(At["aria-label"]=W.titleText),W.focusDialog&&(At.tabIndex="-1");for(var Ze in W)/^(data-|aria-)/.test(Ze)&&(At[Ze]=W[Ze]);var Xe=[T.createElement("div",At,W.children)];W.verticallyCenter&&Xe.unshift(T.createElement("div",Me));var Ne=W.focusTrapOptions||{};return(W.focusDialog||W.initialFocus)&&(Ne.initialFocus=W.focusDialog?"#".concat(this.props.dialogId):W.initialFocus),Ne.escapeDeactivates=W.escapeExits,T.createElement(U,{focusTrapOptions:Ne,paused:W.focusTrapPaused},T.createElement("div",fe,Xe))}}]),V}(T.Component);B(N,"defaultProps",{underlayProps:{},dialogId:"react-aria-modal-dialog",underlayClickExits:!0,escapeExits:!0,underlayColor:"rgba(0,0,0,0.5)",includeDefaultStyles:!0,focusTrapPaused:!1,scrollDisabled:!0});function q(oe,te){if(!window.document)return function(){return null};te=te||{};var V=function(ne){i(ie,ne);var W=l(ie);function ie(){var he;e(this,ie);for(var fe=arguments.length,Ee=new Array(fe),me=0;me<fe;me++)Ee[me]=arguments[me];return he=W.call.apply(W,[this].concat(Ee)),B(p(he),"container",null),he}return r(ie,[{key:"componentDidMount",value:function(){te.renderTo?this.container=typeof te.renderTo=="string"?document.querySelector(te.renderTo):te.renderTo:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){te.renderTo||this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){return this.container===null||!this.props.mounted?null:P.createPortal(T.createElement(oe,this.props,this.props.children),this.container)}}]),ie}(T.Component);return B(V,"defaultProps",{mounted:!0}),V}var H=q(N);return H.renderTo=function(oe){return q(N,{renderTo:oe})},Y4=H,Y4}var yre=gre();const vre=yl(yre);function RA(){var n="/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",e="55b511200efca707daa3ccb304d63dc159a8f390",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Modal.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:10,column:3}},1:{start:{line:12,column:12},end:{line:19,column:3}},2:{start:{line:13,column:4},end:{line:15,column:5}},3:{start:{line:14,column:6},end:{line:14,column:36}},4:{start:{line:16,column:4},end:{line:18,column:10}},5:{start:{line:17,column:6},end:{line:17,column:37}},6:{start:{line:21,column:14},end:{line:21,column:26}},7:{start:{line:22,column:4},end:{line:60,column:5}},8:{start:{line:23,column:6},end:{line:57,column:8}},9:{start:{line:59,column:6},end:{line:59,column:19}},10:{start:{line:63,column:14},end:{line:63,column:46}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:18},end:{line:19,column:3}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:15},end:{line:16,column:16}},loc:{start:{line:16,column:21},end:{line:18,column:5}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:61,column:3}},line:20}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:13},1:{loc:{start:{line:22,column:4},end:{line:60,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:60,column:5}},{start:{line:58,column:11},end:{line:60,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Modal.tsx"],names:[],mappings:"AAgDU,SACE,KADF;AAhDV,OAAO,WAAkC;AACzC,SAAQ,eAAc;AACtB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,SAA0B,uBAAuB;AAajD,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,OAAO,eAAe;AAAA,IACpB,oBAAoB;AAAA,EACtB;AAAA;AAAA,EAGA,UAAU,MAAM;AACd,QAAI,SAAS,eAAe;AAC1B,MAAC,SAAS,cAA8B,KAAK;AAAA,IAC/C;AAEA,eAAW,MAAM;AACf,WAAK,MAAM,aAAa,KAAK;AAAA,IAC/B,GAAG,CAAC;AAAA,EACN;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAG,KAAK,MAAM,QAAQ;AACpB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,WAAW,KAAK,MAAM;AAAA,UACtB,oBAAoB,KAAK,MAAM;AAAA,UAE/B,eAAe,KAAK,MAAM;AAAA,UAC1B,eAAa,KAAK,MAAM,aAAa;AAAA,UACrC,kBAAkB;AAAA,UAClB,QAAQ,KAAK;AAAA,UAEb;AAAA,YAAC;AAAA;AAAA,cAAI,WAAW,WAAW,kBAAkB,KAAK,MAAM,SAAS;AAAA,cAC/D,eAAa,KAAK,MAAM,aAAa;AAAA,cAErC;AAAA,qCAAC,YAAO,WAAU,yBAChB;AAAA,sCAAC,QAAG,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,kBAC9D,oBAAC,UAAK,WAAU,+BAA8B;AAAA,kBAC9C;AAAA,oBAAC;AAAA;AAAA,sBAAO,WAAU;AAAA,sBAChB,OAAO,EAAE,aAAa;AAAA,sBACtB,SAAS,KAAK;AAAA,sBACd,eAAa,KAAK,MAAM,aAAa,IAAE;AAAA,sBAEvC,8BAAC,WAAQ;AAAA;AAAA,kBACX;AAAA,mBACF;AAAA,gBACA,oBAAC,SAAI,WAAU,2BACb,8BAAC,SAAI,WAAU,0BAA0B,eAAK,MAAM,UAAS,GAC/D;AAAA;AAAA;AAAA,UACF;AAAA;AAAA,MACF;AAAA,IACF,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,MAAM,QAAQ,gBAAgB,EAAE,aAAa;AAC7C,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"55b511200efca707daa3ccb304d63dc159a8f390"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return RA=function(){return l},l}RA();class dz extends sr.Component{constructor(){super(...arguments);Pn(this,"onClose",(RA().s[1]++,()=>{RA().f[0]++,RA().s[2]++,document.activeElement?(RA().b[0][0]++,RA().s[3]++,document.activeElement.blur()):RA().b[0][1]++,RA().s[4]++,setTimeout(()=>{RA().f[1]++,RA().s[5]++,this.props.onOpenToggle(!1)},0)}))}render(){RA().f[2]++;const t=(RA().s[6]++,this.props.t);return RA().s[7]++,this.props.isOpen?(RA().b[1][0]++,RA().s[8]++,le.jsx(vre,{titleText:this.props.title,underlayClickExits:this.props.underlayClickExits,underlayProps:this.props.underlayProps,"data-wd-key":this.props["data-wd-key"],verticallyCenter:!0,onExit:this.onClose,children:le.jsxs("div",{className:em("maputnik-modal",this.props.className),"data-wd-key":this.props["data-wd-key"],children:[le.jsxs("header",{className:"maputnik-modal-header",children:[le.jsx("h1",{className:"maputnik-modal-header-title",children:this.props.title}),le.jsx("span",{className:"maputnik-modal-header-space"}),le.jsx("button",{className:"maputnik-modal-header-toggle",title:t("Close modal"),onClick:this.onClose,"data-wd-key":this.props["data-wd-key"]+".close-modal",children:le.jsx(HV,{})})]}),le.jsx("div",{className:"maputnik-modal-scroller",children:le.jsx("div",{className:"maputnik-modal-content",children:this.props.children})})]})})):(RA().b[1][1]++,RA().s[9]++,!1)}}Pn(dz,"defaultProps",(RA().s[0]++,{underlayClickExits:!0}));const L0=(RA().s[10]++,Ws()(dz)),Cre=8,_re={version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"styleeditor:slimmode":!0,"styleeditor:comment":"Style generated 1677776383","styleeditor:version":"3.14.159265","example:object":{String:"one",Number:2,Boolean:!1}}},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},centerAltitude:{type:"number",doc:"Default map center altitude in meters above sea level. The style center altitude defines the altitude where the camera is looking at and will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:123.4,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2980",ios:"https://github.com/maplibre/maplibre-native/issues/2980"}}},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50,"sdk-support":{"0-60 degrees":{js:"0.8.0",android:"1.0.0",ios:"1.0.0"},"0-85 degrees":{js:"2.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"},"0-180 degrees":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/1909",ios:"https://github.com/maplibre/maplibre-native/issues/1909"}}},roll:{type:"number",default:0,units:"degrees",doc:"Default roll, in degrees. The roll angle is measured counterclockwise about the camera boresight. The style roll will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:45,"sdk-support":{"basic functionality":{js:"5.0.0",android:"https://github.com/maplibre/maplibre-native/issues/2941",ios:"https://github.com/maplibre/maplibre-native/issues/2941"}}},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sky:{type:"sky",doc:"The map's sky configuration. **Note:** this definition is still experimental and is under development in maplibre-gl-js.",example:{"sky-color":"#199EF3","sky-horizon-blend":.5,"horizon-color":"#ffffff","horizon-fog-blend":.5,"fog-color":"#0000ff","fog-ground-blend":.5,"atmosphere-blend":["interpolate",["linear"],["zoom"],0,1,10,1,12,0]}},projection:{type:"projection",doc:"The projection configuration",example:{type:["interpolate",["linear"],["zoom"],10,"vertical-perspective",12,"mercator"]}},terrain:{type:"terrain",doc:"The terrain configuration.",example:{source:"raster-dem-source",exaggeration:.5}},sources:{required:!0,type:"sources",doc:"Sources state which data the map should display. Specify the type of source with the `type` property. Adding a source isn't enough to make data appear on the map because sources don't contain styling details like color or width. Layers refer to a source and give it a visual representation. This makes it possible to style the same source in different ways, like differentiating between types of roads in a highways layer.\n\nTiled sources (vector and raster) must specify their details according to the [TileJSON specification](https://github.com/mapbox/tilejson-spec).",example:{"maplibre-demotiles":{type:"vector",url:"https://demotiles.maplibre.org/tiles/tiles.json"},"maplibre-tilejson":{type:"vector",url:"http://api.example.com/tilejson.json"},"maplibre-streets":{type:"vector",tiles:["http://a.example.com/tiles/{z}/{x}/{y}.pbf","http://b.example.com/tiles/{z}/{x}/{y}.pbf"],maxzoom:14},"wms-imagery":{type:"raster",tiles:["http://a.example.com/wms?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=example"],tileSize:256}}},sprite:{type:"sprite",doc:"An array of `{id: 'my-sprite', url: 'https://example.com/sprite'}` objects. Each object should represent a unique URL to load a sprite from and and a unique ID to use as a prefix when referencing images from that sprite (i.e. 'my-sprite:image'). All the URLs are internally extended to load both .json and .png files. If the `id` field is equal to 'default', the prefix is omitted (just 'image' instead of 'default:image'). All the IDs and URLs must be unique. For backwards compatibility, instead of an array, one can also provide a single string that represent a URL to load the sprite from. The images in this case won't be prefixed.",example:"https://demotiles.maplibre.org/styles/osm-bright-gl-style/sprite"},glyphs:{type:"string",doc:`A URL template for loading signed-distance-field glyph sets in PBF format. 

The URL must include:

 - \`{fontstack}\` - When requesting glyphs, this token is replaced with a comma separated list of fonts from a font stack specified in the text-font property of a symbol layer. 

 - \`{range}\` - When requesting glyphs, this token is replaced with a range of 256 Unicode code points. For example, to load glyphs for the Unicode Basic Latin and Basic Latin-1 Supplement blocks, the range would be 0-255. The actual ranges that are loaded are determined at runtime based on what text needs to be displayed.

This property is required if any layer uses the \`text-field\` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).`,example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"A style's `layers` property lists all the layers available in that style. The type of layer is specified by the `type` property, and must be one of `background`, `fill`, `line`, `symbol`, `raster`, `circle`, `fill-extrusion`, `heatmap`, `hillshade`.\n\nExcept for layers of the `background` type, each layer needs to refer to a source. Layers take the data that they get from a source, optionally filter features, and then define how those features are styled.",example:[{id:"coastline",source:"maplibre","source-layer":"countries",type:"line",paint:{"line-color":"#198EC8"}}]}},bre={"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},xre=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Mre={type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},wre={type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Sre={type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."},custom:{doc:"Decodes tiles using the redFactor, blueFactor, greenFactor, baseShift parameters."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default.","sdk-support":{"mapbox, terrarium":{js:"0.43.0",ios:"6.0.0",android:"6.0.0"},custom:{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},redFactor:{type:"number",default:1,doc:"Value that will be multiplied by the red channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},blueFactor:{type:"number",default:1,doc:"Value that will be multiplied by the blue channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},greenFactor:{type:"number",default:1,doc:"Value that will be multiplied by the green channel value when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2358",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},baseShift:{type:"number",default:0,doc:"Value that will be added to the encoding mix when decoding. Only used on custom encodings.","sdk-support":{"basic functionality":{js:"3.4.0",ios:"https://github.com/maplibre/maplibre-native/issues/2783",android:"https://github.com/maplibre/maplibre-native/issues/2783"}}},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0",js:"wontfix"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},Ere={type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{required:!0,type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n\n * `cluster` Is `true` if the point is a cluster \n\n * `cluster_id` A unique id for the cluster to be used in conjunction with the [cluster inspection methods](https://maplibre.org/maplibre-gl-js/docs/API/classes/GeoJSONSource/#getclusterexpansionzoom)\n\n * `point_count` Number of original points grouped into this cluster\n\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`)  it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},Bre={type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Ore={type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},Ire={id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. The implementation supports Mapbox Terrain RGB, Mapzen Terrarium tiles and custom encodings.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'maplibre:'.",example:{"source:comment":"Hydrology FCCODE 460 - Narrow wash"}},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},kre=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Tre={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Pre={"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Kre={"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Rre={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},Dre={"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Fre=JSON.parse('{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-overlap":{"type":"enum","values":{"never":{"doc":"The icon will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The icon will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},"doc":"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"padding","default":[2],"units":"pixels","doc":"Size of additional area round the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.2.0","android":"https://github.com/maplibre/maplibre-native/issues/2754","ios":"https://github.com/maplibre/maplibre-native/issues/2754"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{"doc":"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"},"`viewport-glyph` value":{"js":"2.1.8","android":"https://github.com/maplibre/maplibre-native/issues/250","ios":"https://github.com/maplibre/maplibre-native/issues/250"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Font stack to use for displaying text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{"type":"variableAnchorOffsetCollection","requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations, each paired with an offset value. The renderer will attempt to place the label at each location, in order, before moving on to the next location+offset. Use `text-justify: auto` to choose justification based on anchor position. \\n\\n The length of the array must be even, and must alternate between enum and point entries. i.e., each anchor location must be accompanied by a point, and that point defines the offset when the corresponding anchor location is used. Positive offset values indicate right and down, while negative values indicate left and up. Anchor locations may repeat, allowing the renderer to try multiple offsets to try and place a label using the same anchor. \\n\\n When present, this property takes precedence over `text-anchor`, `text-variable-anchor`, `text-offset`, and `text-radial-offset`. \\n\\n ```json \\n\\n { \\"text-variable-anchor-offset\\": [\\"top\\", [0, 4], \\"left\\", [3,0], \\"bottom\\", [1, 1]] } \\n\\n ``` \\n\\n When the renderer chooses the `top` anchor, `[0, 4]` will be used for `text-offset`; the text will be shifted down by 4 ems. \\n\\n When the renderer chooses the `left` anchor, `[3, 0]` will be used for `text-offset`; the text will be shifted right by 3 ems.","sdk-support":{"basic functionality":{"js":"3.3.0","ios":"6.8.0","android":"11.6.0"},"data-driven styling":{"js":"3.3.0","ios":"https://github.com/maplibre/maplibre-native/issues/2358","android":"https://github.com/maplibre/maplibre-native/issues/2358"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols with point placement would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnt support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. The order of elements in an array define priority order for the placement of an orientation variant.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-overlap":{"type":"enum","values":{"never":{"doc":"The text will be hidden if it collides with any other previously drawn symbol."},"always":{"doc":"The text will be visible even if it collides with any other previously drawn symbol."},"cooperative":{"doc":"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},"doc":"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"2.1.0","android":"https://github.com/maplibre/maplibre-native/issues/251","ios":"https://github.com/maplibre/maplibre-native/issues/251"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"property-type":"constant"}}'),Lre={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},"property-type":"constant"}},Ure={visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},"property-type":"constant"}},zre={type:"array",value:"*",doc:"A filter selects specific features from a layer."},jre={type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key]  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key]  value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key]  value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key]  {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key]  {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0  ...  fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0  ...  fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `f0  ...  fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},Nre={type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},Wre={type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},Gre={type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},Qre=JSON.parse('{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using `[\\"var\\", \\"variable_name\\"]`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string","value","expression"],"result":"value"},"value":["let","someNumber",500,["interpolate",["linear"],["var","someNumber"],274,"#edf8e9",1551,"#006d2c"]]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using `let`.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["var","density"]},"group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"literal":{"doc":"Provides a literal array or object value.\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["JSON object or array"],"result":"array | object"},"value":["literal",["DIN Offc Pro Italic","Arial Unicode MS Regular"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.","example":{"syntax":{"method":["value","string?","number?"],"result":"array"},"value":["array",["literal",["a","b","c"]],"string",3]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","example":{"syntax":{"method":["number","value"],"result":"value"},"value":["at",1,["literal",["a","b","c"]]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string.\\n\\n - [Measure distances](https://maplibre.org/maplibre-gl-js/docs/examples/measure/)","example":{"syntax":{"method":["value","value"],"result":"boolean"},"value":["in","$type","Point"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","value","number?"],"result":"number"},"value":["index-of","foo",["baz","bar","hello","foo","world"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"slice":{"doc":"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["value","number","number?"],"result":"value"},"value":["slice",["get","name"],0,3]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.3.0","ios":"6.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["case",["boolean",["feature-state","hover"],false],1,0.5]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `[\\"get\\", \\"building_type\\"]`). Each label must be either:\\n\\n - a single literal value; or\\n\\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `[\\"c\\", \\"b\\"]`). The input matches if any of the values in the array matches, similar to the `\\"in\\"` operator.\\n\\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.","example":{"syntax":{"method":["value","value","...","fallback: value"],"result":"value"},"value":["match",["get","building_type"],"residential","#f00","commercial","#0f0","#000"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["coalesce","value","fallback"],"result":"value"},"value":["coalesce",["image",["concat",["get","icon"],"_15"]],["image","marker_15"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["step","number","number","number","..."],"result":"number"},"value":["step",["get","point_count"],20,100,30,750,40]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\\n\\nInterpolation types:\\n\\n- `[\\"linear\\"]`, or an expression returning one of those types: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.\\n\\n - [Animate map camera around a point](https://maplibre.org/maplibre-gl-js/docs/examples/animate-camera-around-point/)\\n\\n - [Change building color based on zoom level](https://maplibre.org/maplibre-gl-js/docs/examples/change-building-color-based-on-zoom-level/)\\n\\n - [Create a heatmap layer](https://maplibre.org/maplibre-gl-js/docs/examples/heatmap-layer/)\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"number | array<number> | color"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-hcl",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.","example":{"syntax":{"method":["[\\"linear\\"] | [\\"exponential\\", base] | [\\"cubic-bezier\\", x1, y1, x2, y2]","number","number","number","..."],"result":"color"},"value":["interpolate-lab",["linear"],["zoom"],15,"#f00",15.05,"#00f"]},"group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0","ios":"https://github.com/maplibre/maplibre-native/issues/2784","android":"https://github.com/maplibre/maplibre-native/issues/2784"}}},"ln2":{"doc":"Returns mathematical constant ln(2).","example":{"syntax":{"method":[],"result":"number"},"value":["ln2"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","example":{"syntax":{"method":[],"result":"number"},"value":["pi"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","example":{"syntax":{"method":[],"result":"number"},"value":["e"]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","example":{"syntax":{"method":["value"],"result":"string"},"value":["typeof",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"string"},"value":["string",["get","name"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["number",["get","population"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"boolean"},"value":["boolean",["feature-state","hover"],false]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"object"},"value":["object",["get","some-property"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","example":{"syntax":{"method":["collator","{ \\"case-sensitive\\": boolean, \\"diacritic-sensitive\\": boolean, \\"locale\\": string }"],"result":"collator"},"value":["collator",{"case-sensitive":true,"diacritic-sensitive":true,"locale":"fr"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#image) expression. Strings may be followed by a style override object that supports the following properties:\\n\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.\\n\\n- `\\"vertical-align\\"`: Aligns vertically text section or image in relation to the row it belongs to. Possible values are: \\n\\t- `\\"bottom\\"` *default*: align the bottom of this section with the bottom of other sections.\\n<img alt=\\"Visual representation of bottom alignment\\" src=\\"https://github.com/user-attachments/assets/0474a2fd-a4b2-417c-9187-7a13a28695bc\\"/>\\n\\t- `\\"center\\"`: align the center of this section with the center of other sections.\\n<img alt=\\"Visual representation of center alignment\\" src=\\"https://github.com/user-attachments/assets/92237455-be6d-4c5d-b8f6-8127effc1950\\"/>\\n\\t- `\\"top\\"`: align the top of this section with the top of other sections.\\n<img alt=\\"Visual representation of top alignment\\" src=\\"https://github.com/user-attachments/assets/45dccb28-d977-4abb-a006-4ea9792b7c53\\"/>\\n\\t- Refer to [the design proposal](https://github.com/maplibre/maplibre-style-spec/issues/832) for more details.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display and style rich text labels](https://maplibre.org/maplibre-gl-js/docs/examples/display-and-style-rich-text-labels/)","example":{"syntax":{"method":["value","{ \\"text-font\\": string, \\"text-color\\": color, \\"font-scale\\": number, \\"vertical-align\\": \\"bottom\\" | \\"center\\" | \\"top\\" }","..."],"result":"formatted"},"value":["format",["upcase",["get","FacilityName"]],{"font-scale":0.8},"\\n\\n",{},["downcase",["get","Comments"]],{"font-scale":0.6,"vertical-align":"center"}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"vertical-align":{"js":"https://github.com/maplibre/maplibre-gl-js/issues/5043","android":"https://github.com/maplibre/maplibre-native/issues/3055","ios":"https://github.com/maplibre/maplibre-native/issues/3055"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)","example":{"syntax":{"method":["value"],"result":"image"},"value":["image","marker_15"]},"group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["number","{ \\"locale\\": string, \\"currency\\": string, \\"min-fraction-digits\\": number, \\"max-fraction-digits\\": number }"],"result":"string"},"value":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"supported"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a boolean, the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)","example":{"syntax":{"method":["value"],"result":"string"},"value":["to-string",["get","mag"]]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"number"},"value":["to-number","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","example":{"syntax":{"method":["value"],"result":"boolean"},"value":["to-boolean","someProperty"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","example":{"syntax":{"method":["color"],"result":"array"},"value":["to-rgba","#ff0000"]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["value","fallback: value","fallback: value","..."],"result":"color"},"value":["to-color","#edf8e9"]},"group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number"],"result":"color"},"value":["rgb",255,0,0]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","example":{"syntax":{"method":["number","number","number","number"],"result":"color"},"value":["rgba",255,0,0,1]},"group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns null if the requested property is missing.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)\\n\\n - [Extrude polygons for 3D indoor mapping](https://maplibre.org/maplibre-gl-js/docs/examples/3d-extrusion-floorplan/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["get","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of an property value in the current feature\'s properties, or from another object if a second argument is provided.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["has","someProperty"]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Gets the length of an array or string. In a string, a UTF-16 surrogate pair counts as a single position.","example":{"syntax":{"method":["array"],"result":"number"},"value":["length",["get","myArray"]]},"group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Gets the feature properties object.  Note that in some cases, it may be more efficient to use [\\"get\\", \\"property_name\\"] directly.","example":{"syntax":{"method":[],"result":"value"},"value":["properties"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns null if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.\\n\\n - [Create a hover effect](https://maplibre.org/maplibre-gl-js/docs/examples/hover-styles/)","example":{"syntax":{"method":["string"],"result":"value"},"value":["feature-state","hover"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","ios":"https://github.com/maplibre/maplibre-native/issues/1698","android":"https://github.com/maplibre/maplibre-native/issues/1698"}}},"geometry-type":{"doc":"Returns the feature\'s simple geometry type: `Point`, `LineString`, or `Polygon`. `MultiPoint`, `MultiLineString`, and `MultiPolygon` are returned as `Point`, `LineString`, and `Polygon`, respectively.","example":{"syntax":{"method":[],"result":"string"},"value":["==",["geometry-type"],"Polygon"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"id":{"doc":"Gets the feature\'s id, if it has one.","example":{"syntax":{"method":[],"result":"value"},"value":["id"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Gets the current zoom level.  Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","example":{"syntax":{"method":[],"result":"number"},"value":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]]},"group":"Zoom","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"heatmap-density":{"doc":"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","example":{"syntax":{"method":[],"result":"number"},"value":["heatmap-density"]},"group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"line-progress":{"doc":"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.","example":{"syntax":{"method":["number"],"result":"number"},"value":["line-progress",0.5]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"accumulated":{"doc":"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","example":{"syntax":{"method":["string"],"result":"value"},"value":["accumulated","sum"]},"group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","ios":"supported","android":"supported"}}},"+":{"doc":"Returns the sum of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["+",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["*",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","example":{"syntax":{"method":["number","number?"],"result":"number"},"value":["-",10]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.\\n\\n - [Visualize population density](https://maplibre.org/maplibre-gl-js/docs/examples/visualize-population-density/)","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["/",["get","population"],["get","sq-km"]]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["%",10,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","example":{"syntax":{"method":["number","number"],"result":"number"},"value":["^",2,3]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sqrt",9]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log10",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ln",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["log2",8]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["sin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["cos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["tan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["asin",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["acos",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["atan",1]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["min",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","example":{"syntax":{"method":["number","number","..."],"result":"number"},"value":["max",1,2]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","example":{"syntax":{"method":["number"],"result":"number"},"value":["round",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["abs",-1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["ceil",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","example":{"syntax":{"method":["number"],"result":"number"},"value":["floor",1.5]},"group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"number"},"value":["distance",{"type":"Point","coordinates":[0,0]}]},"group":"Math","sdk-support":{"basic functionality":{"js":"4.2.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Add multiple geometries from one GeoJSON source](https://maplibre.org/maplibre-gl-js/docs/examples/multiple-geometries/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Display buildings in 3D](https://maplibre.org/maplibre-gl-js/docs/examples/3d-buildings/)\\n\\n - [Filter symbols by toggling a list](https://maplibre.org/maplibre-gl-js/docs/examples/filter-markers/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["==","$type","Polygon"]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!=","cluster",true]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<",["get","mag"],2]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":[">=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["<=",["get","mag"],6]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.\\n\\n - [Display HTML clusters with custom properties](https://maplibre.org/maplibre-gl-js/docs/examples/cluster-html/)","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["all",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","example":{"syntax":{"method":["boolean","boolean","..."],"result":"boolean"},"value":["any",[">=",["get","mag"],4],["<",["get","mag"],5]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.\\n\\n - [Create and style clusters](https://maplibre.org/maplibre-gl-js/docs/examples/cluster/)","example":{"syntax":{"method":["value","value","collator?"],"result":"boolean"},"value":["!",["has","point_count"]]},"group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","example":{"syntax":{"method":["GeoJSON geometry"],"result":"boolean"},"value":["within",{"type":"Polygon","coordinates":[[[0,0],[0,5],[5,5],[5,0],[0,0]]]}]},"group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).","example":{"syntax":{"method":["string"],"result":"boolean"},"value":["is-supported-script",""]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"supported"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["upcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.\\n\\n - [Change the case of labels](https://maplibre.org/maplibre-gl-js/docs/examples/change-case-of-labels/)","example":{"syntax":{"method":["string"],"result":"string"},"value":["downcase",["get","name"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.\\n\\n - [Add a generated icon to the map](https://maplibre.org/maplibre-gl-js/docs/examples/add-image-missing-generated/)\\n\\n - [Create a time slider](https://maplibre.org/maplibre-gl-js/docs/examples/timeline-animation/)\\n\\n - [Use a fallback image](https://maplibre.org/maplibre-gl-js/docs/examples/fallback-image/)\\n\\n - [Variable label placement](https://maplibre.org/maplibre-gl-js/docs/examples/variable-label-placement/)","example":{"syntax":{"method":["string","string","..."],"result":"string"},"value":["concat","square-rgb-",["get","color"]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","example":{"syntax":{"method":["collator"],"result":"string"},"value":["resolved-locale",["collator",{"case-sensitive":true,"diacritic-sensitive":false,"locale":"de"}]]},"group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}}}}'),Yre={anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0 (0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0, directly above, to 180, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},qre={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the sky."},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color at the horizon."},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The base color for the fog. Requires 3D terrain."},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog over the 3D terrain. Where 0 is the map center and 1 is the horizon."},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the fog color and the horizon color. Where 0 is using the horizon color only and 1 is using the fog color only."},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the sky color and the horizon color. Where 1 is blending the color at the middle of the sky and 0 is not blending at all and using the sky color only."},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"How to blend the atmosphere. Where 1 is visible atmosphere and 0 is hidden. It is best to interpolate this expression when using globe projection."}},Vre={source:{type:"string",doc:"The source for the terrain data.",required:!0,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}},exaggeration:{type:"number",minimum:0,doc:"The exaggeration of the terrain - how high it will look.",default:1,"sdk-support":{"basic functionality":{js:"2.2.0",ios:"https://github.com/maplibre/maplibre-native/issues/252",android:"https://github.com/maplibre/maplibre-native/issues/252"}}}},$re={type:{type:"projectionDefinition",doc:"The projection definition type. Can be specified as a string, a transition state, or an expression.",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Hre=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Zre={"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Xre={"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"https://github.com/maplibre/maplibre-gl-js/issues/1235",ios:"https://github.com/maplibre/maplibre-native/issues/744",android:"https://github.com/maplibre/maplibre-native/issues/744"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Jre={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},eie={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},tie={"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline. \n\nThe unit is in pixels only for SDF sprites that were created with a blur radius of 8, multiplied by the display density. I.e., the radius needs to be 16 for `@2x` sprites, etc.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},nie={"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added, or when a video is started or its coordinates are updated.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},rie={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},iie={"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},oie={duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},sie={"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}},qo={$version:Cre,$root:_re,sources:bre,source:xre,source_vector:Mre,source_raster:wre,source_raster_dem:Sre,source_geojson:Ere,source_video:Bre,source_image:Ore,layer:Ire,layout:kre,layout_background:Tre,layout_fill:Pre,layout_circle:Kre,layout_heatmap:Rre,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},"property-type":"constant"}},layout_line:Dre,layout_symbol:Fre,layout_raster:Lre,layout_hillshade:Ure,filter:zre,filter_operator:jre,geometry_type:Nre,function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:`A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:

* In categorical functions, when the feature value does not match any of the stop domain values.

* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.

* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a \`circle-color\` property but the feature property value is not a string or not a valid color).

* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.

If no default is provided, the style property's default is used in these circumstances.`}},function_stop:Wre,expression:Gre,expression_name:Qre,light:Yre,sky:qre,terrain:Vre,projection:$re,paint:Hre,paint_fill:Zre,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",android:"7.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Xre,paint_circle:Jre,paint_heatmap:eie,paint_symbol:tie,paint_raster:nie,paint_hillshade:rie,paint_background:iie,transition:oie,"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:sie};function Ks(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",e="3158bd93bbefd1bd0e63d26617da070781685c25",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:17}},1:{start:{line:7,column:4},end:{line:9,column:6}},2:{start:{line:11,column:16},end:{line:19,column:3}},3:{start:{line:12,column:4},end:{line:18,column:7}},4:{start:{line:15,column:6},end:{line:17,column:7}},5:{start:{line:16,column:8},end:{line:16,column:48}},6:{start:{line:21,column:33},end:{line:21,column:43}},7:{start:{line:22,column:20},end:{line:22,column:35}},8:{start:{line:23,column:4},end:{line:42,column:5}},9:{start:{line:24,column:6},end:{line:37,column:14}},10:{start:{line:32,column:27},end:{line:32,column:61}},11:{start:{line:38,column:11},end:{line:42,column:5}},12:{start:{line:39,column:6},end:{line:39,column:174}},13:{start:{line:41,column:22},end:{line:41,column:37}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:21},end:{line:10,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:11,column:16},end:{line:11,column:17}},loc:{start:{line:11,column:26},end:{line:19,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:14,column:7},end:{line:14,column:8}},loc:{start:{line:14,column:13},end:{line:18,column:5}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:43,column:3}},line:20},4:{name:"(anonymous_4)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:27},end:{line:32,column:61}},line:32}},branchMap:{0:{loc:{start:{line:15,column:6},end:{line:17,column:7}},type:"if",locations:[{start:{line:15,column:6},end:{line:17,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},1:{loc:{start:{line:22,column:20},end:{line:22,column:35}},type:"binary-expr",locations:[{start:{line:22,column:20},end:{line:22,column:29}},{start:{line:22,column:33},end:{line:22,column:35}}],line:22},2:{loc:{start:{line:23,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:42,column:5}},{start:{line:38,column:11},end:{line:42,column:5}}],line:23},3:{loc:{start:{line:30,column:26},end:{line:30,column:106}},type:"cond-expr",locations:[{start:{line:30,column:44},end:{line:30,column:74}},{start:{line:30,column:77},end:{line:30,column:106}}],line:30},4:{loc:{start:{line:31,column:67},end:{line:31,column:102}},type:"cond-expr",locations:[{start:{line:31,column:85},end:{line:31,column:91}},{start:{line:31,column:94},end:{line:31,column:102}}],line:31},5:{loc:{start:{line:34,column:22},end:{line:34,column:120}},type:"cond-expr",locations:[{start:{line:34,column:56},end:{line:34,column:79}},{start:{line:34,column:98},end:{line:34,column:120}}],line:34},6:{loc:{start:{line:38,column:11},end:{line:42,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:42,column:5}},{start:{line:40,column:11},end:{line:42,column:5}}],line:38}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDocLabel.tsx"],names:[],mappings:"AAuCQ,SASuB,KATvB;AAvCR,OAAO,WAAW;AAClB,SAAQ,eAAe,sBAAqB;AAc5C,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,IACR;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC/B,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,MAAM,aAAa;AAC1B,aAAK,MAAM,YAAY,KAAK,MAAM,IAAI;AAAA,MACxC;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,UAAM,EAAC,IAAG,IAAI,aAAa,CAAC;AAE5B,QAAI,KAAK;AACP,aAAO,oBAAC,WAAM,WAAU,wBACtB,+BAAC,SAAI,WAAU,uBACZ;AAAA;AAAA,QACA;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,KAAK,MAAM,OAAO,iCAAiC;AAAA,YAC/D,WAAW,4CAA4C,KAAK,MAAM,OAAO,SAAS,QAAQ;AAAA,YAC1F,SAAS,MAAM,KAAK,YAAY,CAAC,KAAK,MAAM,IAAI;AAAA,YAChD,eAAa,sBAAoB;AAAA,YAEhC,eAAK,MAAM,OAAO,oBAAC,kBAAe,IAAK,oBAAC,iBAAc;AAAA;AAAA,QACzD;AAAA,SACF,GACF;AAAA,IACF,WACS,OAAO;AACd,aAAO,oBAAC,WAAM,WAAU,wBACtB,8BAAC,SAAI,WAAU,uBACZ,iBACH,GACF;AAAA,IACF,OACK;AACH,0BAAC,SAAI;AAAA,IACP;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3158bd93bbefd1bd0e63d26617da070781685c25"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ks=function(){return l},l}Ks();class bO extends sr.Component{constructor(t){Ks().f[0]++,Ks().s[0]++;super(t);Pn(this,"onToggleDoc",(Ks().s[2]++,t=>{Ks().f[1]++,Ks().s[3]++,this.setState({open:t},()=>{Ks().f[2]++,Ks().s[4]++,this.props.onToggleDoc?(Ks().b[0][0]++,Ks().s[5]++,this.props.onToggleDoc(this.state.open)):Ks().b[0][1]++})}));Ks().s[1]++,this.state={open:!1}}render(){Ks().f[3]++;const{label:t,fieldSpec:r}=(Ks().s[6]++,this.props),{doc:i}=(Ks().s[7]++,Ks().b[1][0]++,r||(Ks().b[1][1]++,{}));if(Ks().s[8]++,i)return Ks().b[2][0]++,Ks().s[9]++,le.jsx("label",{className:"maputnik-doc-wrapper",children:le.jsxs("div",{className:"maputnik-doc-target",children:[t,"",le.jsx("button",{"aria-label":this.state.open?(Ks().b[3][0]++,"close property documentation"):(Ks().b[3][1]++,"open property documentation"),className:`maputnik-doc-button maputnik-doc-button--${this.state.open?(Ks().b[4][0]++,"open"):(Ks().b[4][1]++,"closed")}`,onClick:()=>(Ks().f[4]++,Ks().s[10]++,this.onToggleDoc(!this.state.open)),"data-wd-key":"field-doc-button-"+t,children:this.state.open?(Ks().b[5][0]++,le.jsx(RV,{})):(Ks().b[5][1]++,le.jsx(DV,{}))})]})});if(Ks().b[2][1]++,Ks().s[11]++,t)return Ks().b[6][0]++,Ks().s[12]++,le.jsx("label",{className:"maputnik-doc-wrapper",children:le.jsx("div",{className:"maputnik-doc-target",children:t})});Ks().b[6][1]++,Ks().s[13]++}}function oa(){var n="/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",e="52a1547e724051448ae0a009c4c7c40d9bb9067f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Doc.tsx",statementMap:{0:{start:{line:3,column:16},end:{line:8,column:1}},1:{start:{line:11,column:26},end:{line:11,column:36}},2:{start:{line:12,column:52},end:{line:12,column:61}},3:{start:{line:13,column:23},end:{line:13,column:47}},4:{start:{line:14,column:25},end:{line:16,column:26}},5:{start:{line:17,column:4},end:{line:48,column:9}},6:{start:{line:21,column:10},end:{line:24,column:20}},7:{start:{line:31,column:12},end:{line:31,column:75}},8:{start:{line:35,column:10},end:{line:44,column:20}},9:{start:{line:38,column:14},end:{line:42,column:15}},10:{start:{line:39,column:16},end:{line:39,column:81}},11:{start:{line:41,column:16},end:{line:41,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:49,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:20,column:119},end:{line:20,column:120}},loc:{start:{line:20,column:137},end:{line:25,column:9}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:30,column:37},end:{line:30,column:38}},loc:{start:{line:30,column:49},end:{line:32,column:11}},line:30},3:{name:"(anonymous_3)",decl:{start:{line:34,column:80},end:{line:34,column:81}},loc:{start:{line:34,column:103},end:{line:45,column:9}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:37,column:37},end:{line:37,column:38}},loc:{start:{line:37,column:44},end:{line:43,column:13}},line:37}},branchMap:{0:{loc:{start:{line:14,column:25},end:{line:16,column:26}},type:"binary-expr",locations:[{start:{line:14,column:25},end:{line:14,column:33}},{start:{line:16,column:4},end:{line:16,column:26}}],line:14},1:{loc:{start:{line:18,column:6},end:{line:26,column:10}},type:"binary-expr",locations:[{start:{line:18,column:6},end:{line:18,column:9}},{start:{line:18,column:29},end:{line:26,column:10}}],line:18},2:{loc:{start:{line:20,column:8},end:{line:25,column:13}},type:"binary-expr",locations:[{start:{line:20,column:8},end:{line:20,column:20}},{start:{line:20,column:40},end:{line:25,column:13}}],line:20},3:{loc:{start:{line:27,column:6},end:{line:46,column:13}},type:"binary-expr",locations:[{start:{line:27,column:6},end:{line:27,column:16}},{start:{line:27,column:36},end:{line:46,column:13}}],line:27},4:{loc:{start:{line:38,column:14},end:{line:42,column:15}},type:"if",locations:[{start:{line:38,column:14},end:{line:42,column:15}},{start:{line:40,column:21},end:{line:42,column:15}}],line:38},5:{loc:{start:{line:47,column:6},end:{line:47,column:215}},type:"binary-expr",locations:[{start:{line:47,column:6},end:{line:47,column:12}},{start:{line:47,column:16},end:{line:47,column:30}},{start:{line:47,column:50},end:{line:47,column:215}}],line:47}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Doc.tsx"],names:[],mappings:"AAwCM,mBAGM,KAKQ,YARd;AAxCN,OAAO,WAAW;AAElB,MAAM,UAAU;AAAA,EACd,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,OAAO;AACT;AAkBA,qBAAqB,YAAY,MAAM,UAAoB;AAAA,EACzD,SAAU;AACR,UAAM,EAAC,UAAS,IAAI,KAAK;AAEzB,UAAM,EAAC,KAAK,QAAQ,QAAQ,eAAc,IAAI;AAC9C,UAAM,aAAa,UAAU,aAAa;AAE1C,UAAM,eACJ,CAAC,CAAC;AAAA;AAAA,IAGF,CAAC,MAAM,QAAQ,MAAM;AAGvB,WACE,iCACG;AAAA,aACC,qBAAC,SAAI,WAAU,WACb;AAAA,4BAAC,SAAI,WAAU,gBAAe,eAAY,kBAAkB,eAAI;AAAA,QAC/D,gBACC,oBAAC,QAAG,WAAU,mBACX,iBAAO,QAAQ,MAAM,EAAE,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM;AAC5C,iBACE,qBAAC,QACC;AAAA,gCAAC,UAAM,eAAK,UAAU,GAAG,GAAE;AAAA,YAC3B,oBAAC,SAAK,gBAAM,KAAI;AAAA,eAFT,GAGT;AAAA,QAEJ,CAAC,GACH;AAAA,SAEJ;AAAA,MAED,cACC,oBAAC,SAAI,WAAU,wBACb,+BAAC,WAAM,WAAU,+BACf;AAAA,4BAAC,WACC,+BAAC,QACC;AAAA,8BAAC,QAAG;AAAA,UACH,OAAO,OAAO,OAAO,EAAE,IAAI,YAAU;AACpC,mBAAO,oBAAC,QAAiB,oBAAT,MAAgB;AAAA,UAClC,CAAC;AAAA,WACH,GACF;AAAA,QACA,oBAAC,WACE,iBAAO,QAAQ,UAAU,EAAE,IAAI,CAAC,CAAC,KAAK,UAAU,MAAM;AACrD,iBACE,qBAAC,QACC;AAAA,gCAAC,QAAI,eAAI;AAAA,YACR,OAAO,KAAK,OAAO,EAAE,IAAI,CAAC,MAAM;AAC/B,kBAAI,OAAO,UAAU,eAAe,KAAK,YAAY,CAAC,GAAG;AACvD,uBAAO,oBAAC,QAAY,qBAAW,CAAyB,KAAxC,CAA0C;AAAA,cAC5D,OACK;AACH,uBAAO,oBAAC,QAAW,kBAAH,CAAK;AAAA,cACvB;AAAA,YACF,CAAC;AAAA,eATM,GAUT;AAAA,QAEJ,CAAC,GACH;AAAA,SACF,GACF;AAAA,MAED,UAAU,kBACT,oBAAC,SAAI,WAAU,uBACb,8BAAC,OAAE,MAAM,QAAS,QAAO,UAAS,KAAI,cAAc,0BAAe,GACrE;AAAA,OAEJ;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"52a1547e724051448ae0a009c4c7c40d9bb9067f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return oa=function(){return l},l}oa();const M9=(oa().s[0]++,{js:"JS",android:"Android",ios:"iOS",macos:"macOS"});class xO extends sr.Component{render(){oa().f[0]++;const{fieldSpec:e}=(oa().s[1]++,this.props),{doc:t,values:r,docUrl:i,docUrlLinkText:s}=(oa().s[2]++,e),l=(oa().s[3]++,e["sdk-support"]),o=(oa().s[4]++,oa().b[0][0]++,!!r&&(oa().b[0][1]++,!Array.isArray(r)));return oa().s[5]++,le.jsxs(le.Fragment,{children:[(oa().b[1][0]++,t&&(oa().b[1][1]++,le.jsxs("div",{className:"SpecDoc",children:[le.jsx("div",{className:"SpecDoc__doc","data-wd-key":"spec-field-doc",children:t}),(oa().b[2][0]++,o&&(oa().b[2][1]++,le.jsx("ul",{className:"SpecDoc__values",children:Object.entries(r).map(([p,v])=>(oa().f[1]++,oa().s[6]++,le.jsxs("li",{children:[le.jsx("code",{children:JSON.stringify(p)}),le.jsx("div",{children:v.doc})]},p)))})))]}))),(oa().b[3][0]++,l&&(oa().b[3][1]++,le.jsx("div",{className:"SpecDoc__sdk-support",children:le.jsxs("table",{className:"SpecDoc__sdk-support__table",children:[le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{}),Object.values(M9).map(p=>(oa().f[2]++,oa().s[7]++,le.jsx("th",{children:p},p)))]})}),le.jsx("tbody",{children:Object.entries(l).map(([p,v])=>(oa().f[3]++,oa().s[8]++,le.jsxs("tr",{children:[le.jsx("td",{children:p}),Object.keys(M9).map(x=>(oa().f[4]++,oa().s[9]++,Object.prototype.hasOwnProperty.call(v,x)?(oa().b[4][0]++,oa().s[10]++,le.jsx("td",{children:v[x]},x)):(oa().b[4][1]++,oa().s[11]++,le.jsx("td",{children:"no"},x))))]},p)))})]})}))),(oa().b[5][0]++,i&&(oa().b[5][1]++,s)&&(oa().b[5][2]++,le.jsx("div",{className:"SpecDoc__learn-more",children:le.jsx("a",{href:i,target:"_blank",rel:"noreferrer",children:s})})))]})}}function Ko(){var n="/home/runner/work/maputnik/maputnik/src/components/Block.tsx",e="ca04d739d50d9528a1765863025280bc88ee5e77",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Block.tsx",statementMap:{0:{start:{line:7,column:13},end:{line:7,column:17}},1:{start:{line:9,column:4},end:{line:9,column:17}},2:{start:{line:10,column:4},end:{line:12,column:6}},3:{start:{line:15,column:18},end:{line:15,column:32}},4:{start:{line:16,column:4},end:{line:18,column:5}},5:{start:{line:17,column:6},end:{line:17,column:64}},6:{start:{line:20,column:16},end:{line:24,column:3}},7:{start:{line:21,column:4},end:{line:23,column:7}},8:{start:{line:31,column:17},end:{line:40,column:3}},9:{start:{line:32,column:15},end:{line:32,column:39}},10:{start:{line:33,column:21},end:{line:33,column:48}},11:{start:{line:34,column:4},end:{line:36,column:5}},12:{start:{line:35,column:6},end:{line:35,column:30}},13:{start:{line:37,column:4},end:{line:39,column:5}},14:{start:{line:38,column:6},end:{line:38,column:29}},15:{start:{line:42,column:4},end:{line:75,column:6}},16:{start:{line:64,column:95},end:{line:64,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:13,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:14},end:{line:19,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:20,column:16},end:{line:20,column:17}},loc:{start:{line:20,column:25},end:{line:24,column:3}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:31,column:17},end:{line:31,column:18}},loc:{start:{line:31,column:28},end:{line:40,column:3}},line:31},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:76,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:64,column:87},end:{line:64,column:88}},loc:{start:{line:64,column:95},end:{line:64,column:113}},line:64}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:16,column:4},end:{line:18,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:17,column:33},end:{line:17,column:62}},type:"cond-expr",locations:[{start:{line:17,column:48},end:{line:17,column:54}},{start:{line:17,column:57},end:{line:17,column:62}}],line:17},2:{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},3:{loc:{start:{line:34,column:8},end:{line:34,column:66}},type:"binary-expr",locations:[{start:{line:34,column:8},end:{line:34,column:53}},{start:{line:34,column:57},end:{line:34,column:66}}],line:34},4:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:54,column:10},end:{line:61,column:14}},type:"binary-expr",locations:[{start:{line:54,column:10},end:{line:54,column:30}},{start:{line:54,column:50},end:{line:61,column:14}}],line:54},6:{loc:{start:{line:62,column:10},end:{line:62,column:134}},type:"binary-expr",locations:[{start:{line:62,column:10},end:{line:62,column:31}},{start:{line:62,column:51},end:{line:62,column:134}}],line:62},7:{loc:{start:{line:65,column:10},end:{line:72,column:11}},type:"binary-expr",locations:[{start:{line:65,column:10},end:{line:65,column:30}},{start:{line:65,column:50},end:{line:72,column:11}}],line:65},8:{loc:{start:{line:69,column:32},end:{line:69,column:64}},type:"cond-expr",locations:[{start:{line:69,column:53},end:{line:69,column:55}},{start:{line:69,column:58},end:{line:69,column:64}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Block.tsx"],names:[],mappings:"AAgEW,SAWD,KAXC;AAhEX,OAAO,WAAgD;AACvD,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAmBhB,qBAAqB,cAAc,MAAM,UAAkC;AAAA,EACzE,WAAkC;AAAA,EAElC,YAAa,OAAmB;AAC9B,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS,GAAwE;AAC/E,UAAM,QAAQ,EAAE,OAAO;AACvB,QAAI,KAAK,MAAM,UAAU;AACvB,aAAO,KAAK,MAAM,SAAS,UAAU,KAAK,SAAY,KAAK;AAAA,IAC7D;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,eAAe,CAAC,UAAoC;AAClD,UAAM,KAAK,MAAM,YAAY;AAC7B,UAAM,WAAW,KAAK,UAAU,SAAS,EAAE;AAE3C,QAAI,MAAM,YAAY,OAAO,aAAa,WAAW,CAAC,UAAU;AAC9D,YAAM,gBAAgB;AAAA,IACxB;AACA,QAAI,MAAM,YAAY,OAAO,aAAa,KAAK;AAC7C,YAAM,eAAe;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,KAAK,MAAM;AAAA,QAC9B,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,WAAW,WAAW;AAAA,UACpB,wBAAwB;AAAA,UACxB,8BAA8B,KAAK,MAAM;AAAA,UACzC,yBAAyB,KAAK,MAAM;AAAA,QACtC,CAAC;AAAA,QACD,SAAS,KAAK;AAAA,QAEb;AAAA,eAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,aAAa,KAAK;AAAA,cAClB,WAAW,KAAK,MAAM;AAAA;AAAA,UACxB,GACF;AAAA,UAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,UAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,UACA,oBAAC,SAAI,WAAU,gCAA+B,KAAK,QAAM,KAAK,WAAW,IACtE,eAAK,MAAM,UACd;AAAA,UACC,KAAK,MAAM,aACV;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,cAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,UACxC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ca04d739d50d9528a1765863025280bc88ee5e77"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ko=function(){return l},l}Ko();class pa extends sr.Component{constructor(t){Ko().f[0]++,Ko().s[1]++;super(t);Pn(this,"_blockEl",(Ko().s[0]++,null));Pn(this,"onToggleDoc",(Ko().s[6]++,t=>{Ko().f[2]++,Ko().s[7]++,this.setState({showDoc:t})}));Pn(this,"onLabelClick",(Ko().s[8]++,t=>{var s;Ko().f[3]++;const r=(Ko().s[9]++,t.nativeEvent.target),i=(Ko().s[10]++,(s=this._blockEl)==null?void 0:s.contains(r));Ko().s[11]++,Ko().b[3][0]++,t.nativeEvent.target.nodeName!=="INPUT"&&(Ko().b[3][1]++,!i)?(Ko().b[2][0]++,Ko().s[12]++,t.stopPropagation()):Ko().b[2][1]++,Ko().s[13]++,t.nativeEvent.target.nodeName!=="A"?(Ko().b[4][0]++,Ko().s[14]++,t.preventDefault()):Ko().b[4][1]++}));Ko().s[2]++,this.state={showDoc:!1}}onChange(t){Ko().f[1]++;const r=(Ko().s[3]++,t.target.value);if(Ko().s[4]++,this.props.onChange)return Ko().b[0][0]++,Ko().s[5]++,this.props.onChange(r===""?(Ko().b[1][0]++,void 0):(Ko().b[1][1]++,r));Ko().b[0][1]++}render(){return Ko().f[4]++,Ko().s[15]++,le.jsxs("label",{style:this.props.style,"data-wd-key":this.props["data-wd-key"],className:em({"maputnik-input-block":!0,"maputnik-input-block--wide":this.props.wideMode,"maputnik-action-block":this.props.action}),onClick:this.onLabelClick,children:[(Ko().b[5][0]++,this.props.fieldSpec&&(Ko().b[5][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:le.jsx(bO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(Ko().b[6][0]++,!this.props.fieldSpec&&(Ko().b[6][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),le.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),le.jsx("div",{className:"maputnik-input-block-content",ref:t=>(Ko().f[5]++,Ko().s[16]++,this._blockEl=t),children:this.props.children}),(Ko().b[7][0]++,this.props.fieldSpec&&(Ko().b[7][1]++,le.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Ko().b[8][0]++,""):(Ko().b[8][1]++,"none")},children:le.jsx(xO,{fieldSpec:this.props.fieldSpec})})))]})}}function Wc(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",e="1b99a181d4a9dd7b629113889cbb71c3a4bb4d42",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx",statementMap:{0:{start:{line:5,column:18},end:{line:5,column:36}},1:{start:{line:6,column:4},end:{line:8,column:5}},2:{start:{line:7,column:6},end:{line:7,column:43}},3:{start:{line:7,column:35},end:{line:7,column:41}},4:{start:{line:9,column:4},end:{line:21,column:6}},5:{start:{line:17,column:25},end:{line:17,column:60}},6:{start:{line:19,column:64},end:{line:19,column:115}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:22,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:28},end:{line:7,column:29}},loc:{start:{line:7,column:35},end:{line:7,column:41}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:25},end:{line:17,column:60}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:64},end:{line:19,column:115}},line:19}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:6},1:{loc:{start:{line:6,column:8},end:{line:6,column:56}},type:"binary-expr",locations:[{start:{line:6,column:8},end:{line:6,column:26}},{start:{line:6,column:30},end:{line:6,column:56}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSelect.tsx"],names:[],mappings:"AA4BsC;AA5BtC,OAAO,WAAW;AAYlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAAA,IACrC;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM,aAAa;AAAA,QACrC,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,OAAO,KAAK,MAAM;AAAA,QAClB,UAAU,OAAK,KAAK,MAAM,SAAS,EAAE,OAAO,KAAK;AAAA,QACjD,cAAY,KAAK,MAAM,YAAY;AAAA,QAEjC,kBAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAM,oBAAC,YAAiB,OAAO,KAAM,mBAAlB,GAAwB,CAAS;AAAA;AAAA,IAChF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1b99a181d4a9dd7b629113889cbb71c3a4bb4d42"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wc=function(){return l},l}Wc();class Qg extends sr.Component{render(){Wc().f[0]++;let e=(Wc().s[0]++,this.props.options);return Wc().s[1]++,Wc().b[1][0]++,e.length>0&&(Wc().b[1][1]++,!Array.isArray(e[0]))?(Wc().b[0][0]++,Wc().s[2]++,e=e.map(t=>(Wc().f[1]++,Wc().s[3]++,[t,t]))):Wc().b[0][1]++,Wc().s[4]++,le.jsx("select",{className:"maputnik-select","data-wd-key":this.props["data-wd-key"],style:this.props.style,title:this.props.title,value:this.props.value,onChange:t=>(Wc().f[2]++,Wc().s[5]++,this.props.onChange(t.target.value)),"aria-label":this.props["aria-label"],children:e.map(([t,r])=>(Wc().f[3]++,Wc().s[6]++,le.jsx("option",{value:t,children:r},t)))})}}function Di(){var n="/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",e="ffe977722e3215b5f6718c464b93680839810a41",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputString.tsx",statementMap:{0:{start:{line:3,column:24},end:{line:6,column:3}},1:{start:{line:8,column:4},end:{line:8,column:17}},2:{start:{line:9,column:4},end:{line:12,column:6}},3:{start:{line:15,column:4},end:{line:19,column:5}},4:{start:{line:16,column:6},end:{line:18,column:8}},5:{start:{line:20,column:4},end:{line:20,column:14}},6:{start:{line:25,column:4},end:{line:36,column:5}},7:{start:{line:26,column:6},end:{line:26,column:23}},8:{start:{line:27,column:6},end:{line:30,column:8}},9:{start:{line:32,column:6},end:{line:32,column:20}},10:{start:{line:33,column:6},end:{line:35,column:8}},11:{start:{line:37,column:4},end:{line:39,column:5}},12:{start:{line:38,column:6},end:{line:38,column:48}},13:{start:{line:40,column:4},end:{line:70,column:7}},14:{start:{line:51,column:8},end:{line:56,column:11}},15:{start:{line:55,column:10},end:{line:55,column:71}},16:{start:{line:55,column:34},end:{line:55,column:71}},17:{start:{line:59,column:8},end:{line:62,column:9}},18:{start:{line:60,column:10},end:{line:60,column:44}},19:{start:{line:61,column:10},end:{line:61,column:73}},20:{start:{line:61,column:35},end:{line:61,column:73}},21:{start:{line:65,column:8},end:{line:67,column:9}},22:{start:{line:66,column:10},end:{line:66,column:48}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:13},end:{line:4,column:14}},loc:{start:{line:4,column:19},end:{line:5,column:5}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:13,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:48},end:{line:21,column:3}},line:14},3:{name:"(anonymous_3)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:71,column:3}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:50,column:16},end:{line:50,column:17}},loc:{start:{line:50,column:23},end:{line:57,column:7}},line:50},5:{name:"(anonymous_5)",decl:{start:{line:54,column:11},end:{line:54,column:12}},loc:{start:{line:54,column:17},end:{line:56,column:9}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:58,column:14},end:{line:58,column:15}},loc:{start:{line:58,column:20},end:{line:63,column:7}},line:58},7:{name:"(anonymous_7)",decl:{start:{line:64,column:17},end:{line:64,column:18}},loc:{start:{line:64,column:24},end:{line:68,column:7}},line:64}},branchMap:{0:{loc:{start:{line:11,column:13},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:13},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:15,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:19,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:25,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:36,column:5}},{start:{line:31,column:11},end:{line:36,column:5}}],line:25},3:{loc:{start:{line:37,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},4:{loc:{start:{line:43,column:18},end:{line:43,column:125}},type:"cond-expr",locations:[{start:{line:43,column:83},end:{line:43,column:104}},{start:{line:43,column:107},end:{line:43,column:125}}],line:43},5:{loc:{start:{line:47,column:13},end:{line:47,column:64}},type:"cond-expr",locations:[{start:{line:47,column:43},end:{line:47,column:45}},{start:{line:47,column:48},end:{line:47,column:64}}],line:47},6:{loc:{start:{line:55,column:10},end:{line:55,column:71}},type:"if",locations:[{start:{line:55,column:10},end:{line:55,column:71}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},7:{loc:{start:{line:59,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59},8:{loc:{start:{line:61,column:10},end:{line:61,column:73}},type:"if",locations:[{start:{line:61,column:10},end:{line:61,column:73}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},9:{loc:{start:{line:65,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:65,column:8},end:{line:67,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},10:{loc:{start:{line:65,column:12},end:{line:65,column:51}},type:"binary-expr",locations:[{start:{line:65,column:12},end:{line:65,column:28}},{start:{line:65,column:32},end:{line:65,column:51}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputString.tsx"],names:[],mappings:"AAAA,OAAO,WAAW;AAsBlB,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,OAAO,MAAM,SAAS;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,SAAS;AAClB,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,MACf;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV;AAAA,EAEA,SAAS;AACP,QAAI;AACJ,QAAI;AAEJ,QAAG,KAAK,MAAM,OAAO;AACnB,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,QACA;AAAA,MACF;AAAA,IACF,OACK;AACH,YAAM;AACN,gBAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAG,KAAK,MAAM,UAAU;AACtB,cAAQ,KAAK,2BAA2B;AAAA,IAC1C;AAEA,WAAO,MAAM,cAAc,KAAK;AAAA,MAC9B,cAAc,KAAK,MAAM,YAAY;AAAA,MACrC,eAAe,KAAK,MAAM,aAAa;AAAA,MACvC,YAAY,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,YAAY,IAAI,KAAK,MAAM,aAAa,EAAE,QAAQ;AAAA,MAC/G,UAAU,KAAK,MAAM;AAAA,MACrB,WAAW,QAAQ,KAAK,GAAG;AAAA,MAC3B,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM,UAAU,SAAY,KAAK,KAAK,MAAM;AAAA,MACxD,aAAa,KAAK,MAAM;AAAA,MACxB,OAAO,KAAK,MAAM;AAAA,MAClB,UAAU,CAAC,MAA2E;AACpF,aAAK,SAAS;AAAA,UACZ,SAAS;AAAA,UACT,OAAO,EAAE,OAAO;AAAA,QAClB,GAAG,MAAM;AACP,cAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,KAAK,MAAM,KAAK;AAAA,QAC7D,CAAC;AAAA,MACH;AAAA,MACA,QAAQ,MAAM;AACZ,YAAG,KAAK,MAAM,UAAQ,KAAK,MAAM,OAAO;AACtC,eAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,cAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QAC/D;AAAA,MACF;AAAA,MACA,WAAW,CAAC,MAAM;AAChB,YAAI,EAAE,YAAY,MAAM,KAAK,MAAM,UAAU;AAC3C,eAAK,MAAM,SAAS,KAAK,MAAM,KAAK;AAAA,QACtC;AAAA,MACF;AAAA,MACA,UAAU,KAAK,MAAM;AAAA,IACvB,CAAC;AAAA,EACH;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ffe977722e3215b5f6718c464b93680839810a41"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Di=function(){return l},l}Di();class Pf extends sr.Component{constructor(e){Di().f[1]++,Di().s[1]++,super(e),Di().s[2]++,this.state={editing:!1,value:(Di().b[0][0]++,e.value||(Di().b[0][1]++,""))}}static getDerivedStateFromProps(e,t){if(Di().f[2]++,Di().s[3]++,t.editing)Di().b[1][1]++;else return Di().b[1][0]++,Di().s[4]++,{value:e.value};return Di().s[5]++,{}}render(){Di().f[3]++;let e,t;return Di().s[6]++,this.props.multi?(Di().b[2][0]++,Di().s[7]++,e="textarea",Di().s[8]++,t=["maputnik-string","maputnik-string--multi"]):(Di().b[2][1]++,Di().s[9]++,e="input",Di().s[10]++,t=["maputnik-string"]),Di().s[11]++,this.props.disabled?(Di().b[3][0]++,Di().s[12]++,t.push("maputnik-string--disabled")):Di().b[3][1]++,Di().s[13]++,sr.createElement(e,{"aria-label":this.props["aria-label"],"data-wd-key":this.props["data-wd-key"],spellCheck:Object.prototype.hasOwnProperty.call(this.props,"spellCheck")?(Di().b[4][0]++,this.props.spellCheck):(Di().b[4][1]++,e!=="input"),disabled:this.props.disabled,className:t.join(" "),style:this.props.style,value:this.state.value===void 0?(Di().b[5][0]++,""):(Di().b[5][1]++,this.state.value),placeholder:this.props.default,title:this.props.title,onChange:r=>{Di().f[4]++,Di().s[14]++,this.setState({editing:!0,value:r.target.value},()=>{Di().f[5]++,Di().s[15]++,this.props.onInput?(Di().b[6][0]++,Di().s[16]++,this.props.onInput(this.state.value)):Di().b[6][1]++})},onBlur:()=>{Di().f[6]++,Di().s[17]++,this.state.value!==this.props.value?(Di().b[7][0]++,Di().s[18]++,this.setState({editing:!1}),Di().s[19]++,this.props.onChange?(Di().b[8][0]++,Di().s[20]++,this.props.onChange(this.state.value)):Di().b[8][1]++):Di().b[7][1]++},onKeyDown:r=>{Di().f[7]++,Di().s[21]++,Di().b[10][0]++,r.keyCode===13&&(Di().b[10][1]++,this.props.onChange)?(Di().b[9][0]++,Di().s[22]++,this.props.onChange(this.state.value)):Di().b[9][1]++},required:this.props.required})}}Pn(Pf,"defaultProps",(Di().s[0]++,{onInput:()=>{Di().f[0]++}}));function sp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",e="7881723dfc9d5af5c18468677e4f429a5a061179",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx",statementMap:{0:{start:{line:9,column:24},end:{line:11,column:3}},1:{start:{line:13,column:14},end:{line:13,column:26}},2:{start:{line:14,column:4},end:{line:50,column:6}},3:{start:{line:53,column:18},end:{line:53,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:2},end:{line:12,column:3}},loc:{start:{line:12,column:11},end:{line:51,column:3}},line:12}},branchMap:{0:{loc:{start:{line:22,column:10},end:{line:28,column:11}},type:"binary-expr",locations:[{start:{line:22,column:10},end:{line:22,column:29}},{start:{line:22,column:49},end:{line:28,column:11}}],line:22},1:{loc:{start:{line:29,column:10},end:{line:47,column:11}},type:"binary-expr",locations:[{start:{line:29,column:10},end:{line:29,column:30}},{start:{line:29,column:50},end:{line:47,column:11}}],line:29}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldType.tsx"],names:[],mappings:"AAuBW,SAKH,KALG;AAvBX,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAUjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,eAAe;AAAA,IACpB,UAAU;AAAA,EACZ;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,MAAM;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QACtD,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAEjB;AAAA,eAAK,MAAM,YACV;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU;AAAA;AAAA,UACZ;AAAA,UAED,CAAC,KAAK,MAAM,YACX;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,gBACP,CAAC,cAAc,YAAY;AAAA,gBAC3B,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,QAAQ,MAAM;AAAA,gBACf,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,UAAU,QAAQ;AAAA,gBACnB,CAAC,kBAAkB,gBAAgB;AAAA,gBACnC,CAAC,aAAa,WAAW;AAAA,gBACzB,CAAC,WAAW,SAAS;AAAA,cACvB;AAAA,cACA,UAAU,KAAK,MAAM;AAAA,cACrB,OAAO,KAAK,MAAM;AAAA,cAClB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,UAClC;AAAA;AAAA;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7881723dfc9d5af5c18468677e4f429a5a061179"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return sp=function(){return l},l}sp();class hz extends sr.Component{render(){sp().f[0]++;const e=(sp().s[1]++,this.props.t);return sp().s[2]++,le.jsxs(pa,{label:e("Type"),fieldSpec:qo.layer.type,"data-wd-key":this.props.wdKey,error:this.props.error,children:[(sp().b[0][0]++,this.props.disabled&&(sp().b[0][1]++,le.jsx(Pf,{value:this.props.value,disabled:!0}))),(sp().b[1][0]++,!this.props.disabled&&(sp().b[1][1]++,le.jsx(Qg,{options:[["background","Background"],["fill","Fill"],["line","Line"],["symbol","Symbol"],["raster","Raster"],["circle","Circle"],["fill-extrusion","Fill Extrusion"],["hillshade","Hillshade"],["heatmap","Heatmap"]],onChange:this.props.onChange,value:this.props.value,"data-wd-key":this.props.wdKey+".select"})))]})}}Pn(hz,"defaultProps",(sp().s[0]++,{disabled:!1}));const fz=(sp().s[3]++,Ws()(hz));function S2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",e="f6ac2bd12dbef0198dd96da668f75e4659321d69",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:24,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:25,column:3}},line:7}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldId.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AASxB,qBAAqB,gBAAgB,MAAM,UAAwB;AAAA,EACjE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAM;AAAA,QAAK,WAAW,OAAO,MAAM;AAAA,QAE/C,eAAa,KAAK,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,SAAS,KAAK,MAAM;AAAA,YACpB,eAAa,KAAK,MAAM,QAAQ;AAAA;AAAA,QAClC;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f6ac2bd12dbef0198dd96da668f75e4659321d69"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return S2=function(){return l},l}S2();class pz extends sr.Component{render(){return S2().f[0]++,S2().s[0]++,le.jsx(pa,{label:"ID",fieldSpec:qo.layer.id,"data-wd-key":this.props.wdKey,error:this.props.error,children:le.jsx(Pf,{value:this.props.value,onInput:this.props.onChange,"data-wd-key":this.props.wdKey+".input"})})}}var q4={exports:{}},w9;function aie(){if(w9)return q4.exports;w9=1;var n=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function e(Ze){var Xe,Ne,Se,Re=Ze.ownerDocument,He=Re.body,_t=Re&&Re.documentElement;return Xe=Ze.getBoundingClientRect(),Ne=Xe.left,Se=Xe.top,Ne-=_t.clientLeft||He.clientLeft||0,Se-=_t.clientTop||He.clientTop||0,{left:Ne,top:Se}}function t(Ze,Xe){var Ne=Ze["page"+(Xe?"Y":"X")+"Offset"],Se="scroll"+(Xe?"Top":"Left");if(typeof Ne!="number"){var Re=Ze.document;Ne=Re.documentElement[Se],typeof Ne!="number"&&(Ne=Re.body[Se])}return Ne}function r(Ze){return t(Ze)}function i(Ze){return t(Ze,!0)}function s(Ze){var Xe=e(Ze),Ne=Ze.ownerDocument,Se=Ne.defaultView||Ne.parentWindow;return Xe.left+=r(Se),Xe.top+=i(Se),Xe}function l(Ze,Xe,Ne){var Se="",Re=Ze.ownerDocument;return(Ne=Ne||Re.defaultView.getComputedStyle(Ze,null))&&(Se=Ne.getPropertyValue(Xe)||Ne[Xe]),Se}var o=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),p=/^(top|right|bottom|left)$/,v="currentStyle",x="runtimeStyle",B="left",T="px";function P(Ze,Xe){var Ne=Ze[v]&&Ze[v][Xe];if(o.test(Ne)&&!p.test(Xe)){var Se=Ze.style,Re=Se[B],He=Ze[x][B];Ze[x][B]=Ze[v][B],Se[B]=Xe==="fontSize"?"1em":Ne||0,Ne=Se.pixelLeft+T,Se[B]=Re,Ze[x][B]=He}return Ne===""?"auto":Ne}var U;typeof window<"u"&&(U=window.getComputedStyle?l:P);function j(Ze,Xe){De(Ze,"position")==="static"&&(Ze.style.position="relative");var Ne=s(Ze),Se={},Re,He;for(He in Xe)Re=parseFloat(De(Ze,He))||0,Se[He]=Re+Xe[He]-Ne[He];De(Ze,Se)}function N(Ze,Xe){for(var Ne=0;Ne<Ze.length;Ne++)Xe(Ze[Ne])}function q(Ze){return U(Ze,"boxSizing")==="border-box"}var H=["margin","border","padding"],oe=-1,te=2,V=1,ne=0;function W(Ze,Xe,Ne){var Se={},Re=Ze.style,He;for(He in Xe)Se[He]=Re[He],Re[He]=Xe[He];Ne.call(Ze);for(He in Xe)Re[He]=Se[He]}function ie(Ze,Xe,Ne){var Se=0,Re,He,_t;for(He=0;He<Xe.length;He++)if(Re=Xe[He],Re)for(_t=0;_t<Ne.length;_t++){var Gt;Re==="border"?Gt=Re+Ne[_t]+"Width":Gt=Re+Ne[_t],Se+=parseFloat(U(Ze,Gt))||0}return Se}function he(Ze){return Ze!=null&&Ze==Ze.window}var fe={};N(["Width","Height"],function(Ze){fe["doc"+Ze]=function(Xe){var Ne=Xe.document;return Math.max(Ne.documentElement["scroll"+Ze],Ne.body["scroll"+Ze],fe["viewport"+Ze](Ne))},fe["viewport"+Ze]=function(Xe){var Ne="client"+Ze,Se=Xe.document,Re=Se.body,He=Se.documentElement,_t=He[Ne];return Se.compatMode==="CSS1Compat"&&_t||Re&&Re[Ne]||_t}});function Ee(Ze,Xe,Ne){if(he(Ze))return Xe==="width"?fe.viewportWidth(Ze):fe.viewportHeight(Ze);if(Ze.nodeType===9)return Xe==="width"?fe.docWidth(Ze):fe.docHeight(Ze);var Se=Xe==="width"?["Left","Right"]:["Top","Bottom"],Re=Xe==="width"?Ze.offsetWidth:Ze.offsetHeight;U(Ze);var He=q(Ze),_t=0;(Re==null||Re<=0)&&(Re=void 0,_t=U(Ze,Xe),(_t==null||Number(_t)<0)&&(_t=Ze.style[Xe]||0),_t=parseFloat(_t)||0),Ne===void 0&&(Ne=He?V:oe);var Gt=Re!==void 0||He,yt=Re||_t;return Ne===oe?Gt?yt-ie(Ze,["border","padding"],Se):_t:Gt?yt+(Ne===V?0:Ne===te?-ie(Ze,["border"],Se):ie(Ze,["margin"],Se)):_t+ie(Ze,H.slice(Ne),Se)}var me={position:"absolute",visibility:"hidden",display:"block"};function Me(Ze){var Xe,Ne=arguments;return Ze.offsetWidth!==0?Xe=Ee.apply(void 0,Ne):W(Ze,me,function(){Xe=Ee.apply(void 0,Ne)}),Xe}N(["width","height"],function(Ze){var Xe=Ze.charAt(0).toUpperCase()+Ze.slice(1);fe["outer"+Xe]=function(Se,Re){return Se&&Me(Se,Ze,Re?ne:V)};var Ne=Ze==="width"?["Left","Right"]:["Top","Bottom"];fe[Ze]=function(Se,Re){if(Re!==void 0){if(Se){U(Se);var He=q(Se);return He&&(Re+=ie(Se,["padding","border"],Ne)),De(Se,Ze,Re)}return}return Se&&Me(Se,Ze,oe)}});function De(Ze,Xe,Ne){if(typeof Xe=="object"){for(var Se in Xe)De(Ze,Se,Xe[Se]);return}if(typeof Ne<"u")typeof Ne=="number"&&(Ne=Ne+"px"),Ze.style[Xe]=Ne;else return U(Ze,Xe)}function xe(Ze,Xe){for(var Ne in Xe)Ze[Ne]=Xe[Ne];return Ze}var At=q4.exports={getWindow:function(Ze){var Xe=Ze.ownerDocument||Ze;return Xe.defaultView||Xe.parentWindow},offset:function(Ze,Xe){if(typeof Xe<"u")j(Ze,Xe);else return s(Ze)},isWindow:he,each:N,css:De,clone:function(Ze){var Xe={};for(var Ne in Ze)Xe[Ne]=Ze[Ne];var Se=Ze.overflow;if(Se)for(Ne in Ze)Xe.overflow[Ne]=Ze.overflow[Ne];return Xe},mix:xe,scrollLeft:function(Ze,Xe){if(he(Ze)){if(Xe===void 0)return r(Ze);window.scrollTo(Xe,i(Ze))}else{if(Xe===void 0)return Ze.scrollLeft;Ze.scrollLeft=Xe}},scrollTop:function(Ze,Xe){if(he(Ze)){if(Xe===void 0)return i(Ze);window.scrollTo(r(Ze),Xe)}else{if(Xe===void 0)return Ze.scrollTop;Ze.scrollTop=Xe}},merge:function(){for(var Ze={},Xe=0;Xe<arguments.length;Xe++)At.mix(Ze,arguments[Xe]);return Ze},viewportWidth:0,viewportHeight:0};return xe(At,fe),q4.exports}var V4,S9;function lie(){if(S9)return V4;S9=1;var n=aie();function e(t,r,i){i=i||{},r.nodeType===9&&(r=n.getWindow(r));var s=i.allowHorizontalScroll,l=i.onlyScrollIfNeeded,o=i.alignWithTop,p=i.alignWithLeft;s=s===void 0?!0:s;var v=n.isWindow(r),x=n.offset(t),B=n.outerHeight(t),T=n.outerWidth(t),P,U,j,N,q,H,oe,te,V,ne;v?(oe=r,ne=n.height(oe),V=n.width(oe),te={left:n.scrollLeft(oe),top:n.scrollTop(oe)},q={left:x.left-te.left,top:x.top-te.top},H={left:x.left+T-(te.left+V),top:x.top+B-(te.top+ne)},N=te):(P=n.offset(r),U=r.clientHeight,j=r.clientWidth,N={left:r.scrollLeft,top:r.scrollTop},q={left:x.left-(P.left+(parseFloat(n.css(r,"borderLeftWidth"))||0)),top:x.top-(P.top+(parseFloat(n.css(r,"borderTopWidth"))||0))},H={left:x.left+T-(P.left+j+(parseFloat(n.css(r,"borderRightWidth"))||0)),top:x.top+B-(P.top+U+(parseFloat(n.css(r,"borderBottomWidth"))||0))}),q.top<0||H.top>0?o===!0?n.scrollTop(r,N.top+q.top):o===!1?n.scrollTop(r,N.top+H.top):q.top<0?n.scrollTop(r,N.top+q.top):n.scrollTop(r,N.top+H.top):l||(o=o===void 0?!0:!!o,o?n.scrollTop(r,N.top+q.top):n.scrollTop(r,N.top+H.top)),s&&(q.left<0||H.left>0?p===!0?n.scrollLeft(r,N.left+q.left):p===!1?n.scrollLeft(r,N.left+H.left):q.left<0?n.scrollLeft(r,N.left+q.left):n.scrollLeft(r,N.left+H.left):l||(p=p===void 0?!0:!!p,p?n.scrollLeft(r,N.left+q.left):n.scrollLeft(r,N.left+H.left)))}return V4=e,V4}var $4,E9;function uie(){return E9||(E9=1,$4=lie()),$4}var H4,B9;function Aie(){if(B9)return H4;B9=1;var n=Object.assign||function(P){for(var U=1;U<arguments.length;U++){var j=arguments[U];for(var N in j)Object.prototype.hasOwnProperty.call(j,N)&&(P[N]=j[N])}return P},e=function(){function P(U,j){for(var N=0;N<j.length;N++){var q=j[N];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(U,q.key,q)}}return function(U,j,N){return j&&P(U.prototype,j),N&&P(U,N),U}}();function t(P,U){if(!(P instanceof U))throw new TypeError("Cannot call a class as a function")}function r(P,U){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:P}function i(P,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);P.prototype=Object.create(U&&U.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(P,U):P.__proto__=U)}var s=Na(),l=yp(),o=RC(),p=o.findDOMNode,v=uie(),x=["blur","checkValidity","click","focus","select","setCustomValidity","setSelectionRange","setRangeText"];function B(){return{x:window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}}var T=function(P){i(U,P);function U(j){t(this,U);var N=r(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,j));return N.state={isOpen:!1,highlightedIndex:null},N._debugStates=[],N.ensureHighlightedIndex=N.ensureHighlightedIndex.bind(N),N.exposeAPI=N.exposeAPI.bind(N),N.handleInputFocus=N.handleInputFocus.bind(N),N.handleInputBlur=N.handleInputBlur.bind(N),N.handleChange=N.handleChange.bind(N),N.handleKeyDown=N.handleKeyDown.bind(N),N.handleInputClick=N.handleInputClick.bind(N),N.maybeAutoCompleteText=N.maybeAutoCompleteText.bind(N),N}return e(U,[{key:"componentWillMount",value:function(){this.refs={},this._ignoreBlur=!1,this._ignoreFocus=!1,this._scrollOffset=null,this._scrollTimer=null}},{key:"componentWillUnmount",value:function(){clearTimeout(this._scrollTimer),this._scrollTimer=null}},{key:"componentWillReceiveProps",value:function(N){this.state.highlightedIndex!==null&&this.setState(this.ensureHighlightedIndex),N.autoHighlight&&(this.props.value!==N.value||this.state.highlightedIndex===null)&&this.setState(this.maybeAutoCompleteText)}},{key:"componentDidMount",value:function(){this.isOpen()&&this.setMenuPositions()}},{key:"componentDidUpdate",value:function(N,q){(this.state.isOpen&&!q.isOpen||"open"in this.props&&this.props.open&&!N.open)&&this.setMenuPositions(),this.maybeScrollItemIntoView(),q.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen)}},{key:"exposeAPI",value:function(N){var q=this;this.refs.input=N,x.forEach(function(H){return q[H]=N&&N[H]&&N[H].bind(N)})}},{key:"maybeScrollItemIntoView",value:function(){if(this.isOpen()&&this.state.highlightedIndex!==null){var N=this.refs["item-"+this.state.highlightedIndex],q=this.refs.menu;v(p(N),p(q),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(N){U.keyDownHandlers[N.key]?U.keyDownHandlers[N.key].call(this,N):this.isOpen()||this.setState({isOpen:!0})}},{key:"handleChange",value:function(N){this.props.onChange(N,N.target.value)}},{key:"getFilteredItems",value:function(N){var q=N.items;return N.shouldItemRender&&(q=q.filter(function(H){return N.shouldItemRender(H,N.value)})),N.sortItems&&q.sort(function(H,oe){return N.sortItems(H,oe,N.value)}),q}},{key:"maybeAutoCompleteText",value:function(N,q){for(var H=N.highlightedIndex,oe=q.value,te=q.getItemValue,V=H===null?0:H,ne=this.getFilteredItems(q),W=0;W<ne.length&&!q.isItemSelectable(ne[V]);W++)V=(V+1)%ne.length;var ie=ne[V]&&q.isItemSelectable(ne[V])?ne[V]:null;if(oe!==""&&ie){var he=te(ie),fe=he.toLowerCase().indexOf(oe.toLowerCase())===0;if(fe)return{highlightedIndex:V}}return{highlightedIndex:null}}},{key:"ensureHighlightedIndex",value:function(N,q){if(N.highlightedIndex>=this.getFilteredItems(q).length)return{highlightedIndex:null}}},{key:"setMenuPositions",value:function(){var N=this.refs.input,q=N.getBoundingClientRect(),H=window.window.getComputedStyle(N),oe=parseInt(H.marginBottom,10)||0,te=parseInt(H.marginLeft,10)||0,V=parseInt(H.marginRight,10)||0;this.setState({menuTop:q.bottom+oe,menuLeft:q.left+te,menuWidth:q.width+te+V})}},{key:"highlightItemFromMouse",value:function(N){this.setState({highlightedIndex:N})}},{key:"selectItemFromMouse",value:function(N){var q=this,H=this.props.getItemValue(N);this.setIgnoreBlur(!1),this.setState({isOpen:!1,highlightedIndex:null},function(){q.props.onSelect(H,N)})}},{key:"setIgnoreBlur",value:function(N){this._ignoreBlur=N}},{key:"renderMenu",value:function(){var N=this,q=this.getFilteredItems(this.props).map(function(te,V){var ne=N.props.renderItem(te,N.state.highlightedIndex===V,{cursor:"default"});return s.cloneElement(ne,{onMouseEnter:N.props.isItemSelectable(te)?function(){return N.highlightItemFromMouse(V)}:null,onClick:N.props.isItemSelectable(te)?function(){return N.selectItemFromMouse(te)}:null,ref:function(ie){return N.refs["item-"+V]=ie}})}),H={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth},oe=this.props.renderMenu(q,this.props.value,H);return s.cloneElement(oe,{ref:function(V){return N.refs.menu=V},onTouchStart:function(){return N.setIgnoreBlur(!0)},onMouseEnter:function(){return N.setIgnoreBlur(!0)},onMouseLeave:function(){return N.setIgnoreBlur(!1)}})}},{key:"handleInputBlur",value:function(N){var q=this;if(this._ignoreBlur){this._ignoreFocus=!0,this._scrollOffset=B(),this.refs.input.focus();return}var H=void 0,oe=this.state.highlightedIndex;if(this.props.selectOnBlur&&oe!==null){var te=this.getFilteredItems(this.props),V=te[oe],ne=this.props.getItemValue(V);H=function(){return q.props.onSelect(ne,V)}}this.setState({isOpen:!1,highlightedIndex:null},H);var W=this.props.inputProps.onBlur;W&&W(N)}},{key:"handleInputFocus",value:function(N){var q=this;if(this._ignoreFocus){this._ignoreFocus=!1;var H=this._scrollOffset,oe=H.x,te=H.y;this._scrollOffset=null,window.scrollTo(oe,te),clearTimeout(this._scrollTimer),this._scrollTimer=setTimeout(function(){q._scrollTimer=null,window.scrollTo(oe,te)},0);return}this.setState({isOpen:!0});var V=this.props.inputProps.onFocus;V&&V(N)}},{key:"isInputFocused",value:function(){var N=this.refs.input;return N.ownerDocument&&N===N.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!this.isOpen()&&this.setState({isOpen:!0})}},{key:"composeEventHandlers",value:function(N,q){return q?function(H){N(H),q(H)}:N}},{key:"isOpen",value:function(){return"open"in this.props?this.props.open:this.state.isOpen}},{key:"render",value:function(){this.props.debug&&this._debugStates.push({id:this._debugStates.length,state:this.state});var N=this.props.inputProps,q=this.isOpen();return s.createElement("div",n({style:n({},this.props.wrapperStyle)},this.props.wrapperProps),this.props.renderInput(n({},N,{role:"combobox","aria-autocomplete":"list","aria-expanded":q,autoComplete:"off",ref:this.exposeAPI,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleChange,onKeyDown:this.composeEventHandlers(this.handleKeyDown,N.onKeyDown),onClick:this.composeEventHandlers(this.handleInputClick,N.onClick),value:this.props.value})),q&&this.renderMenu(),this.props.debug&&s.createElement("pre",{style:{marginLeft:300}},JSON.stringify(this._debugStates.slice(Math.max(0,this._debugStates.length-5),this._debugStates.length),null,2)))}}]),U}(s.Component);return T.propTypes={items:l.array.isRequired,value:l.any,onChange:l.func,onSelect:l.func,shouldItemRender:l.func,isItemSelectable:l.func,sortItems:l.func,getItemValue:l.func.isRequired,renderItem:l.func.isRequired,renderMenu:l.func,menuStyle:l.object,renderInput:l.func,inputProps:l.object,wrapperProps:l.object,wrapperStyle:l.object,autoHighlight:l.bool,selectOnBlur:l.bool,onMenuVisibilityChange:l.func,open:l.bool,debug:l.bool},T.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},renderInput:function(U){return s.createElement("input",U)},onChange:function(){},onSelect:function(){},isItemSelectable:function(){return!0},renderMenu:function(U,j,N){return s.createElement("div",{style:n({},N,this.menuStyle),children:U})},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,selectOnBlur:!1,onMenuVisibilityChange:function(){}},T.keyDownHandlers={ArrowDown:function(U){U.preventDefault();var j=this.getFilteredItems(this.props);if(j.length){for(var N=this.state.highlightedIndex,q=N===null?-1:N,H=0;H<j.length;H++){var oe=(q+H+1)%j.length;if(this.props.isItemSelectable(j[oe])){q=oe;break}}q>-1&&q!==N&&this.setState({highlightedIndex:q,isOpen:!0})}},ArrowUp:function(U){U.preventDefault();var j=this.getFilteredItems(this.props);if(j.length){for(var N=this.state.highlightedIndex,q=N===null?j.length:N,H=0;H<j.length;H++){var oe=(q-(1+H)+j.length)%j.length;if(this.props.isItemSelectable(j[oe])){q=oe;break}}q!==j.length&&this.setState({highlightedIndex:q,isOpen:!0})}},Enter:function(U){var j=this;if(U.keyCode===13)if(this.setIgnoreBlur(!1),this.isOpen())if(this.state.highlightedIndex==null)this.setState({isOpen:!1},function(){j.refs.input.select()});else{U.preventDefault();var N=this.getFilteredItems(this.props)[this.state.highlightedIndex],q=this.props.getItemValue(N);this.setState({isOpen:!1,highlightedIndex:null},function(){j.refs.input.setSelectionRange(q.length,q.length),j.props.onSelect(q,N)})}else return},Escape:function(){this.setIgnoreBlur(!1),this.setState({highlightedIndex:null,isOpen:!1})},Tab:function(){this.setIgnoreBlur(!1)}},H4=T,H4}var cie=Aie();const die=yl(cie);function Io(){var n="/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",e="6ef9facf9aeabdae687b5aca973710969d826d60",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx",statementMap:{0:{start:{line:5,column:19},end:{line:5,column:22}},1:{start:{line:7,column:10},end:{line:9,column:3}},2:{start:{line:10,column:23},end:{line:10,column:27}},3:{start:{line:11,column:24},end:{line:15,column:3}},4:{start:{line:17,column:4},end:{line:25,column:5}},5:{start:{line:18,column:24},end:{line:18,column:96}},6:{start:{line:19,column:31},end:{line:19,column:62}},7:{start:{line:20,column:6},end:{line:24,column:7}},8:{start:{line:21,column:8},end:{line:23,column:11}},9:{start:{line:28,column:4},end:{line:28,column:25}},10:{start:{line:31,column:4},end:{line:31,column:25}},11:{start:{line:34,column:4},end:{line:34,column:47}},12:{start:{line:37,column:4},end:{line:86,column:6}},13:{start:{line:41,column:10},end:{line:41,column:39}},14:{start:{line:63,column:36},end:{line:63,column:43}},15:{start:{line:64,column:29},end:{line:64,column:45}},16:{start:{line:65,column:33},end:{line:65,column:49}},17:{start:{line:67,column:14},end:{line:69,column:15}},18:{start:{line:68,column:16},end:{line:68,column:79}},19:{start:{line:70,column:14},end:{line:70,column:27}},20:{start:{line:72,column:65},end:{line:82,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:14},end:{line:12,column:15}},loc:{start:{line:12,column:20},end:{line:13,column:5}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:18},end:{line:26,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:22},end:{line:29,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:30,column:2},end:{line:30,column:3}},loc:{start:{line:30,column:23},end:{line:32,column:3}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:33,column:2},end:{line:33,column:3}},loc:{start:{line:33,column:14},end:{line:35,column:3}},line:33},5:{name:"(anonymous_5)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:87,column:3}},line:36},6:{name:"(anonymous_6)",decl:{start:{line:40,column:13},end:{line:40,column:14}},loc:{start:{line:40,column:21},end:{line:42,column:9}},line:40},7:{name:"(anonymous_7)",decl:{start:{line:63,column:26},end:{line:63,column:27}},loc:{start:{line:63,column:36},end:{line:63,column:43}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:64,column:22},end:{line:64,column:23}},loc:{start:{line:64,column:29},end:{line:64,column:45}},line:64},9:{name:"(anonymous_9)",decl:{start:{line:65,column:22},end:{line:65,column:23}},loc:{start:{line:65,column:33},end:{line:65,column:49}},line:65},10:{name:"(anonymous_10)",decl:{start:{line:66,column:30},end:{line:66,column:31}},loc:{start:{line:66,column:52},end:{line:71,column:13}},line:66},11:{name:"(anonymous_11)",decl:{start:{line:72,column:24},end:{line:72,column:25}},loc:{start:{line:72,column:65},end:{line:82,column:13}},line:72}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:20,column:6},end:{line:24,column:7}},type:"if",locations:[{start:{line:20,column:6},end:{line:24,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:34,column:24},end:{line:34,column:45}},type:"cond-expr",locations:[{start:{line:34,column:35},end:{line:34,column:41}},{start:{line:34,column:44},end:{line:34,column:45}}],line:34},3:{loc:{start:{line:66,column:37},end:{line:66,column:47}},type:"default-arg",locations:[{start:{line:66,column:45},end:{line:66,column:47}}],line:66},4:{loc:{start:{line:67,column:14},end:{line:69,column:15}},type:"if",locations:[{start:{line:67,column:14},end:{line:69,column:15}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputAutocomplete.tsx"],names:[],mappings:"AAsFU;AAtFV,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,kBAAkB;AAGzB,MAAM,aAAa;AAUnB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,QAAQ;AAAA,IACN,WAAW;AAAA,EACb;AAAA,EAEA,qBAA4C;AAAA,EAE5C,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,gBAAgB;AACd,QAAG,KAAK,MAAM,4BAA4B;AACxC,YAAM,YAAY,OAAO,cAAc,KAAK,mBAAoB,sBAAsB,EAAE;AACxF,YAAM,mBAAmB,KAAK,IAAI,WAAW,UAAU;AAEvD,UAAG,oBAAoB,KAAK,MAAM,WAAW;AAC3C,aAAK,SAAS;AAAA,UACZ,WAAW;AAAA,QACb,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AAClB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,qBAAqB;AACnB,SAAK,cAAc;AAAA,EACrB;AAAA,EAEA,SAAS,GAAW;AAClB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,KAAK,CAAC,OAAO;AACX,eAAK,qBAAqB;AAAA,QAC5B;AAAA,QAEA;AAAA,UAAC;AAAA;AAAA,YACC,WAAW;AAAA,cACT,UAAU;AAAA,cACV,UAAU;AAAA,cACV,WAAW,KAAK,MAAM;AAAA,cACtB,QAAQ;AAAA,YACV;AAAA,YACA,cAAc;AAAA,cACZ,WAAW;AAAA,cACX,OAAO,CAAC;AAAA,YACV;AAAA,YACA,YAAY;AAAA,cACV,cAAc,KAAK,MAAM,YAAY;AAAA,cACrC,WAAW;AAAA,cACX,YAAY;AAAA,YACd;AAAA,YACA,OAAO,KAAK,MAAM;AAAA,YAClB,OAAO,KAAK,MAAM;AAAA,YAClB,cAAc,CAAC,SAAS,KAAK,CAAC;AAAA,YAC9B,UAAU,OAAK,KAAK,SAAS,CAAC;AAAA,YAC9B,UAAU,CAAC,IAAI,MAAM,KAAK,SAAS,CAAC;AAAA,YACpC,kBAAkB,CAAC,MAAM,QAAM,OAAO;AACpC,kBAAI,OAAO,UAAW,UAAU;AAC9B,uBAAO,KAAK,CAAC,EAAE,YAAY,EAAE,QAAQ,MAAM,YAAY,CAAC,IAAI;AAAA,cAC9D;AACA,qBAAO;AAAA,YACT;AAAA,YACA,YAAY,CAAC,MAAM,kBACjB;AAAA,cAAC;AAAA;AAAA,gBAEC,WAAW,WAAW;AAAA,kBACpB,mCAAmC;AAAA,kBACnC,4CAA4C;AAAA,gBAC9C,CAAC;AAAA,gBAEA,eAAK,CAAC;AAAA;AAAA,cANF,KAAK,CAAC;AAAA,YAOb;AAAA;AAAA,QAEJ;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6ef9facf9aeabdae687b5aca973710969d826d60"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Io=function(){return l},l}Io();const O9=(Io().s[0]++,140);class Ly extends sr.Component{constructor(){super(...arguments);Pn(this,"state",(Io().s[1]++,{maxHeight:O9}));Pn(this,"autocompleteMenuEl",(Io().s[2]++,null))}calcMaxHeight(){if(Io().f[1]++,Io().s[4]++,this.props.keepMenuWithinWindowBounds){Io().b[0][0]++;const t=(Io().s[5]++,window.innerHeight-this.autocompleteMenuEl.getBoundingClientRect().top),r=(Io().s[6]++,Math.min(t,O9));Io().s[7]++,r!=this.state.maxHeight?(Io().b[1][0]++,Io().s[8]++,this.setState({maxHeight:r})):Io().b[1][1]++}else Io().b[0][1]++}componentDidMount(){Io().f[2]++,Io().s[9]++,this.calcMaxHeight()}componentDidUpdate(){Io().f[3]++,Io().s[10]++,this.calcMaxHeight()}onChange(t){Io().f[4]++,Io().s[11]++,this.props.onChange(t===""?(Io().b[2][0]++,void 0):(Io().b[2][1]++,t))}render(){return Io().f[5]++,Io().s[12]++,le.jsx("div",{ref:t=>{Io().f[6]++,Io().s[13]++,this.autocompleteMenuEl=t},children:le.jsx(die,{menuStyle:{position:"fixed",overflow:"auto",maxHeight:this.state.maxHeight,zIndex:"998"},wrapperProps:{className:"maputnik-autocomplete",style:{}},inputProps:{"aria-label":this.props["aria-label"],className:"maputnik-string",spellCheck:!1},value:this.props.value,items:this.props.options,getItemValue:t=>(Io().f[7]++,Io().s[14]++,t[0]),onSelect:t=>(Io().f[8]++,Io().s[15]++,this.onChange(t)),onChange:(t,r)=>(Io().f[9]++,Io().s[16]++,this.onChange(r)),shouldItemRender:(t,r=(Io().b[3][0]++,""))=>(Io().f[10]++,Io().s[17]++,typeof r=="string"?(Io().b[4][0]++,Io().s[18]++,t[0].toLowerCase().indexOf(r.toLowerCase())>-1):(Io().b[4][1]++,Io().s[19]++,!1)),renderItem:(t,r)=>(Io().f[11]++,Io().s[20]++,le.jsx("div",{className:em({"maputnik-autocomplete-menu-item":!0,"maputnik-autocomplete-menu-item-selected":r}),children:t[1]},t[0]))})})}}Pn(Ly,"defaultProps",(Io().s[3]++,{onChange:()=>{Io().f[0]++},options:[]}));function Up(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",e="ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:12,column:3}},1:{start:{line:14,column:14},end:{line:14,column:26}},2:{start:{line:15,column:4},end:{line:31,column:6}},3:{start:{line:27,column:56},end:{line:27,column:66}},4:{start:{line:34,column:20},end:{line:34,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:32,column:3}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:27,column:47},end:{line:27,column:48}},loc:{start:{line:27,column:56},end:{line:27,column:66}},line:27}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSource.tsx"],names:[],mappings:"AA6BM;AA7BN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,WAAW,CAAC;AAAA,EACd;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,QAAQ;AAAA,QACjB,WAAW,OAAO,MAAM;AAAA,QACxB,OAAO,KAAK,MAAM;AAAA,QAClB,eAAa,KAAK,MAAM;AAAA,QAExB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,WAAW,IAAI,SAAO,CAAC,KAAK,GAAG,CAAC;AAAA;AAAA,QACtD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab049bb75b4ddccd0f9bdd2bba8785d564ca92f6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Up=function(){return l},l}Up();class mz extends sr.Component{render(){var t;Up().f[1]++;const e=(Up().s[1]++,this.props.t);return Up().s[2]++,le.jsx(pa,{label:e("Source"),fieldSpec:qo.layer.source,error:this.props.error,"data-wd-key":this.props.wdKey,children:le.jsx(Ly,{value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceIds)==null?void 0:t.map(r=>(Up().f[2]++,Up().s[3]++,[r,r]))})})}}Pn(mz,"defaultProps",(Up().s[0]++,{onChange:()=>{Up().f[0]++},sourceIds:[]}));const gz=(Up().s[4]++,Ws()(mz));function zp(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",e="d17faa4f03faf23184e12eb0563d322067d1f63d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx",statementMap:{0:{start:{line:8,column:24},end:{line:13,column:3}},1:{start:{line:15,column:14},end:{line:15,column:26}},2:{start:{line:16,column:4},end:{line:33,column:6}},3:{start:{line:29,column:59},end:{line:29,column:65}},4:{start:{line:36,column:25},end:{line:36,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:14},end:{line:9,column:15}},loc:{start:{line:9,column:20},end:{line:10,column:5}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:34,column:3}},line:14},2:{name:"(anonymous_2)",decl:{start:{line:29,column:52},end:{line:29,column:53}},loc:{start:{line:29,column:59},end:{line:29,column:65}},line:29}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSourceLayer.tsx"],names:[],mappings:"AA8BM;AA9BN,OAAO,WAAW;AAElB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAC9B,SAA0B,uBAAuB;AAUjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,OAAO,eAAe;AAAA,IACpB,UAAU,MAAM;AAAA,IAAC;AAAA,IACjB,gBAAgB,CAAC;AAAA,IACjB,SAAS;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,cAAc;AAAA,QACvB,WAAW,OAAO,MAAM,cAAc;AAAA,QACtC,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,4BAA4B,CAAC,CAAC,KAAK,MAAM;AAAA,YACzC,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,KAAK,MAAM,gBAAgB,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,QACrD;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17faa4f03faf23184e12eb0563d322067d1f63d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return zp=function(){return l},l}zp();class yz extends sr.Component{render(){var t;zp().f[1]++;const e=(zp().s[1]++,this.props.t);return zp().s[2]++,le.jsx(pa,{label:e("Source Layer"),fieldSpec:ks.layer["source-layer"],"data-wd-key":"layer-source-layer",error:this.props.error,children:le.jsx(Ly,{keepMenuWithinWindowBounds:!!this.props.isFixed,value:this.props.value,onChange:this.props.onChange,options:(t=this.props.sourceLayerIds)==null?void 0:t.map(r=>(zp().f[2]++,zp().s[3]++,[r,r]))})})}}Pn(yz,"defaultProps",(zp().s[0]++,{onChange:()=>{zp().f[0]++},sourceLayerIds:[],isFixed:!1}));const vz=(zp().s[4]++,Ws()(yz));function Wr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",e="7a9f0314912c2a2e8e47cddf3aaf5469476531e0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx",statementMap:{0:{start:{line:11,column:13},end:{line:26,column:3}},1:{start:{line:12,column:26},end:{line:12,column:52}},2:{start:{line:13,column:18},end:{line:16,column:5}},3:{start:{line:17,column:4},end:{line:22,column:5}},4:{start:{line:18,column:6},end:{line:18,column:39}},5:{start:{line:19,column:6},end:{line:21,column:7}},6:{start:{line:20,column:8},end:{line:20,column:59}},7:{start:{line:23,column:4},end:{line:23,column:30}},8:{start:{line:24,column:4},end:{line:24,column:45}},9:{start:{line:25,column:4},end:{line:25,column:35}},10:{start:{line:28,column:4},end:{line:28,column:17}},11:{start:{line:29,column:18},end:{line:32,column:5}},12:{start:{line:33,column:4},end:{line:36,column:5}},13:{start:{line:34,column:6},end:{line:34,column:56}},14:{start:{line:35,column:6},end:{line:35,column:66}},15:{start:{line:37,column:4},end:{line:37,column:23}},16:{start:{line:40,column:20},end:{line:40,column:34}},17:{start:{line:41,column:20},end:{line:41,column:35}},18:{start:{line:42,column:32},end:{line:42,column:56}},19:{start:{line:43,column:32},end:{line:43,column:56}},20:{start:{line:44,column:4},end:{line:51,column:5}},21:{start:{line:48,column:6},end:{line:50,column:9}},22:{start:{line:54,column:22},end:{line:54,column:54}},23:{start:{line:55,column:4},end:{line:55,column:34}},24:{start:{line:58,column:20},end:{line:58,column:22}},25:{start:{line:59,column:18},end:{line:79,column:5}},26:{start:{line:80,column:4},end:{line:85,column:5}},27:{start:{line:81,column:22},end:{line:81,column:30}},28:{start:{line:82,column:6},end:{line:84,column:7}},29:{start:{line:83,column:8},end:{line:83,column:26}},30:{start:{line:86,column:4},end:{line:86,column:19}},31:{start:{line:89,column:14},end:{line:89,column:26}},32:{start:{line:90,column:20},end:{line:90,column:52}},33:{start:{line:91,column:19},end:{line:91,column:61}},34:{start:{line:92,column:4},end:{line:148,column:6}},35:{start:{line:107,column:16},end:{line:107,column:41}},36:{start:{line:116,column:31},end:{line:116,column:57}},37:{start:{line:125,column:31},end:{line:125,column:59}},38:{start:{line:134,column:31},end:{line:134,column:67}},39:{start:{line:151,column:17},end:{line:151,column:52}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:11,column:13},end:{line:11,column:14}},loc:{start:{line:11,column:19},end:{line:26,column:3}},line:11},1:{name:"(anonymous_1)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:21},end:{line:38,column:3}},line:27},2:{name:"(anonymous_2)",decl:{start:{line:39,column:2},end:{line:39,column:3}},loc:{start:{line:39,column:44},end:{line:52,column:3}},line:39},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:29},end:{line:56,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:19},end:{line:87,column:3}},line:57},5:{name:"(anonymous_5)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:11},end:{line:149,column:3}},line:88},6:{name:"(anonymous_6)",decl:{start:{line:106,column:24},end:{line:106,column:25}},loc:{start:{line:106,column:31},end:{line:108,column:15}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:116,column:24},end:{line:116,column:25}},loc:{start:{line:116,column:31},end:{line:116,column:57}},line:116},8:{name:"(anonymous_8)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:31},end:{line:125,column:59}},line:125},9:{name:"(anonymous_9)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:31},end:{line:134,column:67}},line:134}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:19,column:10},end:{line:19,column:68}},type:"binary-expr",locations:[{start:{line:19,column:10},end:{line:19,column:38}},{start:{line:19,column:42},end:{line:19,column:68}}],line:19},3:{loc:{start:{line:33,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:36,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},4:{loc:{start:{line:44,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},5:{loc:{start:{line:46,column:6},end:{line:46,column:160}},type:"binary-expr",locations:[{start:{line:46,column:6},end:{line:46,column:25}},{start:{line:46,column:29},end:{line:46,column:52}},{start:{line:46,column:56},end:{line:46,column:106}},{start:{line:46,column:110},end:{line:46,column:160}}],line:46},6:{loc:{start:{line:54,column:22},end:{line:54,column:54}},type:"binary-expr",locations:[{start:{line:54,column:22},end:{line:54,column:48}},{start:{line:54,column:52},end:{line:54,column:54}}],line:54},7:{loc:{start:{line:55,column:11},end:{line:55,column:33}},type:"binary-expr",locations:[{start:{line:55,column:11},end:{line:55,column:27}},{start:{line:55,column:31},end:{line:55,column:33}}],line:55},8:{loc:{start:{line:82,column:6},end:{line:84,column:7}},type:"if",locations:[{start:{line:82,column:6},end:{line:84,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:82},9:{loc:{start:{line:82,column:10},end:{line:82,column:61}},type:"binary-expr",locations:[{start:{line:82,column:10},end:{line:82,column:24}},{start:{line:82,column:28},end:{line:82,column:61}}],line:82},10:{loc:{start:{line:119,column:10},end:{line:127,column:11}},type:"binary-expr",locations:[{start:{line:119,column:10},end:{line:119,column:42}},{start:{line:119,column:62},end:{line:127,column:11}}],line:119},11:{loc:{start:{line:128,column:10},end:{line:136,column:11}},type:"binary-expr",locations:[{start:{line:128,column:10},end:{line:128,column:87}},{start:{line:128,column:107},end:{line:136,column:11}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0,0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalAdd.tsx"],names:[],mappings:"AA2IM,SACE,KADF;AA3IN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAE7B,SAA0B,uBAAuB;AAkBjD,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,WAAW,MAAM;AACf,UAAM,gBAAgB,KAAK,MAAM,OAAO,MAAM,CAAC;AAC/C,UAAM,QAAuB;AAAA,MAC3B,IAAI,KAAK,MAAM;AAAA,MACf,MAAM,KAAK,MAAM;AAAA,IACnB;AAEA,QAAG,KAAK,MAAM,SAAS,cAAc;AACnC,YAAM,SAAS,KAAK,MAAM;AAC1B,UAAG,KAAK,MAAM,SAAS,YAAY,KAAK,MAAM,cAAc,GAAG;AAC7D,cAAM,cAAc,IAAI,KAAK,MAAM,cAAc;AAAA,MACnD;AAAA,IACF;AAEA,kBAAc,KAAK,KAA2B;AAE9C,SAAK,MAAM,eAAe,aAAa;AACvC,SAAK,MAAM,aAAa,KAAK;AAAA,EAC/B;AAAA,EAEA,YAAY,OAA8B;AACxC,UAAM,KAAK;AACX,UAAM,QAAuB;AAAA,MAC3B,MAAM;AAAA,MACN,IAAI;AAAA,IACN;AAEA,QAAG,MAAM,QAAQ,SAAS,GAAG;AAC3B,YAAM,SAAS,OAAO,KAAK,KAAK,MAAM,OAAO,EAAE,CAAC;AAChD,YAAM,cAAc,IAAI,KAAK,MAAM,QAAQ,MAAM,MAAgD,EAAE,CAAC;AAAA,IACtG;AACA,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,mBAAmB,YAAmC,WAA0B;AAE9E,UAAM,UAAU,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM;AAE3B,UAAM,sBAAsB,KAAK,WAAW,OAAO;AACnD,UAAM,sBAAsB,KAAK,WAAW,OAAO;AAEnD;AAAA;AAAA,MAEE,YAAY,WACT,UAAU,WAAW,MAErB,oBAAoB,QAAQ,UAAU,MAAO,IAAI,MAEjD,oBAAoB,QAAQ,KAAK,MAAM,MAAO,IAAI;AAAA,MACrD;AAEA,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,MACV,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,QAAgB;AACjC,UAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,KAAK,CAAC;AACjD,WAAO,UAAU,UAAU,CAAC;AAAA,EAC9B;AAAA,EAEA,WAAW,MAAc;AACvB,UAAM,UAAU,CAAC;AAEjB,UAAM,QAAQ;AAAA,MACZ,QAAQ;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN;AAAA,MACF;AAAA,MACA,SAAS;AAAA,QACP;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,IACF;AAEA,eAAU,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,OAAO,GAAU;AACjE,YAAM,UAAU,IAAI;AACpB,UAAG,MAAM,OAAO,KAAK,MAAM,OAAO,EAAE,QAAQ,IAAI,IAAI,IAAI;AACtD,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,UAAU,KAAK,WAAW,KAAK,MAAM,IAAI;AAC/C,UAAM,SAAS,KAAK,mBAAmB,KAAK,MAAM,MAAO;AAEzD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QACpB,eAAY;AAAA,QACZ,WAAU;AAAA,QAEV,+BAAC,SAAI,WAAU,sBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAc;AACvB,qBAAK,SAAS,EAAE,IAAI,EAAE,CAAC;AAAA,cACzB;AAAA;AAAA,UACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM;AAAA,cAClB,OAAM;AAAA,cACN,UAAU,CAAC,MAAkC,KAAK,SAAS,EAAE,MAAM,EAAE,CAAC;AAAA;AAAA,UACxE;AAAA,UACC,KAAK,MAAM,SAAS,gBACvB;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,cACX,OAAM;AAAA,cACN,OAAO,KAAK,MAAM;AAAA,cAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,QAAQ,EAAE,CAAC;AAAA;AAAA,UACtD;AAAA,UAEG,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,IAAI,IAAI,KAC/E;AAAA,YAAC;AAAA;AAAA,cACC,SAAS;AAAA,cACT,gBAAgB;AAAA,cAChB,OAAO,KAAK,MAAM,cAAc;AAAA,cAChC,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAAA;AAAA,UAC9D;AAAA,UAEE;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,eAAY;AAAA,cAEX,YAAE,WAAW;AAAA;AAAA,UAChB;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7a9f0314912c2a2e8e47cddf3aaf5469476531e0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Wr=function(){return l},l}Wr();class hie extends sr.Component{constructor(t){Wr().f[1]++,Wr().s[10]++;super(t);Pn(this,"addLayer",(Wr().s[0]++,()=>{Wr().f[0]++;const t=(Wr().s[1]++,this.props.layers.slice(0)),r=(Wr().s[2]++,{id:this.state.id,type:this.state.type});Wr().s[3]++,this.state.type!=="background"?(Wr().b[0][0]++,Wr().s[4]++,r.source=this.state.source,Wr().s[5]++,Wr().b[2][0]++,this.state.type!=="raster"&&(Wr().b[2][1]++,this.state["source-layer"])?(Wr().b[1][0]++,Wr().s[6]++,r["source-layer"]=this.state["source-layer"]):Wr().b[1][1]++):Wr().b[0][1]++,Wr().s[7]++,t.push(r),Wr().s[8]++,this.props.onLayersChange(t),Wr().s[9]++,this.props.onOpenToggle(!1)}));const r=(Wr().s[11]++,{type:"fill",id:""});Wr().s[12]++,t.sources.length>0?(Wr().b[3][0]++,Wr().s[13]++,r.source=Object.keys(this.props.sources)[0],Wr().s[14]++,r["source-layer"]=this.props.sources[r.source][0]):Wr().b[3][1]++,Wr().s[15]++,this.state=r}componentDidUpdate(t,r){Wr().f[2]++;const i=(Wr().s[16]++,r.type),s=(Wr().s[17]++,this.state.type),l=(Wr().s[18]++,this.getSources(i)),o=(Wr().s[19]++,this.getSources(s));Wr().s[20]++,Wr().b[5][0]++,i!==s&&(Wr().b[5][1]++,r.source!=="")&&(Wr().b[5][2]++,l.indexOf(r.source)>-1)&&(Wr().b[5][3]++,o.indexOf(this.state.source)<0)?(Wr().b[4][0]++,Wr().s[21]++,this.setState({source:""})):Wr().b[4][1]++}getLayersForSource(t){Wr().f[3]++;const r=(Wr().s[22]++,Wr().b[6][0]++,this.props.sources[t]||(Wr().b[6][1]++,{}));return Wr().s[23]++,Wr().b[7][0]++,r.layers||(Wr().b[7][1]++,[])}getSources(t){Wr().f[4]++;const r=(Wr().s[24]++,[]),i=(Wr().s[25]++,{vector:["fill","line","symbol","circle","fill-extrusion","heatmap"],raster:["raster"],geojson:["fill","line","symbol","circle","fill-extrusion","heatmap"]});Wr().s[26]++;for(const[s,l]of Object.entries(this.props.sources)){const o=(Wr().s[27]++,l.type);Wr().s[28]++,Wr().b[9][0]++,i[o]&&(Wr().b[9][1]++,i[o].indexOf(t)>-1)?(Wr().b[8][0]++,Wr().s[29]++,r.push(s)):Wr().b[8][1]++}return Wr().s[30]++,r}render(){Wr().f[5]++;const t=(Wr().s[31]++,this.props.t),r=(Wr().s[32]++,this.getSources(this.state.type)),i=(Wr().s[33]++,this.getLayersForSource(this.state.source));return Wr().s[34]++,le.jsx(L0,{isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Add Layer"),"data-wd-key":"modal:add-layer",className:"maputnik-add-modal",children:le.jsxs("div",{className:"maputnik-add-layer",children:[le.jsx(pz,{value:this.state.id,wdKey:"add-layer.layer-id",onChange:s=>{Wr().f[6]++,Wr().s[35]++,this.setState({id:s})}}),le.jsx(fz,{value:this.state.type,wdKey:"add-layer.layer-type",onChange:s=>(Wr().f[7]++,Wr().s[36]++,this.setState({type:s}))}),(Wr().b[10][0]++,this.state.type!=="background"&&(Wr().b[10][1]++,le.jsx(gz,{sourceIds:r,wdKey:"add-layer.layer-source-block",value:this.state.source,onChange:s=>(Wr().f[8]++,Wr().s[37]++,this.setState({source:s}))}))),(Wr().b[11][0]++,["background","raster","hillshade","heatmap"].indexOf(this.state.type)<0&&(Wr().b[11][1]++,le.jsx(vz,{isFixed:!0,sourceLayerIds:i,value:this.state["source-layer"],onChange:s=>(Wr().f[9]++,Wr().s[38]++,this.setState({"source-layer":s}))}))),le.jsx(il,{className:"maputnik-add-layer-button",onClick:this.addLayer,"data-wd-key":"add-layer",children:t("Add Layer")})]})})}}const fie=(Wr().s[39]++,Ws()(hie));function xg(){var n="/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",e="a991ed6da2a27b46f1adbb88a645aa2ee0df375e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts",statementMap:{0:{start:{line:1,column:10},end:{line:1,column:11}},1:{start:{line:3,column:2},end:{line:3,column:8}},2:{start:{line:4,column:2},end:{line:4,column:22}}},fnMap:{0:{name:"generateUniqueId",decl:{start:{line:2,column:24},end:{line:2,column:40}},loc:{start:{line:2,column:54},end:{line:5,column:1}},line:2}},branchMap:{0:{loc:{start:{line:2,column:41},end:{line:2,column:52}},type:"default-arg",locations:[{start:{line:2,column:50},end:{line:2,column:52}}],line:2}},s:{0:0,1:0,2:0},f:{0:0},b:{0:[0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/document-uid.ts"],names:[],mappings:"AAGA,IAAI,MAAM;AAEV,wBAAwB,iBAAiB,SAAO,IAAI;AAClD;AACA,SAAO,SAAO;AAChB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a991ed6da2a27b46f1adbb88a645aa2ee0df375e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return xg=function(){return l},l}xg();let I9=(xg().s[0]++,0);function Sy(n=(xg().b[0][0]++,"")){return xg().f[0]++,xg().s[1]++,I9++,xg().s[2]++,n+I9}function Ni(){var n="/home/runner/work/maputnik/maputnik/src/libs/layer.ts",e="8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layer.ts",statementMap:{0:{start:{line:3,column:28},end:{line:3,column:46}},1:{start:{line:4,column:2},end:{line:8,column:5}},2:{start:{line:5,column:4},end:{line:7,column:5}},3:{start:{line:6,column:6},end:{line:6,column:45}},4:{start:{line:9,column:29},end:{line:9,column:48}},5:{start:{line:10,column:2},end:{line:14,column:5}},6:{start:{line:11,column:4},end:{line:13,column:5}},7:{start:{line:12,column:6},end:{line:12,column:46}},8:{start:{line:15,column:2},end:{line:20,column:4}},9:{start:{line:23,column:2},end:{line:59,column:3}},10:{start:{line:24,column:4},end:{line:43,column:5}},11:{start:{line:25,column:23},end:{line:31,column:7}},12:{start:{line:32,column:6},end:{line:32,column:39}},13:{start:{line:33,column:6},end:{line:35,column:7}},14:{start:{line:34,column:8},end:{line:34,column:31}},15:{start:{line:36,column:6},end:{line:36,column:22}},16:{start:{line:38,column:23},end:{line:40,column:7}},17:{start:{line:41,column:6},end:{line:41,column:32}},18:{start:{line:42,column:6},end:{line:42,column:22}},19:{start:{line:45,column:4},end:{line:58,column:5}},20:{start:{line:46,column:6},end:{line:52,column:8}},21:{start:{line:54,column:6},end:{line:57,column:8}},22:{start:{line:62,column:2},end:{line:62,column:64}},23:{start:{line:65,column:29},end:{line:65,column:56}},24:{start:{line:66,column:19},end:{line:66,column:22}},25:{start:{line:67,column:2},end:{line:74,column:3}},26:{start:{line:67,column:15},end:{line:67,column:18}},27:{start:{line:68,column:32},end:{line:68,column:61}},28:{start:{line:69,column:4},end:{line:73,column:5}},29:{start:{line:70,column:6},end:{line:70,column:25}},30:{start:{line:72,column:6},end:{line:72,column:24}},31:{start:{line:75,column:2},end:{line:75,column:20}}},fnMap:{0:{name:"changeType",decl:{start:{line:2,column:16},end:{line:2,column:26}},loc:{start:{line:2,column:43},end:{line:21,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:41},end:{line:4,column:42}},loc:{start:{line:4,column:59},end:{line:8,column:3}},line:4},2:{name:"(anonymous_2)",decl:{start:{line:10,column:42},end:{line:10,column:43}},loc:{start:{line:10,column:60},end:{line:14,column:3}},line:10},3:{name:"changeProperty",decl:{start:{line:22,column:16},end:{line:22,column:30}},loc:{start:{line:22,column:65},end:{line:60,column:1}},line:22},4:{name:"layerPrefix",decl:{start:{line:61,column:16},end:{line:61,column:27}},loc:{start:{line:61,column:34},end:{line:63,column:1}},line:61},5:{name:"findClosestCommonPrefix",decl:{start:{line:64,column:16},end:{line:64,column:39}},loc:{start:{line:64,column:53},end:{line:76,column:1}},line:64}},branchMap:{0:{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:5},1:{loc:{start:{line:11,column:4},end:{line:13,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:13,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:11},2:{loc:{start:{line:23,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:59,column:3}},{start:{line:44,column:9},end:{line:59,column:3}}],line:23},3:{loc:{start:{line:24,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:43,column:5}},{start:{line:37,column:11},end:{line:43,column:5}}],line:24},4:{loc:{start:{line:33,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:33,column:6},end:{line:35,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:33},5:{loc:{start:{line:45,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:58,column:5}},{start:{line:53,column:11},end:{line:58,column:5}}],line:45},6:{loc:{start:{line:69,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:73,column:5}},{start:{line:71,column:11},end:{line:73,column:5}}],line:69}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layer.ts"],names:[],mappings:"AAAA,SAAQ,cAAa;AAGd,gBAAS,WAAW,OAA2B,SAAiB;AACrE,QAAM,oBAAiD,EAAE,GAAG,MAAM,MAAM;AACxE,SAAO,KAAK,iBAAiB,EAAE,QAAQ,kBAAgB;AACrD,QAAG,EAAE,gBAAgB,OAAO,WAAW,OAAO,IAAI;AAChD,aAAO,kBAAkB,YAAiD;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,qBAAmD,EAAE,GAAG,MAAM,OAAO;AAC3E,SAAO,KAAK,kBAAkB,EAAE,QAAQ,kBAAgB;AACtD,QAAG,EAAE,gBAAgB,OAAO,YAAY,OAAO,IAAI;AACjD,aAAO,mBAAmB,YAAkD;AAAA,IAC9E;AAAA,EACF,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACR;AACF;AAKO,gBAAS,eAAe,OAA2B,OAAwC,UAAkB,UAAe;AAEjI,MAAG,aAAa,QAAW;AACzB,QAAG,OAAO;AACR,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA;AAAA,QAEH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,QAChB;AAAA,MACF;AACA,aAAO,SAAS,KAAK,EAAE,QAAQ;AAG/B,UAAG,OAAO,KAAK,SAAS,KAAK,CAAC,EAAE,SAAS,GAAG;AAC1C,eAAO,SAAS,KAAK;AAAA,MACvB;AACA,aAAO;AAAA,IACT,OAAO;AACL,YAAM,WAAgB;AAAA,QACpB,GAAG;AAAA,MACL;AACA,aAAO,SAAS,QAAQ;AACxB,aAAO;AAAA,IACT;AAAA,EACF,OACK;AACH,QAAG,OAAO;AACR,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,KAAK,GAAG;AAAA,UACP,GAAG,MAAM,KAAK;AAAA,UACd,CAAC,QAAQ,GAAG;AAAA,QACd;AAAA,MACF;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,GAAG;AAAA,QACH,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAAA,EACF;AACF;AAEO,gBAAS,YAAY,MAAc;AACxC,SAAO,KAAK,QAAQ,KAAK,GAAG,EAAE,QAAQ,KAAK,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC;AAC9D;AAEO,gBAAS,wBAAwB,QAA8B,KAAa;AACjF,QAAM,qBAAqB,YAAY,OAAO,GAAG,EAAE,EAAE;AACrD,MAAI,aAAa;AACjB,WAAS,IAAI,KAAK,IAAI,GAAG,KAAK;AAC5B,UAAM,sBAAsB,YAAY,OAAO,IAAE,CAAC,EAAE,EAAE;AACtD,QAAG,wBAAwB,oBAAoB;AAC7C,mBAAa,IAAI;AAAA,IACnB,OAAO;AACL,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8d7d71e3a97c0e4b8cc5fd0ca26b8fdf4aa2aa36"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ni=function(){return l},l}Ni();function pie(n,e){Ni().f[0]++;const t=(Ni().s[0]++,{...n.paint});Ni().s[1]++,Object.keys(t).forEach(i=>{Ni().f[1]++,Ni().s[2]++,i in ks["paint_"+e]?Ni().b[0][1]++:(Ni().b[0][0]++,Ni().s[3]++,delete t[i])});const r=(Ni().s[4]++,{...n.layout});return Ni().s[5]++,Object.keys(r).forEach(i=>{Ni().f[2]++,Ni().s[6]++,i in ks["layout_"+e]?Ni().b[1][1]++:(Ni().b[1][0]++,Ni().s[7]++,delete r[i])}),Ni().s[8]++,{...n,paint:t,layout:r,type:e}}function mie(n,e,t,r){if(Ni().f[3]++,Ni().s[9]++,r===void 0)if(Ni().b[2][0]++,Ni().s[10]++,e){Ni().b[3][0]++;const i=(Ni().s[11]++,{...n,[e]:{...n[e]}});return Ni().s[12]++,delete i[e][t],Ni().s[13]++,Object.keys(i[e]).length<1?(Ni().b[4][0]++,Ni().s[14]++,delete i[e]):Ni().b[4][1]++,Ni().s[15]++,i}else{Ni().b[3][1]++;const i=(Ni().s[16]++,{...n});return Ni().s[17]++,delete i[t],Ni().s[18]++,i}else return Ni().b[2][1]++,Ni().s[19]++,e?(Ni().b[5][0]++,Ni().s[20]++,{...n,[e]:{...n[e],[t]:r}}):(Ni().b[5][1]++,Ni().s[21]++,{...n,[t]:r})}function ey(n){return Ni().f[4]++,Ni().s[22]++,n.replace(" ","-").replace("_","-").split("-")[0]}function gie(n,e){Ni().f[5]++;const t=(Ni().s[23]++,ey(n[e].id));let r=(Ni().s[24]++,e);Ni().s[25]++;for(let i=(Ni().s[26]++,e);i>0;i--){const s=(Ni().s[27]++,ey(n[i-1].id));if(Ni().s[28]++,s===t)Ni().b[6][0]++,Ni().s[29]++,r=i-1;else return Ni().b[6][1]++,Ni().s[30]++,r}return Ni().s[31]++,r}function vn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",e="fce844afd94013ad4b9b4e84bd148b8b849d3079",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx",statementMap:{0:{start:{line:13,column:24},end:{line:16,column:3}},1:{start:{line:20,column:4},end:{line:20,column:17}},2:{start:{line:21,column:4},end:{line:21,column:45}},3:{start:{line:22,column:4},end:{line:22,column:48}},4:{start:{line:23,column:4},end:{line:32,column:6}},5:{start:{line:35,column:4},end:{line:44,column:7}},6:{start:{line:46,column:17},end:{line:63,column:3}},7:{start:{line:47,column:14},end:{line:47,column:15}},8:{start:{line:48,column:22},end:{line:48,column:24}},9:{start:{line:49,column:4},end:{line:58,column:7}},10:{start:{line:50,column:26},end:{line:50,column:51}},11:{start:{line:51,column:24},end:{line:51,column:52}},12:{start:{line:52,column:6},end:{line:54,column:7}},13:{start:{line:53,column:8},end:{line:53,column:63}},14:{start:{line:55,column:6},end:{line:57,column:9}},15:{start:{line:56,column:8},end:{line:56,column:17}},16:{start:{line:59,column:4},end:{line:62,column:7}},17:{start:{line:65,column:19},end:{line:65,column:21}},18:{start:{line:66,column:41},end:{line:66,column:50}},19:{start:{line:67,column:4},end:{line:84,column:5}},20:{start:{line:67,column:17},end:{line:67,column:18}},21:{start:{line:68,column:24},end:{line:68,column:44}},22:{start:{line:69,column:28},end:{line:69,column:52}},23:{start:{line:70,column:6},end:{line:73,column:8}},24:{start:{line:74,column:20},end:{line:77,column:7}},25:{start:{line:78,column:6},end:{line:83,column:7}},26:{start:{line:79,column:26},end:{line:79,column:51}},27:{start:{line:80,column:8},end:{line:80,column:30}},28:{start:{line:82,column:8},end:{line:82,column:29}},29:{start:{line:85,column:4},end:{line:85,column:18}},30:{start:{line:88,column:22},end:{line:88,column:50}},31:{start:{line:89,column:22},end:{line:89,column:55}},32:{start:{line:90,column:4},end:{line:94,column:5}},33:{start:{line:91,column:6},end:{line:91,column:68}},34:{start:{line:93,column:6},end:{line:93,column:35}},35:{start:{line:95,column:4},end:{line:97,column:7}},36:{start:{line:100,column:22},end:{line:100,column:78}},37:{start:{line:101,column:4},end:{line:101,column:51}},38:{start:{line:104,column:4},end:{line:106,column:5}},39:{start:{line:105,column:6},end:{line:105,column:18}},40:{start:{line:108,column:18},end:{line:110,column:7}},41:{start:{line:111,column:6},end:{line:115,column:7}},42:{start:{line:112,column:8},end:{line:114,column:10}},43:{start:{line:116,column:6},end:{line:116,column:17}},44:{start:{line:118,column:24},end:{line:121,column:5}},45:{start:{line:123,column:18},end:{line:125,column:7}},46:{start:{line:126,column:6},end:{line:126,column:27}},47:{start:{line:127,column:6},end:{line:127,column:17}},48:{start:{line:129,column:23},end:{line:132,column:5}},49:{start:{line:133,column:25},end:{line:133,column:53}},50:{start:{line:134,column:4},end:{line:134,column:24}},51:{start:{line:137,column:4},end:{line:153,column:5}},52:{start:{line:138,column:31},end:{line:138,column:59}},53:{start:{line:139,column:6},end:{line:152,column:7}},54:{start:{line:140,column:23},end:{line:140,column:44}},55:{start:{line:141,column:24},end:{line:144,column:9}},56:{start:{line:145,column:25},end:{line:150,column:19}},57:{start:{line:146,column:10},end:{line:146,column:37}},58:{start:{line:147,column:10},end:{line:149,column:11}},59:{start:{line:148,column:12},end:{line:148,column:36}},60:{start:{line:151,column:8},end:{line:151,column:33}},61:{start:{line:156,column:22},end:{line:156,column:24}},62:{start:{line:157,column:14},end:{line:157,column:15}},63:{start:{line:158,column:26},end:{line:158,column:46}},64:{start:{line:159,column:4},end:{line:210,column:7}},65:{start:{line:160,column:26},end:{line:160,column:51}},66:{start:{line:161,column:6},end:{line:174,column:7}},67:{start:{line:162,column:36},end:{line:172,column:9}},68:{start:{line:166,column:47},end:{line:166,column:52}},69:{start:{line:173,column:8},end:{line:173,column:28}},70:{start:{line:175,column:6},end:{line:209,column:9}},71:{start:{line:176,column:25},end:{line:176,column:72}},72:{start:{line:177,column:27},end:{line:179,column:10}},73:{start:{line:178,column:10},end:{line:178,column:97}},74:{start:{line:180,column:32},end:{line:180,column:34}},75:{start:{line:181,column:8},end:{line:183,column:9}},76:{start:{line:182,column:10},end:{line:182,column:53}},77:{start:{line:184,column:41},end:{line:206,column:9}},78:{start:{line:207,column:8},end:{line:207,column:33}},79:{start:{line:208,column:8},end:{line:208,column:17}},80:{start:{line:211,column:14},end:{line:211,column:26}},81:{start:{line:212,column:4},end:{line:264,column:6}},82:{start:{line:267,column:27},end:{line:267,column:72}},83:{start:{line:268,column:35},end:{line:268,column:118}},84:{start:{line:268,column:80},end:{line:268,column:117}},85:{start:{line:271,column:4},end:{line:280,column:6}},86:{start:{line:278,column:33},end:{line:278,column:38}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:19},end:{line:14,column:20}},loc:{start:{line:14,column:25},end:{line:15,column:5}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:33,column:3}},line:19},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:25},end:{line:45,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:46,column:17},end:{line:46,column:18}},loc:{start:{line:46,column:23},end:{line:63,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:49,column:33},end:{line:49,column:34}},loc:{start:{line:49,column:45},end:{line:58,column:5}},line:49},5:{name:"(anonymous_5)",decl:{start:{line:55,column:21},end:{line:55,column:22}},loc:{start:{line:55,column:33},end:{line:57,column:7}},line:55},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:18},end:{line:86,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:87,column:2},end:{line:87,column:3}},loc:{start:{line:87,column:37},end:{line:98,column:3}},line:87},8:{name:"(anonymous_8)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:32},end:{line:102,column:3}},line:99},9:{name:"(anonymous_9)",decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:46},end:{line:135,column:3}},line:103},10:{name:"getRequiredProps",decl:{start:{line:107,column:13},end:{line:107,column:29}},loc:{start:{line:107,column:37},end:{line:117,column:5}},line:107},11:{name:"withoutLayers",decl:{start:{line:122,column:13},end:{line:122,column:26}},loc:{start:{line:122,column:34},end:{line:128,column:5}},line:122},12:{name:"(anonymous_12)",decl:{start:{line:136,column:2},end:{line:136,column:3}},loc:{start:{line:136,column:32},end:{line:154,column:3}},line:136},13:{name:"(anonymous_13)",decl:{start:{line:145,column:50},end:{line:145,column:51}},loc:{start:{line:145,column:63},end:{line:150,column:9}},line:145},14:{name:"(anonymous_14)",decl:{start:{line:155,column:2},end:{line:155,column:3}},loc:{start:{line:155,column:11},end:{line:265,column:3}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:159,column:26},end:{line:159,column:27}},loc:{start:{line:159,column:38},end:{line:210,column:5}},line:159},16:{name:"(anonymous_16)",decl:{start:{line:166,column:40},end:{line:166,column:41}},loc:{start:{line:166,column:47},end:{line:166,column:52}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:175,column:21},end:{line:175,column:22}},loc:{start:{line:175,column:44},end:{line:209,column:7}},line:175},18:{name:"(anonymous_18)",decl:{start:{line:177,column:50},end:{line:177,column:51}},loc:{start:{line:177,column:61},end:{line:179,column:9}},line:177},19:{name:"(anonymous_19)",decl:{start:{line:268,column:53},end:{line:268,column:54}},loc:{start:{line:268,column:80},end:{line:268,column:117}},line:268},20:{name:"(anonymous_20)",decl:{start:{line:270,column:2},end:{line:270,column:3}},loc:{start:{line:270,column:11},end:{line:281,column:3}},line:270},21:{name:"(anonymous_21)",decl:{start:{line:278,column:27},end:{line:278,column:28}},loc:{start:{line:278,column:33},end:{line:278,column:38}},line:278}},branchMap:{0:{loc:{start:{line:52,column:6},end:{line:54,column:7}},type:"if",locations:[{start:{line:52,column:6},end:{line:54,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},1:{loc:{start:{line:72,column:8},end:{line:72,column:79}},type:"cond-expr",locations:[{start:{line:72,column:41},end:{line:72,column:75}},{start:{line:72,column:78},end:{line:72,column:79}}],line:72},2:{loc:{start:{line:78,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:78,column:6},end:{line:83,column:7}},{start:{line:81,column:13},end:{line:83,column:7}}],line:78},3:{loc:{start:{line:78,column:10},end:{line:78,column:81}},type:"binary-expr",locations:[{start:{line:78,column:10},end:{line:78,column:23}},{start:{line:78,column:27},end:{line:78,column:81}}],line:78},4:{loc:{start:{line:90,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:90,column:4},end:{line:94,column:5}},{start:{line:92,column:11},end:{line:94,column:5}}],line:90},5:{loc:{start:{line:101,column:11},end:{line:101,column:50}},type:"cond-expr",locations:[{start:{line:101,column:34},end:{line:101,column:38}},{start:{line:101,column:41},end:{line:101,column:50}}],line:101},6:{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:104},7:{loc:{start:{line:111,column:6},end:{line:115,column:7}},type:"if",locations:[{start:{line:111,column:6},end:{line:115,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:111},8:{loc:{start:{line:133,column:27},end:{line:133,column:52}},type:"binary-expr",locations:[{start:{line:133,column:27},end:{line:133,column:38}},{start:{line:133,column:42},end:{line:133,column:52}}],line:133},9:{loc:{start:{line:137,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:137,column:4},end:{line:153,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:137},10:{loc:{start:{line:139,column:6},end:{line:152,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:152,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:139},11:{loc:{start:{line:139,column:10},end:{line:139,column:51}},type:"binary-expr",locations:[{start:{line:139,column:10},end:{line:139,column:26}},{start:{line:139,column:30},end:{line:139,column:51}}],line:139},12:{loc:{start:{line:147,column:10},end:{line:149,column:11}},type:"if",locations:[{start:{line:147,column:10},end:{line:149,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:147},13:{loc:{start:{line:147,column:14},end:{line:147,column:68}},type:"binary-expr",locations:[{start:{line:147,column:14},end:{line:147,column:32}},{start:{line:147,column:36},end:{line:147,column:68}}],line:147},14:{loc:{start:{line:161,column:6},end:{line:174,column:7}},type:"if",locations:[{start:{line:161,column:6},end:{line:174,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:161},15:{loc:{start:{line:168,column:22},end:{line:168,column:98}},type:"binary-expr",locations:[{start:{line:168,column:22},end:{line:168,column:57}},{start:{line:168,column:61},end:{line:168,column:98}}],line:168},16:{loc:{start:{line:178,column:17},end:{line:178,column:96}},type:"binary-expr",locations:[{start:{line:178,column:17},end:{line:178,column:29}},{start:{line:178,column:33},end:{line:178,column:62}},{start:{line:178,column:66},end:{line:178,column:96}}],line:178},17:{loc:{start:{line:181,column:8},end:{line:183,column:9}},type:"if",locations:[{start:{line:181,column:8},end:{line:183,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:181},18:{loc:{start:{line:188,column:52},end:{line:188,column:153}},type:"binary-expr",locations:[{start:{line:188,column:52},end:{line:188,column:69}},{start:{line:188,column:73},end:{line:188,column:112}},{start:{line:188,column:116},end:{line:188,column:153}}],line:188},19:{loc:{start:{line:189,column:53},end:{line:189,column:105}},type:"binary-expr",locations:[{start:{line:189,column:53},end:{line:189,column:84}},{start:{line:189,column:88},end:{line:189,column:105}}],line:189},20:{loc:{start:{line:197,column:25},end:{line:197,column:43}},type:"binary-expr",locations:[{start:{line:197,column:25},end:{line:197,column:37}},{start:{line:197,column:41},end:{line:197,column:43}}],line:197},21:{loc:{start:{line:241,column:26},end:{line:241,column:96}},type:"cond-expr",locations:[{start:{line:241,column:69},end:{line:241,column:82}},{start:{line:241,column:85},end:{line:241,column:96}}],line:241}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0,0],17:[0,0],18:[0,0,0],19:[0,0],20:[0,0],21:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerList.tsx"],names:[],mappings:"AAmNoB,cAoEd,YApEc;AAnNpB,OAAO,WAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,YAAY;AAEnB,OAAO,oBAAoB;AAC3B,OAAO,mBAAmB;AAC1B,OAAO,cAAc;AAErB,SAAwB,yBAAwB;AAEhD,OAAO,sBAAsB;AAC7B,SAAS,yBAAyB,mBAAmB;AACrD,SAA0B,uBAAuB;AAuBjD,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,kBAAkB,MAAM,UAAU;AACvC,SAAK,qBAAqB,MAAM,UAAU;AAC1C,SAAK,QAAQ;AAAA,MACX,iBAAiB,CAAC;AAAA,MAClB,sBAAsB;AAAA,MACtB,MAAM;AAAA,QACJ,KAAK,CAAC,iBAAiB;AAAA,MACzB;AAAA,MACA,QAAQ;AAAA,QACN,KAAK;AAAA,MACP;AAAA,IACF;AAAA,EACF;AAAA,EAEA,YAAY,WAAmB;AAC7B,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,QACJ,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG,CAAC,KAAK,MAAM,OAAO,SAAS;AAAA,MAC3C;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,eAAe,MAAM;AACnB,QAAI,MAAM;AAEV,UAAM,YAAqC,CAAC;AAE5C,SAAK,cAAc,EAAE,QAAQ,YAAU;AACrC,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,YAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAG7C,UAAI,OAAO,SAAS,GAAG;AACrB,kBAAU,SAAS,IAAI,KAAK,MAAM;AAAA,MACpC;AAEA,aAAO,QAAQ,CAAC,WAAW;AACzB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,MACjB,sBAAsB,CAAC,KAAK,MAAM;AAAA,IACpC,CAAC;AAAA,EACH;AAAA,EAEA,gBAA0D;AACxD,UAAM,SAAS,CAAC;AAChB,UAAM,eAAe,oBAAI,IAAI;AAE7B,aAAS,IAAI,GAAG,IAAI,KAAK,MAAM,OAAO,QAAQ,KAAK;AACjD,YAAM,YAAY,KAAK,MAAM,OAAO,CAAC;AACrC,YAAM,gBAAgB,KAAK,MAAM,OAAO,IAAE,CAAC;AAC3C,mBAAa;AAAA,QAAI,UAAU;AAAA,QACzB,aAAa,IAAI,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,IAAI,IAAI;AAAA,MACxE;AACA,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,KAAK,eAAe,UAAU,EAAE,IAAI,aAAa,IAAI,UAAU,EAAE,CAAC;AAAA,MACpE;AACA,UAAG,iBAAiB,YAAY,cAAc,EAAE,KAAK,YAAY,MAAM,EAAE,GAAG;AAC1E,cAAM,YAAY,OAAO,OAAO,SAAS,CAAC;AAC1C,kBAAU,KAAK,KAAK;AAAA,MACtB,OAAO;AACL,eAAO,KAAK,CAAC,KAAK,CAAC;AAAA,MACrB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,iBAAiB,aAAqB,KAAa;AACjD,UAAM,YAAY,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAC7C,UAAM,YAAY,EAAE,GAAG,KAAK,MAAM,gBAAgB;AAClD,QAAG,aAAa,KAAK,MAAM,iBAAiB;AAC1C,gBAAU,SAAS,IAAI,CAAC,KAAK,MAAM,gBAAgB,SAAS;AAAA,IAC9D,OAAO;AACL,gBAAU,SAAS,IAAI;AAAA,IACzB;AACA,SAAK,SAAS;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,aAAqB,KAAa;AAC5C,UAAM,YAAY,KAAK,MAAM,gBAAgB,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG,CAAC;AACzE,WAAO,cAAc,SAAY,OAAO;AAAA,EAC1C;AAAA,EAEA,sBAAuB,WAAoC,WAAoC;AAE7F,QAAI,KAAK,UAAU,WAAW;AAC5B,aAAO;AAAA,IACT;AAIA,aAAS,iBAAiB,OAA2B;AACnD,YAAM,MAAiD;AAAA,QACrD,IAAI,MAAM;AAAA,MACZ;AAEA,UAAI,MAAM,QAAQ;AAChB,YAAI,SAAS;AAAA,UACX,YAAY,MAAM,OAAO;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,IACT;AACA,UAAM,cAAc,OAAO;AAAA,MACzB,UAAU,OAAO,IAAI,gBAAgB;AAAA,MACrC,KAAK,MAAM,OAAO,IAAI,gBAAgB;AAAA,IACxC;AAEA,aAAS,cAAc,OAAgC;AACrD,YAAM,MAAM;AAAA,QACV,GAAG;AAAA,MACL;AACA,aAAO,IAAI,QAAQ;AACnB,aAAO;AAAA,IACT;AAIA,UAAM,aAAa,OAAO;AAAA,MACxB,cAAc,KAAK,KAAK;AAAA,MACxB,cAAc,SAAS;AAAA,IACzB;AAEA,UAAM,eAAe,EAAE,eAAe;AACtC,WAAO;AAAA,EACT;AAAA,EAEA,mBAAoB,WAAoC;AACtD,QAAI,UAAU,uBAAuB,KAAK,MAAM,oBAAoB;AAClE,YAAM,mBAAmB,KAAK,gBAAgB;AAC9C,UAAI,oBAAoB,iBAAiB,MAAM;AAC7C,cAAM,SAAS,iBAAiB;AAChC,cAAM,UAAU;AAAA,UACd,MAAM,KAAK,mBAAmB;AAAA,UAC9B,WAAW;AAAA,QACb;AACA,cAAM,WAAW,IAAI,qBAAqB,aAAW;AACnD,mBAAS,UAAU,MAAM;AACzB,cAAI,QAAQ,SAAS,KAAK,QAAQ,CAAC,EAAE,oBAAoB,GAAG;AAC1D,mBAAO,eAAe;AAAA,UACxB;AAAA,QACF,GAAG,OAAO;AAEV,iBAAS,QAAQ,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AAEP,UAAM,YAA2B,CAAC;AAClC,QAAI,MAAM;AACV,UAAM,gBAAgB,KAAK,cAAc;AACzC,kBAAc,QAAQ,YAAU;AAC9B,YAAM,cAAc,YAAY,OAAO,CAAC,EAAE,EAAE;AAC5C,UAAG,OAAO,SAAS,GAAG;AACpB,cAAM,MAAM;AAAA,UAAC;AAAA;AAAA,YACX,eAAa,CAAC,aAAa,GAAG,EAAE,KAAK,GAAG;AAAA,YACxC,iBAAe,OAAO,IAAI,OAAK,EAAE,GAAG,EAAE,KAAK,GAAG;AAAA,YAE9C,OAAO;AAAA,YACP,UAAU,CAAC,KAAK,YAAY,aAAa,GAAG,KAAK,QAAQ,KAAK,MAAM;AAAA,YACpE,gBAAgB,KAAK,iBAAiB,KAAK,MAAM,aAAa,GAAG;AAAA;AAAA,UAH5D,SAAS,WAAW,IAAI,GAAG;AAAA,QAIlC;AACA,kBAAU,KAAK,GAAG;AAAA,MACpB;AAEA,aAAO,QAAQ,CAAC,OAAO,eAAe;AACpC,cAAM,WAAW,wBAAwB,KAAK,MAAM,QAAQ,GAAG;AAE/D,cAAM,aAAa,KAAK,MAAM,OAAO,KAAK,WAAS;AACjD,iBACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS;AAAA,QAE/B,CAAC;AAED,cAAM,kBAAgD,CAAC;AACvD,YAAI,QAAQ,KAAK,MAAM,oBAAoB;AACzC,0BAAgB,MAAM,KAAK;AAAA,QAC7B;AAEA,cAAM,WAAW;AAAA,UAAC;AAAA;AAAA,YAChB,WAAW,WAAW;AAAA,cACpB,sCAAsC,OAAO,SAAS,KAAK,KAAK,YAAY,aAAa,QAAQ,KAAK,QAAQ,KAAK,MAAM;AAAA,cACzH,uCAAuC,cAAc,OAAO,SAAS,KAAK,OAAO,SAAS;AAAA,cAC1F,mCAAmC,CAAC,CAAC;AAAA,YACvC,CAAC;AAAA,YACD,OAAO;AAAA,YAEP,IAAI,MAAM;AAAA,YACV,SAAS,MAAM;AAAA,YACf,YAAY;AAAA,YACZ,WAAW,MAAM;AAAA,YACjB,aAAa,MAAM,UAAU,CAAC,GAAG;AAAA,YACjC,YAAY,QAAQ,KAAK,MAAM;AAAA,YAC/B,eAAe,KAAK,MAAM;AAAA,YAC1B,gBAAgB,KAAK,MAAM,gBAAgB,KAAK,IAAI;AAAA,YACpD,aAAa,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,YAC7C,yBAAyB,KAAK,MAAM,wBAAwB,KAAK,IAAI;AAAA,YACpE,GAAG;AAAA;AAAA,UAXC,MAAM;AAAA,QAYb;AACA,kBAAU,KAAK,QAAQ;AACvB,eAAO;AAAA,MACT,CAAC;AAAA,IACH,CAAC;AAED,UAAM,IAAI,KAAK,MAAM;AAErB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,MAAK;AAAA,QACL,cAAY,EAAE,aAAa;AAAA,QAC3B,KAAK,KAAK;AAAA,QAEV;AAAA;AAAA,YAAC;AAAA;AAAA,cAEC,QAAQ,KAAK,MAAM;AAAA,cACnB,SAAS,KAAK,MAAM;AAAA,cACpB,QAAQ,KAAK,MAAM,OAAO;AAAA,cAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,cAC/C,gBAAgB,KAAK,MAAM;AAAA;AAAA,YALtB,KAAK,MAAM,KAAK;AAAA,UAMvB;AAAA,UACA,qBAAC,YAAO,WAAU,8BAChB;AAAA,gCAAC,UAAK,WAAU,oCAAoC,YAAE,QAAQ,GAAE;AAAA,YAChE,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,IAAG;AAAA,gBACH,eAAY;AAAA,gBACZ,SAAS,KAAK;AAAA,gBACd,WAAU;AAAA,gBACT,eAAK,MAAM,yBAAyB,OACnC,EAAE,UAAU,IAEZ,EAAE,QAAQ;AAAA;AAAA,YAEd,GACF,GACF;AAAA,YACA,oBAAC,SAAI,WAAU,6BACb,8BAAC,SAAI,WAAU,wBACb;AAAA,cAAC;AAAA;AAAA,gBACC,SAAS,KAAK,YAAY,KAAK,MAAM,KAAK;AAAA,gBAC1C,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACT,YAAE,WAAW;AAAA;AAAA,YAChB,GACF,GACF;AAAA,aACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,MAAK;AAAA,cACL,cAAY,EAAE,aAAa;AAAA,cAE3B,8BAAC,QAAG,WAAU,iCACX,qBACH;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,MAAM,6BAA6B,kBAAkB,CAAC,UAAmC,oBAAC,sBAAoB,GAAG,OAAO,CAAE;AAM1H,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT,aAAY;AAAA,QACZ,WAAW,KAAK,MAAM,YAAY,KAAK,IAAI;AAAA,QAC3C,eAAe;AAAA,QACf,mBAAmB,MAAM;AAAA;AAAA,IAC3B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fce844afd94013ad4b9b4e84bd148b8b849d3079"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return vn=function(){return l},l}vn();class Cz extends sr.Component{constructor(t){vn().f[1]++,vn().s[1]++;super(t);Pn(this,"selectedItemRef");Pn(this,"scrollContainerRef");Pn(this,"toggleLayers",(vn().s[6]++,()=>{vn().f[3]++;let t=(vn().s[7]++,0);const r=(vn().s[8]++,{});vn().s[9]++,this.groupedLayers().forEach(i=>{vn().f[4]++;const s=(vn().s[10]++,ey(i[0].id)),l=(vn().s[11]++,[s,t].join("-"));vn().s[12]++,i.length>1?(vn().b[0][0]++,vn().s[13]++,r[l]=this.state.areAllGroupsExpanded):vn().b[0][1]++,vn().s[14]++,i.forEach(o=>{vn().f[5]++,vn().s[15]++,t+=1})}),vn().s[16]++,this.setState({collapsedGroups:r,areAllGroupsExpanded:!this.state.areAllGroupsExpanded})}));vn().s[2]++,this.selectedItemRef=sr.createRef(),vn().s[3]++,this.scrollContainerRef=sr.createRef(),vn().s[4]++,this.state={collapsedGroups:{},areAllGroupsExpanded:!1,keys:{add:+Sy()},isOpen:{add:!1}}}toggleModal(t){vn().f[2]++,vn().s[5]++,this.setState({keys:{...this.state.keys,[t]:+Sy()},isOpen:{...this.state.isOpen,[t]:!this.state.isOpen[t]}})}groupedLayers(){vn().f[6]++;const t=(vn().s[17]++,[]),r=(vn().s[18]++,new Map);vn().s[19]++;for(let i=(vn().s[20]++,0);i<this.props.layers.length;i++){const s=(vn().s[21]++,this.props.layers[i]),l=(vn().s[22]++,this.props.layers[i-1]);vn().s[23]++,r.set(s.id,r.has(s.id)?(vn().b[1][0]++,r.get(s.id)+1):(vn().b[1][1]++,0));const o=(vn().s[24]++,{...s,key:`layers-list-${s.id}-${r.get(s.id)}`});if(vn().s[25]++,vn().b[3][0]++,l&&(vn().b[3][1]++,ey(l.id)==ey(o.id))){vn().b[2][0]++;const p=(vn().s[26]++,t[t.length-1]);vn().s[27]++,p.push(o)}else vn().b[2][1]++,vn().s[28]++,t.push([o])}return vn().s[29]++,t}toggleLayerGroup(t,r){vn().f[7]++;const i=(vn().s[30]++,[t,r].join("-")),s=(vn().s[31]++,{...this.state.collapsedGroups});vn().s[32]++,i in this.state.collapsedGroups?(vn().b[4][0]++,vn().s[33]++,s[i]=!this.state.collapsedGroups[i]):(vn().b[4][1]++,vn().s[34]++,s[i]=!1),vn().s[35]++,this.setState({collapsedGroups:s})}isCollapsed(t,r){vn().f[8]++;const i=(vn().s[36]++,this.state.collapsedGroups[[t,r].join("-")]);return vn().s[37]++,i===void 0?(vn().b[5][0]++,!0):(vn().b[5][1]++,i)}shouldComponentUpdate(t,r){if(vn().f[9]++,vn().s[38]++,this.state!==r)return vn().b[6][0]++,vn().s[39]++,!0;vn().b[6][1]++;function i(v){vn().f[10]++;const x=(vn().s[40]++,{id:v.id});return vn().s[41]++,v.layout?(vn().b[7][0]++,vn().s[42]++,x.layout={visibility:v.layout.visibility}):vn().b[7][1]++,vn().s[43]++,x}const s=(vn().s[44]++,kE.isEqual(t.layers.map(i),this.props.layers.map(i)));function l(v){vn().f[11]++;const x=(vn().s[45]++,{...v});return vn().s[46]++,delete x.layers,vn().s[47]++,x}const o=(vn().s[48]++,kE.isEqual(l(this.props),l(t))),p=(vn().s[49]++,vn().b[8][0]++,!(s&&(vn().b[8][1]++,o)));return vn().s[50]++,p}componentDidUpdate(t){if(vn().f[12]++,vn().s[51]++,t.selectedLayerIndex!==this.props.selectedLayerIndex){vn().b[9][0]++;const r=(vn().s[52]++,this.selectedItemRef.current);if(vn().s[53]++,vn().b[11][0]++,r&&(vn().b[11][1]++,r.node)){vn().b[10][0]++;const i=(vn().s[54]++,r.node),s=(vn().s[55]++,{root:this.scrollContainerRef.current,threshold:1}),l=(vn().s[56]++,new IntersectionObserver(o=>{vn().f[13]++,vn().s[57]++,l.unobserve(i),vn().s[58]++,vn().b[13][0]++,o.length>0&&(vn().b[13][1]++,o[0].intersectionRatio<1)?(vn().b[12][0]++,vn().s[59]++,i.scrollIntoView()):vn().b[12][1]++},s));vn().s[60]++,l.observe(i)}else vn().b[10][1]++}else vn().b[9][1]++}render(){vn().f[14]++;const t=(vn().s[61]++,[]);let r=(vn().s[62]++,0);const i=(vn().s[63]++,this.groupedLayers());vn().s[64]++,i.forEach(l=>{vn().f[15]++;const o=(vn().s[65]++,ey(l[0].id));if(vn().s[66]++,l.length>1){vn().b[14][0]++;const p=(vn().s[67]++,le.jsx(ane,{"data-wd-key":[o,r].join("-"),"aria-controls":l.map(v=>(vn().f[16]++,vn().s[68]++,v.key)).join(" "),title:o,isActive:(vn().b[15][0]++,!this.isCollapsed(o,r)||(vn().b[15][1]++,r===this.props.selectedLayerIndex)),onActiveToggle:this.toggleLayerGroup.bind(this,o,r)},`group-${o}-${r}`));vn().s[69]++,t.push(p)}else vn().b[14][1]++;vn().s[70]++,l.forEach((p,v)=>{var U;vn().f[17]++;const x=(vn().s[71]++,gie(this.props.layers,r)),B=(vn().s[72]++,this.props.errors.find(j=>(vn().f[18]++,vn().s[73]++,vn().b[16][0]++,j.parsed&&(vn().b[16][1]++,j.parsed.type==="layer")&&(vn().b[16][2]++,j.parsed.data.index==r)))),T=(vn().s[74]++,{});vn().s[75]++,r===this.props.selectedLayerIndex?(vn().b[17][0]++,vn().s[76]++,T.ref=this.selectedItemRef):vn().b[17][1]++;const P=(vn().s[77]++,le.jsx(zne,{className:em({"maputnik-layer-list-item-collapsed":(vn().b[18][0]++,l.length>1&&(vn().b[18][1]++,this.isCollapsed(o,x))&&(vn().b[18][2]++,r!==this.props.selectedLayerIndex)),"maputnik-layer-list-item-group-last":(vn().b[19][0]++,v==l.length-1&&(vn().b[19][1]++,l.length>1)),"maputnik-layer-list-item--error":!!B}),index:r,id:p.key,layerId:p.id,layerIndex:r,layerType:p.type,visibility:(vn().b[20][0]++,p.layout||(vn().b[20][1]++,{})).visibility,isSelected:r===this.props.selectedLayerIndex,onLayerSelect:this.props.onLayerSelect,onLayerDestroy:(U=this.props.onLayerDestroy)==null?void 0:U.bind(this),onLayerCopy:this.props.onLayerCopy.bind(this),onLayerVisibilityToggle:this.props.onLayerVisibilityToggle.bind(this),...T},p.key));vn().s[78]++,t.push(P),vn().s[79]++,r+=1})});const s=(vn().s[80]++,this.props.t);return vn().s[81]++,le.jsxs("section",{className:"maputnik-layer-list",role:"complementary","aria-label":s("Layers list"),ref:this.scrollContainerRef,children:[le.jsx(fie,{layers:this.props.layers,sources:this.props.sources,isOpen:this.state.isOpen.add,onOpenToggle:this.toggleModal.bind(this,"add"),onLayersChange:this.props.onLayersChange},this.state.keys.add),le.jsxs("header",{className:"maputnik-layer-list-header",children:[le.jsx("span",{className:"maputnik-layer-list-header-title",children:s("Layers")}),le.jsx("span",{className:"maputnik-space"}),le.jsx("div",{className:"maputnik-default-property",children:le.jsx("div",{className:"maputnik-multibutton",children:le.jsx("button",{id:"skip-target-layer-list","data-wd-key":"skip-target-layer-list",onClick:this.toggleLayers,className:"maputnik-button",children:this.state.areAllGroupsExpanded===!0?(vn().b[21][0]++,s("Collapse")):(vn().b[21][1]++,s("Expand"))})})}),le.jsx("div",{className:"maputnik-default-property",children:le.jsx("div",{className:"maputnik-multibutton",children:le.jsx("button",{onClick:this.toggleModal.bind(this,"add"),"data-wd-key":"layer-list:add-layer",className:"maputnik-button maputnik-button-selected",children:s("Add Layer")})})})]}),le.jsx("div",{role:"navigation","aria-label":s("Layers list"),children:le.jsx("ul",{className:"maputnik-layer-list-container",children:t})})]})}}Pn(Cz,"defaultProps",(vn().s[0]++,{onLayerSelect:()=>{vn().f[0]++}}));const yie=(vn().s[82]++,Ws()(Cz)),vie=(vn().s[83]++,Dne(n=>(vn().f[19]++,vn().s[84]++,le.jsx(yie,{...n}))));class Cie extends sr.Component{render(){return vn().f[20]++,vn().s[85]++,le.jsx(vie,{...this.props,helperClass:"sortableHelper",onSortEnd:this.props.onMoveLayer.bind(this),useDragHandle:!0,shouldCancelStart:()=>(vn().f[21]++,vn().s[86]++,!1)})}}var Z4,k9;function _z(){if(k9)return Z4;k9=1;var n={},e="a menu outside a mounted Wrapper with an id, or a menu that does not exist";function t(l,o){n[l]=o}function r(l){delete n[l]}function i(l,o){var p=n[l];if(!p)throw new Error("Cannot open "+e);p.openMenu(o)}function s(l,o){var p=n[l];if(!p)throw new Error("Cannot close "+e);p.closeMenu(o)}return Z4={registerManager:t,unregisterManager:r,openMenu:i,closeMenu:s},Z4}var X4,T9;function _ie(){if(T9)return X4;T9=1;function n(i){i=i||{};var s=i.keybindings||{};this._settings={keybindings:{next:s.next||{keyCode:40},prev:s.prev||{keyCode:38},first:s.first,last:s.last},wrap:i.wrap,stringSearch:i.stringSearch,stringSearchDelay:800},this._keybindingsLookup=[];var l,o;for(l in this._settings.keybindings)o=this._settings.keybindings[l],o&&[].concat(o).forEach((function(p){p.metaKey=p.metaKey||!1,p.ctrlKey=p.ctrlKey||!1,p.altKey=p.altKey||!1,p.shiftKey=p.shiftKey||!1,this._keybindingsLookup.push({action:l,eventMatcher:p})}).bind(this));this._searchString="",this._members=[],i.members&&this.setMembers(i.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(i){var s=this._getActiveElementIndex();if(s!==-1){var l=!1;this._keybindingsLookup.forEach((function(o){if(e(o.eventMatcher,i))switch(l=!0,i.preventDefault(),o.action){case"next":this.moveFocusForward();break;case"prev":this.moveFocusBack();break;case"first":this.moveFocusToFirst();break;case"last":this.moveFocusToLast();break;default:return}}).bind(this)),l||this._handleUnboundKey(i)}},n.prototype.moveFocusForward=function(){var i=this._getActiveElementIndex(),s;return i<this._members.length-1?s=i+1:this._settings.wrap?s=0:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusBack=function(){var i=this._getActiveElementIndex(),s;return i>0?s=i-1:this._settings.wrap?s=this._members.length-1:s=i,this.focusNodeAtIndex(s),s},n.prototype.moveFocusToFirst=function(){this.focusNodeAtIndex(0)},n.prototype.moveFocusToLast=function(){this.focusNodeAtIndex(this._members.length-1)},n.prototype._handleUnboundKey=function(i){if(this._settings.stringSearch){if(this._searchString!==""&&(i.key===" "||i.keyCode===32))return i.preventDefault(),-1;if(!t(i.keyCode)||i.ctrlKey||i.metaKey||i.altKey)return-1;i.preventDefault(),this._addToSearchString(String.fromCharCode(i.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(i){this._searchString+=i.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var i=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){i._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(i){for(var s,l=0,o=this._members.length;l<o;l++)if(s=this._members[l],!!s.text&&s.text.indexOf(i)===0)return r(s.node)},n.prototype._findIndexOfNode=function(i){for(var s=0,l=this._members.length;s<l;s++)if(this._members[s].node===i)return s;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(i){var s=this._members[i];return s&&r(s.node),this},n.prototype.addMember=function(i,s){var l=i.node||i,o=i.text||l.getAttribute("data-focus-group-text")||l.textContent||"";this._checkNode(l);var p=o.replace(/[\W_]/g,"").toLowerCase(),v={node:l,text:p};return s!=null?this._members.splice(s,0,v):this._members.push(v),this},n.prototype.removeMember=function(i){var s=typeof i=="number"?i:this._findIndexOfNode(i);if(s!==-1)return this._members.splice(s,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(i){this.clearMembers();for(var s=0,l=i.length;s<l;s++)this.addMember(i[s]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(i){if(!i.nodeType||i.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return i};function e(i,s){for(var l in i)if(s[l]!==void 0&&i[l]!==s[l])return!1;return!0}function t(i){return i>=65&&i<=90}function r(i){!i||!i.focus||(i.focus(),i.tagName.toLowerCase()==="input"&&i.select())}return X4=function(s){return new n(s)},X4}var J4,P9;function bie(){if(P9)return J4;P9=1;var n=_ie(),e=_z(),t={wrap:!0,stringSearch:!0},r={init:function(p){this.updateOptions(p),this.handleBlur=i.bind(this),this.handleSelection=s.bind(this),this.handleMenuKey=l.bind(this),this.focusGroup=n(t),this.button=null,this.menu=null,this.isOpen=!1},updateOptions:function(p){var v=this.options;this.options=p||this.options||{},typeof this.options.closeOnSelection>"u"&&(this.options.closeOnSelection=!0),typeof this.options.closeOnBlur>"u"&&(this.options.closeOnBlur=!0),this.options.id&&e.registerManager(this.options.id,this),v&&v.id&&v.id!==this.options.id&&e.unregisterManager(this.options.id,this)},focusItem:function(p){this.focusGroup.focusNodeAtIndex(p)},addItem:function(p){this.focusGroup.addMember(p)},clearItems:function(){this.focusGroup.clearMembers()},handleButtonNonArrowKey:function(p){this.focusGroup._handleUnboundKey(p)},destroy:function(){this.button=null,this.menu=null,this.focusGroup.deactivate(),clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},update:function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen}),this.options.onMenuToggle&&this.options.onMenuToggle({isOpen:this.isOpen})},openMenu:function(p){if(!this.isOpen&&(p=p||{},p.focusMenu===void 0&&(p.focusMenu=!0),this.isOpen=!0,this.update(),this.focusGroup.activate(),p.focusMenu)){var v=this;this.moveFocusTimer=setTimeout(function(){v.focusItem(0)},0)}},closeMenu:function(p){this.isOpen&&(p=p||{},this.isOpen=!1,this.update(),p.focusButton&&this.button.ref.current.focus())},toggleMenu:function(p,v){p=p||{},v=v||{},this.isOpen?this.closeMenu(p):this.openMenu(v)}};function i(){var o=this;o.blurTimer=setTimeout(function(){if(o.button){var p=o.button.ref.current;if(p){var v=p.ownerDocument.activeElement;if(!(p&&v===p)){var x=o.menu.ref.current;if(x===v){o.focusItem(0);return}x&&x.contains(v)||o.isOpen&&o.closeMenu({focusButton:!1})}}}},0)}function s(o,p){this.options.closeOnSelection&&this.closeMenu({focusButton:!0}),this.options.onSelection&&this.options.onSelection(o,p)}function l(o){if(this.isOpen)switch(o.key){case"Escape":o.preventDefault(),this.closeMenu({focusButton:!0});break;case"Home":o.preventDefault(),this.focusGroup.moveFocusToFirst();break;case"End":o.preventDefault(),this.focusGroup.moveFocusToLast();break}}return J4=function(o){var p=Object.create(r);return p.init(o),p},J4}var e5,K9;function Kx(){if(K9)return e5;K9=1;var n=Na(),e=n.createContext();return e5=e,e5}var t5,R9;function Rx(){if(R9)return t5;R9=1;var n=yp();return t5={refType:n.oneOfType([n.func,n.shape({current:n.elementType})])},t5}var n5,D9;function Dx(){return D9||(D9=1,n5=function(n,e,t){t=t||{};for(var r in e)e.hasOwnProperty(r)&&(t[r]||(n[r]=e[r]))}),n5}var r5,F9;function xie(){if(F9)return r5;F9=1;function n(P,U){if(!(P instanceof U))throw new TypeError("Cannot call a class as a function")}function e(P,U){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:P}function t(P,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);P.prototype=Object.create(U&&U.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(P,U):P.__proto__=U)}var r=Na(),i=yp(),s=bie(),l=Kx(),o=Rx(),p=o.refType,v=Dx(),x={children:i.node.isRequired,forwardedRef:p,onMenuToggle:i.func,onSelection:i.func,closeOnSelection:i.bool,closeOnBlur:i.bool,tag:i.string},B=function(U){return{onMenuToggle:U.onMenuToggle,onSelection:U.onSelection,closeOnSelection:U.closeOnSelection,closeOnBlur:U.closeOnBlur,id:U.id}},T=function(P){t(U,P);function U(j){n(this,U);var N=e(this,P.call(this,j));return N.manager=s(B(j)),N}return U.prototype.componentDidUpdate=function(){this.manager.updateOptions(B(this.props))},U.prototype.render=function(){var N={};return v(N,this.props,x),r.createElement(l.Provider,{value:this.manager},r.createElement(this.props.tag,N,this.props.children))},U}(r.Component);return T.propTypes=x,T.defaultProps={tag:"div"},r5=r.forwardRef(function(P,U){var j={forwardedRef:U};return v(j,P,{children:x.children,forwardedRef:x.forwardedRef}),v(j,{forwardedRef:U}),r.createElement(T,j,P.children)}),r5}var i5,L9;function Mie(){if(L9)return i5;L9=1;function n(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function e(T,P){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:T}function t(T,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);T.prototype=Object.create(P&&P.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(T,P):T.__proto__=P)}var r=Na(),i=yp(),s=Kx(),l=Rx(),o=l.refType,p=Dx(),v={ambManager:i.object.isRequired,children:i.node.isRequired,disabled:i.bool,forwardedRef:o,tag:i.string},x=function(){return["button","fieldset","input","optgroup","option","select","textarea"]},B=function(T){t(P,T);function P(){var U,j,N;n(this,P);for(var q=arguments.length,H=Array(q),oe=0;oe<q;oe++)H[oe]=arguments[oe];return N=(U=(j=e(this,T.call.apply(T,[this].concat(H))),j),j.ref=r.createRef(),j.handleKeyDown=function(te){if(!j.props.disabled){var V=j.props.ambManager;switch(te.key){case"ArrowDown":te.preventDefault(),V.isOpen?V.focusItem(0):V.openMenu();break;case"Enter":case" ":te.preventDefault(),V.toggleMenu();break;case"Escape":V.handleMenuKey(te);break;default:V.handleButtonNonArrowKey(te)}}},j.handleClick=function(){j.props.disabled||j.props.ambManager.toggleMenu({},{focusMenu:!1})},j.setRef=function(te){j.ref.current=te,typeof j.props.forwardedRef=="function"?j.props.forwardedRef(te):j.props.forwardedRef&&(j.props.forwardedRef.current=te)},U),e(j,N)}return P.prototype.componentDidMount=function(){this.props.ambManager.button=this},P.prototype.componentWillUnmount=function(){this.props.ambManager.destroy()},P.prototype.render=function(){var j=this.props,N=this.props.ambManager,q={role:"button",tabIndex:j.disabled?"":"0","aria-haspopup":!0,"aria-expanded":N.isOpen,"aria-disabled":j.disabled,onKeyDown:this.handleKeyDown,onClick:this.handleClick},H={};return p(H,v),x().indexOf(j.tag)>=0&&delete H.disabled,N.options.closeOnBlur&&(q.onBlur=N.handleBlur),p(q,j,H),p(q,{ref:this.setRef}),r.createElement(j.tag,q,j.children)},P}(r.Component);return B.propTypes=v,B.defaultProps={tag:"span"},i5=r.forwardRef(function(T,P){return r.createElement(s.Consumer,null,function(U){var j={ambManager:U,forwardedRef:P};return p(j,T,{ambManager:v.ambManager,children:v.children,forwardedRef:v.forwardedRef}),r.createElement(B,j,T.children)})}),i5}var o5,U9;function wie(){return U9||(U9=1,o5=function(e,t,r){var i=0,s=0,l=!1,o=!1,p=!1;e.addEventListener("click",v,r),e.addEventListener("touchstart",x,r);function v(N){p||t(N)}function x(N){p=!0,!l&&(l=!0,e.addEventListener("touchmove",B,r),e.addEventListener("touchend",T,r),e.addEventListener("touchcancel",P,r),o=!1,i=N.touches[0].clientX,s=N.touches[0].clientY)}function B(N){o||Math.abs(N.touches[0].clientX-i)<=10&&Math.abs(N.touches[0].clientY-s)<=10||(o=!0)}function T(N){l=!1,U(),o||t(N)}function P(){l=!1,o=!1,i=0,s=0}function U(){e.removeEventListener("touchmove",B,r),e.removeEventListener("touchend",T,r),e.removeEventListener("touchcancel",P,r)}function j(){e.removeEventListener("click",v,r),e.removeEventListener("touchstart",x,r),U()}return{remove:j}}),o5}var s5,z9;function Sie(){if(z9)return s5;z9=1;function n(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function e(T,P){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:T}function t(T,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);T.prototype=Object.create(P&&P.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(T,P):T.__proto__=P)}var r=Na(),i=yp(),s=wie(),l=Kx(),o=Rx(),p=o.refType,v=Dx(),x={ambManager:i.object.isRequired,children:i.oneOfType([i.func,i.node]).isRequired,forwardedRef:p,tag:i.string},B=function(T){t(P,T);function P(){var U,j,N;n(this,P);for(var q=arguments.length,H=Array(q),oe=0;oe<q;oe++)H[oe]=arguments[oe];return N=(U=(j=e(this,T.call.apply(T,[this].concat(H))),j),j.ref=r.createRef(),j.addTapListener=function(){var te=j.ref.current;if(te){var V=te.ownerDocument;V&&(j.tapListener=s(V.documentElement,j.handleTap))}},j.handleTap=function(te){j.ref.current.contains(te.target)||j.props.ambManager.button.ref.current.contains(te.target)||j.props.ambManager.closeMenu()},j.setRef=function(te){j.ref.current=te,typeof j.props.forwardedRef=="function"?j.props.forwardedRef(te):j.props.forwardedRef&&(j.props.forwardedRef.current=te)},U),e(j,N)}return P.prototype.componentDidMount=function(){this.props.ambManager.menu=this},P.prototype.componentDidUpdate=function(){var j=this.props.ambManager;j.options.closeOnBlur&&(j.isOpen&&!this.tapListener?this.addTapListener():!j.isOpen&&this.tapListener&&(this.tapListener.remove(),delete this.tapListener),j.isOpen||j.clearItems())},P.prototype.componentWillUnmount=function(){this.tapListener&&this.tapListener.remove(),this.props.ambManager.destroy()},P.prototype.render=function(){var j=this.props,N=this.props.ambManager,q=function(){return typeof j.children=="function"?j.children({isOpen:N.isOpen}):N.isOpen?j.children:!1}();if(!q)return!1;var H={onKeyDown:N.handleMenuKey,role:"menu",tabIndex:-1};return N.options.closeOnBlur&&(H.onBlur=N.handleBlur),v(H,j,x),v(H,{ref:this.setRef}),r.createElement(j.tag,H,q)},P}(r.Component);return B.propTypes=x,B.defaultProps={tag:"div"},s5=r.forwardRef(function(T,P){return r.createElement(l.Consumer,null,function(U){var j={ambManager:U,forwardedRef:P};return v(j,T,{ambManager:x.ambManager,children:x.children,forwardedRef:x.forwardedRef}),r.createElement(B,j,T.children)})}),s5}var a5,j9;function Eie(){if(j9)return a5;j9=1;function n(B,T){if(!(B instanceof T))throw new TypeError("Cannot call a class as a function")}function e(B,T){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:B}function t(B,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);B.prototype=Object.create(T&&T.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(B,T):B.__proto__=T)}var r=Na(),i=yp(),s=Kx(),l=Rx(),o=l.refType,p=Dx(),v={ambManager:i.object.isRequired,children:i.node.isRequired,forwardedRef:o,tag:i.string,text:i.string,value:i.any},x=function(B){t(T,B);function T(){var P,U,j;n(this,T);for(var N=arguments.length,q=Array(N),H=0;H<N;H++)q[H]=arguments[H];return j=(P=(U=e(this,B.call.apply(B,[this].concat(q))),U),U.ref=r.createRef(),U.handleKeyDown=function(oe){oe.key!=="Enter"&&oe.key!==" "||U.props.tag==="a"&&U.props.href||(oe.preventDefault(),U.selectItem(oe))},U.selectItem=function(oe){var te=typeof U.props.value<"u"?U.props.value:U.props.children;U.props.ambManager.handleSelection(te,oe)},U.setRef=function(oe){U.ref.current=oe,typeof U.props.forwardedRef=="function"?U.props.forwardedRef(oe):U.props.forwardedRef&&(U.props.forwardedRef.current=oe)},P),e(U,j)}return T.prototype.componentDidMount=function(){this.props.ambManager.addItem({node:this.ref.current,text:this.props.text})},T.prototype.render=function(){var U={onClick:this.selectItem,onKeyDown:this.handleKeyDown,role:"menuitem",tabIndex:"-1",ref:this.setRef};return p(U,this.props,v),r.createElement(this.props.tag,U,this.props.children)},T}(r.Component);return x.propTypes=v,x.defaultProps={tag:"div"},a5=r.forwardRef(function(B,T){return r.createElement(s.Consumer,null,function(P){var U={ambManager:P,forwardedRef:T};return p(U,B,{ambManager:v.ambManager,children:v.children,forwardedRef:v.forwardedRef}),r.createElement(x,U,B.children)})}),a5}var l5,N9;function Bie(){if(N9)return l5;N9=1;var n=_z();return l5={Wrapper:xie(),Button:Mie(),Menu:Sie(),MenuItem:Eie(),openMenu:n.openMenu,closeMenu:n.closeMenu},l5}var Ab=Bie();function W9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function K6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?W9(Object(t),!0).forEach(function(r){Ll(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):W9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Fx(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function G9(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Lx(n,e,t){return e&&G9(n.prototype,e),t&&G9(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ll(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tm(){return tm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tm.apply(this,arguments)}function MO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&R6(n,e)}function E2(n){return E2=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},E2(n)}function R6(n,e){return R6=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},R6(n,e)}function Oie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Iie(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Ux(n,e){if(n==null)return{};var t=Iie(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function lp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function kie(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lp(n)}function wO(n){var e=Oie();return function(){var r=E2(n),i;if(e){var s=E2(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return kie(this,i)}}function Tie(n,e){return Rie(n)||Fie(n,e)||bz(n,e)||Uie()}function Pie(n){return Kie(n)||Die(n)||bz(n)||Lie()}function Kie(n){if(Array.isArray(n))return D6(n)}function Rie(n){if(Array.isArray(n))return n}function Die(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Fie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,l,o;try{for(t=t.call(n);!(i=(l=t.next()).done)&&(r.push(l.value),!(e&&r.length===e));i=!0);}catch(p){s=!0,o=p}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return r}}function bz(n,e){if(n){if(typeof n=="string")return D6(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D6(n,e)}}function D6(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Lie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var zie=Lx(function n(e){var t=this,r=e.expanded,i=r===void 0?[]:r,s=e.allowMultipleExpanded,l=s===void 0?!1:s,o=e.allowZeroExpanded,p=o===void 0?!1:o;Fx(this,n),Ll(this,"expanded",void 0),Ll(this,"allowMultipleExpanded",void 0),Ll(this,"allowZeroExpanded",void 0),Ll(this,"toggleExpanded",function(v){if(t.isItemDisabled(v))return t;var x=t.isItemExpanded(v);return x?t.augment({expanded:t.expanded.filter(function(B){return B!==v})}):t.augment({expanded:t.allowMultipleExpanded?[].concat(Pie(t.expanded),[v]):[v]})}),Ll(this,"isItemDisabled",function(v){var x=t.isItemExpanded(v),B=t.expanded.length===1;return!!(x&&!t.allowZeroExpanded&&B)}),Ll(this,"isItemExpanded",function(v){return t.expanded.indexOf(v)!==-1}),Ll(this,"getPanelAttributes",function(v,x){var B=x??t.isItemExpanded(v);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!B:void 0,"aria-labelledby":t.getButtonId(v),id:t.getPanelId(v),hidden:B?void 0:!0}}),Ll(this,"getHeadingAttributes",function(){return{role:"heading"}}),Ll(this,"getButtonAttributes",function(v,x){var B=x??t.isItemExpanded(v),T=t.isItemDisabled(v);return{id:t.getButtonId(v),"aria-disabled":T,"aria-expanded":B,"aria-controls":t.getPanelId(v),role:"button",tabIndex:0}}),Ll(this,"getPanelId",function(v){return"accordion__panel-".concat(v)}),Ll(this,"getButtonId",function(v){return"accordion__heading-".concat(v)}),Ll(this,"augment",function(v){return new n(K6({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},v))}),this.expanded=i,this.allowMultipleExpanded=l,this.allowZeroExpanded=p}),xz=Ai.createContext(null),Mz=function(n){MO(t,n);var e=wO(t);function t(){var r;Fx(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Ll(lp(r),"state",new zie({expanded:r.props.preExpanded,allowMultipleExpanded:r.props.allowMultipleExpanded,allowZeroExpanded:r.props.allowZeroExpanded})),Ll(lp(r),"toggleExpanded",function(o){r.setState(function(p){return p.toggleExpanded(o)},function(){r.props.onChange&&r.props.onChange(r.state.expanded)})}),Ll(lp(r),"isItemDisabled",function(o){return r.state.isItemDisabled(o)}),Ll(lp(r),"isItemExpanded",function(o){return r.state.isItemExpanded(o)}),Ll(lp(r),"getPanelAttributes",function(o,p){return r.state.getPanelAttributes(o,p)}),Ll(lp(r),"getHeadingAttributes",function(){return r.state.getHeadingAttributes()}),Ll(lp(r),"getButtonAttributes",function(o,p){return r.state.getButtonAttributes(o,p)}),r}return Lx(t,[{key:"render",value:function(){var i=this.state,s=i.allowZeroExpanded,l=i.allowMultipleExpanded;return Ai.createElement(xz.Provider,{value:{allowMultipleExpanded:l,allowZeroExpanded:s,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]),t}(Ai.PureComponent);Ll(Mz,"defaultProps",{allowMultipleExpanded:!1,allowZeroExpanded:!1});var wz=function(n){MO(t,n);var e=wO(t);function t(){var r;Fx(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Ll(lp(r),"renderChildren",function(o){return o?r.props.children(o):null}),r}return Lx(t,[{key:"render",value:function(){return Ai.createElement(xz.Consumer,null,this.renderChildren)}}]),t}(Ai.PureComponent),jie=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"],Nie=function(e){var t=e.className,r=t===void 0?"accordion":t,i=e.allowMultipleExpanded,s=e.allowZeroExpanded,l=e.onChange,o=e.preExpanded,p=Ux(e,jie);return Ai.createElement(Mz,{preExpanded:o,allowMultipleExpanded:i,allowZeroExpanded:s,onChange:l},Ai.createElement("div",tm({"data-accordion-component":"Accordion",className:r},p)))},F6;(function(n){n.Accordion="Accordion",n.AccordionItem="AccordionItem",n.AccordionItemButton="AccordionItemButton",n.AccordionItemHeading="AccordionItemHeading",n.AccordionItemPanel="AccordionItemPanel"})(F6||(F6={}));var Sz=F6,u5=0;function Wie(){var n=u5;return u5=u5+1,"raa-".concat(n)}var Gie=Ai.useId||Wie,Qie=/[\u0009\u000a\u000c\u000d\u0020]/g;function IC(n){return n===""||Qie.test(n)?(console.error('uuid must be a valid HTML5 id but was given "'.concat(n,'", ASCII whitespaces are forbidden')),!1):!0}var Ez=Ai.createContext(null),Yie=function(e){var t=e.children,r=e.uuid,i=e.accordionContext,s=e.dangerouslySetExpanded,l=function(){i.toggleExpanded(r)},o=function(v){var x=s??v.isItemExpanded(r),B=v.isItemDisabled(r),T=v.getPanelAttributes(r,s),P=v.getHeadingAttributes(r),U=v.getButtonAttributes(r,s);return Ai.createElement(Ez.Provider,{value:{uuid:r,expanded:x,disabled:B,toggleExpanded:l,panelAttributes:T,headingAttributes:P,buttonAttributes:U}},t)};return Ai.createElement(wz,null,o)},qie=function(e){return Ai.createElement(wz,null,function(t){return Ai.createElement(Yie,tm({},e,{accordionContext:t}))})},zx=function(e){var t=e.children,r=function(s){return s?t(s):null};return Ai.createElement(Ez.Consumer,null,r)},Vie=["uuid","dangerouslySetExpanded","className","activeClassName"],Bz=function(e){var t=e.uuid,r=e.dangerouslySetExpanded,i=e.className,s=i===void 0?"accordion__item":i,l=e.activeClassName,o=Ux(e,Vie),p=Ai.useState(Gie()),v=Tie(p,1),x=v[0],B=t??x,T=function(U){var j=U.expanded,N=j&&l?l:s;return Ai.createElement("div",tm({"data-accordion-component":"AccordionItem",className:N},o))};return IC(B.toString()),o.id&&IC(o.id),Ai.createElement(qie,{uuid:B,dangerouslySetExpanded:r},Ai.createElement(zx,null,T))};Bz.displayName=Sz.AccordionItem;function Oz(n){return n&&(n.matches('[data-accordion-component="Accordion"]')?n:Oz(n.parentElement))}function jx(n){var e=Oz(n);return e&&Array.from(e.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function $ie(n){var e=jx(n)||[],t=e[0];t&&t.focus()}function Hie(n){var e=jx(n)||[],t=e[e.length-1];t&&t.focus()}function Zie(n){var e=jx(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t+1];r&&r.focus()}}function Xie(n){var e=jx(n)||[],t=e.indexOf(n);if(t!==-1){var r=e[t-1];r&&r.focus()}}var Sm={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"},Jie=["toggleExpanded","className"],eoe=function(e){var t=e.toggleExpanded,r=e.className,i=r===void 0?"accordion__button":r,s=Ux(e,Jie),l=function(p){var v=p.key;if((v===Sm.ENTER||v===Sm.SPACE||v===Sm.SPACE_DEPRECATED)&&(p.preventDefault(),t()),p.target instanceof HTMLElement)switch(v){case Sm.HOME:{p.preventDefault(),$ie(p.target);break}case Sm.END:{p.preventDefault(),Hie(p.target);break}case Sm.LEFT:case Sm.UP:{p.preventDefault(),Xie(p.target);break}case Sm.RIGHT:case Sm.DOWN:{p.preventDefault(),Zie(p.target);break}}};return s.id&&IC(s.id),Ai.createElement("div",tm({className:i},s,{role:"button",tabIndex:0,onClick:t,onKeyDown:l,"data-accordion-component":"AccordionItemButton"}))},toe=function(e){return Ai.createElement(zx,null,function(t){var r=t.toggleExpanded,i=t.buttonAttributes;return Ai.createElement(eoe,tm({toggleExpanded:r},e,i))})},noe={className:"accordion__heading","aria-level":3},roe=`AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.

From the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):

The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.

`,Iz=function(n){MO(t,n);var e=wO(t);function t(){var r;Fx(this,t);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),Ll(lp(r),"ref",void 0),Ll(lp(r),"setRef",function(o){r.ref=o}),r}return Lx(t,[{key:"componentDidUpdate",value:function(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function(){t.VALIDATE(this.ref)}},{key:"render",value:function(){return Ai.createElement("div",tm({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function(i){if(i===void 0)throw new Error("ref is undefined");if(!(i.childElementCount===1&&i.firstElementChild&&i.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton"))throw new Error(roe)}}]),t}(Ai.PureComponent);Ll(Iz,"defaultProps",noe);var kz=function(e){return Ai.createElement(zx,null,function(t){var r=t.headingAttributes;return e.id&&IC(e.id),Ai.createElement(Iz,tm({},e,r))})};kz.displayName=Sz.AccordionItemHeading;var ioe=["className","region","id"],ooe=function(e){var t=e.className,r=t===void 0?"accordion__panel":t,i=e.region,s=e.id,l=Ux(e,ioe),o=function(v){var x=v.panelAttributes;s&&IC(s);var B=K6(K6({},x),{},{"aria-labelledby":i?x["aria-labelledby"]:void 0});return Ai.createElement("div",tm({"data-accordion-component":"AccordionItemPanel",className:r},l,B,{role:i?"region":void 0}))};return Ai.createElement(zx,null,o)},Ob={exports:{}},soe=Ob.exports,Q9;function Nx(){return Q9||(Q9=1,function(n,e){(function(t,r){n.exports=r()})(soe,function(){var t=navigator.userAgent,r=navigator.platform,i=/gecko\/\d/i.test(t),s=/MSIE \d/.test(t),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),p=s||l||o,v=p&&(s?document.documentMode||6:+(o||l)[1]),x=!o&&/WebKit\//.test(t),B=x&&/Qt\/\d+\.\d+/.test(t),T=!o&&/Chrome\/(\d+)/.exec(t),P=T&&+T[1],U=/Opera\//.test(t),j=/Apple Computer/.test(navigator.vendor),N=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),q=/PhantomJS/.test(t),H=j&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),oe=/Android/.test(t),te=H||oe||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),V=H||/Mac/.test(r),ne=/\bCrOS\b/.test(t),W=/win/i.test(r),ie=U&&t.match(/Version\/(\d*\.\d*)/);ie&&(ie=Number(ie[1])),ie&&ie>=15&&(U=!1,x=!0);var he=V&&(B||U&&(ie==null||ie<12.11)),fe=i||p&&v>=9;function Ee(A){return new RegExp("(^|\\s)"+A+"(?:$|\\s)\\s*")}var me=function(A,g){var E=A.className,S=Ee(g).exec(E);if(S){var K=E.slice(S.index+S[0].length);A.className=E.slice(0,S.index)+(K?S[1]+K:"")}};function Me(A){for(var g=A.childNodes.length;g>0;--g)A.removeChild(A.firstChild);return A}function De(A,g){return Me(A).appendChild(g)}function xe(A,g,E,S){var K=document.createElement(A);if(E&&(K.className=E),S&&(K.style.cssText=S),typeof g=="string")K.appendChild(document.createTextNode(g));else if(g)for(var Z=0;Z<g.length;++Z)K.appendChild(g[Z]);return K}function At(A,g,E,S){var K=xe(A,g,E,S);return K.setAttribute("role","presentation"),K}var Ze;document.createRange?Ze=function(A,g,E,S){var K=document.createRange();return K.setEnd(S||A,E),K.setStart(A,g),K}:Ze=function(A,g,E){var S=document.body.createTextRange();try{S.moveToElementText(A.parentNode)}catch{return S}return S.collapse(!0),S.moveEnd("character",E),S.moveStart("character",g),S};function Xe(A,g){if(g.nodeType==3&&(g=g.parentNode),A.contains)return A.contains(g);do if(g.nodeType==11&&(g=g.host),g==A)return!0;while(g=g.parentNode)}function Ne(A){var g=A.ownerDocument||A,E;try{E=A.activeElement}catch{E=g.body||null}for(;E&&E.shadowRoot&&E.shadowRoot.activeElement;)E=E.shadowRoot.activeElement;return E}function Se(A,g){var E=A.className;Ee(g).test(E)||(A.className+=(E?" ":"")+g)}function Re(A,g){for(var E=A.split(" "),S=0;S<E.length;S++)E[S]&&!Ee(E[S]).test(g)&&(g+=" "+E[S]);return g}var He=function(A){A.select()};H?He=function(A){A.selectionStart=0,A.selectionEnd=A.value.length}:p&&(He=function(A){try{A.select()}catch{}});function _t(A){return A.display.wrapper.ownerDocument}function Gt(A){return yt(A.display.wrapper)}function yt(A){return A.getRootNode?A.getRootNode():A.ownerDocument}function Ft(A){return _t(A).defaultView}function Tt(A){var g=Array.prototype.slice.call(arguments,1);return function(){return A.apply(null,g)}}function Le(A,g,E){g||(g={});for(var S in A)A.hasOwnProperty(S)&&(E!==!1||!g.hasOwnProperty(S))&&(g[S]=A[S]);return g}function Pe(A,g,E,S,K){g==null&&(g=A.search(/[^\s\u00a0]/),g==-1&&(g=A.length));for(var Z=S||0,Ae=K||0;;){var _e=A.indexOf("	",Z);if(_e<0||_e>=g)return Ae+(g-Z);Ae+=_e-Z,Ae+=E-Ae%E,Z=_e+1}}var Be=function(){this.id=null,this.f=null,this.time=0,this.handler=Tt(this.onTimeout,this)};Be.prototype.onTimeout=function(A){A.id=0,A.time<=+new Date?A.f():setTimeout(A.handler,A.time-+new Date)},Be.prototype.set=function(A,g){this.f=g;var E=+new Date+A;(!this.id||E<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,A),this.time=E)};function it(A,g){for(var E=0;E<A.length;++E)if(A[E]==g)return E;return-1}var Ct=50,ft={toString:function(){return"CodeMirror.Pass"}},Lt={scroll:!1},Zt={origin:"*mouse"},Rt={origin:"+move"};function _n(A,g,E){for(var S=0,K=0;;){var Z=A.indexOf("	",S);Z==-1&&(Z=A.length);var Ae=Z-S;if(Z==A.length||K+Ae>=g)return S+Math.min(Ae,g-K);if(K+=Z-S,K+=E-K%E,S=Z+1,K>=g)return S}}var qn=[""];function rn(A){for(;qn.length<=A;)qn.push(ar(qn)+" ");return qn[A]}function ar(A){return A[A.length-1]}function kn(A,g){for(var E=[],S=0;S<A.length;S++)E[S]=g(A[S],S);return E}function mn(A,g,E){for(var S=0,K=E(g);S<A.length&&E(A[S])<=K;)S++;A.splice(S,0,g)}function zn(){}function br(A,g){var E;return Object.create?E=Object.create(A):(zn.prototype=A,E=new zn),g&&Le(g,E),E}var gr=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function tr(A){return/\w/.test(A)||A>""&&(A.toUpperCase()!=A.toLowerCase()||gr.test(A))}function Ge(A,g){return g?g.source.indexOf("\\w")>-1&&tr(A)?!0:g.test(A):tr(A)}function ce(A){for(var g in A)if(A.hasOwnProperty(g)&&A[g])return!1;return!0}var pe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function rt(A){return A.charCodeAt(0)>=768&&pe.test(A)}function St(A,g,E){for(;(E<0?g>0:g<A.length)&&rt(A.charAt(g));)g+=E;return g}function Ht(A,g,E){for(var S=g>E?-1:1;;){if(g==E)return g;var K=(g+E)/2,Z=S<0?Math.ceil(K):Math.floor(K);if(Z==g)return A(Z)?g:E;A(Z)?E=Z:g=Z+S}}function sn(A,g,E,S){if(!A)return S(g,E,"ltr",0);for(var K=!1,Z=0;Z<A.length;++Z){var Ae=A[Z];(Ae.from<E&&Ae.to>g||g==E&&Ae.to==g)&&(S(Math.max(Ae.from,g),Math.min(Ae.to,E),Ae.level==1?"rtl":"ltr",Z),K=!0)}K||S(g,E,"ltr")}var nr=null;function $e(A,g,E){var S;nr=null;for(var K=0;K<A.length;++K){var Z=A[K];if(Z.from<g&&Z.to>g)return K;Z.to==g&&(Z.from!=Z.to&&E=="before"?S=K:nr=K),Z.from==g&&(Z.from!=Z.to&&E!="before"?S=K:nr=K)}return S??nr}var ae=function(){var A="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",g="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function E(Ue){return Ue<=247?A.charAt(Ue):1424<=Ue&&Ue<=1524?"R":1536<=Ue&&Ue<=1785?g.charAt(Ue-1536):1774<=Ue&&Ue<=2220?"r":8192<=Ue&&Ue<=8203?"w":Ue==8204?"b":"L"}var S=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,K=/[stwN]/,Z=/[LRr]/,Ae=/[Lb1n]/,_e=/[1n]/;function Ie(Ue,gt,wt){this.level=Ue,this.from=gt,this.to=wt}return function(Ue,gt){var wt=gt=="ltr"?"L":"R";if(Ue.length==0||gt=="ltr"&&!S.test(Ue))return!1;for(var Xt=Ue.length,Yt=[],bn=0;bn<Xt;++bn)Yt.push(E(Ue.charCodeAt(bn)));for(var Ln=0,rr=wt;Ln<Xt;++Ln){var er=Yt[Ln];er=="m"?Yt[Ln]=rr:rr=er}for(var Cr=0,pr=wt;Cr<Xt;++Cr){var Or=Yt[Cr];Or=="1"&&pr=="r"?Yt[Cr]="n":Z.test(Or)&&(pr=Or,Or=="r"&&(Yt[Cr]="R"))}for(var oi=1,jr=Yt[0];oi<Xt-1;++oi){var zi=Yt[oi];zi=="+"&&jr=="1"&&Yt[oi+1]=="1"?Yt[oi]="1":zi==","&&jr==Yt[oi+1]&&(jr=="1"||jr=="n")&&(Yt[oi]=jr),jr=zi}for(var yo=0;yo<Xt;++yo){var Fa=Yt[yo];if(Fa==",")Yt[yo]="N";else if(Fa=="%"){var Zs=void 0;for(Zs=yo+1;Zs<Xt&&Yt[Zs]=="%";++Zs);for(var wa=yo&&Yt[yo-1]=="!"||Zs<Xt&&Yt[Zs]=="1"?"1":"N",Ha=yo;Ha<Zs;++Ha)Yt[Ha]=wa;yo=Zs-1}}for(var Za=0,Ru=wt;Za<Xt;++Za){var hl=Yt[Za];Ru=="L"&&hl=="1"?Yt[Za]="L":Z.test(hl)&&(Ru=hl)}for(var Sa=0;Sa<Xt;++Sa)if(K.test(Yt[Sa])){var is=void 0;for(is=Sa+1;is<Xt&&K.test(Yt[is]);++is);for(var gi=(Sa?Yt[Sa-1]:wt)=="L",os=(is<Xt?Yt[is]:wt)=="L",Xs=gi==os?gi?"L":"R":wt,da=Sa;da<is;++da)Yt[da]=Xs;Sa=is-1}for(var Is=[],eu,Bo=0;Bo<Xt;)if(Ae.test(Yt[Bo])){var oh=Bo;for(++Bo;Bo<Xt&&Ae.test(Yt[Bo]);++Bo);Is.push(new Ie(0,oh,Bo))}else{var yu=Bo,lA=Is.length,od=gt=="rtl"?1:0;for(++Bo;Bo<Xt&&Yt[Bo]!="L";++Bo);for(var Xa=yu;Xa<Bo;)if(_e.test(Yt[Xa])){yu<Xa&&(Is.splice(lA,0,new Ie(1,yu,Xa)),lA+=od);var La=Xa;for(++Xa;Xa<Bo&&_e.test(Yt[Xa]);++Xa);Is.splice(lA,0,new Ie(2,La,Xa)),lA+=od,yu=Xa}else++Xa;yu<Bo&&Is.splice(lA,0,new Ie(1,yu,Bo))}return gt=="ltr"&&(Is[0].level==1&&(eu=Ue.match(/^\s+/))&&(Is[0].from=eu[0].length,Is.unshift(new Ie(0,0,eu[0].length))),ar(Is).level==1&&(eu=Ue.match(/\s+$/))&&(ar(Is).to-=eu[0].length,Is.push(new Ie(0,Xt-eu[0].length,Xt)))),gt=="rtl"?Is.reverse():Is}}();function Ce(A,g){var E=A.order;return E==null&&(E=A.order=ae(A.text,g)),E}var f=[],je=function(A,g,E){if(A.addEventListener)A.addEventListener(g,E,!1);else if(A.attachEvent)A.attachEvent("on"+g,E);else{var S=A._handlers||(A._handlers={});S[g]=(S[g]||f).concat(E)}};function qe(A,g){return A._handlers&&A._handlers[g]||f}function Je(A,g,E){if(A.removeEventListener)A.removeEventListener(g,E,!1);else if(A.detachEvent)A.detachEvent("on"+g,E);else{var S=A._handlers,K=S&&S[g];if(K){var Z=it(K,E);Z>-1&&(S[g]=K.slice(0,Z).concat(K.slice(Z+1)))}}}function ut(A,g){var E=qe(A,g);if(E.length)for(var S=Array.prototype.slice.call(arguments,2),K=0;K<E.length;++K)E[K].apply(null,S)}function dt(A,g,E){return typeof g=="string"&&(g={type:g,preventDefault:function(){this.defaultPrevented=!0}}),ut(A,E||g.type,A,g),Fn(g)||g.codemirrorIgnore}function Qt(A){var g=A._handlers&&A._handlers.cursorActivity;if(g)for(var E=A.curOp.cursorActivityHandlers||(A.curOp.cursorActivityHandlers=[]),S=0;S<g.length;++S)it(E,g[S])==-1&&E.push(g[S])}function Wt(A,g){return qe(A,g).length>0}function jt(A){A.prototype.on=function(g,E){je(this,g,E)},A.prototype.off=function(g,E){Je(this,g,E)}}function tn(A){A.preventDefault?A.preventDefault():A.returnValue=!1}function Dn(A){A.stopPropagation?A.stopPropagation():A.cancelBubble=!0}function Fn(A){return A.defaultPrevented!=null?A.defaultPrevented:A.returnValue==!1}function on(A){tn(A),Dn(A)}function Sr(A){return A.target||A.srcElement}function Hn(A){var g=A.which;return g==null&&(A.button&1?g=1:A.button&2?g=3:A.button&4&&(g=2)),V&&A.ctrlKey&&g==1&&(g=3),g}var xr=function(){if(p&&v<9)return!1;var A=xe("div");return"draggable"in A||"dragDrop"in A}(),qr;function Bn(A){if(qr==null){var g=xe("span","");De(A,xe("span",[g,document.createTextNode("x")])),A.firstChild.offsetHeight!=0&&(qr=g.offsetWidth<=1&&g.offsetHeight>2&&!(p&&v<8))}var E=qr?xe("span",""):xe("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return E.setAttribute("cm-text",""),E}var $n;function Yn(A){if($n!=null)return $n;var g=De(A,document.createTextNode("AA")),E=Ze(g,0,1).getBoundingClientRect(),S=Ze(g,1,2).getBoundingClientRect();return Me(A),!E||E.left==E.right?!1:$n=S.right-E.right<3}var Qr=`

b`.split(/\n/).length!=3?function(A){for(var g=0,E=[],S=A.length;g<=S;){var K=A.indexOf(`
`,g);K==-1&&(K=A.length);var Z=A.slice(g,A.charAt(K-1)=="\r"?K-1:K),Ae=Z.indexOf("\r");Ae!=-1?(E.push(Z.slice(0,Ae)),g+=Ae+1):(E.push(Z),g=K+1)}return E}:function(A){return A.split(/\r\n?|\n/)},co=window.getSelection?function(A){try{return A.selectionStart!=A.selectionEnd}catch{return!1}}:function(A){var g;try{g=A.ownerDocument.selection.createRange()}catch{}return!g||g.parentElement()!=A?!1:g.compareEndPoints("StartToEnd",g)!=0},ma=function(){var A=xe("div");return"oncopy"in A?!0:(A.setAttribute("oncopy","return;"),typeof A.oncopy=="function")}(),Mr=null;function wi(A){if(Mr!=null)return Mr;var g=De(A,xe("span","x")),E=g.getBoundingClientRect(),S=Ze(g,0,1).getBoundingClientRect();return Mr=Math.abs(E.left-S.left)>1}var Zi={},Ts={};function xs(A,g){arguments.length>2&&(g.dependencies=Array.prototype.slice.call(arguments,2)),Zi[A]=g}function aa(A,g){Ts[A]=g}function ps(A){if(typeof A=="string"&&Ts.hasOwnProperty(A))A=Ts[A];else if(A&&typeof A.name=="string"&&Ts.hasOwnProperty(A.name)){var g=Ts[A.name];typeof g=="string"&&(g={name:g}),A=br(g,A),A.name=g.name}else{if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(A))return ps("application/xml");if(typeof A=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(A))return ps("application/json")}return typeof A=="string"?{name:A}:A||{name:"null"}}function bi(A,g){g=ps(g);var E=Zi[g.name];if(!E)return bi(A,"text/plain");var S=E(A,g);if(Il.hasOwnProperty(g.name)){var K=Il[g.name];for(var Z in K)K.hasOwnProperty(Z)&&(S.hasOwnProperty(Z)&&(S["_"+Z]=S[Z]),S[Z]=K[Z])}if(S.name=g.name,g.helperType&&(S.helperType=g.helperType),g.modeProps)for(var Ae in g.modeProps)S[Ae]=g.modeProps[Ae];return S}var Il={};function kl(A,g){var E=Il.hasOwnProperty(A)?Il[A]:Il[A]={};Le(g,E)}function io(A,g){if(g===!0)return g;if(A.copyState)return A.copyState(g);var E={};for(var S in g){var K=g[S];K instanceof Array&&(K=K.concat([])),E[S]=K}return E}function vl(A,g){for(var E;A.innerMode&&(E=A.innerMode(g),!(!E||E.mode==A));)g=E.state,A=E.mode;return E||{mode:A,state:g}}function ol(A,g,E){return A.startState?A.startState(g,E):!0}var bo=function(A,g,E){this.pos=this.start=0,this.string=A,this.tabSize=g||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=E};bo.prototype.eol=function(){return this.pos>=this.string.length},bo.prototype.sol=function(){return this.pos==this.lineStart},bo.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},bo.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},bo.prototype.eat=function(A){var g=this.string.charAt(this.pos),E;if(typeof A=="string"?E=g==A:E=g&&(A.test?A.test(g):A(g)),E)return++this.pos,g},bo.prototype.eatWhile=function(A){for(var g=this.pos;this.eat(A););return this.pos>g},bo.prototype.eatSpace=function(){for(var A=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>A},bo.prototype.skipToEnd=function(){this.pos=this.string.length},bo.prototype.skipTo=function(A){var g=this.string.indexOf(A,this.pos);if(g>-1)return this.pos=g,!0},bo.prototype.backUp=function(A){this.pos-=A},bo.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Pe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},bo.prototype.indentation=function(){return Pe(this.string,null,this.tabSize)-(this.lineStart?Pe(this.string,this.lineStart,this.tabSize):0)},bo.prototype.match=function(A,g,E){if(typeof A=="string"){var S=function(Ae){return E?Ae.toLowerCase():Ae},K=this.string.substr(this.pos,A.length);if(S(K)==S(A))return g!==!1&&(this.pos+=A.length),!0}else{var Z=this.string.slice(this.pos).match(A);return Z&&Z.index>0?null:(Z&&g!==!1&&(this.pos+=Z[0].length),Z)}},bo.prototype.current=function(){return this.string.slice(this.start,this.pos)},bo.prototype.hideFirstChars=function(A,g){this.lineStart+=A;try{return g()}finally{this.lineStart-=A}},bo.prototype.lookAhead=function(A){var g=this.lineOracle;return g&&g.lookAhead(A)},bo.prototype.baseToken=function(){var A=this.lineOracle;return A&&A.baseToken(this.pos)};function Kr(A,g){if(g-=A.first,g<0||g>=A.size)throw new Error("There is no line "+(g+A.first)+" in the document.");for(var E=A;!E.lines;)for(var S=0;;++S){var K=E.children[S],Z=K.chunkSize();if(g<Z){E=K;break}g-=Z}return E.lines[g]}function Wa(A,g,E){var S=[],K=g.line;return A.iter(g.line,E.line+1,function(Z){var Ae=Z.text;K==E.line&&(Ae=Ae.slice(0,E.ch)),K==g.line&&(Ae=Ae.slice(g.ch)),S.push(Ae),++K}),S}function Vo(A,g,E){var S=[];return A.iter(g,E,function(K){S.push(K.text)}),S}function Gs(A,g){var E=g-A.height;if(E)for(var S=A;S;S=S.parent)S.height+=E}function Ye(A){if(A.parent==null)return null;for(var g=A.parent,E=it(g.lines,A),S=g.parent;S;g=S,S=S.parent)for(var K=0;S.children[K]!=g;++K)E+=S.children[K].chunkSize();return E+g.first}function xt(A,g){var E=A.first;e:do{for(var S=0;S<A.children.length;++S){var K=A.children[S],Z=K.height;if(g<Z){A=K;continue e}g-=Z,E+=K.chunkSize()}return E}while(!A.lines);for(var Ae=0;Ae<A.lines.length;++Ae){var _e=A.lines[Ae],Ie=_e.height;if(g<Ie)break;g-=Ie}return E+Ae}function yn(A,g){return g>=A.first&&g<A.first+A.size}function Zn(A,g){return String(A.lineNumberFormatter(g+A.firstLineNumber))}function dn(A,g,E){if(E===void 0&&(E=null),!(this instanceof dn))return new dn(A,g,E);this.line=A,this.ch=g,this.sticky=E}function lr(A,g){return A.line-g.line||A.ch-g.ch}function Pi(A,g){return A.sticky==g.sticky&&lr(A,g)==0}function xo(A){return dn(A.line,A.ch)}function as(A,g){return lr(A,g)<0?g:A}function la(A,g){return lr(A,g)<0?A:g}function Wu(A,g){return Math.max(A.first,Math.min(g,A.first+A.size-1))}function ei(A,g){if(g.line<A.first)return dn(A.first,0);var E=A.first+A.size-1;return g.line>E?dn(E,Kr(A,E).text.length):ki(g,Kr(A,g.line).text.length)}function ki(A,g){var E=A.ch;return E==null||E>g?dn(A.line,g):E<0?dn(A.line,0):A}function zl(A,g){for(var E=[],S=0;S<g.length;S++)E[S]=ei(A,g[S]);return E}var na=function(A,g){this.state=A,this.lookAhead=g},Ms=function(A,g,E,S){this.state=g,this.doc=A,this.line=E,this.maxLookAhead=S||0,this.baseTokens=null,this.baseTokenPos=1};Ms.prototype.lookAhead=function(A){var g=this.doc.getLine(this.line+A);return g!=null&&A>this.maxLookAhead&&(this.maxLookAhead=A),g},Ms.prototype.baseToken=function(A){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=A;)this.baseTokenPos+=2;var g=this.baseTokens[this.baseTokenPos+1];return{type:g&&g.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-A}},Ms.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ms.fromSaved=function(A,g,E){return g instanceof na?new Ms(A,io(A.mode,g.state),E,g.lookAhead):new Ms(A,io(A.mode,g),E)},Ms.prototype.save=function(A){var g=A!==!1?io(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new na(g,this.maxLookAhead):g};function Mu(A,g,E,S){var K=[A.state.modeGen],Z={};Qs(A,g.text,A.doc.mode,E,function(Ue,gt){return K.push(Ue,gt)},Z,S);for(var Ae=E.state,_e=function(Ue){E.baseTokens=K;var gt=A.state.overlays[Ue],wt=1,Xt=0;E.state=!0,Qs(A,g.text,gt.mode,E,function(Yt,bn){for(var Ln=wt;Xt<Yt;){var rr=K[wt];rr>Yt&&K.splice(wt,1,Yt,K[wt+1],rr),wt+=2,Xt=Math.min(Yt,rr)}if(bn)if(gt.opaque)K.splice(Ln,wt-Ln,Yt,"overlay "+bn),wt=Ln+2;else for(;Ln<wt;Ln+=2){var er=K[Ln+1];K[Ln+1]=(er?er+" ":"")+"overlay "+bn}},Z),E.state=Ae,E.baseTokens=null,E.baseTokenPos=1},Ie=0;Ie<A.state.overlays.length;++Ie)_e(Ie);return{styles:K,classes:Z.bgClass||Z.textClass?Z:null}}function Si(A,g,E){if(!g.styles||g.styles[0]!=A.state.modeGen){var S=ti(A,Ye(g)),K=g.text.length>A.options.maxHighlightLength&&io(A.doc.mode,S.state),Z=Mu(A,g,S);K&&(S.state=K),g.stateAfter=S.save(!K),g.styles=Z.styles,Z.classes?g.styleClasses=Z.classes:g.styleClasses&&(g.styleClasses=null),E===A.doc.highlightFrontier&&(A.doc.modeFrontier=Math.max(A.doc.modeFrontier,++A.doc.highlightFrontier))}return g.styles}function ti(A,g,E){var S=A.doc,K=A.display;if(!S.mode.startState)return new Ms(S,!0,g);var Z=ra(A,g,E),Ae=Z>S.first&&Kr(S,Z-1).stateAfter,_e=Ae?Ms.fromSaved(S,Ae,Z):new Ms(S,ol(S.mode),Z);return S.iter(Z,g,function(Ie){ls(A,Ie.text,_e);var Ue=_e.line;Ie.stateAfter=Ue==g-1||Ue%5==0||Ue>=K.viewFrom&&Ue<K.viewTo?_e.save():null,_e.nextLine()}),E&&(S.modeFrontier=_e.line),_e}function ls(A,g,E,S){var K=A.doc.mode,Z=new bo(g,A.options.tabSize,E);for(Z.start=Z.pos=S||0,g==""&&ka(K,E.state);!Z.eol();)Us(K,Z,E.state),Z.start=Z.pos}function ka(A,g){if(A.blankLine)return A.blankLine(g);if(A.innerMode){var E=vl(A,g);if(E.mode.blankLine)return E.mode.blankLine(E.state)}}function Us(A,g,E,S){for(var K=0;K<10;K++){S&&(S[0]=vl(A,E).mode);var Z=A.token(g,E);if(g.pos>g.start)return Z}throw new Error("Mode "+A.name+" failed to advance stream.")}var ho=function(A,g,E){this.start=A.start,this.end=A.pos,this.string=A.current(),this.type=g||null,this.state=E};function Do(A,g,E,S){var K=A.doc,Z=K.mode,Ae;g=ei(K,g);var _e=Kr(K,g.line),Ie=ti(A,g.line,E),Ue=new bo(_e.text,A.options.tabSize,Ie),gt;for(S&&(gt=[]);(S||Ue.pos<g.ch)&&!Ue.eol();)Ue.start=Ue.pos,Ae=Us(Z,Ue,Ie.state),S&&gt.push(new ho(Ue,Ae,io(K.mode,Ie.state)));return S?gt:new ho(Ue,Ae,Ie.state)}function Gu(A,g){if(A)for(;;){var E=A.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!E)break;A=A.slice(0,E.index)+A.slice(E.index+E[0].length);var S=E[1]?"bgClass":"textClass";g[S]==null?g[S]=E[2]:new RegExp("(?:^|\\s)"+E[2]+"(?:$|\\s)").test(g[S])||(g[S]+=" "+E[2])}return A}function Qs(A,g,E,S,K,Z,Ae){var _e=E.flattenSpans;_e==null&&(_e=A.options.flattenSpans);var Ie=0,Ue=null,gt=new bo(g,A.options.tabSize,S),wt,Xt=A.options.addModeClass&&[null];for(g==""&&Gu(ka(E,S.state),Z);!gt.eol();){if(gt.pos>A.options.maxHighlightLength?(_e=!1,Ae&&ls(A,g,S,gt.pos),gt.pos=g.length,wt=null):wt=Gu(Us(E,gt,S.state,Xt),Z),Xt){var Yt=Xt[0].name;Yt&&(wt="m-"+(wt?Yt+" "+wt:Yt))}if(!_e||Ue!=wt){for(;Ie<gt.start;)Ie=Math.min(gt.start,Ie+5e3),K(Ie,Ue);Ue=wt}gt.start=gt.pos}for(;Ie<gt.pos;){var bn=Math.min(gt.pos,Ie+5e3);K(bn,Ue),Ie=bn}}function ra(A,g,E){for(var S,K,Z=A.doc,Ae=E?-1:g-(A.doc.mode.innerMode?1e3:100),_e=g;_e>Ae;--_e){if(_e<=Z.first)return Z.first;var Ie=Kr(Z,_e-1),Ue=Ie.stateAfter;if(Ue&&(!E||_e+(Ue instanceof na?Ue.lookAhead:0)<=Z.modeFrontier))return _e;var gt=Pe(Ie.text,null,A.options.tabSize);(K==null||S>gt)&&(K=_e-1,S=gt)}return K}function No(A,g){if(A.modeFrontier=Math.min(A.modeFrontier,g),!(A.highlightFrontier<g-10)){for(var E=A.first,S=g-1;S>E;S--){var K=Kr(A,S).stateAfter;if(K&&(!(K instanceof na)||S+K.lookAhead<g)){E=S+1;break}}A.highlightFrontier=Math.min(A.highlightFrontier,E)}}var Fo=!1,es=!1;function Mo(){Fo=!0}function ga(){es=!0}function zs(A,g,E){this.marker=A,this.from=g,this.to=E}function Ga(A,g){if(A)for(var E=0;E<A.length;++E){var S=A[E];if(S.marker==g)return S}}function Ta(A,g){for(var E,S=0;S<A.length;++S)A[S]!=g&&(E||(E=[])).push(A[S]);return E}function ao(A,g,E){var S=E&&window.WeakSet&&(E.markedSpans||(E.markedSpans=new WeakSet));S&&A.markedSpans&&S.has(A.markedSpans)?A.markedSpans.push(g):(A.markedSpans=A.markedSpans?A.markedSpans.concat([g]):[g],S&&S.add(A.markedSpans)),g.marker.attachLine(A)}function sl(A,g,E){var S;if(A)for(var K=0;K<A.length;++K){var Z=A[K],Ae=Z.marker,_e=Z.from==null||(Ae.inclusiveLeft?Z.from<=g:Z.from<g);if(_e||Z.from==g&&Ae.type=="bookmark"&&(!E||!Z.marker.insertLeft)){var Ie=Z.to==null||(Ae.inclusiveRight?Z.to>=g:Z.to>g);(S||(S=[])).push(new zs(Ae,Z.from,Ie?null:Z.to))}}return S}function Hi(A,g,E){var S;if(A)for(var K=0;K<A.length;++K){var Z=A[K],Ae=Z.marker,_e=Z.to==null||(Ae.inclusiveRight?Z.to>=g:Z.to>g);if(_e||Z.from==g&&Ae.type=="bookmark"&&(!E||Z.marker.insertLeft)){var Ie=Z.from==null||(Ae.inclusiveLeft?Z.from<=g:Z.from<g);(S||(S=[])).push(new zs(Ae,Ie?null:Z.from-g,Z.to==null?null:Z.to-g))}}return S}function Hr(A,g){if(g.full)return null;var E=yn(A,g.from.line)&&Kr(A,g.from.line).markedSpans,S=yn(A,g.to.line)&&Kr(A,g.to.line).markedSpans;if(!E&&!S)return null;var K=g.from.ch,Z=g.to.ch,Ae=lr(g.from,g.to)==0,_e=sl(E,K,Ae),Ie=Hi(S,Z,Ae),Ue=g.text.length==1,gt=ar(g.text).length+(Ue?K:0);if(_e)for(var wt=0;wt<_e.length;++wt){var Xt=_e[wt];if(Xt.to==null){var Yt=Ga(Ie,Xt.marker);Yt?Ue&&(Xt.to=Yt.to==null?null:Yt.to+gt):Xt.to=K}}if(Ie)for(var bn=0;bn<Ie.length;++bn){var Ln=Ie[bn];if(Ln.to!=null&&(Ln.to+=gt),Ln.from==null){var rr=Ga(_e,Ln.marker);rr||(Ln.from=gt,Ue&&(_e||(_e=[])).push(Ln))}else Ln.from+=gt,Ue&&(_e||(_e=[])).push(Ln)}_e&&(_e=jl(_e)),Ie&&Ie!=_e&&(Ie=jl(Ie));var er=[_e];if(!Ue){var Cr=g.text.length-2,pr;if(Cr>0&&_e)for(var Or=0;Or<_e.length;++Or)_e[Or].to==null&&(pr||(pr=[])).push(new zs(_e[Or].marker,null,null));for(var oi=0;oi<Cr;++oi)er.push(pr);er.push(Ie)}return er}function jl(A){for(var g=0;g<A.length;++g){var E=A[g];E.from!=null&&E.from==E.to&&E.marker.clearWhenEmpty!==!1&&A.splice(g--,1)}return A.length?A:null}function Wi(A,g,E){var S=null;if(A.iter(g.line,E.line+1,function(Yt){if(Yt.markedSpans)for(var bn=0;bn<Yt.markedSpans.length;++bn){var Ln=Yt.markedSpans[bn].marker;Ln.readOnly&&(!S||it(S,Ln)==-1)&&(S||(S=[])).push(Ln)}}),!S)return null;for(var K=[{from:g,to:E}],Z=0;Z<S.length;++Z)for(var Ae=S[Z],_e=Ae.find(0),Ie=0;Ie<K.length;++Ie){var Ue=K[Ie];if(!(lr(Ue.to,_e.from)<0||lr(Ue.from,_e.to)>0)){var gt=[Ie,1],wt=lr(Ue.from,_e.from),Xt=lr(Ue.to,_e.to);(wt<0||!Ae.inclusiveLeft&&!wt)&&gt.push({from:Ue.from,to:_e.from}),(Xt>0||!Ae.inclusiveRight&&!Xt)&&gt.push({from:_e.to,to:Ue.to}),K.splice.apply(K,gt),Ie+=gt.length-3}}return K}function oo(A){var g=A.markedSpans;if(g){for(var E=0;E<g.length;++E)g[E].marker.detachLine(A);A.markedSpans=null}}function Ki(A,g){if(g){for(var E=0;E<g.length;++E)g[E].marker.attachLine(A);A.markedSpans=g}}function ee(A){return A.inclusiveLeft?-1:0}function Oe(A){return A.inclusiveRight?1:0}function st(A,g){var E=A.lines.length-g.lines.length;if(E!=0)return E;var S=A.find(),K=g.find(),Z=lr(S.from,K.from)||ee(A)-ee(g);if(Z)return-Z;var Ae=lr(S.to,K.to)||Oe(A)-Oe(g);return Ae||g.id-A.id}function $t(A,g){var E=es&&A.markedSpans,S;if(E)for(var K=void 0,Z=0;Z<E.length;++Z)K=E[Z],K.marker.collapsed&&(g?K.from:K.to)==null&&(!S||st(S,K.marker)<0)&&(S=K.marker);return S}function Ir(A){return $t(A,!0)}function Vn(A){return $t(A,!1)}function Zr(A,g){var E=es&&A.markedSpans,S;if(E)for(var K=0;K<E.length;++K){var Z=E[K];Z.marker.collapsed&&(Z.from==null||Z.from<g)&&(Z.to==null||Z.to>g)&&(!S||st(S,Z.marker)<0)&&(S=Z.marker)}return S}function di(A,g,E,S,K){var Z=Kr(A,g),Ae=es&&Z.markedSpans;if(Ae)for(var _e=0;_e<Ae.length;++_e){var Ie=Ae[_e];if(Ie.marker.collapsed){var Ue=Ie.marker.find(0),gt=lr(Ue.from,E)||ee(Ie.marker)-ee(K),wt=lr(Ue.to,S)||Oe(Ie.marker)-Oe(K);if(!(gt>=0&&wt<=0||gt<=0&&wt>=0)&&(gt<=0&&(Ie.marker.inclusiveRight&&K.inclusiveLeft?lr(Ue.to,E)>=0:lr(Ue.to,E)>0)||gt>=0&&(Ie.marker.inclusiveRight&&K.inclusiveLeft?lr(Ue.from,S)<=0:lr(Ue.from,S)<0)))return!0}}}function Br(A){for(var g;g=Ir(A);)A=g.find(-1,!0).line;return A}function Rr(A){for(var g;g=Vn(A);)A=g.find(1,!0).line;return A}function Vi(A){for(var g,E;g=Vn(A);)A=g.find(1,!0).line,(E||(E=[])).push(A);return E}function Wo(A,g){var E=Kr(A,g),S=Br(E);return E==S?g:Ye(S)}function si(A,g){if(g>A.lastLine())return g;var E=Kr(A,g),S;if(!zr(A,E))return g;for(;S=Vn(E);)E=S.find(1,!0).line;return Ye(E)+1}function zr(A,g){var E=es&&g.markedSpans;if(E){for(var S=void 0,K=0;K<E.length;++K)if(S=E[K],!!S.marker.collapsed){if(S.from==null)return!0;if(!S.marker.widgetNode&&S.from==0&&S.marker.inclusiveLeft&&Ui(A,g,S))return!0}}}function Ui(A,g,E){if(E.to==null){var S=E.marker.find(1,!0);return Ui(A,S.line,Ga(S.line.markedSpans,E.marker))}if(E.marker.inclusiveRight&&E.to==g.text.length)return!0;for(var K=void 0,Z=0;Z<g.markedSpans.length;++Z)if(K=g.markedSpans[Z],K.marker.collapsed&&!K.marker.widgetNode&&K.from==E.to&&(K.to==null||K.to!=E.from)&&(K.marker.inclusiveLeft||E.marker.inclusiveRight)&&Ui(A,g,K))return!0}function Gi(A){A=Br(A);for(var g=0,E=A.parent,S=0;S<E.lines.length;++S){var K=E.lines[S];if(K==A)break;g+=K.height}for(var Z=E.parent;Z;E=Z,Z=E.parent)for(var Ae=0;Ae<Z.children.length;++Ae){var _e=Z.children[Ae];if(_e==E)break;g+=_e.height}return g}function $o(A){if(A.height==0)return 0;for(var g=A.text.length,E,S=A;E=Ir(S);){var K=E.find(0,!0);S=K.from.line,g+=K.from.ch-K.to.ch}for(S=A;E=Vn(S);){var Z=E.find(0,!0);g-=S.text.length-Z.from.ch,S=Z.to.line,g+=S.text.length-Z.to.ch}return g}function ua(A){var g=A.display,E=A.doc;g.maxLine=Kr(E,E.first),g.maxLineLength=$o(g.maxLine),g.maxLineChanged=!0,E.iter(function(S){var K=$o(S);K>g.maxLineLength&&(g.maxLineLength=K,g.maxLine=S)})}var Ys=function(A,g,E){this.text=A,Ki(this,g),this.height=E?E(this):1};Ys.prototype.lineNo=function(){return Ye(this)},jt(Ys);function wu(A,g,E,S){A.text=g,A.stateAfter&&(A.stateAfter=null),A.styles&&(A.styles=null),A.order!=null&&(A.order=null),oo(A),Ki(A,E);var K=S?S(A):1;K!=A.height&&Gs(A,K)}function qs(A){A.parent=null,oo(A)}var Yd={},al={};function su(A,g){if(!A||/^\s*$/.test(A))return null;var E=g.addModeClass?al:Yd;return E[A]||(E[A]=A.replace(/\S+/g,"cm-$&"))}function vh(A,g){var E=At("span",null,null,x?"padding-right: .1px":null),S={pre:At("pre",[E],"CodeMirror-line"),content:E,col:0,pos:0,cm:A,trailingSpace:!1,splitSpaces:A.getOption("lineWrapping")};g.measure={};for(var K=0;K<=(g.rest?g.rest.length:0);K++){var Z=K?g.rest[K-1]:g.line,Ae=void 0;S.pos=0,S.addToken=qd,Yn(A.display.measure)&&(Ae=Ce(Z,A.doc.direction))&&(S.addToken=ws(S.addToken,Ae)),S.map=[];var _e=g!=A.display.externalMeasured&&Ye(Z);mA(Z,S,Si(A,Z,_e)),Z.styleClasses&&(Z.styleClasses.bgClass&&(S.bgClass=Re(Z.styleClasses.bgClass,S.bgClass||"")),Z.styleClasses.textClass&&(S.textClass=Re(Z.styleClasses.textClass,S.textClass||""))),S.map.length==0&&S.map.push(0,0,S.content.appendChild(Bn(A.display.measure))),K==0?(g.measure.map=S.map,g.measure.cache={}):((g.measure.maps||(g.measure.maps=[])).push(S.map),(g.measure.caches||(g.measure.caches=[])).push({}))}if(x){var Ie=S.content.lastChild;(/\bcm-tab\b/.test(Ie.className)||Ie.querySelector&&Ie.querySelector(".cm-tab"))&&(S.content.className="cm-tab-wrap-hack")}return ut(A,"renderLine",A,g.line,S.pre),S.pre.className&&(S.textClass=Re(S.pre.className,S.textClass||"")),S}function Su(A){var g=xe("span","","cm-invalidchar");return g.title="\\u"+A.charCodeAt(0).toString(16),g.setAttribute("aria-label",g.title),g}function qd(A,g,E,S,K,Z,Ae){if(g){var _e=A.splitSpaces?Yc(g,A.trailingSpace):g,Ie=A.cm.state.specialChars,Ue=!1,gt;if(!Ie.test(g))A.col+=g.length,gt=document.createTextNode(_e),A.map.push(A.pos,A.pos+g.length,gt),p&&v<9&&(Ue=!0),A.pos+=g.length;else{gt=document.createDocumentFragment();for(var wt=0;;){Ie.lastIndex=wt;var Xt=Ie.exec(g),Yt=Xt?Xt.index-wt:g.length-wt;if(Yt){var bn=document.createTextNode(_e.slice(wt,wt+Yt));p&&v<9?gt.appendChild(xe("span",[bn])):gt.appendChild(bn),A.map.push(A.pos,A.pos+Yt,bn),A.col+=Yt,A.pos+=Yt}if(!Xt)break;wt+=Yt+1;var Ln=void 0;if(Xt[0]=="	"){var rr=A.cm.options.tabSize,er=rr-A.col%rr;Ln=gt.appendChild(xe("span",rn(er),"cm-tab")),Ln.setAttribute("role","presentation"),Ln.setAttribute("cm-text","	"),A.col+=er}else Xt[0]=="\r"||Xt[0]==`
`?(Ln=gt.appendChild(xe("span",Xt[0]=="\r"?"":"","cm-invalidchar")),Ln.setAttribute("cm-text",Xt[0]),A.col+=1):(Ln=A.cm.options.specialCharPlaceholder(Xt[0]),Ln.setAttribute("cm-text",Xt[0]),p&&v<9?gt.appendChild(xe("span",[Ln])):gt.appendChild(Ln),A.col+=1);A.map.push(A.pos,A.pos+1,Ln),A.pos++}}if(A.trailingSpace=_e.charCodeAt(g.length-1)==32,E||S||K||Ue||Z||Ae){var Cr=E||"";S&&(Cr+=S),K&&(Cr+=K);var pr=xe("span",[gt],Cr,Z);if(Ae)for(var Or in Ae)Ae.hasOwnProperty(Or)&&Or!="style"&&Or!="class"&&pr.setAttribute(Or,Ae[Or]);return A.content.appendChild(pr)}A.content.appendChild(gt)}}function Yc(A,g){if(A.length>1&&!/  /.test(A))return A;for(var E=g,S="",K=0;K<A.length;K++){var Z=A.charAt(K);Z==" "&&E&&(K==A.length-1||A.charCodeAt(K+1)==32)&&(Z=""),S+=Z,E=Z==" "}return S}function ws(A,g){return function(E,S,K,Z,Ae,_e,Ie){K=K?K+" cm-force-border":"cm-force-border";for(var Ue=E.pos,gt=Ue+S.length;;){for(var wt=void 0,Xt=0;Xt<g.length&&(wt=g[Xt],!(wt.to>Ue&&wt.from<=Ue));Xt++);if(wt.to>=gt)return A(E,S,K,Z,Ae,_e,Ie);A(E,S.slice(0,wt.to-Ue),K,Z,null,_e,Ie),Z=null,S=S.slice(wt.to-Ue),Ue=wt.to}}}function LA(A,g,E,S){var K=!S&&E.widgetNode;K&&A.map.push(A.pos,A.pos+g,K),!S&&A.cm.display.input.needsContentAttribute&&(K||(K=A.content.appendChild(document.createElement("span"))),K.setAttribute("cm-marker",E.id)),K&&(A.cm.display.input.setUneditable(K),A.content.appendChild(K)),A.pos+=g,A.trailingSpace=!1}function mA(A,g,E){var S=A.markedSpans,K=A.text,Z=0;if(!S){for(var Ae=1;Ae<E.length;Ae+=2)g.addToken(g,K.slice(Z,Z=E[Ae]),su(E[Ae+1],g.cm.options));return}for(var _e=K.length,Ie=0,Ue=1,gt="",wt,Xt,Yt=0,bn,Ln,rr,er,Cr;;){if(Yt==Ie){bn=Ln=rr=Xt="",Cr=null,er=null,Yt=1/0;for(var pr=[],Or=void 0,oi=0;oi<S.length;++oi){var jr=S[oi],zi=jr.marker;if(zi.type=="bookmark"&&jr.from==Ie&&zi.widgetNode)pr.push(zi);else if(jr.from<=Ie&&(jr.to==null||jr.to>Ie||zi.collapsed&&jr.to==Ie&&jr.from==Ie)){if(jr.to!=null&&jr.to!=Ie&&Yt>jr.to&&(Yt=jr.to,Ln=""),zi.className&&(bn+=" "+zi.className),zi.css&&(Xt=(Xt?Xt+";":"")+zi.css),zi.startStyle&&jr.from==Ie&&(rr+=" "+zi.startStyle),zi.endStyle&&jr.to==Yt&&(Or||(Or=[])).push(zi.endStyle,jr.to),zi.title&&((Cr||(Cr={})).title=zi.title),zi.attributes)for(var yo in zi.attributes)(Cr||(Cr={}))[yo]=zi.attributes[yo];zi.collapsed&&(!er||st(er.marker,zi)<0)&&(er=jr)}else jr.from>Ie&&Yt>jr.from&&(Yt=jr.from)}if(Or)for(var Fa=0;Fa<Or.length;Fa+=2)Or[Fa+1]==Yt&&(Ln+=" "+Or[Fa]);if(!er||er.from==Ie)for(var Zs=0;Zs<pr.length;++Zs)LA(g,0,pr[Zs]);if(er&&(er.from||0)==Ie){if(LA(g,(er.to==null?_e+1:er.to)-Ie,er.marker,er.from==null),er.to==null)return;er.to==Ie&&(er=!1)}}if(Ie>=_e)break;for(var wa=Math.min(_e,Yt);;){if(gt){var Ha=Ie+gt.length;if(!er){var Za=Ha>wa?gt.slice(0,wa-Ie):gt;g.addToken(g,Za,wt?wt+bn:bn,rr,Ie+Za.length==Yt?Ln:"",Xt,Cr)}if(Ha>=wa){gt=gt.slice(wa-Ie),Ie=wa;break}Ie=Ha,rr=""}gt=K.slice(Z,Z=E[Ue++]),wt=su(E[Ue++],g.cm.options)}}}function xp(A,g,E){this.line=g,this.rest=Vi(g),this.size=this.rest?Ye(ar(this.rest))-E+1:1,this.node=this.text=null,this.hidden=zr(A,g)}function UA(A,g,E){for(var S=[],K,Z=g;Z<E;Z=K){var Ae=new xp(A.doc,Kr(A.doc,Z),Z);K=Z+Ae.size,S.push(Ae)}return S}var lc=null;function gd(A){lc?lc.ops.push(A):A.ownsGroup=lc={ops:[A],delayedCallbacks:[]}}function Mp(A){var g=A.delayedCallbacks,E=0;do{for(;E<g.length;E++)g[E].call(null);for(var S=0;S<A.ops.length;S++){var K=A.ops[S];if(K.cursorActivityHandlers)for(;K.cursorActivityCalled<K.cursorActivityHandlers.length;)K.cursorActivityHandlers[K.cursorActivityCalled++].call(null,K.cm)}}while(E<g.length)}function Ch(A,g){var E=A.ownsGroup;if(E)try{Mp(E)}finally{lc=null,g(E)}}var bc=null;function ms(A,g){var E=qe(A,g);if(E.length){var S=Array.prototype.slice.call(arguments,2),K;lc?K=lc.delayedCallbacks:bc?K=bc:(K=bc=[],setTimeout(Df,0));for(var Z=function(_e){K.push(function(){return E[_e].apply(null,S)})},Ae=0;Ae<E.length;++Ae)Z(Ae)}}function Df(){var A=bc;bc=null;for(var g=0;g<A.length;++g)A[g]()}function Zh(A,g,E,S){for(var K=0;K<g.changes.length;K++){var Z=g.changes[K];Z=="text"?Jh(A,g):Z=="gutter"?bh(A,g,E,S):Z=="class"?_h(A,g):Z=="widget"&&ef(A,g,S)}g.changes=null}function Vd(A){return A.node==A.text&&(A.node=xe("div",null,null,"position: relative"),A.text.parentNode&&A.text.parentNode.replaceChild(A.node,A.text),A.node.appendChild(A.text),p&&v<8&&(A.node.style.zIndex=2)),A.node}function Xh(A,g){var E=g.bgClass?g.bgClass+" "+(g.line.bgClass||""):g.line.bgClass;if(E&&(E+=" CodeMirror-linebackground"),g.background)E?g.background.className=E:(g.background.parentNode.removeChild(g.background),g.background=null);else if(E){var S=Vd(g);g.background=S.insertBefore(xe("div",null,E),S.firstChild),A.display.input.setUneditable(g.background)}}function qc(A,g){var E=A.display.externalMeasured;return E&&E.line==g.line?(A.display.externalMeasured=null,g.measure=E.measure,E.built):vh(A,g)}function Jh(A,g){var E=g.text.className,S=qc(A,g);g.text==g.node&&(g.node=S.pre),g.text.parentNode.replaceChild(S.pre,g.text),g.text=S.pre,S.bgClass!=g.bgClass||S.textClass!=g.textClass?(g.bgClass=S.bgClass,g.textClass=S.textClass,_h(A,g)):E&&(g.text.className=E)}function _h(A,g){Xh(A,g),g.line.wrapClass?Vd(g).className=g.line.wrapClass:g.node!=g.text&&(g.node.className="");var E=g.textClass?g.textClass+" "+(g.line.textClass||""):g.line.textClass;g.text.className=E||""}function bh(A,g,E,S){if(g.gutter&&(g.node.removeChild(g.gutter),g.gutter=null),g.gutterBackground&&(g.node.removeChild(g.gutterBackground),g.gutterBackground=null),g.line.gutterClass){var K=Vd(g);g.gutterBackground=xe("div",null,"CodeMirror-gutter-background "+g.line.gutterClass,"left: "+(A.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px; width: "+S.gutterTotalWidth+"px"),A.display.input.setUneditable(g.gutterBackground),K.insertBefore(g.gutterBackground,g.text)}var Z=g.line.gutterMarkers;if(A.options.lineNumbers||Z){var Ae=Vd(g),_e=g.gutter=xe("div",null,"CodeMirror-gutter-wrapper","left: "+(A.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px");if(_e.setAttribute("aria-hidden","true"),A.display.input.setUneditable(_e),Ae.insertBefore(_e,g.text),g.line.gutterClass&&(_e.className+=" "+g.line.gutterClass),A.options.lineNumbers&&(!Z||!Z["CodeMirror-linenumbers"])&&(g.lineNumber=_e.appendChild(xe("div",Zn(A.options,E),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+S.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+A.display.lineNumInnerWidth+"px"))),Z)for(var Ie=0;Ie<A.display.gutterSpecs.length;++Ie){var Ue=A.display.gutterSpecs[Ie].className,gt=Z.hasOwnProperty(Ue)&&Z[Ue];gt&&_e.appendChild(xe("div",[gt],"CodeMirror-gutter-elt","left: "+S.gutterLeft[Ue]+"px; width: "+S.gutterWidth[Ue]+"px"))}}}function ef(A,g,E){g.alignable&&(g.alignable=null);for(var S=Ee("CodeMirror-linewidget"),K=g.node.firstChild,Z=void 0;K;K=Z)Z=K.nextSibling,S.test(K.className)&&g.node.removeChild(K);$d(A,g,E)}function yd(A,g,E,S){var K=qc(A,g);return g.text=g.node=K.pre,K.bgClass&&(g.bgClass=K.bgClass),K.textClass&&(g.textClass=K.textClass),_h(A,g),bh(A,g,E,S),$d(A,g,S),g.node}function $d(A,g,E){if(au(A,g.line,g,E,!0),g.rest)for(var S=0;S<g.rest.length;S++)au(A,g.rest[S],g,E,!1)}function au(A,g,E,S,K){if(g.widgets)for(var Z=Vd(E),Ae=0,_e=g.widgets;Ae<_e.length;++Ae){var Ie=_e[Ae],Ue=xe("div",[Ie.node],"CodeMirror-linewidget"+(Ie.className?" "+Ie.className:""));Ie.handleMouseEvents||Ue.setAttribute("cm-ignore-events","true"),xc(Ie,Ue,E,S),A.display.input.setUneditable(Ue),K&&Ie.above?Z.insertBefore(Ue,E.gutter||E.text):Z.appendChild(Ue),ms(Ie,"redraw")}}function xc(A,g,E,S){if(A.noHScroll){(E.alignable||(E.alignable=[])).push(g);var K=S.wrapperWidth;g.style.left=S.fixedPos+"px",A.coverGutter||(K-=S.gutterTotalWidth,g.style.paddingLeft=S.gutterTotalWidth+"px"),g.style.width=K+"px"}A.coverGutter&&(g.style.zIndex=5,g.style.position="relative",A.noHScroll||(g.style.marginLeft=-S.gutterTotalWidth+"px"))}function Qu(A){if(A.height!=null)return A.height;var g=A.doc.cm;if(!g)return 0;if(!Xe(document.body,A.node)){var E="position: relative;";A.coverGutter&&(E+="margin-left: -"+g.display.gutters.offsetWidth+"px;"),A.noHScroll&&(E+="width: "+g.display.wrapper.clientWidth+"px;"),De(g.display.measure,xe("div",[A.node],null,E))}return A.height=A.node.parentNode.offsetHeight}function Eu(A,g){for(var E=Sr(g);E!=A.wrapper;E=E.parentNode)if(!E||E.nodeType==1&&E.getAttribute("cm-ignore-events")=="true"||E.parentNode==A.sizer&&E!=A.mover)return!0}function vd(A){return A.lineSpace.offsetTop}function tf(A){return A.mover.offsetHeight-A.lineSpace.offsetHeight}function nf(A){if(A.cachedPaddingH)return A.cachedPaddingH;var g=De(A.measure,xe("pre","x","CodeMirror-line-like")),E=window.getComputedStyle?window.getComputedStyle(g):g.currentStyle,S={left:parseInt(E.paddingLeft),right:parseInt(E.paddingRight)};return!isNaN(S.left)&&!isNaN(S.right)&&(A.cachedPaddingH=S),S}function Yu(A){return Ct-A.display.nativeBarWidth}function uc(A){return A.display.scroller.clientWidth-Yu(A)-A.display.barWidth}function Ac(A){return A.display.scroller.clientHeight-Yu(A)-A.display.barHeight}function Cd(A,g,E){var S=A.options.lineWrapping,K=S&&uc(A);if(!g.measure.heights||S&&g.measure.width!=K){var Z=g.measure.heights=[];if(S){g.measure.width=K;for(var Ae=g.text.firstChild.getClientRects(),_e=0;_e<Ae.length-1;_e++){var Ie=Ae[_e],Ue=Ae[_e+1];Math.abs(Ie.bottom-Ue.bottom)>2&&Z.push((Ie.bottom+Ue.top)/2-E.top)}}Z.push(E.bottom-E.top)}}function xh(A,g,E){if(A.line==g)return{map:A.measure.map,cache:A.measure.cache};if(A.rest){for(var S=0;S<A.rest.length;S++)if(A.rest[S]==g)return{map:A.measure.maps[S],cache:A.measure.caches[S]};for(var K=0;K<A.rest.length;K++)if(Ye(A.rest[K])>E)return{map:A.measure.maps[K],cache:A.measure.caches[K],before:!0}}}function cc(A,g){g=Br(g);var E=Ye(g),S=A.display.externalMeasured=new xp(A.doc,g,E);S.lineN=E;var K=S.built=vh(A,S);return S.text=K.pre,De(A.display.lineMeasure,K.pre),S}function _d(A,g,E,S){return Cl(A,ll(A,g),E,S)}function bd(A,g){if(g>=A.display.viewFrom&&g<A.display.viewTo)return A.display.view[CA(A,g)];var E=A.display.externalMeasured;if(E&&g>=E.lineN&&g<E.lineN+E.size)return E}function ll(A,g){var E=Ye(g),S=bd(A,E);S&&!S.text?S=null:S&&S.changes&&(Zh(A,S,E,vA(A)),A.curOp.forceUpdate=!0),S||(S=cc(A,g));var K=xh(S,g,E);return{line:g,view:S,rect:null,map:K.map,cache:K.cache,before:K.before,hasHeights:!1}}function Cl(A,g,E,S,K){g.before&&(E=-1);var Z=E+(S||""),Ae;return g.cache.hasOwnProperty(Z)?Ae=g.cache[Z]:(g.rect||(g.rect=g.view.text.getBoundingClientRect()),g.hasHeights||(Cd(A,g.view,g.rect),g.hasHeights=!0),Ae=xd(A,g,E,S),Ae.bogus||(g.cache[Z]=Ae)),{left:Ae.left,right:Ae.right,top:K?Ae.rtop:Ae.top,bottom:K?Ae.rbottom:Ae.bottom}}var ko={left:0,right:0,top:0,bottom:0};function zA(A,g,E){for(var S,K,Z,Ae,_e,Ie,Ue=0;Ue<A.length;Ue+=3)if(_e=A[Ue],Ie=A[Ue+1],g<_e?(K=0,Z=1,Ae="left"):g<Ie?(K=g-_e,Z=K+1):(Ue==A.length-3||g==Ie&&A[Ue+3]>g)&&(Z=Ie-_e,K=Z-1,g>=Ie&&(Ae="right")),K!=null){if(S=A[Ue+2],_e==Ie&&E==(S.insertLeft?"left":"right")&&(Ae=E),E=="left"&&K==0)for(;Ue&&A[Ue-2]==A[Ue-3]&&A[Ue-1].insertLeft;)S=A[(Ue-=3)+2],Ae="left";if(E=="right"&&K==Ie-_e)for(;Ue<A.length-3&&A[Ue+3]==A[Ue+4]&&!A[Ue+5].insertLeft;)S=A[(Ue+=3)+2],Ae="right";break}return{node:S,start:K,end:Z,collapse:Ae,coverStart:_e,coverEnd:Ie}}function Ff(A,g){var E=ko;if(g=="left")for(var S=0;S<A.length&&(E=A[S]).left==E.right;S++);else for(var K=A.length-1;K>=0&&(E=A[K]).left==E.right;K--);return E}function xd(A,g,E,S){var K=zA(g.map,E,S),Z=K.node,Ae=K.start,_e=K.end,Ie=K.collapse,Ue;if(Z.nodeType==3){for(var gt=0;gt<4;gt++){for(;Ae&&rt(g.line.text.charAt(K.coverStart+Ae));)--Ae;for(;K.coverStart+_e<K.coverEnd&&rt(g.line.text.charAt(K.coverStart+_e));)++_e;if(p&&v<9&&Ae==0&&_e==K.coverEnd-K.coverStart?Ue=Z.parentNode.getBoundingClientRect():Ue=Ff(Ze(Z,Ae,_e).getClientRects(),S),Ue.left||Ue.right||Ae==0)break;_e=Ae,Ae=Ae-1,Ie="right"}p&&v<11&&(Ue=qu(A.display.measure,Ue))}else{Ae>0&&(Ie=S="right");var wt;A.options.lineWrapping&&(wt=Z.getClientRects()).length>1?Ue=wt[S=="right"?wt.length-1:0]:Ue=Z.getBoundingClientRect()}if(p&&v<9&&!Ae&&(!Ue||!Ue.left&&!Ue.right)){var Xt=Z.parentNode.getClientRects()[0];Xt?Ue={left:Xt.left,right:Xt.left+Wl(A.display),top:Xt.top,bottom:Xt.bottom}:Ue=ko}for(var Yt=Ue.top-g.rect.top,bn=Ue.bottom-g.rect.top,Ln=(Yt+bn)/2,rr=g.view.measure.heights,er=0;er<rr.length-1&&!(Ln<rr[er]);er++);var Cr=er?rr[er-1]:0,pr=rr[er],Or={left:(Ie=="right"?Ue.right:Ue.left)-g.rect.left,right:(Ie=="left"?Ue.left:Ue.right)-g.rect.left,top:Cr,bottom:pr};return!Ue.left&&!Ue.right&&(Or.bogus=!0),A.options.singleCursorHeightPerLine||(Or.rtop=Yt,Or.rbottom=bn),Or}function qu(A,g){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!wi(A))return g;var E=screen.logicalXDPI/screen.deviceXDPI,S=screen.logicalYDPI/screen.deviceYDPI;return{left:g.left*E,right:g.right*E,top:g.top*S,bottom:g.bottom*S}}function Mh(A){if(A.measure&&(A.measure.cache={},A.measure.heights=null,A.rest))for(var g=0;g<A.rest.length;g++)A.measure.caches[g]={}}function Lf(A){A.display.externalMeasure=null,Me(A.display.lineMeasure);for(var g=0;g<A.display.view.length;g++)Mh(A.display.view[g])}function Md(A){Lf(A),A.display.cachedCharWidth=A.display.cachedTextHeight=A.display.cachedPaddingH=null,A.options.lineWrapping||(A.display.maxLineChanged=!0),A.display.lineNumChars=null}function Uf(A){return T&&oe?-(A.body.getBoundingClientRect().left-parseInt(getComputedStyle(A.body).marginLeft)):A.defaultView.pageXOffset||(A.documentElement||A.body).scrollLeft}function zf(A){return T&&oe?-(A.body.getBoundingClientRect().top-parseInt(getComputedStyle(A.body).marginTop)):A.defaultView.pageYOffset||(A.documentElement||A.body).scrollTop}function Hd(A){var g=Br(A),E=g.widgets,S=0;if(E)for(var K=0;K<E.length;++K)E[K].above&&(S+=Qu(E[K]));return S}function gA(A,g,E,S,K){if(!K){var Z=Hd(g);E.top+=Z,E.bottom+=Z}if(S=="line")return E;S||(S="local");var Ae=Gi(g);if(S=="local"?Ae+=vd(A.display):Ae-=A.display.viewOffset,S=="page"||S=="window"){var _e=A.display.lineSpace.getBoundingClientRect();Ae+=_e.top+(S=="window"?0:zf(_t(A)));var Ie=_e.left+(S=="window"?0:Uf(_t(A)));E.left+=Ie,E.right+=Ie}return E.top+=Ae,E.bottom+=Ae,E}function en(A,g,E){if(E=="div")return g;var S=g.left,K=g.top;if(E=="page")S-=Uf(_t(A)),K-=zf(_t(A));else if(E=="local"||!E){var Z=A.display.sizer.getBoundingClientRect();S+=Z.left,K+=Z.top}var Ae=A.display.lineSpace.getBoundingClientRect();return{left:S-Ae.left,top:K-Ae.top}}function Tn(A,g,E,S,K){return S||(S=Kr(A.doc,g.line)),gA(A,S,_d(A,S,g.ch,K),E)}function un(A,g,E,S,K,Z){S=S||Kr(A.doc,g.line),K||(K=ll(A,S));function Ae(bn,Ln){var rr=Cl(A,K,bn,Ln?"right":"left",Z);return Ln?rr.left=rr.right:rr.right=rr.left,gA(A,S,rr,E)}var _e=Ce(S,A.doc.direction),Ie=g.ch,Ue=g.sticky;if(Ie>=S.text.length?(Ie=S.text.length,Ue="before"):Ie<=0&&(Ie=0,Ue="after"),!_e)return Ae(Ue=="before"?Ie-1:Ie,Ue=="before");function gt(bn,Ln,rr){var er=_e[Ln],Cr=er.level==1;return Ae(rr?bn-1:bn,Cr!=rr)}var wt=$e(_e,Ie,Ue),Xt=nr,Yt=gt(Ie,wt,Ue=="before");return Xt!=null&&(Yt.other=gt(Ie,Xt,Ue!="before")),Yt}function Tr(A,g){var E=0;g=ei(A.doc,g),A.options.lineWrapping||(E=Wl(A.display)*g.ch);var S=Kr(A.doc,g.line),K=Gi(S)+vd(A.display);return{left:E,right:E,top:K,bottom:K+S.height}}function ci(A,g,E,S,K){var Z=dn(A,g,E);return Z.xRel=K,S&&(Z.outside=S),Z}function To(A,g,E){var S=A.doc;if(E+=A.display.viewOffset,E<0)return ci(S.first,0,null,-1,-1);var K=xt(S,E),Z=S.first+S.size-1;if(K>Z)return ci(S.first+S.size-1,Kr(S,Z).text.length,null,1,1);g<0&&(g=0);for(var Ae=Kr(S,K);;){var _e=rf(A,Ae,K,g,E),Ie=Zr(Ae,_e.ch+(_e.xRel>0||_e.outside>0?1:0));if(!Ie)return _e;var Ue=Ie.find(1);if(Ue.line==K)return Ue;Ae=Kr(S,K=Ue.line)}}function ya(A,g,E,S){S-=Hd(g);var K=g.text.length,Z=Ht(function(Ae){return Cl(A,E,Ae-1).bottom<=S},K,0);return K=Ht(function(Ae){return Cl(A,E,Ae).top>S},Z,K),{begin:Z,end:K}}function ts(A,g,E,S){E||(E=ll(A,g));var K=gA(A,g,Cl(A,E,S),"line").top;return ya(A,g,E,K)}function Vu(A,g,E,S){return A.bottom<=E?!1:A.top>E?!0:(S?A.left:A.right)>g}function rf(A,g,E,S,K){K-=Gi(g);var Z=ll(A,g),Ae=Hd(g),_e=0,Ie=g.text.length,Ue=!0,gt=Ce(g,A.doc.direction);if(gt){var wt=(A.options.lineWrapping?$u:lu)(A,g,E,Z,gt,S,K);Ue=wt.level!=1,_e=Ue?wt.from:wt.to-1,Ie=Ue?wt.to:wt.from-1}var Xt=null,Yt=null,bn=Ht(function(oi){var jr=Cl(A,Z,oi);return jr.top+=Ae,jr.bottom+=Ae,Vu(jr,S,K,!1)?(jr.top<=K&&jr.left<=S&&(Xt=oi,Yt=jr),!0):!1},_e,Ie),Ln,rr,er=!1;if(Yt){var Cr=S-Yt.left<Yt.right-S,pr=Cr==Ue;bn=Xt+(pr?0:1),rr=pr?"after":"before",Ln=Cr?Yt.left:Yt.right}else{!Ue&&(bn==Ie||bn==_e)&&bn++,rr=bn==0?"after":bn==g.text.length?"before":Cl(A,Z,bn-(Ue?1:0)).bottom+Ae<=K==Ue?"after":"before";var Or=un(A,dn(E,bn,rr),"line",g,Z);Ln=Or.left,er=K<Or.top?-1:K>=Or.bottom?1:0}return bn=St(g.text,bn,1),ci(E,bn,rr,er,S-Ln)}function lu(A,g,E,S,K,Z,Ae){var _e=Ht(function(wt){var Xt=K[wt],Yt=Xt.level!=1;return Vu(un(A,dn(E,Yt?Xt.to:Xt.from,Yt?"before":"after"),"line",g,S),Z,Ae,!0)},0,K.length-1),Ie=K[_e];if(_e>0){var Ue=Ie.level!=1,gt=un(A,dn(E,Ue?Ie.from:Ie.to,Ue?"after":"before"),"line",g,S);Vu(gt,Z,Ae,!0)&&gt.top>Ae&&(Ie=K[_e-1])}return Ie}function $u(A,g,E,S,K,Z,Ae){var _e=ya(A,g,S,Ae),Ie=_e.begin,Ue=_e.end;/\s/.test(g.text.charAt(Ue-1))&&Ue--;for(var gt=null,wt=null,Xt=0;Xt<K.length;Xt++){var Yt=K[Xt];if(!(Yt.from>=Ue||Yt.to<=Ie)){var bn=Yt.level!=1,Ln=Cl(A,S,bn?Math.min(Ue,Yt.to)-1:Math.max(Ie,Yt.from)).right,rr=Ln<Z?Z-Ln+1e9:Ln-Z;(!gt||wt>rr)&&(gt=Yt,wt=rr)}}return gt||(gt=K[K.length-1]),gt.from<Ie&&(gt={from:Ie,to:gt.to,level:gt.level}),gt.to>Ue&&(gt={from:gt.from,to:Ue,level:gt.level}),gt}var yA;function Nl(A){if(A.cachedTextHeight!=null)return A.cachedTextHeight;if(yA==null){yA=xe("pre",null,"CodeMirror-line-like");for(var g=0;g<49;++g)yA.appendChild(document.createTextNode("x")),yA.appendChild(xe("br"));yA.appendChild(document.createTextNode("x"))}De(A.measure,yA);var E=yA.offsetHeight/50;return E>3&&(A.cachedTextHeight=E),Me(A.measure),E||1}function Wl(A){if(A.cachedCharWidth!=null)return A.cachedCharWidth;var g=xe("span","xxxxxxxxxx"),E=xe("pre",[g],"CodeMirror-line-like");De(A.measure,E);var S=g.getBoundingClientRect(),K=(S.right-S.left)/10;return K>2&&(A.cachedCharWidth=K),K||10}function vA(A){for(var g=A.display,E={},S={},K=g.gutters.clientLeft,Z=g.gutters.firstChild,Ae=0;Z;Z=Z.nextSibling,++Ae){var _e=A.display.gutterSpecs[Ae].className;E[_e]=Z.offsetLeft+Z.clientLeft+K,S[_e]=Z.clientWidth}return{fixedPos:Po(g),gutterTotalWidth:g.gutters.offsetWidth,gutterLeft:E,gutterWidth:S,wrapperWidth:g.wrapper.clientWidth}}function Po(A){return A.scroller.getBoundingClientRect().left-A.sizer.getBoundingClientRect().left}function Mc(A){var g=Nl(A.display),E=A.options.lineWrapping,S=E&&Math.max(5,A.display.scroller.clientWidth/Wl(A.display)-3);return function(K){if(zr(A.doc,K))return 0;var Z=0;if(K.widgets)for(var Ae=0;Ae<K.widgets.length;Ae++)K.widgets[Ae].height&&(Z+=K.widgets[Ae].height);return E?Z+(Math.ceil(K.text.length/S)||1)*g:Z+g}}function lo(A){var g=A.doc,E=Mc(A);g.iter(function(S){var K=E(S);K!=S.height&&Gs(S,K)})}function Bu(A,g,E,S){var K=A.display;if(!E&&Sr(g).getAttribute("cm-not-content")=="true")return null;var Z,Ae,_e=K.lineSpace.getBoundingClientRect();try{Z=g.clientX-_e.left,Ae=g.clientY-_e.top}catch{return null}var Ie=To(A,Z,Ae),Ue;if(S&&Ie.xRel>0&&(Ue=Kr(A.doc,Ie.line).text).length==Ie.ch){var gt=Pe(Ue,Ue.length,A.options.tabSize)-Ue.length;Ie=dn(Ie.line,Math.max(0,Math.round((Z-nf(A.display).left)/Wl(A.display))-gt))}return Ie}function CA(A,g){if(g>=A.display.viewTo||(g-=A.display.viewFrom,g<0))return null;for(var E=A.display.view,S=0;S<E.length;S++)if(g-=E[S].size,g<0)return S}function Tl(A,g,E,S){g==null&&(g=A.doc.first),E==null&&(E=A.doc.first+A.doc.size),S||(S=0);var K=A.display;if(S&&E<K.viewTo&&(K.updateLineNumbers==null||K.updateLineNumbers>g)&&(K.updateLineNumbers=g),A.curOp.viewChanged=!0,g>=K.viewTo)es&&Wo(A.doc,g)<K.viewTo&&_A(A);else if(E<=K.viewFrom)es&&si(A.doc,E+S)>K.viewFrom?_A(A):(K.viewFrom+=S,K.viewTo+=S);else if(g<=K.viewFrom&&E>=K.viewTo)_A(A);else if(g<=K.viewFrom){var Z=Zu(A,E,E+S,1);Z?(K.view=K.view.slice(Z.index),K.viewFrom=Z.lineN,K.viewTo+=S):_A(A)}else if(E>=K.viewTo){var Ae=Zu(A,g,g,-1);Ae?(K.view=K.view.slice(0,Ae.index),K.viewTo=Ae.lineN):_A(A)}else{var _e=Zu(A,g,g,-1),Ie=Zu(A,E,E+S,1);_e&&Ie?(K.view=K.view.slice(0,_e.index).concat(UA(A,_e.lineN,Ie.lineN)).concat(K.view.slice(Ie.index)),K.viewTo+=S):_A(A)}var Ue=K.externalMeasured;Ue&&(E<Ue.lineN?Ue.lineN+=S:g<Ue.lineN+Ue.size&&(K.externalMeasured=null))}function Hu(A,g,E){A.curOp.viewChanged=!0;var S=A.display,K=A.display.externalMeasured;if(K&&g>=K.lineN&&g<K.lineN+K.size&&(S.externalMeasured=null),!(g<S.viewFrom||g>=S.viewTo)){var Z=S.view[CA(A,g)];if(Z.node!=null){var Ae=Z.changes||(Z.changes=[]);it(Ae,E)==-1&&Ae.push(E)}}}function _A(A){A.display.viewFrom=A.display.viewTo=A.doc.first,A.display.view=[],A.display.viewOffset=0}function Zu(A,g,E,S){var K=CA(A,g),Z,Ae=A.display.view;if(!es||E==A.doc.first+A.doc.size)return{index:K,lineN:E};for(var _e=A.display.viewFrom,Ie=0;Ie<K;Ie++)_e+=Ae[Ie].size;if(_e!=g){if(S>0){if(K==Ae.length-1)return null;Z=_e+Ae[K].size-g,K++}else Z=_e-g;g+=Z,E+=Z}for(;Wo(A.doc,E)!=E;){if(K==(S<0?0:Ae.length-1))return null;E+=S*Ae[K-(S<0?1:0)].size,K+=S}return{index:K,lineN:E}}function Zd(A,g,E){var S=A.display,K=S.view;K.length==0||g>=S.viewTo||E<=S.viewFrom?(S.view=UA(A,g,E),S.viewFrom=g):(S.viewFrom>g?S.view=UA(A,g,S.viewFrom).concat(S.view):S.viewFrom<g&&(S.view=S.view.slice(CA(A,g))),S.viewFrom=g,S.viewTo<E?S.view=S.view.concat(UA(A,S.viewTo,E)):S.viewTo>E&&(S.view=S.view.slice(0,CA(A,E)))),S.viewTo=E}function of(A){for(var g=A.display.view,E=0,S=0;S<g.length;S++){var K=g[S];!K.hidden&&(!K.node||K.changes)&&++E}return E}function Qa(A){A.display.input.showSelection(A.display.input.prepareSelection())}function wc(A,g){g===void 0&&(g=!0);var E=A.doc,S={},K=S.cursors=document.createDocumentFragment(),Z=S.selection=document.createDocumentFragment(),Ae=A.options.$customCursor;Ae&&(g=!0);for(var _e=0;_e<E.sel.ranges.length;_e++)if(!(!g&&_e==E.sel.primIndex)){var Ie=E.sel.ranges[_e];if(!(Ie.from().line>=A.display.viewTo||Ie.to().line<A.display.viewFrom)){var Ue=Ie.empty();if(Ae){var gt=Ae(A,Ie);gt&&Sc(A,gt,K)}else(Ue||A.options.showCursorWhenSelecting)&&Sc(A,Ie.head,K);Ue||sf(A,Ie,Z)}}return S}function Sc(A,g,E){var S=un(A,g,"div",null,null,!A.options.singleCursorHeightPerLine),K=E.appendChild(xe("div","","CodeMirror-cursor"));if(K.style.left=S.left+"px",K.style.top=S.top+"px",K.style.height=Math.max(0,S.bottom-S.top)*A.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(A.getWrapperElement().className)){var Z=Tn(A,g,"div",null,null),Ae=Z.right-Z.left;K.style.width=(Ae>0?Ae:A.defaultCharWidth())+"px"}if(S.other){var _e=E.appendChild(xe("div","","CodeMirror-cursor CodeMirror-secondarycursor"));_e.style.display="",_e.style.left=S.other.left+"px",_e.style.top=S.other.top+"px",_e.style.height=(S.other.bottom-S.other.top)*.85+"px"}}function Ec(A,g){return A.top-g.top||A.left-g.left}function sf(A,g,E){var S=A.display,K=A.doc,Z=document.createDocumentFragment(),Ae=nf(A.display),_e=Ae.left,Ie=Math.max(S.sizerWidth,uc(A)-S.sizer.offsetLeft)-Ae.right,Ue=K.direction=="ltr";function gt(pr,Or,oi,jr){Or<0&&(Or=0),Or=Math.round(Or),jr=Math.round(jr),Z.appendChild(xe("div",null,"CodeMirror-selected","position: absolute; left: "+pr+`px;
                             top: `+Or+"px; width: "+(oi??Ie-pr)+`px;
                             height: `+(jr-Or)+"px"))}function wt(pr,Or,oi){var jr=Kr(K,pr),zi=jr.text.length,yo,Fa;function Zs(Za,Ru){return Tn(A,dn(pr,Za),"div",jr,Ru)}function wa(Za,Ru,hl){var Sa=ts(A,jr,null,Za),is=Ru=="ltr"==(hl=="after")?"left":"right",gi=hl=="after"?Sa.begin:Sa.end-(/\s/.test(jr.text.charAt(Sa.end-1))?2:1);return Zs(gi,is)[is]}var Ha=Ce(jr,K.direction);return sn(Ha,Or||0,oi??zi,function(Za,Ru,hl,Sa){var is=hl=="ltr",gi=Zs(Za,is?"left":"right"),os=Zs(Ru-1,is?"right":"left"),Xs=Or==null&&Za==0,da=oi==null&&Ru==zi,Is=Sa==0,eu=!Ha||Sa==Ha.length-1;if(os.top-gi.top<=3){var Bo=(Ue?Xs:da)&&Is,oh=(Ue?da:Xs)&&eu,yu=Bo?_e:(is?gi:os).left,lA=oh?Ie:(is?os:gi).right;gt(yu,gi.top,lA-yu,gi.bottom)}else{var od,Xa,La,Th;is?(od=Ue&&Xs&&Is?_e:gi.left,Xa=Ue?Ie:wa(Za,hl,"before"),La=Ue?_e:wa(Ru,hl,"after"),Th=Ue&&da&&eu?Ie:os.right):(od=Ue?wa(Za,hl,"before"):_e,Xa=!Ue&&Xs&&Is?Ie:gi.right,La=!Ue&&da&&eu?_e:os.left,Th=Ue?wa(Ru,hl,"after"):Ie),gt(od,gi.top,Xa-od,gi.bottom),gi.bottom<os.top&&gt(_e,gi.bottom,null,os.top),gt(La,os.top,Th-La,os.bottom)}(!yo||Ec(gi,yo)<0)&&(yo=gi),Ec(os,yo)<0&&(yo=os),(!Fa||Ec(gi,Fa)<0)&&(Fa=gi),Ec(os,Fa)<0&&(Fa=os)}),{start:yo,end:Fa}}var Xt=g.from(),Yt=g.to();if(Xt.line==Yt.line)wt(Xt.line,Xt.ch,Yt.ch);else{var bn=Kr(K,Xt.line),Ln=Kr(K,Yt.line),rr=Br(bn)==Br(Ln),er=wt(Xt.line,Xt.ch,rr?bn.text.length+1:null).end,Cr=wt(Yt.line,rr?0:null,Yt.ch).start;rr&&(er.top<Cr.top-2?(gt(er.right,er.top,null,er.bottom),gt(_e,Cr.top,Cr.left,Cr.bottom)):gt(er.right,er.top,Cr.left-er.right,er.bottom)),er.bottom<Cr.top&&gt(_e,er.bottom,null,Cr.top)}E.appendChild(Z)}function bA(A){if(A.state.focused){var g=A.display;clearInterval(g.blinker);var E=!0;g.cursorDiv.style.visibility="",A.options.cursorBlinkRate>0?g.blinker=setInterval(function(){A.hasFocus()||us(A),g.cursorDiv.style.visibility=(E=!E)?"":"hidden"},A.options.cursorBlinkRate):A.options.cursorBlinkRate<0&&(g.cursorDiv.style.visibility="hidden")}}function jA(A){A.hasFocus()||(A.display.input.focus(),A.state.focused||wd(A))}function NA(A){A.state.delayingBlurEvent=!0,setTimeout(function(){A.state.delayingBlurEvent&&(A.state.delayingBlurEvent=!1,A.state.focused&&us(A))},100)}function wd(A,g){A.state.delayingBlurEvent&&!A.state.draggingText&&(A.state.delayingBlurEvent=!1),A.options.readOnly!="nocursor"&&(A.state.focused||(ut(A,"focus",A,g),A.state.focused=!0,Se(A.display.wrapper,"CodeMirror-focused"),!A.curOp&&A.display.selForContextMenu!=A.doc.sel&&(A.display.input.reset(),x&&setTimeout(function(){return A.display.input.reset(!0)},20)),A.display.input.receivedFocus()),bA(A))}function us(A,g){A.state.delayingBlurEvent||(A.state.focused&&(ut(A,"blur",A,g),A.state.focused=!1,me(A.display.wrapper,"CodeMirror-focused")),clearInterval(A.display.blinker),setTimeout(function(){A.state.focused||(A.display.shift=!1)},150))}function Vc(A){for(var g=A.display,E=g.lineDiv.offsetTop,S=Math.max(0,g.scroller.getBoundingClientRect().top),K=g.lineDiv.getBoundingClientRect().top,Z=0,Ae=0;Ae<g.view.length;Ae++){var _e=g.view[Ae],Ie=A.options.lineWrapping,Ue=void 0,gt=0;if(!_e.hidden){if(K+=_e.line.height,p&&v<8){var wt=_e.node.offsetTop+_e.node.offsetHeight;Ue=wt-E,E=wt}else{var Xt=_e.node.getBoundingClientRect();Ue=Xt.bottom-Xt.top,!Ie&&_e.text.firstChild&&(gt=_e.text.firstChild.getBoundingClientRect().right-Xt.left-1)}var Yt=_e.line.height-Ue;if((Yt>.005||Yt<-.005)&&(K<S&&(Z-=Yt),Gs(_e.line,Ue),Bc(_e.line),_e.rest))for(var bn=0;bn<_e.rest.length;bn++)Bc(_e.rest[bn]);if(gt>A.display.sizerWidth){var Ln=Math.ceil(gt/Wl(A.display));Ln>A.display.maxLineLength&&(A.display.maxLineLength=Ln,A.display.maxLine=_e.line,A.display.maxLineChanged=!0)}}}Math.abs(Z)>2&&(g.scroller.scrollTop+=Z)}function Bc(A){if(A.widgets)for(var g=0;g<A.widgets.length;++g){var E=A.widgets[g],S=E.node.parentNode;S&&(E.height=S.offsetHeight)}}function Xu(A,g,E){var S=E&&E.top!=null?Math.max(0,E.top):A.scroller.scrollTop;S=Math.floor(S-vd(A));var K=E&&E.bottom!=null?E.bottom:S+A.wrapper.clientHeight,Z=xt(g,S),Ae=xt(g,K);if(E&&E.ensure){var _e=E.ensure.from.line,Ie=E.ensure.to.line;_e<Z?(Z=_e,Ae=xt(g,Gi(Kr(g,_e))+A.wrapper.clientHeight)):Math.min(Ie,g.lastLine())>=Ae&&(Z=xt(g,Gi(Kr(g,Ie))-A.wrapper.clientHeight),Ae=Ie)}return{from:Z,to:Math.max(Ae,Z+1)}}function $c(A,g){if(!dt(A,"scrollCursorIntoView")){var E=A.display,S=E.sizer.getBoundingClientRect(),K=null,Z=E.wrapper.ownerDocument;if(g.top+S.top<0?K=!0:g.bottom+S.top>(Z.defaultView.innerHeight||Z.documentElement.clientHeight)&&(K=!1),K!=null&&!q){var Ae=xe("div","",null,`position: absolute;
                         top: `+(g.top-E.viewOffset-vd(A.display))+`px;
                         height: `+(g.bottom-g.top+Yu(A)+E.barHeight)+`px;
                         left: `+g.left+"px; width: "+Math.max(2,g.right-g.left)+"px;");A.display.lineSpace.appendChild(Ae),Ae.scrollIntoView(K),A.display.lineSpace.removeChild(Ae)}}}function Xd(A,g,E,S){S==null&&(S=0);var K;!A.options.lineWrapping&&g==E&&(E=g.sticky=="before"?dn(g.line,g.ch+1,"before"):g,g=g.ch?dn(g.line,g.sticky=="before"?g.ch-1:g.ch,"after"):g);for(var Z=0;Z<5;Z++){var Ae=!1,_e=un(A,g),Ie=!E||E==g?_e:un(A,E);K={left:Math.min(_e.left,Ie.left),top:Math.min(_e.top,Ie.top)-S,right:Math.max(_e.left,Ie.left),bottom:Math.max(_e.bottom,Ie.bottom)+S};var Ue=Ic(A,K),gt=A.doc.scrollTop,wt=A.doc.scrollLeft;if(Ue.scrollTop!=null&&(ul(A,Ue.scrollTop),Math.abs(A.doc.scrollTop-gt)>1&&(Ae=!0)),Ue.scrollLeft!=null&&(Gl(A,Ue.scrollLeft),Math.abs(A.doc.scrollLeft-wt)>1&&(Ae=!0)),!Ae)break}return K}function Oc(A,g){var E=Ic(A,g);E.scrollTop!=null&&ul(A,E.scrollTop),E.scrollLeft!=null&&Gl(A,E.scrollLeft)}function Ic(A,g){var E=A.display,S=Nl(A.display);g.top<0&&(g.top=0);var K=A.curOp&&A.curOp.scrollTop!=null?A.curOp.scrollTop:E.scroller.scrollTop,Z=Ac(A),Ae={};g.bottom-g.top>Z&&(g.bottom=g.top+Z);var _e=A.doc.height+tf(E),Ie=g.top<S,Ue=g.bottom>_e-S;if(g.top<K)Ae.scrollTop=Ie?0:g.top;else if(g.bottom>K+Z){var gt=Math.min(g.top,(Ue?_e:g.bottom)-Z);gt!=K&&(Ae.scrollTop=gt)}var wt=A.options.fixedGutter?0:E.gutters.offsetWidth,Xt=A.curOp&&A.curOp.scrollLeft!=null?A.curOp.scrollLeft:E.scroller.scrollLeft-wt,Yt=uc(A)-E.gutters.offsetWidth,bn=g.right-g.left>Yt;return bn&&(g.right=g.left+Yt),g.left<10?Ae.scrollLeft=0:g.left<Xt?Ae.scrollLeft=Math.max(0,g.left+wt-(bn?0:10)):g.right>Yt+Xt-3&&(Ae.scrollLeft=g.right+(bn?0:10)-Yt),Ae}function Ju(A,g){g!=null&&(js(A),A.curOp.scrollTop=(A.curOp.scrollTop==null?A.doc.scrollTop:A.curOp.scrollTop)+g)}function As(A){js(A);var g=A.getCursor();A.curOp.scrollToPos={from:g,to:g,margin:A.options.cursorScrollMargin}}function Ya(A,g,E){(g!=null||E!=null)&&js(A),g!=null&&(A.curOp.scrollLeft=g),E!=null&&(A.curOp.scrollTop=E)}function wp(A,g){js(A),A.curOp.scrollToPos=g}function js(A){var g=A.curOp.scrollToPos;if(g){A.curOp.scrollToPos=null;var E=Tr(A,g.from),S=Tr(A,g.to);xA(A,E,S,g.margin)}}function xA(A,g,E,S){var K=Ic(A,{left:Math.min(g.left,E.left),top:Math.min(g.top,E.top)-S,right:Math.max(g.right,E.right),bottom:Math.max(g.bottom,E.bottom)+S});Ya(A,K.scrollLeft,K.scrollTop)}function ul(A,g){Math.abs(A.doc.scrollTop-g)<2||(i||Ca(A,{top:g}),Hc(A,g,!0),i&&Ca(A),Ql(A,100))}function Hc(A,g,E){g=Math.max(0,Math.min(A.display.scroller.scrollHeight-A.display.scroller.clientHeight,g)),!(A.display.scroller.scrollTop==g&&!E)&&(A.doc.scrollTop=g,A.display.scrollbars.setScrollTop(g),A.display.scroller.scrollTop!=g&&(A.display.scroller.scrollTop=g))}function Gl(A,g,E,S){g=Math.max(0,Math.min(g,A.display.scroller.scrollWidth-A.display.scroller.clientWidth)),!((E?g==A.doc.scrollLeft:Math.abs(A.doc.scrollLeft-g)<2)&&!S)&&(A.doc.scrollLeft=g,af(A),A.display.scroller.scrollLeft!=g&&(A.display.scroller.scrollLeft=g),A.display.scrollbars.setScrollLeft(g))}function WA(A){var g=A.display,E=g.gutters.offsetWidth,S=Math.round(A.doc.height+tf(A.display));return{clientHeight:g.scroller.clientHeight,viewHeight:g.wrapper.clientHeight,scrollWidth:g.scroller.scrollWidth,clientWidth:g.scroller.clientWidth,viewWidth:g.wrapper.clientWidth,barLeft:A.options.fixedGutter?E:0,docHeight:S,scrollHeight:S+Yu(A)+g.barHeight,nativeBarWidth:g.nativeBarWidth,gutterWidth:E}}var va=function(A,g,E){this.cm=E;var S=this.vert=xe("div",[xe("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),K=this.horiz=xe("div",[xe("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");S.tabIndex=K.tabIndex=-1,A(S),A(K),je(S,"scroll",function(){S.clientHeight&&g(S.scrollTop,"vertical")}),je(K,"scroll",function(){K.clientWidth&&g(K.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,p&&v<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};va.prototype.update=function(A){var g=A.scrollWidth>A.clientWidth+1,E=A.scrollHeight>A.clientHeight+1,S=A.nativeBarWidth;if(E){this.vert.style.display="block",this.vert.style.bottom=g?S+"px":"0";var K=A.viewHeight-(g?S:0);this.vert.firstChild.style.height=Math.max(0,A.scrollHeight-A.clientHeight+K)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(g){this.horiz.style.display="block",this.horiz.style.right=E?S+"px":"0",this.horiz.style.left=A.barLeft+"px";var Z=A.viewWidth-A.barLeft-(E?S:0);this.horiz.firstChild.style.width=Math.max(0,A.scrollWidth-A.clientWidth+Z)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&A.clientHeight>0&&(S==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:E?S:0,bottom:g?S:0}},va.prototype.setScrollLeft=function(A){this.horiz.scrollLeft!=A&&(this.horiz.scrollLeft=A),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},va.prototype.setScrollTop=function(A){this.vert.scrollTop!=A&&(this.vert.scrollTop=A),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},va.prototype.zeroWidthHack=function(){var A=V&&!N?"12px":"18px";this.horiz.style.height=this.vert.style.width=A,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Be,this.disableVert=new Be},va.prototype.enableZeroWidthBar=function(A,g,E){A.style.visibility="";function S(){var K=A.getBoundingClientRect(),Z=E=="vert"?document.elementFromPoint(K.right-1,(K.top+K.bottom)/2):document.elementFromPoint((K.right+K.left)/2,K.bottom-1);Z!=A?A.style.visibility="hidden":g.set(1e3,S)}g.set(1e3,S)},va.prototype.clear=function(){var A=this.horiz.parentNode;A.removeChild(this.horiz),A.removeChild(this.vert)};var eA=function(){};eA.prototype.update=function(){return{bottom:0,right:0}},eA.prototype.setScrollLeft=function(){},eA.prototype.setScrollTop=function(){},eA.prototype.clear=function(){};function Ou(A,g){g||(g=WA(A));var E=A.display.barWidth,S=A.display.barHeight;Sd(A,g);for(var K=0;K<4&&E!=A.display.barWidth||S!=A.display.barHeight;K++)E!=A.display.barWidth&&A.options.lineWrapping&&Vc(A),Sd(A,WA(A)),E=A.display.barWidth,S=A.display.barHeight}function Sd(A,g){var E=A.display,S=E.scrollbars.update(g);E.sizer.style.paddingRight=(E.barWidth=S.right)+"px",E.sizer.style.paddingBottom=(E.barHeight=S.bottom)+"px",E.heightForcer.style.borderBottom=S.bottom+"px solid transparent",S.right&&S.bottom?(E.scrollbarFiller.style.display="block",E.scrollbarFiller.style.height=S.bottom+"px",E.scrollbarFiller.style.width=S.right+"px"):E.scrollbarFiller.style.display="",S.bottom&&A.options.coverGutterNextToScrollbar&&A.options.fixedGutter?(E.gutterFiller.style.display="block",E.gutterFiller.style.height=S.bottom+"px",E.gutterFiller.style.width=g.gutterWidth+"px"):E.gutterFiller.style.display=""}var Zc={native:va,null:eA};function Jd(A){A.display.scrollbars&&(A.display.scrollbars.clear(),A.display.scrollbars.addClass&&me(A.display.wrapper,A.display.scrollbars.addClass)),A.display.scrollbars=new Zc[A.options.scrollbarStyle](function(g){A.display.wrapper.insertBefore(g,A.display.scrollbarFiller),je(g,"mousedown",function(){A.state.focused&&setTimeout(function(){return A.display.input.focus()},0)}),g.setAttribute("cm-not-content","true")},function(g,E){E=="horizontal"?Gl(A,g):ul(A,g)},A),A.display.scrollbars.addClass&&Se(A.display.wrapper,A.display.scrollbars.addClass)}var dc=0;function tA(A){A.curOp={cm:A,viewChanged:!1,startHeight:A.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++dc,markArrays:null},gd(A.curOp)}function _l(A){var g=A.curOp;g&&Ch(g,function(E){for(var S=0;S<E.ops.length;S++)E.ops[S].cm.curOp=null;GA(E)})}function GA(A){for(var g=A.ops,E=0;E<g.length;E++)kc(g[E]);for(var S=0;S<g.length;S++)Iu(g[S]);for(var K=0;K<g.length;K++)wh(g[K]);for(var Z=0;Z<g.length;Z++)ot(g[Z]);for(var Ae=0;Ae<g.length;Ae++)QA(g[Ae])}function kc(A){var g=A.cm,E=g.display;ns(g),A.updateMaxLine&&ua(g),A.mustUpdate=A.viewChanged||A.forceUpdate||A.scrollTop!=null||A.scrollToPos&&(A.scrollToPos.from.line<E.viewFrom||A.scrollToPos.to.line>=E.viewTo)||E.maxLineChanged&&g.options.lineWrapping,A.update=A.mustUpdate&&new cs(g,A.mustUpdate&&{top:A.scrollTop,ensure:A.scrollToPos},A.forceUpdate)}function Iu(A){A.updatedDisplay=A.mustUpdate&&qa(A.cm,A.update)}function wh(A){var g=A.cm,E=g.display;A.updatedDisplay&&Vc(g),A.barMeasure=WA(g),E.maxLineChanged&&!g.options.lineWrapping&&(A.adjustWidthTo=_d(g,E.maxLine,E.maxLine.text.length).left+3,g.display.sizerWidth=A.adjustWidthTo,A.barMeasure.scrollWidth=Math.max(E.scroller.clientWidth,E.sizer.offsetLeft+A.adjustWidthTo+Yu(g)+g.display.barWidth),A.maxScrollLeft=Math.max(0,E.sizer.offsetLeft+A.adjustWidthTo-uc(g))),(A.updatedDisplay||A.selectionChanged)&&(A.preparedSelection=E.input.prepareSelection())}function ot(A){var g=A.cm;A.adjustWidthTo!=null&&(g.display.sizer.style.minWidth=A.adjustWidthTo+"px",A.maxScrollLeft<g.doc.scrollLeft&&Gl(g,Math.min(g.display.scroller.scrollLeft,A.maxScrollLeft),!0),g.display.maxLineChanged=!1);var E=A.focus&&A.focus==Ne(Gt(g));A.preparedSelection&&g.display.input.showSelection(A.preparedSelection,E),(A.updatedDisplay||A.startHeight!=g.doc.height)&&Ou(g,A.barMeasure),A.updatedDisplay&&wr(g,A.barMeasure),A.selectionChanged&&bA(g),g.state.focused&&A.updateInput&&g.display.input.reset(A.typing),E&&jA(A.cm)}function QA(A){var g=A.cm,E=g.display,S=g.doc;if(A.updatedDisplay&&uu(g,A.update),E.wheelStartX!=null&&(A.scrollTop!=null||A.scrollLeft!=null||A.scrollToPos)&&(E.wheelStartX=E.wheelStartY=null),A.scrollTop!=null&&Hc(g,A.scrollTop,A.forceScroll),A.scrollLeft!=null&&Gl(g,A.scrollLeft,!0,!0),A.scrollToPos){var K=Xd(g,ei(S,A.scrollToPos.from),ei(S,A.scrollToPos.to),A.scrollToPos.margin);$c(g,K)}var Z=A.maybeHiddenMarkers,Ae=A.maybeUnhiddenMarkers;if(Z)for(var _e=0;_e<Z.length;++_e)Z[_e].lines.length||ut(Z[_e],"hide");if(Ae)for(var Ie=0;Ie<Ae.length;++Ie)Ae[Ie].lines.length&&ut(Ae[Ie],"unhide");E.wrapper.offsetHeight&&(S.scrollTop=g.display.scroller.scrollTop),A.changeObjs&&ut(g,"changes",g,A.changeObjs),A.update&&A.update.finish()}function Ss(A,g){if(A.curOp)return g();tA(A);try{return g()}finally{_l(A)}}function Ti(A,g){return function(){if(A.curOp)return g.apply(A,arguments);tA(A);try{return g.apply(A,arguments)}finally{_l(A)}}}function ri(A){return function(){if(this.curOp)return A.apply(this,arguments);tA(this);try{return A.apply(this,arguments)}finally{_l(this)}}}function Go(A){return function(){var g=this.cm;if(!g||g.curOp)return A.apply(this,arguments);tA(g);try{return A.apply(this,arguments)}finally{_l(g)}}}function Ql(A,g){A.doc.highlightFrontier<A.display.viewTo&&A.state.highlight.set(g,Tt(Ed,A))}function Ed(A){var g=A.doc;if(!(g.highlightFrontier>=A.display.viewTo)){var E=+new Date+A.options.workTime,S=ti(A,g.highlightFrontier),K=[];g.iter(S.line,Math.min(g.first+g.size,A.display.viewTo+500),function(Z){if(S.line>=A.display.viewFrom){var Ae=Z.styles,_e=Z.text.length>A.options.maxHighlightLength?io(g.mode,S.state):null,Ie=Mu(A,Z,S,!0);_e&&(S.state=_e),Z.styles=Ie.styles;var Ue=Z.styleClasses,gt=Ie.classes;gt?Z.styleClasses=gt:Ue&&(Z.styleClasses=null);for(var wt=!Ae||Ae.length!=Z.styles.length||Ue!=gt&&(!Ue||!gt||Ue.bgClass!=gt.bgClass||Ue.textClass!=gt.textClass),Xt=0;!wt&&Xt<Ae.length;++Xt)wt=Ae[Xt]!=Z.styles[Xt];wt&&K.push(S.line),Z.stateAfter=S.save(),S.nextLine()}else Z.text.length<=A.options.maxHighlightLength&&ls(A,Z.text,S),Z.stateAfter=S.line%5==0?S.save():null,S.nextLine();if(+new Date>E)return Ql(A,A.options.workDelay),!0}),g.highlightFrontier=S.line,g.modeFrontier=Math.max(g.modeFrontier,S.line),K.length&&Ss(A,function(){for(var Z=0;Z<K.length;Z++)Hu(A,K[Z],"text")})}}var cs=function(A,g,E){var S=A.display;this.viewport=g,this.visible=Xu(S,A.doc,g),this.editorIsHidden=!S.wrapper.offsetWidth,this.wrapperHeight=S.wrapper.clientHeight,this.wrapperWidth=S.wrapper.clientWidth,this.oldDisplayWidth=uc(A),this.force=E,this.dims=vA(A),this.events=[]};cs.prototype.signal=function(A,g){Wt(A,g)&&this.events.push(arguments)},cs.prototype.finish=function(){for(var A=0;A<this.events.length;A++)ut.apply(null,this.events[A])};function ns(A){var g=A.display;!g.scrollbarsClipped&&g.scroller.offsetWidth&&(g.nativeBarWidth=g.scroller.offsetWidth-g.scroller.clientWidth,g.heightForcer.style.height=Yu(A)+"px",g.sizer.style.marginBottom=-g.nativeBarWidth+"px",g.sizer.style.borderRightWidth=Yu(A)+"px",g.scrollbarsClipped=!0)}function Es(A){if(A.hasFocus())return null;var g=Ne(Gt(A));if(!g||!Xe(A.display.lineDiv,g))return null;var E={activeElt:g};if(window.getSelection){var S=Ft(A).getSelection();S.anchorNode&&S.extend&&Xe(A.display.lineDiv,S.anchorNode)&&(E.anchorNode=S.anchorNode,E.anchorOffset=S.anchorOffset,E.focusNode=S.focusNode,E.focusOffset=S.focusOffset)}return E}function Xc(A){if(!(!A||!A.activeElt||A.activeElt==Ne(yt(A.activeElt)))&&(A.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(A.activeElt.nodeName)&&A.anchorNode&&Xe(document.body,A.anchorNode)&&Xe(document.body,A.focusNode))){var g=A.activeElt.ownerDocument,E=g.defaultView.getSelection(),S=g.createRange();S.setEnd(A.anchorNode,A.anchorOffset),S.collapse(!1),E.removeAllRanges(),E.addRange(S),E.extend(A.focusNode,A.focusOffset)}}function qa(A,g){var E=A.display,S=A.doc;if(g.editorIsHidden)return _A(A),!1;if(!g.force&&g.visible.from>=E.viewFrom&&g.visible.to<=E.viewTo&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo)&&E.renderedView==E.view&&of(A)==0)return!1;Jc(A)&&(_A(A),g.dims=vA(A));var K=S.first+S.size,Z=Math.max(g.visible.from-A.options.viewportMargin,S.first),Ae=Math.min(K,g.visible.to+A.options.viewportMargin);E.viewFrom<Z&&Z-E.viewFrom<20&&(Z=Math.max(S.first,E.viewFrom)),E.viewTo>Ae&&E.viewTo-Ae<20&&(Ae=Math.min(K,E.viewTo)),es&&(Z=Wo(A.doc,Z),Ae=si(A.doc,Ae));var _e=Z!=E.viewFrom||Ae!=E.viewTo||E.lastWrapHeight!=g.wrapperHeight||E.lastWrapWidth!=g.wrapperWidth;Zd(A,Z,Ae),E.viewOffset=Gi(Kr(A.doc,E.viewFrom)),A.display.mover.style.top=E.viewOffset+"px";var Ie=of(A);if(!_e&&Ie==0&&!g.force&&E.renderedView==E.view&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo))return!1;var Ue=Es(A);return Ie>4&&(E.lineDiv.style.display="none"),hc(A,E.updateLineNumbers,g.dims),Ie>4&&(E.lineDiv.style.display=""),E.renderedView=E.view,Xc(Ue),Me(E.cursorDiv),Me(E.selectionDiv),E.gutters.style.height=E.sizer.style.minHeight=0,_e&&(E.lastWrapHeight=g.wrapperHeight,E.lastWrapWidth=g.wrapperWidth,Ql(A,400)),E.updateLineNumbers=null,!0}function uu(A,g){for(var E=g.viewport,S=!0;;S=!1){if(!S||!A.options.lineWrapping||g.oldDisplayWidth==uc(A)){if(E&&E.top!=null&&(E={top:Math.min(A.doc.height+tf(A.display)-Ac(A),E.top)}),g.visible=Xu(A.display,A.doc,E),g.visible.from>=A.display.viewFrom&&g.visible.to<=A.display.viewTo)break}else S&&(g.visible=Xu(A.display,A.doc,E));if(!qa(A,g))break;Vc(A);var K=WA(A);Qa(A),Ou(A,K),wr(A,K),g.force=!1}g.signal(A,"update",A),(A.display.viewFrom!=A.display.reportedViewFrom||A.display.viewTo!=A.display.reportedViewTo)&&(g.signal(A,"viewportChange",A,A.display.viewFrom,A.display.viewTo),A.display.reportedViewFrom=A.display.viewFrom,A.display.reportedViewTo=A.display.viewTo)}function Ca(A,g){var E=new cs(A,g);if(qa(A,E)){Vc(A),uu(A,E);var S=WA(A);Qa(A),Ou(A,S),wr(A,S),E.finish()}}function hc(A,g,E){var S=A.display,K=A.options.lineNumbers,Z=S.lineDiv,Ae=Z.firstChild;function _e(bn){var Ln=bn.nextSibling;return x&&V&&A.display.currentWheelTarget==bn?bn.style.display="none":bn.parentNode.removeChild(bn),Ln}for(var Ie=S.view,Ue=S.viewFrom,gt=0;gt<Ie.length;gt++){var wt=Ie[gt];if(!wt.hidden)if(!wt.node||wt.node.parentNode!=Z){var Xt=yd(A,wt,Ue,E);Z.insertBefore(Xt,Ae)}else{for(;Ae!=wt.node;)Ae=_e(Ae);var Yt=K&&g!=null&&g<=Ue&&wt.lineNumber;wt.changes&&(it(wt.changes,"gutter")>-1&&(Yt=!1),Zh(A,wt,Ue,E)),Yt&&(Me(wt.lineNumber),wt.lineNumber.appendChild(document.createTextNode(Zn(A.options,Ue)))),Ae=wt.node.nextSibling}Ue+=wt.size}for(;Ae;)Ae=_e(Ae)}function Bs(A){var g=A.gutters.offsetWidth;A.sizer.style.marginLeft=g+"px",ms(A,"gutterChanged",A)}function wr(A,g){A.display.sizer.style.minHeight=g.docHeight+"px",A.display.heightForcer.style.top=g.docHeight+"px",A.display.gutters.style.height=g.docHeight+A.display.barHeight+Yu(A)+"px"}function af(A){var g=A.display,E=g.view;if(!(!g.alignWidgets&&(!g.gutters.firstChild||!A.options.fixedGutter))){for(var S=Po(g)-g.scroller.scrollLeft+A.doc.scrollLeft,K=g.gutters.offsetWidth,Z=S+"px",Ae=0;Ae<E.length;Ae++)if(!E[Ae].hidden){A.options.fixedGutter&&(E[Ae].gutter&&(E[Ae].gutter.style.left=Z),E[Ae].gutterBackground&&(E[Ae].gutterBackground.style.left=Z));var _e=E[Ae].alignable;if(_e)for(var Ie=0;Ie<_e.length;Ie++)_e[Ie].style.left=Z}A.options.fixedGutter&&(g.gutters.style.left=S+K+"px")}}function Jc(A){if(!A.options.lineNumbers)return!1;var g=A.doc,E=Zn(A.options,g.first+g.size-1),S=A.display;if(E.length!=S.lineNumChars){var K=S.measure.appendChild(xe("div",[xe("div",E)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Z=K.firstChild.offsetWidth,Ae=K.offsetWidth-Z;return S.lineGutter.style.width="",S.lineNumInnerWidth=Math.max(Z,S.lineGutter.offsetWidth-Ae)+1,S.lineNumWidth=S.lineNumInnerWidth+Ae,S.lineNumChars=S.lineNumInnerWidth?E.length:-1,S.lineGutter.style.width=S.lineNumWidth+"px",Bs(A.display),!0}return!1}function Au(A,g){for(var E=[],S=!1,K=0;K<A.length;K++){var Z=A[K],Ae=null;if(typeof Z!="string"&&(Ae=Z.style,Z=Z.className),Z=="CodeMirror-linenumbers")if(g)S=!0;else continue;E.push({className:Z,style:Ae})}return g&&!S&&E.push({className:"CodeMirror-linenumbers",style:null}),E}function Tc(A){var g=A.gutters,E=A.gutterSpecs;Me(g),A.lineGutter=null;for(var S=0;S<E.length;++S){var K=E[S],Z=K.className,Ae=K.style,_e=g.appendChild(xe("div",null,"CodeMirror-gutter "+Z));Ae&&(_e.style.cssText=Ae),Z=="CodeMirror-linenumbers"&&(A.lineGutter=_e,_e.style.width=(A.lineNumWidth||1)+"px")}g.style.display=E.length?"":"none",Bs(A)}function Va(A){Tc(A.display),Tl(A),af(A)}function eh(A,g,E,S){var K=this;this.input=E,K.scrollbarFiller=xe("div",null,"CodeMirror-scrollbar-filler"),K.scrollbarFiller.setAttribute("cm-not-content","true"),K.gutterFiller=xe("div",null,"CodeMirror-gutter-filler"),K.gutterFiller.setAttribute("cm-not-content","true"),K.lineDiv=At("div",null,"CodeMirror-code"),K.selectionDiv=xe("div",null,null,"position: relative; z-index: 1"),K.cursorDiv=xe("div",null,"CodeMirror-cursors"),K.measure=xe("div",null,"CodeMirror-measure"),K.lineMeasure=xe("div",null,"CodeMirror-measure"),K.lineSpace=At("div",[K.measure,K.lineMeasure,K.selectionDiv,K.cursorDiv,K.lineDiv],null,"position: relative; outline: none");var Z=At("div",[K.lineSpace],"CodeMirror-lines");K.mover=xe("div",[Z],null,"position: relative"),K.sizer=xe("div",[K.mover],"CodeMirror-sizer"),K.sizerWidth=null,K.heightForcer=xe("div",null,null,"position: absolute; height: "+Ct+"px; width: 1px;"),K.gutters=xe("div",null,"CodeMirror-gutters"),K.lineGutter=null,K.scroller=xe("div",[K.sizer,K.heightForcer,K.gutters],"CodeMirror-scroll"),K.scroller.setAttribute("tabIndex","-1"),K.wrapper=xe("div",[K.scrollbarFiller,K.gutterFiller,K.scroller],"CodeMirror"),T&&P>=105&&(K.wrapper.style.clipPath="inset(0px)"),K.wrapper.setAttribute("translate","no"),p&&v<8&&(K.gutters.style.zIndex=-1,K.scroller.style.paddingRight=0),!x&&!(i&&te)&&(K.scroller.draggable=!0),A&&(A.appendChild?A.appendChild(K.wrapper):A(K.wrapper)),K.viewFrom=K.viewTo=g.first,K.reportedViewFrom=K.reportedViewTo=g.first,K.view=[],K.renderedView=null,K.externalMeasured=null,K.viewOffset=0,K.lastWrapHeight=K.lastWrapWidth=0,K.updateLineNumbers=null,K.nativeBarWidth=K.barHeight=K.barWidth=0,K.scrollbarsClipped=!1,K.lineNumWidth=K.lineNumInnerWidth=K.lineNumChars=null,K.alignWidgets=!1,K.cachedCharWidth=K.cachedTextHeight=K.cachedPaddingH=null,K.maxLine=null,K.maxLineLength=0,K.maxLineChanged=!1,K.wheelDX=K.wheelDY=K.wheelStartX=K.wheelStartY=null,K.shift=!1,K.selForContextMenu=null,K.activeTouch=null,K.gutterSpecs=Au(S.gutters,S.lineNumbers),Tc(K),E.init(K)}var Qi=0,nA=null;p?nA=-.53:i?nA=15:T?nA=-.7:j&&(nA=-1/3);function Pc(A){var g=A.wheelDeltaX,E=A.wheelDeltaY;return g==null&&A.detail&&A.axis==A.HORIZONTAL_AXIS&&(g=A.detail),E==null&&A.detail&&A.axis==A.VERTICAL_AXIS?E=A.detail:E==null&&(E=A.wheelDelta),{x:g,y:E}}function MA(A){var g=Pc(A);return g.x*=nA,g.y*=nA,g}function ed(A,g){T&&P==102&&(A.display.chromeScrollHack==null?A.display.sizer.style.pointerEvents="none":clearTimeout(A.display.chromeScrollHack),A.display.chromeScrollHack=setTimeout(function(){A.display.chromeScrollHack=null,A.display.sizer.style.pointerEvents=""},100));var E=Pc(g),S=E.x,K=E.y,Z=nA;g.deltaMode===0&&(S=g.deltaX,K=g.deltaY,Z=1);var Ae=A.display,_e=Ae.scroller,Ie=_e.scrollWidth>_e.clientWidth,Ue=_e.scrollHeight>_e.clientHeight;if(S&&Ie||K&&Ue){if(K&&V&&x){e:for(var gt=g.target,wt=Ae.view;gt!=_e;gt=gt.parentNode)for(var Xt=0;Xt<wt.length;Xt++)if(wt[Xt].node==gt){A.display.currentWheelTarget=gt;break e}}if(S&&!i&&!U&&Z!=null){K&&Ue&&ul(A,Math.max(0,_e.scrollTop+K*Z)),Gl(A,Math.max(0,_e.scrollLeft+S*Z)),(!K||K&&Ue)&&tn(g),Ae.wheelStartX=null;return}if(K&&Z!=null){var Yt=K*Z,bn=A.doc.scrollTop,Ln=bn+Ae.wrapper.clientHeight;Yt<0?bn=Math.max(0,bn+Yt-50):Ln=Math.min(A.doc.height,Ln+Yt+50),Ca(A,{top:bn,bottom:Ln})}Qi<20&&g.deltaMode!==0&&(Ae.wheelStartX==null?(Ae.wheelStartX=_e.scrollLeft,Ae.wheelStartY=_e.scrollTop,Ae.wheelDX=S,Ae.wheelDY=K,setTimeout(function(){if(Ae.wheelStartX!=null){var rr=_e.scrollLeft-Ae.wheelStartX,er=_e.scrollTop-Ae.wheelStartY,Cr=er&&Ae.wheelDY&&er/Ae.wheelDY||rr&&Ae.wheelDX&&rr/Ae.wheelDX;Ae.wheelStartX=Ae.wheelStartY=null,Cr&&(nA=(nA*Qi+Cr)/(Qi+1),++Qi)}},200)):(Ae.wheelDX+=S,Ae.wheelDY+=K))}}var Os=function(A,g){this.ranges=A,this.primIndex=g};Os.prototype.primary=function(){return this.ranges[this.primIndex]},Os.prototype.equals=function(A){if(A==this)return!0;if(A.primIndex!=this.primIndex||A.ranges.length!=this.ranges.length)return!1;for(var g=0;g<this.ranges.length;g++){var E=this.ranges[g],S=A.ranges[g];if(!Pi(E.anchor,S.anchor)||!Pi(E.head,S.head))return!1}return!0},Os.prototype.deepCopy=function(){for(var A=[],g=0;g<this.ranges.length;g++)A[g]=new wo(xo(this.ranges[g].anchor),xo(this.ranges[g].head));return new Os(A,this.primIndex)},Os.prototype.somethingSelected=function(){for(var A=0;A<this.ranges.length;A++)if(!this.ranges[A].empty())return!0;return!1},Os.prototype.contains=function(A,g){g||(g=A);for(var E=0;E<this.ranges.length;E++){var S=this.ranges[E];if(lr(g,S.from())>=0&&lr(A,S.to())<=0)return E}return-1};var wo=function(A,g){this.anchor=A,this.head=g};wo.prototype.from=function(){return la(this.anchor,this.head)},wo.prototype.to=function(){return as(this.anchor,this.head)},wo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Yl(A,g,E){var S=A&&A.options.selectionsMayTouch,K=g[E];g.sort(function(Xt,Yt){return lr(Xt.from(),Yt.from())}),E=it(g,K);for(var Z=1;Z<g.length;Z++){var Ae=g[Z],_e=g[Z-1],Ie=lr(_e.to(),Ae.from());if(S&&!Ae.empty()?Ie>0:Ie>=0){var Ue=la(_e.from(),Ae.from()),gt=as(_e.to(),Ae.to()),wt=_e.empty()?Ae.from()==Ae.head:_e.from()==_e.head;Z<=E&&--E,g.splice(--Z,2,new wo(wt?gt:Ue,wt?Ue:gt))}}return new Os(g,E)}function Pa(A,g){return new Os([new wo(A,g||A)],0)}function $a(A){return A.text?dn(A.from.line+A.text.length-1,ar(A.text).length+(A.text.length==1?A.from.ch:0)):A.to}function fc(A,g){if(lr(A,g.from)<0)return A;if(lr(A,g.to)<=0)return $a(g);var E=A.line+g.text.length-(g.to.line-g.from.line)-1,S=A.ch;return A.line==g.to.line&&(S+=$a(g).ch-g.to.ch),dn(E,S)}function wA(A,g){for(var E=[],S=0;S<A.sel.ranges.length;S++){var K=A.sel.ranges[S];E.push(new wo(fc(K.anchor,g),fc(K.head,g)))}return Yl(A.cm,E,A.sel.primIndex)}function YA(A,g,E){return A.line==g.line?dn(E.line,A.ch-g.ch+E.ch):dn(E.line+(A.line-g.line),A.ch)}function cu(A,g,E){for(var S=[],K=dn(A.first,0),Z=K,Ae=0;Ae<g.length;Ae++){var _e=g[Ae],Ie=YA(_e.from,K,Z),Ue=YA($a(_e),K,Z);if(K=_e.to,Z=Ue,E=="around"){var gt=A.sel.ranges[Ae],wt=lr(gt.head,gt.anchor)<0;S[Ae]=new wo(wt?Ue:Ie,wt?Ie:Ue)}else S[Ae]=new wo(Ie,Ie)}return new Os(S,A.sel.primIndex)}function gs(A){A.doc.mode=bi(A.options,A.doc.modeOption),rA(A)}function rA(A){A.doc.iter(function(g){g.stateAfter&&(g.stateAfter=null),g.styles&&(g.styles=null)}),A.doc.modeFrontier=A.doc.highlightFrontier=A.doc.first,Ql(A,100),A.state.modeGen++,A.curOp&&Tl(A)}function qA(A,g){return g.from.ch==0&&g.to.ch==0&&ar(g.text)==""&&(!A.cm||A.cm.options.wholeLineUpdateBefore)}function _a(A,g,E,S){function K(Cr){return E?E[Cr]:null}function Z(Cr,pr,Or){wu(Cr,pr,Or,S),ms(Cr,"change",Cr,g)}function Ae(Cr,pr){for(var Or=[],oi=Cr;oi<pr;++oi)Or.push(new Ys(Ue[oi],K(oi),S));return Or}var _e=g.from,Ie=g.to,Ue=g.text,gt=Kr(A,_e.line),wt=Kr(A,Ie.line),Xt=ar(Ue),Yt=K(Ue.length-1),bn=Ie.line-_e.line;if(g.full)A.insert(0,Ae(0,Ue.length)),A.remove(Ue.length,A.size-Ue.length);else if(qA(A,g)){var Ln=Ae(0,Ue.length-1);Z(wt,wt.text,Yt),bn&&A.remove(_e.line,bn),Ln.length&&A.insert(_e.line,Ln)}else if(gt==wt)if(Ue.length==1)Z(gt,gt.text.slice(0,_e.ch)+Xt+gt.text.slice(Ie.ch),Yt);else{var rr=Ae(1,Ue.length-1);rr.push(new Ys(Xt+gt.text.slice(Ie.ch),Yt,S)),Z(gt,gt.text.slice(0,_e.ch)+Ue[0],K(0)),A.insert(_e.line+1,rr)}else if(Ue.length==1)Z(gt,gt.text.slice(0,_e.ch)+Ue[0]+wt.text.slice(Ie.ch),K(0)),A.remove(_e.line+1,bn);else{Z(gt,gt.text.slice(0,_e.ch)+Ue[0],K(0)),Z(wt,Xt+wt.text.slice(Ie.ch),Yt);var er=Ae(1,Ue.length-1);bn>1&&A.remove(_e.line+1,bn-1),A.insert(_e.line+1,er)}ms(A,"change",A,g)}function Ka(A,g,E){function S(K,Z,Ae){if(K.linked)for(var _e=0;_e<K.linked.length;++_e){var Ie=K.linked[_e];if(Ie.doc!=Z){var Ue=Ae&&Ie.sharedHist;E&&!Ue||(g(Ie.doc,Ue),S(Ie.doc,K,Ue))}}}S(A,null,!0)}function ys(A,g){if(g.cm)throw new Error("This document is already in use.");A.doc=g,g.cm=A,lo(A),gs(A),SA(A),A.options.direction=g.direction,A.options.lineWrapping||ua(A),A.options.mode=g.modeOption,Tl(A)}function SA(A){(A.doc.direction=="rtl"?Se:me)(A.display.lineDiv,"CodeMirror-rtl")}function Al(A){Ss(A,function(){SA(A),Tl(A)})}function VA(A){this.done=[],this.undone=[],this.undoDepth=A?A.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=A?A.maxGeneration:1}function Dr(A,g){var E={from:xo(g.from),to:$a(g),text:Wa(A,g.from,g.to)};return Pl(A,E,g.from.line,g.to.line+1),Ka(A,function(S){return Pl(S,E,g.from.line,g.to.line+1)},!0),E}function Lr(A){for(;A.length;){var g=ar(A);if(g.ranges)A.pop();else break}}function Sh(A,g){if(g)return Lr(A.done),ar(A.done);if(A.done.length&&!ar(A.done).ranges)return ar(A.done);if(A.done.length>1&&!A.done[A.done.length-2].ranges)return A.done.pop(),ar(A.done)}function td(A,g,E,S){var K=A.history;K.undone.length=0;var Z=+new Date,Ae,_e;if((K.lastOp==S||K.lastOrigin==g.origin&&g.origin&&(g.origin.charAt(0)=="+"&&K.lastModTime>Z-(A.cm?A.cm.options.historyEventDelay:500)||g.origin.charAt(0)=="*"))&&(Ae=Sh(K,K.lastOp==S)))_e=ar(Ae.changes),lr(g.from,g.to)==0&&lr(g.from,_e.to)==0?_e.to=$a(g):Ae.changes.push(Dr(A,g));else{var Ie=ar(K.done);for((!Ie||!Ie.ranges)&&ku(A.sel,K.done),Ae={changes:[Dr(A,g)],generation:K.generation},K.done.push(Ae);K.done.length>K.undoDepth;)K.done.shift(),K.done[0].ranges||K.done.shift()}K.done.push(E),K.generation=++K.maxGeneration,K.lastModTime=K.lastSelTime=Z,K.lastOp=K.lastSelOp=S,K.lastOrigin=K.lastSelOrigin=g.origin,_e||ut(A,"historyAdded")}function Eh(A,g,E,S){var K=g.charAt(0);return K=="*"||K=="+"&&E.ranges.length==S.ranges.length&&E.somethingSelected()==S.somethingSelected()&&new Date-A.history.lastSelTime<=(A.cm?A.cm.options.historyEventDelay:500)}function Aa(A,g,E,S){var K=A.history,Z=S&&S.origin;E==K.lastSelOp||Z&&K.lastSelOrigin==Z&&(K.lastModTime==K.lastSelTime&&K.lastOrigin==Z||Eh(A,Z,ar(K.done),g))?K.done[K.done.length-1]=g:ku(g,K.done),K.lastSelTime=+new Date,K.lastSelOrigin=Z,K.lastSelOp=E,S&&S.clearRedo!==!1&&Lr(K.undone)}function ku(A,g){var E=ar(g);E&&E.ranges&&E.equals(A)||g.push(A)}function Pl(A,g,E,S){var K=g["spans_"+A.id],Z=0;A.iter(Math.max(A.first,E),Math.min(A.first+A.size,S),function(Ae){Ae.markedSpans&&((K||(K=g["spans_"+A.id]={}))[Z]=Ae.markedSpans),++Z})}function Bh(A){if(!A)return null;for(var g,E=0;E<A.length;++E)A[E].marker.explicitlyCleared?g||(g=A.slice(0,E)):g&&g.push(A[E]);return g?g.length?g:null:A}function $A(A,g){var E=g["spans_"+A.id];if(!E)return null;for(var S=[],K=0;K<g.text.length;++K)S.push(Bh(E[K]));return S}function Vs(A,g){var E=$A(A,g),S=Hr(A,g);if(!E)return S;if(!S)return E;for(var K=0;K<E.length;++K){var Z=E[K],Ae=S[K];if(Z&&Ae)e:for(var _e=0;_e<Ae.length;++_e){for(var Ie=Ae[_e],Ue=0;Ue<Z.length;++Ue)if(Z[Ue].marker==Ie.marker)continue e;Z.push(Ie)}else Ae&&(E[K]=Ae)}return E}function vs(A,g,E){for(var S=[],K=0;K<A.length;++K){var Z=A[K];if(Z.ranges){S.push(E?Os.prototype.deepCopy.call(Z):Z);continue}var Ae=Z.changes,_e=[];S.push({changes:_e});for(var Ie=0;Ie<Ae.length;++Ie){var Ue=Ae[Ie],gt=void 0;if(_e.push({from:Ue.from,to:Ue.to,text:Ue.text}),g)for(var wt in Ue)(gt=wt.match(/^spans_(\d+)$/))&&it(g,Number(gt[1]))>-1&&(ar(_e)[wt]=Ue[wt],delete Ue[wt])}}return S}function $s(A,g,E,S){if(S){var K=A.anchor;if(E){var Z=lr(g,K)<0;Z!=lr(E,K)<0?(K=g,g=E):Z!=lr(g,E)<0&&(g=E)}return new wo(K,g)}else return new wo(E||g,g)}function HA(A,g,E,S,K){K==null&&(K=A.cm&&(A.cm.display.shift||A.extend)),ba(A,new Os([$s(A.sel.primary(),g,E,K)],0),S)}function du(A,g,E){for(var S=[],K=A.cm&&(A.cm.display.shift||A.extend),Z=0;Z<A.sel.ranges.length;Z++)S[Z]=$s(A.sel.ranges[Z],g[Z],null,K);var Ae=Yl(A.cm,S,A.sel.primIndex);ba(A,Ae,E)}function bl(A,g,E,S){var K=A.sel.ranges.slice(0);K[g]=E,ba(A,Yl(A.cm,K,A.sel.primIndex),S)}function iA(A,g,E,S){ba(A,Pa(g,E),S)}function Kc(A,g,E){var S={ranges:g.ranges,update:function(K){this.ranges=[];for(var Z=0;Z<K.length;Z++)this.ranges[Z]=new wo(ei(A,K[Z].anchor),ei(A,K[Z].head))},origin:E&&E.origin};return ut(A,"beforeSelectionChange",A,S),A.cm&&ut(A.cm,"beforeSelectionChange",A.cm,S),S.ranges!=g.ranges?Yl(A.cm,S.ranges,S.ranges.length-1):g}function ql(A,g,E){var S=A.history.done,K=ar(S);K&&K.ranges?(S[S.length-1]=g,Hs(A,g,E)):ba(A,g,E)}function ba(A,g,E){Hs(A,g,E),Aa(A,A.sel,A.cm?A.cm.curOp.id:NaN,E)}function Hs(A,g,E){(Wt(A,"beforeSelectionChange")||A.cm&&Wt(A.cm,"beforeSelectionChange"))&&(g=Kc(A,g,E));var S=E&&E.bias||(lr(g.primary().head,A.sel.primary().head)<0?-1:1);hu(A,ZA(A,g,S,!0)),!(E&&E.scroll===!1)&&A.cm&&A.cm.getOption("readOnly")!="nocursor"&&As(A.cm)}function hu(A,g){g.equals(A.sel)||(A.sel=g,A.cm&&(A.cm.curOp.updateInput=1,A.cm.curOp.selectionChanged=!0,Qt(A.cm)),ms(A,"cursorActivity",A))}function fu(A){hu(A,ZA(A,A.sel,null,!1))}function ZA(A,g,E,S){for(var K,Z=0;Z<g.ranges.length;Z++){var Ae=g.ranges[Z],_e=g.ranges.length==A.sel.ranges.length&&A.sel.ranges[Z],Ie=Rc(A,Ae.anchor,_e&&_e.anchor,E,S),Ue=Ae.head==Ae.anchor?Ie:Rc(A,Ae.head,_e&&_e.head,E,S);(K||Ie!=Ae.anchor||Ue!=Ae.head)&&(K||(K=g.ranges.slice(0,Z)),K[Z]=new wo(Ie,Ue))}return K?Yl(A.cm,K,g.primIndex):g}function Tu(A,g,E,S,K){var Z=Kr(A,g.line);if(Z.markedSpans)for(var Ae=0;Ae<Z.markedSpans.length;++Ae){var _e=Z.markedSpans[Ae],Ie=_e.marker,Ue="selectLeft"in Ie?!Ie.selectLeft:Ie.inclusiveLeft,gt="selectRight"in Ie?!Ie.selectRight:Ie.inclusiveRight;if((_e.from==null||(Ue?_e.from<=g.ch:_e.from<g.ch))&&(_e.to==null||(gt?_e.to>=g.ch:_e.to>g.ch))){if(K&&(ut(Ie,"beforeCursorEnter"),Ie.explicitlyCleared))if(Z.markedSpans){--Ae;continue}else break;if(!Ie.atomic)continue;if(E){var wt=Ie.find(S<0?1:-1),Xt=void 0;if((S<0?gt:Ue)&&(wt=EA(A,wt,-S,wt&&wt.line==g.line?Z:null)),wt&&wt.line==g.line&&(Xt=lr(wt,E))&&(S<0?Xt<0:Xt>0))return Tu(A,wt,g,S,K)}var Yt=Ie.find(S<0?-1:1);return(S<0?Ue:gt)&&(Yt=EA(A,Yt,S,Yt.line==g.line?Z:null)),Yt?Tu(A,Yt,g,S,K):null}}return g}function Rc(A,g,E,S,K){var Z=S||1,Ae=Tu(A,g,E,Z,K)||!K&&Tu(A,g,E,Z,!0)||Tu(A,g,E,-Z,K)||!K&&Tu(A,g,E,-Z,!0);return Ae||(A.cantEdit=!0,dn(A.first,0))}function EA(A,g,E,S){return E<0&&g.ch==0?g.line>A.first?ei(A,dn(g.line-1)):null:E>0&&g.ch==(S||Kr(A,g.line)).text.length?g.line<A.first+A.size-1?dn(g.line+1,0):null:new dn(g.line,g.ch+E)}function Kl(A){A.setSelection(dn(A.firstLine(),0),dn(A.lastLine()),Lt)}function Bd(A,g,E){var S={canceled:!1,from:g.from,to:g.to,text:g.text,origin:g.origin,cancel:function(){return S.canceled=!0}};return E&&(S.update=function(K,Z,Ae,_e){K&&(S.from=ei(A,K)),Z&&(S.to=ei(A,Z)),Ae&&(S.text=Ae),_e!==void 0&&(S.origin=_e)}),ut(A,"beforeChange",A,S),A.cm&&ut(A.cm,"beforeChange",A.cm,S),S.canceled?(A.cm&&(A.cm.curOp.updateInput=2),null):{from:S.from,to:S.to,text:S.text,origin:S.origin}}function O(A,g,E){if(A.cm){if(!A.cm.curOp)return Ti(A.cm,O)(A,g,E);if(A.cm.state.suppressEdits)return}if(!((Wt(A,"beforeChange")||A.cm&&Wt(A.cm,"beforeChange"))&&(g=Bd(A,g,!0),!g))){var S=Fo&&!E&&Wi(A,g.from,g.to);if(S)for(var K=S.length-1;K>=0;--K)a(A,{from:S[K].from,to:S[K].to,text:K?[""]:g.text,origin:g.origin});else a(A,g)}}function a(A,g){if(!(g.text.length==1&&g.text[0]==""&&lr(g.from,g.to)==0)){var E=wA(A,g);td(A,g,E,A.cm?A.cm.curOp.id:NaN),M(A,g,E,Hr(A,g));var S=[];Ka(A,function(K,Z){!Z&&it(S,K.history)==-1&&(se(K.history,g),S.push(K.history)),M(K,g,null,Hr(K,g))})}}function c(A,g,E){var S=A.cm&&A.cm.state.suppressEdits;if(!(S&&!E)){for(var K=A.history,Z,Ae=A.sel,_e=g=="undo"?K.done:K.undone,Ie=g=="undo"?K.undone:K.done,Ue=0;Ue<_e.length&&(Z=_e[Ue],!(E?Z.ranges&&!Z.equals(A.sel):!Z.ranges));Ue++);if(Ue!=_e.length){for(K.lastOrigin=K.lastSelOrigin=null;;)if(Z=_e.pop(),Z.ranges){if(ku(Z,Ie),E&&!Z.equals(A.sel)){ba(A,Z,{clearRedo:!1});return}Ae=Z}else if(S){_e.push(Z);return}else break;var gt=[];ku(Ae,Ie),Ie.push({changes:gt,generation:K.generation}),K.generation=Z.generation||++K.maxGeneration;for(var wt=Wt(A,"beforeChange")||A.cm&&Wt(A.cm,"beforeChange"),Xt=function(Ln){var rr=Z.changes[Ln];if(rr.origin=g,wt&&!Bd(A,rr,!1))return _e.length=0,{};gt.push(Dr(A,rr));var er=Ln?wA(A,rr):ar(_e);M(A,rr,er,Vs(A,rr)),!Ln&&A.cm&&A.cm.scrollIntoView({from:rr.from,to:$a(rr)});var Cr=[];Ka(A,function(pr,Or){!Or&&it(Cr,pr.history)==-1&&(se(pr.history,rr),Cr.push(pr.history)),M(pr,rr,null,Vs(pr,rr))})},Yt=Z.changes.length-1;Yt>=0;--Yt){var bn=Xt(Yt);if(bn)return bn.v}}}}function C(A,g){if(g!=0&&(A.first+=g,A.sel=new Os(kn(A.sel.ranges,function(K){return new wo(dn(K.anchor.line+g,K.anchor.ch),dn(K.head.line+g,K.head.ch))}),A.sel.primIndex),A.cm)){Tl(A.cm,A.first,A.first-g,g);for(var E=A.cm.display,S=E.viewFrom;S<E.viewTo;S++)Hu(A.cm,S,"gutter")}}function M(A,g,E,S){if(A.cm&&!A.cm.curOp)return Ti(A.cm,M)(A,g,E,S);if(g.to.line<A.first){C(A,g.text.length-1-(g.to.line-g.from.line));return}if(!(g.from.line>A.lastLine())){if(g.from.line<A.first){var K=g.text.length-1-(A.first-g.from.line);C(A,K),g={from:dn(A.first,0),to:dn(g.to.line+K,g.to.ch),text:[ar(g.text)],origin:g.origin}}var Z=A.lastLine();g.to.line>Z&&(g={from:g.from,to:dn(Z,Kr(A,Z).text.length),text:[g.text[0]],origin:g.origin}),g.removed=Wa(A,g.from,g.to),E||(E=wA(A,g)),A.cm?k(A.cm,g,S):_a(A,g,S),Hs(A,E,Lt),A.cantEdit&&Rc(A,dn(A.firstLine(),0))&&(A.cantEdit=!1)}}function k(A,g,E){var S=A.doc,K=A.display,Z=g.from,Ae=g.to,_e=!1,Ie=Z.line;A.options.lineWrapping||(Ie=Ye(Br(Kr(S,Z.line))),S.iter(Ie,Ae.line+1,function(Yt){if(Yt==K.maxLine)return _e=!0,!0})),S.sel.contains(g.from,g.to)>-1&&Qt(A),_a(S,g,E,Mc(A)),A.options.lineWrapping||(S.iter(Ie,Z.line+g.text.length,function(Yt){var bn=$o(Yt);bn>K.maxLineLength&&(K.maxLine=Yt,K.maxLineLength=bn,K.maxLineChanged=!0,_e=!1)}),_e&&(A.curOp.updateMaxLine=!0)),No(S,Z.line),Ql(A,400);var Ue=g.text.length-(Ae.line-Z.line)-1;g.full?Tl(A):Z.line==Ae.line&&g.text.length==1&&!qA(A.doc,g)?Hu(A,Z.line,"text"):Tl(A,Z.line,Ae.line+1,Ue);var gt=Wt(A,"changes"),wt=Wt(A,"change");if(wt||gt){var Xt={from:Z,to:Ae,text:g.text,removed:g.removed,origin:g.origin};wt&&ms(A,"change",A,Xt),gt&&(A.curOp.changeObjs||(A.curOp.changeObjs=[])).push(Xt)}A.display.selForContextMenu=null}function z(A,g,E,S,K){var Z;S||(S=E),lr(S,E)<0&&(Z=[S,E],E=Z[0],S=Z[1]),typeof g=="string"&&(g=A.splitLines(g)),O(A,{from:E,to:S,text:g,origin:K})}function Y(A,g,E,S){E<A.line?A.line+=S:g<A.line&&(A.line=g,A.ch=0)}function J(A,g,E,S){for(var K=0;K<A.length;++K){var Z=A[K],Ae=!0;if(Z.ranges){Z.copied||(Z=A[K]=Z.deepCopy(),Z.copied=!0);for(var _e=0;_e<Z.ranges.length;_e++)Y(Z.ranges[_e].anchor,g,E,S),Y(Z.ranges[_e].head,g,E,S);continue}for(var Ie=0;Ie<Z.changes.length;++Ie){var Ue=Z.changes[Ie];if(E<Ue.from.line)Ue.from=dn(Ue.from.line+S,Ue.from.ch),Ue.to=dn(Ue.to.line+S,Ue.to.ch);else if(g<=Ue.to.line){Ae=!1;break}}Ae||(A.splice(0,K+1),K=0)}}function se(A,g){var E=g.from.line,S=g.to.line,K=g.text.length-(S-E)-1;J(A.done,E,S,K),J(A.undone,E,S,K)}function ye(A,g,E,S){var K=g,Z=g;return typeof g=="number"?Z=Kr(A,Wu(A,g)):K=Ye(g),K==null?null:(S(Z,K)&&A.cm&&Hu(A.cm,K,E),Z)}function Te(A){this.lines=A,this.parent=null;for(var g=0,E=0;E<A.length;++E)A[E].parent=this,g+=A[E].height;this.height=g}Te.prototype={chunkSize:function(){return this.lines.length},removeInner:function(A,g){for(var E=A,S=A+g;E<S;++E){var K=this.lines[E];this.height-=K.height,qs(K),ms(K,"delete")}this.lines.splice(A,g)},collapse:function(A){A.push.apply(A,this.lines)},insertInner:function(A,g,E){this.height+=E,this.lines=this.lines.slice(0,A).concat(g).concat(this.lines.slice(A));for(var S=0;S<g.length;++S)g[S].parent=this},iterN:function(A,g,E){for(var S=A+g;A<S;++A)if(E(this.lines[A]))return!0}};function ke(A){this.children=A;for(var g=0,E=0,S=0;S<A.length;++S){var K=A[S];g+=K.chunkSize(),E+=K.height,K.parent=this}this.size=g,this.height=E,this.parent=null}ke.prototype={chunkSize:function(){return this.size},removeInner:function(A,g){this.size-=g;for(var E=0;E<this.children.length;++E){var S=this.children[E],K=S.chunkSize();if(A<K){var Z=Math.min(g,K-A),Ae=S.height;if(S.removeInner(A,Z),this.height-=Ae-S.height,K==Z&&(this.children.splice(E--,1),S.parent=null),(g-=Z)==0)break;A=0}else A-=K}if(this.size-g<25&&(this.children.length>1||!(this.children[0]instanceof Te))){var _e=[];this.collapse(_e),this.children=[new Te(_e)],this.children[0].parent=this}},collapse:function(A){for(var g=0;g<this.children.length;++g)this.children[g].collapse(A)},insertInner:function(A,g,E){this.size+=g.length,this.height+=E;for(var S=0;S<this.children.length;++S){var K=this.children[S],Z=K.chunkSize();if(A<=Z){if(K.insertInner(A,g,E),K.lines&&K.lines.length>50){for(var Ae=K.lines.length%25+25,_e=Ae;_e<K.lines.length;){var Ie=new Te(K.lines.slice(_e,_e+=25));K.height-=Ie.height,this.children.splice(++S,0,Ie),Ie.parent=this}K.lines=K.lines.slice(0,Ae),this.maybeSpill()}break}A-=Z}},maybeSpill:function(){if(!(this.children.length<=10)){var A=this;do{var g=A.children.splice(A.children.length-5,5),E=new ke(g);if(A.parent){A.size-=E.size,A.height-=E.height;var K=it(A.parent.children,A);A.parent.children.splice(K+1,0,E)}else{var S=new ke(A.children);S.parent=A,A.children=[S,E],A=S}E.parent=A.parent}while(A.children.length>10);A.parent.maybeSpill()}},iterN:function(A,g,E){for(var S=0;S<this.children.length;++S){var K=this.children[S],Z=K.chunkSize();if(A<Z){var Ae=Math.min(g,Z-A);if(K.iterN(A,Ae,E))return!0;if((g-=Ae)==0)break;A=0}else A-=Z}}};var Qe=function(A,g,E){if(E)for(var S in E)E.hasOwnProperty(S)&&(this[S]=E[S]);this.doc=A,this.node=g};Qe.prototype.clear=function(){var A=this.doc.cm,g=this.line.widgets,E=this.line,S=Ye(E);if(!(S==null||!g)){for(var K=0;K<g.length;++K)g[K]==this&&g.splice(K--,1);g.length||(E.widgets=null);var Z=Qu(this);Gs(E,Math.max(0,E.height-Z)),A&&(Ss(A,function(){et(A,E,-Z),Hu(A,S,"widget")}),ms(A,"lineWidgetCleared",A,this,S))}},Qe.prototype.changed=function(){var A=this,g=this.height,E=this.doc.cm,S=this.line;this.height=null;var K=Qu(this)-g;K&&(zr(this.doc,S)||Gs(S,S.height+K),E&&Ss(E,function(){E.curOp.forceUpdate=!0,et(E,S,K),ms(E,"lineWidgetChanged",E,A,Ye(S))}))},jt(Qe);function et(A,g,E){Gi(g)<(A.curOp&&A.curOp.scrollTop||A.doc.scrollTop)&&Ju(A,E)}function mt(A,g,E,S){var K=new Qe(A,E,S),Z=A.cm;return Z&&K.noHScroll&&(Z.display.alignWidgets=!0),ye(A,g,"widget",function(Ae){var _e=Ae.widgets||(Ae.widgets=[]);if(K.insertAt==null?_e.push(K):_e.splice(Math.min(_e.length,Math.max(0,K.insertAt)),0,K),K.line=Ae,Z&&!zr(A,Ae)){var Ie=Gi(Ae)<A.scrollTop;Gs(Ae,Ae.height+Qu(K)),Ie&&Ju(Z,K.height),Z.curOp.forceUpdate=!0}return!0}),Z&&ms(Z,"lineWidgetAdded",Z,K,typeof g=="number"?g:Ye(g)),K}var lt=0,pt=function(A,g){this.lines=[],this.type=g,this.doc=A,this.id=++lt};pt.prototype.clear=function(){if(!this.explicitlyCleared){var A=this.doc.cm,g=A&&!A.curOp;if(g&&tA(A),Wt(this,"clear")){var E=this.find();E&&ms(this,"clear",E.from,E.to)}for(var S=null,K=null,Z=0;Z<this.lines.length;++Z){var Ae=this.lines[Z],_e=Ga(Ae.markedSpans,this);A&&!this.collapsed?Hu(A,Ye(Ae),"text"):A&&(_e.to!=null&&(K=Ye(Ae)),_e.from!=null&&(S=Ye(Ae))),Ae.markedSpans=Ta(Ae.markedSpans,_e),_e.from==null&&this.collapsed&&!zr(this.doc,Ae)&&A&&Gs(Ae,Nl(A.display))}if(A&&this.collapsed&&!A.options.lineWrapping)for(var Ie=0;Ie<this.lines.length;++Ie){var Ue=Br(this.lines[Ie]),gt=$o(Ue);gt>A.display.maxLineLength&&(A.display.maxLine=Ue,A.display.maxLineLength=gt,A.display.maxLineChanged=!0)}S!=null&&A&&this.collapsed&&Tl(A,S,K+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,A&&fu(A.doc)),A&&ms(A,"markerCleared",A,this,S,K),g&&_l(A),this.parent&&this.parent.clear()}},pt.prototype.find=function(A,g){A==null&&this.type=="bookmark"&&(A=1);for(var E,S,K=0;K<this.lines.length;++K){var Z=this.lines[K],Ae=Ga(Z.markedSpans,this);if(Ae.from!=null&&(E=dn(g?Z:Ye(Z),Ae.from),A==-1))return E;if(Ae.to!=null&&(S=dn(g?Z:Ye(Z),Ae.to),A==1))return S}return E&&{from:E,to:S}},pt.prototype.changed=function(){var A=this,g=this.find(-1,!0),E=this,S=this.doc.cm;!g||!S||Ss(S,function(){var K=g.line,Z=Ye(g.line),Ae=bd(S,Z);if(Ae&&(Mh(Ae),S.curOp.selectionChanged=S.curOp.forceUpdate=!0),S.curOp.updateMaxLine=!0,!zr(E.doc,K)&&E.height!=null){var _e=E.height;E.height=null;var Ie=Qu(E)-_e;Ie&&Gs(K,K.height+Ie)}ms(S,"markerChanged",S,A)})},pt.prototype.attachLine=function(A){if(!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(!g.maybeHiddenMarkers||it(g.maybeHiddenMarkers,this)==-1)&&(g.maybeUnhiddenMarkers||(g.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(A)},pt.prototype.detachLine=function(A){if(this.lines.splice(it(this.lines,A),1),!this.lines.length&&this.doc.cm){var g=this.doc.cm.curOp;(g.maybeHiddenMarkers||(g.maybeHiddenMarkers=[])).push(this)}},jt(pt);function bt(A,g,E,S,K){if(S&&S.shared)return kt(A,g,E,S,K);if(A.cm&&!A.cm.curOp)return Ti(A.cm,bt)(A,g,E,S,K);var Z=new pt(A,K),Ae=lr(g,E);if(S&&Le(S,Z,!1),Ae>0||Ae==0&&Z.clearWhenEmpty!==!1)return Z;if(Z.replacedWith&&(Z.collapsed=!0,Z.widgetNode=At("span",[Z.replacedWith],"CodeMirror-widget"),S.handleMouseEvents||Z.widgetNode.setAttribute("cm-ignore-events","true"),S.insertLeft&&(Z.widgetNode.insertLeft=!0)),Z.collapsed){if(di(A,g.line,g,E,Z)||g.line!=E.line&&di(A,E.line,g,E,Z))throw new Error("Inserting collapsed marker partially overlapping an existing one");ga()}Z.addToHistory&&td(A,{from:g,to:E,origin:"markText"},A.sel,NaN);var _e=g.line,Ie=A.cm,Ue;if(A.iter(_e,E.line+1,function(wt){Ie&&Z.collapsed&&!Ie.options.lineWrapping&&Br(wt)==Ie.display.maxLine&&(Ue=!0),Z.collapsed&&_e!=g.line&&Gs(wt,0),ao(wt,new zs(Z,_e==g.line?g.ch:null,_e==E.line?E.ch:null),A.cm&&A.cm.curOp),++_e}),Z.collapsed&&A.iter(g.line,E.line+1,function(wt){zr(A,wt)&&Gs(wt,0)}),Z.clearOnEnter&&je(Z,"beforeCursorEnter",function(){return Z.clear()}),Z.readOnly&&(Mo(),(A.history.done.length||A.history.undone.length)&&A.clearHistory()),Z.collapsed&&(Z.id=++lt,Z.atomic=!0),Ie){if(Ue&&(Ie.curOp.updateMaxLine=!0),Z.collapsed)Tl(Ie,g.line,E.line+1);else if(Z.className||Z.startStyle||Z.endStyle||Z.css||Z.attributes||Z.title)for(var gt=g.line;gt<=E.line;gt++)Hu(Ie,gt,"text");Z.atomic&&fu(Ie.doc),ms(Ie,"markerAdded",Ie,Z)}return Z}var Bt=function(A,g){this.markers=A,this.primary=g;for(var E=0;E<A.length;++E)A[E].parent=this};Bt.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var A=0;A<this.markers.length;++A)this.markers[A].clear();ms(this,"clear")}},Bt.prototype.find=function(A,g){return this.primary.find(A,g)},jt(Bt);function kt(A,g,E,S,K){S=Le(S),S.shared=!1;var Z=[bt(A,g,E,S,K)],Ae=Z[0],_e=S.widgetNode;return Ka(A,function(Ie){_e&&(S.widgetNode=_e.cloneNode(!0)),Z.push(bt(Ie,ei(Ie,g),ei(Ie,E),S,K));for(var Ue=0;Ue<Ie.linked.length;++Ue)if(Ie.linked[Ue].isParent)return;Ae=ar(Z)}),new Bt(Z,Ae)}function Kt(A){return A.findMarks(dn(A.first,0),A.clipPos(dn(A.lastLine())),function(g){return g.parent})}function Ut(A,g){for(var E=0;E<g.length;E++){var S=g[E],K=S.find(),Z=A.clipPos(K.from),Ae=A.clipPos(K.to);if(lr(Z,Ae)){var _e=bt(A,Z,Ae,S.primary,S.primary.type);S.markers.push(_e),_e.parent=S}}}function It(A){for(var g=function(S){var K=A[S],Z=[K.primary.doc];Ka(K.primary.doc,function(Ie){return Z.push(Ie)});for(var Ae=0;Ae<K.markers.length;Ae++){var _e=K.markers[Ae];it(Z,_e.doc)==-1&&(_e.parent=null,K.markers.splice(Ae--,1))}},E=0;E<A.length;E++)g(E)}var nn=0,qt=function(A,g,E,S,K){if(!(this instanceof qt))return new qt(A,g,E,S,K);E==null&&(E=0),ke.call(this,[new Te([new Ys("",null)])]),this.first=E,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=E;var Z=dn(E,0);this.sel=Pa(Z),this.history=new VA(null),this.id=++nn,this.modeOption=g,this.lineSep=S,this.direction=K=="rtl"?"rtl":"ltr",this.extend=!1,typeof A=="string"&&(A=this.splitLines(A)),_a(this,{from:Z,to:Z,text:A}),ba(this,Pa(Z),Lt)};qt.prototype=br(ke.prototype,{constructor:qt,iter:function(A,g,E){E?this.iterN(A-this.first,g-A,E):this.iterN(this.first,this.first+this.size,A)},insert:function(A,g){for(var E=0,S=0;S<g.length;++S)E+=g[S].height;this.insertInner(A-this.first,g,E)},remove:function(A,g){this.removeInner(A-this.first,g)},getValue:function(A){var g=Vo(this,this.first,this.first+this.size);return A===!1?g:g.join(A||this.lineSeparator())},setValue:Go(function(A){var g=dn(this.first,0),E=this.first+this.size-1;O(this,{from:g,to:dn(E,Kr(this,E).text.length),text:this.splitLines(A),origin:"setValue",full:!0},!0),this.cm&&Ya(this.cm,0,0),ba(this,Pa(g),Lt)}),replaceRange:function(A,g,E,S){g=ei(this,g),E=E?ei(this,E):g,z(this,A,g,E,S)},getRange:function(A,g,E){var S=Wa(this,ei(this,A),ei(this,g));return E===!1?S:E===""?S.join(""):S.join(E||this.lineSeparator())},getLine:function(A){var g=this.getLineHandle(A);return g&&g.text},getLineHandle:function(A){if(yn(this,A))return Kr(this,A)},getLineNumber:function(A){return Ye(A)},getLineHandleVisualStart:function(A){return typeof A=="number"&&(A=Kr(this,A)),Br(A)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(A){return ei(this,A)},getCursor:function(A){var g=this.sel.primary(),E;return A==null||A=="head"?E=g.head:A=="anchor"?E=g.anchor:A=="end"||A=="to"||A===!1?E=g.to():E=g.from(),E},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Go(function(A,g,E){iA(this,ei(this,typeof A=="number"?dn(A,g||0):A),null,E)}),setSelection:Go(function(A,g,E){iA(this,ei(this,A),ei(this,g||A),E)}),extendSelection:Go(function(A,g,E){HA(this,ei(this,A),g&&ei(this,g),E)}),extendSelections:Go(function(A,g){du(this,zl(this,A),g)}),extendSelectionsBy:Go(function(A,g){var E=kn(this.sel.ranges,A);du(this,zl(this,E),g)}),setSelections:Go(function(A,g,E){if(A.length){for(var S=[],K=0;K<A.length;K++)S[K]=new wo(ei(this,A[K].anchor),ei(this,A[K].head||A[K].anchor));g==null&&(g=Math.min(A.length-1,this.sel.primIndex)),ba(this,Yl(this.cm,S,g),E)}}),addSelection:Go(function(A,g,E){var S=this.sel.ranges.slice(0);S.push(new wo(ei(this,A),ei(this,g||A))),ba(this,Yl(this.cm,S,S.length-1),E)}),getSelection:function(A){for(var g=this.sel.ranges,E,S=0;S<g.length;S++){var K=Wa(this,g[S].from(),g[S].to());E=E?E.concat(K):K}return A===!1?E:E.join(A||this.lineSeparator())},getSelections:function(A){for(var g=[],E=this.sel.ranges,S=0;S<E.length;S++){var K=Wa(this,E[S].from(),E[S].to());A!==!1&&(K=K.join(A||this.lineSeparator())),g[S]=K}return g},replaceSelection:function(A,g,E){for(var S=[],K=0;K<this.sel.ranges.length;K++)S[K]=A;this.replaceSelections(S,g,E||"+input")},replaceSelections:Go(function(A,g,E){for(var S=[],K=this.sel,Z=0;Z<K.ranges.length;Z++){var Ae=K.ranges[Z];S[Z]={from:Ae.from(),to:Ae.to(),text:this.splitLines(A[Z]),origin:E}}for(var _e=g&&g!="end"&&cu(this,S,g),Ie=S.length-1;Ie>=0;Ie--)O(this,S[Ie]);_e?ql(this,_e):this.cm&&As(this.cm)}),undo:Go(function(){c(this,"undo")}),redo:Go(function(){c(this,"redo")}),undoSelection:Go(function(){c(this,"undo",!0)}),redoSelection:Go(function(){c(this,"redo",!0)}),setExtending:function(A){this.extend=A},getExtending:function(){return this.extend},historySize:function(){for(var A=this.history,g=0,E=0,S=0;S<A.done.length;S++)A.done[S].ranges||++g;for(var K=0;K<A.undone.length;K++)A.undone[K].ranges||++E;return{undo:g,redo:E}},clearHistory:function(){var A=this;this.history=new VA(this.history),Ka(this,function(g){return g.history=A.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(A){return A&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(A){return this.history.generation==(A||this.cleanGeneration)},getHistory:function(){return{done:vs(this.history.done),undone:vs(this.history.undone)}},setHistory:function(A){var g=this.history=new VA(this.history);g.done=vs(A.done.slice(0),null,!0),g.undone=vs(A.undone.slice(0),null,!0)},setGutterMarker:Go(function(A,g,E){return ye(this,A,"gutter",function(S){var K=S.gutterMarkers||(S.gutterMarkers={});return K[g]=E,!E&&ce(K)&&(S.gutterMarkers=null),!0})}),clearGutter:Go(function(A){var g=this;this.iter(function(E){E.gutterMarkers&&E.gutterMarkers[A]&&ye(g,E,"gutter",function(){return E.gutterMarkers[A]=null,ce(E.gutterMarkers)&&(E.gutterMarkers=null),!0})})}),lineInfo:function(A){var g;if(typeof A=="number"){if(!yn(this,A)||(g=A,A=Kr(this,A),!A))return null}else if(g=Ye(A),g==null)return null;return{line:g,handle:A,text:A.text,gutterMarkers:A.gutterMarkers,textClass:A.textClass,bgClass:A.bgClass,wrapClass:A.wrapClass,widgets:A.widgets}},addLineClass:Go(function(A,g,E){return ye(this,A,g=="gutter"?"gutter":"class",function(S){var K=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass";if(!S[K])S[K]=E;else{if(Ee(E).test(S[K]))return!1;S[K]+=" "+E}return!0})}),removeLineClass:Go(function(A,g,E){return ye(this,A,g=="gutter"?"gutter":"class",function(S){var K=g=="text"?"textClass":g=="background"?"bgClass":g=="gutter"?"gutterClass":"wrapClass",Z=S[K];if(Z)if(E==null)S[K]=null;else{var Ae=Z.match(Ee(E));if(!Ae)return!1;var _e=Ae.index+Ae[0].length;S[K]=Z.slice(0,Ae.index)+(!Ae.index||_e==Z.length?"":" ")+Z.slice(_e)||null}else return!1;return!0})}),addLineWidget:Go(function(A,g,E){return mt(this,A,g,E)}),removeLineWidget:function(A){A.clear()},markText:function(A,g,E){return bt(this,ei(this,A),ei(this,g),E,E&&E.type||"range")},setBookmark:function(A,g){var E={replacedWith:g&&(g.nodeType==null?g.widget:g),insertLeft:g&&g.insertLeft,clearWhenEmpty:!1,shared:g&&g.shared,handleMouseEvents:g&&g.handleMouseEvents};return A=ei(this,A),bt(this,A,A,E,"bookmark")},findMarksAt:function(A){A=ei(this,A);var g=[],E=Kr(this,A.line).markedSpans;if(E)for(var S=0;S<E.length;++S){var K=E[S];(K.from==null||K.from<=A.ch)&&(K.to==null||K.to>=A.ch)&&g.push(K.marker.parent||K.marker)}return g},findMarks:function(A,g,E){A=ei(this,A),g=ei(this,g);var S=[],K=A.line;return this.iter(A.line,g.line+1,function(Z){var Ae=Z.markedSpans;if(Ae)for(var _e=0;_e<Ae.length;_e++){var Ie=Ae[_e];!(Ie.to!=null&&K==A.line&&A.ch>=Ie.to||Ie.from==null&&K!=A.line||Ie.from!=null&&K==g.line&&Ie.from>=g.ch)&&(!E||E(Ie.marker))&&S.push(Ie.marker.parent||Ie.marker)}++K}),S},getAllMarks:function(){var A=[];return this.iter(function(g){var E=g.markedSpans;if(E)for(var S=0;S<E.length;++S)E[S].from!=null&&A.push(E[S].marker)}),A},posFromIndex:function(A){var g,E=this.first,S=this.lineSeparator().length;return this.iter(function(K){var Z=K.text.length+S;if(Z>A)return g=A,!0;A-=Z,++E}),ei(this,dn(E,g))},indexFromPos:function(A){A=ei(this,A);var g=A.ch;if(A.line<this.first||A.ch<0)return 0;var E=this.lineSeparator().length;return this.iter(this.first,A.line,function(S){g+=S.text.length+E}),g},copy:function(A){var g=new qt(Vo(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return g.scrollTop=this.scrollTop,g.scrollLeft=this.scrollLeft,g.sel=this.sel,g.extend=!1,A&&(g.history.undoDepth=this.history.undoDepth,g.setHistory(this.getHistory())),g},linkedDoc:function(A){A||(A={});var g=this.first,E=this.first+this.size;A.from!=null&&A.from>g&&(g=A.from),A.to!=null&&A.to<E&&(E=A.to);var S=new qt(Vo(this,g,E),A.mode||this.modeOption,g,this.lineSep,this.direction);return A.sharedHist&&(S.history=this.history),(this.linked||(this.linked=[])).push({doc:S,sharedHist:A.sharedHist}),S.linked=[{doc:this,isParent:!0,sharedHist:A.sharedHist}],Ut(S,Kt(this)),S},unlinkDoc:function(A){if(A instanceof Zo&&(A=A.doc),this.linked)for(var g=0;g<this.linked.length;++g){var E=this.linked[g];if(E.doc==A){this.linked.splice(g,1),A.unlinkDoc(this),It(Kt(this));break}}if(A.history==this.history){var S=[A.id];Ka(A,function(K){return S.push(K.id)},!0),A.history=new VA(null),A.history.done=vs(this.history.done,S),A.history.undone=vs(this.history.undone,S)}},iterLinkedDocs:function(A){Ka(this,A)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(A){return this.lineSep?A.split(this.lineSep):Qr(A)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Go(function(A){A!="rtl"&&(A="ltr"),A!=this.direction&&(this.direction=A,this.iter(function(g){return g.order=null}),this.cm&&Al(this.cm))})}),qt.prototype.eachLine=qt.prototype.iter;var xn=0;function Sn(A){var g=this;if(Nn(g),!(dt(g,A)||Eu(g.display,A))){tn(A),p&&(xn=+new Date);var E=Bu(g,A,!0),S=A.dataTransfer.files;if(!(!E||g.isReadOnly()))if(S&&S.length&&window.FileReader&&window.File)for(var K=S.length,Z=Array(K),Ae=0,_e=function(){++Ae==K&&Ti(g,function(){E=ei(g.doc,E);var Yt={from:E,to:E,text:g.doc.splitLines(Z.filter(function(bn){return bn!=null}).join(g.doc.lineSeparator())),origin:"paste"};O(g.doc,Yt),ql(g.doc,Pa(ei(g.doc,E),ei(g.doc,$a(Yt))))})()},Ie=function(Yt,bn){if(g.options.allowDropFileTypes&&it(g.options.allowDropFileTypes,Yt.type)==-1){_e();return}var Ln=new FileReader;Ln.onerror=function(){return _e()},Ln.onload=function(){var rr=Ln.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(rr)){_e();return}Z[bn]=rr,_e()},Ln.readAsText(Yt)},Ue=0;Ue<S.length;Ue++)Ie(S[Ue],Ue);else{if(g.state.draggingText&&g.doc.sel.contains(E)>-1){g.state.draggingText(A),setTimeout(function(){return g.display.input.focus()},20);return}try{var gt=A.dataTransfer.getData("Text");if(gt){var wt;if(g.state.draggingText&&!g.state.draggingText.copy&&(wt=g.listSelections()),Hs(g.doc,Pa(E,E)),wt)for(var Xt=0;Xt<wt.length;++Xt)z(g.doc,"",wt[Xt].anchor,wt[Xt].head,"drag");g.replaceSelection(gt,"around","paste"),g.display.input.focus()}}catch{}}}}function Cn(A,g){if(p&&(!A.state.draggingText||+new Date-xn<100)){on(g);return}if(!(dt(A,g)||Eu(A.display,g))&&(g.dataTransfer.setData("Text",A.getSelection()),g.dataTransfer.effectAllowed="copyMove",g.dataTransfer.setDragImage&&!j)){var E=xe("img",null,null,"position: fixed; left: 0; top: 0;");E.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",U&&(E.width=E.height=1,A.display.wrapper.appendChild(E),E._top=E.offsetTop),g.dataTransfer.setDragImage(E,0,0),U&&E.parentNode.removeChild(E)}}function In(A,g){var E=Bu(A,g);if(E){var S=document.createDocumentFragment();Sc(A,E,S),A.display.dragCursor||(A.display.dragCursor=xe("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),A.display.lineSpace.insertBefore(A.display.dragCursor,A.display.cursorDiv)),De(A.display.dragCursor,S)}}function Nn(A){A.display.dragCursor&&(A.display.lineSpace.removeChild(A.display.dragCursor),A.display.dragCursor=null)}function Rn(A){if(document.getElementsByClassName){for(var g=document.getElementsByClassName("CodeMirror"),E=[],S=0;S<g.length;S++){var K=g[S].CodeMirror;K&&E.push(K)}E.length&&E[0].operation(function(){for(var Z=0;Z<E.length;Z++)A(E[Z])})}}var kr=!1;function Ri(){kr||(Xi(),kr=!0)}function Xi(){var A;je(window,"resize",function(){A==null&&(A=setTimeout(function(){A=null,Rn(_i)},100))}),je(window,"blur",function(){return Rn(us)})}function _i(A){var g=A.display;g.cachedCharWidth=g.cachedTextHeight=g.cachedPaddingH=null,g.scrollbarsClipped=!1,A.setSize()}for(var Bi={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Qo=0;Qo<10;Qo++)Bi[Qo+48]=Bi[Qo+96]=String(Qo);for(var Lo=65;Lo<=90;Lo++)Bi[Lo]=String.fromCharCode(Lo);for(var So=1;So<=12;So++)Bi[So+111]=Bi[So+63235]="F"+So;var fo={};fo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},fo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},fo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},fo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},fo.default=V?fo.macDefault:fo.pcDefault;function ca(A){var g=A.split(/-(?!$)/);A=g[g.length-1];for(var E,S,K,Z,Ae=0;Ae<g.length-1;Ae++){var _e=g[Ae];if(/^(cmd|meta|m)$/i.test(_e))Z=!0;else if(/^a(lt)?$/i.test(_e))E=!0;else if(/^(c|ctrl|control)$/i.test(_e))S=!0;else if(/^s(hift)?$/i.test(_e))K=!0;else throw new Error("Unrecognized modifier name: "+_e)}return E&&(A="Alt-"+A),S&&(A="Ctrl-"+A),Z&&(A="Cmd-"+A),K&&(A="Shift-"+A),A}function Ho(A){var g={};for(var E in A)if(A.hasOwnProperty(E)){var S=A[E];if(/^(name|fallthrough|(de|at)tach)$/.test(E))continue;if(S=="..."){delete A[E];continue}for(var K=kn(E.split(" "),ca),Z=0;Z<K.length;Z++){var Ae=void 0,_e=void 0;Z==K.length-1?(_e=K.join(" "),Ae=S):(_e=K.slice(0,Z+1).join(" "),Ae="...");var Ie=g[_e];if(!Ie)g[_e]=Ae;else if(Ie!=Ae)throw new Error("Inconsistent bindings for "+_e)}delete A[E]}for(var Ue in g)A[Ue]=g[Ue];return A}function rs(A,g,E,S){g=Vl(g);var K=g.call?g.call(A,S):g[A];if(K===!1)return"nothing";if(K==="...")return"multi";if(K!=null&&E(K))return"handled";if(g.fallthrough){if(Object.prototype.toString.call(g.fallthrough)!="[object Array]")return rs(A,g.fallthrough,E,S);for(var Z=0;Z<g.fallthrough.length;Z++){var Ae=rs(A,g.fallthrough[Z],E,S);if(Ae)return Ae}}}function xl(A){var g=typeof A=="string"?A:Bi[A.keyCode];return g=="Ctrl"||g=="Alt"||g=="Shift"||g=="Mod"}function BA(A,g,E){var S=A;return g.altKey&&S!="Alt"&&(A="Alt-"+A),(he?g.metaKey:g.ctrlKey)&&S!="Ctrl"&&(A="Ctrl-"+A),(he?g.ctrlKey:g.metaKey)&&S!="Mod"&&(A="Cmd-"+A),!E&&g.shiftKey&&S!="Shift"&&(A="Shift-"+A),A}function pu(A,g){if(U&&A.keyCode==34&&A.char)return!1;var E=Bi[A.keyCode];return E==null||A.altGraphKey?!1:(A.keyCode==3&&A.code&&(E=A.code),BA(E,A,g))}function Vl(A){return typeof A=="string"?fo[A]:A}function $l(A,g){for(var E=A.doc.sel.ranges,S=[],K=0;K<E.length;K++){for(var Z=g(E[K]);S.length&&lr(Z.from,ar(S).to)<=0;){var Ae=S.pop();if(lr(Ae.from,Z.from)<0){Z.from=Ae.from;break}}S.push(Z)}Ss(A,function(){for(var _e=S.length-1;_e>=0;_e--)z(A.doc,"",S[_e].from,S[_e].to,"+delete");As(A)})}function oA(A,g,E){var S=St(A.text,g+E,E);return S<0||S>A.text.length?null:S}function Rl(A,g,E){var S=oA(A,g.ch,E);return S==null?null:new dn(g.line,S,E<0?"after":"before")}function Pu(A,g,E,S,K){if(A){g.doc.direction=="rtl"&&(K=-K);var Z=Ce(E,g.doc.direction);if(Z){var Ae=K<0?ar(Z):Z[0],_e=K<0==(Ae.level==1),Ie=_e?"after":"before",Ue;if(Ae.level>0||g.doc.direction=="rtl"){var gt=ll(g,E);Ue=K<0?E.text.length-1:0;var wt=Cl(g,gt,Ue).top;Ue=Ht(function(Xt){return Cl(g,gt,Xt).top==wt},K<0==(Ae.level==1)?Ae.from:Ae.to-1,Ue),Ie=="before"&&(Ue=oA(E,Ue,1))}else Ue=K<0?Ae.to:Ae.from;return new dn(S,Ue,Ie)}}return new dn(S,K<0?E.text.length:0,K<0?"before":"after")}function xa(A,g,E,S){var K=Ce(g,A.doc.direction);if(!K)return Rl(g,E,S);E.ch>=g.text.length?(E.ch=g.text.length,E.sticky="before"):E.ch<=0&&(E.ch=0,E.sticky="after");var Z=$e(K,E.ch,E.sticky),Ae=K[Z];if(A.doc.direction=="ltr"&&Ae.level%2==0&&(S>0?Ae.to>E.ch:Ae.from<E.ch))return Rl(g,E,S);var _e=function(er,Cr){return oA(g,er instanceof dn?er.ch:er,Cr)},Ie,Ue=function(er){return A.options.lineWrapping?(Ie=Ie||ll(A,g),ts(A,g,Ie,er)):{begin:0,end:g.text.length}},gt=Ue(E.sticky=="before"?_e(E,-1):E.ch);if(A.doc.direction=="rtl"||Ae.level==1){var wt=Ae.level==1==S<0,Xt=_e(E,wt?1:-1);if(Xt!=null&&(wt?Xt<=Ae.to&&Xt<=gt.end:Xt>=Ae.from&&Xt>=gt.begin)){var Yt=wt?"before":"after";return new dn(E.line,Xt,Yt)}}var bn=function(er,Cr,pr){for(var Or=function(yo,Fa){return Fa?new dn(E.line,_e(yo,1),"before"):new dn(E.line,yo,"after")};er>=0&&er<K.length;er+=Cr){var oi=K[er],jr=Cr>0==(oi.level!=1),zi=jr?pr.begin:_e(pr.end,-1);if(oi.from<=zi&&zi<oi.to||(zi=jr?oi.from:_e(oi.to,-1),pr.begin<=zi&&zi<pr.end))return Or(zi,jr)}},Ln=bn(Z+S,S,gt);if(Ln)return Ln;var rr=S>0?gt.end:_e(gt.begin,-1);return rr!=null&&!(S>0&&rr==g.text.length)&&(Ln=bn(S>0?0:K.length-1,S,Ue(rr)),Ln)?Ln:null}var Ku={selectAll:Kl,singleSelection:function(A){return A.setSelection(A.getCursor("anchor"),A.getCursor("head"),Lt)},killLine:function(A){return $l(A,function(g){if(g.empty()){var E=Kr(A.doc,g.head.line).text.length;return g.head.ch==E&&g.head.line<A.lastLine()?{from:g.head,to:dn(g.head.line+1,0)}:{from:g.head,to:dn(g.head.line,E)}}else return{from:g.from(),to:g.to()}})},deleteLine:function(A){return $l(A,function(g){return{from:dn(g.from().line,0),to:ei(A.doc,dn(g.to().line+1,0))}})},delLineLeft:function(A){return $l(A,function(g){return{from:dn(g.from().line,0),to:g.from()}})},delWrappedLineLeft:function(A){return $l(A,function(g){var E=A.charCoords(g.head,"div").top+5,S=A.coordsChar({left:0,top:E},"div");return{from:S,to:g.from()}})},delWrappedLineRight:function(A){return $l(A,function(g){var E=A.charCoords(g.head,"div").top+5,S=A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:E},"div");return{from:g.from(),to:S}})},undo:function(A){return A.undo()},redo:function(A){return A.redo()},undoSelection:function(A){return A.undoSelection()},redoSelection:function(A){return A.redoSelection()},goDocStart:function(A){return A.extendSelection(dn(A.firstLine(),0))},goDocEnd:function(A){return A.extendSelection(dn(A.lastLine()))},goLineStart:function(A){return A.extendSelectionsBy(function(g){return Hl(A,g.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(A){return A.extendSelectionsBy(function(g){return Ns(A,g.head)},{origin:"+move",bias:1})},goLineEnd:function(A){return A.extendSelectionsBy(function(g){return Dc(A,g.head.line)},{origin:"+move",bias:-1})},goLineRight:function(A){return A.extendSelectionsBy(function(g){var E=A.cursorCoords(g.head,"div").top+5;return A.coordsChar({left:A.display.lineDiv.offsetWidth+100,top:E},"div")},Rt)},goLineLeft:function(A){return A.extendSelectionsBy(function(g){var E=A.cursorCoords(g.head,"div").top+5;return A.coordsChar({left:0,top:E},"div")},Rt)},goLineLeftSmart:function(A){return A.extendSelectionsBy(function(g){var E=A.cursorCoords(g.head,"div").top+5,S=A.coordsChar({left:0,top:E},"div");return S.ch<A.getLine(S.line).search(/\S/)?Ns(A,g.head):S},Rt)},goLineUp:function(A){return A.moveV(-1,"line")},goLineDown:function(A){return A.moveV(1,"line")},goPageUp:function(A){return A.moveV(-1,"page")},goPageDown:function(A){return A.moveV(1,"page")},goCharLeft:function(A){return A.moveH(-1,"char")},goCharRight:function(A){return A.moveH(1,"char")},goColumnLeft:function(A){return A.moveH(-1,"column")},goColumnRight:function(A){return A.moveH(1,"column")},goWordLeft:function(A){return A.moveH(-1,"word")},goGroupRight:function(A){return A.moveH(1,"group")},goGroupLeft:function(A){return A.moveH(-1,"group")},goWordRight:function(A){return A.moveH(1,"word")},delCharBefore:function(A){return A.deleteH(-1,"codepoint")},delCharAfter:function(A){return A.deleteH(1,"char")},delWordBefore:function(A){return A.deleteH(-1,"word")},delWordAfter:function(A){return A.deleteH(1,"word")},delGroupBefore:function(A){return A.deleteH(-1,"group")},delGroupAfter:function(A){return A.deleteH(1,"group")},indentAuto:function(A){return A.indentSelection("smart")},indentMore:function(A){return A.indentSelection("add")},indentLess:function(A){return A.indentSelection("subtract")},insertTab:function(A){return A.replaceSelection("	")},insertSoftTab:function(A){for(var g=[],E=A.listSelections(),S=A.options.tabSize,K=0;K<E.length;K++){var Z=E[K].from(),Ae=Pe(A.getLine(Z.line),Z.ch,S);g.push(rn(S-Ae%S))}A.replaceSelections(g)},defaultTab:function(A){A.somethingSelected()?A.indentSelection("add"):A.execCommand("insertTab")},transposeChars:function(A){return Ss(A,function(){for(var g=A.listSelections(),E=[],S=0;S<g.length;S++)if(g[S].empty()){var K=g[S].head,Z=Kr(A.doc,K.line).text;if(Z){if(K.ch==Z.length&&(K=new dn(K.line,K.ch-1)),K.ch>0)K=new dn(K.line,K.ch+1),A.replaceRange(Z.charAt(K.ch-1)+Z.charAt(K.ch-2),dn(K.line,K.ch-2),K,"+transpose");else if(K.line>A.doc.first){var Ae=Kr(A.doc,K.line-1).text;Ae&&(K=new dn(K.line,1),A.replaceRange(Z.charAt(0)+A.doc.lineSeparator()+Ae.charAt(Ae.length-1),dn(K.line-1,Ae.length-1),K,"+transpose"))}}E.push(new wo(K,K))}A.setSelections(E)})},newlineAndIndent:function(A){return Ss(A,function(){for(var g=A.listSelections(),E=g.length-1;E>=0;E--)A.replaceRange(A.doc.lineSeparator(),g[E].anchor,g[E].head,"+input");g=A.listSelections();for(var S=0;S<g.length;S++)A.indentLine(g[S].from().line,null,!0);As(A)})},openLine:function(A){return A.replaceSelection(`
`,"start")},toggleOverwrite:function(A){return A.toggleOverwrite()}};function Hl(A,g){var E=Kr(A.doc,g),S=Br(E);return S!=E&&(g=Ye(S)),Pu(!0,A,S,g,1)}function Dc(A,g){var E=Kr(A.doc,g),S=Rr(E);return S!=E&&(g=Ye(S)),Pu(!0,A,E,g,-1)}function Ns(A,g){var E=Hl(A,g.line),S=Kr(A.doc,E.line),K=Ce(S,A.doc.direction);if(!K||K[0].level==0){var Z=Math.max(E.ch,S.text.search(/\S/)),Ae=g.line==E.line&&g.ch<=Z&&g.ch;return dn(E.line,Ae?0:Z,E.sticky)}return E}function ds(A,g,E){if(typeof g=="string"&&(g=Ku[g],!g))return!1;A.display.input.ensurePolled();var S=A.display.shift,K=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),E&&(A.display.shift=!1),K=g(A)!=ft}finally{A.display.shift=S,A.state.suppressEdits=!1}return K}function Ra(A,g,E){for(var S=0;S<A.state.keyMaps.length;S++){var K=rs(g,A.state.keyMaps[S],E,A);if(K)return K}return A.options.extraKeys&&rs(g,A.options.extraKeys,E,A)||rs(g,A.options.keyMap,E,A)}var Cs=new Be;function sA(A,g,E,S){var K=A.state.keySeq;if(K){if(xl(g))return"handled";if(/\'$/.test(g)?A.state.keySeq=null:Cs.set(50,function(){A.state.keySeq==K&&(A.state.keySeq=null,A.display.input.reset())}),lf(A,K+" "+g,E,S))return!0}return lf(A,g,E,S)}function lf(A,g,E,S){var K=Ra(A,g,S);return K=="multi"&&(A.state.keySeq=g),K=="handled"&&ms(A,"keyHandled",A,g,E),(K=="handled"||K=="multi")&&(tn(E),bA(A)),!!K}function pc(A,g){var E=pu(g,!0);return E?g.shiftKey&&!A.state.keySeq?sA(A,"Shift-"+E,g,function(S){return ds(A,S,!0)})||sA(A,E,g,function(S){if(typeof S=="string"?/^go[A-Z]/.test(S):S.motion)return ds(A,S)}):sA(A,E,g,function(S){return ds(A,S)}):!1}function sm(A,g,E){return sA(A,"'"+E+"'",g,function(S){return ds(A,S,!0)})}var Oh=null;function th(A){var g=this;if(!(A.target&&A.target!=g.display.input.getField())&&(g.curOp.focus=Ne(Gt(g)),!dt(g,A))){p&&v<11&&A.keyCode==27&&(A.returnValue=!1);var E=A.keyCode;g.display.shift=E==16||A.shiftKey;var S=pc(g,A);U&&(Oh=S?E:null,!S&&E==88&&!ma&&(V?A.metaKey:A.ctrlKey)&&g.replaceSelection("",null,"cut")),i&&!V&&!S&&E==46&&A.shiftKey&&!A.ctrlKey&&document.execCommand&&document.execCommand("cut"),E==18&&!/\bCodeMirror-crosshair\b/.test(g.display.lineDiv.className)&&Ma(g)}}function Ma(A){var g=A.display.lineDiv;Se(g,"CodeMirror-crosshair");function E(S){(S.keyCode==18||!S.altKey)&&(me(g,"CodeMirror-crosshair"),Je(document,"keyup",E),Je(document,"mouseover",E))}je(document,"keyup",E),je(document,"mouseover",E)}function cl(A){A.keyCode==16&&(this.doc.sel.shift=!1),dt(this,A)}function OA(A){var g=this;if(!(A.target&&A.target!=g.display.input.getField())&&!(Eu(g.display,A)||dt(g,A)||A.ctrlKey&&!A.altKey||V&&A.metaKey)){var E=A.keyCode,S=A.charCode;if(U&&E==Oh){Oh=null,tn(A);return}if(!(U&&(!A.which||A.which<10)&&pc(g,A))){var K=String.fromCharCode(S??E);K!="\b"&&(sm(g,A,K)||g.display.input.onKeyPress(A))}}}var jf=400,nd=function(A,g,E){this.time=A,this.pos=g,this.button=E};nd.prototype.compare=function(A,g,E){return this.time+jf>A&&lr(g,this.pos)==0&&E==this.button};var aA,dl;function Sp(A,g){var E=+new Date;return dl&&dl.compare(E,A,g)?(aA=dl=null,"triple"):aA&&aA.compare(E,A,g)?(dl=new nd(E,A,g),aA=null,"double"):(aA=new nd(E,A,g),dl=null,"single")}function uf(A){var g=this,E=g.display;if(!(dt(g,A)||E.activeTouch&&E.input.supportsTouch())){if(E.input.ensurePolled(),E.shift=A.shiftKey,Eu(E,A)){x||(E.scroller.draggable=!1,setTimeout(function(){return E.scroller.draggable=!0},100));return}if(!Fc(g,A)){var S=Bu(g,A),K=Hn(A),Z=S?Sp(S,K):"single";Ft(g).focus(),K==1&&g.state.selectingText&&g.state.selectingText(A),!(S&&am(g,K,S,Z,A))&&(K==1?S?Af(g,S,Z,A):Sr(A)==E.scroller&&tn(A):K==2?(S&&HA(g.doc,S),setTimeout(function(){return E.input.focus()},20)):K==3&&(fe?g.display.input.onContextMenu(A):NA(g)))}}}function am(A,g,E,S,K){var Z="Click";return S=="double"?Z="Double"+Z:S=="triple"&&(Z="Triple"+Z),Z=(g==1?"Left":g==2?"Middle":"Right")+Z,sA(A,BA(Z,K),K,function(Ae){if(typeof Ae=="string"&&(Ae=Ku[Ae]),!Ae)return!1;var _e=!1;try{A.isReadOnly()&&(A.state.suppressEdits=!0),_e=Ae(A,E)!=ft}finally{A.state.suppressEdits=!1}return _e})}function Od(A,g,E){var S=A.getOption("configureMouse"),K=S?S(A,g,E):{};if(K.unit==null){var Z=ne?E.shiftKey&&E.metaKey:E.altKey;K.unit=Z?"rectangle":g=="single"?"char":g=="double"?"word":"line"}return(K.extend==null||A.doc.extend)&&(K.extend=A.doc.extend||E.shiftKey),K.addNew==null&&(K.addNew=V?E.metaKey:E.ctrlKey),K.moveOnDrag==null&&(K.moveOnDrag=!(V?E.altKey:E.ctrlKey)),K}function Af(A,g,E,S){p?setTimeout(Tt(jA,A),0):A.curOp.focus=Ne(Gt(A));var K=Od(A,E,S),Z=A.doc.sel,Ae;A.options.dragDrop&&xr&&!A.isReadOnly()&&E=="single"&&(Ae=Z.contains(g))>-1&&(lr((Ae=Z.ranges[Ae]).from(),g)<0||g.xRel>0)&&(lr(Ae.to(),g)>0||g.xRel<0)?Nf(A,S,g,K):Wf(A,S,g,K)}function Nf(A,g,E,S){var K=A.display,Z=!1,Ae=Ti(A,function(Ue){x&&(K.scroller.draggable=!1),A.state.draggingText=!1,A.state.delayingBlurEvent&&(A.hasFocus()?A.state.delayingBlurEvent=!1:NA(A)),Je(K.wrapper.ownerDocument,"mouseup",Ae),Je(K.wrapper.ownerDocument,"mousemove",_e),Je(K.scroller,"dragstart",Ie),Je(K.scroller,"drop",Ae),Z||(tn(Ue),S.addNew||HA(A.doc,E,null,null,S.extend),x&&!j||p&&v==9?setTimeout(function(){K.wrapper.ownerDocument.body.focus({preventScroll:!0}),K.input.focus()},20):K.input.focus())}),_e=function(Ue){Z=Z||Math.abs(g.clientX-Ue.clientX)+Math.abs(g.clientY-Ue.clientY)>=10},Ie=function(){return Z=!0};x&&(K.scroller.draggable=!0),A.state.draggingText=Ae,Ae.copy=!S.moveOnDrag,je(K.wrapper.ownerDocument,"mouseup",Ae),je(K.wrapper.ownerDocument,"mousemove",_e),je(K.scroller,"dragstart",Ie),je(K.scroller,"drop",Ae),A.state.delayingBlurEvent=!0,setTimeout(function(){return K.input.focus()},20),K.scroller.dragDrop&&K.scroller.dragDrop()}function Id(A,g,E){if(E=="char")return new wo(g,g);if(E=="word")return A.findWordAt(g);if(E=="line")return new wo(dn(g.line,0),ei(A.doc,dn(g.line+1,0)));var S=E(A,g);return new wo(S.from,S.to)}function Wf(A,g,E,S){p&&NA(A);var K=A.display,Z=A.doc;tn(g);var Ae,_e,Ie=Z.sel,Ue=Ie.ranges;if(S.addNew&&!S.extend?(_e=Z.sel.contains(E),_e>-1?Ae=Ue[_e]:Ae=new wo(E,E)):(Ae=Z.sel.primary(),_e=Z.sel.primIndex),S.unit=="rectangle")S.addNew||(Ae=new wo(E,E)),E=Bu(A,g,!0,!0),_e=-1;else{var gt=Id(A,E,S.unit);S.extend?Ae=$s(Ae,gt.anchor,gt.head,S.extend):Ae=gt}S.addNew?_e==-1?(_e=Ue.length,ba(Z,Yl(A,Ue.concat([Ae]),_e),{scroll:!1,origin:"*mouse"})):Ue.length>1&&Ue[_e].empty()&&S.unit=="char"&&!S.extend?(ba(Z,Yl(A,Ue.slice(0,_e).concat(Ue.slice(_e+1)),0),{scroll:!1,origin:"*mouse"}),Ie=Z.sel):bl(Z,_e,Ae,Zt):(_e=0,ba(Z,new Os([Ae],0),Zt),Ie=Z.sel);var wt=E;function Xt(pr){if(lr(wt,pr)!=0)if(wt=pr,S.unit=="rectangle"){for(var Or=[],oi=A.options.tabSize,jr=Pe(Kr(Z,E.line).text,E.ch,oi),zi=Pe(Kr(Z,pr.line).text,pr.ch,oi),yo=Math.min(jr,zi),Fa=Math.max(jr,zi),Zs=Math.min(E.line,pr.line),wa=Math.min(A.lastLine(),Math.max(E.line,pr.line));Zs<=wa;Zs++){var Ha=Kr(Z,Zs).text,Za=_n(Ha,yo,oi);yo==Fa?Or.push(new wo(dn(Zs,Za),dn(Zs,Za))):Ha.length>Za&&Or.push(new wo(dn(Zs,Za),dn(Zs,_n(Ha,Fa,oi))))}Or.length||Or.push(new wo(E,E)),ba(Z,Yl(A,Ie.ranges.slice(0,_e).concat(Or),_e),{origin:"*mouse",scroll:!1}),A.scrollIntoView(pr)}else{var Ru=Ae,hl=Id(A,pr,S.unit),Sa=Ru.anchor,is;lr(hl.anchor,Sa)>0?(is=hl.head,Sa=la(Ru.from(),hl.anchor)):(is=hl.anchor,Sa=as(Ru.to(),hl.head));var gi=Ie.ranges.slice(0);gi[_e]=mc(A,new wo(ei(Z,Sa),is)),ba(Z,Yl(A,gi,_e),Zt)}}var Yt=K.wrapper.getBoundingClientRect(),bn=0;function Ln(pr){var Or=++bn,oi=Bu(A,pr,!0,S.unit=="rectangle");if(oi)if(lr(oi,wt)!=0){A.curOp.focus=Ne(Gt(A)),Xt(oi);var jr=Xu(K,Z);(oi.line>=jr.to||oi.line<jr.from)&&setTimeout(Ti(A,function(){bn==Or&&Ln(pr)}),150)}else{var zi=pr.clientY<Yt.top?-20:pr.clientY>Yt.bottom?20:0;zi&&setTimeout(Ti(A,function(){bn==Or&&(K.scroller.scrollTop+=zi,Ln(pr))}),50)}}function rr(pr){A.state.selectingText=!1,bn=1/0,pr&&(tn(pr),K.input.focus()),Je(K.wrapper.ownerDocument,"mousemove",er),Je(K.wrapper.ownerDocument,"mouseup",Cr),Z.history.lastSelOrigin=null}var er=Ti(A,function(pr){pr.buttons===0||!Hn(pr)?rr(pr):Ln(pr)}),Cr=Ti(A,rr);A.state.selectingText=Cr,je(K.wrapper.ownerDocument,"mousemove",er),je(K.wrapper.ownerDocument,"mouseup",Cr)}function mc(A,g){var E=g.anchor,S=g.head,K=Kr(A.doc,E.line);if(lr(E,S)==0&&E.sticky==S.sticky)return g;var Z=Ce(K);if(!Z)return g;var Ae=$e(Z,E.ch,E.sticky),_e=Z[Ae];if(_e.from!=E.ch&&_e.to!=E.ch)return g;var Ie=Ae+(_e.from==E.ch==(_e.level!=1)?0:1);if(Ie==0||Ie==Z.length)return g;var Ue;if(S.line!=E.line)Ue=(S.line-E.line)*(A.doc.direction=="ltr"?1:-1)>0;else{var gt=$e(Z,S.ch,S.sticky),wt=gt-Ae||(S.ch-E.ch)*(_e.level==1?-1:1);gt==Ie-1||gt==Ie?Ue=wt<0:Ue=wt>0}var Xt=Z[Ie+(Ue?-1:0)],Yt=Ue==(Xt.level==1),bn=Yt?Xt.from:Xt.to,Ln=Yt?"after":"before";return E.ch==bn&&E.sticky==Ln?g:new wo(new dn(E.line,bn,Ln),S)}function lm(A,g,E,S){var K,Z;if(g.touches)K=g.touches[0].clientX,Z=g.touches[0].clientY;else try{K=g.clientX,Z=g.clientY}catch{return!1}if(K>=Math.floor(A.display.gutters.getBoundingClientRect().right))return!1;S&&tn(g);var Ae=A.display,_e=Ae.lineDiv.getBoundingClientRect();if(Z>_e.bottom||!Wt(A,E))return Fn(g);Z-=_e.top-Ae.viewOffset;for(var Ie=0;Ie<A.display.gutterSpecs.length;++Ie){var Ue=Ae.gutters.childNodes[Ie];if(Ue&&Ue.getBoundingClientRect().right>=K){var gt=xt(A.doc,Z),wt=A.display.gutterSpecs[Ie];return ut(A,E,A,gt,wt.className,g),Fn(g)}}}function Fc(A,g){return lm(A,g,"gutterClick",!0)}function nh(A,g){Eu(A.display,g)||rh(A,g)||dt(A,g,"contextmenu")||fe||A.display.input.onContextMenu(g)}function rh(A,g){return Wt(A,"gutterContextMenu")?lm(A,g,"gutterContextMenu",!1):!1}function Ep(A){A.display.wrapper.className=A.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+A.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Md(A)}var kd={toString:function(){return"CodeMirror.Init"}},Gf={},Zl={};function Xl(A){var g=A.optionHandlers;function E(S,K,Z,Ae){A.defaults[S]=K,Z&&(g[S]=Ae?function(_e,Ie,Ue){Ue!=kd&&Z(_e,Ie,Ue)}:Z)}A.defineOption=E,A.Init=kd,E("value","",function(S,K){return S.setValue(K)},!0),E("mode",null,function(S,K){S.doc.modeOption=K,gs(S)},!0),E("indentUnit",2,gs,!0),E("indentWithTabs",!1),E("smartIndent",!0),E("tabSize",4,function(S){rA(S),Md(S),Tl(S)},!0),E("lineSeparator",null,function(S,K){if(S.doc.lineSep=K,!!K){var Z=[],Ae=S.doc.first;S.doc.iter(function(Ie){for(var Ue=0;;){var gt=Ie.text.indexOf(K,Ue);if(gt==-1)break;Ue=gt+K.length,Z.push(dn(Ae,gt))}Ae++});for(var _e=Z.length-1;_e>=0;_e--)z(S.doc,K,Z[_e],dn(Z[_e].line,Z[_e].ch+K.length))}}),E("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(S,K,Z){S.state.specialChars=new RegExp(K.source+(K.test("	")?"":"|	"),"g"),Z!=kd&&S.refresh()}),E("specialCharPlaceholder",Su,function(S){return S.refresh()},!0),E("electricChars",!0),E("inputStyle",te?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),E("spellcheck",!1,function(S,K){return S.getInputField().spellcheck=K},!0),E("autocorrect",!1,function(S,K){return S.getInputField().autocorrect=K},!0),E("autocapitalize",!1,function(S,K){return S.getInputField().autocapitalize=K},!0),E("rtlMoveVisually",!W),E("wholeLineUpdateBefore",!0),E("theme","default",function(S){Ep(S),Va(S)},!0),E("keyMap","default",function(S,K,Z){var Ae=Vl(K),_e=Z!=kd&&Vl(Z);_e&&_e.detach&&_e.detach(S,Ae),Ae.attach&&Ae.attach(S,_e||null)}),E("extraKeys",null),E("configureMouse",null),E("lineWrapping",!1,Bp,!0),E("gutters",[],function(S,K){S.display.gutterSpecs=Au(K,S.options.lineNumbers),Va(S)},!0),E("fixedGutter",!0,function(S,K){S.display.gutters.style.left=K?Po(S.display)+"px":"0",S.refresh()},!0),E("coverGutterNextToScrollbar",!1,function(S){return Ou(S)},!0),E("scrollbarStyle","native",function(S){Jd(S),Ou(S),S.display.scrollbars.setScrollTop(S.doc.scrollTop),S.display.scrollbars.setScrollLeft(S.doc.scrollLeft)},!0),E("lineNumbers",!1,function(S,K){S.display.gutterSpecs=Au(S.options.gutters,K),Va(S)},!0),E("firstLineNumber",1,Va,!0),E("lineNumberFormatter",function(S){return S},Va,!0),E("showCursorWhenSelecting",!1,Qa,!0),E("resetSelectionOnContextMenu",!0),E("lineWiseCopyCut",!0),E("pasteLinesPerSelection",!0),E("selectionsMayTouch",!1),E("readOnly",!1,function(S,K){K=="nocursor"&&(us(S),S.display.input.blur()),S.display.input.readOnlyChanged(K)}),E("screenReaderLabel",null,function(S,K){K=K===""?null:K,S.display.input.screenReaderLabelChanged(K)}),E("disableInput",!1,function(S,K){K||S.display.input.reset()},!0),E("dragDrop",!0,um),E("allowDropFileTypes",null),E("cursorBlinkRate",530),E("cursorScrollMargin",0),E("cursorHeight",1,Qa,!0),E("singleCursorHeightPerLine",!0,Qa,!0),E("workTime",100),E("workDelay",100),E("flattenSpans",!0,rA,!0),E("addModeClass",!1,rA,!0),E("pollInterval",100),E("undoDepth",200,function(S,K){return S.doc.history.undoDepth=K}),E("historyEventDelay",1250),E("viewportMargin",10,function(S){return S.refresh()},!0),E("maxHighlightLength",1e4,rA,!0),E("moveInputWithCursor",!0,function(S,K){K||S.display.input.resetPosition()}),E("tabindex",null,function(S,K){return S.display.input.getField().tabIndex=K||""}),E("autofocus",null),E("direction","ltr",function(S,K){return S.doc.setDirection(K)},!0),E("phrases",null)}function um(A,g,E){var S=E&&E!=kd;if(!g!=!S){var K=A.display.dragFunctions,Z=g?je:Je;Z(A.display.scroller,"dragstart",K.start),Z(A.display.scroller,"dragenter",K.enter),Z(A.display.scroller,"dragover",K.over),Z(A.display.scroller,"dragleave",K.leave),Z(A.display.scroller,"drop",K.drop)}}function Bp(A){A.options.lineWrapping?(Se(A.display.wrapper,"CodeMirror-wrap"),A.display.sizer.style.minWidth="",A.display.sizerWidth=null):(me(A.display.wrapper,"CodeMirror-wrap"),ua(A)),lo(A),Tl(A),Md(A),setTimeout(function(){return Ou(A)},100)}function Zo(A,g){var E=this;if(!(this instanceof Zo))return new Zo(A,g);this.options=g=g?Le(g):{},Le(Gf,g,!1);var S=g.value;typeof S=="string"?S=new qt(S,g.mode,null,g.lineSeparator,g.direction):g.mode&&(S.modeOption=g.mode),this.doc=S;var K=new Zo.inputStyles[g.inputStyle](this),Z=this.display=new eh(A,S,K,g);Z.wrapper.CodeMirror=this,Ep(this),g.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Jd(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Be,keySeq:null,specialChars:null},g.autofocus&&!te&&Z.input.focus(),p&&v<11&&setTimeout(function(){return E.display.input.reset(!0)},20),Qf(this),Ri(),tA(this),this.curOp.forceUpdate=!0,ys(this,S),g.autofocus&&!te||this.hasFocus()?setTimeout(function(){E.hasFocus()&&!E.state.focused&&wd(E)},20):us(this);for(var Ae in Zl)Zl.hasOwnProperty(Ae)&&Zl[Ae](this,g[Ae],kd);Jc(this),g.finishInit&&g.finishInit(this);for(var _e=0;_e<cf.length;++_e)cf[_e](this);_l(this),x&&g.lineWrapping&&getComputedStyle(Z.lineDiv).textRendering=="optimizelegibility"&&(Z.lineDiv.style.textRendering="auto")}Zo.defaults=Gf,Zo.optionHandlers=Zl;function Qf(A){var g=A.display;je(g.scroller,"mousedown",Ti(A,uf)),p&&v<11?je(g.scroller,"dblclick",Ti(A,function(Ie){if(!dt(A,Ie)){var Ue=Bu(A,Ie);if(!(!Ue||Fc(A,Ie)||Eu(A.display,Ie))){tn(Ie);var gt=A.findWordAt(Ue);HA(A.doc,gt.anchor,gt.head)}}})):je(g.scroller,"dblclick",function(Ie){return dt(A,Ie)||tn(Ie)}),je(g.scroller,"contextmenu",function(Ie){return nh(A,Ie)}),je(g.input.getField(),"contextmenu",function(Ie){g.scroller.contains(Ie.target)||nh(A,Ie)});var E,S={end:0};function K(){g.activeTouch&&(E=setTimeout(function(){return g.activeTouch=null},1e3),S=g.activeTouch,S.end=+new Date)}function Z(Ie){if(Ie.touches.length!=1)return!1;var Ue=Ie.touches[0];return Ue.radiusX<=1&&Ue.radiusY<=1}function Ae(Ie,Ue){if(Ue.left==null)return!0;var gt=Ue.left-Ie.left,wt=Ue.top-Ie.top;return gt*gt+wt*wt>20*20}je(g.scroller,"touchstart",function(Ie){if(!dt(A,Ie)&&!Z(Ie)&&!Fc(A,Ie)){g.input.ensurePolled(),clearTimeout(E);var Ue=+new Date;g.activeTouch={start:Ue,moved:!1,prev:Ue-S.end<=300?S:null},Ie.touches.length==1&&(g.activeTouch.left=Ie.touches[0].pageX,g.activeTouch.top=Ie.touches[0].pageY)}}),je(g.scroller,"touchmove",function(){g.activeTouch&&(g.activeTouch.moved=!0)}),je(g.scroller,"touchend",function(Ie){var Ue=g.activeTouch;if(Ue&&!Eu(g,Ie)&&Ue.left!=null&&!Ue.moved&&new Date-Ue.start<300){var gt=A.coordsChar(g.activeTouch,"page"),wt;!Ue.prev||Ae(Ue,Ue.prev)?wt=new wo(gt,gt):!Ue.prev.prev||Ae(Ue,Ue.prev.prev)?wt=A.findWordAt(gt):wt=new wo(dn(gt.line,0),ei(A.doc,dn(gt.line+1,0))),A.setSelection(wt.anchor,wt.head),A.focus(),tn(Ie)}K()}),je(g.scroller,"touchcancel",K),je(g.scroller,"scroll",function(){g.scroller.clientHeight&&(ul(A,g.scroller.scrollTop),Gl(A,g.scroller.scrollLeft,!0),ut(A,"scroll",A))}),je(g.scroller,"mousewheel",function(Ie){return ed(A,Ie)}),je(g.scroller,"DOMMouseScroll",function(Ie){return ed(A,Ie)}),je(g.wrapper,"scroll",function(){return g.wrapper.scrollTop=g.wrapper.scrollLeft=0}),g.dragFunctions={enter:function(Ie){dt(A,Ie)||on(Ie)},over:function(Ie){dt(A,Ie)||(In(A,Ie),on(Ie))},start:function(Ie){return Cn(A,Ie)},drop:Ti(A,Sn),leave:function(Ie){dt(A,Ie)||Nn(A)}};var _e=g.input.getField();je(_e,"keyup",function(Ie){return cl.call(A,Ie)}),je(_e,"keydown",Ti(A,th)),je(_e,"keypress",Ti(A,OA)),je(_e,"focus",function(Ie){return wd(A,Ie)}),je(_e,"blur",function(Ie){return us(A,Ie)})}var cf=[];Zo.defineInitHook=function(A){return cf.push(A)};function Td(A,g,E,S){var K=A.doc,Z;E==null&&(E="add"),E=="smart"&&(K.mode.indent?Z=ti(A,g).state:E="prev");var Ae=A.options.tabSize,_e=Kr(K,g),Ie=Pe(_e.text,null,Ae);_e.stateAfter&&(_e.stateAfter=null);var Ue=_e.text.match(/^\s*/)[0],gt;if(!S&&!/\S/.test(_e.text))gt=0,E="not";else if(E=="smart"&&(gt=K.mode.indent(Z,_e.text.slice(Ue.length),_e.text),gt==ft||gt>150)){if(!S)return;E="prev"}E=="prev"?g>K.first?gt=Pe(Kr(K,g-1).text,null,Ae):gt=0:E=="add"?gt=Ie+A.options.indentUnit:E=="subtract"?gt=Ie-A.options.indentUnit:typeof E=="number"&&(gt=Ie+E),gt=Math.max(0,gt);var wt="",Xt=0;if(A.options.indentWithTabs)for(var Yt=Math.floor(gt/Ae);Yt;--Yt)Xt+=Ae,wt+="	";if(Xt<gt&&(wt+=rn(gt-Xt)),wt!=Ue)return z(K,wt,dn(g,0),dn(g,Ue.length),"+input"),_e.stateAfter=null,!0;for(var bn=0;bn<K.sel.ranges.length;bn++){var Ln=K.sel.ranges[bn];if(Ln.head.line==g&&Ln.head.ch<Ue.length){var rr=dn(g,Ue.length);bl(K,bn,new wo(rr,rr));break}}}var mu=null;function Jl(A){mu=A}function Yf(A,g,E,S,K){var Z=A.doc;A.display.shift=!1,S||(S=Z.sel);var Ae=+new Date-200,_e=K=="paste"||A.state.pasteIncoming>Ae,Ie=Qr(g),Ue=null;if(_e&&S.ranges.length>1)if(mu&&mu.text.join(`
`)==g){if(S.ranges.length%mu.text.length==0){Ue=[];for(var gt=0;gt<mu.text.length;gt++)Ue.push(Z.splitLines(mu.text[gt]))}}else Ie.length==S.ranges.length&&A.options.pasteLinesPerSelection&&(Ue=kn(Ie,function(er){return[er]}));for(var wt=A.curOp.updateInput,Xt=S.ranges.length-1;Xt>=0;Xt--){var Yt=S.ranges[Xt],bn=Yt.from(),Ln=Yt.to();Yt.empty()&&(E&&E>0?bn=dn(bn.line,bn.ch-E):A.state.overwrite&&!_e?Ln=dn(Ln.line,Math.min(Kr(Z,Ln.line).text.length,Ln.ch+ar(Ie).length)):_e&&mu&&mu.lineWise&&mu.text.join(`
`)==Ie.join(`
`)&&(bn=Ln=dn(bn.line,0)));var rr={from:bn,to:Ln,text:Ue?Ue[Xt%Ue.length]:Ie,origin:K||(_e?"paste":A.state.cutIncoming>Ae?"cut":"+input")};O(A.doc,rr),ms(A,"inputRead",A,rr)}g&&!_e&&df(A,g),As(A),A.curOp.updateInput<2&&(A.curOp.updateInput=wt),A.curOp.typing=!0,A.state.pasteIncoming=A.state.cutIncoming=-1}function XA(A,g){var E=A.clipboardData&&A.clipboardData.getData("Text");if(E)return A.preventDefault(),!g.isReadOnly()&&!g.options.disableInput&&g.hasFocus()&&Ss(g,function(){return Yf(g,E,0,null,"paste")}),!0}function df(A,g){if(!(!A.options.electricChars||!A.options.smartIndent))for(var E=A.doc.sel,S=E.ranges.length-1;S>=0;S--){var K=E.ranges[S];if(!(K.head.ch>100||S&&E.ranges[S-1].head.line==K.head.line)){var Z=A.getModeAt(K.head),Ae=!1;if(Z.electricChars){for(var _e=0;_e<Z.electricChars.length;_e++)if(g.indexOf(Z.electricChars.charAt(_e))>-1){Ae=Td(A,K.head.line,"smart");break}}else Z.electricInput&&Z.electricInput.test(Kr(A.doc,K.head.line).text.slice(0,K.head.ch))&&(Ae=Td(A,K.head.line,"smart"));Ae&&ms(A,"electricInput",A,K.head.line)}}}function Ih(A){for(var g=[],E=[],S=0;S<A.doc.sel.ranges.length;S++){var K=A.doc.sel.ranges[S].head.line,Z={anchor:dn(K,0),head:dn(K+1,0)};E.push(Z),g.push(A.getRange(Z.anchor,Z.head))}return{text:g,ranges:E}}function hf(A,g,E,S){A.setAttribute("autocorrect",E?"on":"off"),A.setAttribute("autocapitalize",S?"on":"off"),A.setAttribute("spellcheck",!!g)}function kh(){var A=xe("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),g=xe("div",[A],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?A.style.width="1000px":A.setAttribute("wrap","off"),H&&(A.style.border="1px solid black"),g}function Pd(A){var g=A.optionHandlers,E=A.helpers={};A.prototype={constructor:A,focus:function(){Ft(this).focus(),this.display.input.focus()},setOption:function(S,K){var Z=this.options,Ae=Z[S];Z[S]==K&&S!="mode"||(Z[S]=K,g.hasOwnProperty(S)&&Ti(this,g[S])(this,K,Ae),ut(this,"optionChange",this,S))},getOption:function(S){return this.options[S]},getDoc:function(){return this.doc},addKeyMap:function(S,K){this.state.keyMaps[K?"push":"unshift"](Vl(S))},removeKeyMap:function(S){for(var K=this.state.keyMaps,Z=0;Z<K.length;++Z)if(K[Z]==S||K[Z].name==S)return K.splice(Z,1),!0},addOverlay:ri(function(S,K){var Z=S.token?S:A.getMode(this.options,S);if(Z.startState)throw new Error("Overlays may not be stateful.");mn(this.state.overlays,{mode:Z,modeSpec:S,opaque:K&&K.opaque,priority:K&&K.priority||0},function(Ae){return Ae.priority}),this.state.modeGen++,Tl(this)}),removeOverlay:ri(function(S){for(var K=this.state.overlays,Z=0;Z<K.length;++Z){var Ae=K[Z].modeSpec;if(Ae==S||typeof S=="string"&&Ae.name==S){K.splice(Z,1),this.state.modeGen++,Tl(this);return}}}),indentLine:ri(function(S,K,Z){typeof K!="string"&&typeof K!="number"&&(K==null?K=this.options.smartIndent?"smart":"prev":K=K?"add":"subtract"),yn(this.doc,S)&&Td(this,S,K,Z)}),indentSelection:ri(function(S){for(var K=this.doc.sel.ranges,Z=-1,Ae=0;Ae<K.length;Ae++){var _e=K[Ae];if(_e.empty())_e.head.line>Z&&(Td(this,_e.head.line,S,!0),Z=_e.head.line,Ae==this.doc.sel.primIndex&&As(this));else{var Ie=_e.from(),Ue=_e.to(),gt=Math.max(Z,Ie.line);Z=Math.min(this.lastLine(),Ue.line-(Ue.ch?0:1))+1;for(var wt=gt;wt<Z;++wt)Td(this,wt,S);var Xt=this.doc.sel.ranges;Ie.ch==0&&K.length==Xt.length&&Xt[Ae].from().ch>0&&bl(this.doc,Ae,new wo(Ie,Xt[Ae].to()),Lt)}}}),getTokenAt:function(S,K){return Do(this,S,K)},getLineTokens:function(S,K){return Do(this,dn(S),K,!0)},getTokenTypeAt:function(S){S=ei(this.doc,S);var K=Si(this,Kr(this.doc,S.line)),Z=0,Ae=(K.length-1)/2,_e=S.ch,Ie;if(_e==0)Ie=K[2];else for(;;){var Ue=Z+Ae>>1;if((Ue?K[Ue*2-1]:0)>=_e)Ae=Ue;else if(K[Ue*2+1]<_e)Z=Ue+1;else{Ie=K[Ue*2+2];break}}var gt=Ie?Ie.indexOf("overlay "):-1;return gt<0?Ie:gt==0?null:Ie.slice(0,gt-1)},getModeAt:function(S){var K=this.doc.mode;return K.innerMode?A.innerMode(K,this.getTokenAt(S).state).mode:K},getHelper:function(S,K){return this.getHelpers(S,K)[0]},getHelpers:function(S,K){var Z=[];if(!E.hasOwnProperty(K))return Z;var Ae=E[K],_e=this.getModeAt(S);if(typeof _e[K]=="string")Ae[_e[K]]&&Z.push(Ae[_e[K]]);else if(_e[K])for(var Ie=0;Ie<_e[K].length;Ie++){var Ue=Ae[_e[K][Ie]];Ue&&Z.push(Ue)}else _e.helperType&&Ae[_e.helperType]?Z.push(Ae[_e.helperType]):Ae[_e.name]&&Z.push(Ae[_e.name]);for(var gt=0;gt<Ae._global.length;gt++){var wt=Ae._global[gt];wt.pred(_e,this)&&it(Z,wt.val)==-1&&Z.push(wt.val)}return Z},getStateAfter:function(S,K){var Z=this.doc;return S=Wu(Z,S??Z.first+Z.size-1),ti(this,S+1,K).state},cursorCoords:function(S,K){var Z,Ae=this.doc.sel.primary();return S==null?Z=Ae.head:typeof S=="object"?Z=ei(this.doc,S):Z=S?Ae.from():Ae.to(),un(this,Z,K||"page")},charCoords:function(S,K){return Tn(this,ei(this.doc,S),K||"page")},coordsChar:function(S,K){return S=en(this,S,K||"page"),To(this,S.left,S.top)},lineAtHeight:function(S,K){return S=en(this,{top:S,left:0},K||"page").top,xt(this.doc,S+this.display.viewOffset)},heightAtLine:function(S,K,Z){var Ae=!1,_e;if(typeof S=="number"){var Ie=this.doc.first+this.doc.size-1;S<this.doc.first?S=this.doc.first:S>Ie&&(S=Ie,Ae=!0),_e=Kr(this.doc,S)}else _e=S;return gA(this,_e,{top:0,left:0},K||"page",Z||Ae).top+(Ae?this.doc.height-Gi(_e):0)},defaultTextHeight:function(){return Nl(this.display)},defaultCharWidth:function(){return Wl(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(S,K,Z,Ae,_e){var Ie=this.display;S=un(this,ei(this.doc,S));var Ue=S.bottom,gt=S.left;if(K.style.position="absolute",K.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(K),Ie.sizer.appendChild(K),Ae=="over")Ue=S.top;else if(Ae=="above"||Ae=="near"){var wt=Math.max(Ie.wrapper.clientHeight,this.doc.height),Xt=Math.max(Ie.sizer.clientWidth,Ie.lineSpace.clientWidth);(Ae=="above"||S.bottom+K.offsetHeight>wt)&&S.top>K.offsetHeight?Ue=S.top-K.offsetHeight:S.bottom+K.offsetHeight<=wt&&(Ue=S.bottom),gt+K.offsetWidth>Xt&&(gt=Xt-K.offsetWidth)}K.style.top=Ue+"px",K.style.left=K.style.right="",_e=="right"?(gt=Ie.sizer.clientWidth-K.offsetWidth,K.style.right="0px"):(_e=="left"?gt=0:_e=="middle"&&(gt=(Ie.sizer.clientWidth-K.offsetWidth)/2),K.style.left=gt+"px"),Z&&Oc(this,{left:gt,top:Ue,right:gt+K.offsetWidth,bottom:Ue+K.offsetHeight})},triggerOnKeyDown:ri(th),triggerOnKeyPress:ri(OA),triggerOnKeyUp:cl,triggerOnMouseDown:ri(uf),execCommand:function(S){if(Ku.hasOwnProperty(S))return Ku[S].call(null,this)},triggerElectric:ri(function(S){df(this,S)}),findPosH:function(S,K,Z,Ae){var _e=1;K<0&&(_e=-1,K=-K);for(var Ie=ei(this.doc,S),Ue=0;Ue<K&&(Ie=Oi(this.doc,Ie,_e,Z,Ae),!Ie.hitSide);++Ue);return Ie},moveH:ri(function(S,K){var Z=this;this.extendSelectionsBy(function(Ae){return Z.display.shift||Z.doc.extend||Ae.empty()?Oi(Z.doc,Ae.head,S,K,Z.options.rtlMoveVisually):S<0?Ae.from():Ae.to()},Rt)}),deleteH:ri(function(S,K){var Z=this.doc.sel,Ae=this.doc;Z.somethingSelected()?Ae.replaceSelection("",null,"+delete"):$l(this,function(_e){var Ie=Oi(Ae,_e.head,S,K,!1);return S<0?{from:Ie,to:_e.head}:{from:_e.head,to:Ie}})}),findPosV:function(S,K,Z,Ae){var _e=1,Ie=Ae;K<0&&(_e=-1,K=-K);for(var Ue=ei(this.doc,S),gt=0;gt<K;++gt){var wt=un(this,Ue,"div");if(Ie==null?Ie=wt.left:wt.left=Ie,Ue=ih(this,wt,_e,Z),Ue.hitSide)break}return Ue},moveV:ri(function(S,K){var Z=this,Ae=this.doc,_e=[],Ie=!this.display.shift&&!Ae.extend&&Ae.sel.somethingSelected();if(Ae.extendSelectionsBy(function(gt){if(Ie)return S<0?gt.from():gt.to();var wt=un(Z,gt.head,"div");gt.goalColumn!=null&&(wt.left=gt.goalColumn),_e.push(wt.left);var Xt=ih(Z,wt,S,K);return K=="page"&&gt==Ae.sel.primary()&&Ju(Z,Tn(Z,Xt,"div").top-wt.top),Xt},Rt),_e.length)for(var Ue=0;Ue<Ae.sel.ranges.length;Ue++)Ae.sel.ranges[Ue].goalColumn=_e[Ue]}),findWordAt:function(S){var K=this.doc,Z=Kr(K,S.line).text,Ae=S.ch,_e=S.ch;if(Z){var Ie=this.getHelper(S,"wordChars");(S.sticky=="before"||_e==Z.length)&&Ae?--Ae:++_e;for(var Ue=Z.charAt(Ae),gt=Ge(Ue,Ie)?function(wt){return Ge(wt,Ie)}:/\s/.test(Ue)?function(wt){return/\s/.test(wt)}:function(wt){return!/\s/.test(wt)&&!Ge(wt)};Ae>0&&gt(Z.charAt(Ae-1));)--Ae;for(;_e<Z.length&&gt(Z.charAt(_e));)++_e}return new wo(dn(S.line,Ae),dn(S.line,_e))},toggleOverwrite:function(S){S!=null&&S==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Se(this.display.cursorDiv,"CodeMirror-overwrite"):me(this.display.cursorDiv,"CodeMirror-overwrite"),ut(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Ne(Gt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ri(function(S,K){Ya(this,S,K)}),getScrollInfo:function(){var S=this.display.scroller;return{left:S.scrollLeft,top:S.scrollTop,height:S.scrollHeight-Yu(this)-this.display.barHeight,width:S.scrollWidth-Yu(this)-this.display.barWidth,clientHeight:Ac(this),clientWidth:uc(this)}},scrollIntoView:ri(function(S,K){S==null?(S={from:this.doc.sel.primary().head,to:null},K==null&&(K=this.options.cursorScrollMargin)):typeof S=="number"?S={from:dn(S,0),to:null}:S.from==null&&(S={from:S,to:null}),S.to||(S.to=S.from),S.margin=K||0,S.from.line!=null?wp(this,S):xA(this,S.from,S.to,S.margin)}),setSize:ri(function(S,K){var Z=this,Ae=function(Ie){return typeof Ie=="number"||/^\d+$/.test(String(Ie))?Ie+"px":Ie};S!=null&&(this.display.wrapper.style.width=Ae(S)),K!=null&&(this.display.wrapper.style.height=Ae(K)),this.options.lineWrapping&&Lf(this);var _e=this.display.viewFrom;this.doc.iter(_e,this.display.viewTo,function(Ie){if(Ie.widgets){for(var Ue=0;Ue<Ie.widgets.length;Ue++)if(Ie.widgets[Ue].noHScroll){Hu(Z,_e,"widget");break}}++_e}),this.curOp.forceUpdate=!0,ut(this,"refresh",this)}),operation:function(S){return Ss(this,S)},startOperation:function(){return tA(this)},endOperation:function(){return _l(this)},refresh:ri(function(){var S=this.display.cachedTextHeight;Tl(this),this.curOp.forceUpdate=!0,Md(this),Ya(this,this.doc.scrollLeft,this.doc.scrollTop),Bs(this.display),(S==null||Math.abs(S-Nl(this.display))>.5||this.options.lineWrapping)&&lo(this),ut(this,"refresh",this)}),swapDoc:ri(function(S){var K=this.doc;return K.cm=null,this.state.selectingText&&this.state.selectingText(),ys(this,S),Md(this),this.display.input.reset(),Ya(this,S.scrollLeft,S.scrollTop),this.curOp.forceScroll=!0,ms(this,"swapDoc",this,K),K}),phrase:function(S){var K=this.options.phrases;return K&&Object.prototype.hasOwnProperty.call(K,S)?K[S]:S},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},jt(A),A.registerHelper=function(S,K,Z){E.hasOwnProperty(S)||(E[S]=A[S]={_global:[]}),E[S][K]=Z},A.registerGlobalHelper=function(S,K,Z,Ae){A.registerHelper(S,K,Ae),E[S]._global.push({pred:Z,val:Ae})}}function Oi(A,g,E,S,K){var Z=g,Ae=E,_e=Kr(A,g.line),Ie=K&&A.direction=="rtl"?-E:E;function Ue(){var Cr=g.line+Ie;return Cr<A.first||Cr>=A.first+A.size?!1:(g=new dn(Cr,g.ch,g.sticky),_e=Kr(A,Cr))}function gt(Cr){var pr;if(S=="codepoint"){var Or=_e.text.charCodeAt(g.ch+(E>0?0:-1));if(isNaN(Or))pr=null;else{var oi=E>0?Or>=55296&&Or<56320:Or>=56320&&Or<57343;pr=new dn(g.line,Math.max(0,Math.min(_e.text.length,g.ch+E*(oi?2:1))),-E)}}else K?pr=xa(A.cm,_e,g,E):pr=Rl(_e,g,E);if(pr==null)if(!Cr&&Ue())g=Pu(K,A.cm,_e,g.line,Ie);else return!1;else g=pr;return!0}if(S=="char"||S=="codepoint")gt();else if(S=="column")gt(!0);else if(S=="word"||S=="group")for(var wt=null,Xt=S=="group",Yt=A.cm&&A.cm.getHelper(g,"wordChars"),bn=!0;!(E<0&&!gt(!bn));bn=!1){var Ln=_e.text.charAt(g.ch)||`
`,rr=Ge(Ln,Yt)?"w":Xt&&Ln==`
`?"n":!Xt||/\s/.test(Ln)?null:"p";if(Xt&&!bn&&!rr&&(rr="s"),wt&&wt!=rr){E<0&&(E=1,gt(),g.sticky="after");break}if(rr&&(wt=rr),E>0&&!gt(!bn))break}var er=Rc(A,g,Z,Ae,!0);return Pi(Z,er)&&(er.hitSide=!0),er}function ih(A,g,E,S){var K=A.doc,Z=g.left,Ae;if(S=="page"){var _e=Math.min(A.display.wrapper.clientHeight,Ft(A).innerHeight||K(A).documentElement.clientHeight),Ie=Math.max(_e-.5*Nl(A.display),3);Ae=(E>0?g.bottom:g.top)+E*Ie}else S=="line"&&(Ae=E>0?g.bottom+3:g.top-3);for(var Ue;Ue=To(A,Z,Ae),!!Ue.outside;){if(E<0?Ae<=0:Ae>=K.height){Ue.hitSide=!0;break}Ae+=E*5}return Ue}var Uo=function(A){this.cm=A,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Be,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Uo.prototype.init=function(A){var g=this,E=this,S=E.cm,K=E.div=A.lineDiv;K.contentEditable=!0,hf(K,S.options.spellcheck,S.options.autocorrect,S.options.autocapitalize);function Z(_e){for(var Ie=_e.target;Ie;Ie=Ie.parentNode){if(Ie==K)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Ie.className))break}return!1}je(K,"paste",function(_e){!Z(_e)||dt(S,_e)||XA(_e,S)||v<=11&&setTimeout(Ti(S,function(){return g.updateFromDOM()}),20)}),je(K,"compositionstart",function(_e){g.composing={data:_e.data,done:!1}}),je(K,"compositionupdate",function(_e){g.composing||(g.composing={data:_e.data,done:!1})}),je(K,"compositionend",function(_e){g.composing&&(_e.data!=g.composing.data&&g.readFromDOMSoon(),g.composing.done=!0)}),je(K,"touchstart",function(){return E.forceCompositionEnd()}),je(K,"input",function(){g.composing||g.readFromDOMSoon()});function Ae(_e){if(!(!Z(_e)||dt(S,_e))){if(S.somethingSelected())Jl({lineWise:!1,text:S.getSelections()}),_e.type=="cut"&&S.replaceSelection("",null,"cut");else if(S.options.lineWiseCopyCut){var Ie=Ih(S);Jl({lineWise:!0,text:Ie.text}),_e.type=="cut"&&S.operation(function(){S.setSelections(Ie.ranges,0,Lt),S.replaceSelection("",null,"cut")})}else return;if(_e.clipboardData){_e.clipboardData.clearData();var Ue=mu.text.join(`
`);if(_e.clipboardData.setData("Text",Ue),_e.clipboardData.getData("Text")==Ue){_e.preventDefault();return}}var gt=kh(),wt=gt.firstChild;hf(wt),S.display.lineSpace.insertBefore(gt,S.display.lineSpace.firstChild),wt.value=mu.text.join(`
`);var Xt=Ne(yt(K));He(wt),setTimeout(function(){S.display.lineSpace.removeChild(gt),Xt.focus(),Xt==K&&E.showPrimarySelection()},50)}}je(K,"copy",Ae),je(K,"cut",Ae)},Uo.prototype.screenReaderLabelChanged=function(A){A?this.div.setAttribute("aria-label",A):this.div.removeAttribute("aria-label")},Uo.prototype.prepareSelection=function(){var A=wc(this.cm,!1);return A.focus=Ne(yt(this.div))==this.div,A},Uo.prototype.showSelection=function(A,g){!A||!this.cm.display.view.length||((A.focus||g)&&this.showPrimarySelection(),this.showMultipleSelections(A))},Uo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Uo.prototype.showPrimarySelection=function(){var A=this.getSelection(),g=this.cm,E=g.doc.sel.primary(),S=E.from(),K=E.to();if(g.display.viewTo==g.display.viewFrom||S.line>=g.display.viewTo||K.line<g.display.viewFrom){A.removeAllRanges();return}var Z=wl(g,A.anchorNode,A.anchorOffset),Ae=wl(g,A.focusNode,A.focusOffset);if(!(Z&&!Z.bad&&Ae&&!Ae.bad&&lr(la(Z,Ae),S)==0&&lr(as(Z,Ae),K)==0)){var _e=g.display.view,Ie=S.line>=g.display.viewFrom&&rd(g,S)||{node:_e[0].measure.map[2],offset:0},Ue=K.line<g.display.viewTo&&rd(g,K);if(!Ue){var gt=_e[_e.length-1].measure,wt=gt.maps?gt.maps[gt.maps.length-1]:gt.map;Ue={node:wt[wt.length-1],offset:wt[wt.length-2]-wt[wt.length-3]}}if(!Ie||!Ue){A.removeAllRanges();return}var Xt=A.rangeCount&&A.getRangeAt(0),Yt;try{Yt=Ze(Ie.node,Ie.offset,Ue.offset,Ue.node)}catch{}Yt&&(!i&&g.state.focused?(A.collapse(Ie.node,Ie.offset),Yt.collapsed||(A.removeAllRanges(),A.addRange(Yt))):(A.removeAllRanges(),A.addRange(Yt)),Xt&&A.anchorNode==null?A.addRange(Xt):i&&this.startGracePeriod()),this.rememberSelection()}},Uo.prototype.startGracePeriod=function(){var A=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){A.gracePeriod=!1,A.selectionChanged()&&A.cm.operation(function(){return A.cm.curOp.selectionChanged=!0})},20)},Uo.prototype.showMultipleSelections=function(A){De(this.cm.display.cursorDiv,A.cursors),De(this.cm.display.selectionDiv,A.selection)},Uo.prototype.rememberSelection=function(){var A=this.getSelection();this.lastAnchorNode=A.anchorNode,this.lastAnchorOffset=A.anchorOffset,this.lastFocusNode=A.focusNode,this.lastFocusOffset=A.focusOffset},Uo.prototype.selectionInEditor=function(){var A=this.getSelection();if(!A.rangeCount)return!1;var g=A.getRangeAt(0).commonAncestorContainer;return Xe(this.div,g)},Uo.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Ne(yt(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Uo.prototype.blur=function(){this.div.blur()},Uo.prototype.getField=function(){return this.div},Uo.prototype.supportsTouch=function(){return!0},Uo.prototype.receivedFocus=function(){var A=this,g=this;this.selectionInEditor()?setTimeout(function(){return A.pollSelection()},20):Ss(this.cm,function(){return g.cm.curOp.selectionChanged=!0});function E(){g.cm.state.focused&&(g.pollSelection(),g.polling.set(g.cm.options.pollInterval,E))}this.polling.set(this.cm.options.pollInterval,E)},Uo.prototype.selectionChanged=function(){var A=this.getSelection();return A.anchorNode!=this.lastAnchorNode||A.anchorOffset!=this.lastAnchorOffset||A.focusNode!=this.lastFocusNode||A.focusOffset!=this.lastFocusOffset},Uo.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var A=this.getSelection(),g=this.cm;if(oe&&T&&this.cm.display.gutterSpecs.length&&id(A.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var E=wl(g,A.anchorNode,A.anchorOffset),S=wl(g,A.focusNode,A.focusOffset);E&&S&&Ss(g,function(){ba(g.doc,Pa(E,S),Lt),(E.bad||S.bad)&&(g.curOp.selectionChanged=!0)})}}},Uo.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var A=this.cm,g=A.display,E=A.doc.sel.primary(),S=E.from(),K=E.to();if(S.ch==0&&S.line>A.firstLine()&&(S=dn(S.line-1,Kr(A.doc,S.line-1).length)),K.ch==Kr(A.doc,K.line).text.length&&K.line<A.lastLine()&&(K=dn(K.line+1,0)),S.line<g.viewFrom||K.line>g.viewTo-1)return!1;var Z,Ae,_e;S.line==g.viewFrom||(Z=CA(A,S.line))==0?(Ae=Ye(g.view[0].line),_e=g.view[0].node):(Ae=Ye(g.view[Z].line),_e=g.view[Z-1].node.nextSibling);var Ie=CA(A,K.line),Ue,gt;if(Ie==g.view.length-1?(Ue=g.viewTo-1,gt=g.lineDiv.lastChild):(Ue=Ye(g.view[Ie+1].line)-1,gt=g.view[Ie+1].node.previousSibling),!_e)return!1;for(var wt=A.doc.splitLines(Nm(A,_e,gt,Ae,Ue)),Xt=Wa(A.doc,dn(Ae,0),dn(Ue,Kr(A.doc,Ue).text.length));wt.length>1&&Xt.length>1;)if(ar(wt)==ar(Xt))wt.pop(),Xt.pop(),Ue--;else if(wt[0]==Xt[0])wt.shift(),Xt.shift(),Ae++;else break;for(var Yt=0,bn=0,Ln=wt[0],rr=Xt[0],er=Math.min(Ln.length,rr.length);Yt<er&&Ln.charCodeAt(Yt)==rr.charCodeAt(Yt);)++Yt;for(var Cr=ar(wt),pr=ar(Xt),Or=Math.min(Cr.length-(wt.length==1?Yt:0),pr.length-(Xt.length==1?Yt:0));bn<Or&&Cr.charCodeAt(Cr.length-bn-1)==pr.charCodeAt(pr.length-bn-1);)++bn;if(wt.length==1&&Xt.length==1&&Ae==S.line)for(;Yt&&Yt>S.ch&&Cr.charCodeAt(Cr.length-bn-1)==pr.charCodeAt(pr.length-bn-1);)Yt--,bn++;wt[wt.length-1]=Cr.slice(0,Cr.length-bn).replace(/^\u200b+/,""),wt[0]=wt[0].slice(Yt).replace(/\u200b+$/,"");var oi=dn(Ae,Yt),jr=dn(Ue,Xt.length?ar(Xt).length-bn:0);if(wt.length>1||wt[0]||lr(oi,jr))return z(A.doc,wt,oi,jr,"+input"),!0},Uo.prototype.ensurePolled=function(){this.forceCompositionEnd()},Uo.prototype.reset=function(){this.forceCompositionEnd()},Uo.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Uo.prototype.readFromDOMSoon=function(){var A=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(A.readDOMTimeout=null,A.composing)if(A.composing.done)A.composing=null;else return;A.updateFromDOM()},80))},Uo.prototype.updateFromDOM=function(){var A=this;(this.cm.isReadOnly()||!this.pollContent())&&Ss(this.cm,function(){return Tl(A.cm)})},Uo.prototype.setUneditable=function(A){A.contentEditable="false"},Uo.prototype.onKeyPress=function(A){A.charCode==0||this.composing||(A.preventDefault(),this.cm.isReadOnly()||Ti(this.cm,Yf)(this.cm,String.fromCharCode(A.charCode==null?A.keyCode:A.charCode),0))},Uo.prototype.readOnlyChanged=function(A){this.div.contentEditable=String(A!="nocursor")},Uo.prototype.onContextMenu=function(){},Uo.prototype.resetPosition=function(){},Uo.prototype.needsContentAttribute=!0;function rd(A,g){var E=bd(A,g.line);if(!E||E.hidden)return null;var S=Kr(A.doc,g.line),K=xh(E,S,g.line),Z=Ce(S,A.doc.direction),Ae="left";if(Z){var _e=$e(Z,g.ch);Ae=_e%2?"right":"left"}var Ie=zA(K.map,g.ch,Ae);return Ie.offset=Ie.collapse=="right"?Ie.end:Ie.start,Ie}function id(A){for(var g=A;g;g=g.parentNode)if(/CodeMirror-gutter-wrapper/.test(g.className))return!0;return!1}function Ml(A,g){return g&&(A.bad=!0),A}function Nm(A,g,E,S,K){var Z="",Ae=!1,_e=A.doc.lineSeparator(),Ie=!1;function Ue(Yt){return function(bn){return bn.id==Yt}}function gt(){Ae&&(Z+=_e,Ie&&(Z+=_e),Ae=Ie=!1)}function wt(Yt){Yt&&(gt(),Z+=Yt)}function Xt(Yt){if(Yt.nodeType==1){var bn=Yt.getAttribute("cm-text");if(bn){wt(bn);return}var Ln=Yt.getAttribute("cm-marker"),rr;if(Ln){var er=A.findMarks(dn(S,0),dn(K+1,0),Ue(+Ln));er.length&&(rr=er[0].find(0))&&wt(Wa(A.doc,rr.from,rr.to).join(_e));return}if(Yt.getAttribute("contenteditable")=="false")return;var Cr=/^(pre|div|p|li|table|br)$/i.test(Yt.nodeName);if(!/^br$/i.test(Yt.nodeName)&&Yt.textContent.length==0)return;Cr&&gt();for(var pr=0;pr<Yt.childNodes.length;pr++)Xt(Yt.childNodes[pr]);/^(pre|p)$/i.test(Yt.nodeName)&&(Ie=!0),Cr&&(Ae=!0)}else Yt.nodeType==3&&wt(Yt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Xt(g),g!=E;)g=g.nextSibling,Ie=!1;return Z}function wl(A,g,E){var S;if(g==A.display.lineDiv){if(S=A.display.lineDiv.childNodes[E],!S)return Ml(A.clipPos(dn(A.display.viewTo-1)),!0);g=null,E=0}else for(S=g;;S=S.parentNode){if(!S||S==A.display.lineDiv)return null;if(S.parentNode&&S.parentNode==A.display.lineDiv)break}for(var K=0;K<A.display.view.length;K++){var Z=A.display.view[K];if(Z.node==S)return Am(Z,g,E)}}function Am(A,g,E){var S=A.text.firstChild,K=!1;if(!g||!Xe(S,g))return Ml(dn(Ye(A.line),0),!0);if(g==S&&(K=!0,g=S.childNodes[E],E=0,!g)){var Z=A.rest?ar(A.rest):A.line;return Ml(dn(Ye(Z),Z.text.length),K)}var Ae=g.nodeType==3?g:null,_e=g;for(!Ae&&g.childNodes.length==1&&g.firstChild.nodeType==3&&(Ae=g.firstChild,E&&(E=Ae.nodeValue.length));_e.parentNode!=S;)_e=_e.parentNode;var Ie=A.measure,Ue=Ie.maps;function gt(rr,er,Cr){for(var pr=-1;pr<(Ue?Ue.length:0);pr++)for(var Or=pr<0?Ie.map:Ue[pr],oi=0;oi<Or.length;oi+=3){var jr=Or[oi+2];if(jr==rr||jr==er){var zi=Ye(pr<0?A.line:A.rest[pr]),yo=Or[oi]+Cr;return(Cr<0||jr!=rr)&&(yo=Or[oi+(Cr?1:0)]),dn(zi,yo)}}}var wt=gt(Ae,_e,E);if(wt)return Ml(wt,K);for(var Xt=_e.nextSibling,Yt=Ae?Ae.nodeValue.length-E:0;Xt;Xt=Xt.nextSibling){if(wt=gt(Xt,Xt.firstChild,0),wt)return Ml(dn(wt.line,wt.ch-Yt),K);Yt+=Xt.textContent.length}for(var bn=_e.previousSibling,Ln=E;bn;bn=bn.previousSibling){if(wt=gt(bn,bn.firstChild,-1),wt)return Ml(dn(wt.line,wt.ch+Ln),K);Ln+=bn.textContent.length}}var Da=function(A){this.cm=A,this.prevInput="",this.pollingFast=!1,this.polling=new Be,this.hasSelection=!1,this.composing=null,this.resetting=!1};Da.prototype.init=function(A){var g=this,E=this,S=this.cm;this.createField(A);var K=this.textarea;A.wrapper.insertBefore(this.wrapper,A.wrapper.firstChild),H&&(K.style.width="0px"),je(K,"input",function(){p&&v>=9&&g.hasSelection&&(g.hasSelection=null),E.poll()}),je(K,"paste",function(Ae){dt(S,Ae)||XA(Ae,S)||(S.state.pasteIncoming=+new Date,E.fastPoll())});function Z(Ae){if(!dt(S,Ae)){if(S.somethingSelected())Jl({lineWise:!1,text:S.getSelections()});else if(S.options.lineWiseCopyCut){var _e=Ih(S);Jl({lineWise:!0,text:_e.text}),Ae.type=="cut"?S.setSelections(_e.ranges,null,Lt):(E.prevInput="",K.value=_e.text.join(`
`),He(K))}else return;Ae.type=="cut"&&(S.state.cutIncoming=+new Date)}}je(K,"cut",Z),je(K,"copy",Z),je(A.scroller,"paste",function(Ae){if(!(Eu(A,Ae)||dt(S,Ae))){if(!K.dispatchEvent){S.state.pasteIncoming=+new Date,E.focus();return}var _e=new Event("paste");_e.clipboardData=Ae.clipboardData,K.dispatchEvent(_e)}}),je(A.lineSpace,"selectstart",function(Ae){Eu(A,Ae)||tn(Ae)}),je(K,"compositionstart",function(){var Ae=S.getCursor("from");E.composing&&E.composing.range.clear(),E.composing={start:Ae,range:S.markText(Ae,S.getCursor("to"),{className:"CodeMirror-composing"})}}),je(K,"compositionend",function(){E.composing&&(E.poll(),E.composing.range.clear(),E.composing=null)})},Da.prototype.createField=function(A){this.wrapper=kh(),this.textarea=this.wrapper.firstChild;var g=this.cm.options;hf(this.textarea,g.spellcheck,g.autocorrect,g.autocapitalize)},Da.prototype.screenReaderLabelChanged=function(A){A?this.textarea.setAttribute("aria-label",A):this.textarea.removeAttribute("aria-label")},Da.prototype.prepareSelection=function(){var A=this.cm,g=A.display,E=A.doc,S=wc(A);if(A.options.moveInputWithCursor){var K=un(A,E.sel.primary().head,"div"),Z=g.wrapper.getBoundingClientRect(),Ae=g.lineDiv.getBoundingClientRect();S.teTop=Math.max(0,Math.min(g.wrapper.clientHeight-10,K.top+Ae.top-Z.top)),S.teLeft=Math.max(0,Math.min(g.wrapper.clientWidth-10,K.left+Ae.left-Z.left))}return S},Da.prototype.showSelection=function(A){var g=this.cm,E=g.display;De(E.cursorDiv,A.cursors),De(E.selectionDiv,A.selection),A.teTop!=null&&(this.wrapper.style.top=A.teTop+"px",this.wrapper.style.left=A.teLeft+"px")},Da.prototype.reset=function(A){if(!(this.contextMenuPending||this.composing&&A)){var g=this.cm;if(this.resetting=!0,g.somethingSelected()){this.prevInput="";var E=g.getSelection();this.textarea.value=E,g.state.focused&&He(this.textarea),p&&v>=9&&(this.hasSelection=E)}else A||(this.prevInput=this.textarea.value="",p&&v>=9&&(this.hasSelection=null));this.resetting=!1}},Da.prototype.getField=function(){return this.textarea},Da.prototype.supportsTouch=function(){return!1},Da.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!te||Ne(yt(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Da.prototype.blur=function(){this.textarea.blur()},Da.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Da.prototype.receivedFocus=function(){this.slowPoll()},Da.prototype.slowPoll=function(){var A=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){A.poll(),A.cm.state.focused&&A.slowPoll()})},Da.prototype.fastPoll=function(){var A=!1,g=this;g.pollingFast=!0;function E(){var S=g.poll();!S&&!A?(A=!0,g.polling.set(60,E)):(g.pollingFast=!1,g.slowPoll())}g.polling.set(20,E)},Da.prototype.poll=function(){var A=this,g=this.cm,E=this.textarea,S=this.prevInput;if(this.contextMenuPending||this.resetting||!g.state.focused||co(E)&&!S&&!this.composing||g.isReadOnly()||g.options.disableInput||g.state.keySeq)return!1;var K=E.value;if(K==S&&!g.somethingSelected())return!1;if(p&&v>=9&&this.hasSelection===K||V&&/[\uf700-\uf7ff]/.test(K))return g.display.input.reset(),!1;if(g.doc.sel==g.display.selForContextMenu){var Z=K.charCodeAt(0);if(Z==8203&&!S&&(S=""),Z==8666)return this.reset(),this.cm.execCommand("undo")}for(var Ae=0,_e=Math.min(S.length,K.length);Ae<_e&&S.charCodeAt(Ae)==K.charCodeAt(Ae);)++Ae;return Ss(g,function(){Yf(g,K.slice(Ae),S.length-Ae,null,A.composing?"*compose":null),K.length>1e3||K.indexOf(`
`)>-1?E.value=A.prevInput="":A.prevInput=K,A.composing&&(A.composing.range.clear(),A.composing.range=g.markText(A.composing.start,g.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Da.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Da.prototype.onKeyPress=function(){p&&v>=9&&(this.hasSelection=null),this.fastPoll()},Da.prototype.onContextMenu=function(A){var g=this,E=g.cm,S=E.display,K=g.textarea;g.contextMenuPending&&g.contextMenuPending();var Z=Bu(E,A),Ae=S.scroller.scrollTop;if(!Z||U)return;var _e=E.options.resetSelectionOnContextMenu;_e&&E.doc.sel.contains(Z)==-1&&Ti(E,ba)(E.doc,Pa(Z),Lt);var Ie=K.style.cssText,Ue=g.wrapper.style.cssText,gt=g.wrapper.offsetParent.getBoundingClientRect();g.wrapper.style.cssText="position: static",K.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(A.clientY-gt.top-5)+"px; left: "+(A.clientX-gt.left-5)+`px;
      z-index: 1000; background: `+(p?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var wt;x&&(wt=K.ownerDocument.defaultView.scrollY),S.input.focus(),x&&K.ownerDocument.defaultView.scrollTo(null,wt),S.input.reset(),E.somethingSelected()||(K.value=g.prevInput=" "),g.contextMenuPending=Yt,S.selForContextMenu=E.doc.sel,clearTimeout(S.detectingSelectAll);function Xt(){if(K.selectionStart!=null){var Ln=E.somethingSelected(),rr=""+(Ln?K.value:"");K.value="",K.value=rr,g.prevInput=Ln?"":"",K.selectionStart=1,K.selectionEnd=rr.length,S.selForContextMenu=E.doc.sel}}function Yt(){if(g.contextMenuPending==Yt&&(g.contextMenuPending=!1,g.wrapper.style.cssText=Ue,K.style.cssText=Ie,p&&v<9&&S.scrollbars.setScrollTop(S.scroller.scrollTop=Ae),K.selectionStart!=null)){(!p||p&&v<9)&&Xt();var Ln=0,rr=function(){S.selForContextMenu==E.doc.sel&&K.selectionStart==0&&K.selectionEnd>0&&g.prevInput==""?Ti(E,Kl)(E):Ln++<10?S.detectingSelectAll=setTimeout(rr,500):(S.selForContextMenu=null,S.input.reset())};S.detectingSelectAll=setTimeout(rr,200)}}if(p&&v>=9&&Xt(),fe){on(A);var bn=function(){Je(window,"mouseup",bn),setTimeout(Yt,20)};je(window,"mouseup",bn)}else setTimeout(Yt,50)},Da.prototype.readOnlyChanged=function(A){A||this.reset(),this.textarea.disabled=A=="nocursor",this.textarea.readOnly=!!A},Da.prototype.setUneditable=function(){},Da.prototype.needsContentAttribute=!1;function cm(A,g){if(g=g?Le(g):{},g.value=A.value,!g.tabindex&&A.tabIndex&&(g.tabindex=A.tabIndex),!g.placeholder&&A.placeholder&&(g.placeholder=A.placeholder),g.autofocus==null){var E=Ne(yt(A));g.autofocus=E==A||A.getAttribute("autofocus")!=null&&E==document.body}function S(){A.value=_e.getValue()}var K;if(A.form&&(je(A.form,"submit",S),!g.leaveSubmitMethodAlone)){var Z=A.form;K=Z.submit;try{var Ae=Z.submit=function(){S(),Z.submit=K,Z.submit(),Z.submit=Ae}}catch{}}g.finishInit=function(Ie){Ie.save=S,Ie.getTextArea=function(){return A},Ie.toTextArea=function(){Ie.toTextArea=isNaN,S(),A.parentNode.removeChild(Ie.getWrapperElement()),A.style.display="",A.form&&(Je(A.form,"submit",S),!g.leaveSubmitMethodAlone&&typeof A.form.submit=="function"&&(A.form.submit=K))}},A.style.display="none";var _e=Zo(function(Ie){return A.parentNode.insertBefore(Ie,A.nextSibling)},g);return _e}function qf(A){A.off=Je,A.on=je,A.wheelEventPixels=MA,A.Doc=qt,A.splitLines=Qr,A.countColumn=Pe,A.findColumn=_n,A.isWordChar=tr,A.Pass=ft,A.signal=ut,A.Line=Ys,A.changeEnd=$a,A.scrollbarModel=Zc,A.Pos=dn,A.cmpPos=lr,A.modes=Zi,A.mimeModes=Ts,A.resolveMode=ps,A.getMode=bi,A.modeExtensions=Il,A.extendMode=kl,A.copyState=io,A.startState=ol,A.innerMode=vl,A.commands=Ku,A.keyMap=fo,A.keyName=pu,A.isModifierKey=xl,A.lookupKey=rs,A.normalizeKeyMap=Ho,A.StringStream=bo,A.SharedTextMarker=Bt,A.TextMarker=pt,A.LineWidget=Qe,A.e_preventDefault=tn,A.e_stopPropagation=Dn,A.e_stop=on,A.addClass=Se,A.contains=Xe,A.rmClass=me,A.keyNames=Bi}Xl(Zo),Pd(Zo);var gu="iter insert remove copy getEditor constructor".split(" ");for(var ff in qt.prototype)qt.prototype.hasOwnProperty(ff)&&it(gu,ff)<0&&(Zo.prototype[ff]=function(A){return function(){return A.apply(this.doc,arguments)}}(qt.prototype[ff]));return jt(qt),Zo.inputStyles={textarea:Da,contenteditable:Uo},Zo.defineMode=function(A){!Zo.defaults.mode&&A!="null"&&(Zo.defaults.mode=A),xs.apply(this,arguments)},Zo.defineMIME=aa,Zo.defineMode("null",function(){return{token:function(A){return A.skipToEnd()}}}),Zo.defineMIME("text/plain","null"),Zo.defineExtension=function(A,g){Zo.prototype[A]=g},Zo.defineDocExtension=function(A,g){qt.prototype[A]=g},Zo.fromTextArea=cm,qf(Zo),Zo.version="5.65.19",Zo})}(Ob)),Ob.exports}var aoe=Nx();const hp=yl(aoe);var Y9={exports:{}},q9;function loe(){return q9||(q9=1,function(n,e){(function(t){t(Nx())})(function(t){t.defineMode("javascript",function(r,i){var s=r.indentUnit,l=i.statementIndent,o=i.jsonld,p=i.json||o,v=i.trackScope!==!1,x=i.typescript,B=i.wordCharacters||/[\w$\xa1-\uffff]/,T=function(){function Ye(xo){return{type:xo,style:"keyword"}}var xt=Ye("keyword a"),yn=Ye("keyword b"),Zn=Ye("keyword c"),dn=Ye("keyword d"),lr=Ye("operator"),Pi={type:"atom",style:"atom"};return{if:Ye("if"),while:xt,with:xt,else:yn,do:yn,try:yn,finally:yn,return:dn,break:dn,continue:dn,new:Ye("new"),delete:Zn,void:Zn,throw:Zn,debugger:Ye("debugger"),var:Ye("var"),const:Ye("var"),let:Ye("var"),function:Ye("function"),catch:Ye("catch"),for:Ye("for"),switch:Ye("switch"),case:Ye("case"),default:Ye("default"),in:lr,typeof:lr,instanceof:lr,true:Pi,false:Pi,null:Pi,undefined:Pi,NaN:Pi,Infinity:Pi,this:Ye("this"),class:Ye("class"),super:Ye("atom"),yield:Zn,export:Ye("export"),import:Ye("import"),extends:Zn,await:Zn}}(),P=/[+\-*&%=<>!?|~^@]/,U=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function j(Ye){for(var xt=!1,yn,Zn=!1;(yn=Ye.next())!=null;){if(!xt){if(yn=="/"&&!Zn)return;yn=="["?Zn=!0:Zn&&yn=="]"&&(Zn=!1)}xt=!xt&&yn=="\\"}}var N,q;function H(Ye,xt,yn){return N=Ye,q=yn,xt}function oe(Ye,xt){var yn=Ye.next();if(yn=='"'||yn=="'")return xt.tokenize=te(yn),xt.tokenize(Ye,xt);if(yn=="."&&Ye.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return H("number","number");if(yn=="."&&Ye.match(".."))return H("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(yn))return H(yn);if(yn=="="&&Ye.eat(">"))return H("=>","operator");if(yn=="0"&&Ye.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return H("number","number");if(/\d/.test(yn))return Ye.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),H("number","number");if(yn=="/")return Ye.eat("*")?(xt.tokenize=V,V(Ye,xt)):Ye.eat("/")?(Ye.skipToEnd(),H("comment","comment")):Gs(Ye,xt,1)?(j(Ye),Ye.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),H("regexp","string-2")):(Ye.eat("="),H("operator","operator",Ye.current()));if(yn=="`")return xt.tokenize=ne,ne(Ye,xt);if(yn=="#"&&Ye.peek()=="!")return Ye.skipToEnd(),H("meta","meta");if(yn=="#"&&Ye.eatWhile(B))return H("variable","property");if(yn=="<"&&Ye.match("!--")||yn=="-"&&Ye.match("->")&&!/\S/.test(Ye.string.slice(0,Ye.start)))return Ye.skipToEnd(),H("comment","comment");if(P.test(yn))return(yn!=">"||!xt.lexical||xt.lexical.type!=">")&&(Ye.eat("=")?(yn=="!"||yn=="=")&&Ye.eat("="):/[<>*+\-|&?]/.test(yn)&&(Ye.eat(yn),yn==">"&&Ye.eat(yn))),yn=="?"&&Ye.eat(".")?H("."):H("operator","operator",Ye.current());if(B.test(yn)){Ye.eatWhile(B);var Zn=Ye.current();if(xt.lastType!="."){if(T.propertyIsEnumerable(Zn)){var dn=T[Zn];return H(dn.type,dn.style,Zn)}if(Zn=="async"&&Ye.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return H("async","keyword",Zn)}return H("variable","variable",Zn)}}function te(Ye){return function(xt,yn){var Zn=!1,dn;if(o&&xt.peek()=="@"&&xt.match(U))return yn.tokenize=oe,H("jsonld-keyword","meta");for(;(dn=xt.next())!=null&&!(dn==Ye&&!Zn);)Zn=!Zn&&dn=="\\";return Zn||(yn.tokenize=oe),H("string","string")}}function V(Ye,xt){for(var yn=!1,Zn;Zn=Ye.next();){if(Zn=="/"&&yn){xt.tokenize=oe;break}yn=Zn=="*"}return H("comment","comment")}function ne(Ye,xt){for(var yn=!1,Zn;(Zn=Ye.next())!=null;){if(!yn&&(Zn=="`"||Zn=="$"&&Ye.eat("{"))){xt.tokenize=oe;break}yn=!yn&&Zn=="\\"}return H("quasi","string-2",Ye.current())}var W="([{}])";function ie(Ye,xt){xt.fatArrowAt&&(xt.fatArrowAt=null);var yn=Ye.string.indexOf("=>",Ye.start);if(!(yn<0)){if(x){var Zn=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Ye.string.slice(Ye.start,yn));Zn&&(yn=Zn.index)}for(var dn=0,lr=!1,Pi=yn-1;Pi>=0;--Pi){var xo=Ye.string.charAt(Pi),as=W.indexOf(xo);if(as>=0&&as<3){if(!dn){++Pi;break}if(--dn==0){xo=="("&&(lr=!0);break}}else if(as>=3&&as<6)++dn;else if(B.test(xo))lr=!0;else if(/["'\/`]/.test(xo))for(;;--Pi){if(Pi==0)return;var la=Ye.string.charAt(Pi-1);if(la==xo&&Ye.string.charAt(Pi-2)!="\\"){Pi--;break}}else if(lr&&!dn){++Pi;break}}lr&&!dn&&(xt.fatArrowAt=Pi)}}var he={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function fe(Ye,xt,yn,Zn,dn,lr){this.indented=Ye,this.column=xt,this.type=yn,this.prev=dn,this.info=lr,Zn!=null&&(this.align=Zn)}function Ee(Ye,xt){if(!v)return!1;for(var yn=Ye.localVars;yn;yn=yn.next)if(yn.name==xt)return!0;for(var Zn=Ye.context;Zn;Zn=Zn.prev)for(var yn=Zn.vars;yn;yn=yn.next)if(yn.name==xt)return!0}function me(Ye,xt,yn,Zn,dn){var lr=Ye.cc;for(Me.state=Ye,Me.stream=dn,Me.marked=null,Me.cc=lr,Me.style=xt,Ye.lexical.hasOwnProperty("align")||(Ye.lexical.align=!0);;){var Pi=lr.length?lr.pop():p?it:Pe;if(Pi(yn,Zn)){for(;lr.length&&lr[lr.length-1].lex;)lr.pop()();return Me.marked?Me.marked:yn=="variable"&&Ee(Ye,Zn)?"variable-2":xt}}}var Me={state:null,column:null,marked:null,cc:null};function De(){for(var Ye=arguments.length-1;Ye>=0;Ye--)Me.cc.push(arguments[Ye])}function xe(){return De.apply(null,arguments),!0}function At(Ye,xt){for(var yn=xt;yn;yn=yn.next)if(yn.name==Ye)return!0;return!1}function Ze(Ye){var xt=Me.state;if(Me.marked="def",!!v){if(xt.context){if(xt.lexical.info=="var"&&xt.context&&xt.context.block){var yn=Xe(Ye,xt.context);if(yn!=null){xt.context=yn;return}}else if(!At(Ye,xt.localVars)){xt.localVars=new Re(Ye,xt.localVars);return}}i.globalVars&&!At(Ye,xt.globalVars)&&(xt.globalVars=new Re(Ye,xt.globalVars))}}function Xe(Ye,xt){if(xt)if(xt.block){var yn=Xe(Ye,xt.prev);return yn?yn==xt.prev?xt:new Se(yn,xt.vars,!0):null}else return At(Ye,xt.vars)?xt:new Se(xt.prev,new Re(Ye,xt.vars),!1);else return null}function Ne(Ye){return Ye=="public"||Ye=="private"||Ye=="protected"||Ye=="abstract"||Ye=="readonly"}function Se(Ye,xt,yn){this.prev=Ye,this.vars=xt,this.block=yn}function Re(Ye,xt){this.name=Ye,this.next=xt}var He=new Re("this",new Re("arguments",null));function _t(){Me.state.context=new Se(Me.state.context,Me.state.localVars,!1),Me.state.localVars=He}function Gt(){Me.state.context=new Se(Me.state.context,Me.state.localVars,!0),Me.state.localVars=null}_t.lex=Gt.lex=!0;function yt(){Me.state.localVars=Me.state.context.vars,Me.state.context=Me.state.context.prev}yt.lex=!0;function Ft(Ye,xt){var yn=function(){var Zn=Me.state,dn=Zn.indented;if(Zn.lexical.type=="stat")dn=Zn.lexical.indented;else for(var lr=Zn.lexical;lr&&lr.type==")"&&lr.align;lr=lr.prev)dn=lr.indented;Zn.lexical=new fe(dn,Me.stream.column(),Ye,null,Zn.lexical,xt)};return yn.lex=!0,yn}function Tt(){var Ye=Me.state;Ye.lexical.prev&&(Ye.lexical.type==")"&&(Ye.indented=Ye.lexical.indented),Ye.lexical=Ye.lexical.prev)}Tt.lex=!0;function Le(Ye){function xt(yn){return yn==Ye?xe():Ye==";"||yn=="}"||yn==")"||yn=="]"?De():xe(xt)}return xt}function Pe(Ye,xt){return Ye=="var"?xe(Ft("vardef",xt),Dn,Le(";"),Tt):Ye=="keyword a"?xe(Ft("form"),ft,Pe,Tt):Ye=="keyword b"?xe(Ft("form"),Pe,Tt):Ye=="keyword d"?Me.stream.match(/^\s*$/,!1)?xe():xe(Ft("stat"),Zt,Le(";"),Tt):Ye=="debugger"?xe(Le(";")):Ye=="{"?xe(Ft("}"),Gt,Ht,Tt,yt):Ye==";"?xe():Ye=="if"?(Me.state.lexical.info=="else"&&Me.state.cc[Me.state.cc.length-1]==Tt&&Me.state.cc.pop()(),xe(Ft("form"),ft,Pe,Tt,qr)):Ye=="function"?xe(Qr):Ye=="for"?xe(Ft("form"),Gt,Bn,Pe,yt,Tt):Ye=="class"||x&&xt=="interface"?(Me.marked="keyword",xe(Ft("form",Ye=="class"?Ye:xt),Zi,Tt)):Ye=="variable"?x&&xt=="declare"?(Me.marked="keyword",xe(Pe)):x&&(xt=="module"||xt=="enum"||xt=="type")&&Me.stream.match(/^\s*\w/,!1)?(Me.marked="keyword",xt=="enum"?xe(Kr):xt=="type"?xe(ma,Le("operator"),Ce,Le(";")):xe(Ft("form"),Fn,Le("{"),Ft("}"),Ht,Tt,Tt)):x&&xt=="namespace"?(Me.marked="keyword",xe(Ft("form"),it,Pe,Tt)):x&&xt=="abstract"?(Me.marked="keyword",xe(Pe)):xe(Ft("stat"),gr):Ye=="switch"?xe(Ft("form"),ft,Le("{"),Ft("}","switch"),Gt,Ht,Tt,Tt,yt):Ye=="case"?xe(it,Le(":")):Ye=="default"?xe(Le(":")):Ye=="catch"?xe(Ft("form"),_t,Be,Pe,Tt,yt):Ye=="export"?xe(Ft("stat"),ps,Tt):Ye=="import"?xe(Ft("stat"),Il,Tt):Ye=="async"?xe(Pe):xt=="@"?xe(it,Pe):De(Ft("stat"),it,Le(";"),Tt)}function Be(Ye){if(Ye=="(")return xe(Mr,Le(")"))}function it(Ye,xt){return Lt(Ye,xt,!1)}function Ct(Ye,xt){return Lt(Ye,xt,!0)}function ft(Ye){return Ye!="("?De():xe(Ft(")"),Zt,Le(")"),Tt)}function Lt(Ye,xt,yn){if(Me.state.fatArrowAt==Me.stream.start){var Zn=yn?kn:ar;if(Ye=="(")return xe(_t,Ft(")"),rt(Mr,")"),Tt,Le("=>"),Zn,yt);if(Ye=="variable")return De(_t,Fn,Le("=>"),Zn,yt)}var dn=yn?_n:Rt;return he.hasOwnProperty(Ye)?xe(dn):Ye=="function"?xe(Qr,dn):Ye=="class"||x&&xt=="interface"?(Me.marked="keyword",xe(Ft("form"),wi,Tt)):Ye=="keyword c"||Ye=="async"?xe(yn?Ct:it):Ye=="("?xe(Ft(")"),Zt,Le(")"),Tt,dn):Ye=="operator"||Ye=="spread"?xe(yn?Ct:it):Ye=="["?xe(Ft("]"),bo,Tt,dn):Ye=="{"?St(Ge,"}",null,dn):Ye=="quasi"?De(qn,dn):Ye=="new"?xe(mn(yn)):xe()}function Zt(Ye){return Ye.match(/[;\}\)\],]/)?De():De(it)}function Rt(Ye,xt){return Ye==","?xe(Zt):_n(Ye,xt,!1)}function _n(Ye,xt,yn){var Zn=yn==!1?Rt:_n,dn=yn==!1?it:Ct;if(Ye=="=>")return xe(_t,yn?kn:ar,yt);if(Ye=="operator")return/\+\+|--/.test(xt)||x&&xt=="!"?xe(Zn):x&&xt=="<"&&Me.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?xe(Ft(">"),rt(Ce,">"),Tt,Zn):xt=="?"?xe(it,Le(":"),dn):xe(dn);if(Ye=="quasi")return De(qn,Zn);if(Ye!=";"){if(Ye=="(")return St(Ct,")","call",Zn);if(Ye==".")return xe(tr,Zn);if(Ye=="[")return xe(Ft("]"),Zt,Le("]"),Tt,Zn);if(x&&xt=="as")return Me.marked="keyword",xe(Ce,Zn);if(Ye=="regexp")return Me.state.lastType=Me.marked="operator",Me.stream.backUp(Me.stream.pos-Me.stream.start-1),xe(dn)}}function qn(Ye,xt){return Ye!="quasi"?De():xt.slice(xt.length-2)!="${"?xe(qn):xe(Zt,rn)}function rn(Ye){if(Ye=="}")return Me.marked="string-2",Me.state.tokenize=ne,xe(qn)}function ar(Ye){return ie(Me.stream,Me.state),De(Ye=="{"?Pe:it)}function kn(Ye){return ie(Me.stream,Me.state),De(Ye=="{"?Pe:Ct)}function mn(Ye){return function(xt){return xt=="."?xe(Ye?br:zn):xt=="variable"&&x?xe(Wt,Ye?_n:Rt):De(Ye?Ct:it)}}function zn(Ye,xt){if(xt=="target")return Me.marked="keyword",xe(Rt)}function br(Ye,xt){if(xt=="target")return Me.marked="keyword",xe(_n)}function gr(Ye){return Ye==":"?xe(Tt,Pe):De(Rt,Le(";"),Tt)}function tr(Ye){if(Ye=="variable")return Me.marked="property",xe()}function Ge(Ye,xt){if(Ye=="async")return Me.marked="property",xe(Ge);if(Ye=="variable"||Me.style=="keyword"){if(Me.marked="property",xt=="get"||xt=="set")return xe(ce);var yn;return x&&Me.state.fatArrowAt==Me.stream.start&&(yn=Me.stream.match(/^\s*:\s*/,!1))&&(Me.state.fatArrowAt=Me.stream.pos+yn[0].length),xe(pe)}else{if(Ye=="number"||Ye=="string")return Me.marked=o?"property":Me.style+" property",xe(pe);if(Ye=="jsonld-keyword")return xe(pe);if(x&&Ne(xt))return Me.marked="keyword",xe(Ge);if(Ye=="[")return xe(it,sn,Le("]"),pe);if(Ye=="spread")return xe(Ct,pe);if(xt=="*")return Me.marked="keyword",xe(Ge);if(Ye==":")return De(pe)}}function ce(Ye){return Ye!="variable"?De(pe):(Me.marked="property",xe(Qr))}function pe(Ye){if(Ye==":")return xe(Ct);if(Ye=="(")return De(Qr)}function rt(Ye,xt,yn){function Zn(dn,lr){if(yn?yn.indexOf(dn)>-1:dn==","){var Pi=Me.state.lexical;return Pi.info=="call"&&(Pi.pos=(Pi.pos||0)+1),xe(function(xo,as){return xo==xt||as==xt?De():De(Ye)},Zn)}return dn==xt||lr==xt?xe():yn&&yn.indexOf(";")>-1?De(Ye):xe(Le(xt))}return function(dn,lr){return dn==xt||lr==xt?xe():De(Ye,Zn)}}function St(Ye,xt,yn){for(var Zn=3;Zn<arguments.length;Zn++)Me.cc.push(arguments[Zn]);return xe(Ft(xt,yn),rt(Ye,xt),Tt)}function Ht(Ye){return Ye=="}"?xe():De(Pe,Ht)}function sn(Ye,xt){if(x){if(Ye==":")return xe(Ce);if(xt=="?")return xe(sn)}}function nr(Ye,xt){if(x&&(Ye==":"||xt=="in"))return xe(Ce)}function $e(Ye){if(x&&Ye==":")return Me.stream.match(/^\s*\w+\s+is\b/,!1)?xe(it,ae,Ce):xe(Ce)}function ae(Ye,xt){if(xt=="is")return Me.marked="keyword",xe()}function Ce(Ye,xt){if(xt=="keyof"||xt=="typeof"||xt=="infer"||xt=="readonly")return Me.marked="keyword",xe(xt=="typeof"?Ct:Ce);if(Ye=="variable"||xt=="void")return Me.marked="type",xe(Qt);if(xt=="|"||xt=="&")return xe(Ce);if(Ye=="string"||Ye=="number"||Ye=="atom")return xe(Qt);if(Ye=="[")return xe(Ft("]"),rt(Ce,"]",","),Tt,Qt);if(Ye=="{")return xe(Ft("}"),je,Tt,Qt);if(Ye=="(")return xe(rt(dt,")"),f,Qt);if(Ye=="<")return xe(rt(Ce,">"),Ce);if(Ye=="quasi")return De(Je,Qt)}function f(Ye){if(Ye=="=>")return xe(Ce)}function je(Ye){return Ye.match(/[\}\)\]]/)?xe():Ye==","||Ye==";"?xe(je):De(qe,je)}function qe(Ye,xt){if(Ye=="variable"||Me.style=="keyword")return Me.marked="property",xe(qe);if(xt=="?"||Ye=="number"||Ye=="string")return xe(qe);if(Ye==":")return xe(Ce);if(Ye=="[")return xe(Le("variable"),nr,Le("]"),qe);if(Ye=="(")return De(co,qe);if(!Ye.match(/[;\}\)\],]/))return xe()}function Je(Ye,xt){return Ye!="quasi"?De():xt.slice(xt.length-2)!="${"?xe(Je):xe(Ce,ut)}function ut(Ye){if(Ye=="}")return Me.marked="string-2",Me.state.tokenize=ne,xe(Je)}function dt(Ye,xt){return Ye=="variable"&&Me.stream.match(/^\s*[?:]/,!1)||xt=="?"?xe(dt):Ye==":"?xe(Ce):Ye=="spread"?xe(dt):De(Ce)}function Qt(Ye,xt){if(xt=="<")return xe(Ft(">"),rt(Ce,">"),Tt,Qt);if(xt=="|"||Ye=="."||xt=="&")return xe(Ce);if(Ye=="[")return xe(Ce,Le("]"),Qt);if(xt=="extends"||xt=="implements")return Me.marked="keyword",xe(Ce);if(xt=="?")return xe(Ce,Le(":"),Ce)}function Wt(Ye,xt){if(xt=="<")return xe(Ft(">"),rt(Ce,">"),Tt,Qt)}function jt(){return De(Ce,tn)}function tn(Ye,xt){if(xt=="=")return xe(Ce)}function Dn(Ye,xt){return xt=="enum"?(Me.marked="keyword",xe(Kr)):De(Fn,sn,Hn,xr)}function Fn(Ye,xt){if(x&&Ne(xt))return Me.marked="keyword",xe(Fn);if(Ye=="variable")return Ze(xt),xe();if(Ye=="spread")return xe(Fn);if(Ye=="[")return St(Sr,"]");if(Ye=="{")return St(on,"}")}function on(Ye,xt){return Ye=="variable"&&!Me.stream.match(/^\s*:/,!1)?(Ze(xt),xe(Hn)):(Ye=="variable"&&(Me.marked="property"),Ye=="spread"?xe(Fn):Ye=="}"?De():Ye=="["?xe(it,Le("]"),Le(":"),on):xe(Le(":"),Fn,Hn))}function Sr(){return De(Fn,Hn)}function Hn(Ye,xt){if(xt=="=")return xe(Ct)}function xr(Ye){if(Ye==",")return xe(Dn)}function qr(Ye,xt){if(Ye=="keyword b"&&xt=="else")return xe(Ft("form","else"),Pe,Tt)}function Bn(Ye,xt){if(xt=="await")return xe(Bn);if(Ye=="(")return xe(Ft(")"),$n,Tt)}function $n(Ye){return Ye=="var"?xe(Dn,Yn):Ye=="variable"?xe(Yn):De(Yn)}function Yn(Ye,xt){return Ye==")"?xe():Ye==";"?xe(Yn):xt=="in"||xt=="of"?(Me.marked="keyword",xe(it,Yn)):De(it,Yn)}function Qr(Ye,xt){if(xt=="*")return Me.marked="keyword",xe(Qr);if(Ye=="variable")return Ze(xt),xe(Qr);if(Ye=="(")return xe(_t,Ft(")"),rt(Mr,")"),Tt,$e,Pe,yt);if(x&&xt=="<")return xe(Ft(">"),rt(jt,">"),Tt,Qr)}function co(Ye,xt){if(xt=="*")return Me.marked="keyword",xe(co);if(Ye=="variable")return Ze(xt),xe(co);if(Ye=="(")return xe(_t,Ft(")"),rt(Mr,")"),Tt,$e,yt);if(x&&xt=="<")return xe(Ft(">"),rt(jt,">"),Tt,co)}function ma(Ye,xt){if(Ye=="keyword"||Ye=="variable")return Me.marked="type",xe(ma);if(xt=="<")return xe(Ft(">"),rt(jt,">"),Tt)}function Mr(Ye,xt){return xt=="@"&&xe(it,Mr),Ye=="spread"?xe(Mr):x&&Ne(xt)?(Me.marked="keyword",xe(Mr)):x&&Ye=="this"?xe(sn,Hn):De(Fn,sn,Hn)}function wi(Ye,xt){return Ye=="variable"?Zi(Ye,xt):Ts(Ye,xt)}function Zi(Ye,xt){if(Ye=="variable")return Ze(xt),xe(Ts)}function Ts(Ye,xt){if(xt=="<")return xe(Ft(">"),rt(jt,">"),Tt,Ts);if(xt=="extends"||xt=="implements"||x&&Ye==",")return xt=="implements"&&(Me.marked="keyword"),xe(x?Ce:it,Ts);if(Ye=="{")return xe(Ft("}"),xs,Tt)}function xs(Ye,xt){if(Ye=="async"||Ye=="variable"&&(xt=="static"||xt=="get"||xt=="set"||x&&Ne(xt))&&Me.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return Me.marked="keyword",xe(xs);if(Ye=="variable"||Me.style=="keyword")return Me.marked="property",xe(aa,xs);if(Ye=="number"||Ye=="string")return xe(aa,xs);if(Ye=="[")return xe(it,sn,Le("]"),aa,xs);if(xt=="*")return Me.marked="keyword",xe(xs);if(x&&Ye=="(")return De(co,xs);if(Ye==";"||Ye==",")return xe(xs);if(Ye=="}")return xe();if(xt=="@")return xe(it,xs)}function aa(Ye,xt){if(xt=="!"||xt=="?")return xe(aa);if(Ye==":")return xe(Ce,Hn);if(xt=="=")return xe(Ct);var yn=Me.state.lexical.prev,Zn=yn&&yn.info=="interface";return De(Zn?co:Qr)}function ps(Ye,xt){return xt=="*"?(Me.marked="keyword",xe(ol,Le(";"))):xt=="default"?(Me.marked="keyword",xe(it,Le(";"))):Ye=="{"?xe(rt(bi,"}"),ol,Le(";")):De(Pe)}function bi(Ye,xt){if(xt=="as")return Me.marked="keyword",xe(Le("variable"));if(Ye=="variable")return De(Ct,bi)}function Il(Ye){return Ye=="string"?xe():Ye=="("?De(it):Ye=="."?De(Rt):De(kl,io,ol)}function kl(Ye,xt){return Ye=="{"?St(kl,"}"):(Ye=="variable"&&Ze(xt),xt=="*"&&(Me.marked="keyword"),xe(vl))}function io(Ye){if(Ye==",")return xe(kl,io)}function vl(Ye,xt){if(xt=="as")return Me.marked="keyword",xe(kl)}function ol(Ye,xt){if(xt=="from")return Me.marked="keyword",xe(it)}function bo(Ye){return Ye=="]"?xe():De(rt(Ct,"]"))}function Kr(){return De(Ft("form"),Fn,Le("{"),Ft("}"),rt(Wa,"}"),Tt,Tt)}function Wa(){return De(Fn,Hn)}function Vo(Ye,xt){return Ye.lastType=="operator"||Ye.lastType==","||P.test(xt.charAt(0))||/[,.]/.test(xt.charAt(0))}function Gs(Ye,xt,yn){return xt.tokenize==oe&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(xt.lastType)||xt.lastType=="quasi"&&/\{\s*$/.test(Ye.string.slice(0,Ye.pos-(yn||0)))}return{startState:function(Ye){var xt={tokenize:oe,lastType:"sof",cc:[],lexical:new fe((Ye||0)-s,0,"block",!1),localVars:i.localVars,context:i.localVars&&new Se(null,null,!1),indented:Ye||0};return i.globalVars&&typeof i.globalVars=="object"&&(xt.globalVars=i.globalVars),xt},token:function(Ye,xt){if(Ye.sol()&&(xt.lexical.hasOwnProperty("align")||(xt.lexical.align=!1),xt.indented=Ye.indentation(),ie(Ye,xt)),xt.tokenize!=V&&Ye.eatSpace())return null;var yn=xt.tokenize(Ye,xt);return N=="comment"?yn:(xt.lastType=N=="operator"&&(q=="++"||q=="--")?"incdec":N,me(xt,yn,N,q,Ye))},indent:function(Ye,xt){if(Ye.tokenize==V||Ye.tokenize==ne)return t.Pass;if(Ye.tokenize!=oe)return 0;var yn=xt&&xt.charAt(0),Zn=Ye.lexical,dn;if(!/^\s*else\b/.test(xt))for(var lr=Ye.cc.length-1;lr>=0;--lr){var Pi=Ye.cc[lr];if(Pi==Tt)Zn=Zn.prev;else if(Pi!=qr&&Pi!=yt)break}for(;(Zn.type=="stat"||Zn.type=="form")&&(yn=="}"||(dn=Ye.cc[Ye.cc.length-1])&&(dn==Rt||dn==_n)&&!/^[,\.=+\-*:?[\(]/.test(xt));)Zn=Zn.prev;l&&Zn.type==")"&&Zn.prev.type=="stat"&&(Zn=Zn.prev);var xo=Zn.type,as=yn==xo;return xo=="vardef"?Zn.indented+(Ye.lastType=="operator"||Ye.lastType==","?Zn.info.length+1:0):xo=="form"&&yn=="{"?Zn.indented:xo=="form"?Zn.indented+s:xo=="stat"?Zn.indented+(Vo(Ye,xt)?l||s:0):Zn.info=="switch"&&!as&&i.doubleIndentSwitch!=!1?Zn.indented+(/^(?:case|default)\b/.test(xt)?s:2*s):Zn.align?Zn.column+(as?0:1):Zn.indented+(as?0:s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:p?null:"/*",blockCommentEnd:p?null:"*/",blockCommentContinue:p?null:" * ",lineComment:p?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:p?"json":"javascript",jsonldMode:o,jsonMode:p,expressionAllowed:Gs,skipExpression:function(Ye){me(Ye,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),Y9.exports}loe();var V9={exports:{}},$9;function uoe(){return $9||($9=1,function(n,e){(function(t){t(Nx())})(function(t){var r="CodeMirror-lint-markers",i="CodeMirror-lint-line-";function s(W,ie,he){var fe=document.createElement("div");fe.className="CodeMirror-lint-tooltip cm-s-"+W.options.theme,fe.appendChild(he.cloneNode(!0)),W.state.lint.options.selfContain?W.getWrapperElement().appendChild(fe):document.body.appendChild(fe);function Ee(me){if(!fe.parentNode)return t.off(document,"mousemove",Ee);var Me=Math.max(0,me.clientY-fe.offsetHeight-5),De=Math.max(0,Math.min(me.clientX+5,fe.ownerDocument.defaultView.innerWidth-fe.offsetWidth));fe.style.top=Me+"px",fe.style.left=De+"px"}return t.on(document,"mousemove",Ee),Ee(ie),fe.style.opacity!=null&&(fe.style.opacity=1),fe}function l(W){W.parentNode&&W.parentNode.removeChild(W)}function o(W){W.parentNode&&(W.style.opacity==null&&l(W),W.style.opacity=0,setTimeout(function(){l(W)},600))}function p(W,ie,he,fe){var Ee=s(W,ie,he);function me(){t.off(fe,"mouseout",me),Ee&&(o(Ee),Ee=null)}var Me=setInterval(function(){if(Ee)for(var De=fe;;De=De.parentNode){if(De&&De.nodeType==11&&(De=De.host),De==document.body)return;if(!De){me();break}}if(!Ee)return clearInterval(Me)},400);t.on(fe,"mouseout",me)}function v(W,ie,he){this.marked=[],ie instanceof Function&&(ie={getAnnotations:ie}),(!ie||ie===!0)&&(ie={}),this.options={},this.linterOptions=ie.options||{};for(var fe in x)this.options[fe]=x[fe];for(var fe in ie)x.hasOwnProperty(fe)?ie[fe]!=null&&(this.options[fe]=ie[fe]):ie.options||(this.linterOptions[fe]=ie[fe]);this.timeout=null,this.hasGutter=he,this.onMouseOver=function(Ee){ne(W,Ee)},this.waitingFor=0}var x={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function B(W){var ie=W.state.lint;ie.hasGutter&&W.clearGutter(r),ie.options.highlightLines&&T(W);for(var he=0;he<ie.marked.length;++he)ie.marked[he].clear();ie.marked.length=0}function T(W){W.eachLine(function(ie){var he=ie.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(ie.wrapClass);he&&W.removeLineClass(ie,"wrap",he[0])})}function P(W,ie,he,fe,Ee){var me=document.createElement("div"),Me=me;return me.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+he,fe&&(Me=me.appendChild(document.createElement("div")),Me.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),Ee!=!1&&t.on(Me,"mouseover",function(De){p(W,De,ie,Me)}),me}function U(W,ie){return W=="error"?W:ie}function j(W){for(var ie=[],he=0;he<W.length;++he){var fe=W[he],Ee=fe.from.line;(ie[Ee]||(ie[Ee]=[])).push(fe)}return ie}function N(W){var ie=W.severity;ie||(ie="error");var he=document.createElement("div");return he.className="CodeMirror-lint-message CodeMirror-lint-message-"+ie,typeof W.messageHTML<"u"?he.innerHTML=W.messageHTML:he.appendChild(document.createTextNode(W.message)),he}function q(W,ie){var he=W.state.lint,fe=++he.waitingFor;function Ee(){fe=-1,W.off("change",Ee)}W.on("change",Ee),ie(W.getValue(),function(me,Me){W.off("change",Ee),he.waitingFor==fe&&(Me&&me instanceof t&&(me=Me),W.operation(function(){oe(W,me)}))},he.linterOptions,W)}function H(W){var ie=W.state.lint;if(ie){var he=ie.options,fe=he.getAnnotations||W.getHelper(t.Pos(0,0),"lint");if(fe)if(he.async||fe.async)q(W,fe);else{var Ee=fe(W.getValue(),ie.linterOptions,W);if(!Ee)return;Ee.then?Ee.then(function(me){W.operation(function(){oe(W,me)})}):W.operation(function(){oe(W,Ee)})}}}function oe(W,ie){var he=W.state.lint;if(he){var fe=he.options;B(W);for(var Ee=j(ie),me=0;me<Ee.length;++me){var Me=Ee[me];if(Me){for(var De=null,xe=he.hasGutter&&document.createDocumentFragment(),At=0;At<Me.length;++At){var Ze=Me[At],Xe=Ze.severity;Xe||(Xe="error"),De=U(De,Xe),fe.formatAnnotation&&(Ze=fe.formatAnnotation(Ze)),he.hasGutter&&xe.appendChild(N(Ze)),Ze.to&&he.marked.push(W.markText(Ze.from,Ze.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+Xe,__annotation:Ze}))}he.hasGutter&&W.setGutterMarker(me,r,P(W,xe,De,Me.length>1,fe.tooltips)),fe.highlightLines&&W.addLineClass(me,"wrap",i+De)}}fe.onUpdateLinting&&fe.onUpdateLinting(ie,Ee,W)}}function te(W){var ie=W.state.lint;ie&&(clearTimeout(ie.timeout),ie.timeout=setTimeout(function(){H(W)},ie.options.delay))}function V(W,ie,he){for(var fe=he.target||he.srcElement,Ee=document.createDocumentFragment(),me=0;me<ie.length;me++){var Me=ie[me];Ee.appendChild(N(Me))}p(W,he,Ee,fe)}function ne(W,ie){var he=ie.target||ie.srcElement;if(/\bCodeMirror-lint-mark-/.test(he.className)){for(var fe=he.getBoundingClientRect(),Ee=(fe.left+fe.right)/2,me=(fe.top+fe.bottom)/2,Me=W.findMarksAt(W.coordsChar({left:Ee,top:me},"client")),De=[],xe=0;xe<Me.length;++xe){var At=Me[xe].__annotation;At&&De.push(At)}De.length&&V(W,De,ie)}}t.defineOption("lint",!1,function(W,ie,he){if(he&&he!=t.Init&&(B(W),W.state.lint.options.lintOnChange!==!1&&W.off("change",te),t.off(W.getWrapperElement(),"mouseover",W.state.lint.onMouseOver),clearTimeout(W.state.lint.timeout),delete W.state.lint),ie){for(var fe=W.getOption("gutters"),Ee=!1,me=0;me<fe.length;++me)fe[me]==r&&(Ee=!0);var Me=W.state.lint=new v(W,ie,Ee);Me.options.lintOnChange&&W.on("change",te),Me.options.tooltips!=!1&&Me.options.tooltips!="gutter"&&t.on(W.getWrapperElement(),"mouseover",Me.onMouseOver),H(W)}}),t.defineExtension("performLint",function(){H(this)})})}()),V9.exports}uoe();var H9={exports:{}},Z9;function Aoe(){return Z9||(Z9=1,function(n,e){(function(t){t(Nx())})(function(t){var r=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),i=t.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function l(T){return T&&T.bracketRegex||/[(){}[\]]/}function o(T,P,U){var j=T.getLineHandle(P.line),N=P.ch-1,q=U&&U.afterCursor;q==null&&(q=/(^| )cm-fat-cursor($| )/.test(T.getWrapperElement().className));var H=l(U),oe=!q&&N>=0&&H.test(j.text.charAt(N))&&s[j.text.charAt(N)]||H.test(j.text.charAt(N+1))&&s[j.text.charAt(++N)];if(!oe)return null;var te=oe.charAt(1)==">"?1:-1;if(U&&U.strict&&te>0!=(N==P.ch))return null;var V=T.getTokenTypeAt(i(P.line,N+1)),ne=p(T,i(P.line,N+(te>0?1:0)),te,V,U);return ne==null?null:{from:i(P.line,N),to:ne&&ne.pos,match:ne&&ne.ch==oe.charAt(0),forward:te>0}}function p(T,P,U,j,N){for(var q=N&&N.maxScanLineLength||1e4,H=N&&N.maxScanLines||1e3,oe=[],te=l(N),V=U>0?Math.min(P.line+H,T.lastLine()+1):Math.max(T.firstLine()-1,P.line-H),ne=P.line;ne!=V;ne+=U){var W=T.getLine(ne);if(W){var ie=U>0?0:W.length-1,he=U>0?W.length:-1;if(!(W.length>q))for(ne==P.line&&(ie=P.ch-(U<0?1:0));ie!=he;ie+=U){var fe=W.charAt(ie);if(te.test(fe)&&(j===void 0||(T.getTokenTypeAt(i(ne,ie+1))||"")==(j||""))){var Ee=s[fe];if(Ee&&Ee.charAt(1)==">"==U>0)oe.push(fe);else if(oe.length)oe.pop();else return{pos:i(ne,ie),ch:fe}}}}}return ne-U==(U>0?T.lastLine():T.firstLine())?!1:null}function v(T,P,U){for(var j=T.state.matchBrackets.maxHighlightLineLength||1e3,N=U&&U.highlightNonMatching,q=[],H=T.listSelections(),oe=0;oe<H.length;oe++){var te=H[oe].empty()&&o(T,H[oe].head,U);if(te&&(te.match||N!==!1)&&T.getLine(te.from.line).length<=j){var V=te.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";q.push(T.markText(te.from,i(te.from.line,te.from.ch+1),{className:V})),te.to&&T.getLine(te.to.line).length<=j&&q.push(T.markText(te.to,i(te.to.line,te.to.ch+1),{className:V}))}}if(q.length){r&&T.state.focused&&T.focus();var ne=function(){T.operation(function(){for(var W=0;W<q.length;W++)q[W].clear()})};if(P)setTimeout(ne,800);else return ne}}function x(T){T.operation(function(){T.state.matchBrackets.currentlyHighlighted&&(T.state.matchBrackets.currentlyHighlighted(),T.state.matchBrackets.currentlyHighlighted=null),T.state.matchBrackets.currentlyHighlighted=v(T,!1,T.state.matchBrackets)})}function B(T){T.state.matchBrackets&&T.state.matchBrackets.currentlyHighlighted&&(T.state.matchBrackets.currentlyHighlighted(),T.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,function(T,P,U){U&&U!=t.Init&&(T.off("cursorActivity",x),T.off("focus",x),T.off("blur",B),B(T)),P&&(T.state.matchBrackets=typeof P=="object"?P:{},T.on("cursorActivity",x),T.on("focus",x),T.on("blur",B))}),t.defineExtension("matchBrackets",function(){v(this,!0)}),t.defineExtension("findMatchingBracket",function(T,P,U){return(U||typeof P=="boolean")&&(U?(U.strict=P,P=U):P=P?{strict:!0}:null),o(this,T,P)}),t.defineExtension("scanForBracket",function(T,P,U,j){return p(this,T,P,U,j)})})}()),H9.exports}Aoe();const coe=/("(?:[^\\"]|\\.)*")|[:,]/g;function Tz(n,e={}){const t=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),r=t===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:i}=e;return function s(l,o,p){l&&typeof l.toJSON=="function"&&(l=l.toJSON());const v=JSON.stringify(l,i);if(v===void 0)return v;const x=r-o.length-p;if(v.length<=x){const B=v.replace(coe,(T,P)=>P||`${T} `);if(B.length<=x)return B}if(i!=null&&(l=JSON.parse(v),i=void 0),typeof l=="object"&&l!==null){const B=o+t,T=[];let P=0,U,j;if(Array.isArray(l)){U="[",j="]";const{length:N}=l;for(;P<N;P++)T.push(s(l[P],B,P===N-1?0:1)||"null")}else{U="{",j="}";const N=Object.keys(l),{length:q}=N;for(;P<q;P++){const H=N[P],oe=`${JSON.stringify(H)}: `,te=s(l[H],B,oe.length+(P===q-1?0:1));te!==void 0&&T.push(oe+te)}}if(T.length>0)return[U,t+T.join(`,
${B}`),j].join(`
${o}`)}return v}(n,"",0)}var Fv={exports:{}},doe=Fv.exports,X9;function hoe(){return X9||(X9=1,function(n,e){(function(t,r){r(e)})(doe,function(t){const r={isWhiteSpace:function(Se){return Se===" "||Se===""||Se==="\uFEFF"||Se>="	"&&Se<="\r"||Se===""||Se>=""&&Se<=""||Se==="\u2028"||Se==="\u2029"||Se===""||Se===""||Se===""},isWhiteSpaceJSON:function(Se){return Se===" "||Se==="	"||Se===`
`||Se==="\r"},isLineTerminator:function(Se){return Se===`
`||Se==="\r"||Se==="\u2028"||Se==="\u2029"},isLineTerminatorJSON:function(Se){return Se===`
`||Se==="\r"},isIdentifierStart:function(Se){return Se==="$"||Se==="_"||Se>="A"&&Se<="Z"||Se>="a"&&Se<="z"||Se>=""&&r.NonAsciiIdentifierStart.test(Se)},isIdentifierPart:function(Se){return Se==="$"||Se==="_"||Se>="A"&&Se<="Z"||Se>="a"&&Se<="z"||Se>="0"&&Se<="9"||Se>=""&&r.NonAsciiIdentifierPart.test(Se)},NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/};function i(Ne){return Ne>="0"&&Ne<="9"||Ne>="A"&&Ne<="F"||Ne>="a"&&Ne<="f"}function s(Ne){return Ne>="0"&&Ne<="7"}function l(Ne){return Ne>="0"&&Ne<="9"}function o(Ne){return Ne.charCodeAt(0)===65279}const p={"'":"'",'"':'"',"\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","/":"/"},v=Object.hasOwn,x={};function B(Ne,Se){(typeof Ne!="string"||!(Ne instanceof String))&&(Ne=String(Ne));const Re=Se.mode==="json5",He=Se.ignoreBOM,_t=Se.ignoreComments||Se.mode==="cjson"||Re,Gt=Se.ignoreTrailingCommas||Re,yt=Se.ignoreProtoKey,Ft=Se.ignorePrototypeKeys,Tt=Se.allowSingleQuotedStrings||Re,Le=Se.allowDuplicateObjectKeys,Pe=Se.reviver,Be=Se.tokenize,it=Se.rawTokens,Ct=Se.tokenLocations,ft=Se.tokenPaths,Lt=Re?r.isLineTerminator:r.isLineTerminatorJSON,Zt=Re?r.isWhiteSpace:r.isWhiteSpaceJSON,Rt=Ne.length;let _n=0,qn=0,rn=0;const ar=[];let kn,mn,zn;if(Be){let qe=null,Je,ut;kn=function(){if(qe!==null)throw Error("internal error, token overlap");Je=_n+1,ut=rn-qn+1,qe=rn},mn=function(dt,Qt){if(qe!==rn){const Wt={type:dt};it&&(Wt.raw=Ne.substr(qe,rn-qe)),Qt!==void 0&&(Wt.value=Qt),Ct&&(Wt.location={start:{column:ut,line:Je,offset:qe}}),ft&&(Wt.path=zn.slice()),ar.push(Wt)}return qe=null,Qt},ft&&(zn=[])}function br(){let qe;return rn<Rt?qe=`Unexpected token ${JSON.stringify(Ne[rn])}`:qe="Unexpected end of input",qe}function gr(qe){const Je=rn-qn+1;++_n;const ut=Ee(qe,Ne,rn,_n,Je),dt=SyntaxError(ut.message);return dt.reason=qe,dt.excerpt=ut.excerpt,dt.pointer=ut.pointer,dt.location={start:{column:Je,line:_n,offset:rn}},dt}function tr(qe){throw qe||(qe=br()),gr(qe)}function Ge(qe){qe==="\r"&&Ne[rn]===`
`&&++rn,qn=rn,++_n}function ce(){if(rn<Rt){kn==null||kn();const qe=Ne[rn++];if(qe==='"'||qe==="'"&&Tt){const Je=f(qe);return mn==null||mn("literal",Je),Je}if(qe==="{")return mn==null||mn("symbol","{"),nr();if(qe==="[")return mn==null||mn("symbol","["),$e();if(qe==="-"||qe==="."||l(qe)||Re&&(qe==="+"||qe==="I"||qe==="N")){const Je=ae();return mn==null||mn("literal",Je),Je}if(qe==="n")return sn("null"),mn==null||mn("literal",null),null;if(qe==="t")return sn("true"),mn==null||mn("literal",!0),!0;if(qe==="f")return sn("false"),mn==null||mn("literal",!1),!1;--rn,mn==null||mn();return}}function pe(){let qe;if(rn<Rt){kn==null||kn();const Je=Ne[rn++];if(Je==='"'||Je==="'"&&Tt){const ut=f(Je);return mn==null||mn("literal",ut),ut}if(Je==="{")return mn==null||mn("symbol","{"),nr();if(Je==="[")return mn==null||mn("symbol","["),$e();if(Je==="."||l(Je)){const ut=ae();return mn==null||mn("literal",ut),ut}if(Re&&r.isIdentifierStart(Je)||Je==="\\"&&Ne[rn]==="u"){const ut=rn-1;if(qe=Ce(),qe===void 0){rn=ut,mn==null||mn();return}return mn==null||mn("literal",qe),qe}--rn,mn==null||mn();return}}function rt(){o(Ne)&&(kn==null||kn(),++rn,mn==null||mn("bom"))}function St(){let qe;function Je(){qe||(qe=!0,--rn,kn(),++rn)}function ut(){qe&&(qe=!1,mn("whitespace"))}for(;rn<Rt;){const dt=Ne[rn++];if(Lt(dt))kn&&Je(),Ge(dt);else if(Zt(dt))kn&&Je();else if(dt==="/"&&_t&&(Ne[rn]==="/"||Ne[rn]==="*"))kn&&(--rn,ut(),kn(),++rn),Ht(Ne[rn++]==="*"),mn==null||mn("comment");else{--rn;break}}mn&&ut()}function Ht(qe){for(;rn<Rt;){const Je=Ne[rn++];if(Lt(Je)){if(!qe){--rn;return}Ge(Je)}else if(Je==="*"&&qe&&Ne[rn]==="/"){++rn;return}}qe&&tr("Unclosed multiline comment")}function sn(qe){const Je=rn;for(let ut=1,dt=qe.length;ut<dt;++ut)(rn>=Rt||qe[ut]!==Ne[rn])&&(rn=Je-1,tr()),++rn}function nr(){let qe={},Je=!1;for(;rn<Rt;){St();const ut=pe();Le===!1&&v(qe,ut)&&tr(`Duplicate key: "${ut}"`),St(),kn==null||kn();let dt=Ne[rn++];if(mn==null||mn("symbol",dt),dt==="}"&&ut===void 0)return!Gt&&Je&&(--rn,tr("Trailing comma in object")),qe;if(dt===":"&&ut!==void 0){St(),zn==null||zn.push(ut);let Qt=ce();if(zn==null||zn.pop(),Qt===void 0&&tr(`No value found for key "${ut}"`),typeof ut!="string"&&(!Re||typeof ut!="number")&&tr(`Wrong key type: "${ut}"`),Ft&&(ut in x||x[ut]!=null)||yt&&ut==="__proto__"||(Pe&&(Qt=Pe(ut,Qt)),Qt!==void 0&&(Je=!0,ut==="__proto__"?qe=Object.assign(JSON.parse(`{"__proto__":${JSON.stringify(Qt)}}`),qe):qe[ut]=Qt)),St(),kn==null||kn(),dt=Ne[rn++],mn==null||mn("symbol",dt),dt!==","){if(dt==="}")return qe;tr()}}else--rn,tr()}tr()}function $e(){const qe=[];for(;rn<Rt;){St(),zn==null||zn.push(qe.length);let Je=ce();zn==null||zn.pop(),St(),kn==null||kn();const ut=Ne[rn++];if(mn==null||mn("symbol",ut),Je!==void 0&&(Pe&&(Je=Pe(String(qe.length),Je)),Je===void 0?(++qe.length,Je=!0):qe.push(Je)),ut===",")Je===void 0&&tr("Elisions are not supported");else{if(ut==="]")return!Gt&&Je===void 0&&qe.length&&(--rn,tr("Trailing comma in array")),qe;--rn,tr()}}}function ae(){--rn;let qe=rn,Je=Ne[rn++];const ut=function(dt){const Qt=Ne.substr(qe,rn-qe);let Wt;if(dt?Wt=Number.parseInt(Qt.replace(/^0o?/,""),8):Wt=Number(Qt),Number.isNaN(Wt))--rn,tr(`Bad numeric literal - "${Ne.substr(qe,rn-qe+1)}"`);else if(!Re&&!Qt.match(/^-?(0|[1-9][0-9]*)(\.[0-9]+)?(e[+-]?[0-9]+)?$/i))--rn,tr(`Non-json numeric literal - "${Ne.substr(qe,rn-qe+1)}"`);else return Wt};if((Je==="-"||Je==="+"&&Re)&&(Je=Ne[rn++]),Je==="N"&&Re)return sn("NaN"),Number.NaN;if(Je==="I"&&Re)return sn("Infinity"),ut();if(Je>="1"&&Je<="9"){for(;rn<Rt&&l(Ne[rn]);)++rn;Je=Ne[rn++]}if(Je==="0"){Je=Ne[rn++];const dt=Je==="o"||Je==="O"||s(Je),Qt=Je==="x"||Je==="X";if(Re&&(dt||Qt)){for(;rn<Rt&&(Qt?i:s)(Ne[rn]);)++rn;let Wt=1;return Ne[qe]==="-"?(Wt=-1,++qe):Ne[qe]==="+"&&++qe,Wt*ut(dt)}}if(Je==="."){for(;rn<Rt&&l(Ne[rn]);)++rn;Je=Ne[rn++]}if(Je==="e"||Je==="E"){for(Je=Ne[rn++],(Je==="-"||Je==="+")&&++rn;rn<Rt&&l(Ne[rn]);)++rn;Je=Ne[rn++]}return--rn,ut()}function Ce(){--rn;let qe="";for(;rn<Rt;){let Je=Ne[rn++];if(Je==="\\"&&Ne[rn]==="u"&&i(Ne[rn+1])&&i(Ne[rn+2])&&i(Ne[rn+3])&&i(Ne[rn+4])&&(Je=String.fromCharCode(Number.parseInt(Ne.substr(rn+1,4),16)),rn+=5),qe.length)if(r.isIdentifierPart(Je))qe+=Je;else return--rn,qe;else if(r.isIdentifierStart(Je))qe+=Je;else return}tr()}function f(qe){let Je="";for(;rn<Rt;){let ut=Ne[rn++];if(ut===qe)return Je;if(ut==="\\")if(rn>=Rt&&tr(),ut=Ne[rn++],p[ut]&&(Re||ut!=="v"&&(ut!=="'"||Tt)))Je+=p[ut];else if(Re&&Lt(ut))Ge(ut);else if(ut==="u"||ut==="x"&&Re){const dt=ut==="u"?4:2;for(let Qt=0;Qt<dt;++Qt)rn>=Rt&&tr(),i(Ne[rn])||tr("Bad escape sequence"),rn++;Je+=String.fromCharCode(Number.parseInt(Ne.substr(rn-dt,dt),16))}else if(Re&&s(ut)){let dt;ut<"4"&&s(Ne[rn])&&s(Ne[rn+1])?dt=3:s(Ne[rn])?dt=2:dt=1,rn+=dt-1,Je+=String.fromCharCode(Number.parseInt(Ne.substr(rn-dt,dt),8))}else Re?Je+=ut:(--rn,tr());else Lt(ut)?tr():(!Re&&ut.charCodeAt(0)<32&&(--rn,tr("Unexpected control character")),Je+=ut)}tr()}He&&rt(),St();let je=ce();if(je!==void 0||rn<Rt){if(St(),rn>=Rt)return Pe&&(je=Pe("",je)),Be?ar:je;tr()}else tr(rn?"No data, only a whitespace":"No data, empty input")}function T(Ne,Se){return typeof Se=="function"?Se={reviver:Se}:Se||(Se={}),B(Ne,Se)}function P(Ne,Se){Se||(Se={});const Re=Se.tokenize;Se.tokenize=!0;const He=B(Ne,Se);return Se.tokenize=Re,He}function U(Ne){return Ne.toString().replace(/~/g,"~0").replace(/\//g,"~1")}function j(Ne){return Ne.length===0?"":`/${Ne.map(U).join("/")}`}function N(Ne){return Ne.replace(/~1/g,"/").replace(/~0/g,"~")}function q(Ne){if(Ne==="")return[];if(Ne[0]!=="/")throw new Error('Missing initial "/" in the reference');return Ne.substr(1).split("/").map(N)}function H(Ne,Se){const Re=Ne.substr(0,Se).split(/\r?\n/),He=Re.length,_t=Re[He-1].length+1;return{line:He,column:_t}}function oe(Ne,Se,Re){if(Se>1){const He=/\r?\n/g;let _t;for(;_t=He.exec(Ne);)if(--Se===1)return _t.index+Re}return Re-1}function te(Ne,Se){const Re=Math.max(0,Se-20),He=Ne.substr(Re,Se-Re);return(Se>20?"...":"")+He.replace(/\r?\n/g,"")}function V(Ne,Se){let Re=Math.max(0,Se-20);Re+=Se-Re;const He=Ne.length-Re;return Ne.substr(Re,Math.min(20,He)).replace(/\r?\n/g,"")+(He>20?"...":"")}function ne(Ne,Se){const Re=te(Ne,Se),He=V(Ne,Se),_t=`${new Array(Re.length+1).join("-")}^`;return{excerpt:Re+He,pointer:_t}}function W(Ne){let Se=Ne.message.replace("JSON.parse: ","").replace("JSON Parse error: ","");const Re=Se.charAt(0);return Re>="a"&&(Se=Re.toUpperCase()+Se.substr(1)),Se}function ie(Ne,Se){const Re=/ in JSON at position (\d+)$/.exec(Se);if(Re){const He=+Re[1],_t=H(Ne,He);return{offset:He,line:_t.line,column:_t.column,reason:Se.substr(0,Re.index)}}}function he(Ne,Se){const Re=/ end of JSON input$/.exec(Se);if(Re){const He=Ne.length,_t=H(Ne,He);return{offset:He,line:_t.line,column:_t.column,reason:Se.substr(0,Re.index+4)}}}function fe(Ne,Se){const Re=/ at line (\d+) column (\d+) of the JSON data$/.exec(Se);if(Re){const He=+Re[1],_t=+Re[2];return{offset:oe(Ne,He,_t),line:He,column:_t,reason:Se.substr(0,Re.index)}}}function Ee(Ne,Se,Re,He,_t){const Gt=ne(Se,Re),yt=Gt.excerpt;let Ft,Tt;return typeof He=="number"?(Tt=Gt.pointer,Ft=`Parse error on line ${He}, column ${_t}:
${yt}
${Tt}
${Ne}`):Ft=`Parse error in JSON input:
${yt}
${Ne}`,{message:Ft,excerpt:yt,pointer:Tt}}function me(Ne,Se){let Re=W(Se);const He=ie(Ne,Re)||he(Ne,Re)||fe(Ne,Re);let _t,Gt,yt;He?(_t=He.offset,Gt=He.line,yt=He.column,Re=He.reason):_t=0,Se.reason=Re;const Ft=Ee(Re,Ne,_t,Gt,yt);return Se.message=Ft.message,Se.excerpt=Ft.excerpt,Ft.pointer&&(Se.pointer=Ft.pointer,Se.location={start:{column:yt,line:Gt,offset:_t}}),Se}function Me(Ne,Se){try{return JSON.parse(Ne,Se)}catch(Re){const He=me(Ne,Re);if(Re.location)throw He;return T(Ne,Se)}}const De=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),xe=typeof process<"u"&&process.version.startsWith("v4.");function At(Ne){return Ne.ignoreBOM||Ne.ignoreComments||Ne.ignoreTrailingCommas||Ne.allowSingleQuotedStrings||Ne.allowDuplicateObjectKeys===!1||Ne.ignoreProtoKey||Ne.ignorePrototypeKeys||Ne.mode==="cjson"||Ne.mode==="json5"||De||xe}function Ze(Ne){if(typeof Ne=="function")return Ne;if(Ne)return Ne.reviver}function Xe(Ne,Se){return Se||(Se={}),At(Se)?T(Ne,Se):Me(Ne,Ze(Se))}t.parse=Xe,t.tokenize=P,t.pathToPointer=j,t.pointerToPath=q,t.parseNative=Me,t.parseCustom=T,t.getErrorTexts=Ee,Object.defineProperty(t,"__esModule",{value:!0})})}(Fv,Fv.exports)),Fv.exports}var foe=hoe(),Ib={exports:{}},poe=Ib.exports,J9;function moe(){return J9||(J9=1,function(n,e){(function(t,r){n.exports=r()})(poe,function(){var t=typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function r(Pe,Be){return Be={exports:{}},Pe(Be,Be.exports),Be.exports}var i=r(function(Pe){function Be(){var it=0,Ct=1,ft=2,Lt=3,Zt=4,Rt=5,_n=6,qn=7,rn=8,ar=9,kn=10,mn=11,zn=12,br=13,gr=14,tr=15,Ge=16,ce=17,pe=0,rt=1,St=2,Ht=3,sn=4;function nr(f,je){return 55296<=f.charCodeAt(je)&&f.charCodeAt(je)<=56319&&56320<=f.charCodeAt(je+1)&&f.charCodeAt(je+1)<=57343}function $e(f,je){je===void 0&&(je=0);var qe=f.charCodeAt(je);if(55296<=qe&&qe<=56319&&je<f.length-1){var Je=qe,ut=f.charCodeAt(je+1);return 56320<=ut&&ut<=57343?(Je-55296)*1024+(ut-56320)+65536:Je}if(56320<=qe&&qe<=57343&&je>=1){var Je=f.charCodeAt(je-1),ut=qe;return 55296<=Je&&Je<=56319?(Je-55296)*1024+(ut-56320)+65536:ut}return qe}function ae(f,je,qe){var Je=[f].concat(je).concat([qe]),ut=Je[Je.length-2],dt=qe,Qt=Je.lastIndexOf(gr);if(Qt>1&&Je.slice(1,Qt).every(function(tn){return tn==Lt})&&[Lt,br,ce].indexOf(f)==-1)return St;var Wt=Je.lastIndexOf(Zt);if(Wt>0&&Je.slice(1,Wt).every(function(tn){return tn==Zt})&&[zn,Zt].indexOf(ut)==-1)return Je.filter(function(tn){return tn==Zt}).length%2==1?Ht:sn;if(ut==it&&dt==Ct)return pe;if(ut==ft||ut==it||ut==Ct)return dt==gr&&je.every(function(tn){return tn==Lt})?St:rt;if(dt==ft||dt==it||dt==Ct)return rt;if(ut==_n&&(dt==_n||dt==qn||dt==ar||dt==kn))return pe;if((ut==ar||ut==qn)&&(dt==qn||dt==rn))return pe;if((ut==kn||ut==rn)&&dt==rn)return pe;if(dt==Lt||dt==tr)return pe;if(dt==Rt)return pe;if(ut==zn)return pe;var jt=Je.indexOf(Lt)!=-1?Je.lastIndexOf(Lt)-1:Je.length-2;return[br,ce].indexOf(Je[jt])!=-1&&Je.slice(jt+1,-1).every(function(tn){return tn==Lt})&&dt==gr||ut==tr&&[Ge,ce].indexOf(dt)!=-1?pe:je.indexOf(Zt)!=-1?St:ut==Zt&&dt==Zt?pe:rt}this.nextBreak=function(f,je){if(je===void 0&&(je=0),je<0)return 0;if(je>=f.length-1)return f.length;for(var qe=Ce($e(f,je)),Je=[],ut=je+1;ut<f.length;ut++)if(!nr(f,ut-1)){var dt=Ce($e(f,ut));if(ae(qe,Je,dt))return ut;Je.push(dt)}return f.length},this.splitGraphemes=function(f){for(var je=[],qe=0,Je;(Je=this.nextBreak(f,qe))<f.length;)je.push(f.slice(qe,Je)),qe=Je;return qe<f.length&&je.push(f.slice(qe)),je},this.iterateGraphemes=function(f){var je=0,qe={next:(function(){var Je,ut;return(ut=this.nextBreak(f,je))<f.length?(Je=f.slice(je,ut),je=ut,{value:Je,done:!1}):je<f.length?(Je=f.slice(je),je=f.length,{value:Je,done:!1}):{value:void 0,done:!0}}).bind(this)};return typeof Symbol<"u"&&Symbol.iterator&&(qe[Symbol.iterator]=function(){return qe}),qe},this.countGraphemes=function(f){for(var je=0,qe=0,Je;(Je=this.nextBreak(f,qe))<f.length;)qe=Je,je++;return qe<f.length&&je++,je};function Ce(f){return 1536<=f&&f<=1541||f==1757||f==1807||f==2274||f==3406||f==69821||70082<=f&&f<=70083||f==72250||72326<=f&&f<=72329||f==73030?zn:f==13?it:f==10?Ct:0<=f&&f<=9||11<=f&&f<=12||14<=f&&f<=31||127<=f&&f<=159||f==173||f==1564||f==6158||f==8203||8206<=f&&f<=8207||f==8232||f==8233||8234<=f&&f<=8238||8288<=f&&f<=8292||f==8293||8294<=f&&f<=8303||55296<=f&&f<=57343||f==65279||65520<=f&&f<=65528||65529<=f&&f<=65531||113824<=f&&f<=113827||119155<=f&&f<=119162||f==917504||f==917505||917506<=f&&f<=917535||917632<=f&&f<=917759||918e3<=f&&f<=921599?ft:768<=f&&f<=879||1155<=f&&f<=1159||1160<=f&&f<=1161||1425<=f&&f<=1469||f==1471||1473<=f&&f<=1474||1476<=f&&f<=1477||f==1479||1552<=f&&f<=1562||1611<=f&&f<=1631||f==1648||1750<=f&&f<=1756||1759<=f&&f<=1764||1767<=f&&f<=1768||1770<=f&&f<=1773||f==1809||1840<=f&&f<=1866||1958<=f&&f<=1968||2027<=f&&f<=2035||2070<=f&&f<=2073||2075<=f&&f<=2083||2085<=f&&f<=2087||2089<=f&&f<=2093||2137<=f&&f<=2139||2260<=f&&f<=2273||2275<=f&&f<=2306||f==2362||f==2364||2369<=f&&f<=2376||f==2381||2385<=f&&f<=2391||2402<=f&&f<=2403||f==2433||f==2492||f==2494||2497<=f&&f<=2500||f==2509||f==2519||2530<=f&&f<=2531||2561<=f&&f<=2562||f==2620||2625<=f&&f<=2626||2631<=f&&f<=2632||2635<=f&&f<=2637||f==2641||2672<=f&&f<=2673||f==2677||2689<=f&&f<=2690||f==2748||2753<=f&&f<=2757||2759<=f&&f<=2760||f==2765||2786<=f&&f<=2787||2810<=f&&f<=2815||f==2817||f==2876||f==2878||f==2879||2881<=f&&f<=2884||f==2893||f==2902||f==2903||2914<=f&&f<=2915||f==2946||f==3006||f==3008||f==3021||f==3031||f==3072||3134<=f&&f<=3136||3142<=f&&f<=3144||3146<=f&&f<=3149||3157<=f&&f<=3158||3170<=f&&f<=3171||f==3201||f==3260||f==3263||f==3266||f==3270||3276<=f&&f<=3277||3285<=f&&f<=3286||3298<=f&&f<=3299||3328<=f&&f<=3329||3387<=f&&f<=3388||f==3390||3393<=f&&f<=3396||f==3405||f==3415||3426<=f&&f<=3427||f==3530||f==3535||3538<=f&&f<=3540||f==3542||f==3551||f==3633||3636<=f&&f<=3642||3655<=f&&f<=3662||f==3761||3764<=f&&f<=3769||3771<=f&&f<=3772||3784<=f&&f<=3789||3864<=f&&f<=3865||f==3893||f==3895||f==3897||3953<=f&&f<=3966||3968<=f&&f<=3972||3974<=f&&f<=3975||3981<=f&&f<=3991||3993<=f&&f<=4028||f==4038||4141<=f&&f<=4144||4146<=f&&f<=4151||4153<=f&&f<=4154||4157<=f&&f<=4158||4184<=f&&f<=4185||4190<=f&&f<=4192||4209<=f&&f<=4212||f==4226||4229<=f&&f<=4230||f==4237||f==4253||4957<=f&&f<=4959||5906<=f&&f<=5908||5938<=f&&f<=5940||5970<=f&&f<=5971||6002<=f&&f<=6003||6068<=f&&f<=6069||6071<=f&&f<=6077||f==6086||6089<=f&&f<=6099||f==6109||6155<=f&&f<=6157||6277<=f&&f<=6278||f==6313||6432<=f&&f<=6434||6439<=f&&f<=6440||f==6450||6457<=f&&f<=6459||6679<=f&&f<=6680||f==6683||f==6742||6744<=f&&f<=6750||f==6752||f==6754||6757<=f&&f<=6764||6771<=f&&f<=6780||f==6783||6832<=f&&f<=6845||f==6846||6912<=f&&f<=6915||f==6964||6966<=f&&f<=6970||f==6972||f==6978||7019<=f&&f<=7027||7040<=f&&f<=7041||7074<=f&&f<=7077||7080<=f&&f<=7081||7083<=f&&f<=7085||f==7142||7144<=f&&f<=7145||f==7149||7151<=f&&f<=7153||7212<=f&&f<=7219||7222<=f&&f<=7223||7376<=f&&f<=7378||7380<=f&&f<=7392||7394<=f&&f<=7400||f==7405||f==7412||7416<=f&&f<=7417||7616<=f&&f<=7673||7675<=f&&f<=7679||f==8204||8400<=f&&f<=8412||8413<=f&&f<=8416||f==8417||8418<=f&&f<=8420||8421<=f&&f<=8432||11503<=f&&f<=11505||f==11647||11744<=f&&f<=11775||12330<=f&&f<=12333||12334<=f&&f<=12335||12441<=f&&f<=12442||f==42607||42608<=f&&f<=42610||42612<=f&&f<=42621||42654<=f&&f<=42655||42736<=f&&f<=42737||f==43010||f==43014||f==43019||43045<=f&&f<=43046||43204<=f&&f<=43205||43232<=f&&f<=43249||43302<=f&&f<=43309||43335<=f&&f<=43345||43392<=f&&f<=43394||f==43443||43446<=f&&f<=43449||f==43452||f==43493||43561<=f&&f<=43566||43569<=f&&f<=43570||43573<=f&&f<=43574||f==43587||f==43596||f==43644||f==43696||43698<=f&&f<=43700||43703<=f&&f<=43704||43710<=f&&f<=43711||f==43713||43756<=f&&f<=43757||f==43766||f==44005||f==44008||f==44013||f==64286||65024<=f&&f<=65039||65056<=f&&f<=65071||65438<=f&&f<=65439||f==66045||f==66272||66422<=f&&f<=66426||68097<=f&&f<=68099||68101<=f&&f<=68102||68108<=f&&f<=68111||68152<=f&&f<=68154||f==68159||68325<=f&&f<=68326||f==69633||69688<=f&&f<=69702||69759<=f&&f<=69761||69811<=f&&f<=69814||69817<=f&&f<=69818||69888<=f&&f<=69890||69927<=f&&f<=69931||69933<=f&&f<=69940||f==70003||70016<=f&&f<=70017||70070<=f&&f<=70078||70090<=f&&f<=70092||70191<=f&&f<=70193||f==70196||70198<=f&&f<=70199||f==70206||f==70367||70371<=f&&f<=70378||70400<=f&&f<=70401||f==70460||f==70462||f==70464||f==70487||70502<=f&&f<=70508||70512<=f&&f<=70516||70712<=f&&f<=70719||70722<=f&&f<=70724||f==70726||f==70832||70835<=f&&f<=70840||f==70842||f==70845||70847<=f&&f<=70848||70850<=f&&f<=70851||f==71087||71090<=f&&f<=71093||71100<=f&&f<=71101||71103<=f&&f<=71104||71132<=f&&f<=71133||71219<=f&&f<=71226||f==71229||71231<=f&&f<=71232||f==71339||f==71341||71344<=f&&f<=71349||f==71351||71453<=f&&f<=71455||71458<=f&&f<=71461||71463<=f&&f<=71467||72193<=f&&f<=72198||72201<=f&&f<=72202||72243<=f&&f<=72248||72251<=f&&f<=72254||f==72263||72273<=f&&f<=72278||72281<=f&&f<=72283||72330<=f&&f<=72342||72344<=f&&f<=72345||72752<=f&&f<=72758||72760<=f&&f<=72765||f==72767||72850<=f&&f<=72871||72874<=f&&f<=72880||72882<=f&&f<=72883||72885<=f&&f<=72886||73009<=f&&f<=73014||f==73018||73020<=f&&f<=73021||73023<=f&&f<=73029||f==73031||92912<=f&&f<=92916||92976<=f&&f<=92982||94095<=f&&f<=94098||113821<=f&&f<=113822||f==119141||119143<=f&&f<=119145||119150<=f&&f<=119154||119163<=f&&f<=119170||119173<=f&&f<=119179||119210<=f&&f<=119213||119362<=f&&f<=119364||121344<=f&&f<=121398||121403<=f&&f<=121452||f==121461||f==121476||121499<=f&&f<=121503||121505<=f&&f<=121519||122880<=f&&f<=122886||122888<=f&&f<=122904||122907<=f&&f<=122913||122915<=f&&f<=122916||122918<=f&&f<=122922||125136<=f&&f<=125142||125252<=f&&f<=125258||917536<=f&&f<=917631||917760<=f&&f<=917999?Lt:127462<=f&&f<=127487?Zt:f==2307||f==2363||2366<=f&&f<=2368||2377<=f&&f<=2380||2382<=f&&f<=2383||2434<=f&&f<=2435||2495<=f&&f<=2496||2503<=f&&f<=2504||2507<=f&&f<=2508||f==2563||2622<=f&&f<=2624||f==2691||2750<=f&&f<=2752||f==2761||2763<=f&&f<=2764||2818<=f&&f<=2819||f==2880||2887<=f&&f<=2888||2891<=f&&f<=2892||f==3007||3009<=f&&f<=3010||3014<=f&&f<=3016||3018<=f&&f<=3020||3073<=f&&f<=3075||3137<=f&&f<=3140||3202<=f&&f<=3203||f==3262||3264<=f&&f<=3265||3267<=f&&f<=3268||3271<=f&&f<=3272||3274<=f&&f<=3275||3330<=f&&f<=3331||3391<=f&&f<=3392||3398<=f&&f<=3400||3402<=f&&f<=3404||3458<=f&&f<=3459||3536<=f&&f<=3537||3544<=f&&f<=3550||3570<=f&&f<=3571||f==3635||f==3763||3902<=f&&f<=3903||f==3967||f==4145||4155<=f&&f<=4156||4182<=f&&f<=4183||f==4228||f==6070||6078<=f&&f<=6085||6087<=f&&f<=6088||6435<=f&&f<=6438||6441<=f&&f<=6443||6448<=f&&f<=6449||6451<=f&&f<=6456||6681<=f&&f<=6682||f==6741||f==6743||6765<=f&&f<=6770||f==6916||f==6965||f==6971||6973<=f&&f<=6977||6979<=f&&f<=6980||f==7042||f==7073||7078<=f&&f<=7079||f==7082||f==7143||7146<=f&&f<=7148||f==7150||7154<=f&&f<=7155||7204<=f&&f<=7211||7220<=f&&f<=7221||f==7393||7410<=f&&f<=7411||f==7415||43043<=f&&f<=43044||f==43047||43136<=f&&f<=43137||43188<=f&&f<=43203||43346<=f&&f<=43347||f==43395||43444<=f&&f<=43445||43450<=f&&f<=43451||43453<=f&&f<=43456||43567<=f&&f<=43568||43571<=f&&f<=43572||f==43597||f==43755||43758<=f&&f<=43759||f==43765||44003<=f&&f<=44004||44006<=f&&f<=44007||44009<=f&&f<=44010||f==44012||f==69632||f==69634||f==69762||69808<=f&&f<=69810||69815<=f&&f<=69816||f==69932||f==70018||70067<=f&&f<=70069||70079<=f&&f<=70080||70188<=f&&f<=70190||70194<=f&&f<=70195||f==70197||70368<=f&&f<=70370||70402<=f&&f<=70403||f==70463||70465<=f&&f<=70468||70471<=f&&f<=70472||70475<=f&&f<=70477||70498<=f&&f<=70499||70709<=f&&f<=70711||70720<=f&&f<=70721||f==70725||70833<=f&&f<=70834||f==70841||70843<=f&&f<=70844||f==70846||f==70849||71088<=f&&f<=71089||71096<=f&&f<=71099||f==71102||71216<=f&&f<=71218||71227<=f&&f<=71228||f==71230||f==71340||71342<=f&&f<=71343||f==71350||71456<=f&&f<=71457||f==71462||72199<=f&&f<=72200||f==72249||72279<=f&&f<=72280||f==72343||f==72751||f==72766||f==72873||f==72881||f==72884||94033<=f&&f<=94078||f==119142||f==119149?Rt:4352<=f&&f<=4447||43360<=f&&f<=43388?_n:4448<=f&&f<=4519||55216<=f&&f<=55238?qn:4520<=f&&f<=4607||55243<=f&&f<=55291?rn:f==44032||f==44060||f==44088||f==44116||f==44144||f==44172||f==44200||f==44228||f==44256||f==44284||f==44312||f==44340||f==44368||f==44396||f==44424||f==44452||f==44480||f==44508||f==44536||f==44564||f==44592||f==44620||f==44648||f==44676||f==44704||f==44732||f==44760||f==44788||f==44816||f==44844||f==44872||f==44900||f==44928||f==44956||f==44984||f==45012||f==45040||f==45068||f==45096||f==45124||f==45152||f==45180||f==45208||f==45236||f==45264||f==45292||f==45320||f==45348||f==45376||f==45404||f==45432||f==45460||f==45488||f==45516||f==45544||f==45572||f==45600||f==45628||f==45656||f==45684||f==45712||f==45740||f==45768||f==45796||f==45824||f==45852||f==45880||f==45908||f==45936||f==45964||f==45992||f==46020||f==46048||f==46076||f==46104||f==46132||f==46160||f==46188||f==46216||f==46244||f==46272||f==46300||f==46328||f==46356||f==46384||f==46412||f==46440||f==46468||f==46496||f==46524||f==46552||f==46580||f==46608||f==46636||f==46664||f==46692||f==46720||f==46748||f==46776||f==46804||f==46832||f==46860||f==46888||f==46916||f==46944||f==46972||f==47e3||f==47028||f==47056||f==47084||f==47112||f==47140||f==47168||f==47196||f==47224||f==47252||f==47280||f==47308||f==47336||f==47364||f==47392||f==47420||f==47448||f==47476||f==47504||f==47532||f==47560||f==47588||f==47616||f==47644||f==47672||f==47700||f==47728||f==47756||f==47784||f==47812||f==47840||f==47868||f==47896||f==47924||f==47952||f==47980||f==48008||f==48036||f==48064||f==48092||f==48120||f==48148||f==48176||f==48204||f==48232||f==48260||f==48288||f==48316||f==48344||f==48372||f==48400||f==48428||f==48456||f==48484||f==48512||f==48540||f==48568||f==48596||f==48624||f==48652||f==48680||f==48708||f==48736||f==48764||f==48792||f==48820||f==48848||f==48876||f==48904||f==48932||f==48960||f==48988||f==49016||f==49044||f==49072||f==49100||f==49128||f==49156||f==49184||f==49212||f==49240||f==49268||f==49296||f==49324||f==49352||f==49380||f==49408||f==49436||f==49464||f==49492||f==49520||f==49548||f==49576||f==49604||f==49632||f==49660||f==49688||f==49716||f==49744||f==49772||f==49800||f==49828||f==49856||f==49884||f==49912||f==49940||f==49968||f==49996||f==50024||f==50052||f==50080||f==50108||f==50136||f==50164||f==50192||f==50220||f==50248||f==50276||f==50304||f==50332||f==50360||f==50388||f==50416||f==50444||f==50472||f==50500||f==50528||f==50556||f==50584||f==50612||f==50640||f==50668||f==50696||f==50724||f==50752||f==50780||f==50808||f==50836||f==50864||f==50892||f==50920||f==50948||f==50976||f==51004||f==51032||f==51060||f==51088||f==51116||f==51144||f==51172||f==51200||f==51228||f==51256||f==51284||f==51312||f==51340||f==51368||f==51396||f==51424||f==51452||f==51480||f==51508||f==51536||f==51564||f==51592||f==51620||f==51648||f==51676||f==51704||f==51732||f==51760||f==51788||f==51816||f==51844||f==51872||f==51900||f==51928||f==51956||f==51984||f==52012||f==52040||f==52068||f==52096||f==52124||f==52152||f==52180||f==52208||f==52236||f==52264||f==52292||f==52320||f==52348||f==52376||f==52404||f==52432||f==52460||f==52488||f==52516||f==52544||f==52572||f==52600||f==52628||f==52656||f==52684||f==52712||f==52740||f==52768||f==52796||f==52824||f==52852||f==52880||f==52908||f==52936||f==52964||f==52992||f==53020||f==53048||f==53076||f==53104||f==53132||f==53160||f==53188||f==53216||f==53244||f==53272||f==53300||f==53328||f==53356||f==53384||f==53412||f==53440||f==53468||f==53496||f==53524||f==53552||f==53580||f==53608||f==53636||f==53664||f==53692||f==53720||f==53748||f==53776||f==53804||f==53832||f==53860||f==53888||f==53916||f==53944||f==53972||f==54e3||f==54028||f==54056||f==54084||f==54112||f==54140||f==54168||f==54196||f==54224||f==54252||f==54280||f==54308||f==54336||f==54364||f==54392||f==54420||f==54448||f==54476||f==54504||f==54532||f==54560||f==54588||f==54616||f==54644||f==54672||f==54700||f==54728||f==54756||f==54784||f==54812||f==54840||f==54868||f==54896||f==54924||f==54952||f==54980||f==55008||f==55036||f==55064||f==55092||f==55120||f==55148||f==55176?ar:44033<=f&&f<=44059||44061<=f&&f<=44087||44089<=f&&f<=44115||44117<=f&&f<=44143||44145<=f&&f<=44171||44173<=f&&f<=44199||44201<=f&&f<=44227||44229<=f&&f<=44255||44257<=f&&f<=44283||44285<=f&&f<=44311||44313<=f&&f<=44339||44341<=f&&f<=44367||44369<=f&&f<=44395||44397<=f&&f<=44423||44425<=f&&f<=44451||44453<=f&&f<=44479||44481<=f&&f<=44507||44509<=f&&f<=44535||44537<=f&&f<=44563||44565<=f&&f<=44591||44593<=f&&f<=44619||44621<=f&&f<=44647||44649<=f&&f<=44675||44677<=f&&f<=44703||44705<=f&&f<=44731||44733<=f&&f<=44759||44761<=f&&f<=44787||44789<=f&&f<=44815||44817<=f&&f<=44843||44845<=f&&f<=44871||44873<=f&&f<=44899||44901<=f&&f<=44927||44929<=f&&f<=44955||44957<=f&&f<=44983||44985<=f&&f<=45011||45013<=f&&f<=45039||45041<=f&&f<=45067||45069<=f&&f<=45095||45097<=f&&f<=45123||45125<=f&&f<=45151||45153<=f&&f<=45179||45181<=f&&f<=45207||45209<=f&&f<=45235||45237<=f&&f<=45263||45265<=f&&f<=45291||45293<=f&&f<=45319||45321<=f&&f<=45347||45349<=f&&f<=45375||45377<=f&&f<=45403||45405<=f&&f<=45431||45433<=f&&f<=45459||45461<=f&&f<=45487||45489<=f&&f<=45515||45517<=f&&f<=45543||45545<=f&&f<=45571||45573<=f&&f<=45599||45601<=f&&f<=45627||45629<=f&&f<=45655||45657<=f&&f<=45683||45685<=f&&f<=45711||45713<=f&&f<=45739||45741<=f&&f<=45767||45769<=f&&f<=45795||45797<=f&&f<=45823||45825<=f&&f<=45851||45853<=f&&f<=45879||45881<=f&&f<=45907||45909<=f&&f<=45935||45937<=f&&f<=45963||45965<=f&&f<=45991||45993<=f&&f<=46019||46021<=f&&f<=46047||46049<=f&&f<=46075||46077<=f&&f<=46103||46105<=f&&f<=46131||46133<=f&&f<=46159||46161<=f&&f<=46187||46189<=f&&f<=46215||46217<=f&&f<=46243||46245<=f&&f<=46271||46273<=f&&f<=46299||46301<=f&&f<=46327||46329<=f&&f<=46355||46357<=f&&f<=46383||46385<=f&&f<=46411||46413<=f&&f<=46439||46441<=f&&f<=46467||46469<=f&&f<=46495||46497<=f&&f<=46523||46525<=f&&f<=46551||46553<=f&&f<=46579||46581<=f&&f<=46607||46609<=f&&f<=46635||46637<=f&&f<=46663||46665<=f&&f<=46691||46693<=f&&f<=46719||46721<=f&&f<=46747||46749<=f&&f<=46775||46777<=f&&f<=46803||46805<=f&&f<=46831||46833<=f&&f<=46859||46861<=f&&f<=46887||46889<=f&&f<=46915||46917<=f&&f<=46943||46945<=f&&f<=46971||46973<=f&&f<=46999||47001<=f&&f<=47027||47029<=f&&f<=47055||47057<=f&&f<=47083||47085<=f&&f<=47111||47113<=f&&f<=47139||47141<=f&&f<=47167||47169<=f&&f<=47195||47197<=f&&f<=47223||47225<=f&&f<=47251||47253<=f&&f<=47279||47281<=f&&f<=47307||47309<=f&&f<=47335||47337<=f&&f<=47363||47365<=f&&f<=47391||47393<=f&&f<=47419||47421<=f&&f<=47447||47449<=f&&f<=47475||47477<=f&&f<=47503||47505<=f&&f<=47531||47533<=f&&f<=47559||47561<=f&&f<=47587||47589<=f&&f<=47615||47617<=f&&f<=47643||47645<=f&&f<=47671||47673<=f&&f<=47699||47701<=f&&f<=47727||47729<=f&&f<=47755||47757<=f&&f<=47783||47785<=f&&f<=47811||47813<=f&&f<=47839||47841<=f&&f<=47867||47869<=f&&f<=47895||47897<=f&&f<=47923||47925<=f&&f<=47951||47953<=f&&f<=47979||47981<=f&&f<=48007||48009<=f&&f<=48035||48037<=f&&f<=48063||48065<=f&&f<=48091||48093<=f&&f<=48119||48121<=f&&f<=48147||48149<=f&&f<=48175||48177<=f&&f<=48203||48205<=f&&f<=48231||48233<=f&&f<=48259||48261<=f&&f<=48287||48289<=f&&f<=48315||48317<=f&&f<=48343||48345<=f&&f<=48371||48373<=f&&f<=48399||48401<=f&&f<=48427||48429<=f&&f<=48455||48457<=f&&f<=48483||48485<=f&&f<=48511||48513<=f&&f<=48539||48541<=f&&f<=48567||48569<=f&&f<=48595||48597<=f&&f<=48623||48625<=f&&f<=48651||48653<=f&&f<=48679||48681<=f&&f<=48707||48709<=f&&f<=48735||48737<=f&&f<=48763||48765<=f&&f<=48791||48793<=f&&f<=48819||48821<=f&&f<=48847||48849<=f&&f<=48875||48877<=f&&f<=48903||48905<=f&&f<=48931||48933<=f&&f<=48959||48961<=f&&f<=48987||48989<=f&&f<=49015||49017<=f&&f<=49043||49045<=f&&f<=49071||49073<=f&&f<=49099||49101<=f&&f<=49127||49129<=f&&f<=49155||49157<=f&&f<=49183||49185<=f&&f<=49211||49213<=f&&f<=49239||49241<=f&&f<=49267||49269<=f&&f<=49295||49297<=f&&f<=49323||49325<=f&&f<=49351||49353<=f&&f<=49379||49381<=f&&f<=49407||49409<=f&&f<=49435||49437<=f&&f<=49463||49465<=f&&f<=49491||49493<=f&&f<=49519||49521<=f&&f<=49547||49549<=f&&f<=49575||49577<=f&&f<=49603||49605<=f&&f<=49631||49633<=f&&f<=49659||49661<=f&&f<=49687||49689<=f&&f<=49715||49717<=f&&f<=49743||49745<=f&&f<=49771||49773<=f&&f<=49799||49801<=f&&f<=49827||49829<=f&&f<=49855||49857<=f&&f<=49883||49885<=f&&f<=49911||49913<=f&&f<=49939||49941<=f&&f<=49967||49969<=f&&f<=49995||49997<=f&&f<=50023||50025<=f&&f<=50051||50053<=f&&f<=50079||50081<=f&&f<=50107||50109<=f&&f<=50135||50137<=f&&f<=50163||50165<=f&&f<=50191||50193<=f&&f<=50219||50221<=f&&f<=50247||50249<=f&&f<=50275||50277<=f&&f<=50303||50305<=f&&f<=50331||50333<=f&&f<=50359||50361<=f&&f<=50387||50389<=f&&f<=50415||50417<=f&&f<=50443||50445<=f&&f<=50471||50473<=f&&f<=50499||50501<=f&&f<=50527||50529<=f&&f<=50555||50557<=f&&f<=50583||50585<=f&&f<=50611||50613<=f&&f<=50639||50641<=f&&f<=50667||50669<=f&&f<=50695||50697<=f&&f<=50723||50725<=f&&f<=50751||50753<=f&&f<=50779||50781<=f&&f<=50807||50809<=f&&f<=50835||50837<=f&&f<=50863||50865<=f&&f<=50891||50893<=f&&f<=50919||50921<=f&&f<=50947||50949<=f&&f<=50975||50977<=f&&f<=51003||51005<=f&&f<=51031||51033<=f&&f<=51059||51061<=f&&f<=51087||51089<=f&&f<=51115||51117<=f&&f<=51143||51145<=f&&f<=51171||51173<=f&&f<=51199||51201<=f&&f<=51227||51229<=f&&f<=51255||51257<=f&&f<=51283||51285<=f&&f<=51311||51313<=f&&f<=51339||51341<=f&&f<=51367||51369<=f&&f<=51395||51397<=f&&f<=51423||51425<=f&&f<=51451||51453<=f&&f<=51479||51481<=f&&f<=51507||51509<=f&&f<=51535||51537<=f&&f<=51563||51565<=f&&f<=51591||51593<=f&&f<=51619||51621<=f&&f<=51647||51649<=f&&f<=51675||51677<=f&&f<=51703||51705<=f&&f<=51731||51733<=f&&f<=51759||51761<=f&&f<=51787||51789<=f&&f<=51815||51817<=f&&f<=51843||51845<=f&&f<=51871||51873<=f&&f<=51899||51901<=f&&f<=51927||51929<=f&&f<=51955||51957<=f&&f<=51983||51985<=f&&f<=52011||52013<=f&&f<=52039||52041<=f&&f<=52067||52069<=f&&f<=52095||52097<=f&&f<=52123||52125<=f&&f<=52151||52153<=f&&f<=52179||52181<=f&&f<=52207||52209<=f&&f<=52235||52237<=f&&f<=52263||52265<=f&&f<=52291||52293<=f&&f<=52319||52321<=f&&f<=52347||52349<=f&&f<=52375||52377<=f&&f<=52403||52405<=f&&f<=52431||52433<=f&&f<=52459||52461<=f&&f<=52487||52489<=f&&f<=52515||52517<=f&&f<=52543||52545<=f&&f<=52571||52573<=f&&f<=52599||52601<=f&&f<=52627||52629<=f&&f<=52655||52657<=f&&f<=52683||52685<=f&&f<=52711||52713<=f&&f<=52739||52741<=f&&f<=52767||52769<=f&&f<=52795||52797<=f&&f<=52823||52825<=f&&f<=52851||52853<=f&&f<=52879||52881<=f&&f<=52907||52909<=f&&f<=52935||52937<=f&&f<=52963||52965<=f&&f<=52991||52993<=f&&f<=53019||53021<=f&&f<=53047||53049<=f&&f<=53075||53077<=f&&f<=53103||53105<=f&&f<=53131||53133<=f&&f<=53159||53161<=f&&f<=53187||53189<=f&&f<=53215||53217<=f&&f<=53243||53245<=f&&f<=53271||53273<=f&&f<=53299||53301<=f&&f<=53327||53329<=f&&f<=53355||53357<=f&&f<=53383||53385<=f&&f<=53411||53413<=f&&f<=53439||53441<=f&&f<=53467||53469<=f&&f<=53495||53497<=f&&f<=53523||53525<=f&&f<=53551||53553<=f&&f<=53579||53581<=f&&f<=53607||53609<=f&&f<=53635||53637<=f&&f<=53663||53665<=f&&f<=53691||53693<=f&&f<=53719||53721<=f&&f<=53747||53749<=f&&f<=53775||53777<=f&&f<=53803||53805<=f&&f<=53831||53833<=f&&f<=53859||53861<=f&&f<=53887||53889<=f&&f<=53915||53917<=f&&f<=53943||53945<=f&&f<=53971||53973<=f&&f<=53999||54001<=f&&f<=54027||54029<=f&&f<=54055||54057<=f&&f<=54083||54085<=f&&f<=54111||54113<=f&&f<=54139||54141<=f&&f<=54167||54169<=f&&f<=54195||54197<=f&&f<=54223||54225<=f&&f<=54251||54253<=f&&f<=54279||54281<=f&&f<=54307||54309<=f&&f<=54335||54337<=f&&f<=54363||54365<=f&&f<=54391||54393<=f&&f<=54419||54421<=f&&f<=54447||54449<=f&&f<=54475||54477<=f&&f<=54503||54505<=f&&f<=54531||54533<=f&&f<=54559||54561<=f&&f<=54587||54589<=f&&f<=54615||54617<=f&&f<=54643||54645<=f&&f<=54671||54673<=f&&f<=54699||54701<=f&&f<=54727||54729<=f&&f<=54755||54757<=f&&f<=54783||54785<=f&&f<=54811||54813<=f&&f<=54839||54841<=f&&f<=54867||54869<=f&&f<=54895||54897<=f&&f<=54923||54925<=f&&f<=54951||54953<=f&&f<=54979||54981<=f&&f<=55007||55009<=f&&f<=55035||55037<=f&&f<=55063||55065<=f&&f<=55091||55093<=f&&f<=55119||55121<=f&&f<=55147||55149<=f&&f<=55175||55177<=f&&f<=55203?kn:f==9757||f==9977||9994<=f&&f<=9997||f==127877||127938<=f&&f<=127940||f==127943||127946<=f&&f<=127948||128066<=f&&f<=128067||128070<=f&&f<=128080||f==128110||128112<=f&&f<=128120||f==128124||128129<=f&&f<=128131||128133<=f&&f<=128135||f==128170||128372<=f&&f<=128373||f==128378||f==128400||128405<=f&&f<=128406||128581<=f&&f<=128583||128587<=f&&f<=128591||f==128675||128692<=f&&f<=128694||f==128704||f==128716||129304<=f&&f<=129308||129310<=f&&f<=129311||f==129318||129328<=f&&f<=129337||129341<=f&&f<=129342||129489<=f&&f<=129501?br:127995<=f&&f<=127999?gr:f==8205?tr:f==9792||f==9794||9877<=f&&f<=9878||f==9992||f==10084||f==127752||f==127806||f==127859||f==127891||f==127908||f==127912||f==127979||f==127981||f==128139||128187<=f&&f<=128188||f==128295||f==128300||f==128488||f==128640||f==128658?Ge:128102<=f&&f<=128105?ce:mn}return this}Pe.exports&&(Pe.exports=Be)}),s=new i,l=function(Be,it,Ct){for(var ft=s.iterateGraphemes(Be.substring(it)),Lt="",Zt=0;Zt<Ct-it;Zt++){var Rt=ft.next();if(Lt+=Rt.value,Rt.done)break}return Lt},o=function(Pe,Be,it,Ct,ft,Lt,Zt){return{start:{line:Pe,column:Be,offset:it},end:{line:Ct,column:ft,offset:Lt},source:Zt||null}},p=r(function(Pe,Be){(function(it,Ct){Pe.exports=Ct()})(t,function(){var it="",Ct,ft=Lt;function Lt(kn,mn){if(typeof kn!="string")throw new TypeError("expected a string");if(mn===1)return kn;if(mn===2)return kn+kn;var zn=kn.length*mn;if(Ct!==kn||typeof Ct>"u")Ct=kn,it="";else if(it.length>=zn)return it.substr(0,zn);for(;zn>it.length&&mn>1;)mn&1&&(it+=kn),mn>>=1,kn+=kn;return it+=kn,it=it.substr(0,zn),it}var Zt=function(mn,zn,br){if(mn==null||zn==null)return mn;var gr=String(mn),tr=typeof zn=="number"?zn:parseInt(zn,10);if(isNaN(tr)||!isFinite(tr))return gr;var Ge=gr.length;if(Ge>=tr)return gr;var ce=String(br);ce===""&&(ce=" ");for(var pe=tr-Ge;ce.length<pe;)ce+=ce;var rt=ce.length>pe?ce.substr(0,pe):ce;return rt+gr},Rt=Object.assign||function(kn){for(var mn=1;mn<arguments.length;mn++){var zn=arguments[mn];for(var br in zn)Object.prototype.hasOwnProperty.call(zn,br)&&(kn[br]=zn[br])}return kn};function _n(kn,mn,zn,br){var gr=String(mn),tr=Zt(gr,zn," "),Ge=ft(" ",br.tabSize);return tr+" | "+kn.replace(/\t/g,Ge)}function qn(kn,mn,zn,br,gr){return kn.slice(mn,zn).map(function(tr,Ge){return _n(tr,mn+Ge+1,br,gr)}).join(`
`)}var rn={extraLines:2,tabSize:4},ar=function(mn,zn,br,gr){gr=Rt({},rn,gr);var tr=mn.split(/\r\n?|\n|\f/),Ge=Math.max(1,zn-gr.extraLines)-1,ce=Math.min(zn+gr.extraLines,tr.length),pe=String(ce).length,rt=qn(tr,Ge,zn,pe,gr),St=_n(tr[zn-1].substring(0,br-1),zn,pe,gr),Ht=ft(" ",St.length)+"^",sn=qn(tr,zn,ce,pe,gr);return[rt,Ht,sn].filter(Boolean).join(`
`)};return ar})}),v=new Error().stack,x=function(Pe){var Be=Object.create(SyntaxError.prototype);return Object.assign(Be,Pe,{name:"SyntaxError"}),Object.defineProperty(Be,"stack",{get:function(){return v?v.replace(/^(.+\n){1,3}/,String(Be)+`
`):""}}),Be},B=function(Pe,Be,it,Ct,ft){throw x({message:Ct?Pe+`
`+p(Be,Ct,ft):Pe,rawMessage:Pe,source:it,line:Ct,column:ft})},T={unexpectedEnd:function(){return"Unexpected end of input"},unexpectedToken:function(Be){for(var it=arguments.length,Ct=Array(it>1?it-1:0),ft=1;ft<it;ft++)Ct[ft-1]=arguments[ft];return"Unexpected token <"+Be+"> at "+Ct.filter(Boolean).join(":")}},P={unexpectedSymbol:function(Be){for(var it=arguments.length,Ct=Array(it>1?it-1:0),ft=1;ft<it;ft++)Ct[ft-1]=arguments[ft];return"Unexpected symbol <"+Be+"> at "+Ct.filter(Boolean).join(":")}},U={LEFT_BRACE:0,RIGHT_BRACE:1,LEFT_BRACKET:2,RIGHT_BRACKET:3,COLON:4,COMMA:5,STRING:6,NUMBER:7,TRUE:8,FALSE:9,NULL:10},j={"{":U.LEFT_BRACE,"}":U.RIGHT_BRACE,"[":U.LEFT_BRACKET,"]":U.RIGHT_BRACKET,":":U.COLON,",":U.COMMA},N={true:U.TRUE,false:U.FALSE,null:U.NULL},q={_START_:0,START_QUOTE_OR_CHAR:1,ESCAPE:2},H={'"':0,"\\":1,"/":2,b:3,f:4,n:5,r:6,t:7,u:8},oe={_START_:0,MINUS:1,ZERO:2,DIGIT:3,POINT:4,DIGIT_FRACTION:5,EXP:6,EXP_DIGIT_OR_SIGN:7};function te(Pe){return Pe>="1"&&Pe<="9"}function V(Pe){return Pe>="0"&&Pe<="9"}function ne(Pe){return V(Pe)||Pe>="a"&&Pe<="f"||Pe>="A"&&Pe<="F"}function W(Pe){return Pe==="e"||Pe==="E"}function ie(Pe,Be,it,Ct){var ft=Pe.charAt(Be);if(ft==="\r")Be++,it++,Ct=1,Pe.charAt(Be)===`
`&&Be++;else if(ft===`
`)Be++,it++,Ct=1;else if(ft==="	"||ft===" ")Be++,Ct++;else return null;return{index:Be,line:it,column:Ct}}function he(Pe,Be,it,Ct){var ft=Pe.charAt(Be);return ft in j?{type:j[ft],line:it,column:Ct+1,index:Be+1,value:null}:null}function fe(Pe,Be,it,Ct){for(var ft in N)if(N.hasOwnProperty(ft)&&Pe.substr(Be,ft.length)===ft)return{type:N[ft],line:it,column:Ct+ft.length,index:Be+ft.length,value:ft};return null}function Ee(Pe,Be,it,Ct){for(var ft=Be,Lt=q._START_;Be<Pe.length;){var Zt=Pe.charAt(Be);switch(Lt){case q._START_:{if(Zt==='"')Be++,Lt=q.START_QUOTE_OR_CHAR;else return null;break}case q.START_QUOTE_OR_CHAR:{if(Zt==="\\")Be++,Lt=q.ESCAPE;else{if(Zt==='"')return Be++,{type:U.STRING,line:it,column:Ct+Be-ft,index:Be,value:Pe.slice(ft,Be)};Be++}break}case q.ESCAPE:{if(Zt in H){if(Be++,Zt==="u")for(var Rt=0;Rt<4;Rt++){var _n=Pe.charAt(Be);if(_n&&ne(_n))Be++;else return null}Lt=q.START_QUOTE_OR_CHAR}else return null;break}}}}function me(Pe,Be,it,Ct){var ft=Be,Lt=Be,Zt=oe._START_;e:for(;Be<Pe.length;){var Rt=Pe.charAt(Be);switch(Zt){case oe._START_:{if(Rt==="-")Zt=oe.MINUS;else if(Rt==="0")Lt=Be+1,Zt=oe.ZERO;else if(te(Rt))Lt=Be+1,Zt=oe.DIGIT;else return null;break}case oe.MINUS:{if(Rt==="0")Lt=Be+1,Zt=oe.ZERO;else if(te(Rt))Lt=Be+1,Zt=oe.DIGIT;else return null;break}case oe.ZERO:{if(Rt===".")Zt=oe.POINT;else if(W(Rt))Zt=oe.EXP;else break e;break}case oe.DIGIT:{if(V(Rt))Lt=Be+1;else if(Rt===".")Zt=oe.POINT;else if(W(Rt))Zt=oe.EXP;else break e;break}case oe.POINT:{if(V(Rt))Lt=Be+1,Zt=oe.DIGIT_FRACTION;else break e;break}case oe.DIGIT_FRACTION:{if(V(Rt))Lt=Be+1;else if(W(Rt))Zt=oe.EXP;else break e;break}case oe.EXP:{if(Rt==="+"||Rt==="-")Zt=oe.EXP_DIGIT_OR_SIGN;else if(V(Rt))Lt=Be+1,Zt=oe.EXP_DIGIT_OR_SIGN;else break e;break}case oe.EXP_DIGIT_OR_SIGN:{if(V(Rt))Lt=Be+1;else break e;break}}Be++}return Lt>0?{type:U.NUMBER,line:it,column:Ct+Lt-ft,index:Lt,value:Pe.slice(ft,Lt)}:null}var Me=function(Be,it){for(var Ct=1,ft=1,Lt=0,Zt=[];Lt<Be.length;){var Rt=[Be,Lt,Ct,ft],_n=ie.apply(void 0,Rt);if(_n){Lt=_n.index,Ct=_n.line,ft=_n.column;continue}var qn=he.apply(void 0,Rt)||fe.apply(void 0,Rt)||Ee.apply(void 0,Rt)||me.apply(void 0,Rt);if(qn){var rn={type:qn.type,value:qn.value,loc:o(Ct,ft,Lt,qn.line,qn.column,qn.index,it.source)};Zt.push(rn),Lt=qn.index,Ct=qn.line,ft=qn.column}else B(P.unexpectedSymbol(l(Be,Lt,Lt+1),it.source,Ct,ft),Be,it.source,Ct,ft)}return Zt},De={_START_:0,OPEN_OBJECT:1,PROPERTY:2,COMMA:3},xe={_START_:0,KEY:1,COLON:2},At={_START_:0,OPEN_ARRAY:1,VALUE:2,COMMA:3},Ze={loc:!0,source:null};function Xe(Pe,Be,it){var Ct=Be.length>0?Be[Be.length-1].loc.end:{line:1,column:1};B(T.unexpectedEnd(),Pe,it.source,Ct.line,Ct.column)}function Ne(Pe){for(var Be=0,it=0;it<4;it++)Be=Be*16+parseInt(Pe[it],16);return String.fromCharCode(Be)}var Se={b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Re=['"',"\\","/"];function He(Pe){for(var Be="",it=0;it<Pe.length;it++){var Ct=Pe.charAt(it);if(Ct==="\\"){it++;var ft=Pe.charAt(it);if(ft==="u")Be+=Ne(Pe.substr(it+1,4)),it+=4;else if(Re.indexOf(ft)!==-1)Be+=ft;else if(ft in Se)Be+=Se[ft];else break}else Be+=Ct}return Be}function _t(Pe,Be,it,Ct){for(var ft=void 0,Lt={type:"Object",children:[]},Zt=De._START_;it<Be.length;){var Rt=Be[it];switch(Zt){case De._START_:{if(Rt.type===U.LEFT_BRACE)ft=Rt,Zt=De.OPEN_OBJECT,it++;else return null;break}case De.OPEN_OBJECT:{if(Rt.type===U.RIGHT_BRACE)return Ct.loc&&(Lt.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Rt.loc.end.line,Rt.loc.end.column,Rt.loc.end.offset,Ct.source)),{value:Lt,index:it+1};var _n=Gt(Pe,Be,it,Ct);Lt.children.push(_n.value),Zt=De.PROPERTY,it=_n.index;break}case De.PROPERTY:{if(Rt.type===U.RIGHT_BRACE)return Ct.loc&&(Lt.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Rt.loc.end.line,Rt.loc.end.column,Rt.loc.end.offset,Ct.source)),{value:Lt,index:it+1};Rt.type===U.COMMA?(Zt=De.COMMA,it++):B(T.unexpectedToken(l(Pe,Rt.loc.start.offset,Rt.loc.end.offset),Ct.source,Rt.loc.start.line,Rt.loc.start.column),Pe,Ct.source,Rt.loc.start.line,Rt.loc.start.column);break}case De.COMMA:{var qn=Gt(Pe,Be,it,Ct);qn?(it=qn.index,Lt.children.push(qn.value),Zt=De.PROPERTY):B(T.unexpectedToken(l(Pe,Rt.loc.start.offset,Rt.loc.end.offset),Ct.source,Rt.loc.start.line,Rt.loc.start.column),Pe,Ct.source,Rt.loc.start.line,Rt.loc.start.column);break}}}Xe(Pe,Be,Ct)}function Gt(Pe,Be,it,Ct){for(var ft=void 0,Lt={type:"Property",key:null,value:null},Zt=xe._START_;it<Be.length;){var Rt=Be[it];switch(Zt){case xe._START_:{if(Rt.type===U.STRING){var _n={type:"Identifier",value:He(Pe.slice(Rt.loc.start.offset+1,Rt.loc.end.offset-1)),raw:Rt.value};Ct.loc&&(_n.loc=Rt.loc),ft=Rt,Lt.key=_n,Zt=xe.KEY,it++}else return null;break}case xe.KEY:{Rt.type===U.COLON?(Zt=xe.COLON,it++):B(T.unexpectedToken(l(Pe,Rt.loc.start.offset,Rt.loc.end.offset),Ct.source,Rt.loc.start.line,Rt.loc.start.column),Pe,Ct.source,Rt.loc.start.line,Rt.loc.start.column);break}case xe.COLON:{var qn=Tt(Pe,Be,it,Ct);return Lt.value=qn.value,Ct.loc&&(Lt.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,qn.value.loc.end.line,qn.value.loc.end.column,qn.value.loc.end.offset,Ct.source)),{value:Lt,index:qn.index}}}}}function yt(Pe,Be,it,Ct){for(var ft=void 0,Lt={type:"Array",children:[]},Zt=At._START_,Rt=void 0;it<Be.length;)switch(Rt=Be[it],Zt){case At._START_:{if(Rt.type===U.LEFT_BRACKET)ft=Rt,Zt=At.OPEN_ARRAY,it++;else return null;break}case At.OPEN_ARRAY:{if(Rt.type===U.RIGHT_BRACKET)return Ct.loc&&(Lt.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Rt.loc.end.line,Rt.loc.end.column,Rt.loc.end.offset,Ct.source)),{value:Lt,index:it+1};var _n=Tt(Pe,Be,it,Ct);it=_n.index,Lt.children.push(_n.value),Zt=At.VALUE;break}case At.VALUE:{if(Rt.type===U.RIGHT_BRACKET)return Ct.loc&&(Lt.loc=o(ft.loc.start.line,ft.loc.start.column,ft.loc.start.offset,Rt.loc.end.line,Rt.loc.end.column,Rt.loc.end.offset,Ct.source)),{value:Lt,index:it+1};Rt.type===U.COMMA?(Zt=At.COMMA,it++):B(T.unexpectedToken(l(Pe,Rt.loc.start.offset,Rt.loc.end.offset),Ct.source,Rt.loc.start.line,Rt.loc.start.column),Pe,Ct.source,Rt.loc.start.line,Rt.loc.start.column);break}case At.COMMA:{var qn=Tt(Pe,Be,it,Ct);it=qn.index,Lt.children.push(qn.value),Zt=At.VALUE;break}}Xe(Pe,Be,Ct)}function Ft(Pe,Be,it,Ct){var ft=Be[it],Lt=null;switch(ft.type){case U.STRING:{Lt=He(Pe.slice(ft.loc.start.offset+1,ft.loc.end.offset-1));break}case U.NUMBER:{Lt=Number(ft.value);break}case U.TRUE:{Lt=!0;break}case U.FALSE:{Lt=!1;break}case U.NULL:{Lt=null;break}default:return null}var Zt={type:"Literal",value:Lt,raw:ft.value};return Ct.loc&&(Zt.loc=ft.loc),{value:Zt,index:it+1}}function Tt(Pe,Be,it,Ct){var ft=Be[it],Lt=Ft.apply(void 0,arguments)||_t.apply(void 0,arguments)||yt.apply(void 0,arguments);if(Lt)return Lt;B(T.unexpectedToken(l(Pe,ft.loc.start.offset,ft.loc.end.offset),Ct.source,ft.loc.start.line,ft.loc.start.column),Pe,Ct.source,ft.loc.start.line,ft.loc.start.column)}var Le=function(Pe,Be){Be=Object.assign({},Ze,Be);var it=Me(Pe,Be);it.length===0&&Xe(Pe,it,Be);var Ct=Tt(Pe,it,0,Be);if(Ct.index===it.length)return Ct.value;var ft=it[Ct.index];B(T.unexpectedToken(l(Pe,ft.loc.start.offset,ft.loc.end.offset),Be.source,ft.loc.start.line,ft.loc.start.column),Pe,Be.source,ft.loc.start.line,ft.loc.start.column)};return Le})}(Ib)),Ib.exports}var goe=moe();const yoe=yl(goe);function hr(){var n="/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",e="89c156e637b20b434cfb214df7fad7d710253070",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts",statementMap:{0:{start:{line:5,column:0},end:{line:10,column:3}},1:{start:{line:6,column:2},end:{line:9,column:4}},2:{start:{line:12,column:16},end:{line:12,column:18}},3:{start:{line:13,column:2},end:{line:30,column:3}},4:{start:{line:14,column:4},end:{line:14,column:16}},5:{start:{line:16,column:23},end:{line:16,column:71}},6:{start:{line:17,column:4},end:{line:29,column:5}},7:{start:{line:18,column:18},end:{line:23,column:7}},8:{start:{line:24,column:6},end:{line:28,column:9}},9:{start:{line:31,column:2},end:{line:31,column:15}},10:{start:{line:33,column:0},end:{line:35,column:3}},11:{start:{line:34,column:2},end:{line:34,column:26}},12:{start:{line:36,column:0},end:{line:130,column:3}},13:{start:{line:37,column:16},end:{line:37,column:32}},14:{start:{line:38,column:22},end:{line:38,column:26}},15:{start:{line:39,column:2},end:{line:41,column:3}},16:{start:{line:40,column:4},end:{line:40,column:17}},17:{start:{line:42,column:14},end:{line:42,column:29}},18:{start:{line:43,column:16},end:{line:43,column:32}},19:{start:{line:45,column:4},end:{line:65,column:5}},20:{start:{line:46,column:6},end:{line:46,column:20}},21:{start:{line:47,column:11},end:{line:65,column:5}},22:{start:{line:48,column:6},end:{line:48,column:18}},23:{start:{line:49,column:11},end:{line:65,column:5}},24:{start:{line:50,column:6},end:{line:50,column:20}},25:{start:{line:52,column:18},end:{line:52,column:25}},26:{start:{line:54,column:6},end:{line:63,column:7}},27:{start:{line:55,column:8},end:{line:55,column:41}},28:{start:{line:57,column:8},end:{line:59,column:11}},29:{start:{line:58,column:10},end:{line:58,column:101}},30:{start:{line:60,column:8},end:{line:62,column:9}},31:{start:{line:61,column:10},end:{line:61,column:34}},32:{start:{line:64,column:6},end:{line:64,column:63}},33:{start:{line:67,column:12},end:{line:67,column:16}},34:{start:{line:68,column:2},end:{line:99,column:3}},35:{start:{line:69,column:19},end:{line:79,column:6}},36:{start:{line:80,column:4},end:{line:94,column:5}},37:{start:{line:81,column:6},end:{line:93,column:8}},38:{start:{line:84,column:10},end:{line:84,column:76}},39:{start:{line:86,column:34},end:{line:86,column:85}},40:{start:{line:87,column:10},end:{line:91,column:12}},41:{start:{line:95,column:9},end:{line:99,column:3}},42:{start:{line:96,column:4},end:{line:96,column:56}},43:{start:{line:98,column:4},end:{line:98,column:50}},44:{start:{line:100,column:2},end:{line:128,column:3}},45:{start:{line:101,column:19},end:{line:101,column:28}},46:{start:{line:102,column:4},end:{line:127,column:7}},47:{start:{line:103,column:31},end:{line:103,column:36}},48:{start:{line:104,column:6},end:{line:126,column:7}},49:{start:{line:105,column:31},end:{line:105,column:64}},50:{start:{line:106,column:20},end:{line:110,column:9}},51:{start:{line:111,column:8},end:{line:111,column:24}},52:{start:{line:112,column:13},end:{line:126,column:7}},53:{start:{line:113,column:21},end:{line:113,column:83}},54:{start:{line:114,column:28},end:{line:114,column:64}},55:{start:{line:115,column:8},end:{line:118,column:9}},56:{start:{line:116,column:10},end:{line:116,column:69}},57:{start:{line:117,column:10},end:{line:117,column:17}},58:{start:{line:119,column:24},end:{line:119,column:35}},59:{start:{line:120,column:31},end:{line:120,column:34}},60:{start:{line:121,column:8},end:{line:125,column:11}},61:{start:{line:129,column:2},end:{line:129,column:15}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:55},end:{line:10,column:1}},line:5},1:{name:"tryToParse",decl:{start:{line:11,column:9},end:{line:11,column:19}},loc:{start:{line:11,column:26},end:{line:32,column:1}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:33,column:42},end:{line:33,column:43}},loc:{start:{line:33,column:52},end:{line:35,column:1}},line:33},3:{name:"(anonymous_3)",decl:{start:{line:36,column:41},end:{line:36,column:42}},loc:{start:{line:36,column:62},end:{line:130,column:1}},line:36},4:{name:"getArrayPositionalFromAst",decl:{start:{line:44,column:11},end:{line:44,column:36}},loc:{start:{line:44,column:49},end:{line:66,column:3}},line:44},5:{name:"(anonymous_5)",decl:{start:{line:57,column:37},end:{line:57,column:38}},loc:{start:{line:57,column:52},end:{line:59,column:9}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:38},end:{line:85,column:9}},line:83},7:{name:"(anonymous_7)",decl:{start:{line:85,column:15},end:{line:85,column:16}},loc:{start:{line:85,column:24},end:{line:92,column:9}},line:85},8:{name:"(anonymous_8)",decl:{start:{line:102,column:19},end:{line:102,column:20}},loc:{start:{line:102,column:30},end:{line:127,column:5}},line:102}},branchMap:{0:{loc:{start:{line:17,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:29,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:39,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:39,column:2},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},2:{loc:{start:{line:45,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:65,column:5}},{start:{line:47,column:11},end:{line:65,column:5}}],line:45},3:{loc:{start:{line:47,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:47,column:11},end:{line:65,column:5}},{start:{line:49,column:11},end:{line:65,column:5}}],line:47},4:{loc:{start:{line:49,column:11},end:{line:65,column:5}},type:"if",locations:[{start:{line:49,column:11},end:{line:65,column:5}},{start:{line:51,column:11},end:{line:65,column:5}}],line:49},5:{loc:{start:{line:54,column:6},end:{line:63,column:7}},type:"if",locations:[{start:{line:54,column:6},end:{line:63,column:7}},{start:{line:56,column:13},end:{line:63,column:7}}],line:54},6:{loc:{start:{line:58,column:17},end:{line:58,column:100}},type:"binary-expr",locations:[{start:{line:58,column:17},end:{line:58,column:30}},{start:{line:58,column:34},end:{line:58,column:69}},{start:{line:58,column:73},end:{line:58,column:100}}],line:58},7:{loc:{start:{line:60,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:62,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},8:{loc:{start:{line:68,column:2},end:{line:99,column:3}},type:"if",locations:[{start:{line:68,column:2},end:{line:99,column:3}},{start:{line:95,column:9},end:{line:99,column:3}}],line:68},9:{loc:{start:{line:80,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:80,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:80},10:{loc:{start:{line:95,column:9},end:{line:99,column:3}},type:"if",locations:[{start:{line:95,column:9},end:{line:99,column:3}},{start:{line:97,column:9},end:{line:99,column:3}}],line:95},11:{loc:{start:{line:100,column:2},end:{line:128,column:3}},type:"if",locations:[{start:{line:100,column:2},end:{line:128,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:100},12:{loc:{start:{line:104,column:6},end:{line:126,column:7}},type:"if",locations:[{start:{line:104,column:6},end:{line:126,column:7}},{start:{line:112,column:13},end:{line:126,column:7}}],line:104},13:{loc:{start:{line:112,column:13},end:{line:126,column:7}},type:"if",locations:[{start:{line:112,column:13},end:{line:126,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:112},14:{loc:{start:{line:115,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:115,column:8},end:{line:118,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:115}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/codemirror-mgl.ts"],names:[],mappings:"AAAA,SAAQ,aAAY;AACpB,OAAO,gBAAiC;AACxC,OAAO,eAAe;AACtB,SAAQ,YAAY,wBAAuB;AAK3C,WAAW,WAAW,OAAO,CAAC,QAAQ,iBAAiB;AAErD,SAAO,WAAW,MAAM;AAAA,IACtB,EAAC,GAAG,QAAQ,MAAM,KAAI;AAAA,IACtB;AAAA,EACF;AACF,CAAC;AAGD,SAAS,WAAW,MAAc;AAEhC,QAAM,QAAkC,CAAC;AACzC,MAAI;AACF,UAAM,IAAI;AAAA,EACZ,SACM,KAAU;AAEd,UAAM,aAAa,IAAI,SAAS,EAAE,MAAM,0BAA0B;AAClE,QAAI,YAAY;AACd,YAAM,MAAM;AAAA,QACV,YAAY,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACtC,cAAc,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACxC,WAAW,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,QACrC,aAAa,SAAS,WAAW,CAAC,GAAG,EAAE;AAAA,MACzC;AAGA,YAAM,KAAK;AAAA,QACT,MAAM,WAAW,IAAI,IAAI,aAAa,GAAG,IAAI,YAAY;AAAA,QACzD,IAAI,WAAW,IAAI,IAAI,YAAY,GAAG,IAAI,WAAW;AAAA,QACrD,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAEA,WAAW,eAAe,QAAQ,QAAQ,CAAC,SAAiB;AAC1D,SAAO,WAAW,IAAI;AACxB,CAAC;AAED,WAAW,eAAe,QAAQ,OAAO,CAAC,MAAc,MAAW,QAAa;AAE9E,QAAM,QAAkC,WAAW,IAAI;AAEvD,QAAM,EAAC,QAAO,IAAI;AAElB,MAAI,MAAM,SAAS,GAAG;AAEpB,WAAO;AAAA,EACT;AAEA,QAAM,MAAM,UAAU,IAAI;AAC1B,QAAM,QAAQ,KAAK,MAAM,IAAI;AAE7B,WAAS,0BAA0B,MAAW,MAAgB;AAC5D,QAAI,CAAC,MAAM;AACT,aAAO;AAAA,IACT,WACS,KAAK,SAAS,GAAG;AACxB,aAAO;AAAA,IACT,WACS,CAAC,KAAK,UAAU;AACvB,aAAO;AAAA,IACT,OACK;AACH,YAAM,MAAM,KAAK,CAAC;AAClB,UAAI;AACJ,UAAI,IAAI,MAAM,UAAU,GAAG;AACzB,kBAAU,KAAK,SAAS,KAAK,CAAC,CAAC;AAAA,MACjC,OACK;AACH,kBAAU,KAAK,SAAS,KAAK,CAAC,cAAmB;AAC/C,iBACE,UAAU,OACV,UAAU,IAAI,SAAS,gBACvB,UAAU,IAAI,UAAU;AAAA,QAE5B,CAAC;AACD,YAAI,SAAS;AACX,oBAAU,QAAQ;AAAA,QACpB;AAAA,MACF;AACA,aAAO,0BAA0B,SAAS,KAAK,MAAM,CAAC,CAAC;AAAA,IACzD;AAAA,EACF;AAEA,MAAI,MAA6D;AACjE,MAAI,YAAY,SAAS;AAEvB,UAAM,SAAS,iBAAiB;AAAA,MAC9B,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAC;AAAA,MACb,WAAW,CAAC;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,QACR;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,QAAQ;AACV,YAAM;AAAA,QACJ,QAAQ;AAAA,QACR,OAAO,OACJ,OAAO,SAAO;AAEb,iBAAO,CAAC,IAAI,QAAQ,MAAM,sCAAsC;AAAA,QAClE,CAAC,EACA,IAAI,SAAO;AAEV,gBAAM,kBAAkB,IAAI,QAAQ,QAAQ,iBAAiB,EAAE,EAAE,MAAM,GAAG;AAC1E,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,KAAK,gBAAgB,CAAC;AAAA,YACtB,SAAS,gBAAgB,CAAC;AAAA,UAC5B;AAAA,QACF,CAAC;AAAA,MACL;AAAA,IACF;AAAA,EACF,WACS,YAAY,cAAc;AACjC,UAAM,WAAW,iBAAiB,OAAO,KAAK,IAAI;AAAA,EACpD,OACK;AACH,UAAM,IAAI,MAAM,mBAAmB,OAAO,EAAE;AAAA,EAC9C;AAEA,MAAI,KAAK,WAAW,SAAS;AAC3B,UAAM,SAAS,IAAI;AACnB,WAAO,QAAQ,WAAS;AACtB,YAAM,EAAC,KAAK,QAAO,IAAI;AAEvB,UAAI,CAAC,KAAK;AACR,cAAM,iBAAiB,IAAI,cAAc,IAAI,SAAS,CAAC;AACvD,cAAM,MAAM;AAAA,UACV,MAAM,WAAW,IAAI,IAAI,UAAU,GAAG,CAAC;AAAA,UACvC,IAAI,WAAW,IAAI,IAAI,SAAS,GAAG,eAAe,KAAK,MAAM;AAAA,UAC7D;AAAA,QACF;AACA,cAAM,KAAK,GAAG;AAAA,MAChB,WACS,KAAK;AACZ,cAAM,OAAO,IAAI,QAAQ,YAAY,EAAE,EAAE,MAAM,WAAW,EAAE,OAAO,OAAO;AAC1E,cAAM,cAAc,0BAA0B,KAAK,IAAI;AACvD,YAAI,CAAC,aAAa;AAChB,kBAAQ,KAAK,uCAAuC,KAAK;AACzD;AAAA,QACF;AAEA,cAAM,EAAC,IAAG,IAAI;AACd,cAAM,EAAC,OAAO,IAAG,IAAI;AAErB,cAAM,KAAK;AAAA,UACT,MAAM,WAAW,IAAI,MAAM,OAAO,GAAG,MAAM,MAAM;AAAA,UACjD,IAAI,WAAW,IAAI,IAAI,OAAO,GAAG,IAAI,MAAM;AAAA,UAC3C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"89c156e637b20b434cfb214df7fad7d710253070"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return hr=function(){return l},l}hr();hr().s[0]++;hp.defineMode("mgl",(n,e)=>(hr().f[0]++,hr().s[1]++,hp.modes.javascript({...n,json:!0},e)));function Pz(n){hr().f[1]++;const e=(hr().s[2]++,[]);hr().s[3]++;try{hr().s[4]++,foe.parse(n)}catch(t){const r=(hr().s[5]++,t.toString().match(/line (\d+), column (\d+)/));if(hr().s[6]++,r){hr().b[0][0]++;const i=(hr().s[7]++,{first_line:parseInt(r[1],10),first_column:parseInt(r[2],10),last_line:parseInt(r[1],10),last_column:parseInt(r[2],10)});hr().s[8]++,e.push({from:hp.Pos(i.first_line-1,i.first_column),to:hp.Pos(i.last_line-1,i.last_column),message:t})}else hr().b[0][1]++}return hr().s[9]++,e}hr().s[10]++;hp.registerHelper("lint","json",n=>(hr().f[2]++,hr().s[11]++,Pz(n)));hr().s[12]++;hp.registerHelper("lint","mgl",(n,e,t)=>{hr().f[3]++;const r=(hr().s[13]++,Pz(n)),{context:i}=(hr().s[14]++,e);if(hr().s[15]++,r.length>0)return hr().b[1][0]++,hr().s[16]++,r;hr().b[1][1]++;const s=(hr().s[17]++,yoe(n)),l=(hr().s[18]++,JSON.parse(n));function o(v,x){if(hr().f[4]++,hr().s[19]++,v){if(hr().b[2][1]++,hr().s[21]++,x.length<1)return hr().b[3][0]++,hr().s[22]++,v;if(hr().b[3][1]++,hr().s[23]++,v.children){hr().b[4][1]++;const B=(hr().s[25]++,x[0]);let T;return hr().s[26]++,B.match(/^[0-9]+$/)?(hr().b[5][0]++,hr().s[27]++,T=v.children[x[0]]):(hr().b[5][1]++,hr().s[28]++,T=v.children.find(P=>(hr().f[5]++,hr().s[29]++,hr().b[6][0]++,P.key&&(hr().b[6][1]++,P.key.type==="Identifier")&&(hr().b[6][2]++,P.key.value===B))),hr().s[30]++,T?(hr().b[7][0]++,hr().s[31]++,T=T.value):hr().b[7][1]++),hr().s[32]++,o(T,x.slice(1))}else{hr().b[4][0]++,hr().s[24]++;return}}else{hr().b[2][0]++,hr().s[20]++;return}}let p=(hr().s[33]++,null);if(hr().s[34]++,i==="layer"){hr().b[8][0]++;const v=(hr().s[35]++,Kf({version:8,name:"Empty Style",metadata:{},sources:{},sprite:"",glyphs:"https://example.com/glyphs/{fontstack}/{range}.pbf",layers:[l]}));hr().s[36]++,v?(hr().b[9][0]++,hr().s[37]++,p={result:"error",value:v.filter(x=>(hr().f[6]++,hr().s[38]++,!x.message.match(/^layers\[0\]: source ".*" not found$/))).map(x=>{hr().f[7]++;const B=(hr().s[39]++,x.message.replace(/^layers\[0\]./,"").split(":"));return hr().s[40]++,{name:"",key:B[0],message:B[1]}})}):hr().b[9][1]++}else if(hr().b[8][1]++,hr().s[41]++,i==="expression")hr().b[10][0]++,hr().s[42]++,p=Hq.createExpression(l,e.spec);else throw hr().b[10][1]++,hr().s[43]++,new Error(`Invalid context ${i}`);if(hr().s[44]++,(p==null?void 0:p.result)==="error"){hr().b[11][0]++;const v=(hr().s[45]++,p.value);hr().s[46]++,v.forEach(x=>{hr().f[8]++;const{key:B,message:T}=(hr().s[47]++,x);if(hr().s[48]++,B)if(hr().b[12][1]++,hr().s[52]++,B){hr().b[13][0]++;const P=(hr().s[53]++,B.replace(/^\[|\]$/g,"").split(/\.|[[\]]+/).filter(Boolean)),U=(hr().s[54]++,o(s,P));if(hr().s[55]++,U)hr().b[14][1]++;else{hr().b[14][0]++,hr().s[56]++,console.warn("Something went wrong parsing error:",x),hr().s[57]++;return}const{loc:j}=(hr().s[58]++,U),{start:N,end:q}=(hr().s[59]++,j);hr().s[60]++,r.push({from:hp.Pos(N.line-1,N.column),to:hp.Pos(q.line-1,q.column),message:T})}else hr().b[13][1]++;else{hr().b[12][0]++;const P=(hr().s[49]++,t.getLineHandle(t.lastLine())),U=(hr().s[50]++,{from:hp.Pos(t.firstLine(),0),to:hp.Pos(t.lastLine(),P.text.length),message:T});hr().s[51]++,r.push(U)}})}else hr().b[11][1]++;return hr().s[61]++,r});function yr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",e="da44fe7250311daecfc0a96e15b8409621007dbc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx",statementMap:{0:{start:{line:14,column:24},end:{line:29,column:3}},1:{start:{line:19,column:6},end:{line:19,column:65}},2:{start:{line:32,column:8},end:{line:32,column:12}},3:{start:{line:33,column:22},end:{line:33,column:27}},4:{start:{line:35,column:4},end:{line:35,column:17}},5:{start:{line:36,column:4},end:{line:36,column:32}},6:{start:{line:37,column:4},end:{line:41,column:6}},7:{start:{line:44,column:4},end:{line:60,column:7}},8:{start:{line:61,column:4},end:{line:61,column:42}},9:{start:{line:62,column:4},end:{line:62,column:40}},10:{start:{line:63,column:4},end:{line:63,column:38}},11:{start:{line:65,column:18},end:{line:67,column:3}},12:{start:{line:66,column:4},end:{line:66,column:31}},13:{start:{line:68,column:12},end:{line:74,column:3}},14:{start:{line:69,column:4},end:{line:69,column:49}},15:{start:{line:69,column:28},end:{line:69,column:49}},16:{start:{line:70,column:4},end:{line:73,column:7}},17:{start:{line:75,column:11},end:{line:82,column:3}},18:{start:{line:76,column:4},end:{line:76,column:32}},19:{start:{line:77,column:4},end:{line:77,column:47}},20:{start:{line:77,column:27},end:{line:77,column:47}},21:{start:{line:78,column:4},end:{line:81,column:7}},22:{start:{line:84,column:4},end:{line:84,column:43}},23:{start:{line:85,column:4},end:{line:85,column:41}},24:{start:{line:86,column:4},end:{line:86,column:39}},25:{start:{line:89,column:4},end:{line:94,column:5}},26:{start:{line:90,column:6},end:{line:90,column:36}},27:{start:{line:91,column:6},end:{line:93,column:8}},28:{start:{line:96,column:13},end:{line:123,column:3}},29:{start:{line:97,column:4},end:{line:103,column:5}},30:{start:{line:98,column:6},end:{line:98,column:37}},31:{start:{line:99,column:6},end:{line:101,column:9}},32:{start:{line:102,column:6},end:{line:102,column:13}},33:{start:{line:104,column:20},end:{line:104,column:40}},34:{start:{line:105,column:4},end:{line:119,column:5}},35:{start:{line:107,column:6},end:{line:112,column:7}},36:{start:{line:108,column:8},end:{line:108,column:42}},37:{start:{line:110,column:8},end:{line:110,column:19}},38:{start:{line:111,column:8},end:{line:111,column:27}},39:{start:{line:113,column:6},end:{line:118,column:7}},40:{start:{line:114,column:8},end:{line:114,column:35}},41:{start:{line:116,column:8},end:{line:116,column:66}},42:{start:{line:116,column:33},end:{line:116,column:66}},43:{start:{line:117,column:8},end:{line:117,column:61}},44:{start:{line:117,column:36},end:{line:117,column:61}},45:{start:{line:120,column:4},end:{line:122,column:7}},46:{start:{line:125,column:14},end:{line:125,column:26}},47:{start:{line:126,column:28},end:{line:126,column:38}},48:{start:{line:127,column:18},end:{line:127,column:20}},49:{start:{line:128,column:4},end:{line:130,column:5}},50:{start:{line:129,column:6},end:{line:129,column:45}},51:{start:{line:131,column:4},end:{line:145,column:9}},52:{start:{line:141,column:23},end:{line:141,column:36}},53:{start:{line:148,column:18},end:{line:148,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:18,column:14},end:{line:18,column:15}},loc:{start:{line:18,column:24},end:{line:20,column:5}},line:18},1:{name:"(anonymous_1)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:22,column:5}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:18},end:{line:24,column:5}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:25,column:19},end:{line:25,column:20}},loc:{start:{line:25,column:25},end:{line:26,column:5}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:27,column:17},end:{line:27,column:18}},loc:{start:{line:27,column:23},end:{line:28,column:5}},line:27},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:21},end:{line:42,column:3}},line:34},6:{name:"(anonymous_6)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:22},end:{line:64,column:3}},line:43},7:{name:"(anonymous_7)",decl:{start:{line:65,column:18},end:{line:65,column:19}},loc:{start:{line:65,column:24},end:{line:67,column:3}},line:65},8:{name:"(anonymous_8)",decl:{start:{line:68,column:12},end:{line:68,column:13}},loc:{start:{line:68,column:18},end:{line:74,column:3}},line:68},9:{name:"(anonymous_9)",decl:{start:{line:75,column:11},end:{line:75,column:12}},loc:{start:{line:75,column:17},end:{line:82,column:3}},line:75},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:25},end:{line:87,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:88,column:2},end:{line:88,column:3}},loc:{start:{line:88,column:32},end:{line:95,column:3}},line:88},12:{name:"(anonymous_12)",decl:{start:{line:96,column:13},end:{line:96,column:14}},loc:{start:{line:96,column:21},end:{line:123,column:3}},line:96},13:{name:"(anonymous_13)",decl:{start:{line:124,column:2},end:{line:124,column:3}},loc:{start:{line:124,column:11},end:{line:146,column:3}},line:124},14:{name:"(anonymous_14)",decl:{start:{line:141,column:15},end:{line:141,column:16}},loc:{start:{line:141,column:23},end:{line:141,column:36}},line:141}},branchMap:{0:{loc:{start:{line:46,column:12},end:{line:48,column:7}},type:"binary-expr",locations:[{start:{line:46,column:12},end:{line:46,column:27}},{start:{line:46,column:31},end:{line:48,column:7}}],line:46},1:{loc:{start:{line:54,column:12},end:{line:56,column:7}},type:"binary-expr",locations:[{start:{line:54,column:12},end:{line:54,column:27}},{start:{line:54,column:31},end:{line:56,column:7}}],line:54},2:{loc:{start:{line:69,column:4},end:{line:69,column:49}},type:"if",locations:[{start:{line:69,column:4},end:{line:69,column:49}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:77,column:4},end:{line:77,column:47}},type:"if",locations:[{start:{line:77,column:4},end:{line:77,column:47}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:77},4:{loc:{start:{line:89,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:89,column:4},end:{line:94,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:89},5:{loc:{start:{line:89,column:8},end:{line:89,column:69}},type:"binary-expr",locations:[{start:{line:89,column:8},end:{line:89,column:29}},{start:{line:89,column:33},end:{line:89,column:69}}],line:89},6:{loc:{start:{line:97,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:103,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:97},7:{loc:{start:{line:105,column:4},end:{line:119,column:5}},type:"if",locations:[{start:{line:105,column:4},end:{line:119,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:105},8:{loc:{start:{line:113,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:118,column:7}},{start:{line:115,column:13},end:{line:118,column:7}}],line:113},9:{loc:{start:{line:113,column:10},end:{line:113,column:41}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:13}},{start:{line:113,column:17},end:{line:113,column:41}}],line:113},10:{loc:{start:{line:116,column:8},end:{line:116,column:66}},type:"if",locations:[{start:{line:116,column:8},end:{line:116,column:66}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:116},11:{loc:{start:{line:117,column:8},end:{line:117,column:61}},type:"if",locations:[{start:{line:117,column:8},end:{line:117,column:61}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:117},12:{loc:{start:{line:128,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:130,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputJson.tsx"],names:[],mappings:"AAyKQ,SACQ,KADR;AAzKR,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,OAAO,gBAA8B;AACrC,SAAS,OAAwB,uBAAuB;AAExD,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,qBAAqB;AAC5B,OAAO;AA2BP,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,OAAO,eAAe;AAAA,IACpB,aAAa;AAAA,IACb,cAAc;AAAA,IACd,SAAS,CAAC,yBAAyB;AAAA,IACnC,UAAU,CAAC,SAAc;AACvB,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAAA,IACA,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,IACf,eAAe,MAAM;AAAA,IAAC;AAAA,IACtB,aAAa,MAAM;AAAA,IAAC;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,MAA6B;AAAA,EAC7B,oBAA6B;AAAA,EAE7B,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,YAAY;AACjB,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,IAClD;AAAA,EACF;AAAA,EAEA,oBAAqB;AACnB,SAAK,OAAO,WAAW,KAAK,KAAM;AAAA,MAChC,OAAO,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MAC5C,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,MAAM;AAAA,MACR;AAAA,MACA,cAAc,KAAK,MAAM;AAAA,MACzB,SAAS;AAAA,MACT,OAAO;AAAA,MACP,gBAAgB;AAAA,MAChB,aAAa,KAAK,MAAM;AAAA,MACxB,MAAM,KAAK,MAAM,QAAQ;AAAA,QACvB,SAAS;AAAA,MACX;AAAA,MACA,eAAe;AAAA,MACf,SAAS,KAAK,MAAM;AAAA,MACpB,gBAAgB;AAAA,IAClB,CAAC;AAED,SAAK,KAAK,GAAG,UAAU,KAAK,QAAQ;AACpC,SAAK,KAAK,GAAG,SAAS,KAAK,OAAO;AAClC,SAAK,KAAK,GAAG,QAAQ,KAAK,MAAM;AAAA,EAClC;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,YAAY;AAAA,EACnB;AAAA,EAEA,UAAU,MAAM;AACd,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ;AAC3C,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAc,KAAK,cAAc;AAAA,IACnC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACb,SAAK,YAAY;AACjB,QAAI,KAAK,MAAM,OAAQ,MAAK,MAAM,OAAO;AACzC,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,MACX,aAAa;AAAA,IACf,CAAC;AAAA,EACH;AAAA,EAEA,uBAAwB;AACtB,SAAK,KAAM,IAAI,UAAU,KAAK,QAAQ;AACtC,SAAK,KAAM,IAAI,SAAS,KAAK,OAAO;AACpC,SAAK,KAAM,IAAI,QAAQ,KAAK,MAAM;AAAA,EACpC;AAAA,EAEA,mBAAmB,WAA2B;AAC5C,QAAI,CAAC,KAAK,MAAM,aAAa,UAAU,UAAU,KAAK,MAAM,OAAO;AACjE,WAAK,oBAAoB;AACzB,WAAK,KAAM;AAAA,QACT,KAAK,MAAM,SAAU,KAAK,MAAM,KAAK;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,CAAC,OAAgB;AAC1B,QAAI,KAAK,mBAAmB;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AAAA,QACZ,WAAW,KAAK,KAAM,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,UAAM,UAAU,KAAK,KAAM,SAAS;AAEpC,QAAI,KAAK,MAAM,cAAc,SAAS;AACpC,UAAI,aAAa;AACjB,UAAI;AACF,sBAAc,KAAK,MAAM,OAAO;AAAA,MAClC,SAAQ,MAAM;AACZ,cAAM;AACN,gBAAQ,KAAK,IAAI;AAAA,MACnB;AAEA,UAAI,OAAO,KAAK,MAAM,eAAe;AACnC,aAAK,MAAM,cAAc;AAAA,MAC3B,OACK;AACH,YAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,WAAW;AACxD,YAAI,KAAK,MAAM,YAAa,MAAK,MAAM,YAAY;AAAA,MACrD;AAAA,IACF;AAEA,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,EAAC,YAAW,IAAI,KAAK;AAC3B,UAAM,QAAQ,CAAC;AACf,QAAI,KAAK,MAAM,WAAW;AACxB,YAAM,YAAY,KAAK,MAAM;AAAA,IAC/B;AAEA,WAAO,qBAAC,SAAI,WAAU,cAAa,eAAe,KAAK,eAAe,eAAY,QAChF;AAAA,0BAAC,SAAI,WAAW,WAAW,uBAAuB,EAAC,2BAA2B,YAAW,CAAC,GACxF,+BAAC,SAAM,GAAM;AAAA;AAAA,QACL,oBAAC,SAAI,iBAAG;AAAA,QAAM;AAAA,SACtB,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAW,WAAW,wBAAwB,KAAK,MAAM,SAAS;AAAA,UAClE,KAAK,CAAC,OAAO,KAAK,MAAM;AAAA,UACxB;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"da44fe7250311daecfc0a96e15b8409621007dbc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return yr=function(){return l},l}yr();class Kz extends sr.Component{constructor(t){yr().f[5]++,yr().s[4]++;super(t);Pn(this,"_keyEvent");Pn(this,"_doc");Pn(this,"_el",(yr().s[2]++,null));Pn(this,"_cancelNextChange",(yr().s[3]++,!1));Pn(this,"onPointerDown",(yr().s[11]++,()=>{yr().f[7]++,yr().s[12]++,this._keyEvent="pointer"}));Pn(this,"onFocus",(yr().s[13]++,()=>{yr().f[8]++,yr().s[14]++,this.props.onFocus?(yr().b[2][0]++,yr().s[15]++,this.props.onFocus()):yr().b[2][1]++,yr().s[16]++,this.setState({isEditing:!0,showMessage:this._keyEvent==="keyboard"})}));Pn(this,"onBlur",(yr().s[17]++,()=>{yr().f[9]++,yr().s[18]++,this._keyEvent="keyboard",yr().s[19]++,this.props.onBlur?(yr().b[3][0]++,yr().s[20]++,this.props.onBlur()):yr().b[3][1]++,yr().s[21]++,this.setState({isEditing:!1,showMessage:!1})}));Pn(this,"onChange",(yr().s[28]++,t=>{if(yr().f[12]++,yr().s[29]++,this._cancelNextChange){yr().b[6][0]++,yr().s[30]++,this._cancelNextChange=!1,yr().s[31]++,this.setState({prevValue:this._doc.getValue()}),yr().s[32]++;return}else yr().b[6][1]++;const r=(yr().s[33]++,this._doc.getValue());if(yr().s[34]++,this.state.prevValue!==r){yr().b[7][0]++;let i,s;yr().s[35]++;try{yr().s[36]++,i=JSON.parse(r)}catch(l){yr().s[37]++,s=l,yr().s[38]++,console.warn(l)}yr().s[39]++,yr().b[9][0]++,s&&(yr().b[9][1]++,this.props.onJSONInvalid)?(yr().b[8][0]++,yr().s[40]++,this.props.onJSONInvalid()):(yr().b[8][1]++,yr().s[41]++,this.props.onChange?(yr().b[10][0]++,yr().s[42]++,this.props.onChange(i)):yr().b[10][1]++,yr().s[43]++,this.props.onJSONValid?(yr().b[11][0]++,yr().s[44]++,this.props.onJSONValid()):yr().b[11][1]++)}else yr().b[7][1]++;yr().s[45]++,this.setState({prevValue:r})}));yr().s[5]++,this._keyEvent="keyboard",yr().s[6]++,this.state={isEditing:!1,showMessage:!1,prevValue:this.props.getValue(this.props.layer)}}componentDidMount(){yr().f[6]++,yr().s[7]++,this._doc=hp(this._el,{value:this.props.getValue(this.props.layer),mode:(yr().b[0][0]++,this.props.mode||(yr().b[0][1]++,{name:"mgl"})),lineWrapping:this.props.lineWrapping,tabSize:2,theme:"maputnik",viewportMargin:1/0,lineNumbers:this.props.lineNumbers,lint:(yr().b[1][0]++,this.props.lint||(yr().b[1][1]++,{context:"layer"})),matchBrackets:!0,gutters:this.props.gutters,scrollbarStyle:"null"}),yr().s[8]++,this._doc.on("change",this.onChange),yr().s[9]++,this._doc.on("focus",this.onFocus),yr().s[10]++,this._doc.on("blur",this.onBlur)}componentWillUnMount(){yr().f[10]++,yr().s[22]++,this._doc.off("change",this.onChange),yr().s[23]++,this._doc.off("focus",this.onFocus),yr().s[24]++,this._doc.off("blur",this.onBlur)}componentDidUpdate(t){yr().f[11]++,yr().s[25]++,yr().b[5][0]++,!this.state.isEditing&&(yr().b[5][1]++,t.layer!==this.props.layer)?(yr().b[4][0]++,yr().s[26]++,this._cancelNextChange=!0,yr().s[27]++,this._doc.setValue(this.props.getValue(this.props.layer))):yr().b[4][1]++}render(){yr().f[13]++;const t=(yr().s[46]++,this.props.t),{showMessage:r}=(yr().s[47]++,this.state),i=(yr().s[48]++,{});return yr().s[49]++,this.props.maxHeight?(yr().b[12][0]++,yr().s[50]++,i.maxHeight=this.props.maxHeight):yr().b[12][1]++,yr().s[51]++,le.jsxs("div",{className:"JSONEditor",onPointerDown:this.onPointerDown,"aria-hidden":"true",children:[le.jsx("div",{className:em("JSONEditor__message",{"JSONEditor__message--on":r}),children:le.jsxs(E0,{t,children:["Press ",le.jsx("kbd",{children:"ESC"})," to lose focus"]})}),le.jsx("div",{className:em("codemirror-container",this.props.className),ref:s=>(yr().f[14]++,yr().s[52]++,this._el=s),style:i})]})}}Pn(Kz,"defaultProps",(yr().s[0]++,{lineNumbers:!0,lineWrapping:!1,gutters:["CodeMirror-lint-markers"],getValue:t=>(yr().f[0]++,yr().s[1]++,Tz(t,{indent:2,maxLength:40})),onFocus:()=>{yr().f[1]++},onBlur:()=>{yr().f[2]++},onJSONInvalid:()=>{yr().f[3]++},onJSONValid:()=>{yr().f[4]++}}));const voe=(yr().s[53]++,Ws()(Kz));function B2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",e="60f4cd40e505c4a9f8de1078b77716b10a4a4264",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx",statementMap:{0:{start:{line:6,column:4},end:{line:6,column:61}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:7,column:3}},line:5}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldJson.tsx"],names:[],mappings:"AASW;AATX,OAAO,WAAW;AAClB,OAAO,eAAiC;AAMxC,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,aAAW,GAAG,KAAK,OAAO;AAAA,EACpC;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f4cd40e505c4a9f8de1078b77716b10a4a4264"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return B2=function(){return l},l}B2();class SO extends sr.Component{render(){return B2().f[0]++,B2().s[0]++,le.jsx(voe,{...this.props})}}var kC="M12.42,5.29C11.32,5.19 10.35,6 10.25,7.11L10,10H12.82V12H9.82L9.38,17.07C9.18,19.27 7.24,20.9 5.04,20.7C3.79,20.59 2.66,19.9 2,18.83L3.5,17.33C3.83,18.38 4.96,18.97 6,18.63C6.78,18.39 7.33,17.7 7.4,16.89L7.82,12H4.82V10H8L8.27,6.93C8.46,4.73 10.39,3.1 12.6,3.28C13.86,3.39 15,4.09 15.66,5.17L14.16,6.67C13.91,5.9 13.23,5.36 12.42,5.29M22,13.65L20.59,12.24L17.76,15.07L14.93,12.24L13.5,13.65L16.35,16.5L13.5,19.31L14.93,20.72L17.76,17.89L20.59,20.72L22,19.31L19.17,16.5L22,13.65Z",Coe="M7,10L12,15L17,10H7Z",_oe="M7,15L12,10L17,15H7Z",EO="M22,10A2,2 0 0,1 20,12H4A2,2 0 0,1 2,10V3H4V5H8V3H10V5H14V3H16V5H20V3H22V10M4,10H8V7H4V10M10,10H14V7H10V10M20,10V7H16V10H20M11,14H13V17H16V19H13V22H11V19H8V17H11V14Z";function Ig(){var n="/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",e="99dad9631fbee5fc23be2dafaf7c7eea92c38eac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/filterops.ts",statementMap:{0:{start:{line:2,column:34},end:{line:2,column:56}},1:{start:{line:3,column:28},end:{line:3,column:41}},2:{start:{line:4,column:30},end:{line:4,column:123}},3:{start:{line:4,column:88},end:{line:4,column:122}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:80},end:{line:4,column:81}},loc:{start:{line:4,column:88},end:{line:4,column:122}},line:4}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/filterops.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEZ,aAAM,qBAAqB,CAAC,OAAO,OAAO,MAAM;AAChD,aAAM,eAAe,CAAC,MAAM,KAAK;AACjC,aAAM,iBAAiB,OAC3B,KAAK,OAAO,gBAAgB,MAAM,EAClC,OAAO,QAAM,mBAAmB,QAAQ,EAAE,IAAI,CAAC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99dad9631fbee5fc23be2dafaf7c7eea92c38eac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ig=function(){return l},l}Ig();const BO=(Ig().s[0]++,["all","any","none"]);Ig().s[1]++;const boe=(Ig().s[2]++,Object.keys(qo.filter_operator.values).filter(n=>(Ig().f[0]++,Ig().s[3]++,BO.indexOf(n)<0)));function Mi(){var n="/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",e="d18e3b448d830733ac17bcacd45f7c08e364baa2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx",statementMap:{0:{start:{line:8,column:2},end:{line:8,column:25}},1:{start:{line:8,column:16},end:{line:8,column:25}},2:{start:{line:9,column:2},end:{line:9,column:25}},3:{start:{line:9,column:16},end:{line:9,column:25}},4:{start:{line:10,column:2},end:{line:10,column:23}},5:{start:{line:13,column:19},end:{line:13,column:40}},6:{start:{line:14,column:2},end:{line:16,column:3}},7:{start:{line:15,column:4},end:{line:15,column:13}},8:{start:{line:17,column:2},end:{line:23,column:3}},9:{start:{line:18,column:4},end:{line:18,column:16}},10:{start:{line:19,column:9},end:{line:23,column:3}},11:{start:{line:20,column:4},end:{line:20,column:17}},12:{start:{line:22,column:4},end:{line:22,column:13}},13:{start:{line:26,column:2},end:{line:26,column:21}},14:{start:{line:27,column:2},end:{line:27,column:22}},15:{start:{line:28,column:2},end:{line:28,column:11}},16:{start:{line:31,column:24},end:{line:33,column:3}},17:{start:{line:35,column:20},end:{line:35,column:76}},18:{start:{line:36,column:4},end:{line:40,column:5}},19:{start:{line:37,column:6},end:{line:37,column:43}},20:{start:{line:38,column:11},end:{line:40,column:5}},21:{start:{line:39,column:6},end:{line:39,column:47}},22:{start:{line:41,column:4},end:{line:41,column:35}},23:{start:{line:44,column:14},end:{line:44,column:31}},24:{start:{line:45,column:21},end:{line:45,column:25}},25:{start:{line:46,column:25},end:{line:46,column:29}},26:{start:{line:47,column:23},end:{line:47,column:33}},27:{start:{line:48,column:4},end:{line:75,column:9}},28:{start:{line:54,column:72},end:{line:54,column:92}},29:{start:{line:55,column:41},end:{line:55,column:104}},30:{start:{line:63,column:37},end:{line:63,column:100}},31:{start:{line:72,column:27},end:{line:72,column:89}}},fnMap:{0:{name:"tryParseInt",decl:{start:{line:7,column:9},end:{line:7,column:20}},loc:{start:{line:7,column:24},end:{line:11,column:1}},line:7},1:{name:"tryParseBool",decl:{start:{line:12,column:9},end:{line:12,column:21}},loc:{start:{line:12,column:25},end:{line:24,column:1}},line:12},2:{name:"parseFilter",decl:{start:{line:25,column:9},end:{line:25,column:20}},loc:{start:{line:25,column:24},end:{line:29,column:1}},line:25},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:58},end:{line:42,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:11},end:{line:76,column:3}},line:43},5:{name:"(anonymous_5)",decl:{start:{line:54,column:58},end:{line:54,column:59}},loc:{start:{line:54,column:72},end:{line:54,column:92}},line:54},6:{name:"(anonymous_6)",decl:{start:{line:55,column:20},end:{line:55,column:21}},loc:{start:{line:55,column:41},end:{line:55,column:104}},line:55},7:{name:"(anonymous_7)",decl:{start:{line:63,column:20},end:{line:63,column:21}},loc:{start:{line:63,column:37},end:{line:63,column:100}},line:63},8:{name:"(anonymous_8)",decl:{start:{line:72,column:20},end:{line:72,column:21}},loc:{start:{line:72,column:27},end:{line:72,column:89}},line:72}},branchMap:{0:{loc:{start:{line:8,column:2},end:{line:8,column:25}},type:"if",locations:[{start:{line:8,column:2},end:{line:8,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:8},1:{loc:{start:{line:9,column:2},end:{line:9,column:25}},type:"if",locations:[{start:{line:9,column:2},end:{line:9,column:25}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},2:{loc:{start:{line:14,column:2},end:{line:16,column:3}},type:"if",locations:[{start:{line:14,column:2},end:{line:16,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:14},3:{loc:{start:{line:17,column:2},end:{line:23,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:23,column:3}},{start:{line:19,column:9},end:{line:23,column:3}}],line:17},4:{loc:{start:{line:19,column:9},end:{line:23,column:3}},type:"if",locations:[{start:{line:19,column:9},end:{line:23,column:3}},{start:{line:21,column:9},end:{line:23,column:3}}],line:19},5:{loc:{start:{line:36,column:4},end:{line:40,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:40,column:5}},{start:{line:38,column:11},end:{line:40,column:5}}],line:36},6:{loc:{start:{line:36,column:8},end:{line:36,column:49}},type:"binary-expr",locations:[{start:{line:36,column:8},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:49}}],line:36},7:{loc:{start:{line:38,column:11},end:{line:40,column:5}},type:"if",locations:[{start:{line:38,column:11},end:{line:40,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},8:{loc:{start:{line:67,column:6},end:{line:74,column:10}},type:"binary-expr",locations:[{start:{line:67,column:6},end:{line:67,column:27}},{start:{line:67,column:47},end:{line:74,column:10}}],line:67}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SingleFilterEditor.tsx"],names:[],mappings:"AA+DW,SAEH,KAFG;AA/DX,OAAO,WAAW;AAElB,SAAQ,sBAAqB;AAC7B,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AAExB,SAAS,YAAY,GAAoB;AACvC,MAAI,MAAM,GAAI,QAAO;AACrB,MAAI,MAAM,CAAW,EAAG,QAAO;AAC/B,SAAO,WAAW,CAAW;AAC/B;AAEA,SAAS,aAAa,GAAqB;AACzC,QAAM,WAAY,OAAO,MAAO;AAChC,MAAG,CAAC,UAAU;AACZ,WAAO;AAAA,EACT;AAEA,MAAG,EAAE,MAAM,cAAc,GAAG;AAC1B,WAAO;AAAA,EACT,WACQ,EAAE,MAAM,eAAe,GAAG;AAChC,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,YAAY,GAA8B;AACjD,MAAI,YAAY,CAAQ;AACxB,MAAI,aAAa,CAAQ;AACzB,SAAO;AACT;AAQA,qBAAqB,2BAA2B,MAAM,UAAmC;AAAA,EACvF,OAAO,eAAe;AAAA,IACpB,YAAY,CAAC;AAAA,EACf;AAAA,EAEA,oBAAoB,UAAkB,cAAsB,YAAsB;AAChF,QAAI,YAAY,CAAC,UAAU,cAAc,GAAG,WAAW,IAAI,WAAW,CAAC;AACvE,QAAG,aAAa,SAAS,aAAa,QAAQ;AAC5C,kBAAY,CAAC,UAAU,YAAY;AAAA,IACrC,WAAU,WAAW,WAAW,GAAG;AACjC,kBAAY,CAAC,UAAU,cAAc,EAAE;AAAA,IACzC;AACA,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,WAAW,EAAE,CAAC;AACpB,UAAM,eAAe,EAAE,CAAC;AACxB,UAAM,aAAa,EAAE,MAAM,CAAC;AAE5B,WAAO,qBAAC,SAAI,WAAU,iCACpB;AAAA,0BAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,SAAS,OAAO,KAAK,KAAK,MAAM,UAAW,EAAE,IAAI,cAAY,CAAC,UAAU,QAAQ,CAAC;AAAA,UACjF,UAAU,CAAC,oBAA4B,KAAK,oBAAoB,UAAU,iBAAiB,UAAU;AAAA;AAAA,MACvG,GACF;AAAA,MACA,oBAAC,SAAI,WAAU,mCACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO;AAAA,UACP,UAAU,CAAC,gBAAwB,KAAK,oBAAoB,aAAa,cAAc,UAAU;AAAA,UACjG,SAAS;AAAA;AAAA,MACX,GACF;AAAA,MACC,WAAW,SAAS,KACrB,oBAAC,SAAI,WAAU,+BACb;AAAA,QAAC;AAAA;AAAA,UACC,cAAW;AAAA,UACX,OAAO,WAAW,KAAK,GAAG;AAAA,UAC1B,UAAU,CAAC,MAAc,KAAK,oBAAoB,UAAU,cAAc,EAAE,MAAM,GAAG,CAAC;AAAA;AAAA,MACxF,GACF;AAAA,OAEF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d18e3b448d830733ac17bcacd45f7c08e364baa2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Mi=function(){return l},l}Mi();function xoe(n){return Mi().f[0]++,Mi().s[0]++,n===""?(Mi().b[0][0]++,Mi().s[1]++,n):(Mi().b[0][1]++,Mi().s[2]++,isNaN(n)?(Mi().b[1][0]++,Mi().s[3]++,n):(Mi().b[1][1]++,Mi().s[4]++,parseFloat(n)))}function Moe(n){Mi().f[1]++;const e=(Mi().s[5]++,typeof n=="string");if(Mi().s[6]++,e)Mi().b[2][1]++;else return Mi().b[2][0]++,Mi().s[7]++,n;return Mi().s[8]++,n.match(/^\s*true\s*$/)?(Mi().b[3][0]++,Mi().s[9]++,!0):(Mi().b[3][1]++,Mi().s[10]++,n.match(/^\s*false\s*$/)?(Mi().b[4][0]++,Mi().s[11]++,!1):(Mi().b[4][1]++,Mi().s[12]++,n))}function woe(n){return Mi().f[2]++,Mi().s[13]++,n=xoe(n),Mi().s[14]++,n=Moe(n),Mi().s[15]++,n}class Rz extends sr.Component{onFilterPartChanged(e,t,r){Mi().f[3]++;let i=(Mi().s[17]++,[e,t,...r.map(woe)]);Mi().s[18]++,Mi().b[6][0]++,e==="has"||(Mi().b[6][1]++,e==="!has")?(Mi().b[5][0]++,Mi().s[19]++,i=[e,t]):(Mi().b[5][1]++,Mi().s[20]++,r.length===0?(Mi().b[7][0]++,Mi().s[21]++,i=[e,t,""]):Mi().b[7][1]++),Mi().s[22]++,this.props.onChange(i)}render(){Mi().f[4]++;const e=(Mi().s[23]++,this.props.filter),t=(Mi().s[24]++,e[0]),r=(Mi().s[25]++,e[1]),i=(Mi().s[26]++,e.slice(2));return Mi().s[27]++,le.jsxs("div",{className:"maputnik-filter-editor-single",children:[le.jsx("div",{className:"maputnik-filter-editor-property",children:le.jsx(Ly,{"aria-label":"key",value:r,options:Object.keys(this.props.properties).map(s=>(Mi().f[5]++,Mi().s[28]++,[s,s])),onChange:s=>(Mi().f[6]++,Mi().s[29]++,this.onFilterPartChanged(t,s,i))})}),le.jsx("div",{className:"maputnik-filter-editor-operator",children:le.jsx(Qg,{"aria-label":"function",value:t,onChange:s=>(Mi().f[7]++,Mi().s[30]++,this.onFilterPartChanged(s,r,i)),options:boe})}),(Mi().b[8][0]++,i.length>0&&(Mi().b[8][1]++,le.jsx("div",{className:"maputnik-filter-editor-args",children:le.jsx(Pf,{"aria-label":"value",value:i.join(","),onChange:s=>(Mi().f[8]++,Mi().s[31]++,this.onFilterPartChanged(t,r,s.split(",")))})})))]})}}Pn(Rz,"defaultProps",(Mi().s[16]++,{properties:{}}));function uy(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",e="13a2e2db8b749f303c3bce9d46fec729506d3ee2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:20,column:9}},2:{start:{line:23,column:26},end:{line:23,column:70}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:21,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditorBlock.tsx"],names:[],mappings:"AAYW,SACL,KADK;AAZX,OAAO,WAAkC;AACzC,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAMjD,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,gCACpB;AAAA,0BAAC,SAAI,WAAU,wCACZ,eAAK,MAAM,UACd;AAAA,MACA,oBAAC,SAAI,WAAU,uCACb;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,qBAAqB;AAAA,UAE9B,8BAAC,YAAS;AAAA;AAAA,MACZ,GACF;AAAA,OACF;AAAA,EACF;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"13a2e2db8b749f303c3bce9d46fec729506d3ee2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return uy=function(){return l},l}uy();class Soe extends sr.Component{render(){uy().f[0]++;const e=(uy().s[0]++,this.props.t);return uy().s[1]++,le.jsxs("div",{className:"maputnik-filter-editor-block",children:[le.jsx("div",{className:"maputnik-filter-editor-block-content",children:this.props.children}),le.jsx("div",{className:"maputnik-filter-editor-block-action",children:le.jsx(il,{className:"maputnik-delete-filter",onClick:this.props.onDelete,title:e("Delete filter block"),children:le.jsx(Ty,{})})})]})}}const Eoe=(uy().s[2]++,Ws()(Soe));var A5,ek;function Boe(){if(ek)return A5;ek=1;var n="[object Symbol]",e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe23",r="\\u20d0-\\u20f0",i="\\ufe0e\\ufe0f",s="["+e+"]",l="["+t+r+"]",o="\\ud83c[\\udffb-\\udfff]",p="(?:"+l+"|"+o+")",v="[^"+e+"]",x="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",T="\\u200d",P=p+"?",U="["+i+"]?",j="(?:"+T+"(?:"+[v,x,B].join("|")+")"+U+P+")*",N=U+P+j,q="(?:"+[v+l+"?",l,x,B,s].join("|")+")",H=RegExp(o+"(?="+o+")|"+q+N,"g"),oe=RegExp("["+T+e+t+r+i+"]"),te=typeof window=="object"&&window&&window.Object===Object&&window,V=typeof self=="object"&&self&&self.Object===Object&&self,ne=te||V||Function("return this")();function W(yt){return yt.split("")}function ie(yt){return oe.test(yt)}function he(yt){return ie(yt)?fe(yt):W(yt)}function fe(yt){return yt.match(H)||[]}var Ee=Object.prototype,me=Ee.toString,Me=ne.Symbol,De=Me?Me.prototype:void 0,xe=De?De.toString:void 0;function At(yt,Ft,Tt){var Le=-1,Pe=yt.length;Ft<0&&(Ft=-Ft>Pe?0:Pe+Ft),Tt=Tt>Pe?Pe:Tt,Tt<0&&(Tt+=Pe),Pe=Ft>Tt?0:Tt-Ft>>>0,Ft>>>=0;for(var Be=Array(Pe);++Le<Pe;)Be[Le]=yt[Le+Ft];return Be}function Ze(yt){if(typeof yt=="string")return yt;if(Re(yt))return xe?xe.call(yt):"";var Ft=yt+"";return Ft=="0"&&1/yt==-1/0?"-0":Ft}function Xe(yt,Ft,Tt){var Le=yt.length;return Tt=Tt===void 0?Le:Tt,!Ft&&Tt>=Le?yt:At(yt,Ft,Tt)}function Ne(yt){return function(Ft){Ft=He(Ft);var Tt=ie(Ft)?he(Ft):void 0,Le=Tt?Tt[0]:Ft.charAt(0),Pe=Tt?Xe(Tt,1).join(""):Ft.slice(1);return Le[yt]()+Pe}}function Se(yt){return!!yt&&typeof yt=="object"}function Re(yt){return typeof yt=="symbol"||Se(yt)&&me.call(yt)==n}function He(yt){return yt==null?"":Ze(yt)}function _t(yt){return Gt(He(yt).toLowerCase())}var Gt=Ne("toUpperCase");return A5=_t,A5}var Ooe=Boe();const OO=yl(Ooe);function Dp(){var n="/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",e="8b86d889d32efa9a6cc667b2fa3579002dfb58fc",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts",statementMap:{0:{start:{line:4,column:16},end:{line:4,column:36}},1:{start:{line:5,column:2},end:{line:9,column:3}},2:{start:{line:6,column:4},end:{line:6,column:52}},3:{start:{line:8,column:4},end:{line:8,column:22}},4:{start:{line:10,column:2},end:{line:10,column:27}}},fnMap:{0:{name:"labelFromFieldName",decl:{start:{line:2,column:24},end:{line:2,column:42}},loc:{start:{line:2,column:54},end:{line:11,column:1}},line:2}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/label-from-field-name.ts"],names:[],mappings:"AAAA,OAAO,gBAAgB;AAEvB,wBAAwB,mBAAmB,WAAmB;AAC5D,MAAI;AACJ,QAAM,QAAQ,UAAU,MAAM,GAAG;AACjC,MAAI,MAAM,SAAS,GAAG;AACpB,YAAQ,UAAU,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;AAAA,EAChD,OACK;AACH,YAAQ;AAAA,EACV;AACA,SAAO,WAAW,KAAK;AACzB;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8b86d889d32efa9a6cc667b2fa3579002dfb58fc"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Dp=function(){return l},l}Dp();function Wx(n){Dp().f[0]++;let e;const t=(Dp().s[0]++,n.split("-"));return Dp().s[1]++,t.length>1?(Dp().b[0][0]++,Dp().s[2]++,e=n.split("-").slice(1).join(" ")):(Dp().b[0][1]++,Dp().s[3]++,e=n),Dp().s[4]++,OO(e)}function _o(){var n="/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",e="550aede3b5713892add5bda71ec153770e1b1129",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx",statementMap:{0:{start:{line:11,column:24},end:{line:17,column:3}},1:{start:{line:19,column:4},end:{line:19,column:17}},2:{start:{line:20,column:4},end:{line:22,column:6}},3:{start:{line:24,column:18},end:{line:28,column:3}},4:{start:{line:25,column:4},end:{line:27,column:7}},5:{start:{line:29,column:16},end:{line:33,column:3}},6:{start:{line:30,column:4},end:{line:32,column:7}},7:{start:{line:35,column:64},end:{line:35,column:74}},8:{start:{line:36,column:26},end:{line:36,column:36}},9:{start:{line:37,column:25},end:{line:37,column:52}},10:{start:{line:38,column:42},end:{line:60,column:8}},11:{start:{line:61,column:21},end:{line:61,column:83}},12:{start:{line:62,column:23},end:{line:62,column:39}},13:{start:{line:63,column:26},end:{line:63,column:40}},14:{start:{line:64,column:24},end:{line:64,column:26}},15:{start:{line:66,column:6},end:{line:66,column:65}},16:{start:{line:68,column:4},end:{line:79,column:5}},17:{start:{line:69,column:6},end:{line:69,column:52}},18:{start:{line:71,column:6},end:{line:75,column:9}},19:{start:{line:72,column:8},end:{line:72,column:45}},20:{start:{line:74,column:8},end:{line:74,column:39}},21:{start:{line:76,column:6},end:{line:78,column:7}},22:{start:{line:77,column:8},end:{line:77,column:37}},23:{start:{line:80,column:4},end:{line:110,column:6}},24:{start:{line:113,column:27},end:{line:113,column:72}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:14,column:5}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:15,column:12},end:{line:15,column:13}},loc:{start:{line:15,column:18},end:{line:16,column:5}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:21},end:{line:23,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:24,column:18},end:{line:24,column:19}},loc:{start:{line:24,column:28},end:{line:28,column:3}},line:24},4:{name:"(anonymous_4)",decl:{start:{line:29,column:16},end:{line:29,column:17}},loc:{start:{line:29,column:22},end:{line:33,column:3}},line:29},5:{name:"(anonymous_5)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:11},end:{line:111,column:3}},line:34},6:{name:"getValue",decl:{start:{line:65,column:13},end:{line:65,column:21}},loc:{start:{line:65,column:28},end:{line:67,column:5}},line:65},7:{name:"(anonymous_7)",decl:{start:{line:71,column:36},end:{line:71,column:37}},loc:{start:{line:71,column:55},end:{line:73,column:7}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:73,column:17},end:{line:73,column:18}},loc:{start:{line:73,column:36},end:{line:75,column:7}},line:73}},branchMap:{0:{loc:{start:{line:37,column:25},end:{line:37,column:52}},type:"cond-expr",locations:[{start:{line:37,column:35},end:{line:37,column:45}},{start:{line:37,column:48},end:{line:37,column:52}}],line:37},1:{loc:{start:{line:39,column:6},end:{line:49,column:7}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:23}},{start:{line:39,column:43},end:{line:49,column:7}}],line:39},2:{loc:{start:{line:61,column:21},end:{line:61,column:83}},type:"cond-expr",locations:[{start:{line:61,column:44},end:{line:61,column:53}},{start:{line:61,column:56},end:{line:61,column:83}}],line:61},3:{loc:{start:{line:68,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:79,column:5}},{start:{line:70,column:11},end:{line:79,column:5}}],line:68},4:{loc:{start:{line:76,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:76,column:6},end:{line:78,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ExpressionProperty.tsx"],names:[],mappings:"AA6DM,mBASM,KATN;AA7DN,OAAO,WAAW;AAClB,SAAQ,UAAU,cAAa;AAC/B,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,wBAAwB;AAC/B,OAAO,eAAe;AAqBtB,MAAM,mCAAmC,MAAM,UAAoE;AAAA,EACjH,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,IACT,SAAS,MAAM;AAAA,IAAC;AAAA,IAChB,QAAQ,MAAM;AAAA,IAAC;AAAA,EACjB;AAAA,EAEA,YAAY,OAAwC;AAClD,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,SAAgB;AAC/B,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,MAAM;AAClB,SAAK,SAAS;AAAA,MACZ,WAAW;AAAA,IACb,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,QAAQ,WAAW,WAAW,OAAO,QAAO,IAAI,KAAK;AAC/D,UAAM,EAAC,UAAS,IAAI,KAAK;AACzB,UAAM,eAAe,UAAU,CAAC,QAAQ,IAAI;AAE5C,UAAM,gBACJ,iCACG;AAAA,WAAK,MAAM,UACV;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,UAAU;AAAA,UACV,WAAU;AAAA,UACV,OAAO,EAAE,wBAAwB;AAAA,UAEjC,8BAAC,UAAO;AAAA;AAAA,QANJ;AAAA,MAON;AAAA,MAEF;AAAA,QAAC;AAAA;AAAA,UAEC,SAAS,KAAK,MAAM;AAAA,UACpB,WAAU;AAAA,UACV,OAAO,EAAE,mBAAmB;AAAA,UAE5B,8BAAC,YAAS;AAAA;AAAA,QALN;AAAA,MAMN;AAAA,OACF;AAGF,UAAM,WAAW,cAAc,SAAY,YAAY,GAAG,SAAS,IAAI,SAAS;AAEhF,UAAM,aAAa,OAAQ,QAAQ;AACnC,UAAM,gBAAgB,GAAG,QAAQ;AACjC,UAAM,cAAc,CAAC;AAErB,aAAS,SAAS,MAAW;AAC3B,aAAO,gBAAgB,MAAM,EAAC,QAAQ,GAAG,WAAW,GAAE,CAAC;AAAA,IACzD;AAEA,QAAI,WAAW;AACb,kBAAY,KAAK,EAAC,SAAS,eAAc,CAAC;AAAA,IAC5C,OACK;AACH,aAAO,QAAQ,MAAO,EACnB,OAAO,CAAC,CAAC,KAAK,MAAM,MAAM;AACzB,eAAO,IAAI,WAAW,aAAa;AAAA,MACrC,CAAC,EACA,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC1B,eAAO,YAAY,KAAK,KAAK;AAAA,MAC/B,CAAC;AAEH,UAAI,YAAY;AACd,oBAAY,KAAK,UAAU;AAAA,MAC7B;AAAA,IACF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAEN,OAAO;AAAA,QACP,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,EAAE,mBAAmB,KAAK,MAAM,SAAS,CAAC;AAAA,QACjD,QAAQ;AAAA,QACR,UAAU;AAAA,QAEV;AAAA,UAAC;AAAA;AAAA,YACC,MAAM,EAAC,MAAM,MAAK;AAAA,YAClB,MAAM;AAAA,cACJ,SAAS;AAAA,cACT,MAAM,KAAK,MAAM;AAAA,YACnB;AAAA,YACA,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,QAAQ,KAAK,MAAM;AAAA,YACnB,eAAe,KAAK;AAAA,YACpB,aAAa,KAAK;AAAA,YAClB,OAAO;AAAA,YACP,aAAa;AAAA,YACb,WAAW;AAAA,YACX,cAAc;AAAA,YACd;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,qBAAqB,gBAAgB,EAAE,0BAA0B;AACvE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"550aede3b5713892add5bda71ec153770e1b1129"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _o=function(){return l},l}_o();class Dz extends sr.Component{constructor(t){_o().f[2]++,_o().s[1]++;super(t);Pn(this,"onJSONInvalid",(_o().s[3]++,t=>{_o().f[3]++,_o().s[4]++,this.setState({jsonError:!0})}));Pn(this,"onJSONValid",(_o().s[5]++,()=>{_o().f[4]++,_o().s[6]++,this.setState({jsonError:!1})}));_o().s[2]++,this.state={jsonError:!1}}render(){_o().f[5]++;const{t,errors:r,fieldName:i,fieldType:s,value:l,canUndo:o}=(_o().s[7]++,this.props),{jsonError:p}=(_o().s[8]++,this.state),v=(_o().s[9]++,o?(_o().b[0][0]++,!o()):(_o().b[0][1]++,!0)),x=(_o().s[10]++,le.jsxs(le.Fragment,{children:[(_o().b[1][0]++,this.props.onUndo&&(_o().b[1][1]++,le.jsx(il,{onClick:this.props.onUndo,disabled:v,className:"maputnik-delete-stop",title:t("Revert from expression"),children:le.jsx(WV,{})},"undo_action"))),le.jsx(il,{onClick:this.props.onDelete,className:"maputnik-delete-stop",title:t("Delete expression"),children:le.jsx(Ty,{})},"delete_action")]})),B=(_o().s[11]++,s===void 0?(_o().b[2][0]++,i):(_o().b[2][1]++,`${s}.${i}`)),T=(_o().s[12]++,r[B]),P=(_o().s[13]++,`${B}[`),U=(_o().s[14]++,[]);function j(N){return _o().f[6]++,_o().s[15]++,Tz(N,{indent:2,maxLength:38})}return _o().s[16]++,p?(_o().b[3][0]++,_o().s[17]++,U.push({message:"Invalid JSON"})):(_o().b[3][1]++,_o().s[18]++,Object.entries(r).filter(([N,q])=>(_o().f[7]++,_o().s[19]++,N.startsWith(P))).forEach(([N,q])=>(_o().f[8]++,_o().s[20]++,U.push(q))),_o().s[21]++,T?(_o().b[4][0]++,_o().s[22]++,U.push(T)):_o().b[4][1]++),_o().s[23]++,le.jsx(pa,{error:U,fieldSpec:this.props.fieldSpec,label:t(Wx(this.props.fieldName)),action:x,wideMode:!0,children:le.jsx(SO,{mode:{name:"mgl"},lint:{context:"expression",spec:this.props.fieldSpec},className:"maputnik-expression-editor",onFocus:this.props.onFocus,onBlur:this.props.onBlur,onJSONInvalid:this.onJSONInvalid,onJSONValid:this.onJSONValid,layer:l,lineNumbers:!1,maxHeight:200,lineWrapping:!0,getValue:j,onChange:this.props.onChange})})}}Pn(Dz,"defaultProps",(_o().s[0]++,{errors:{},onFocus:()=>{_o().f[0]++},onBlur:()=>{_o().f[1]++}}));const Fz=(_o().s[24]++,Ws()(Dz));function Un(){var n="/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",e="10bf63b3f71adfa5066d0aecd6eaecbe45ada76f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx",statementMap:{0:{start:{line:17,column:17},end:{line:17,column:40}},1:{start:{line:18,column:2},end:{line:20,column:3}},2:{start:{line:19,column:4},end:{line:19,column:18}},3:{start:{line:21,column:20},end:{line:21,column:29}},4:{start:{line:22,column:16},end:{line:22,column:31}},5:{start:{line:23,column:2},end:{line:26,column:3}},6:{start:{line:24,column:4},end:{line:24,column:24}},7:{start:{line:25,column:4},end:{line:25,column:32}},8:{start:{line:27,column:2},end:{line:27,column:35}},9:{start:{line:30,column:2},end:{line:30,column:65}},10:{start:{line:33,column:2},end:{line:54,column:4}},11:{start:{line:56,column:19},end:{line:60,column:1}},12:{start:{line:62,column:2},end:{line:64,column:3}},13:{start:{line:63,column:4},end:{line:63,column:16}},14:{start:{line:65,column:21},end:{line:65,column:42}},15:{start:{line:66,column:2},end:{line:66,column:38}},16:{start:{line:69,column:2},end:{line:69,column:52}},17:{start:{line:72,column:2},end:{line:74,column:3}},18:{start:{line:73,column:4},end:{line:73,column:97}},19:{start:{line:73,column:38},end:{line:73,column:59}},20:{start:{line:73,column:75},end:{line:73,column:84}},21:{start:{line:75,column:2},end:{line:75,column:15}},22:{start:{line:78,column:24},end:{line:80,column:3}},23:{start:{line:82,column:4},end:{line:82,column:17}},24:{start:{line:83,column:4},end:{line:86,column:6}},25:{start:{line:90,column:22},end:{line:90,column:58}},26:{start:{line:91,column:4},end:{line:91,column:35}},27:{start:{line:92,column:4},end:{line:92,column:35}},28:{start:{line:95,column:22},end:{line:95,column:58}},29:{start:{line:96,column:4},end:{line:96,column:39}},30:{start:{line:97,column:4},end:{line:97,column:35}},31:{start:{line:99,column:18},end:{line:103,column:3}},32:{start:{line:100,column:26},end:{line:100,column:62}},33:{start:{line:101,column:4},end:{line:101,column:43}},34:{start:{line:102,column:4},end:{line:102,column:39}},35:{start:{line:104,column:16},end:{line:108,column:3}},36:{start:{line:105,column:4},end:{line:107,column:7}},37:{start:{line:109,column:15},end:{line:113,column:3}},38:{start:{line:110,column:4},end:{line:112,column:7}},39:{start:{line:114,column:19},end:{line:120,column:3}},40:{start:{line:115,column:19},end:{line:115,column:46}},41:{start:{line:116,column:4},end:{line:116,column:47}},42:{start:{line:117,column:4},end:{line:119,column:7}},43:{start:{line:122,column:32},end:{line:122,column:75}},44:{start:{line:123,column:4},end:{line:136,column:5}},45:{start:{line:124,column:6},end:{line:127,column:8}},46:{start:{line:128,column:11},end:{line:136,column:5}},47:{start:{line:129,column:6},end:{line:131,column:8}},48:{start:{line:133,column:6},end:{line:135,column:8}},49:{start:{line:139,column:26},end:{line:139,column:36}},50:{start:{line:140,column:36},end:{line:140,column:46}},51:{start:{line:141,column:22},end:{line:143,column:5}},52:{start:{line:144,column:26},end:{line:144,column:33}},53:{start:{line:145,column:36},end:{line:145,column:112}},54:{start:{line:146,column:4},end:{line:271,column:5}},55:{start:{line:147,column:6},end:{line:160,column:11}},56:{start:{line:161,column:11},end:{line:271,column:5}},57:{start:{line:162,column:21},end:{line:162,column:48}},58:{start:{line:163,column:26},end:{line:163,column:35}},59:{start:{line:164,column:22},end:{line:164,column:37}},60:{start:{line:165,column:38},end:{line:173,column:10}},61:{start:{line:174,column:27},end:{line:187,column:8}},62:{start:{line:175,column:22},end:{line:175,column:50}},63:{start:{line:176,column:8},end:{line:186,column:29}},64:{start:{line:188,column:6},end:{line:240,column:11}},65:{start:{line:199,column:33},end:{line:199,column:63}},66:{start:{line:242,column:25},end:{line:242,column:35}},67:{start:{line:243,column:6},end:{line:270,column:11}},68:{start:{line:248,column:14},end:{line:248,column:59}},69:{start:{line:249,column:14},end:{line:249,column:49}},70:{start:{line:274,column:21},end:{line:274,column:60}}},fnMap:{0:{name:"combiningFilter",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:32},end:{line:28,column:1}},line:16},1:{name:"migrateFilter",decl:{start:{line:29,column:9},end:{line:29,column:22}},loc:{start:{line:29,column:31},end:{line:31,column:1}},line:29},2:{name:"createStyleFromFilter",decl:{start:{line:32,column:9},end:{line:32,column:30}},loc:{start:{line:32,column:39},end:{line:55,column:1}},line:32},3:{name:"checkIfSimpleFilter",decl:{start:{line:61,column:9},end:{line:61,column:28}},loc:{start:{line:61,column:37},end:{line:67,column:1}},line:61},4:{name:"hasCombiningFilter",decl:{start:{line:68,column:9},end:{line:68,column:27}},loc:{start:{line:68,column:36},end:{line:70,column:1}},line:68},5:{name:"hasNestedCombiningFilter",decl:{start:{line:71,column:9},end:{line:71,column:33}},loc:{start:{line:71,column:42},end:{line:76,column:1}},line:71},6:{name:"(anonymous_6)",decl:{start:{line:73,column:31},end:{line:73,column:32}},loc:{start:{line:73,column:38},end:{line:73,column:59}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:73,column:68},end:{line:73,column:69}},loc:{start:{line:73,column:75},end:{line:73,column:84}},line:73},8:{name:"(anonymous_8)",decl:{start:{line:81,column:2},end:{line:81,column:3}},loc:{start:{line:81,column:21},end:{line:87,column:3}},line:81},9:{name:"(anonymous_9)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:42},end:{line:93,column:3}},line:89},10:{name:"(anonymous_10)",decl:{start:{line:94,column:2},end:{line:94,column:3}},loc:{start:{line:94,column:30},end:{line:98,column:3}},line:94},11:{name:"(anonymous_11)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:24},end:{line:103,column:3}},line:99},12:{name:"(anonymous_12)",decl:{start:{line:104,column:16},end:{line:104,column:17}},loc:{start:{line:104,column:25},end:{line:108,column:3}},line:104},13:{name:"(anonymous_13)",decl:{start:{line:109,column:15},end:{line:109,column:16}},loc:{start:{line:109,column:21},end:{line:113,column:3}},line:109},14:{name:"(anonymous_14)",decl:{start:{line:114,column:19},end:{line:114,column:20}},loc:{start:{line:114,column:25},end:{line:120,column:3}},line:114},15:{name:"(anonymous_15)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:48},end:{line:137,column:3}},line:121},16:{name:"(anonymous_16)",decl:{start:{line:138,column:2},end:{line:138,column:3}},loc:{start:{line:138,column:11},end:{line:272,column:3}},line:138},17:{name:"(anonymous_17)",decl:{start:{line:174,column:39},end:{line:174,column:40}},loc:{start:{line:174,column:51},end:{line:187,column:7}},line:174},18:{name:"(anonymous_18)",decl:{start:{line:199,column:26},end:{line:199,column:27}},loc:{start:{line:199,column:33},end:{line:199,column:63}},line:199},19:{name:"(anonymous_19)",decl:{start:{line:247,column:22},end:{line:247,column:23}},loc:{start:{line:247,column:28},end:{line:250,column:13}},line:247}},branchMap:{0:{loc:{start:{line:17,column:17},end:{line:17,column:40}},type:"binary-expr",locations:[{start:{line:17,column:17},end:{line:17,column:29}},{start:{line:17,column:33},end:{line:17,column:40}}],line:17},1:{loc:{start:{line:18,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:18,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},2:{loc:{start:{line:23,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:23,column:2},end:{line:26,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},3:{loc:{start:{line:62,column:2},end:{line:64,column:3}},type:"if",locations:[{start:{line:62,column:2},end:{line:64,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},4:{loc:{start:{line:62,column:6},end:{line:62,column:59}},type:"binary-expr",locations:[{start:{line:62,column:6},end:{line:62,column:25}},{start:{line:62,column:29},end:{line:62,column:59}}],line:62},5:{loc:{start:{line:72,column:2},end:{line:74,column:3}},type:"if",locations:[{start:{line:72,column:2},end:{line:74,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},6:{loc:{start:{line:123,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:123,column:4},end:{line:136,column:5}},{start:{line:128,column:11},end:{line:136,column:5}}],line:123},7:{loc:{start:{line:123,column:8},end:{line:123,column:66}},type:"binary-expr",locations:[{start:{line:123,column:8},end:{line:123,column:28}},{start:{line:123,column:32},end:{line:123,column:66}}],line:123},8:{loc:{start:{line:128,column:11},end:{line:136,column:5}},type:"if",locations:[{start:{line:128,column:11},end:{line:136,column:5}},{start:{line:132,column:11},end:{line:136,column:5}}],line:128},9:{loc:{start:{line:128,column:15},end:{line:128,column:73}},type:"binary-expr",locations:[{start:{line:128,column:15},end:{line:128,column:34}},{start:{line:128,column:38},end:{line:128,column:73}}],line:128},10:{loc:{start:{line:145,column:36},end:{line:145,column:112}},type:"binary-expr",locations:[{start:{line:145,column:36},end:{line:145,column:55}},{start:{line:145,column:59},end:{line:145,column:112}}],line:145},11:{loc:{start:{line:146,column:4},end:{line:271,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:271,column:5}},{start:{line:161,column:11},end:{line:271,column:5}}],line:146},12:{loc:{start:{line:161,column:11},end:{line:271,column:5}},type:"if",locations:[{start:{line:161,column:11},end:{line:271,column:5}},{start:{line:241,column:11},end:{line:271,column:5}}],line:161},13:{loc:{start:{line:185,column:10},end:{line:185,column:119}},type:"binary-expr",locations:[{start:{line:185,column:10},end:{line:185,column:15}},{start:{line:185,column:35},end:{line:185,column:119}}],line:185},14:{loc:{start:{line:235,column:30},end:{line:235,column:62}},type:"cond-expr",locations:[{start:{line:235,column:51},end:{line:235,column:53}},{start:{line:235,column:56},end:{line:235,column:62}}],line:235},15:{loc:{start:{line:258,column:8},end:{line:269,column:12}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:38}},{start:{line:258,column:58},end:{line:269,column:12}}],line:258}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FilterEditor.tsx"],names:[],mappings:"AAgMQ,SAsDA,UAtDA,KAGA,YAHA;AAhMR,OAAO,WAAW;AAClB,SAAQ,4BAA2B;AACnC,SAAQ,eAAc;AAEtB,SAAQ,QAAQ,SAAS,qBAAoB;AAC7C,SAAQ,0BAAyB;AAEjC,SAAQ,0BAAyB;AACjC,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,wBAAwB;AAC/B,OAAO,uBAAuB;AAC9B,OAAO,iBAAiB;AACxB,OAAO,SAAS;AAChB,OAAO,wBAAwB;AAC/B,SAA0B,uBAAuB;AAGjD,SAAS,gBAAgB,OAAuF;AAC9G,QAAM,SAAS,MAAM,UAAU,CAAC,KAAK;AAErC,MAAI,CAAC,MAAM,QAAQ,MAAM,GAAG;AAC1B,WAAO;AAAA,EACT;AAEA,MAAI,cAAc,OAAO,CAAC;AAC1B,MAAI,UAAU,OAAO,MAAM,CAAC;AAE5B,MAAG,mBAAmB,QAAQ,WAAW,IAAI,GAAG;AAC9C,kBAAc;AACd,cAAU,CAAC,OAAO,MAAM,CAAC,CAAC;AAAA,EAC5B;AAEA,SAAO,CAAC,aAAa,GAAG,OAAO;AACjC;AAEA,SAAS,cAAc,QAA6D;AAElF,SAAQ,QAAQ,sBAAsB,MAAM,CAAQ,EAAE,OAAO,CAAC,EAAU;AAC1E;AAEA,SAAS,sBAAsB,QAAgG;AAC7H,SAAO;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,IACR,YAAY,EAAC,qBAAqB,SAAQ;AAAA,IAC1C,WAAW;AAAA,MACT,OAAO;AAAA,QACL,QAAQ;AAAA,QACR,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,IACA,UAAU;AAAA,IACV,UAAU;AAAA,IACV,UAAU;AAAA,MACR;AAAA,QACE,IAAI;AAAA,QACJ,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa;AAAA,EACjB;AAAA,EACA;AAAA,EACA;AACF;AAGA,SAAS,oBAAqB,QAA6D;AACzF,MAAI,OAAO,WAAW,KAAK,WAAW,SAAS,OAAO,CAAC,CAAC,GAAG;AACzD,WAAO;AAAA,EACT;AACA,QAAM,aAAa,cAAc,MAAM;AACvC,SAAO,CAAC,QAAQ,YAAY,MAAM;AACpC;AAEA,SAAS,mBAAmB,QAA6D;AACvF,SAAO,mBAAmB,QAAQ,OAAO,CAAC,CAAC,KAAK;AAClD;AAEA,SAAS,yBAAyB,QAA6D;AAC7F,MAAG,mBAAmB,MAAM,GAAG;AAC7B,WAAO,OAAO,MAAM,CAAC,EAAE,IAAI,OAAK,mBAAmB,CAAQ,CAAC,EAAE,OAAO,OAAK,KAAK,IAAI,EAAE,SAAS;AAAA,EAChG;AACA,SAAO;AACT;AAgBA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC,KAAK;AAAA,EAChB;AAAA,EAEA,YAAa,OAAkC;AAC7C,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,MACT,qBAAqB,oBAAoB,gBAAgB,KAAK,CAAC;AAAA,IACjE;AAAA,EACF;AAAA;AAAA,EAGA,oBAAoB,WAAmB,SAAgB;AACrD,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,SAAS,IAAI;AACvB,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,iBAAiB,WAAmB;AAClC,UAAM,YAAY,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACrD,cAAU,OAAO,YAAY,GAAG,CAAC;AACjC,SAAK,MAAM,SAAS,SAAS;AAAA,EAC/B;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,gBAAgB,gBAAgB,KAAK,KAAK,EAAE,MAAM,CAAC;AACzD,IAAC,cAAwB,KAAK,CAAC,MAAM,QAAQ,EAAE,CAAC;AAChD,SAAK,MAAM,SAAS,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,SAAK,MAAM,SAAS,cAAc,MAAM,CAAC;AACzC,SAAK,SAAS;AAAA,MACZ,qBAAqB;AAAA,IACvB,CAAC;AAAA,EACH;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,sBAAsB,oBAAoB,gBAAgB,KAAK,CAAC;AAGtE,QAAI,CAAC,uBAAuB,MAAM,wBAAwB,MAAM;AAC9D,aAAO;AAAA,QACL,qBAAqB;AAAA,QACrB,qBAAqB;AAAA,MACvB;AAAA,IACF,WACS,uBAAuB,MAAM,wBAAwB,OAAO;AACnE,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF,OACK;AACH,aAAO;AAAA,QACL,qBAAqB;AAAA,MACvB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,EAAC,IAAI,KAAK;AACzB,UAAM,EAAC,oBAAmB,IAAI,KAAK;AACnC,UAAM,YAAU;AAAA,MACd,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,IACjC;AACA,UAAM,gBAAgB,CAAC,KAAK;AAE5B,UAAM,0BAA0B,uBAAuB,yBAAyB,gBAAgB,KAAK,KAAK,CAAC;AAE3G,QAAI,yBAAyB;AAC3B,aAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,4BAAC,OACE,YAAE,mCAAmC,GACxC;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,SAAS,KAAK;AAAA,YACd,OAAO,EAAE,uBAAuB;AAAA,YAEhC;AAAA,kCAAC,SAAI,OAAO,EAAC,aAAa,SAAS,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAChG,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,cACC,EAAE,uBAAuB;AAAA;AAAA;AAAA,QAC5B;AAAA,SACF;AAAA,IACF,WACS,qBAAqB;AAC5B,YAAM,SAAS,gBAAgB,KAAK,KAAK;AACzC,YAAM,cAAc,OAAO,CAAC;AAC5B,YAAM,UAAU,OAAO,MAAM,CAAC;AAE9B,YAAM,UACJ,oBAAC,SACC;AAAA,QAAC;AAAA;AAAA,UACC,SAAS,KAAK;AAAA,UACd,OAAO,EAAE,uBAAuB;AAAA,UAChC,WAAU;AAAA,UAEV,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF,GACF;AAGF,YAAM,eAAe,QAAQ,IAAI,CAAC,GAAG,QAAQ;AAC3C,cAAM,QAAQ,OAAQ,UAAU,MAAI,CAAC,GAAG;AAExC,eACE,qBAAC,SACC;AAAA,8BAAC,qBAA4B,UAAU,KAAK,iBAAiB,KAAK,MAAM,GAAG,GACzE;AAAA,YAAC;AAAA;AAAA,cACC,YAAY,KAAK,MAAM;AAAA,cACvB,QAAQ;AAAA,cACR,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM,CAAC;AAAA;AAAA,UACvD,KALsB,GAMxB;AAAA,UACC,SACC,oBAAC,SAAgB,WAAU,yBAAyB,gBAAM,WAAjD,OAAyD;AAAA,aAT5D,SAAS,GAAG,EAWtB;AAAA,MAEJ,CAAC;AAGD,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YAEC;AAAA,YACA,OAAO,EAAE,QAAQ;AAAA,YACjB,QAAQ;AAAA,YAER;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,MAAqB,KAAK,oBAAoB,GAAG,CAAC;AAAA,gBAC7D,SAAS;AAAA,kBACP,CAAC,OAAO,EAAE,sBAAsB,CAAC;AAAA,kBACjC,CAAC,QAAQ,EAAE,mBAAmB,CAAC;AAAA,kBAC/B,CAAC,OAAO,EAAE,oBAAoB,CAAC;AAAA,gBACjC;AAAA;AAAA,YACF;AAAA;AAAA,UAbI;AAAA,QAcN;AAAA,QACC;AAAA,QACD;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YAEV;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,KAAK;AAAA,gBAEd;AAAA,sCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,kBAAM;AAAA,kBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,YACxB;AAAA;AAAA,UAXI;AAAA,QAYN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,WAAU;AAAA,YACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,YAEjD,8BAAC,OAAI,WAAsB;AAAA;AAAA,UAJvB;AAAA,QAKN;AAAA,SACF;AAAA,IAEJ,OACK;AACH,YAAM,EAAC,OAAM,IAAI,KAAK;AAEtB,aACE,iCACE;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,UAAU,MAAM;AACd,mBAAK,SAAS,EAAC,qBAAqB,KAAI,CAAC;AACzC,mBAAK,MAAM,SAAS,aAAa;AAAA,YACnC;AAAA,YACA,WAAU;AAAA,YACV;AAAA,YACA,OAAO;AAAA,YACP;AAAA,YACA,UAAU,KAAK,MAAM;AAAA;AAAA,QACvB;AAAA,QACC,KAAK,MAAM,uBACV,qBAAC,SAAI,WAAU,yBACZ;AAAA,YAAE,qCAAqC;AAAA,UACvC;AAAA,UACD;AAAA,YAAC;AAAA;AAAA,cACC,SAAS,KAAK;AAAA,cACd,WAAU;AAAA,cAET,YAAE,0BAA0B;AAAA;AAAA,UAC/B;AAAA,WACF;AAAA,SAEJ;AAAA,IAEJ;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10bf63b3f71adfa5066d0aecd6eaecbe45ada76f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Un=function(){return l},l}Un();function p0(n){Un().f[0]++;const e=(Un().s[0]++,Un().b[0][0]++,n.filter||(Un().b[0][1]++,["all"]));if(Un().s[1]++,Array.isArray(e))Un().b[1][1]++;else return Un().b[1][0]++,Un().s[2]++,e;let t=(Un().s[3]++,e[0]),r=(Un().s[4]++,e.slice(1));return Un().s[5]++,BO.indexOf(t)<0?(Un().b[2][0]++,Un().s[6]++,t="all",Un().s[7]++,r=[e.slice(0)]):Un().b[2][1]++,Un().s[8]++,[t,...r]}function Ioe(n){return Un().f[1]++,Un().s[9]++,Vq(koe(n)).layers[0].filter}function koe(n){return Un().f[2]++,Un().s[10]++,{id:"tmp",version:8,name:"Empty Style",metadata:{"maputnik:renderer":"mlgljs"},sources:{tmp:{type:"geojson",data:""}},sprite:"",glyphs:"https://orangemug.github.io/font-glyphs/glyphs/{fontstack}/{range}.pbf",layers:[{id:"tmp",type:"fill",source:"tmp",filter:n}]}}const Toe=(Un().s[11]++,["all","any","none"]);function tk(n){if(Un().f[3]++,Un().s[12]++,Un().b[4][0]++,n.length===1&&(Un().b[4][1]++,Toe.includes(n[0])))return Un().b[3][0]++,Un().s[13]++,!0;Un().b[3][1]++;const e=(Un().s[14]++,qv(n));return Un().s[15]++,!j2.isEqual(e,n)}function nk(n){return Un().f[4]++,Un().s[16]++,BO.indexOf(n[0])>=0}function Poe(n){return Un().f[5]++,Un().s[17]++,nk(n)?(Un().b[5][0]++,Un().s[18]++,n.slice(1).map(e=>(Un().f[6]++,Un().s[19]++,nk(e))).filter(e=>(Un().f[7]++,Un().s[20]++,e==!0)).length>0):(Un().b[5][1]++,Un().s[21]++,!1)}class Lz extends sr.Component{constructor(t){Un().f[8]++,Un().s[23]++;super(t);Pn(this,"addFilterItem",(Un().s[31]++,()=>{Un().f[11]++;const t=(Un().s[32]++,p0(this.props).slice(0));Un().s[33]++,t.push(["==","name",""]),Un().s[34]++,this.props.onChange(t)}));Pn(this,"onToggleDoc",(Un().s[35]++,t=>{Un().f[12]++,Un().s[36]++,this.setState({showDoc:t})}));Pn(this,"makeFilter",(Un().s[37]++,()=>{Un().f[13]++,Un().s[38]++,this.setState({displaySimpleFilter:!0})}));Pn(this,"makeExpression",(Un().s[39]++,()=>{Un().f[14]++;const t=(Un().s[40]++,p0(this.props));Un().s[41]++,this.props.onChange(Ioe(t)),Un().s[42]++,this.setState({displaySimpleFilter:!1})}));Un().s[24]++,this.state={showDoc:!1,displaySimpleFilter:tk(p0(t))}}onFilterPartChanged(t,r){Un().f[9]++;const i=(Un().s[25]++,p0(this.props).slice(0));Un().s[26]++,i[t]=r,Un().s[27]++,this.props.onChange(i)}deleteFilterItem(t){Un().f[10]++;const r=(Un().s[28]++,p0(this.props).slice(0));Un().s[29]++,r.splice(t+1,1),Un().s[30]++,this.props.onChange(r)}static getDerivedStateFromProps(t,r){Un().f[15]++;const i=(Un().s[43]++,tk(p0(t)));return Un().s[44]++,Un().b[7][0]++,!i&&(Un().b[7][1]++,r.displaySimpleFilter===!0)?(Un().b[6][0]++,Un().s[45]++,{displaySimpleFilter:!1,valueIsSimpleFilter:!1}):(Un().b[6][1]++,Un().s[46]++,Un().b[9][0]++,i&&(Un().b[9][1]++,r.displaySimpleFilter===!1)?(Un().b[8][0]++,Un().s[47]++,{valueIsSimpleFilter:!0}):(Un().b[8][1]++,Un().s[48]++,{valueIsSimpleFilter:!1}))}render(){Un().f[16]++;const{errors:t,t:r}=(Un().s[49]++,this.props),{displaySimpleFilter:i}=(Un().s[50]++,this.state),s=(Un().s[51]++,{doc:ks.layer.filter.doc+" Combine multiple filters together by using a compound filter."}),l=(Un().s[52]++,["all"]),o=(Un().s[53]++,Un().b[10][0]++,i&&(Un().b[10][1]++,Poe(p0(this.props))));if(Un().s[54]++,o)return Un().b[11][0]++,Un().s[55]++,le.jsxs("div",{className:"maputnik-filter-editor-unsupported",children:[le.jsx("p",{children:r("Nested filters are not supported.")}),le.jsxs(il,{onClick:this.makeExpression,title:r("Convert to expression"),children:[le.jsx("svg",{style:{marginRight:"0.2em",width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:kC})}),r("Upgrade to expression")]})]});if(Un().b[11][1]++,Un().s[56]++,i){Un().b[12][0]++;const p=(Un().s[57]++,p0(this.props)),v=(Un().s[58]++,p[0]),x=(Un().s[59]++,p.slice(1)),B=(Un().s[60]++,le.jsx("div",{children:le.jsx(il,{onClick:this.makeExpression,title:r("Convert to expression"),className:"maputnik-make-zoom-function",children:le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:kC})})})})),T=(Un().s[61]++,x.map((P,U)=>{Un().f[17]++;const j=(Un().s[62]++,t[`filter[${U+1}]`]);return Un().s[63]++,le.jsxs("div",{children:[le.jsx(Eoe,{onDelete:this.deleteFilterItem.bind(this,U),children:le.jsx(Rz,{properties:this.props.properties,filter:P,onChange:this.onFilterPartChanged.bind(this,U+1)})},U),(Un().b[13][0]++,j&&(Un().b[13][1]++,le.jsx("div",{className:"maputnik-inline-error",children:j.message},"error")))]},`block-${U}`)}));return Un().s[64]++,le.jsxs(le.Fragment,{children:[le.jsx(pa,{fieldSpec:s,label:r("Filter"),action:B,children:le.jsx(Qg,{value:v,onChange:P=>(Un().f[18]++,Un().s[65]++,this.onFilterPartChanged(0,P)),options:[["all",r("every filter matches")],["none",r("no filter matches")],["any",r("any filter matches")]]})},"top"),T,le.jsx("div",{className:"maputnik-filter-editor-add-wrapper",children:le.jsxs(il,{"data-wd-key":"layer-filter-button",className:"maputnik-add-filter",onClick:this.addFilterItem,children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:EO})})," ",r("Add filter")]})},"buttons"),le.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(Un().b[14][0]++,""):(Un().b[14][1]++,"none")},children:le.jsx(xO,{fieldSpec:s})},"doc")]})}else{Un().b[12][1]++;const{filter:p}=(Un().s[66]++,this.props);return Un().s[67]++,le.jsxs(le.Fragment,{children:[le.jsx(Fz,{onDelete:()=>{Un().f[19]++,Un().s[68]++,this.setState({displaySimpleFilter:!0}),Un().s[69]++,this.props.onChange(l)},fieldName:"filter",fieldSpec:s,value:p,errors:t,onChange:this.props.onChange}),(Un().b[15][0]++,this.state.valueIsSimpleFilter&&(Un().b[15][1]++,le.jsxs("div",{className:"maputnik-expr-infobox",children:[r("You've entered an old style filter.")," ",le.jsx("button",{onClick:this.makeFilter,className:"maputnik-expr-infobox__button",children:r("Switch to filter editor.")})]})))]})}}}Pn(Lz,"defaultProps",(Un().s[22]++,{filter:["all"]}));const Koe=(Un().s[70]++,Ws()(Lz));var b1={},ch={},x1={},c5,rk;function Uz(){if(rk)return c5;rk=1;var n=typeof window=="object"&&window&&window.Object===Object&&window;return c5=n,c5}var d5,ik;function _p(){if(ik)return d5;ik=1;var n=Uz(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return d5=t,d5}var h5,ok;function i_(){if(ok)return h5;ok=1;var n=_p(),e=n.Symbol;return h5=e,h5}var f5,sk;function Roe(){if(sk)return f5;sk=1;var n=i_(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(l){var o=t.call(l,i),p=l[i];try{l[i]=void 0;var v=!0}catch{}var x=r.call(l);return v&&(o?l[i]=p:delete l[i]),x}return f5=s,f5}var p5,ak;function Doe(){if(ak)return p5;ak=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return p5=t,p5}var m5,lk;function Yg(){if(lk)return m5;lk=1;var n=i_(),e=Roe(),t=Doe(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function l(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):t(o)}return m5=l,m5}var g5,uk;function Hh(){if(uk)return g5;uk=1;var n=Array.isArray;return g5=n,g5}var y5,Ak;function om(){if(Ak)return y5;Ak=1;function n(e){return e!=null&&typeof e=="object"}return y5=n,y5}var v5,ck;function Foe(){if(ck)return v5;ck=1;var n=Yg(),e=Hh(),t=om(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&n(s)==r}return v5=i,v5}var C5,dk;function Loe(){if(dk)return C5;dk=1;function n(e){return function(t,r,i){for(var s=-1,l=Object(t),o=i(t),p=o.length;p--;){var v=o[e?p:++s];if(r(l[v],v,l)===!1)break}return t}}return C5=n,C5}var _5,hk;function zz(){if(hk)return _5;hk=1;var n=Loe(),e=n();return _5=e,_5}var b5,fk;function Uoe(){if(fk)return b5;fk=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return b5=n,b5}var x5,pk;function zoe(){if(pk)return x5;pk=1;var n=Yg(),e=om(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return x5=r,x5}var M5,mk;function IO(){if(mk)return M5;mk=1;var n=zoe(),e=om(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(l){return e(l)&&r.call(l,"callee")&&!i.call(l,"callee")};return M5=s,M5}var Lv={exports:{}},w5,gk;function joe(){if(gk)return w5;gk=1;function n(){return!1}return w5=n,w5}Lv.exports;var yk;function Gx(){return yk||(yk=1,function(n,e){var t=_p(),r=joe(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,l=s&&s.exports===i,o=l?t.Buffer:void 0,p=o?o.isBuffer:void 0,v=p||r;n.exports=v}(Lv,Lv.exports)),Lv.exports}var S5,vk;function kO(){if(vk)return S5;vk=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return S5=t,S5}var E5,Ck;function TO(){if(Ck)return E5;Ck=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return E5=e,E5}var B5,_k;function Noe(){if(_k)return B5;_k=1;var n=Yg(),e=TO(),t=om(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",l="[object Date]",o="[object Error]",p="[object Function]",v="[object Map]",x="[object Number]",B="[object Object]",T="[object RegExp]",P="[object Set]",U="[object String]",j="[object WeakMap]",N="[object ArrayBuffer]",q="[object DataView]",H="[object Float32Array]",oe="[object Float64Array]",te="[object Int8Array]",V="[object Int16Array]",ne="[object Int32Array]",W="[object Uint8Array]",ie="[object Uint8ClampedArray]",he="[object Uint16Array]",fe="[object Uint32Array]",Ee={};Ee[H]=Ee[oe]=Ee[te]=Ee[V]=Ee[ne]=Ee[W]=Ee[ie]=Ee[he]=Ee[fe]=!0,Ee[r]=Ee[i]=Ee[N]=Ee[s]=Ee[q]=Ee[l]=Ee[o]=Ee[p]=Ee[v]=Ee[x]=Ee[B]=Ee[T]=Ee[P]=Ee[U]=Ee[j]=!1;function me(Me){return t(Me)&&e(Me.length)&&!!Ee[n(Me)]}return B5=me,B5}var O5,bk;function PO(){if(bk)return O5;bk=1;function n(e){return function(t){return e(t)}}return O5=n,O5}var Uv={exports:{}};Uv.exports;var xk;function KO(){return xk||(xk=1,function(n,e){var t=Uz(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,l=s&&t.process,o=function(){try{var p=i&&i.require&&i.require("util").types;return p||l&&l.binding&&l.binding("util")}catch{}}();n.exports=o}(Uv,Uv.exports)),Uv.exports}var I5,Mk;function RO(){if(Mk)return I5;Mk=1;var n=Noe(),e=PO(),t=KO(),r=t&&t.isTypedArray,i=r?e(r):n;return I5=i,I5}var k5,wk;function jz(){if(wk)return k5;wk=1;var n=Uoe(),e=IO(),t=Hh(),r=Gx(),i=kO(),s=RO(),l=Object.prototype,o=l.hasOwnProperty;function p(v,x){var B=t(v),T=!B&&e(v),P=!B&&!T&&r(v),U=!B&&!T&&!P&&s(v),j=B||T||P||U,N=j?n(v.length,String):[],q=N.length;for(var H in v)(x||o.call(v,H))&&!(j&&(H=="length"||P&&(H=="offset"||H=="parent")||U&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||i(H,q)))&&N.push(H);return N}return k5=p,k5}var T5,Sk;function DO(){if(Sk)return T5;Sk=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return T5=e,T5}var P5,Ek;function Nz(){if(Ek)return P5;Ek=1;function n(e,t){return function(r){return e(t(r))}}return P5=n,P5}var K5,Bk;function Woe(){if(Bk)return K5;Bk=1;var n=Nz(),e=n(Object.keys,Object);return K5=e,K5}var R5,Ok;function Goe(){if(Ok)return R5;Ok=1;var n=DO(),e=Woe(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var l=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&l.push(o);return l}return R5=i,R5}var D5,Ik;function Rf(){if(Ik)return D5;Ik=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return D5=n,D5}var F5,kk;function FO(){if(kk)return F5;kk=1;var n=Yg(),e=Rf(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function l(o){if(!e(o))return!1;var p=n(o);return p==r||p==i||p==t||p==s}return F5=l,F5}var L5,Tk;function Uy(){if(Tk)return L5;Tk=1;var n=FO(),e=TO();function t(r){return r!=null&&e(r.length)&&!n(r)}return L5=t,L5}var U5,Pk;function o_(){if(Pk)return U5;Pk=1;var n=jz(),e=Goe(),t=Uy();function r(i){return t(i)?n(i):e(i)}return U5=r,U5}var z5,Kk;function Wz(){if(Kk)return z5;Kk=1;var n=zz(),e=o_();function t(r,i){return r&&n(r,i,e)}return z5=t,z5}var j5,Rk;function Qx(){if(Rk)return j5;Rk=1;function n(e){return e}return j5=n,j5}var N5,Dk;function Gz(){if(Dk)return N5;Dk=1;var n=Qx();function e(t){return typeof t=="function"?t:n}return N5=e,N5}var W5,Fk;function LO(){if(Fk)return W5;Fk=1;var n=Wz(),e=Gz();function t(r,i){return r&&n(r,e(i))}return W5=t,W5}var G5,Lk;function UO(){if(Lk)return G5;Lk=1;var n=Nz(),e=n(Object.getPrototypeOf,Object);return G5=e,G5}var Q5,Uk;function Qz(){if(Uk)return Q5;Uk=1;var n=Yg(),e=UO(),t=om(),r="[object Object]",i=Function.prototype,s=Object.prototype,l=i.toString,o=s.hasOwnProperty,p=l.call(Object);function v(x){if(!t(x)||n(x)!=r)return!1;var B=e(x);if(B===null)return!0;var T=o.call(B,"constructor")&&B.constructor;return typeof T=="function"&&T instanceof T&&l.call(T)==p}return Q5=v,Q5}var Y5,zk;function Yz(){if(zk)return Y5;zk=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=t(e[r],r,e);return s}return Y5=n,Y5}var q5,jk;function Qoe(){if(jk)return q5;jk=1;function n(){this.__data__=[],this.size=0}return q5=n,q5}var V5,Nk;function s_(){if(Nk)return V5;Nk=1;function n(e,t){return e===t||e!==e&&t!==t}return V5=n,V5}var $5,Wk;function Yx(){if(Wk)return $5;Wk=1;var n=s_();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return $5=e,$5}var H5,Gk;function Yoe(){if(Gk)return H5;Gk=1;var n=Yx(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,l=n(s,i);if(l<0)return!1;var o=s.length-1;return l==o?s.pop():t.call(s,l,1),--this.size,!0}return H5=r,H5}var Z5,Qk;function qoe(){if(Qk)return Z5;Qk=1;var n=Yx();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return Z5=e,Z5}var X5,Yk;function Voe(){if(Yk)return X5;Yk=1;var n=Yx();function e(t){return n(this.__data__,t)>-1}return X5=e,X5}var J5,qk;function $oe(){if(qk)return J5;qk=1;var n=Yx();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return J5=e,J5}var eM,Vk;function qx(){if(Vk)return eM;Vk=1;var n=Qoe(),e=Yoe(),t=qoe(),r=Voe(),i=$oe();function s(l){var o=-1,p=l==null?0:l.length;for(this.clear();++o<p;){var v=l[o];this.set(v[0],v[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,eM=s,eM}var tM,$k;function Hoe(){if($k)return tM;$k=1;var n=qx();function e(){this.__data__=new n,this.size=0}return tM=e,tM}var nM,Hk;function Zoe(){if(Hk)return nM;Hk=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return nM=n,nM}var rM,Zk;function Xoe(){if(Zk)return rM;Zk=1;function n(e){return this.__data__.get(e)}return rM=n,rM}var iM,Xk;function Joe(){if(Xk)return iM;Xk=1;function n(e){return this.__data__.has(e)}return iM=n,iM}var oM,Jk;function ese(){if(Jk)return oM;Jk=1;var n=_p(),e=n["__core-js_shared__"];return oM=e,oM}var sM,eT;function tse(){if(eT)return sM;eT=1;var n=ese(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return sM=t,sM}var aM,tT;function qz(){if(tT)return aM;tT=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return aM=t,aM}var lM,nT;function nse(){if(nT)return lM;nT=1;var n=FO(),e=tse(),t=Rf(),r=qz(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,l=Function.prototype,o=Object.prototype,p=l.toString,v=o.hasOwnProperty,x=RegExp("^"+p.call(v).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function B(T){if(!t(T)||e(T))return!1;var P=n(T)?x:s;return P.test(r(T))}return lM=B,lM}var uM,rT;function rse(){if(rT)return uM;rT=1;function n(e,t){return e==null?void 0:e[t]}return uM=n,uM}var AM,iT;function qg(){if(iT)return AM;iT=1;var n=nse(),e=rse();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return AM=t,AM}var cM,oT;function zO(){if(oT)return cM;oT=1;var n=qg(),e=_p(),t=n(e,"Map");return cM=t,cM}var dM,sT;function Vx(){if(sT)return dM;sT=1;var n=qg(),e=n(Object,"create");return dM=e,dM}var hM,aT;function ise(){if(aT)return hM;aT=1;var n=Vx();function e(){this.__data__=n?n(null):{},this.size=0}return hM=e,hM}var fM,lT;function ose(){if(lT)return fM;lT=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return fM=n,fM}var pM,uT;function sse(){if(uT)return pM;uT=1;var n=Vx(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var l=this.__data__;if(n){var o=l[s];return o===e?void 0:o}return r.call(l,s)?l[s]:void 0}return pM=i,pM}var mM,AT;function ase(){if(AT)return mM;AT=1;var n=Vx(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return mM=r,mM}var gM,cT;function lse(){if(cT)return gM;cT=1;var n=Vx(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return gM=t,gM}var yM,dT;function use(){if(dT)return yM;dT=1;var n=ise(),e=ose(),t=sse(),r=ase(),i=lse();function s(l){var o=-1,p=l==null?0:l.length;for(this.clear();++o<p;){var v=l[o];this.set(v[0],v[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,yM=s,yM}var vM,hT;function Ase(){if(hT)return vM;hT=1;var n=use(),e=qx(),t=zO();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return vM=r,vM}var CM,fT;function cse(){if(fT)return CM;fT=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return CM=n,CM}var _M,pT;function $x(){if(pT)return _M;pT=1;var n=cse();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return _M=e,_M}var bM,mT;function dse(){if(mT)return bM;mT=1;var n=$x();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return bM=e,bM}var xM,gT;function hse(){if(gT)return xM;gT=1;var n=$x();function e(t){return n(this,t).get(t)}return xM=e,xM}var MM,yT;function fse(){if(yT)return MM;yT=1;var n=$x();function e(t){return n(this,t).has(t)}return MM=e,MM}var wM,vT;function pse(){if(vT)return wM;vT=1;var n=$x();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return wM=e,wM}var SM,CT;function jO(){if(CT)return SM;CT=1;var n=Ase(),e=dse(),t=hse(),r=fse(),i=pse();function s(l){var o=-1,p=l==null?0:l.length;for(this.clear();++o<p;){var v=l[o];this.set(v[0],v[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,SM=s,SM}var EM,_T;function mse(){if(_T)return EM;_T=1;var n=qx(),e=zO(),t=jO(),r=200;function i(s,l){var o=this.__data__;if(o instanceof n){var p=o.__data__;if(!e||p.length<r-1)return p.push([s,l]),this.size=++o.size,this;o=this.__data__=new t(p)}return o.set(s,l),this.size=o.size,this}return EM=i,EM}var BM,bT;function Hx(){if(bT)return BM;bT=1;var n=qx(),e=Hoe(),t=Zoe(),r=Xoe(),i=Joe(),s=mse();function l(o){var p=this.__data__=new n(o);this.size=p.size}return l.prototype.clear=e,l.prototype.delete=t,l.prototype.get=r,l.prototype.has=i,l.prototype.set=s,BM=l,BM}var OM,xT;function gse(){if(xT)return OM;xT=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return OM=e,OM}var IM,MT;function yse(){if(MT)return IM;MT=1;function n(e){return this.__data__.has(e)}return IM=n,IM}var kM,wT;function vse(){if(wT)return kM;wT=1;var n=jO(),e=gse(),t=yse();function r(i){var s=-1,l=i==null?0:i.length;for(this.__data__=new n;++s<l;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,kM=r,kM}var TM,ST;function Cse(){if(ST)return TM;ST=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return TM=n,TM}var PM,ET;function _se(){if(ET)return PM;ET=1;function n(e,t){return e.has(t)}return PM=n,PM}var KM,BT;function Vz(){if(BT)return KM;BT=1;var n=vse(),e=Cse(),t=_se(),r=1,i=2;function s(l,o,p,v,x,B){var T=p&r,P=l.length,U=o.length;if(P!=U&&!(T&&U>P))return!1;var j=B.get(l),N=B.get(o);if(j&&N)return j==o&&N==l;var q=-1,H=!0,oe=p&i?new n:void 0;for(B.set(l,o),B.set(o,l);++q<P;){var te=l[q],V=o[q];if(v)var ne=T?v(V,te,q,o,l,B):v(te,V,q,l,o,B);if(ne!==void 0){if(ne)continue;H=!1;break}if(oe){if(!e(o,function(W,ie){if(!t(oe,ie)&&(te===W||x(te,W,p,v,B)))return oe.push(ie)})){H=!1;break}}else if(!(te===V||x(te,V,p,v,B))){H=!1;break}}return B.delete(l),B.delete(o),H}return KM=s,KM}var RM,OT;function $z(){if(OT)return RM;OT=1;var n=_p(),e=n.Uint8Array;return RM=e,RM}var DM,IT;function bse(){if(IT)return DM;IT=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return DM=n,DM}var FM,kT;function xse(){if(kT)return FM;kT=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return FM=n,FM}var LM,TT;function Mse(){if(TT)return LM;TT=1;var n=i_(),e=$z(),t=s_(),r=Vz(),i=bse(),s=xse(),l=1,o=2,p="[object Boolean]",v="[object Date]",x="[object Error]",B="[object Map]",T="[object Number]",P="[object RegExp]",U="[object Set]",j="[object String]",N="[object Symbol]",q="[object ArrayBuffer]",H="[object DataView]",oe=n?n.prototype:void 0,te=oe?oe.valueOf:void 0;function V(ne,W,ie,he,fe,Ee,me){switch(ie){case H:if(ne.byteLength!=W.byteLength||ne.byteOffset!=W.byteOffset)return!1;ne=ne.buffer,W=W.buffer;case q:return!(ne.byteLength!=W.byteLength||!Ee(new e(ne),new e(W)));case p:case v:case T:return t(+ne,+W);case x:return ne.name==W.name&&ne.message==W.message;case P:case j:return ne==W+"";case B:var Me=i;case U:var De=he&l;if(Me||(Me=s),ne.size!=W.size&&!De)return!1;var xe=me.get(ne);if(xe)return xe==W;he|=o,me.set(ne,W);var At=r(Me(ne),Me(W),he,fe,Ee,me);return me.delete(ne),At;case N:if(te)return te.call(ne)==te.call(W)}return!1}return LM=V,LM}var UM,PT;function Hz(){if(PT)return UM;PT=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return UM=n,UM}var zM,KT;function Zz(){if(KT)return zM;KT=1;var n=Hz(),e=Hh();function t(r,i,s){var l=i(r);return e(r)?l:n(l,s(r))}return zM=t,zM}var jM,RT;function wse(){if(RT)return jM;RT=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,l=[];++r<i;){var o=e[r];t(o,r,e)&&(l[s++]=o)}return l}return jM=n,jM}var NM,DT;function Xz(){if(DT)return NM;DT=1;function n(){return[]}return NM=n,NM}var WM,FT;function NO(){if(FT)return WM;FT=1;var n=wse(),e=Xz(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(l){return l==null?[]:(l=Object(l),n(i(l),function(o){return r.call(l,o)}))}:e;return WM=s,WM}var GM,LT;function Jz(){if(LT)return GM;LT=1;var n=Zz(),e=NO(),t=o_();function r(i){return n(i,t,e)}return GM=r,GM}var QM,UT;function Sse(){if(UT)return QM;UT=1;var n=Jz(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,l,o,p,v,x){var B=o&e,T=n(s),P=T.length,U=n(l),j=U.length;if(P!=j&&!B)return!1;for(var N=P;N--;){var q=T[N];if(!(B?q in l:r.call(l,q)))return!1}var H=x.get(s),oe=x.get(l);if(H&&oe)return H==l&&oe==s;var te=!0;x.set(s,l),x.set(l,s);for(var V=B;++N<P;){q=T[N];var ne=s[q],W=l[q];if(p)var ie=B?p(W,ne,q,l,s,x):p(ne,W,q,s,l,x);if(!(ie===void 0?ne===W||v(ne,W,o,p,x):ie)){te=!1;break}V||(V=q=="constructor")}if(te&&!V){var he=s.constructor,fe=l.constructor;he!=fe&&"constructor"in s&&"constructor"in l&&!(typeof he=="function"&&he instanceof he&&typeof fe=="function"&&fe instanceof fe)&&(te=!1)}return x.delete(s),x.delete(l),te}return QM=i,QM}var YM,zT;function Ese(){if(zT)return YM;zT=1;var n=qg(),e=_p(),t=n(e,"DataView");return YM=t,YM}var qM,jT;function Bse(){if(jT)return qM;jT=1;var n=qg(),e=_p(),t=n(e,"Promise");return qM=t,qM}var VM,NT;function Ose(){if(NT)return VM;NT=1;var n=qg(),e=_p(),t=n(e,"Set");return VM=t,VM}var $M,WT;function Ise(){if(WT)return $M;WT=1;var n=qg(),e=_p(),t=n(e,"WeakMap");return $M=t,$M}var HM,GT;function Zx(){if(GT)return HM;GT=1;var n=Ese(),e=zO(),t=Bse(),r=Ose(),i=Ise(),s=Yg(),l=qz(),o="[object Map]",p="[object Object]",v="[object Promise]",x="[object Set]",B="[object WeakMap]",T="[object DataView]",P=l(n),U=l(e),j=l(t),N=l(r),q=l(i),H=s;return(n&&H(new n(new ArrayBuffer(1)))!=T||e&&H(new e)!=o||t&&H(t.resolve())!=v||r&&H(new r)!=x||i&&H(new i)!=B)&&(H=function(oe){var te=s(oe),V=te==p?oe.constructor:void 0,ne=V?l(V):"";if(ne)switch(ne){case P:return T;case U:return o;case j:return v;case N:return x;case q:return B}return te}),HM=H,HM}var ZM,QT;function kse(){if(QT)return ZM;QT=1;var n=Hx(),e=Vz(),t=Mse(),r=Sse(),i=Zx(),s=Hh(),l=Gx(),o=RO(),p=1,v="[object Arguments]",x="[object Array]",B="[object Object]",T=Object.prototype,P=T.hasOwnProperty;function U(j,N,q,H,oe,te){var V=s(j),ne=s(N),W=V?x:i(j),ie=ne?x:i(N);W=W==v?B:W,ie=ie==v?B:ie;var he=W==B,fe=ie==B,Ee=W==ie;if(Ee&&l(j)){if(!l(N))return!1;V=!0,he=!1}if(Ee&&!he)return te||(te=new n),V||o(j)?e(j,N,q,H,oe,te):t(j,N,W,q,H,oe,te);if(!(q&p)){var me=he&&P.call(j,"__wrapped__"),Me=fe&&P.call(N,"__wrapped__");if(me||Me){var De=me?j.value():j,xe=Me?N.value():N;return te||(te=new n),oe(De,xe,q,H,te)}}return Ee?(te||(te=new n),r(j,N,q,H,oe,te)):!1}return ZM=U,ZM}var XM,YT;function ej(){if(YT)return XM;YT=1;var n=kse(),e=om();function t(r,i,s,l,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,l,t,o)}return XM=t,XM}var JM,qT;function Tse(){if(qT)return JM;qT=1;var n=Hx(),e=ej(),t=1,r=2;function i(s,l,o,p){var v=o.length,x=v,B=!p;if(s==null)return!x;for(s=Object(s);v--;){var T=o[v];if(B&&T[2]?T[1]!==s[T[0]]:!(T[0]in s))return!1}for(;++v<x;){T=o[v];var P=T[0],U=s[P],j=T[1];if(B&&T[2]){if(U===void 0&&!(P in s))return!1}else{var N=new n;if(p)var q=p(U,j,P,s,l,N);if(!(q===void 0?e(j,U,t|r,p,N):q))return!1}}return!0}return JM=i,JM}var ew,VT;function tj(){if(VT)return ew;VT=1;var n=Rf();function e(t){return t===t&&!n(t)}return ew=e,ew}var tw,$T;function Pse(){if($T)return tw;$T=1;var n=tj(),e=o_();function t(r){for(var i=e(r),s=i.length;s--;){var l=i[s],o=r[l];i[s]=[l,o,n(o)]}return i}return tw=t,tw}var nw,HT;function nj(){if(HT)return nw;HT=1;function n(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}return nw=n,nw}var rw,ZT;function Kse(){if(ZT)return rw;ZT=1;var n=Tse(),e=Pse(),t=nj();function r(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(l){return l===i||n(l,i,s)}}return rw=r,rw}var iw,XT;function Xx(){if(XT)return iw;XT=1;var n=Yg(),e=om(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&n(i)==t}return iw=r,iw}var ow,JT;function WO(){if(JT)return ow;JT=1;var n=Hh(),e=Xx(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,l){if(n(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!t.test(s)||l!=null&&s in Object(l)}return ow=i,ow}var sw,eP;function Rse(){if(eP)return sw;eP=1;var n=jO(),e="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var l=arguments,o=i?i.apply(this,l):l[0],p=s.cache;if(p.has(o))return p.get(o);var v=r.apply(this,l);return s.cache=p.set(o,v)||p,v};return s.cache=new(t.Cache||n),s}return t.Cache=n,sw=t,sw}var aw,tP;function Dse(){if(tP)return aw;tP=1;var n=Rse(),e=500;function t(r){var i=n(r,function(l){return s.size===e&&s.clear(),l}),s=i.cache;return i}return aw=t,aw}var lw,nP;function Fse(){if(nP)return lw;nP=1;var n=Dse(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=n(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(l,o,p,v){s.push(p?v.replace(t,"$1"):o||l)}),s});return lw=r,lw}var uw,rP;function Lse(){if(rP)return uw;rP=1;var n=i_(),e=Yz(),t=Hh(),r=Xx(),i=n?n.prototype:void 0,s=i?i.toString:void 0;function l(o){if(typeof o=="string")return o;if(t(o))return e(o,l)+"";if(r(o))return s?s.call(o):"";var p=o+"";return p=="0"&&1/o==-1/0?"-0":p}return uw=l,uw}var Aw,iP;function Use(){if(iP)return Aw;iP=1;var n=Lse();function e(t){return t==null?"":n(t)}return Aw=e,Aw}var cw,oP;function rj(){if(oP)return cw;oP=1;var n=Hh(),e=WO(),t=Fse(),r=Use();function i(s,l){return n(s)?s:e(s,l)?[s]:t(r(s))}return cw=i,cw}var dw,sP;function Jx(){if(sP)return dw;sP=1;var n=Xx();function e(t){if(typeof t=="string"||n(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return dw=e,dw}var hw,aP;function ij(){if(aP)return hw;aP=1;var n=rj(),e=Jx();function t(r,i){i=n(i,r);for(var s=0,l=i.length;r!=null&&s<l;)r=r[e(i[s++])];return s&&s==l?r:void 0}return hw=t,hw}var fw,lP;function zse(){if(lP)return fw;lP=1;var n=ij();function e(t,r,i){var s=t==null?void 0:n(t,r);return s===void 0?i:s}return fw=e,fw}var pw,uP;function jse(){if(uP)return pw;uP=1;function n(e,t){return e!=null&&t in Object(e)}return pw=n,pw}var mw,AP;function Nse(){if(AP)return mw;AP=1;var n=rj(),e=IO(),t=Hh(),r=kO(),i=TO(),s=Jx();function l(o,p,v){p=n(p,o);for(var x=-1,B=p.length,T=!1;++x<B;){var P=s(p[x]);if(!(T=o!=null&&v(o,P)))break;o=o[P]}return T||++x!=B?T:(B=o==null?0:o.length,!!B&&i(B)&&r(P,B)&&(t(o)||e(o)))}return mw=l,mw}var gw,cP;function Wse(){if(cP)return gw;cP=1;var n=jse(),e=Nse();function t(r,i){return r!=null&&e(r,i,n)}return gw=t,gw}var yw,dP;function Gse(){if(dP)return yw;dP=1;var n=ej(),e=zse(),t=Wse(),r=WO(),i=tj(),s=nj(),l=Jx(),o=1,p=2;function v(x,B){return r(x)&&i(B)?s(l(x),B):function(T){var P=e(T,x);return P===void 0&&P===B?t(T,x):n(B,P,o|p)}}return yw=v,yw}var vw,hP;function Qse(){if(hP)return vw;hP=1;function n(e){return function(t){return t==null?void 0:t[e]}}return vw=n,vw}var Cw,fP;function Yse(){if(fP)return Cw;fP=1;var n=ij();function e(t){return function(r){return n(r,t)}}return Cw=e,Cw}var _w,pP;function qse(){if(pP)return _w;pP=1;var n=Qse(),e=Yse(),t=WO(),r=Jx();function i(s){return t(s)?n(r(s)):e(s)}return _w=i,_w}var bw,mP;function Vse(){if(mP)return bw;mP=1;var n=Kse(),e=Gse(),t=Qx(),r=Hh(),i=qse();function s(l){return typeof l=="function"?l:l==null?t:typeof l=="object"?r(l)?e(l[0],l[1]):n(l):i(l)}return bw=s,bw}var xw,gP;function $se(){if(gP)return xw;gP=1;var n=Uy();function e(t,r){return function(i,s){if(i==null)return i;if(!n(i))return t(i,s);for(var l=i.length,o=r?l:-1,p=Object(i);(r?o--:++o<l)&&s(p[o],o,p)!==!1;);return i}}return xw=e,xw}var Mw,yP;function oj(){if(yP)return Mw;yP=1;var n=Wz(),e=$se(),t=e(n);return Mw=t,Mw}var ww,vP;function Hse(){if(vP)return ww;vP=1;var n=oj(),e=Uy();function t(r,i){var s=-1,l=e(r)?Array(r.length):[];return n(r,function(o,p,v){l[++s]=i(o,p,v)}),l}return ww=t,ww}var Sw,CP;function Zse(){if(CP)return Sw;CP=1;var n=Yz(),e=Vse(),t=Hse(),r=Hh();function i(s,l){var o=r(s)?n:t;return o(s,e(l,3))}return Sw=i,Sw}var _P;function Xse(){if(_P)return x1;_P=1,Object.defineProperty(x1,"__esModule",{value:!0}),x1.flattenNames=void 0;var n=Foe(),e=p(n),t=LO(),r=p(t),i=Qz(),s=p(i),l=Zse(),o=p(l);function p(x){return x&&x.__esModule?x:{default:x}}var v=x1.flattenNames=function x(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=[];return(0,o.default)(B,function(P){Array.isArray(P)?x(P).map(function(U){return T.push(U)}):(0,s.default)(P)?(0,r.default)(P,function(U,j){U===!0&&T.push(j),T.push(j+"-"+U)}):(0,e.default)(P)&&T.push(P)}),T};return x1.default=v,x1}var M1={},Ew,bP;function sj(){if(bP)return Ew;bP=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}return Ew=n,Ew}var Bw,xP;function aj(){if(xP)return Bw;xP=1;var n=qg(),e=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}}();return Bw=e,Bw}var Ow,MP;function GO(){if(MP)return Ow;MP=1;var n=aj();function e(t,r,i){r=="__proto__"&&n?n(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return Ow=e,Ow}var Iw,wP;function lj(){if(wP)return Iw;wP=1;var n=GO(),e=s_(),t=Object.prototype,r=t.hasOwnProperty;function i(s,l,o){var p=s[l];(!(r.call(s,l)&&e(p,o))||o===void 0&&!(l in s))&&n(s,l,o)}return Iw=i,Iw}var kw,SP;function a_(){if(SP)return kw;SP=1;var n=lj(),e=GO();function t(r,i,s,l){var o=!s;s||(s={});for(var p=-1,v=i.length;++p<v;){var x=i[p],B=l?l(s[x],r[x],x,s,r):void 0;B===void 0&&(B=r[x]),o?e(s,x,B):n(s,x,B)}return s}return kw=t,kw}var Tw,EP;function Jse(){if(EP)return Tw;EP=1;var n=a_(),e=o_();function t(r,i){return r&&n(i,e(i),r)}return Tw=t,Tw}var Pw,BP;function eae(){if(BP)return Pw;BP=1;function n(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}return Pw=n,Pw}var Kw,OP;function tae(){if(OP)return Kw;OP=1;var n=Rf(),e=DO(),t=eae(),r=Object.prototype,i=r.hasOwnProperty;function s(l){if(!n(l))return t(l);var o=e(l),p=[];for(var v in l)v=="constructor"&&(o||!i.call(l,v))||p.push(v);return p}return Kw=s,Kw}var Rw,IP;function l_(){if(IP)return Rw;IP=1;var n=jz(),e=tae(),t=Uy();function r(i){return t(i)?n(i,!0):e(i)}return Rw=r,Rw}var Dw,kP;function nae(){if(kP)return Dw;kP=1;var n=a_(),e=l_();function t(r,i){return r&&n(i,e(i),r)}return Dw=t,Dw}var zv={exports:{}};zv.exports;var TP;function uj(){return TP||(TP=1,function(n,e){var t=_p(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,l=s?t.Buffer:void 0,o=l?l.allocUnsafe:void 0;function p(v,x){if(x)return v.slice();var B=v.length,T=o?o(B):new v.constructor(B);return v.copy(T),T}n.exports=p}(zv,zv.exports)),zv.exports}var Fw,PP;function Aj(){if(PP)return Fw;PP=1;function n(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}return Fw=n,Fw}var Lw,KP;function rae(){if(KP)return Lw;KP=1;var n=a_(),e=NO();function t(r,i){return n(r,e(r),i)}return Lw=t,Lw}var Uw,RP;function cj(){if(RP)return Uw;RP=1;var n=Hz(),e=UO(),t=NO(),r=Xz(),i=Object.getOwnPropertySymbols,s=i?function(l){for(var o=[];l;)n(o,t(l)),l=e(l);return o}:r;return Uw=s,Uw}var zw,DP;function iae(){if(DP)return zw;DP=1;var n=a_(),e=cj();function t(r,i){return n(r,e(r),i)}return zw=t,zw}var jw,FP;function oae(){if(FP)return jw;FP=1;var n=Zz(),e=cj(),t=l_();function r(i){return n(i,t,e)}return jw=r,jw}var Nw,LP;function sae(){if(LP)return Nw;LP=1;var n=Object.prototype,e=n.hasOwnProperty;function t(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Nw=t,Nw}var Ww,UP;function QO(){if(UP)return Ww;UP=1;var n=$z();function e(t){var r=new t.constructor(t.byteLength);return new n(r).set(new n(t)),r}return Ww=e,Ww}var Gw,zP;function aae(){if(zP)return Gw;zP=1;var n=QO();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return Gw=e,Gw}var Qw,jP;function lae(){if(jP)return Qw;jP=1;var n=/\w*$/;function e(t){var r=new t.constructor(t.source,n.exec(t));return r.lastIndex=t.lastIndex,r}return Qw=e,Qw}var Yw,NP;function uae(){if(NP)return Yw;NP=1;var n=i_(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return Yw=r,Yw}var qw,WP;function dj(){if(WP)return qw;WP=1;var n=QO();function e(t,r){var i=r?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return qw=e,qw}var Vw,GP;function Aae(){if(GP)return Vw;GP=1;var n=QO(),e=aae(),t=lae(),r=uae(),i=dj(),s="[object Boolean]",l="[object Date]",o="[object Map]",p="[object Number]",v="[object RegExp]",x="[object Set]",B="[object String]",T="[object Symbol]",P="[object ArrayBuffer]",U="[object DataView]",j="[object Float32Array]",N="[object Float64Array]",q="[object Int8Array]",H="[object Int16Array]",oe="[object Int32Array]",te="[object Uint8Array]",V="[object Uint8ClampedArray]",ne="[object Uint16Array]",W="[object Uint32Array]";function ie(he,fe,Ee){var me=he.constructor;switch(fe){case P:return n(he);case s:case l:return new me(+he);case U:return e(he,Ee);case j:case N:case q:case H:case oe:case te:case V:case ne:case W:return i(he,Ee);case o:return new me;case p:case B:return new me(he);case v:return t(he);case x:return new me;case T:return r(he)}}return Vw=ie,Vw}var $w,QP;function cae(){if(QP)return $w;QP=1;var n=Rf(),e=Object.create,t=function(){function r(){}return function(i){if(!n(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return $w=t,$w}var Hw,YP;function hj(){if(YP)return Hw;YP=1;var n=cae(),e=UO(),t=DO();function r(i){return typeof i.constructor=="function"&&!t(i)?n(e(i)):{}}return Hw=r,Hw}var Zw,qP;function dae(){if(qP)return Zw;qP=1;var n=Zx(),e=om(),t="[object Map]";function r(i){return e(i)&&n(i)==t}return Zw=r,Zw}var Xw,VP;function hae(){if(VP)return Xw;VP=1;var n=dae(),e=PO(),t=KO(),r=t&&t.isMap,i=r?e(r):n;return Xw=i,Xw}var Jw,$P;function fae(){if($P)return Jw;$P=1;var n=Zx(),e=om(),t="[object Set]";function r(i){return e(i)&&n(i)==t}return Jw=r,Jw}var eS,HP;function pae(){if(HP)return eS;HP=1;var n=fae(),e=PO(),t=KO(),r=t&&t.isSet,i=r?e(r):n;return eS=i,eS}var tS,ZP;function mae(){if(ZP)return tS;ZP=1;var n=Hx(),e=sj(),t=lj(),r=Jse(),i=nae(),s=uj(),l=Aj(),o=rae(),p=iae(),v=Jz(),x=oae(),B=Zx(),T=sae(),P=Aae(),U=hj(),j=Hh(),N=Gx(),q=hae(),H=Rf(),oe=pae(),te=o_(),V=l_(),ne=1,W=2,ie=4,he="[object Arguments]",fe="[object Array]",Ee="[object Boolean]",me="[object Date]",Me="[object Error]",De="[object Function]",xe="[object GeneratorFunction]",At="[object Map]",Ze="[object Number]",Xe="[object Object]",Ne="[object RegExp]",Se="[object Set]",Re="[object String]",He="[object Symbol]",_t="[object WeakMap]",Gt="[object ArrayBuffer]",yt="[object DataView]",Ft="[object Float32Array]",Tt="[object Float64Array]",Le="[object Int8Array]",Pe="[object Int16Array]",Be="[object Int32Array]",it="[object Uint8Array]",Ct="[object Uint8ClampedArray]",ft="[object Uint16Array]",Lt="[object Uint32Array]",Zt={};Zt[he]=Zt[fe]=Zt[Gt]=Zt[yt]=Zt[Ee]=Zt[me]=Zt[Ft]=Zt[Tt]=Zt[Le]=Zt[Pe]=Zt[Be]=Zt[At]=Zt[Ze]=Zt[Xe]=Zt[Ne]=Zt[Se]=Zt[Re]=Zt[He]=Zt[it]=Zt[Ct]=Zt[ft]=Zt[Lt]=!0,Zt[Me]=Zt[De]=Zt[_t]=!1;function Rt(_n,qn,rn,ar,kn,mn){var zn,br=qn&ne,gr=qn&W,tr=qn&ie;if(rn&&(zn=kn?rn(_n,ar,kn,mn):rn(_n)),zn!==void 0)return zn;if(!H(_n))return _n;var Ge=j(_n);if(Ge){if(zn=T(_n),!br)return l(_n,zn)}else{var ce=B(_n),pe=ce==De||ce==xe;if(N(_n))return s(_n,br);if(ce==Xe||ce==he||pe&&!kn){if(zn=gr||pe?{}:U(_n),!br)return gr?p(_n,i(zn,_n)):o(_n,r(zn,_n))}else{if(!Zt[ce])return kn?_n:{};zn=P(_n,ce,br)}}mn||(mn=new n);var rt=mn.get(_n);if(rt)return rt;mn.set(_n,zn),oe(_n)?_n.forEach(function(sn){zn.add(Rt(sn,qn,rn,sn,_n,mn))}):q(_n)&&_n.forEach(function(sn,nr){zn.set(nr,Rt(sn,qn,rn,nr,_n,mn))});var St=tr?gr?x:v:gr?V:te,Ht=Ge?void 0:St(_n);return e(Ht||_n,function(sn,nr){Ht&&(nr=sn,sn=_n[nr]),t(zn,nr,Rt(sn,qn,rn,nr,_n,mn))}),zn}return tS=Rt,tS}var nS,XP;function gae(){if(XP)return nS;XP=1;var n=mae(),e=1,t=4;function r(i){return n(i,e|t)}return nS=r,nS}var JP;function yae(){if(JP)return M1;JP=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.mergeClasses=void 0;var n=LO(),e=s(n),t=gae(),r=s(t),i=Object.assign||function(o){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(o[x]=v[x])}return o};function s(o){return o&&o.__esModule?o:{default:o}}var l=M1.mergeClasses=function(p){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=p.default&&(0,r.default)(p.default)||{};return v.map(function(B){var T=p[B];return T&&(0,e.default)(T,function(P,U){x[U]||(x[U]={}),x[U]=i({},x[U],T[U])}),B}),x};return M1.default=l,M1}var w1={},eK;function vae(){if(eK)return w1;eK=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.autoprefix=void 0;var n=LO(),e=r(n),t=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var p=arguments[o];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(l[v]=p[v])}return l};function r(l){return l&&l.__esModule?l:{default:l}}var i={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var p=o&&o.split(" ");return{position:"absolute",top:p&&p[0],right:p&&p[1],bottom:p&&p[2],left:p&&p[3]}},extend:function(o,p){var v=p[o];return v||{extend:o}}},s=w1.autoprefix=function(o){var p={};return(0,e.default)(o,function(v,x){var B={};(0,e.default)(v,function(T,P){var U=i[P];U?B=t({},B,U(T)):B[P]=T}),p[x]=B}),p};return w1.default=s,w1}var S1={},tK;function Cae(){if(tK)return S1;tK=1,Object.defineProperty(S1,"__esModule",{value:!0}),S1.hover=void 0;var n=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(p[B]=x[B])}return p},e=Na(),t=r(e);function r(p){return p&&p.__esModule?p:{default:p}}function i(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function s(p,v){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:p}function l(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);p.prototype=Object.create(v&&v.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(p,v):p.__proto__=v)}var o=S1.hover=function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){l(T,B);function T(){var P,U,j,N;i(this,T);for(var q=arguments.length,H=Array(q),oe=0;oe<q;oe++)H[oe]=arguments[oe];return N=(U=(j=s(this,(P=T.__proto__||Object.getPrototypeOf(T)).call.apply(P,[this].concat(H))),j),j.state={hover:!1},j.handleMouseOver=function(){return j.setState({hover:!0})},j.handleMouseOut=function(){return j.setState({hover:!1})},j.render=function(){return t.default.createElement(x,{onMouseOver:j.handleMouseOver,onMouseOut:j.handleMouseOut},t.default.createElement(v,n({},j.props,j.state)))},U),s(j,N)}return T}(t.default.Component)};return S1.default=o,S1}var E1={},nK;function _ae(){if(nK)return E1;nK=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.active=void 0;var n=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(p[B]=x[B])}return p},e=Na(),t=r(e);function r(p){return p&&p.__esModule?p:{default:p}}function i(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function s(p,v){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:p}function l(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);p.prototype=Object.create(v&&v.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(p,v):p.__proto__=v)}var o=E1.active=function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){l(T,B);function T(){var P,U,j,N;i(this,T);for(var q=arguments.length,H=Array(q),oe=0;oe<q;oe++)H[oe]=arguments[oe];return N=(U=(j=s(this,(P=T.__proto__||Object.getPrototypeOf(T)).call.apply(P,[this].concat(H))),j),j.state={active:!1},j.handleMouseDown=function(){return j.setState({active:!0})},j.handleMouseUp=function(){return j.setState({active:!1})},j.render=function(){return t.default.createElement(x,{onMouseDown:j.handleMouseDown,onMouseUp:j.handleMouseUp},t.default.createElement(v,n({},j.props,j.state)))},U),s(j,N)}return T}(t.default.Component)};return E1.default=o,E1}var cb={},rK;function bae(){if(rK)return cb;rK=1,Object.defineProperty(cb,"__esModule",{value:!0});var n=function(t,r){var i={},s=function(o){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=p};return t===0&&s("first-child"),t===r-1&&s("last-child"),(t===0||t%2===0)&&s("even"),Math.abs(t%2)===1&&s("odd"),s("nth-child",t),i};return cb.default=n,cb}var iK;function bp(){if(iK)return ch;iK=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.ReactCSS=ch.loop=ch.handleActive=ch.handleHover=ch.hover=void 0;var n=Xse(),e=T(n),t=yae(),r=T(t),i=vae(),s=T(i),l=Cae(),o=T(l),p=_ae(),v=T(p),x=bae(),B=T(x);function T(U){return U&&U.__esModule?U:{default:U}}ch.hover=o.default,ch.handleHover=o.default,ch.handleActive=v.default,ch.loop=B.default;var P=ch.ReactCSS=function(j){for(var N=arguments.length,q=Array(N>1?N-1:0),H=1;H<N;H++)q[H-1]=arguments[H];var oe=(0,e.default)(q),te=(0,r.default)(j,oe);return(0,s.default)(te)};return ch.default=P,ch}var rS,oK;function fj(){if(oK)return rS;oK=1;var n=GO(),e=s_();function t(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&n(r,i,s)}return rS=t,rS}var iS,sK;function xae(){if(sK)return iS;sK=1;var n=Uy(),e=om();function t(r){return e(r)&&n(r)}return iS=t,iS}var oS,aK;function pj(){if(aK)return oS;aK=1;function n(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}return oS=n,oS}var sS,lK;function Mae(){if(lK)return sS;lK=1;var n=a_(),e=l_();function t(r){return n(r,e(r))}return sS=t,sS}var aS,uK;function wae(){if(uK)return aS;uK=1;var n=fj(),e=uj(),t=dj(),r=Aj(),i=hj(),s=IO(),l=Hh(),o=xae(),p=Gx(),v=FO(),x=Rf(),B=Qz(),T=RO(),P=pj(),U=Mae();function j(N,q,H,oe,te,V,ne){var W=P(N,H),ie=P(q,H),he=ne.get(ie);if(he){n(N,H,he);return}var fe=V?V(W,ie,H+"",N,q,ne):void 0,Ee=fe===void 0;if(Ee){var me=l(ie),Me=!me&&p(ie),De=!me&&!Me&&T(ie);fe=ie,me||Me||De?l(W)?fe=W:o(W)?fe=r(W):Me?(Ee=!1,fe=e(ie,!0)):De?(Ee=!1,fe=t(ie,!0)):fe=[]:B(ie)||s(ie)?(fe=W,s(W)?fe=U(W):(!x(W)||v(W))&&(fe=i(ie))):Ee=!1}Ee&&(ne.set(ie,fe),te(fe,ie,oe,V,ne),ne.delete(ie)),n(N,H,fe)}return aS=j,aS}var lS,AK;function Sae(){if(AK)return lS;AK=1;var n=Hx(),e=fj(),t=zz(),r=wae(),i=Rf(),s=l_(),l=pj();function o(p,v,x,B,T){p!==v&&t(v,function(P,U){if(T||(T=new n),i(P))r(p,v,U,x,o,B,T);else{var j=B?B(l(p,U),P,U+"",p,v,T):void 0;j===void 0&&(j=P),e(p,U,j)}},s)}return lS=o,lS}var uS,cK;function Eae(){if(cK)return uS;cK=1;function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}return uS=n,uS}var AS,dK;function Bae(){if(dK)return AS;dK=1;var n=Eae(),e=Math.max;function t(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var l=arguments,o=-1,p=e(l.length-i,0),v=Array(p);++o<p;)v[o]=l[i+o];o=-1;for(var x=Array(i+1);++o<i;)x[o]=l[o];return x[i]=s(v),n(r,this,x)}}return AS=t,AS}var cS,hK;function Oae(){if(hK)return cS;hK=1;function n(e){return function(){return e}}return cS=n,cS}var dS,fK;function Iae(){if(fK)return dS;fK=1;var n=Oae(),e=aj(),t=Qx(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:n(s),writable:!0})}:t;return dS=r,dS}var hS,pK;function kae(){if(pK)return hS;pK=1;var n=800,e=16,t=Date.now;function r(i){var s=0,l=0;return function(){var o=t(),p=e-(o-l);if(l=o,p>0){if(++s>=n)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return hS=r,hS}var fS,mK;function Tae(){if(mK)return fS;mK=1;var n=Iae(),e=kae(),t=e(n);return fS=t,fS}var pS,gK;function Pae(){if(gK)return pS;gK=1;var n=Qx(),e=Bae(),t=Tae();function r(i,s){return t(e(i,s,n),i+"")}return pS=r,pS}var mS,yK;function Kae(){if(yK)return mS;yK=1;var n=s_(),e=Uy(),t=kO(),r=Rf();function i(s,l,o){if(!r(o))return!1;var p=typeof l;return(p=="number"?e(o)&&t(l,o.length):p=="string"&&l in o)?n(o[l],s):!1}return mS=i,mS}var gS,vK;function Rae(){if(vK)return gS;vK=1;var n=Pae(),e=Kae();function t(r){return n(function(i,s){var l=-1,o=s.length,p=o>1?s[o-1]:void 0,v=o>2?s[2]:void 0;for(p=r.length>3&&typeof p=="function"?(o--,p):void 0,v&&e(s[0],s[1],v)&&(p=o<3?void 0:p,o=1),i=Object(i);++l<o;){var x=s[l];x&&r(i,x,l,p)}return i})}return gS=t,gS}var yS,CK;function mj(){if(CK)return yS;CK=1;var n=Sae(),e=Rae(),t=e(function(r,i,s){n(r,i,s)});return yS=t,yS}var vS={},B1={},db={},_K;function Dae(){return _K||(_K=1,Object.defineProperty(db,"__esModule",{value:!0}),db.calculateChange=function(e,t,r,i,s){var l=s.clientWidth,o=s.clientHeight,p=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,v=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,x=p-(s.getBoundingClientRect().left+window.pageXOffset),B=v-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var T=void 0;if(B<0?T=0:B>o?T=1:T=Math.round(B*100/o)/100,t.a!==T)return{h:t.h,s:t.s,l:t.l,a:T,source:"rgb"}}else{var P=void 0;if(x<0?P=0:x>l?P=1:P=Math.round(x*100/l)/100,i!==P)return{h:t.h,s:t.s,l:t.l,a:P,source:"rgb"}}return null}),db}var O1={},bv={},bK;function Fae(){if(bK)return bv;bK=1,Object.defineProperty(bv,"__esModule",{value:!0});var n={},e=bv.render=function(r,i,s,l){if(typeof document>"u"&&!l)return null;var o=l?new l:document.createElement("canvas");o.width=s*2,o.height=s*2;var p=o.getContext("2d");return p?(p.fillStyle=r,p.fillRect(0,0,o.width,o.height),p.fillStyle=i,p.fillRect(0,0,s,s),p.translate(s,s),p.fillRect(0,0,s,s),o.toDataURL()):null};return bv.get=function(r,i,s,l){var o=r+"-"+i+"-"+s+(l?"-server":"");if(n[o])return n[o];var p=e(r,i,s,l);return n[o]=p,p},bv}var xK;function YO(){if(xK)return O1;xK=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.Checkboard=void 0;var n=Object.assign||function(x){for(var B=1;B<arguments.length;B++){var T=arguments[B];for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(x[P]=T[P])}return x},e=Na(),t=p(e),r=bp(),i=p(r),s=Fae(),l=o(s);function o(x){if(x&&x.__esModule)return x;var B={};if(x!=null)for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&(B[T]=x[T]);return B.default=x,B}function p(x){return x&&x.__esModule?x:{default:x}}var v=O1.Checkboard=function(B){var T=B.white,P=B.grey,U=B.size,j=B.renderers,N=B.borderRadius,q=B.boxShadow,H=B.children,oe=(0,i.default)({default:{grid:{borderRadius:N,boxShadow:q,absolute:"0px 0px 0px 0px",background:"url("+l.get(T,P,U,j.canvas)+") center left"}}});return(0,e.isValidElement)(H)?t.default.cloneElement(H,n({},H.props,{style:n({},H.props.style,oe.grid)})):t.default.createElement("div",{style:oe.grid})};return v.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},O1.default=v,O1}var MK;function Lae(){if(MK)return B1;MK=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.Alpha=void 0;var n=Object.assign||function(N){for(var q=1;q<arguments.length;q++){var H=arguments[q];for(var oe in H)Object.prototype.hasOwnProperty.call(H,oe)&&(N[oe]=H[oe])}return N},e=function(){function N(q,H){for(var oe=0;oe<H.length;oe++){var te=H[oe];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(q,te.key,te)}}return function(q,H,oe){return H&&N(q.prototype,H),oe&&N(q,oe),q}}(),t=Na(),r=B(t),i=bp(),s=B(i),l=Dae(),o=x(l),p=YO(),v=B(p);function x(N){if(N&&N.__esModule)return N;var q={};if(N!=null)for(var H in N)Object.prototype.hasOwnProperty.call(N,H)&&(q[H]=N[H]);return q.default=N,q}function B(N){return N&&N.__esModule?N:{default:N}}function T(N,q){if(!(N instanceof q))throw new TypeError("Cannot call a class as a function")}function P(N,q){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:N}function U(N,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);N.prototype=Object.create(q&&q.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(N,q):N.__proto__=q)}var j=B1.Alpha=function(N){U(q,N);function q(){var H,oe,te,V;T(this,q);for(var ne=arguments.length,W=Array(ne),ie=0;ie<ne;ie++)W[ie]=arguments[ie];return V=(oe=(te=P(this,(H=q.__proto__||Object.getPrototypeOf(q)).call.apply(H,[this].concat(W))),te),te.handleChange=function(he){var fe=o.calculateChange(he,te.props.hsl,te.props.direction,te.props.a,te.container);fe&&typeof te.props.onChange=="function"&&te.props.onChange(fe,he)},te.handleMouseDown=function(he){te.handleChange(he),window.addEventListener("mousemove",te.handleChange),window.addEventListener("mouseup",te.handleMouseUp)},te.handleMouseUp=function(){te.unbindEventListeners()},te.unbindEventListeners=function(){window.removeEventListener("mousemove",te.handleChange),window.removeEventListener("mouseup",te.handleMouseUp)},oe),P(te,V)}return e(q,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var oe=this,te=this.props.rgb,V=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+te.r+","+te.g+","+te.b+`, 0) 0%,
           rgba(`+te.r+","+te.g+","+te.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:te.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+te.r+","+te.g+","+te.b+`, 0) 0%,
           rgba(`+te.r+","+te.g+","+te.b+", 1) 100%)"},pointer:{left:0,top:te.a*100+"%"}},overwrite:n({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return r.default.createElement("div",{style:V.alpha},r.default.createElement("div",{style:V.checkboard},r.default.createElement(v.default,{renderers:this.props.renderers})),r.default.createElement("div",{style:V.gradient}),r.default.createElement("div",{style:V.container,ref:function(W){return oe.container=W},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("div",{style:V.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:V.slider}))))}}]),q}(t.PureComponent||t.Component);return B1.default=j,B1}var I1={},wK;function Uae(){if(wK)return I1;wK=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.EditableInput=void 0;var n=function(){function H(oe,te){for(var V=0;V<te.length;V++){var ne=te[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(oe,ne.key,ne)}}return function(oe,te,V){return te&&H(oe.prototype,te),V&&H(oe,V),oe}}(),e=Na(),t=s(e),r=bp(),i=s(r);function s(H){return H&&H.__esModule?H:{default:H}}function l(H,oe,te){return oe in H?Object.defineProperty(H,oe,{value:te,enumerable:!0,configurable:!0,writable:!0}):H[oe]=te,H}function o(H,oe){if(!(H instanceof oe))throw new TypeError("Cannot call a class as a function")}function p(H,oe){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:H}function v(H,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);H.prototype=Object.create(oe&&oe.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(H,oe):H.__proto__=oe)}var x=1,B=38,T=40,P=[B,T],U=function(oe){return P.indexOf(oe)>-1},j=function(oe){return Number(String(oe).replace(/%/g,""))},N=1,q=I1.EditableInput=function(H){v(oe,H);function oe(te){o(this,oe);var V=p(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this));return V.handleBlur=function(){V.state.blurValue&&V.setState({value:V.state.blurValue,blurValue:null})},V.handleChange=function(ne){V.setUpdatedValue(ne.target.value,ne)},V.handleKeyDown=function(ne){var W=j(ne.target.value);if(!isNaN(W)&&U(ne.keyCode)){var ie=V.getArrowOffset(),he=ne.keyCode===B?W+ie:W-ie;V.setUpdatedValue(he,ne)}},V.handleDrag=function(ne){if(V.props.dragLabel){var W=Math.round(V.props.value+ne.movementX);W>=0&&W<=V.props.dragMax&&V.props.onChange&&V.props.onChange(V.getValueObjectWithLabel(W),ne)}},V.handleMouseDown=function(ne){V.props.dragLabel&&(ne.preventDefault(),V.handleDrag(ne),window.addEventListener("mousemove",V.handleDrag),window.addEventListener("mouseup",V.handleMouseUp))},V.handleMouseUp=function(){V.unbindEventListeners()},V.unbindEventListeners=function(){window.removeEventListener("mousemove",V.handleDrag),window.removeEventListener("mouseup",V.handleMouseUp)},V.state={value:String(te.value).toUpperCase(),blurValue:String(te.value).toUpperCase()},V.inputId="rc-editable-input-"+N++,V}return n(oe,[{key:"componentDidUpdate",value:function(V,ne){this.props.value!==this.state.value&&(V.value!==this.props.value||ne.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(V){return l({},this.props.label,V)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||x}},{key:"setUpdatedValue",value:function(V,ne){var W=this.props.label?this.getValueObjectWithLabel(V):V;this.props.onChange&&this.props.onChange(W,ne),this.setState({value:V})}},{key:"render",value:function(){var V=this,ne=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return t.default.createElement("div",{style:ne.wrap},t.default.createElement("input",{id:this.inputId,style:ne.input,ref:function(ie){return V.input=ie},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?t.default.createElement("label",{htmlFor:this.inputId,style:ne.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),oe}(e.PureComponent||e.Component);return I1.default=q,I1}var k1={},hb={},SK;function zae(){return SK||(SK=1,Object.defineProperty(hb,"__esModule",{value:!0}),hb.calculateChange=function(e,t,r,i){var s=i.clientWidth,l=i.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,p=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,v=o-(i.getBoundingClientRect().left+window.pageXOffset),x=p-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var B=void 0;if(x<0)B=359;else if(x>l)B=0;else{var T=-(x*100/l)+100;B=360*T/100}if(r.h!==B)return{h:B,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var P=void 0;if(v<0)P=0;else if(v>s)P=359;else{var U=v*100/s;P=360*U/100}if(r.h!==P)return{h:P,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}),hb}var EK;function jae(){if(EK)return k1;EK=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.Hue=void 0;var n=function(){function P(U,j){for(var N=0;N<j.length;N++){var q=j[N];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(U,q.key,q)}}return function(U,j,N){return j&&P(U.prototype,j),N&&P(U,N),U}}(),e=Na(),t=p(e),r=bp(),i=p(r),s=zae(),l=o(s);function o(P){if(P&&P.__esModule)return P;var U={};if(P!=null)for(var j in P)Object.prototype.hasOwnProperty.call(P,j)&&(U[j]=P[j]);return U.default=P,U}function p(P){return P&&P.__esModule?P:{default:P}}function v(P,U){if(!(P instanceof U))throw new TypeError("Cannot call a class as a function")}function x(P,U){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:P}function B(P,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);P.prototype=Object.create(U&&U.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(P,U):P.__proto__=U)}var T=k1.Hue=function(P){B(U,P);function U(){var j,N,q,H;v(this,U);for(var oe=arguments.length,te=Array(oe),V=0;V<oe;V++)te[V]=arguments[V];return H=(N=(q=x(this,(j=U.__proto__||Object.getPrototypeOf(U)).call.apply(j,[this].concat(te))),q),q.handleChange=function(ne){var W=l.calculateChange(ne,q.props.direction,q.props.hsl,q.container);W&&typeof q.props.onChange=="function"&&q.props.onChange(W,ne)},q.handleMouseDown=function(ne){q.handleChange(ne),window.addEventListener("mousemove",q.handleChange),window.addEventListener("mouseup",q.handleMouseUp)},q.handleMouseUp=function(){q.unbindEventListeners()},N),x(q,H)}return n(U,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var N=this,q=this.props.direction,H=q===void 0?"horizontal":q,oe=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:H==="vertical"});return t.default.createElement("div",{style:oe.hue},t.default.createElement("div",{className:"hue-"+H,style:oe.container,ref:function(V){return N.container=V},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),t.default.createElement("div",{style:oe.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:oe.slider}))))}}]),U}(e.PureComponent||e.Component);return k1.default=T,k1}var T1={},BK;function Nae(){if(BK)return T1;BK=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.Raised=void 0;var n=Na(),e=p(n),t=yp(),r=p(t),i=bp(),s=p(i),l=mj(),o=p(l);function p(x){return x&&x.__esModule?x:{default:x}}var v=T1.Raised=function(B){var T=B.zDepth,P=B.radius,U=B.background,j=B.children,N=B.styles,q=N===void 0?{}:N,H=(0,s.default)((0,o.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+T+"px "+T*4+"px rgba(0,0,0,.24)",borderRadius:P,background:U}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},q),{"zDepth-1":T===1});return e.default.createElement("div",{style:H.wrap},e.default.createElement("div",{style:H.bg}),e.default.createElement("div",{style:H.content},j))};return v.propTypes={background:r.default.string,zDepth:r.default.oneOf([0,1,2,3,4,5]),radius:r.default.number,styles:r.default.object},v.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},T1.default=v,T1}var P1={},CS,OK;function Wae(){if(OK)return CS;OK=1;var n=_p(),e=function(){return n.Date.now()};return CS=e,CS}var _S,IK;function Gae(){if(IK)return _S;IK=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return _S=e,_S}var bS,kK;function Qae(){if(kK)return bS;kK=1;var n=Gae(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return bS=t,bS}var xS,TK;function Yae(){if(TK)return xS;TK=1;var n=Qae(),e=Rf(),t=Xx(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt;function p(v){if(typeof v=="number")return v;if(t(v))return r;if(e(v)){var x=typeof v.valueOf=="function"?v.valueOf():v;v=e(x)?x+"":x}if(typeof v!="string")return v===0?v:+v;v=n(v);var B=s.test(v);return B||l.test(v)?o(v.slice(2),B?2:8):i.test(v)?r:+v}return xS=p,xS}var MS,PK;function gj(){if(PK)return MS;PK=1;var n=Rf(),e=Wae(),t=Yae(),r="Expected a function",i=Math.max,s=Math.min;function l(o,p,v){var x,B,T,P,U,j,N=0,q=!1,H=!1,oe=!0;if(typeof o!="function")throw new TypeError(r);p=t(p)||0,n(v)&&(q=!!v.leading,H="maxWait"in v,T=H?i(t(v.maxWait)||0,p):T,oe="trailing"in v?!!v.trailing:oe);function te(Me){var De=x,xe=B;return x=B=void 0,N=Me,P=o.apply(xe,De),P}function V(Me){return N=Me,U=setTimeout(ie,p),q?te(Me):P}function ne(Me){var De=Me-j,xe=Me-N,At=p-De;return H?s(At,T-xe):At}function W(Me){var De=Me-j,xe=Me-N;return j===void 0||De>=p||De<0||H&&xe>=T}function ie(){var Me=e();if(W(Me))return he(Me);U=setTimeout(ie,ne(Me))}function he(Me){return U=void 0,oe&&x?te(Me):(x=B=void 0,P)}function fe(){U!==void 0&&clearTimeout(U),N=0,x=j=B=U=void 0}function Ee(){return U===void 0?P:he(e())}function me(){var Me=e(),De=W(Me);if(x=arguments,B=this,j=Me,De){if(U===void 0)return V(j);if(H)return clearTimeout(U),U=setTimeout(ie,p),te(j)}return U===void 0&&(U=setTimeout(ie,p)),P}return me.cancel=fe,me.flush=Ee,me}return MS=l,MS}var wS,KK;function qae(){if(KK)return wS;KK=1;var n=gj(),e=Rf(),t="Expected a function";function r(i,s,l){var o=!0,p=!0;if(typeof i!="function")throw new TypeError(t);return e(l)&&(o="leading"in l?!!l.leading:o,p="trailing"in l?!!l.trailing:p),n(i,s,{leading:o,maxWait:s,trailing:p})}return wS=r,wS}var fb={},RK;function Vae(){return RK||(RK=1,Object.defineProperty(fb,"__esModule",{value:!0}),fb.calculateChange=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,l=i.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,p=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,v=o-(r.getBoundingClientRect().left+window.pageXOffset),x=p-(r.getBoundingClientRect().top+window.pageYOffset);v<0?v=0:v>s&&(v=s),x<0?x=0:x>l&&(x=l);var B=v/s,T=1-x/l;return{h:t.h,s:B,v:T,a:t.a,source:"hsv"}}),fb}var DK;function $ae(){if(DK)return P1;DK=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.Saturation=void 0;var n=function(){function j(N,q){for(var H=0;H<q.length;H++){var oe=q[H];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(N,oe.key,oe)}}return function(N,q,H){return q&&j(N.prototype,q),H&&j(N,H),N}}(),e=Na(),t=x(e),r=bp(),i=x(r),s=qae(),l=x(s),o=Vae(),p=v(o);function v(j){if(j&&j.__esModule)return j;var N={};if(j!=null)for(var q in j)Object.prototype.hasOwnProperty.call(j,q)&&(N[q]=j[q]);return N.default=j,N}function x(j){return j&&j.__esModule?j:{default:j}}function B(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function T(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function P(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var U=P1.Saturation=function(j){P(N,j);function N(q){B(this,N);var H=T(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,q));return H.handleChange=function(oe){typeof H.props.onChange=="function"&&H.throttle(H.props.onChange,p.calculateChange(oe,H.props.hsl,H.container),oe)},H.handleMouseDown=function(oe){H.handleChange(oe);var te=H.getContainerRenderWindow();te.addEventListener("mousemove",H.handleChange),te.addEventListener("mouseup",H.handleMouseUp)},H.handleMouseUp=function(){H.unbindEventListeners()},H.throttle=(0,l.default)(function(oe,te,V){oe(te,V)},50),H}return n(N,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var H=this.container,oe=window;!oe.document.contains(H)&&oe.parent!==oe;)oe=oe.parent;return oe}},{key:"unbindEventListeners",value:function(){var H=this.getContainerRenderWindow();H.removeEventListener("mousemove",this.handleChange),H.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var H=this,oe=this.props.style||{},te=oe.color,V=oe.white,ne=oe.black,W=oe.pointer,ie=oe.circle,he=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:te,white:V,black:ne,pointer:W,circle:ie}},{custom:!!this.props.style});return t.default.createElement("div",{style:he.color,ref:function(Ee){return H.container=Ee},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},t.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),t.default.createElement("div",{style:he.white,className:"saturation-white"},t.default.createElement("div",{style:he.black,className:"saturation-black"}),t.default.createElement("div",{style:he.pointer},this.props.pointer?t.default.createElement(this.props.pointer,this.props):t.default.createElement("div",{style:he.circle}))))}}]),N}(e.PureComponent||e.Component);return P1.default=U,P1}var K1={},Nd={},SS,FK;function Hae(){if(FK)return SS;FK=1;var n=sj(),e=oj(),t=Gz(),r=Hh();function i(s,l){var o=r(s)?n:e;return o(s,t(l))}return SS=i,SS}var ES,LK;function Zae(){return LK||(LK=1,ES=Hae()),ES}var kb={exports:{}},Xae=kb.exports,UK;function Jae(){return UK||(UK=1,function(n,e){(function(t,r){n.exports=r()})(Xae,function(){function t(Le){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pe){return typeof Pe}:function(Pe){return Pe&&typeof Symbol=="function"&&Pe.constructor===Symbol&&Pe!==Symbol.prototype?"symbol":typeof Pe},t(Le)}var r=/^\s+/,i=/\s+$/;function s(Le,Pe){if(Le=Le||"",Pe=Pe||{},Le instanceof s)return Le;if(!(this instanceof s))return new s(Le,Pe);var Be=l(Le);this._originalInput=Le,this._r=Be.r,this._g=Be.g,this._b=Be.b,this._a=Be.a,this._roundA=Math.round(100*this._a)/100,this._format=Pe.format||Be.format,this._gradientType=Pe.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=Be.ok}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Pe=this.toRgb();return(Pe.r*299+Pe.g*587+Pe.b*114)/1e3},getLuminance:function(){var Pe=this.toRgb(),Be,it,Ct,ft,Lt,Zt;return Be=Pe.r/255,it=Pe.g/255,Ct=Pe.b/255,Be<=.03928?ft=Be/12.92:ft=Math.pow((Be+.055)/1.055,2.4),it<=.03928?Lt=it/12.92:Lt=Math.pow((it+.055)/1.055,2.4),Ct<=.03928?Zt=Ct/12.92:Zt=Math.pow((Ct+.055)/1.055,2.4),.2126*ft+.7152*Lt+.0722*Zt},setAlpha:function(Pe){return this._a=De(Pe),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var Pe=x(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,v:Pe.v,a:this._a}},toHsvString:function(){var Pe=x(this._r,this._g,this._b),Be=Math.round(Pe.h*360),it=Math.round(Pe.s*100),Ct=Math.round(Pe.v*100);return this._a==1?"hsv("+Be+", "+it+"%, "+Ct+"%)":"hsva("+Be+", "+it+"%, "+Ct+"%, "+this._roundA+")"},toHsl:function(){var Pe=p(this._r,this._g,this._b);return{h:Pe.h*360,s:Pe.s,l:Pe.l,a:this._a}},toHslString:function(){var Pe=p(this._r,this._g,this._b),Be=Math.round(Pe.h*360),it=Math.round(Pe.s*100),Ct=Math.round(Pe.l*100);return this._a==1?"hsl("+Be+", "+it+"%, "+Ct+"%)":"hsla("+Be+", "+it+"%, "+Ct+"%, "+this._roundA+")"},toHex:function(Pe){return T(this._r,this._g,this._b,Pe)},toHexString:function(Pe){return"#"+this.toHex(Pe)},toHex8:function(Pe){return P(this._r,this._g,this._b,this._a,Pe)},toHex8String:function(Pe){return"#"+this.toHex8(Pe)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(xe(this._r,255)*100)+"%",g:Math.round(xe(this._g,255)*100)+"%",b:Math.round(xe(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(xe(this._r,255)*100)+"%, "+Math.round(xe(this._g,255)*100)+"%, "+Math.round(xe(this._b,255)*100)+"%)":"rgba("+Math.round(xe(this._r,255)*100)+"%, "+Math.round(xe(this._g,255)*100)+"%, "+Math.round(xe(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:me[T(this._r,this._g,this._b,!0)]||!1},toFilter:function(Pe){var Be="#"+U(this._r,this._g,this._b,this._a),it=Be,Ct=this._gradientType?"GradientType = 1, ":"";if(Pe){var ft=s(Pe);it="#"+U(ft._r,ft._g,ft._b,ft._a)}return"progid:DXImageTransform.Microsoft.gradient("+Ct+"startColorstr="+Be+",endColorstr="+it+")"},toString:function(Pe){var Be=!!Pe;Pe=Pe||this._format;var it=!1,Ct=this._a<1&&this._a>=0,ft=!Be&&Ct&&(Pe==="hex"||Pe==="hex6"||Pe==="hex3"||Pe==="hex4"||Pe==="hex8"||Pe==="name");return ft?Pe==="name"&&this._a===0?this.toName():this.toRgbString():(Pe==="rgb"&&(it=this.toRgbString()),Pe==="prgb"&&(it=this.toPercentageRgbString()),(Pe==="hex"||Pe==="hex6")&&(it=this.toHexString()),Pe==="hex3"&&(it=this.toHexString(!0)),Pe==="hex4"&&(it=this.toHex8String(!0)),Pe==="hex8"&&(it=this.toHex8String()),Pe==="name"&&(it=this.toName()),Pe==="hsl"&&(it=this.toHslString()),Pe==="hsv"&&(it=this.toHsvString()),it||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(Pe,Be){var it=Pe.apply(null,[this].concat([].slice.call(Be)));return this._r=it._r,this._g=it._g,this._b=it._b,this.setAlpha(it._a),this},lighten:function(){return this._applyModification(H,arguments)},brighten:function(){return this._applyModification(oe,arguments)},darken:function(){return this._applyModification(te,arguments)},desaturate:function(){return this._applyModification(j,arguments)},saturate:function(){return this._applyModification(N,arguments)},greyscale:function(){return this._applyModification(q,arguments)},spin:function(){return this._applyModification(V,arguments)},_applyCombination:function(Pe,Be){return Pe.apply(null,[this].concat([].slice.call(Be)))},analogous:function(){return this._applyCombination(he,arguments)},complement:function(){return this._applyCombination(ne,arguments)},monochromatic:function(){return this._applyCombination(fe,arguments)},splitcomplement:function(){return this._applyCombination(ie,arguments)},triad:function(){return this._applyCombination(W,[3])},tetrad:function(){return this._applyCombination(W,[4])}},s.fromRatio=function(Le,Pe){if(t(Le)=="object"){var Be={};for(var it in Le)Le.hasOwnProperty(it)&&(it==="a"?Be[it]=Le[it]:Be[it]=Re(Le[it]));Le=Be}return s(Le,Pe)};function l(Le){var Pe={r:0,g:0,b:0},Be=1,it=null,Ct=null,ft=null,Lt=!1,Zt=!1;return typeof Le=="string"&&(Le=Ft(Le)),t(Le)=="object"&&(yt(Le.r)&&yt(Le.g)&&yt(Le.b)?(Pe=o(Le.r,Le.g,Le.b),Lt=!0,Zt=String(Le.r).substr(-1)==="%"?"prgb":"rgb"):yt(Le.h)&&yt(Le.s)&&yt(Le.v)?(it=Re(Le.s),Ct=Re(Le.v),Pe=B(Le.h,it,Ct),Lt=!0,Zt="hsv"):yt(Le.h)&&yt(Le.s)&&yt(Le.l)&&(it=Re(Le.s),ft=Re(Le.l),Pe=v(Le.h,it,ft),Lt=!0,Zt="hsl"),Le.hasOwnProperty("a")&&(Be=Le.a)),Be=De(Be),{ok:Lt,format:Le.format||Zt,r:Math.min(255,Math.max(Pe.r,0)),g:Math.min(255,Math.max(Pe.g,0)),b:Math.min(255,Math.max(Pe.b,0)),a:Be}}function o(Le,Pe,Be){return{r:xe(Le,255)*255,g:xe(Pe,255)*255,b:xe(Be,255)*255}}function p(Le,Pe,Be){Le=xe(Le,255),Pe=xe(Pe,255),Be=xe(Be,255);var it=Math.max(Le,Pe,Be),Ct=Math.min(Le,Pe,Be),ft,Lt,Zt=(it+Ct)/2;if(it==Ct)ft=Lt=0;else{var Rt=it-Ct;switch(Lt=Zt>.5?Rt/(2-it-Ct):Rt/(it+Ct),it){case Le:ft=(Pe-Be)/Rt+(Pe<Be?6:0);break;case Pe:ft=(Be-Le)/Rt+2;break;case Be:ft=(Le-Pe)/Rt+4;break}ft/=6}return{h:ft,s:Lt,l:Zt}}function v(Le,Pe,Be){var it,Ct,ft;Le=xe(Le,360),Pe=xe(Pe,100),Be=xe(Be,100);function Lt(_n,qn,rn){return rn<0&&(rn+=1),rn>1&&(rn-=1),rn<1/6?_n+(qn-_n)*6*rn:rn<1/2?qn:rn<2/3?_n+(qn-_n)*(2/3-rn)*6:_n}if(Pe===0)it=Ct=ft=Be;else{var Zt=Be<.5?Be*(1+Pe):Be+Pe-Be*Pe,Rt=2*Be-Zt;it=Lt(Rt,Zt,Le+1/3),Ct=Lt(Rt,Zt,Le),ft=Lt(Rt,Zt,Le-1/3)}return{r:it*255,g:Ct*255,b:ft*255}}function x(Le,Pe,Be){Le=xe(Le,255),Pe=xe(Pe,255),Be=xe(Be,255);var it=Math.max(Le,Pe,Be),Ct=Math.min(Le,Pe,Be),ft,Lt,Zt=it,Rt=it-Ct;if(Lt=it===0?0:Rt/it,it==Ct)ft=0;else{switch(it){case Le:ft=(Pe-Be)/Rt+(Pe<Be?6:0);break;case Pe:ft=(Be-Le)/Rt+2;break;case Be:ft=(Le-Pe)/Rt+4;break}ft/=6}return{h:ft,s:Lt,v:Zt}}function B(Le,Pe,Be){Le=xe(Le,360)*6,Pe=xe(Pe,100),Be=xe(Be,100);var it=Math.floor(Le),Ct=Le-it,ft=Be*(1-Pe),Lt=Be*(1-Ct*Pe),Zt=Be*(1-(1-Ct)*Pe),Rt=it%6,_n=[Be,Lt,ft,ft,Zt,Be][Rt],qn=[Zt,Be,Be,Lt,ft,ft][Rt],rn=[ft,ft,Zt,Be,Be,Lt][Rt];return{r:_n*255,g:qn*255,b:rn*255}}function T(Le,Pe,Be,it){var Ct=[Se(Math.round(Le).toString(16)),Se(Math.round(Pe).toString(16)),Se(Math.round(Be).toString(16))];return it&&Ct[0].charAt(0)==Ct[0].charAt(1)&&Ct[1].charAt(0)==Ct[1].charAt(1)&&Ct[2].charAt(0)==Ct[2].charAt(1)?Ct[0].charAt(0)+Ct[1].charAt(0)+Ct[2].charAt(0):Ct.join("")}function P(Le,Pe,Be,it,Ct){var ft=[Se(Math.round(Le).toString(16)),Se(Math.round(Pe).toString(16)),Se(Math.round(Be).toString(16)),Se(He(it))];return Ct&&ft[0].charAt(0)==ft[0].charAt(1)&&ft[1].charAt(0)==ft[1].charAt(1)&&ft[2].charAt(0)==ft[2].charAt(1)&&ft[3].charAt(0)==ft[3].charAt(1)?ft[0].charAt(0)+ft[1].charAt(0)+ft[2].charAt(0)+ft[3].charAt(0):ft.join("")}function U(Le,Pe,Be,it){var Ct=[Se(He(it)),Se(Math.round(Le).toString(16)),Se(Math.round(Pe).toString(16)),Se(Math.round(Be).toString(16))];return Ct.join("")}s.equals=function(Le,Pe){return!Le||!Pe?!1:s(Le).toRgbString()==s(Pe).toRgbString()},s.random=function(){return s.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function j(Le,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Le).toHsl();return Be.s-=Pe/100,Be.s=At(Be.s),s(Be)}function N(Le,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Le).toHsl();return Be.s+=Pe/100,Be.s=At(Be.s),s(Be)}function q(Le){return s(Le).desaturate(100)}function H(Le,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Le).toHsl();return Be.l+=Pe/100,Be.l=At(Be.l),s(Be)}function oe(Le,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Le).toRgb();return Be.r=Math.max(0,Math.min(255,Be.r-Math.round(255*-(Pe/100)))),Be.g=Math.max(0,Math.min(255,Be.g-Math.round(255*-(Pe/100)))),Be.b=Math.max(0,Math.min(255,Be.b-Math.round(255*-(Pe/100)))),s(Be)}function te(Le,Pe){Pe=Pe===0?0:Pe||10;var Be=s(Le).toHsl();return Be.l-=Pe/100,Be.l=At(Be.l),s(Be)}function V(Le,Pe){var Be=s(Le).toHsl(),it=(Be.h+Pe)%360;return Be.h=it<0?360+it:it,s(Be)}function ne(Le){var Pe=s(Le).toHsl();return Pe.h=(Pe.h+180)%360,s(Pe)}function W(Le,Pe){if(isNaN(Pe)||Pe<=0)throw new Error("Argument to polyad must be a positive number");for(var Be=s(Le).toHsl(),it=[s(Le)],Ct=360/Pe,ft=1;ft<Pe;ft++)it.push(s({h:(Be.h+ft*Ct)%360,s:Be.s,l:Be.l}));return it}function ie(Le){var Pe=s(Le).toHsl(),Be=Pe.h;return[s(Le),s({h:(Be+72)%360,s:Pe.s,l:Pe.l}),s({h:(Be+216)%360,s:Pe.s,l:Pe.l})]}function he(Le,Pe,Be){Pe=Pe||6,Be=Be||30;var it=s(Le).toHsl(),Ct=360/Be,ft=[s(Le)];for(it.h=(it.h-(Ct*Pe>>1)+720)%360;--Pe;)it.h=(it.h+Ct)%360,ft.push(s(it));return ft}function fe(Le,Pe){Pe=Pe||6;for(var Be=s(Le).toHsv(),it=Be.h,Ct=Be.s,ft=Be.v,Lt=[],Zt=1/Pe;Pe--;)Lt.push(s({h:it,s:Ct,v:ft})),ft=(ft+Zt)%1;return Lt}s.mix=function(Le,Pe,Be){Be=Be===0?0:Be||50;var it=s(Le).toRgb(),Ct=s(Pe).toRgb(),ft=Be/100,Lt={r:(Ct.r-it.r)*ft+it.r,g:(Ct.g-it.g)*ft+it.g,b:(Ct.b-it.b)*ft+it.b,a:(Ct.a-it.a)*ft+it.a};return s(Lt)},s.readability=function(Le,Pe){var Be=s(Le),it=s(Pe);return(Math.max(Be.getLuminance(),it.getLuminance())+.05)/(Math.min(Be.getLuminance(),it.getLuminance())+.05)},s.isReadable=function(Le,Pe,Be){var it=s.readability(Le,Pe),Ct,ft;switch(ft=!1,Ct=Tt(Be),Ct.level+Ct.size){case"AAsmall":case"AAAlarge":ft=it>=4.5;break;case"AAlarge":ft=it>=3;break;case"AAAsmall":ft=it>=7;break}return ft},s.mostReadable=function(Le,Pe,Be){var it=null,Ct=0,ft,Lt,Zt,Rt;Be=Be||{},Lt=Be.includeFallbackColors,Zt=Be.level,Rt=Be.size;for(var _n=0;_n<Pe.length;_n++)ft=s.readability(Le,Pe[_n]),ft>Ct&&(Ct=ft,it=s(Pe[_n]));return s.isReadable(Le,it,{level:Zt,size:Rt})||!Lt?it:(Be.includeFallbackColors=!1,s.mostReadable(Le,["#fff","#000"],Be))};var Ee=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},me=s.hexNames=Me(Ee);function Me(Le){var Pe={};for(var Be in Le)Le.hasOwnProperty(Be)&&(Pe[Le[Be]]=Be);return Pe}function De(Le){return Le=parseFloat(Le),(isNaN(Le)||Le<0||Le>1)&&(Le=1),Le}function xe(Le,Pe){Xe(Le)&&(Le="100%");var Be=Ne(Le);return Le=Math.min(Pe,Math.max(0,parseFloat(Le))),Be&&(Le=parseInt(Le*Pe,10)/100),Math.abs(Le-Pe)<1e-6?1:Le%Pe/parseFloat(Pe)}function At(Le){return Math.min(1,Math.max(0,Le))}function Ze(Le){return parseInt(Le,16)}function Xe(Le){return typeof Le=="string"&&Le.indexOf(".")!=-1&&parseFloat(Le)===1}function Ne(Le){return typeof Le=="string"&&Le.indexOf("%")!=-1}function Se(Le){return Le.length==1?"0"+Le:""+Le}function Re(Le){return Le<=1&&(Le=Le*100+"%"),Le}function He(Le){return Math.round(parseFloat(Le)*255).toString(16)}function _t(Le){return Ze(Le)/255}var Gt=function(){var Le="[-\\+]?\\d+%?",Pe="[-\\+]?\\d*\\.\\d+%?",Be="(?:"+Pe+")|(?:"+Le+")",it="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?",Ct="[\\s|\\(]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")[,|\\s]+("+Be+")\\s*\\)?";return{CSS_UNIT:new RegExp(Be),rgb:new RegExp("rgb"+it),rgba:new RegExp("rgba"+Ct),hsl:new RegExp("hsl"+it),hsla:new RegExp("hsla"+Ct),hsv:new RegExp("hsv"+it),hsva:new RegExp("hsva"+Ct),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function yt(Le){return!!Gt.CSS_UNIT.exec(Le)}function Ft(Le){Le=Le.replace(r,"").replace(i,"").toLowerCase();var Pe=!1;if(Ee[Le])Le=Ee[Le],Pe=!0;else if(Le=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var Be;return(Be=Gt.rgb.exec(Le))?{r:Be[1],g:Be[2],b:Be[3]}:(Be=Gt.rgba.exec(Le))?{r:Be[1],g:Be[2],b:Be[3],a:Be[4]}:(Be=Gt.hsl.exec(Le))?{h:Be[1],s:Be[2],l:Be[3]}:(Be=Gt.hsla.exec(Le))?{h:Be[1],s:Be[2],l:Be[3],a:Be[4]}:(Be=Gt.hsv.exec(Le))?{h:Be[1],s:Be[2],v:Be[3]}:(Be=Gt.hsva.exec(Le))?{h:Be[1],s:Be[2],v:Be[3],a:Be[4]}:(Be=Gt.hex8.exec(Le))?{r:Ze(Be[1]),g:Ze(Be[2]),b:Ze(Be[3]),a:_t(Be[4]),format:Pe?"name":"hex8"}:(Be=Gt.hex6.exec(Le))?{r:Ze(Be[1]),g:Ze(Be[2]),b:Ze(Be[3]),format:Pe?"name":"hex"}:(Be=Gt.hex4.exec(Le))?{r:Ze(Be[1]+""+Be[1]),g:Ze(Be[2]+""+Be[2]),b:Ze(Be[3]+""+Be[3]),a:_t(Be[4]+""+Be[4]),format:Pe?"name":"hex8"}:(Be=Gt.hex3.exec(Le))?{r:Ze(Be[1]+""+Be[1]),g:Ze(Be[2]+""+Be[2]),b:Ze(Be[3]+""+Be[3]),format:Pe?"name":"hex"}:!1}function Tt(Le){var Pe,Be;return Le=Le||{level:"AA",size:"small"},Pe=(Le.level||"AA").toUpperCase(),Be=(Le.size||"small").toLowerCase(),Pe!=="AA"&&Pe!=="AAA"&&(Pe="AA"),Be!=="small"&&Be!=="large"&&(Be="small"),{level:Pe,size:Be}}return s})}(kb)),kb.exports}var zK;function yj(){if(zK)return Nd;zK=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.isvalidColorString=Nd.red=Nd.getContrastingColor=Nd.isValidHex=Nd.toState=Nd.simpleCheckForValidColor=void 0;var n=Zae(),e=i(n),t=Jae(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}Nd.simpleCheckForValidColor=function(o){var p=["r","g","b","a","h","s","l","v"],v=0,x=0;return(0,e.default)(p,function(B){if(o[B]&&(v+=1,isNaN(o[B])||(x+=1),B==="s"||B==="l")){var T=/^\d+%$/;T.test(o[B])&&(x+=1)}}),v===x?o:!1};var s=Nd.toState=function(o,p){var v=o.hex?(0,r.default)(o.hex):(0,r.default)(o),x=v.toHsl(),B=v.toHsv(),T=v.toRgb(),P=v.toHex();x.s===0&&(x.h=p||0,B.h=p||0);var U=P==="000000"&&T.a===0;return{hsl:x,hex:U?"transparent":"#"+P,rgb:T,hsv:B,oldHue:o.h||p||x.h,source:o.source}};return Nd.isValidHex=function(o){if(o==="transparent")return!0;var p=String(o).charAt(0)==="#"?1:0;return o.length!==4+p&&o.length<7+p&&(0,r.default)(o).isValid()},Nd.getContrastingColor=function(o){if(!o)return"#fff";var p=s(o);if(p.hex==="transparent")return"rgba(0,0,0,0.4)";var v=(p.rgb.r*299+p.rgb.g*587+p.rgb.b*114)/1e3;return v>=128?"#000":"#fff"},Nd.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},Nd.isvalidColorString=function(o,p){var v=o.replace("","");return(0,r.default)(p+" ("+v+")")._ok},Nd}var jK;function ele(){if(jK)return K1;jK=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.ColorWrap=void 0;var n=Object.assign||function(U){for(var j=1;j<arguments.length;j++){var N=arguments[j];for(var q in N)Object.prototype.hasOwnProperty.call(N,q)&&(U[q]=N[q])}return U},e=function(){function U(j,N){for(var q=0;q<N.length;q++){var H=N[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(j,H.key,H)}}return function(j,N,q){return N&&U(j.prototype,N),q&&U(j,q),j}}(),t=Na(),r=v(t),i=gj(),s=v(i),l=yj(),o=p(l);function p(U){if(U&&U.__esModule)return U;var j={};if(U!=null)for(var N in U)Object.prototype.hasOwnProperty.call(U,N)&&(j[N]=U[N]);return j.default=U,j}function v(U){return U&&U.__esModule?U:{default:U}}function x(U,j){if(!(U instanceof j))throw new TypeError("Cannot call a class as a function")}function B(U,j){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:U}function T(U,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);U.prototype=Object.create(j&&j.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(U,j):U.__proto__=j)}var P=K1.ColorWrap=function(j){var N=function(q){T(H,q);function H(oe){x(this,H);var te=B(this,(H.__proto__||Object.getPrototypeOf(H)).call(this));return te.handleChange=function(V,ne){var W=o.simpleCheckForValidColor(V);if(W){var ie=o.toState(V,V.h||te.state.oldHue);te.setState(ie),te.props.onChangeComplete&&te.debounce(te.props.onChangeComplete,ie,ne),te.props.onChange&&te.props.onChange(ie,ne)}},te.handleSwatchHover=function(V,ne){var W=o.simpleCheckForValidColor(V);if(W){var ie=o.toState(V,V.h||te.state.oldHue);te.props.onSwatchHover&&te.props.onSwatchHover(ie,ne)}},te.state=n({},o.toState(oe.color,0)),te.debounce=(0,s.default)(function(V,ne,W){V(ne,W)},100),te}return e(H,[{key:"render",value:function(){var te={};return this.props.onSwatchHover&&(te.onSwatchHover=this.handleSwatchHover),r.default.createElement(j,n({},this.props,this.state,{onChange:this.handleChange},te))}}],[{key:"getDerivedStateFromProps",value:function(te,V){return n({},o.toState(te.color,V.oldHue))}}]),H}(t.PureComponent||t.Component);return N.propTypes=n({},j.propTypes),N.defaultProps=n({},j.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),N};return K1.default=P,K1}var R1={},xv={},NK;function tle(){if(NK)return xv;NK=1,Object.defineProperty(xv,"__esModule",{value:!0}),xv.handleFocus=void 0;var n=Object.assign||function(p){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var B in x)Object.prototype.hasOwnProperty.call(x,B)&&(p[B]=x[B])}return p},e=function(){function p(v,x){for(var B=0;B<x.length;B++){var T=x[B];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}return function(v,x,B){return x&&p(v.prototype,x),B&&p(v,B),v}}(),t=Na(),r=i(t);function i(p){return p&&p.__esModule?p:{default:p}}function s(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function l(p,v){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:p}function o(p,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);p.prototype=Object.create(v&&v.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(p,v):p.__proto__=v)}return xv.handleFocus=function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(B){o(T,B);function T(){var P,U,j,N;s(this,T);for(var q=arguments.length,H=Array(q),oe=0;oe<q;oe++)H[oe]=arguments[oe];return N=(U=(j=l(this,(P=T.__proto__||Object.getPrototypeOf(T)).call.apply(P,[this].concat(H))),j),j.state={focus:!1},j.handleFocus=function(){return j.setState({focus:!0})},j.handleBlur=function(){return j.setState({focus:!1})},U),l(j,N)}return e(T,[{key:"render",value:function(){return r.default.createElement(x,{onFocus:this.handleFocus,onBlur:this.handleBlur},r.default.createElement(v,n({},this.props,this.state)))}}]),T}(r.default.Component)},xv}var WK;function nle(){if(WK)return R1;WK=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.Swatch=void 0;var n=Object.assign||function(B){for(var T=1;T<arguments.length;T++){var P=arguments[T];for(var U in P)Object.prototype.hasOwnProperty.call(P,U)&&(B[U]=P[U])}return B},e=Na(),t=p(e),r=bp(),i=p(r),s=tle(),l=YO(),o=p(l);function p(B){return B&&B.__esModule?B:{default:B}}var v=13,x=R1.Swatch=function(T){var P=T.color,U=T.style,j=T.onClick,N=j===void 0?function(){}:j,q=T.onHover,H=T.title,oe=H===void 0?P:H,te=T.children,V=T.focus,ne=T.focusStyle,W=ne===void 0?{}:ne,ie=P==="transparent",he=(0,i.default)({default:{swatch:n({background:P,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},U,V?W:{})}}),fe=function(xe){return N(P,xe)},Ee=function(xe){return xe.keyCode===v&&N(P,xe)},me=function(xe){return q(P,xe)},Me={};return q&&(Me.onMouseOver=me),t.default.createElement("div",n({style:he.swatch,onClick:fe,title:oe,tabIndex:0,onKeyDown:Ee},Me),te,ie&&t.default.createElement(o.default,{borderRadius:he.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};return R1.default=(0,s.handleFocus)(x),R1}var GK;function vj(){return GK||(GK=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Lae();Object.defineProperty(n,"Alpha",{enumerable:!0,get:function(){return v(e).default}});var t=YO();Object.defineProperty(n,"Checkboard",{enumerable:!0,get:function(){return v(t).default}});var r=Uae();Object.defineProperty(n,"EditableInput",{enumerable:!0,get:function(){return v(r).default}});var i=jae();Object.defineProperty(n,"Hue",{enumerable:!0,get:function(){return v(i).default}});var s=Nae();Object.defineProperty(n,"Raised",{enumerable:!0,get:function(){return v(s).default}});var l=$ae();Object.defineProperty(n,"Saturation",{enumerable:!0,get:function(){return v(l).default}});var o=ele();Object.defineProperty(n,"ColorWrap",{enumerable:!0,get:function(){return v(o).default}});var p=nle();Object.defineProperty(n,"Swatch",{enumerable:!0,get:function(){return v(p).default}});function v(x){return x&&x.__esModule?x:{default:x}}}(vS)),vS}var D1={},BS,QK;function rle(){if(QK)return BS;QK=1;function n(e){return e===void 0}return BS=n,BS}var pb={},YK;function ile(){if(YK)return pb;YK=1,Object.defineProperty(pb,"__esModule",{value:!0});var n=Object.assign||function(l){for(var o=1;o<arguments.length;o++){var p=arguments[o];for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(l[v]=p[v])}return l},e=Na(),t=r(e);function r(l){return l&&l.__esModule?l:{default:l}}function i(l,o){var p={};for(var v in l)o.indexOf(v)>=0||Object.prototype.hasOwnProperty.call(l,v)&&(p[v]=l[v]);return p}var s=24;return pb.default=function(l){var o=l.fill,p=o===void 0?"currentColor":o,v=l.width,x=v===void 0?s:v,B=l.height,T=B===void 0?s:B,P=l.style,U=P===void 0?{}:P,j=i(l,["fill","width","height","style"]);return t.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:p,width:x,height:T},U)},j),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},pb}var qK;function ole(){if(qK)return D1;qK=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.ChromeFields=void 0;var n=function(){function H(oe,te){for(var V=0;V<te.length;V++){var ne=te[V];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(oe,ne.key,ne)}}return function(oe,te,V){return te&&H(oe.prototype,te),V&&H(oe,V),oe}}(),e=Na(),t=P(e),r=bp(),i=P(r),s=yj(),l=T(s),o=rle(),p=P(o),v=vj(),x=ile(),B=P(x);function T(H){if(H&&H.__esModule)return H;var oe={};if(H!=null)for(var te in H)Object.prototype.hasOwnProperty.call(H,te)&&(oe[te]=H[te]);return oe.default=H,oe}function P(H){return H&&H.__esModule?H:{default:H}}function U(H,oe){if(!(H instanceof oe))throw new TypeError("Cannot call a class as a function")}function j(H,oe){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:H}function N(H,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);H.prototype=Object.create(oe&&oe.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(H,oe):H.__proto__=oe)}var q=D1.ChromeFields=function(H){N(oe,H);function oe(te){U(this,oe);var V=j(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this));return V.toggleViews=function(){V.state.view==="hex"?V.setState({view:"rgb"}):V.state.view==="rgb"?V.setState({view:"hsl"}):V.state.view==="hsl"&&(V.props.hsl.a===1?V.setState({view:"hex"}):V.setState({view:"rgb"}))},V.handleChange=function(ne,W){ne.hex?l.isValidHex(ne.hex)&&V.props.onChange({hex:ne.hex,source:"hex"},W):ne.r||ne.g||ne.b?V.props.onChange({r:ne.r||V.props.rgb.r,g:ne.g||V.props.rgb.g,b:ne.b||V.props.rgb.b,source:"rgb"},W):ne.a?(ne.a<0?ne.a=0:ne.a>1&&(ne.a=1),V.props.onChange({h:V.props.hsl.h,s:V.props.hsl.s,l:V.props.hsl.l,a:Math.round(ne.a*100)/100,source:"rgb"},W)):(ne.h||ne.s||ne.l)&&(typeof ne.s=="string"&&ne.s.includes("%")&&(ne.s=ne.s.replace("%","")),typeof ne.l=="string"&&ne.l.includes("%")&&(ne.l=ne.l.replace("%","")),ne.s==1?ne.s=.01:ne.l==1&&(ne.l=.01),V.props.onChange({h:ne.h||V.props.hsl.h,s:Number((0,p.default)(ne.s)?V.props.hsl.s:ne.s),l:Number((0,p.default)(ne.l)?V.props.hsl.l:ne.l),source:"hsl"},W))},V.showHighlight=function(ne){ne.currentTarget.style.background="#eee"},V.hideHighlight=function(ne){ne.currentTarget.style.background="transparent"},te.hsl.a!==1&&te.view==="hex"?V.state={view:"rgb"}:V.state={view:te.view},V}return n(oe,[{key:"render",value:function(){var V=this,ne=(0,i.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),W=void 0;return this.state.view==="hex"?W=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(v.EditableInput,{style:{input:ne.input,label:ne.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?W=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(v.EditableInput,{style:{input:ne.input,label:ne.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(v.EditableInput,{style:{input:ne.input,label:ne.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(v.EditableInput,{style:{input:ne.input,label:ne.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),t.default.createElement("div",{style:ne.alpha},t.default.createElement(v.EditableInput,{style:{input:ne.input,label:ne.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(W=t.default.createElement("div",{style:ne.fields,className:"flexbox-fix"},t.default.createElement("div",{style:ne.field},t.default.createElement(v.EditableInput,{style:{input:ne.input,label:ne.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(v.EditableInput,{style:{input:ne.input,label:ne.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ne.field},t.default.createElement(v.EditableInput,{style:{input:ne.input,label:ne.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),t.default.createElement("div",{style:ne.alpha},t.default.createElement(v.EditableInput,{style:{input:ne.input,label:ne.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),t.default.createElement("div",{style:ne.wrap,className:"flexbox-fix"},W,t.default.createElement("div",{style:ne.toggle},t.default.createElement("div",{style:ne.icon,onClick:this.toggleViews,ref:function(he){return V.icon=he}},t.default.createElement(B.default,{style:ne.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(V,ne){return V.hsl.a!==1&&ne.view==="hex"?{view:"rgb"}:null}}]),oe}(t.default.Component);return q.defaultProps={view:"hex"},D1.default=q,D1}var F1={},VK;function sle(){if(VK)return F1;VK=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.ChromePointer=void 0;var n=Na(),e=i(n),t=bp(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}var s=F1.ChromePointer=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return e.default.createElement("div",{style:o.picker})};return F1.default=s,F1}var L1={},$K;function ale(){if($K)return L1;$K=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.ChromePointerCircle=void 0;var n=Na(),e=i(n),t=bp(),r=i(t);function i(l){return l&&l.__esModule?l:{default:l}}var s=L1.ChromePointerCircle=function(){var o=(0,r.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return e.default.createElement("div",{style:o.picker})};return L1.default=s,L1}var HK;function lle(){if(HK)return b1;HK=1,Object.defineProperty(b1,"__esModule",{value:!0}),b1.Chrome=void 0;var n=Na(),e=j(n),t=yp(),r=j(t),i=bp(),s=j(i),l=mj(),o=j(l),p=vj(),v=ole(),x=j(v),B=sle(),T=j(B),P=ale(),U=j(P);function j(q){return q&&q.__esModule?q:{default:q}}var N=b1.Chrome=function(H){var oe=H.width,te=H.onChange,V=H.disableAlpha,ne=H.rgb,W=H.hsl,ie=H.hsv,he=H.hex,fe=H.renderers,Ee=H.styles,me=Ee===void 0?{}:Ee,Me=H.className,De=Me===void 0?"":Me,xe=H.defaultView,At=(0,s.default)((0,o.default)({default:{picker:{width:oe,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+ne.r+", "+ne.g+", "+ne.b+", "+ne.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},me),{disableAlpha:V});return e.default.createElement("div",{style:At.picker,className:"chrome-picker "+De},e.default.createElement("div",{style:At.saturation},e.default.createElement(p.Saturation,{style:At.Saturation,hsl:W,hsv:ie,pointer:U.default,onChange:te})),e.default.createElement("div",{style:At.body},e.default.createElement("div",{style:At.controls,className:"flexbox-fix"},e.default.createElement("div",{style:At.color},e.default.createElement("div",{style:At.swatch},e.default.createElement("div",{style:At.active}),e.default.createElement(p.Checkboard,{renderers:fe}))),e.default.createElement("div",{style:At.toggles},e.default.createElement("div",{style:At.hue},e.default.createElement(p.Hue,{style:At.Hue,hsl:W,pointer:T.default,onChange:te})),e.default.createElement("div",{style:At.alpha},e.default.createElement(p.Alpha,{style:At.Alpha,rgb:ne,hsl:W,pointer:T.default,renderers:fe,onChange:te})))),e.default.createElement(x.default,{rgb:ne,hsl:W,hex:he,view:xe,onChange:te,disableAlpha:V})))};return N.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),disableAlpha:r.default.bool,styles:r.default.object,defaultView:r.default.oneOf(["hex","rgb","hsl"])},N.defaultProps={width:225,disableAlpha:!1,styles:{}},b1.default=(0,p.ColorWrap)(N),b1}var ule=lle();const Ale=yl(ule);function to(){var n="/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",e="cb6d03ea084207ffce2f89af246bc26074c13af7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:23}},1:{start:{line:8,column:2},end:{line:8,column:56}},2:{start:{line:11,column:10},end:{line:13,column:3}},3:{start:{line:14,column:15},end:{line:14,column:19}},4:{start:{line:16,column:4},end:{line:16,column:17}},5:{start:{line:17,column:4},end:{line:17,column:75}},6:{start:{line:20,column:4},end:{line:20,column:27}},7:{start:{line:25,column:21},end:{line:39,column:3}},8:{start:{line:26,column:17},end:{line:26,column:32}},9:{start:{line:27,column:4},end:{line:38,column:5}},10:{start:{line:28,column:18},end:{line:28,column:46}},11:{start:{line:29,column:6},end:{line:32,column:8}},12:{start:{line:34,column:6},end:{line:37,column:8}},13:{start:{line:40,column:17},end:{line:42,column:3}},14:{start:{line:41,column:4},end:{line:41,column:62}},15:{start:{line:44,column:4},end:{line:49,column:5}},16:{start:{line:45,column:6},end:{line:45,column:43}},17:{start:{line:47,column:6},end:{line:47,column:49}},18:{start:{line:48,column:6},end:{line:48,column:39}},19:{start:{line:52,column:4},end:{line:52,column:47}},20:{start:{line:55,column:19},end:{line:55,column:42}},21:{start:{line:56,column:25},end:{line:56,column:44}},22:{start:{line:57,column:31},end:{line:63,column:5}},23:{start:{line:64,column:35},end:{line:99,column:5}},24:{start:{line:79,column:31},end:{line:79,column:67}},25:{start:{line:100,column:24},end:{line:102,column:5}},26:{start:{line:103,column:4},end:{line:122,column:9}},27:{start:{line:113,column:26},end:{line:113,column:49}},28:{start:{line:119,column:27},end:{line:119,column:56}}},fnMap:{0:{name:"formatColor",decl:{start:{line:6,column:9},end:{line:6,column:20}},loc:{start:{line:6,column:28},end:{line:9,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:21},end:{line:18,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:21},end:{line:21,column:3}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:25,column:21},end:{line:25,column:22}},loc:{start:{line:25,column:27},end:{line:39,column:3}},line:25},4:{name:"(anonymous_4)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:23},end:{line:42,column:3}},line:40},5:{name:"(anonymous_5)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:14},end:{line:50,column:3}},line:43},6:{name:"(anonymous_6)",decl:{start:{line:51,column:2},end:{line:51,column:3}},loc:{start:{line:51,column:14},end:{line:53,column:3}},line:51},7:{name:"(anonymous_7)",decl:{start:{line:54,column:2},end:{line:54,column:3}},loc:{start:{line:54,column:11},end:{line:123,column:3}},line:54},8:{name:"(anonymous_8)",decl:{start:{line:79,column:24},end:{line:79,column:25}},loc:{start:{line:79,column:31},end:{line:79,column:67}},line:79},9:{name:"(anonymous_9)",decl:{start:{line:113,column:15},end:{line:113,column:16}},loc:{start:{line:113,column:26},end:{line:113,column:49}},line:113},10:{name:"(anonymous_10)",decl:{start:{line:119,column:20},end:{line:119,column:21}},loc:{start:{line:119,column:27},end:{line:119,column:56}},line:119}},branchMap:{0:{loc:{start:{line:27,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:27,column:4},end:{line:38,column:5}},{start:{line:33,column:11},end:{line:38,column:5}}],line:27},1:{loc:{start:{line:52,column:24},end:{line:52,column:45}},type:"cond-expr",locations:[{start:{line:52,column:35},end:{line:52,column:41}},{start:{line:52,column:44},end:{line:52,column:45}}],line:52},2:{loc:{start:{line:104,column:6},end:{line:104,column:39}},type:"binary-expr",locations:[{start:{line:104,column:6},end:{line:104,column:29}},{start:{line:104,column:33},end:{line:104,column:39}}],line:104},3:{loc:{start:{line:118,column:17},end:{line:118,column:57}},type:"cond-expr",locations:[{start:{line:118,column:36},end:{line:118,column:52}},{start:{line:118,column:55},end:{line:118,column:57}}],line:118}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputColor.tsx"],names:[],mappings:"AAsFmB,SAQb,KARa;AAtFnB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AAEzB,OAAO,YAAY;AAEnB,SAAS,YAAY,OAA4B;AAC/C,QAAM,MAAM,MAAM;AAClB,SAAO,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,IAAI,CAAC;AACpD;AAaA,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,QAAQ;AAAA,IACN,cAAc;AAAA,EAChB;AAAA,EACA,aAAsC;AAAA,EAEtC,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,kBAAkB,OAAO,SAAS,KAAK,iBAAiB,MAAK,EAAE;AAAA,EACtE;AAAA,EAEA,gBAAgB,GAAW;AACzB,SAAK,MAAM,SAAS,CAAC;AAAA,EACvB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmB,MAAM;AACvB,UAAM,OAAO,KAAK;AAClB,QAAG,MAAM;AACP,YAAM,MAAM,KAAK,sBAAsB;AACvC,aAAO;AAAA,QACL,KAAK,IAAI;AAAA,QACT,MAAM,IAAI,OAAO;AAAA,MACnB;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,MAAM;AACnB,SAAK,SAAS,EAAE,cAAc,CAAC,KAAK,MAAM,aAAa,CAAC;AAAA,EAC1D;AAAA,EAEA,IAAI,QAAQ;AAEV,QAAI;AACF,aAAO,MAAM,KAAK,MAAM,KAAK,EAAE,IAAI;AAAA,IACrC,SACM,KAAK;AACT,cAAQ,KAAK,yBAAyB,GAAG;AACzC,aAAO,MAAM,kBAAkB;AAAA,IACjC;AAAA,EACF;AAAA,EAEA,SAAU,GAAW;AACnB,SAAK,MAAM,SAAS,MAAM,KAAK,SAAY,CAAC;AAAA,EAC9C;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,iBAAiB;AACrC,UAAM,eAAe,KAAK,MAAM,OAAO;AACvC,UAAM,qBAAqB;AAAA,MACzB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA,MAChB,GAAG,aAAa;AAAA;AAAA,MAEhB,GAAG,aAAa;AAAA,IAClB;AAEA,UAAM,SAAS;AAAA,MAAC;AAAA;AAAA,QACd,WAAU;AAAA,QACV,OAAO;AAAA,UACL,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,MAAM,OAAO;AAAA,UACb,KAAK,OAAO;AAAA,QACd;AAAA,QACA;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,gBAAgB,YAAY,CAAC,CAAC;AAAA;AAAA,UACpD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK;AAAA,cACd,OAAO;AAAA,gBACL,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,OAAO;AAAA,gBACP,QAAQ;AAAA,gBACR,MAAM;AAAA,cACR;AAAA;AAAA,UACF;AAAA;AAAA;AAAA,IACF;AAEA,UAAM,cAAc;AAAA,MAClB,iBAAiB,KAAK,MAAM;AAAA,IAC9B;AAEA,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA,WAAK,MAAM,gBAAgB;AAAA,MAC5B,oBAAC,SAAI,WAAU,yBAAwB,OAAO,aAAa;AAAA,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,cAAa;AAAA,UACb,WAAU;AAAA,UACV,KAAK,CAAC,UAAU,KAAK,aAAa;AAAA,UAClC,SAAS,KAAK;AAAA,UACd,OAAO,KAAK,MAAM;AAAA,UAClB,MAAM,KAAK,MAAM;AAAA,UACjB,aAAa,KAAK,MAAM;AAAA,UACxB,OAAO,KAAK,MAAM,QAAQ,KAAK,MAAM,QAAQ;AAAA,UAC7C,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE,OAAO,KAAK;AAAA;AAAA,MAC/C;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cb6d03ea084207ffce2f89af246bc26074c13af7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return to=function(){return l},l}to();function cle(n){to().f[0]++;const e=(to().s[0]++,n.rgb);return to().s[1]++,`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}class Cj extends sr.Component{constructor(t){to().f[1]++,to().s[4]++;super(t);Pn(this,"state",(to().s[2]++,{pickerOpened:!1}));Pn(this,"colorInput",(to().s[3]++,null));Pn(this,"calcPickerOffset",(to().s[7]++,()=>{to().f[3]++;const t=(to().s[8]++,this.colorInput);if(to().s[9]++,t){to().b[0][0]++;const r=(to().s[10]++,t.getBoundingClientRect());return to().s[11]++,{top:r.top,left:r.left+196}}else return to().b[0][1]++,to().s[12]++,{top:160,left:555}}));Pn(this,"togglePicker",(to().s[13]++,()=>{to().f[4]++,to().s[14]++,this.setState({pickerOpened:!this.state.pickerOpened})}));to().s[5]++,this.onChangeNoCheck=kE.throttle(this.onChangeNoCheck,1e3/30)}onChangeNoCheck(t){to().f[2]++,to().s[6]++,this.props.onChange(t)}get color(){to().f[5]++,to().s[15]++;try{return to().s[16]++,DA(this.props.value).rgb()}catch(t){return to().s[17]++,console.warn("Error parsing color: ",t),to().s[18]++,DA("rgb(255,255,255)")}}onChange(t){to().f[6]++,to().s[19]++,this.props.onChange(t===""?(to().b[1][0]++,void 0):(to().b[1][1]++,t))}render(){to().f[7]++;const t=(to().s[20]++,this.calcPickerOffset()),r=(to().s[21]++,this.color.object()),i=(to().s[22]++,{r:r.r,g:r.g,b:r.b,a:r.alpha}),s=(to().s[23]++,le.jsxs("div",{className:"maputnik-color-picker-offset",style:{position:"fixed",zIndex:1,left:t.left,top:t.top},children:[le.jsx(Ale,{color:i,onChange:o=>(to().f[8]++,to().s[24]++,this.onChangeNoCheck(cle(o)))}),le.jsx("div",{className:"maputnik-color-picker-offset",onClick:this.togglePicker,style:{zIndex:-1,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}})]})),l=(to().s[25]++,{backgroundColor:this.props.value});return to().s[26]++,le.jsxs("div",{className:"maputnik-color-wrapper",children:[(to().b[2][0]++,this.state.pickerOpened&&(to().b[2][1]++,s)),le.jsx("div",{className:"maputnik-color-swatch",style:l}),le.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",autoComplete:"off",className:"maputnik-color",ref:o=>(to().f[9]++,to().s[27]++,this.colorInput=o),onClick:this.togglePicker,style:this.props.style,name:this.props.name,placeholder:this.props.default,value:this.props.value?(to().b[3][0]++,this.props.value):(to().b[3][1]++,""),onChange:o=>(to().f[10]++,to().s[28]++,this.onChange(o.target.value))})]})}}function fn(){var n="/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",e="ab7734237b4c4e642d73d3a00f670557b7ee2f29",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:8,column:19},end:{line:8,column:24}},2:{start:{line:10,column:4},end:{line:10,column:17}},3:{start:{line:11,column:4},end:{line:16,column:6}},4:{start:{line:19,column:4},end:{line:24,column:5}},5:{start:{line:20,column:6},end:{line:23,column:8}},6:{start:{line:25,column:4},end:{line:25,column:16}},7:{start:{line:28,column:18},end:{line:28,column:77}},8:{start:{line:29,column:23},end:{line:29,column:49}},9:{start:{line:30,column:4},end:{line:39,column:5}},10:{start:{line:31,column:6},end:{line:31,column:58}},11:{start:{line:31,column:31},end:{line:31,column:58}},12:{start:{line:32,column:6},end:{line:34,column:9}},13:{start:{line:35,column:11},end:{line:39,column:5}},14:{start:{line:36,column:6},end:{line:38,column:9}},15:{start:{line:40,column:4},end:{line:42,column:7}},16:{start:{line:45,column:4},end:{line:47,column:5}},17:{start:{line:46,column:6},end:{line:46,column:18}},18:{start:{line:48,column:18},end:{line:48,column:20}},19:{start:{line:49,column:4},end:{line:51,column:5}},20:{start:{line:50,column:6},end:{line:50,column:19}},21:{start:{line:52,column:4},end:{line:54,column:5}},22:{start:{line:53,column:6},end:{line:53,column:19}},23:{start:{line:55,column:4},end:{line:57,column:5}},24:{start:{line:56,column:6},end:{line:56,column:19}},25:{start:{line:58,column:4},end:{line:58,column:16}},26:{start:{line:60,column:15},end:{line:74,column:3}},27:{start:{line:61,column:4},end:{line:61,column:38}},28:{start:{line:62,column:4},end:{line:64,column:5}},29:{start:{line:63,column:6},end:{line:63,column:13}},30:{start:{line:65,column:4},end:{line:73,column:5}},31:{start:{line:66,column:6},end:{line:72,column:7}},32:{start:{line:67,column:8},end:{line:67,column:43}},33:{start:{line:68,column:8},end:{line:68,column:56}},34:{start:{line:70,column:8},end:{line:70,column:33}},35:{start:{line:71,column:8},end:{line:71,column:46}},36:{start:{line:75,column:18},end:{line:100,column:3}},37:{start:{line:76,column:16},end:{line:76,column:42}},38:{start:{line:77,column:17},end:{line:77,column:37}},39:{start:{line:78,column:21},end:{line:78,column:26}},40:{start:{line:79,column:4},end:{line:95,column:5}},41:{start:{line:80,column:19},end:{line:80,column:31}},42:{start:{line:81,column:6},end:{line:94,column:7}},43:{start:{line:82,column:8},end:{line:86,column:9}},44:{start:{line:83,column:10},end:{line:83,column:42}},45:{start:{line:85,column:10},end:{line:85,column:42}},46:{start:{line:87,column:8},end:{line:87,column:27}},47:{start:{line:89,column:8},end:{line:93,column:9}},48:{start:{line:90,column:10},end:{line:90,column:31}},49:{start:{line:92,column:10},end:{line:92,column:40}},50:{start:{line:96,column:4},end:{line:96,column:32}},51:{start:{line:97,column:4},end:{line:97,column:70}},52:{start:{line:98,column:4},end:{line:98,column:41}},53:{start:{line:99,column:4},end:{line:99,column:56}},54:{start:{line:99,column:29},end:{line:99,column:56}},55:{start:{line:102,column:4},end:{line:185,column:5}},56:{start:{line:103,column:20},end:{line:103,column:81}},57:{start:{line:104,column:27},end:{line:104,column:82}},58:{start:{line:106,column:6},end:{line:110,column:7}},59:{start:{line:107,column:8},end:{line:107,column:38}},60:{start:{line:109,column:8},end:{line:109,column:27}},61:{start:{line:111,column:6},end:{line:165,column:11}},62:{start:{line:124,column:14},end:{line:124,column:41}},63:{start:{line:127,column:14},end:{line:127,column:67}},64:{start:{line:130,column:14},end:{line:130,column:69}},65:{start:{line:133,column:14},end:{line:137,column:17}},66:{start:{line:152,column:14},end:{line:152,column:47}},67:{start:{line:155,column:14},end:{line:155,column:47}},68:{start:{line:158,column:14},end:{line:158,column:48}},69:{start:{line:159,column:14},end:{line:159,column:32}},70:{start:{line:167,column:20},end:{line:167,column:81}},71:{start:{line:168,column:6},end:{line:184,column:8}},72:{start:{line:176,column:27},end:{line:176,column:59}},73:{start:{line:178,column:12},end:{line:178,column:45}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:21},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:26,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:27,column:2},end:{line:27,column:3}},loc:{start:{line:27,column:24},end:{line:43,column:3}},line:27},3:{name:"(anonymous_3)",decl:{start:{line:44,column:2},end:{line:44,column:3}},loc:{start:{line:44,column:13},end:{line:59,column:3}},line:44},4:{name:"(anonymous_4)",decl:{start:{line:60,column:15},end:{line:60,column:16}},loc:{start:{line:60,column:21},end:{line:74,column:3}},line:60},5:{name:"(anonymous_5)",decl:{start:{line:75,column:18},end:{line:75,column:19}},loc:{start:{line:75,column:25},end:{line:100,column:3}},line:75},6:{name:"(anonymous_6)",decl:{start:{line:101,column:2},end:{line:101,column:3}},loc:{start:{line:101,column:11},end:{line:186,column:3}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:123,column:23},end:{line:123,column:24}},loc:{start:{line:123,column:29},end:{line:125,column:13}},line:123},8:{name:"(anonymous_8)",decl:{start:{line:126,column:27},end:{line:126,column:28}},loc:{start:{line:126,column:33},end:{line:128,column:13}},line:126},9:{name:"(anonymous_9)",decl:{start:{line:129,column:25},end:{line:129,column:26}},loc:{start:{line:129,column:31},end:{line:131,column:13}},line:129},10:{name:"(anonymous_10)",decl:{start:{line:132,column:20},end:{line:132,column:21}},loc:{start:{line:132,column:26},end:{line:138,column:13}},line:132},11:{name:"(anonymous_11)",decl:{start:{line:151,column:21},end:{line:151,column:22}},loc:{start:{line:151,column:29},end:{line:153,column:13}},line:151},12:{name:"(anonymous_12)",decl:{start:{line:154,column:22},end:{line:154,column:23}},loc:{start:{line:154,column:29},end:{line:156,column:13}},line:154},13:{name:"(anonymous_13)",decl:{start:{line:157,column:20},end:{line:157,column:21}},loc:{start:{line:157,column:28},end:{line:160,column:13}},line:157},14:{name:"(anonymous_14)",decl:{start:{line:176,column:20},end:{line:176,column:21}},loc:{start:{line:176,column:27},end:{line:176,column:59}},line:176},15:{name:"(anonymous_15)",decl:{start:{line:177,column:19},end:{line:177,column:20}},loc:{start:{line:177,column:25},end:{line:179,column:11}},line:177}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:22}},{start:{line:19,column:26},end:{line:19,column:53}}],line:19},2:{loc:{start:{line:28,column:18},end:{line:28,column:77}},type:"cond-expr",locations:[{start:{line:28,column:59},end:{line:28,column:65}},{start:{line:28,column:68},end:{line:28,column:77}}],line:28},3:{loc:{start:{line:28,column:18},end:{line:28,column:56}},type:"binary-expr",locations:[{start:{line:28,column:18},end:{line:28,column:33}},{start:{line:28,column:37},end:{line:28,column:56}}],line:28},4:{loc:{start:{line:30,column:4},end:{line:39,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:39,column:5}},{start:{line:35,column:11},end:{line:39,column:5}}],line:30},5:{loc:{start:{line:30,column:8},end:{line:30,column:41}},type:"binary-expr",locations:[{start:{line:30,column:8},end:{line:30,column:27}},{start:{line:30,column:31},end:{line:30,column:41}}],line:30},6:{loc:{start:{line:31,column:6},end:{line:31,column:58}},type:"if",locations:[{start:{line:31,column:6},end:{line:31,column:58}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31},7:{loc:{start:{line:35,column:11},end:{line:39,column:5}},type:"if",locations:[{start:{line:35,column:11},end:{line:39,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},8:{loc:{start:{line:35,column:15},end:{line:35,column:49}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:35}},{start:{line:35,column:39},end:{line:35,column:49}}],line:35},9:{loc:{start:{line:41,column:18},end:{line:41,column:53}},type:"cond-expr",locations:[{start:{line:41,column:36},end:{line:41,column:42}},{start:{line:41,column:45},end:{line:41,column:53}}],line:41},10:{loc:{start:{line:45,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:47,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},11:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},12:{loc:{start:{line:52,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:52,column:4},end:{line:54,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:52},13:{loc:{start:{line:52,column:8},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:8},end:{line:52,column:30}},{start:{line:52,column:34},end:{line:52,column:56}}],line:52},14:{loc:{start:{line:55,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:57,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},15:{loc:{start:{line:55,column:8},end:{line:55,column:56}},type:"binary-expr",locations:[{start:{line:55,column:8},end:{line:55,column:30}},{start:{line:55,column:34},end:{line:55,column:56}}],line:55},16:{loc:{start:{line:62,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:64,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:62},17:{loc:{start:{line:65,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:73,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},18:{loc:{start:{line:66,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:66,column:6},end:{line:72,column:7}},{start:{line:69,column:13},end:{line:72,column:7}}],line:66},19:{loc:{start:{line:79,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},20:{loc:{start:{line:81,column:6},end:{line:94,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:94,column:7}},{start:{line:88,column:13},end:{line:94,column:7}}],line:81},21:{loc:{start:{line:82,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:82,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:82},22:{loc:{start:{line:89,column:8},end:{line:93,column:9}},type:"if",locations:[{start:{line:89,column:8},end:{line:93,column:9}},{start:{line:91,column:15},end:{line:93,column:9}}],line:89},23:{loc:{start:{line:99,column:4},end:{line:99,column:56}},type:"if",locations:[{start:{line:99,column:4},end:{line:99,column:56}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:99},24:{loc:{start:{line:102,column:4},end:{line:185,column:5}},type:"if",locations:[{start:{line:102,column:4},end:{line:185,column:5}},{start:{line:166,column:11},end:{line:185,column:5}}],line:102},25:{loc:{start:{line:102,column:8},end:{line:102,column:205}},type:"binary-expr",locations:[{start:{line:102,column:8},end:{line:102,column:63}},{start:{line:102,column:67},end:{line:102,column:122}},{start:{line:102,column:126},end:{line:102,column:151}},{start:{line:102,column:155},end:{line:102,column:180}},{start:{line:102,column:184},end:{line:102,column:205}}],line:102},26:{loc:{start:{line:103,column:20},end:{line:103,column:81}},type:"cond-expr",locations:[{start:{line:103,column:41},end:{line:103,column:62}},{start:{line:103,column:65},end:{line:103,column:81}}],line:103},27:{loc:{start:{line:104,column:27},end:{line:104,column:82}},type:"cond-expr",locations:[{start:{line:104,column:59},end:{line:104,column:61}},{start:{line:104,column:64},end:{line:104,column:82}}],line:104},28:{loc:{start:{line:106,column:6},end:{line:110,column:7}},type:"if",locations:[{start:{line:106,column:6},end:{line:110,column:7}},{start:{line:108,column:13},end:{line:110,column:7}}],line:106},29:{loc:{start:{line:121,column:19},end:{line:121,column:58}},type:"cond-expr",locations:[{start:{line:121,column:38},end:{line:121,column:50}},{start:{line:121,column:53},end:{line:121,column:58}}],line:121},30:{loc:{start:{line:150,column:19},end:{line:150,column:58}},type:"cond-expr",locations:[{start:{line:150,column:43},end:{line:150,column:45}},{start:{line:150,column:48},end:{line:150,column:58}}],line:150},31:{loc:{start:{line:167,column:20},end:{line:167,column:81}},type:"cond-expr",locations:[{start:{line:167,column:41},end:{line:167,column:62}},{start:{line:167,column:65},end:{line:167,column:81}}],line:167},32:{loc:{start:{line:175,column:17},end:{line:175,column:46}},type:"cond-expr",locations:[{start:{line:175,column:36},end:{line:175,column:38}},{start:{line:175,column:41},end:{line:175,column:46}}],line:175}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0,0,0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputNumber.tsx"],names:[],mappings:"AA8Ka,SACL,KADK;AA9Kb,OAAO,WAAmC;AAC1C,OAAO,sBAAsB;AA0B7B,qBAAqB,oBAAoB,MAAM,UAA8C;AAAA,EAC3F,OAAO,eAAe;AAAA,IACpB,WAAW;AAAA,EACb;AAAA,EACA,iBAA0B;AAAA,EAE1B,YAAY,OAAyB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM,CAAC,iBAAiB;AAAA,MACxB,SAAS;AAAA,MACT,OAAO,MAAM;AAAA,MACb,YAAY,MAAM;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAmC,OAAyB;AAC1F,QAAI,CAAC,MAAM,WAAW,MAAM,UAAU,MAAM,OAAO;AACjD,aAAO;AAAA,QACL,OAAO,MAAM;AAAA,QACb,YAAY,MAAM;AAAA,MACpB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,YAAY,UAAuC;AACjD,UAAM,QAAS,aAAa,MAAM,aAAa,SAC7C,SAAY,CAAC;AAEf,UAAM,aAAa,KAAK,MAAM,UAAU;AACxC,QAAG,KAAK,QAAQ,KAAK,KAAK,YAAY;AACpC,UAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAClD,WAAK,SAAS;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,WACS,CAAC,KAAK,QAAQ,KAAK,KAAK,YAAY;AAC3C,WAAK,SAAS;AAAA,QACZ,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAEA,SAAK,SAAS;AAAA,MACZ,YAAY,aAAa,KAAK,SAAY;AAAA,IAC5C,CAAC;AAAA,EACH;AAAA,EAEA,QAAQ,GAAgC;AACtC,QAAI,MAAM,QAAW;AACnB,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,CAAC;AACf,QAAG,MAAM,KAAK,GAAG;AACf,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,QAAG,CAAC,MAAM,KAAK,MAAM,GAAI,KAAK,QAAQ,KAAK,MAAM,KAAM;AACrD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,aAAa,MAAM;AACjB,SAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAE9B,QAAG,CAAC,KAAK,MAAM,OAAO;AACpB;AAAA,IACF;AAGA,QAAI,CAAC,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACnC,UAAG,KAAK,QAAQ,KAAK,MAAM,KAAK,GAAG;AACjC,aAAK,YAAY,KAAK,MAAM,KAAK;AACjC,aAAK,SAAS,EAAC,YAAY,KAAK,MAAM,MAAK,CAAC;AAAA,MAC9C,OAAO;AACL,aAAK,YAAY,MAAS;AAC1B,aAAK,SAAS,EAAC,YAAY,OAAS,CAAC;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,MAAqE;AACpF,QAAI,QAAQ,WAAW,EAAE,OAAO,KAAK;AACrC,UAAM,OAAO,KAAK,MAAM;AACxB,QAAI,aAAa;AAEjB,QAAG,MAAM;AAEP,YAAM,OAAO,QAAQ;AAGrB,UAAI,KAAK,gBAAgB;AAKvB,YAAI,QAAQ,CAAC,KAAK,MAAM,YAAa;AACnC,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B,OACK;AACH,kBAAQ,KAAK,MAAM,QAAS;AAAA,QAC9B;AACA,qBAAa;AAAA,MACf,OACK;AACH,YAAI,OAAO,OAAK,GAAG;AACjB,kBAAQ,QAAQ;AAAA,QAClB,OACK;AACH,kBAAQ,SAAS,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,SAAK,iBAAiB;AAGtB,YAAQ,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,IAAI,KAAK,MAAM,KAAM,KAAK,CAAC;AAElE,SAAK,SAAS,EAAC,OAAO,WAAU,CAAC;AACjC,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,KAAK;AAAA,EACpD;AAAA,EAEA,SAAS;AACP,QACE,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,OAAO,UAAU,eAAe,KAAK,KAAK,OAAO,KAAK,KACtD,KAAK,MAAM,QAAQ,UAAa,KAAK,MAAM,QAAQ,UACnD,KAAK,MAAM,YACX;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AACtE,YAAM,eAAe,KAAK,MAAM,YAAY,SAAY,KAAK,KAAK,MAAM;AACxE,UAAI;AACJ,UAAI,KAAK,MAAM,cAAc;AAC3B,qBAAa,KAAK,MAAM;AAAA,MAC1B,OACK;AACH,qBAAa;AAAA,MACf;AAEA,aAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,WAAU;AAAA,YAEV,MAAK;AAAA,YACL,KAAK,KAAK,MAAM;AAAA,YAChB,KAAK,KAAK,MAAM;AAAA,YAChB,MAAK;AAAA,YACL,YAAW;AAAA,YACX,OAAO,UAAU,SAAY,eAAe;AAAA,YAC5C,UAAU,KAAK;AAAA,YACf,WAAW,MAAM;AACf,mBAAK,iBAAiB;AAAA,YACxB;AAAA,YACA,eAAe,MAAM;AACnB,mBAAK,SAAS,EAAC,SAAS,MAAM,cAAc,KAAI,CAAC;AAAA,YACnD;AAAA,YACA,aAAa,MAAM;AAEjB,mBAAK,SAAS,EAAC,SAAS,OAAO,cAAc,MAAK,CAAC;AAAA,YACrD;AAAA,YACA,QAAQ,MAAM;AACZ,mBAAK,SAAS;AAAA,gBACZ,SAAS;AAAA,gBACT,cAAc;AAAA,gBACd,YAAY,KAAK,MAAM;AAAA,cACzB,CAAC;AAAA,YACH;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAzBrC;AAAA,QA0BN;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YAEC,MAAK;AAAA,YACL,YAAW;AAAA,YACX,WAAU;AAAA,YACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,YAC1C,OAAO,eAAe,SAAY,KAAK;AAAA,YACvC,SAAS,QAAM;AACb,mBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,YAC/B;AAAA,YACA,UAAU,OAAK;AACb,mBAAK,YAAY,EAAE,OAAO,KAAK;AAAA,YACjC;AAAA,YACA,QAAQ,QAAM;AACZ,mBAAK,SAAS,EAAC,SAAS,MAAK,CAAC;AAC9B,mBAAK,WAAW;AAAA,YAClB;AAAA,YACA,eAAa,KAAK,MAAM,aAAa,IAAI;AAAA;AAAA,UAhBrC;AAAA,QAkBN;AAAA,SACF;AAAA,IACF,OACK;AACH,YAAM,QAAQ,KAAK,MAAM,UAAU,KAAK,MAAM,aAAa,KAAK,MAAM;AAEtE,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,cAAY,KAAK,MAAM,YAAY;AAAA,UACnC,YAAW;AAAA,UACX,WAAU;AAAA,UACV,aAAa,KAAK,MAAM,SAAS,SAAS;AAAA,UAC1C,OAAO,UAAU,SAAY,KAAK;AAAA,UAClC,UAAU,OAAK,KAAK,YAAY,EAAE,OAAO,KAAK;AAAA,UAC9C,SAAS,MAAM;AACb,iBAAK,SAAS,EAAC,SAAS,KAAI,CAAC;AAAA,UAC/B;AAAA,UACA,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK,MAAM;AAAA,UACrB,eAAa,KAAK,MAAM,aAAa;AAAA;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ab7734237b4c4e642d73d3a00f670557b7ee2f29"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return fn=function(){return l},l}fn();class nm extends sr.Component{constructor(t){fn().f[0]++,fn().s[2]++;super(t);Pn(this,"_keyboardEvent",(fn().s[1]++,!1));Pn(this,"resetValue",(fn().s[26]++,()=>{if(fn().f[4]++,fn().s[27]++,this.setState({editing:!1}),fn().s[28]++,this.state.value)fn().b[16][1]++;else{fn().b[16][0]++,fn().s[29]++;return}fn().s[30]++,this.isValid(this.state.value)?fn().b[17][1]++:(fn().b[17][0]++,fn().s[31]++,this.isValid(this.props.value)?(fn().b[18][0]++,fn().s[32]++,this.changeValue(this.props.value),fn().s[33]++,this.setState({dirtyValue:this.props.value})):(fn().b[18][1]++,fn().s[34]++,this.changeValue(void 0),fn().s[35]++,this.setState({dirtyValue:void 0})))}));Pn(this,"onChangeRange",(fn().s[36]++,t=>{fn().f[5]++;let r=(fn().s[37]++,parseFloat(t.target.value));const i=(fn().s[38]++,this.props.rangeStep);let s=(fn().s[39]++,r);if(fn().s[40]++,i){fn().b[19][0]++;const l=(fn().s[41]++,r%i);fn().s[42]++,this._keyboardEvent?(fn().b[20][0]++,fn().s[43]++,r<+this.state.dirtyValue?(fn().b[21][0]++,fn().s[44]++,r=this.state.value-i):(fn().b[21][1]++,fn().s[45]++,r=this.state.value+i),fn().s[46]++,s=r):(fn().b[20][1]++,fn().s[47]++,l<i/2?(fn().b[22][0]++,fn().s[48]++,r=r-l):(fn().b[22][1]++,fn().s[49]++,r=r+(i-l)))}else fn().b[19][1]++;fn().s[50]++,this._keyboardEvent=!1,fn().s[51]++,r=Math.max(this.props.min,Math.min(this.props.max,r)),fn().s[52]++,this.setState({value:r,dirtyValue:s}),fn().s[53]++,this.props.onChange?(fn().b[23][0]++,fn().s[54]++,this.props.onChange(r)):fn().b[23][1]++}));fn().s[3]++,this.state={uuid:+Sy(),editing:!1,value:t.value,dirtyValue:t.value}}static getDerivedStateFromProps(t,r){return fn().f[1]++,fn().s[4]++,fn().b[1][0]++,!r.editing&&(fn().b[1][1]++,t.value!==r.value)?(fn().b[0][0]++,fn().s[5]++,{value:t.value,dirtyValue:t.value}):(fn().b[0][1]++,fn().s[6]++,null)}changeValue(t){fn().f[2]++;const r=(fn().s[7]++,fn().b[3][0]++,t===""||(fn().b[3][1]++,t===void 0)?(fn().b[2][0]++,void 0):(fn().b[2][1]++,+t)),i=(fn().s[8]++,this.props.value!==r);fn().s[9]++,fn().b[5][0]++,this.isValid(r)&&(fn().b[5][1]++,i)?(fn().b[4][0]++,fn().s[10]++,this.props.onChange?(fn().b[6][0]++,fn().s[11]++,this.props.onChange(r)):fn().b[6][1]++,fn().s[12]++,this.setState({value:r})):(fn().b[4][1]++,fn().s[13]++,fn().b[8][0]++,!this.isValid(r)&&(fn().b[8][1]++,i)?(fn().b[7][0]++,fn().s[14]++,this.setState({value:void 0})):fn().b[7][1]++),fn().s[15]++,this.setState({dirtyValue:t===""?(fn().b[9][0]++,void 0):(fn().b[9][1]++,t)})}isValid(t){if(fn().f[3]++,fn().s[16]++,t===void 0)return fn().b[10][0]++,fn().s[17]++,!0;fn().b[10][1]++;const r=(fn().s[18]++,+t);return fn().s[19]++,isNaN(r)?(fn().b[11][0]++,fn().s[20]++,!1):(fn().b[11][1]++,fn().s[21]++,fn().b[13][0]++,!isNaN(this.props.min)&&(fn().b[13][1]++,r<this.props.min)?(fn().b[12][0]++,fn().s[22]++,!1):(fn().b[12][1]++,fn().s[23]++,fn().b[15][0]++,!isNaN(this.props.max)&&(fn().b[15][1]++,r>this.props.max)?(fn().b[14][0]++,fn().s[24]++,!1):(fn().b[14][1]++,fn().s[25]++,!0)))}render(){var t,r;if(fn().f[6]++,fn().s[55]++,fn().b[25][0]++,Object.prototype.hasOwnProperty.call(this.props,"min")&&(fn().b[25][1]++,Object.prototype.hasOwnProperty.call(this.props,"max"))&&(fn().b[25][2]++,this.props.min!==void 0)&&(fn().b[25][3]++,this.props.max!==void 0)&&(fn().b[25][4]++,this.props.allowRange)){fn().b[24][0]++;const i=(fn().s[56]++,this.state.editing?(fn().b[26][0]++,this.state.dirtyValue):(fn().b[26][1]++,this.state.value)),s=(fn().s[57]++,this.props.default===void 0?(fn().b[27][0]++,""):(fn().b[27][1]++,this.props.default));let l;return fn().s[58]++,this.state.editingRange?(fn().b[28][0]++,fn().s[59]++,l=this.state.value):(fn().b[28][1]++,fn().s[60]++,l=i),fn().s[61]++,le.jsxs("div",{className:"maputnik-number-container",children:[le.jsx("input",{className:"maputnik-number-range",type:"range",max:this.props.max,min:this.props.min,step:"any",spellCheck:"false",value:i===void 0?(fn().b[29][0]++,s):(fn().b[29][1]++,i),onChange:this.onChangeRange,onKeyDown:()=>{fn().f[7]++,fn().s[62]++,this._keyboardEvent=!0},onPointerDown:()=>{fn().f[8]++,fn().s[63]++,this.setState({editing:!0,editingRange:!0})},onPointerUp:()=>{fn().f[9]++,fn().s[64]++,this.setState({editing:!1,editingRange:!1})},onBlur:()=>{fn().f[10]++,fn().s[65]++,this.setState({editing:!1,editingRange:!1,dirtyValue:this.state.value})},"data-wd-key":this.props["data-wd-key"]+"-range"},"range"),le.jsx("input",{type:"text",spellCheck:"false",className:"maputnik-number",placeholder:(t=this.props.default)==null?void 0:t.toString(),value:l===void 0?(fn().b[30][0]++,""):(fn().b[30][1]++,l),onFocus:o=>{fn().f[11]++,fn().s[66]++,this.setState({editing:!0})},onChange:o=>{fn().f[12]++,fn().s[67]++,this.changeValue(o.target.value)},onBlur:o=>{fn().f[13]++,fn().s[68]++,this.setState({editing:!1}),fn().s[69]++,this.resetValue()},"data-wd-key":this.props["data-wd-key"]+"-text"},"text")]})}else{fn().b[24][1]++;const i=(fn().s[70]++,this.state.editing?(fn().b[31][0]++,this.state.dirtyValue):(fn().b[31][1]++,this.state.value));return fn().s[71]++,le.jsx("input",{"aria-label":this.props["aria-label"],spellCheck:"false",className:"maputnik-number",placeholder:(r=this.props.default)==null?void 0:r.toString(),value:i===void 0?(fn().b[32][0]++,""):(fn().b[32][1]++,i),onChange:s=>(fn().f[14]++,fn().s[72]++,this.changeValue(s.target.value)),onFocus:()=>{fn().f[15]++,fn().s[73]++,this.setState({editing:!0})},onBlur:this.resetValue,required:this.props.required,"data-wd-key":this.props["data-wd-key"]})}}}Pn(nm,"defaultProps",(fn().s[0]++,{rangeStep:1}));function Fp(){var n="/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",e="e85f7924976070cbab7795bce9cf0e191e4a6b5e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx",statementMap:{0:{start:{line:4,column:24},end:{line:6,column:3}},1:{start:{line:7,column:13},end:{line:9,column:3}},2:{start:{line:8,column:4},end:{line:8,column:43}},3:{start:{line:11,column:4},end:{line:26,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:13},end:{line:7,column:14}},loc:{start:{line:7,column:19},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:27,column:3}},line:10}},branchMap:{0:{loc:{start:{line:24,column:17},end:{line:24,column:53}},type:"cond-expr",locations:[{start:{line:24,column:36},end:{line:24,column:44}},{start:{line:24,column:47},end:{line:24,column:53}}],line:24}},s:{0:0,1:0,2:0,3:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputCheckbox.tsx"],names:[],mappings:"AAkBW,SACL,KADK;AAlBX,OAAO,WAAW;AAQlB,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,OAAO,eAAe;AAAA,IACpB,OAAO;AAAA,EACT;AAAA,EAEA,WAAW,MAAM;AACf,SAAK,MAAM,SAAS,CAAC,KAAK,MAAM,KAAK;AAAA,EACvC;AAAA,EAEA,SAAS;AACP,WAAO,qBAAC,SAAI,WAAU,6BACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,MAAK;AAAA,UACL,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,SAAS,KAAK;AAAA,UACd,SAAS,KAAK,MAAM;AAAA;AAAA,MACtB;AAAA,MACA,oBAAC,SAAI,WAAU,yBACb,8BAAC,SAAI,OAAO;AAAA,QACV,SAAS,KAAK,MAAM,QAAQ,WAAW;AAAA,MACzC,GAAG,WAAU,0BAAyB,SAAQ,aAC5C,8BAAC,UAAK,GAAE,2CAA0C,GACpD,GACF;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e85f7924976070cbab7795bce9cf0e191e4a6b5e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fp=function(){return l},l}Fp();class qO extends sr.Component{constructor(){super(...arguments);Pn(this,"onChange",(Fp().s[1]++,()=>{Fp().f[0]++,Fp().s[2]++,this.props.onChange(!this.props.value)}))}render(){return Fp().f[1]++,Fp().s[3]++,le.jsxs("div",{className:"maputnik-checkbox-wrapper",children:[le.jsx("input",{className:"maputnik-checkbox",type:"checkbox",style:this.props.style,onChange:this.onChange,onClick:this.onChange,checked:this.props.value}),le.jsx("div",{className:"maputnik-checkbox-box",children:le.jsx("svg",{style:{display:this.props.value?(Fp().b[0][0]++,"inline"):(Fp().b[0][1]++,"none")},className:"maputnik-checkbox-icon",viewBox:"0 0 32 32",children:le.jsx("path",{d:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z"})})})]})}}Pn(qO,"defaultProps",(Fp().s[0]++,{value:!1}));function $r(){var n="/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",e="9ed81d69001830f70ea45ac1502cde5125167d89",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:11,column:17}},2:{start:{line:12,column:4},end:{line:16,column:6}},3:{start:{line:19,column:18},end:{line:19,column:20}},4:{start:{line:20,column:30},end:{line:20,column:62}},5:{start:{line:21,column:4},end:{line:28,column:7}},6:{start:{line:22,column:6},end:{line:27,column:7}},7:{start:{line:23,column:8},end:{line:23,column:34}},8:{start:{line:25,column:8},end:{line:25,column:34}},9:{start:{line:26,column:8},end:{line:26,column:46}},10:{start:{line:29,column:4},end:{line:32,column:6}},11:{start:{line:35,column:4},end:{line:38,column:7}},12:{start:{line:36,column:18},end:{line:36,column:26}},13:{start:{line:37,column:6},end:{line:37,column:45}},14:{start:{line:41,column:18},end:{line:41,column:43}},15:{start:{line:42,column:4},end:{line:42,column:26}},16:{start:{line:43,column:4},end:{line:51,column:7}},17:{start:{line:46,column:6},end:{line:50,column:7}},18:{start:{line:47,column:8},end:{line:47,column:35}},19:{start:{line:48,column:13},end:{line:50,column:7}},20:{start:{line:49,column:8},end:{line:49,column:36}},21:{start:{line:54,column:22},end:{line:54,column:32}},22:{start:{line:55,column:27},end:{line:57,column:6}},23:{start:{line:56,column:6},end:{line:56,column:42}},24:{start:{line:58,column:19},end:{line:84,column:6}},25:{start:{line:59,column:6},end:{line:83,column:7}},26:{start:{line:60,column:8},end:{line:70,column:10}},27:{start:{line:66,column:29},end:{line:66,column:51}},28:{start:{line:72,column:8},end:{line:82,column:10}},29:{start:{line:85,column:4},end:{line:85,column:89}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:21},end:{line:17,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:48},end:{line:33,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:39},end:{line:21,column:40}},loc:{start:{line:21,column:49},end:{line:28,column:5}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:20},end:{line:39,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:35,column:53},end:{line:35,column:54}},loc:{start:{line:35,column:63},end:{line:38,column:5}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:29},end:{line:52,column:3}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:45,column:7},end:{line:45,column:8}},loc:{start:{line:45,column:13},end:{line:51,column:5}},line:45},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:86,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:55,column:60},end:{line:55,column:61}},loc:{start:{line:55,column:69},end:{line:57,column:5}},line:55},9:{name:"(anonymous_9)",decl:{start:{line:58,column:59},end:{line:58,column:60}},loc:{start:{line:58,column:69},end:{line:84,column:5}},line:58},10:{name:"(anonymous_10)",decl:{start:{line:66,column:22},end:{line:66,column:23}},loc:{start:{line:66,column:29},end:{line:66,column:51}},line:66}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:27,column:7}},type:"if",locations:[{start:{line:22,column:6},end:{line:27,column:7}},{start:{line:24,column:13},end:{line:27,column:7}}],line:22},1:{loc:{start:{line:37,column:15},end:{line:37,column:43}},type:"binary-expr",locations:[{start:{line:37,column:15},end:{line:37,column:29}},{start:{line:37,column:33},end:{line:37,column:43}}],line:37},2:{loc:{start:{line:46,column:6},end:{line:50,column:7}},type:"if",locations:[{start:{line:46,column:6},end:{line:50,column:7}},{start:{line:48,column:13},end:{line:50,column:7}}],line:46},3:{loc:{start:{line:46,column:10},end:{line:46,column:55}},type:"binary-expr",locations:[{start:{line:46,column:10},end:{line:46,column:32}},{start:{line:46,column:36},end:{line:46,column:55}}],line:46},4:{loc:{start:{line:48,column:13},end:{line:50,column:7}},type:"if",locations:[{start:{line:48,column:13},end:{line:50,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},5:{loc:{start:{line:55,column:27},end:{line:57,column:6}},type:"binary-expr",locations:[{start:{line:55,column:27},end:{line:55,column:43}},{start:{line:55,column:47},end:{line:57,column:6}}],line:55},6:{loc:{start:{line:56,column:13},end:{line:56,column:41}},type:"binary-expr",locations:[{start:{line:56,column:13},end:{line:56,column:23}},{start:{line:56,column:27},end:{line:56,column:41}}],line:56},7:{loc:{start:{line:59,column:6},end:{line:83,column:7}},type:"if",locations:[{start:{line:59,column:6},end:{line:83,column:7}},{start:{line:71,column:13},end:{line:83,column:7}}],line:59},8:{loc:{start:{line:63,column:21},end:{line:63,column:91}},type:"cond-expr",locations:[{start:{line:63,column:61},end:{line:63,column:67}},{start:{line:63,column:70},end:{line:63,column:91}}],line:63},9:{loc:{start:{line:63,column:21},end:{line:63,column:58}},type:"binary-expr",locations:[{start:{line:63,column:21},end:{line:63,column:35}},{start:{line:63,column:39},end:{line:63,column:58}}],line:63},10:{loc:{start:{line:65,column:22},end:{line:65,column:51}},type:"cond-expr",locations:[{start:{line:65,column:39},end:{line:65,column:43}},{start:{line:65,column:46},end:{line:65,column:51}}],line:65},11:{loc:{start:{line:67,column:26},end:{line:67,column:70}},type:"binary-expr",locations:[{start:{line:67,column:26},end:{line:67,column:50}},{start:{line:67,column:54},end:{line:67,column:70}}],line:67},12:{loc:{start:{line:75,column:21},end:{line:75,column:91}},type:"cond-expr",locations:[{start:{line:75,column:61},end:{line:75,column:67}},{start:{line:75,column:70},end:{line:75,column:91}}],line:75},13:{loc:{start:{line:75,column:21},end:{line:75,column:58}},type:"binary-expr",locations:[{start:{line:75,column:21},end:{line:75,column:35}},{start:{line:75,column:39},end:{line:75,column:58}}],line:75},14:{loc:{start:{line:77,column:22},end:{line:77,column:51}},type:"cond-expr",locations:[{start:{line:77,column:39},end:{line:77,column:43}},{start:{line:77,column:46},end:{line:77,column:51}}],line:77},15:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputArray.tsx"],names:[],mappings:"AA0Fe;AA1Ff,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AAiBxB,qBAAqB,mBAAmB,MAAM,UAA4C;AAAA,EACxF,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,IACR,SAAS,CAAC;AAAA,EACZ;AAAA,EAEA,YAAa,OAAwB;AACnC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA;AAAA,MAE/B,mBAAmB,KAAK,MAAM,MAAM,MAAM,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAkC,OAAwB;AACxF,UAAM,QAAe,CAAC;AACtB,UAAM,oBAAoB,MAAM,kBAAkB,MAAM,CAAC;AAEzD,UAAM,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC3C,UAAI,MAAM,MAAM,CAAC,MAAM,MAAM,kBAAkB,CAAC,GAAG;AACjD,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MAC1B,OACK;AACH,cAAM,CAAC,IAAI,MAAM,MAAM,CAAC;AACxB,0BAAkB,CAAC,IAAI,MAAM,MAAM,CAAC;AAAA,MACtC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,WAAW,OAAkB;AAC3B,WAAO,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,MAAM,CAAC,GAAG,MAAM;AACzD,YAAM,MAAM,MAAM,CAAC;AACnB,aAAO,EAAE,QAAQ,UAAa,QAAQ;AAAA,IACxC,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,KAAa,UAAuC;AAC9D,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,CAAC;AACtC,UAAM,GAAG,IAAI;AAEb,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,GAAG,MAAM;AACP,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK,MAAM,UAAU;AACjD,aAAK,MAAM,SAAS,KAAK;AAAA,MAC3B,WACS,KAAK,MAAM,UAAS;AAE3B,aAAK,MAAM,SAAS,MAAS;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,UAAM,iBACJ,MAAM,SAAS,KACf,CAAC,MAAM,MAAM,SAAO;AAClB,aAAQ,QAAQ,MAAM,QAAQ;AAAA,IAChC,CAAC;AAGH,UAAM,SAAS,MAAM,KAAK,MAAM,MAAM,EAAE,KAAK,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM;AAC/D,UAAG,KAAK,MAAM,SAAS,UAAU;AAC/B,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,CAAC,MAAM,KAAK,YAAY,GAAG,CAAC;AAAA,YACtC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF,OAAO;AACL,eAAO;AAAA,UAAC;AAAA;AAAA,YAEN,SAAS,kBAAkB,CAAC,KAAK,MAAM,UAAU,SAAY,KAAK,MAAM,QAAQ,CAAC;AAAA,YACjF,OAAO,MAAM,CAAC;AAAA,YACd,UAAU,iBAAiB,OAAO;AAAA,YAClC,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,UAL9C;AAAA,QAMP;AAAA,MACF;AAAA,IACF,CAAC;AAED,WACE,oBAAC,SAAI,WAAU,kBACZ,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9ed81d69001830f70ea45ac1502cde5125167d89"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return $r=function(){return l},l}$r();var SE;let _j=(SE=class extends sr.Component{constructor(e){$r().f[0]++,$r().s[1]++,super(e),$r().s[2]++,this.state={value:this.props.value.slice(0),initialPropsValue:this.props.value.slice(0)}}static getDerivedStateFromProps(e,t){$r().f[1]++;const r=($r().s[3]++,[]),i=($r().s[4]++,t.initialPropsValue.slice(0));return $r().s[5]++,Array(e.length).fill(null).map((s,l)=>{$r().f[2]++,$r().s[6]++,e.value[l]===t.initialPropsValue[l]?($r().b[0][0]++,$r().s[7]++,r[l]=t.value[l]):($r().b[0][1]++,$r().s[8]++,r[l]=t.value[l],$r().s[9]++,i[l]=t.value[l])}),$r().s[10]++,{value:r,initialPropsValue:i}}isComplete(e){return $r().f[3]++,$r().s[11]++,Array(this.props.length).fill(null).every((t,r)=>{$r().f[4]++;const i=($r().s[12]++,e[r]);return $r().s[13]++,$r().b[1][0]++,!(i===void 0||($r().b[1][1]++,i===""))})}changeValue(e,t){$r().f[5]++;const r=($r().s[14]++,this.state.value.slice(0));$r().s[15]++,r[e]=t,$r().s[16]++,this.setState({value:r},()=>{$r().f[6]++,$r().s[17]++,$r().b[3][0]++,this.isComplete(r)&&($r().b[3][1]++,this.props.onChange)?($r().b[2][0]++,$r().s[18]++,this.props.onChange(r)):($r().b[2][1]++,$r().s[19]++,this.props.onChange?($r().b[4][0]++,$r().s[20]++,this.props.onChange(void 0)):$r().b[4][1]++)})}render(){$r().f[7]++;const{value:e}=($r().s[21]++,this.state),t=($r().s[22]++,$r().b[5][0]++,e.length>0&&($r().b[5][1]++,!e.every(i=>($r().f[8]++,$r().s[23]++,$r().b[6][0]++,i===""||($r().b[6][1]++,i===void 0))))),r=($r().s[24]++,Array(this.props.length).fill(null).map((i,s)=>($r().f[9]++,$r().s[25]++,this.props.type==="number"?($r().b[7][0]++,$r().s[26]++,le.jsx(nm,{default:($r().b[9][0]++,t||($r().b[9][1]++,!this.props.default)?($r().b[8][0]++,void 0):($r().b[8][1]++,this.props.default[s])),value:e[s],required:t?($r().b[10][0]++,!0):($r().b[10][1]++,!1),onChange:l=>($r().f[10]++,$r().s[27]++,this.changeValue(s,l)),"aria-label":($r().b[11][0]++,this.props["aria-label"]||($r().b[11][1]++,this.props.label))},s)):($r().b[7][1]++,$r().s[28]++,le.jsx(Pf,{default:($r().b[13][0]++,t||($r().b[13][1]++,!this.props.default)?($r().b[12][0]++,void 0):($r().b[12][1]++,this.props.default[s])),value:e[s],required:t?($r().b[14][0]++,!0):($r().b[14][1]++,!1),onChange:this.changeValue.bind(this,s),"aria-label":($r().b[15][0]++,this.props["aria-label"]||($r().b[15][1]++,this.props.label))},s)))));return $r().s[29]++,le.jsx("div",{className:"maputnik-array",children:r})}},Pn(SE,"defaultProps",($r().s[0]++,{value:[],default:[]})),SE);function dA(){var n="/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",e="c4660c9ecb80d9f1ce71e70441154e1e765b77ab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx",statementMap:{0:{start:{line:6,column:18},end:{line:6,column:36}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:43}},3:{start:{line:8,column:35},end:{line:8,column:41}},4:{start:{line:10,column:26},end:{line:10,column:59}},5:{start:{line:11,column:19},end:{line:32,column:6}},6:{start:{line:12,column:6},end:{line:31,column:8}},7:{start:{line:22,column:34},end:{line:22,column:58}},8:{start:{line:33,column:4},end:{line:33,column:140}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:5,column:2},end:{line:5,column:3}},loc:{start:{line:5,column:11},end:{line:34,column:3}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:8,column:28},end:{line:8,column:29}},loc:{start:{line:8,column:35},end:{line:8,column:41}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:31},end:{line:11,column:32}},loc:{start:{line:11,column:49},end:{line:32,column:5}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:22,column:26},end:{line:22,column:27}},loc:{start:{line:22,column:34},end:{line:22,column:58}},line:22}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:7,column:8},end:{line:7,column:56}},type:"binary-expr",locations:[{start:{line:7,column:8},end:{line:7,column:26}},{start:{line:7,column:30},end:{line:7,column:56}}],line:7},2:{loc:{start:{line:10,column:26},end:{line:10,column:59}},type:"binary-expr",locations:[{start:{line:10,column:26},end:{line:10,column:42}},{start:{line:10,column:46},end:{line:10,column:59}}],line:10}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputMultiInput.tsx"],names:[],mappings:"AAoBa,SAIL,KAJK;AApBb,OAAO,WAAW;AAClB,OAAO,gBAAgB;AAUvB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,QAAI,UAAU,KAAK,MAAM;AACzB,QAAG,QAAQ,SAAS,KAAK,CAAC,MAAM,QAAQ,QAAQ,CAAC,CAAC,GAAG;AACnD,gBAAU,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,IACnC;AAEA,UAAM,gBAAgB,KAAK,MAAM,SAAS,QAAQ,CAAC,EAAE,CAAC;AACtD,UAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,KAAK,KAAK,MAAK;AAC1C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,WAAW,WAAW,4BAA4B,EAAC,4BAA4B,QAAQ,cAAa,CAAC;AAAA,UAErG;AAAA;AAAA,cAAC;AAAA;AAAA,gBAAM,MAAK;AAAA,gBACV,MAAM,KAAK,MAAM;AAAA,gBACjB,UAAU,QAAM,KAAK,MAAM,SAAS,GAAG;AAAA,gBACvC,OAAO;AAAA,gBACP,SAAS,QAAQ;AAAA;AAAA,YACnB;AAAA,YACC;AAAA;AAAA;AAAA,QATI;AAAA,MAUP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,cAAS,WAAU,wBAAuB,cAAY,KAAK,MAAM,YAAY,GAClF,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c4660c9ecb80d9f1ce71e70441154e1e765b77ab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dA=function(){return l},l}dA();class dle extends sr.Component{render(){dA().f[0]++;let e=(dA().s[0]++,this.props.options);dA().s[1]++,dA().b[1][0]++,e.length>0&&(dA().b[1][1]++,!Array.isArray(e[0]))?(dA().b[0][0]++,dA().s[2]++,e=e.map(i=>(dA().f[1]++,dA().s[3]++,[i,i]))):dA().b[0][1]++;const t=(dA().s[4]++,dA().b[2][0]++,this.props.value||(dA().b[2][1]++,e[0][0])),r=(dA().s[5]++,e.map(([i,s])=>(dA().f[2]++,dA().s[6]++,le.jsxs("label",{className:em("maputnik-radio-as-button",{"maputnik-button-selected":i===t}),children:[le.jsx("input",{type:"radio",name:this.props.name,onChange:l=>(dA().f[3]++,dA().s[7]++,this.props.onChange(i)),value:i,checked:i===t}),s]},i))));return dA().s[8]++,le.jsx("fieldset",{className:"maputnik-multibutton","aria-label":this.props["aria-label"],children:r})}}function Fl(){var n="/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",e="d905b5da4422f2b84d44f87b04fda3de421542f5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx",statementMap:{0:{start:{line:6,column:12},end:{line:6,column:13}},1:{start:{line:7,column:2},end:{line:9,column:5}},2:{start:{line:8,column:4},end:{line:8,column:24}},3:{start:{line:10,column:2},end:{line:10,column:13}},4:{start:{line:14,column:54},end:{line:14,column:64}},5:{start:{line:15,column:4},end:{line:36,column:5}},6:{start:{line:16,column:6},end:{line:25,column:8}},7:{start:{line:27,column:6},end:{line:35,column:8}}},fnMap:{0:{name:"optionsLabelLength",decl:{start:{line:5,column:9},end:{line:5,column:27}},loc:{start:{line:5,column:37},end:{line:11,column:1}},line:5},1:{name:"(anonymous_1)",decl:{start:{line:7,column:18},end:{line:7,column:19}},loc:{start:{line:7,column:34},end:{line:9,column:3}},line:7},2:{name:"(anonymous_2)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:11},end:{line:37,column:3}},line:13}},branchMap:{0:{loc:{start:{line:15,column:4},end:{line:36,column:5}},type:"if",locations:[{start:{line:15,column:4},end:{line:36,column:5}},{start:{line:26,column:11},end:{line:36,column:5}}],line:15},1:{loc:{start:{line:15,column:8},end:{line:15,column:64}},type:"binary-expr",locations:[{start:{line:15,column:8},end:{line:15,column:27}},{start:{line:15,column:31},end:{line:15,column:64}}],line:15},2:{loc:{start:{line:21,column:17},end:{line:21,column:44}},type:"binary-expr",locations:[{start:{line:21,column:17},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:44}}],line:21},3:{loc:{start:{line:23,column:24},end:{line:23,column:57}},type:"binary-expr",locations:[{start:{line:23,column:24},end:{line:23,column:48}},{start:{line:23,column:52},end:{line:23,column:57}}],line:23},4:{loc:{start:{line:31,column:17},end:{line:31,column:44}},type:"binary-expr",locations:[{start:{line:31,column:17},end:{line:31,column:22}},{start:{line:31,column:26},end:{line:31,column:44}}],line:31},5:{loc:{start:{line:33,column:24},end:{line:33,column:57}},type:"binary-expr",locations:[{start:{line:33,column:24},end:{line:33,column:48}},{start:{line:33,column:52},end:{line:33,column:57}}],line:33}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputEnum.tsx"],names:[],mappings:"AAgCa;AAhCb,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,qBAAqB;AAG5B,SAAS,mBAAmB,SAAgB;AAC1C,MAAI,MAAM;AACV,UAAQ,QAAQ,CAAC,CAAC,GAAG,KAAK,MAAM;AAC9B,WAAO,MAAM;AAAA,EACf,CAAC;AACD,SAAO;AACT;AAgBA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,EAAC,SAAS,OAAO,UAAU,MAAM,MAAK,IAAI,KAAK;AAErD,QAAG,QAAQ,UAAU,KAAK,mBAAmB,OAAO,KAAK,IAAI;AAC3D,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF,OAAO;AACL,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,OAAQ,SAAS,KAAK,MAAM;AAAA,UAC5B;AAAA,UACA,cAAY,KAAK,MAAM,YAAY,KAAK;AAAA;AAAA,MAC1C;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d905b5da4422f2b84d44f87b04fda3de421542f5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fl=function(){return l},l}Fl();function hle(n){Fl().f[0]++;let e=(Fl().s[0]++,0);return Fl().s[1]++,n.forEach(([t,r])=>{Fl().f[1]++,Fl().s[2]++,e+=r.length}),Fl().s[3]++,e}class VO extends sr.Component{render(){Fl().f[2]++;const{options:e,value:t,onChange:r,name:i,label:s}=(Fl().s[4]++,this.props);return Fl().s[5]++,Fl().b[1][0]++,e.length<=3&&(Fl().b[1][1]++,hle(e)<=20)?(Fl().b[0][0]++,Fl().s[6]++,le.jsx(dle,{name:i,options:e,value:(Fl().b[2][0]++,t||(Fl().b[2][1]++,this.props.default)),onChange:r,"aria-label":(Fl().b[3][0]++,this.props["aria-label"]||(Fl().b[3][1]++,s))})):(Fl().b[0][1]++,Fl().s[7]++,le.jsx(Qg,{options:e,value:(Fl().b[4][0]++,t||(Fl().b[4][1]++,this.props.default)),onChange:r,"aria-label":(Fl().b[5][0]++,this.props["aria-label"]||(Fl().b[5][1]++,s))}))}}function Ay(){var n="/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",e="d603f5ded455e8f3bb5709d22f215a115aa4ac65",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:4},end:{line:12,column:9}},2:{start:{line:15,column:19},end:{line:15,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:13,column:3}},line:6}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SmallError.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AACjD,OAAO;AAOP,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAU;AACR,UAAM,IAAI,KAAK,MAAM;AACrB,WACE,qBAAC,SAAI,WAAU,cACZ;AAAA,QAAE,QAAQ;AAAA,MAAE;AAAA,MAAE,KAAK,MAAM;AAAA,OAC5B;AAAA,EAEJ;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d603f5ded455e8f3bb5709d22f215a115aa4ac65"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ay=function(){return l},l}Ay();class fle extends sr.Component{render(){Ay().f[0]++;const e=(Ay().s[0]++,this.props.t);return Ay().s[1]++,le.jsxs("div",{className:"SmallError",children:[e("Error:")," ",this.props.children]})}}const OS=(Ay().s[2]++,Ws()(fle));function no(){var n="/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",e="b8761d76778c2aebcb896575c951cf64cf76ecb7",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx",statementMap:{0:{start:{line:7,column:2},end:{line:9,column:3}},1:{start:{line:8,column:4},end:{line:8,column:11}},2:{start:{line:11,column:22},end:{line:18,column:3}},3:{start:{line:12,column:4},end:{line:17,column:5}},4:{start:{line:13,column:21},end:{line:13,column:34}},5:{start:{line:14,column:6},end:{line:14,column:29}},6:{start:{line:16,column:6},end:{line:16,column:20}},7:{start:{line:19,column:19},end:{line:19,column:35}},8:{start:{line:20,column:16},end:{line:20,column:53}},9:{start:{line:21,column:2},end:{line:41,column:3}},10:{start:{line:22,column:4},end:{line:34,column:5}},11:{start:{line:23,column:6},end:{line:26,column:14}},12:{start:{line:28,column:6},end:{line:33,column:14}},13:{start:{line:35,column:9},end:{line:41,column:3}},14:{start:{line:36,column:4},end:{line:40,column:12}},15:{start:{line:42,column:2},end:{line:42,column:15}},16:{start:{line:45,column:24},end:{line:48,column:3}},17:{start:{line:50,column:4},end:{line:50,column:17}},18:{start:{line:51,column:4},end:{line:53,column:6}},19:{start:{line:55,column:12},end:{line:60,column:3}},20:{start:{line:56,column:4},end:{line:58,column:7}},21:{start:{line:59,column:4},end:{line:59,column:52}},22:{start:{line:59,column:28},end:{line:59,column:52}},23:{start:{line:61,column:13},end:{line:66,column:3}},24:{start:{line:62,column:4},end:{line:64,column:7}},25:{start:{line:65,column:4},end:{line:65,column:29}},26:{start:{line:68,column:4},end:{line:79,column:9}},27:{start:{line:82,column:17},end:{line:82,column:52}}},fnMap:{0:{name:"validate",decl:{start:{line:6,column:9},end:{line:6,column:17}},loc:{start:{line:6,column:26},end:{line:43,column:1}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:11,column:22},end:{line:11,column:23}},loc:{start:{line:11,column:32},end:{line:18,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:46,column:13},end:{line:46,column:14}},loc:{start:{line:46,column:19},end:{line:47,column:5}},line:46},3:{name:"(anonymous_3)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:21},end:{line:54,column:3}},line:49},4:{name:"(anonymous_4)",decl:{start:{line:55,column:12},end:{line:55,column:13}},loc:{start:{line:55,column:21},end:{line:60,column:3}},line:55},5:{name:"(anonymous_5)",decl:{start:{line:61,column:13},end:{line:61,column:14}},loc:{start:{line:61,column:22},end:{line:66,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:11},end:{line:80,column:3}},line:67}},branchMap:{0:{loc:{start:{line:7,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:9,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:21,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:21,column:2},end:{line:41,column:3}},{start:{line:35,column:9},end:{line:41,column:3}}],line:21},2:{loc:{start:{line:22,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:34,column:5}},{start:{line:27,column:11},end:{line:34,column:5}}],line:22},3:{loc:{start:{line:35,column:9},end:{line:41,column:3}},type:"if",locations:[{start:{line:35,column:9},end:{line:41,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:35,column:13},end:{line:35,column:86}},type:"binary-expr",locations:[{start:{line:35,column:13},end:{line:35,column:21}},{start:{line:35,column:25},end:{line:35,column:45}},{start:{line:35,column:49},end:{line:35,column:86}}],line:35},5:{loc:{start:{line:59,column:4},end:{line:59,column:52}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:59}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputUrl.tsx"],names:["url"],mappings:"AA4BU,SAAoC,KAApC;AA5BV,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,gBAAgB;AACvB,SAAS,OAAwB,uBAAuB;AAGxD,SAAS,SAAS,KAAa,GAAuC;AACpE,MAAI,QAAQ,IAAI;AACd;AAAA,EACF;AAEA,MAAI;AACJ,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI;AACF,YAAM,SAAS,IAAI,IAAIA,IAAG;AAC1B,aAAO,OAAO;AAAA,IAChB,SACO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACA,QAAM,WAAW,YAAY,GAAG;AAChC,QAAM,QAAQ,OAAO,SAAS,aAAa;AAE3C,MAAI,CAAC,UAAU;AACb,QAAI,OAAO;AACT,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GAC3D;AAAA,IAEJ,OAAO;AACL,cACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,QAAuB,oBAAC,UAAK,qBAAO;AAAA,QAAO;AAAA,QAAI,oBAAC,UAAK,sBAAQ;AAAA,SAAO,GACnF;AAAA,IAEJ;AAAA,EACF,WAEE,YACA,aAAa,WACb,OAAO,SAAS,aAAa,UAC7B;AACA,YACE,oBAAC,cACC,+BAAC,SAAM,GAAM;AAAA;AAAA,MACwE,oBAAC,UAAK,sBAAQ;AAAA,MAAO;AAAA,OAC1G,GACF;AAAA,EAEJ;AAEA,SAAO;AACT;AAsBA,MAAM,yBAAyB,MAAM,UAAgD;AAAA,EACnF,OAAO,eAAe;AAAA,IACpB,SAAS,MAAM;AAAA,IAAC;AAAA,EAClB;AAAA,EAEA,YAAa,OAA8B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,OAAO,SAAS,MAAM,OAAO,MAAM,CAAC;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,UAAU,CAAC,QAAgB;AACzB,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,QAAI,KAAK,MAAM,QAAS,MAAK,MAAM,QAAQ,GAAG;AAAA,EAChD;AAAA,EAEA,WAAW,CAAC,QAAgB;AAC1B,SAAK,SAAS;AAAA,MACZ,OAAO,SAAS,KAAK,KAAK,MAAM,CAAC;AAAA,IACnC,CAAC;AACD,SAAK,MAAM,SAAS,GAAG;AAAA,EACzB;AAAA,EAEA,SAAU;AACR,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACE,GAAG,KAAK;AAAA,UACT,SAAS,KAAK;AAAA,UACd,UAAU,KAAK;AAAA,UACf,cAAY,KAAK,MAAM,YAAY;AAAA;AAAA,MACrC;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEJ;AACF;AAEA,MAAM,WAAW,gBAAgB,EAAE,gBAAgB;AACnD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b8761d76778c2aebcb896575c951cf64cf76ecb7"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return no=function(){return l},l}no();function IS(n,e){if(no().f[0]++,no().s[0]++,n===""){no().b[0][0]++,no().s[1]++;return}else no().b[0][1]++;let t;no().s[2]++;const r=l=>{no().f[1]++,no().s[3]++;try{const o=(no().s[4]++,new URL(l));return no().s[5]++,o.protocol}catch{no().s[6]++;return}},i=(no().s[7]++,r(n)),s=(no().s[8]++,window.location.protocol==="https:");return no().s[9]++,i?(no().b[1][1]++,no().s[13]++,no().b[4][0]++,i&&(no().b[4][1]++,i==="http:")&&(no().b[4][2]++,window.location.protocol==="https:")?(no().b[3][0]++,no().s[14]++,t=le.jsx(OS,{children:le.jsxs(E0,{t:e,children:["CORS policy won't allow fetching resources served over http from https, use a ",le.jsx("code",{children:"https://"})," domain"]})})):no().b[3][1]++):(no().b[1][0]++,no().s[10]++,s?(no().b[2][0]++,no().s[11]++,t=le.jsx(OS,{children:le.jsxs(E0,{t:e,children:["Must provide protocol: ",le.jsx("code",{children:"https://"})]})})):(no().b[2][1]++,no().s[12]++,t=le.jsx(OS,{children:le.jsxs(E0,{t:e,children:["Must provide protocol: ",le.jsx("code",{children:"http://"})," or ",le.jsx("code",{children:"https://"})]})}))),no().s[15]++,t}class bj extends sr.Component{constructor(t){no().f[3]++,no().s[17]++;super(t);Pn(this,"onInput",(no().s[19]++,t=>{no().f[4]++,no().s[20]++,this.setState({error:IS(t,this.props.t)}),no().s[21]++,this.props.onInput?(no().b[5][0]++,no().s[22]++,this.props.onInput(t)):no().b[5][1]++}));Pn(this,"onChange",(no().s[23]++,t=>{no().f[5]++,no().s[24]++,this.setState({error:IS(t,this.props.t)}),no().s[25]++,this.props.onChange(t)}));no().s[18]++,this.state={error:IS(t.value,t.t)}}render(){return no().f[6]++,no().s[26]++,le.jsxs("div",{children:[le.jsx(Pf,{...this.props,onInput:this.onInput,onChange:this.onChange,"aria-label":this.props["aria-label"]}),this.state.error]})}}Pn(bj,"defaultProps",(no().s[16]++,{onInput:()=>{no().f[2]++}}));const $O=(no().s[27]++,Ws()(bj));function Fr(){var n="/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",e="b43f9efa2bc6409a39f030c91aca2fefba2121b9",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx",statementMap:{0:{start:{line:14,column:19},end:{line:14,column:39}},1:{start:{line:15,column:4},end:{line:15,column:27}},2:{start:{line:16,column:4},end:{line:16,column:57}},3:{start:{line:16,column:29},end:{line:16,column:57}},4:{start:{line:19,column:4},end:{line:19,column:56}},5:{start:{line:21,column:13},end:{line:35,column:3}},6:{start:{line:22,column:19},end:{line:22,column:39}},7:{start:{line:23,column:4},end:{line:33,column:5}},8:{start:{line:24,column:6},end:{line:24,column:21}},9:{start:{line:25,column:11},end:{line:33,column:5}},10:{start:{line:26,column:6},end:{line:26,column:22}},11:{start:{line:27,column:11},end:{line:33,column:5}},12:{start:{line:28,column:28},end:{line:28,column:38}},13:{start:{line:29,column:27},end:{line:29,column:59}},14:{start:{line:30,column:6},end:{line:30,column:32}},15:{start:{line:32,column:6},end:{line:32,column:22}},16:{start:{line:34,column:4},end:{line:34,column:57}},17:{start:{line:34,column:29},end:{line:34,column:57}},18:{start:{line:37,column:19},end:{line:37,column:39}},19:{start:{line:38,column:4},end:{line:38,column:31}},20:{start:{line:39,column:4},end:{line:39,column:86}},21:{start:{line:39,column:29},end:{line:39,column:86}},22:{start:{line:42,column:14},end:{line:42,column:26}},23:{start:{line:43,column:22},end:{line:43,column:77}},24:{start:{line:44,column:19},end:{line:104,column:6}},25:{start:{line:45,column:45},end:{line:51,column:7}},26:{start:{line:53,column:6},end:{line:91,column:7}},27:{start:{line:54,column:8},end:{line:61,column:10}},28:{start:{line:62,column:13},end:{line:91,column:7}},29:{start:{line:63,column:8},end:{line:70,column:10}},30:{start:{line:71,column:13},end:{line:91,column:7}},31:{start:{line:72,column:24},end:{line:72,column:99}},32:{start:{line:72,column:78},end:{line:72,column:98}},33:{start:{line:73,column:8},end:{line:81,column:10}},34:{start:{line:83,column:8},end:{line:90,column:10}},35:{start:{line:92,column:6},end:{line:103,column:8}},36:{start:{line:105,column:4},end:{line:115,column:9}},37:{start:{line:118,column:26},end:{line:118,column:70}},38:{start:{line:122,column:14},end:{line:122,column:26}},39:{start:{line:123,column:4},end:{line:136,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:13,column:2},end:{line:13,column:3}},loc:{start:{line:13,column:29},end:{line:17,column:3}},line:13},1:{name:"(anonymous_1)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:15},end:{line:20,column:3}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:21,column:13},end:{line:21,column:14}},loc:{start:{line:21,column:19},end:{line:35,column:3}},line:21},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:24},end:{line:40,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:116,column:3}},line:41},5:{name:"(anonymous_5)",decl:{start:{line:44,column:35},end:{line:44,column:36}},loc:{start:{line:44,column:45},end:{line:104,column:5}},line:44},6:{name:"(anonymous_6)",decl:{start:{line:72,column:70},end:{line:72,column:71}},loc:{start:{line:72,column:78},end:{line:72,column:98}},line:72},7:{name:"(anonymous_7)",decl:{start:{line:121,column:2},end:{line:121,column:3}},loc:{start:{line:121,column:11},end:{line:137,column:3}},line:121}},branchMap:{0:{loc:{start:{line:16,column:4},end:{line:16,column:57}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:16},1:{loc:{start:{line:19,column:11},end:{line:19,column:55}},type:"binary-expr",locations:[{start:{line:19,column:11},end:{line:19,column:27}},{start:{line:19,column:31},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:55}}],line:19},2:{loc:{start:{line:23,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:33,column:5}},{start:{line:25,column:11},end:{line:33,column:5}}],line:23},3:{loc:{start:{line:25,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:11},end:{line:33,column:5}},{start:{line:27,column:11},end:{line:33,column:5}}],line:25},4:{loc:{start:{line:27,column:11},end:{line:33,column:5}},type:"if",locations:[{start:{line:27,column:11},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:27},5:{loc:{start:{line:34,column:4},end:{line:34,column:57}},type:"if",locations:[{start:{line:34,column:4},end:{line:34,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:34},6:{loc:{start:{line:39,column:4},end:{line:39,column:86}},type:"if",locations:[{start:{line:39,column:4},end:{line:39,column:86}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:39},7:{loc:{start:{line:39,column:49},end:{line:39,column:84}},type:"cond-expr",locations:[{start:{line:39,column:69},end:{line:39,column:75}},{start:{line:39,column:78},end:{line:39,column:84}}],line:39},8:{loc:{start:{line:53,column:6},end:{line:91,column:7}},type:"if",locations:[{start:{line:53,column:6},end:{line:91,column:7}},{start:{line:62,column:13},end:{line:91,column:7}}],line:53},9:{loc:{start:{line:59,column:26},end:{line:59,column:70}},type:"binary-expr",locations:[{start:{line:59,column:26},end:{line:59,column:50}},{start:{line:59,column:54},end:{line:59,column:70}}],line:59},10:{loc:{start:{line:62,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:62,column:13},end:{line:91,column:7}},{start:{line:71,column:13},end:{line:91,column:7}}],line:62},11:{loc:{start:{line:68,column:26},end:{line:68,column:70}},type:"binary-expr",locations:[{start:{line:68,column:26},end:{line:68,column:50}},{start:{line:68,column:54},end:{line:68,column:70}}],line:68},12:{loc:{start:{line:71,column:13},end:{line:91,column:7}},type:"if",locations:[{start:{line:71,column:13},end:{line:91,column:7}},{start:{line:82,column:13},end:{line:91,column:7}}],line:71},13:{loc:{start:{line:79,column:26},end:{line:79,column:70}},type:"binary-expr",locations:[{start:{line:79,column:26},end:{line:79,column:50}},{start:{line:79,column:54},end:{line:79,column:70}}],line:79},14:{loc:{start:{line:88,column:26},end:{line:88,column:70}},type:"binary-expr",locations:[{start:{line:88,column:26},end:{line:88,column:50}},{start:{line:88,column:54},end:{line:88,column:70}}],line:88}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputDynamicArray.tsx"],names:["v"],mappings:"AAqE4B,cAoCf,YApCe;AArE5B,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,cAAc;AAkBrB,MAAM,kCAAkC,MAAM,UAA0C;AAAA,EACtF,YAAY,KAAa,UAAuC;AAC9D,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,GAAG,IAAI;AACd,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAAA,EACpD;AAAA,EAEA,WAAW,MAAM;AACf,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,QAAI,KAAK,MAAM,SAAS,UAAU;AAChC,aAAO,KAAK,CAAC;AAAA,IACf,WACS,KAAK,MAAM,SAAS,OAAO;AAClC,aAAO,KAAK,EAAE;AAAA,IAChB,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,YAAM,EAAC,UAAS,IAAI,KAAK;AACzB,YAAM,eAAe,OAAO,KAAK,UAAW,MAAM,EAAE,CAAC;AACrD,aAAO,KAAK,YAAY;AAAA,IAC1B,OAAO;AACL,aAAO,KAAK,EAAE;AAAA,IAChB;AAEA,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,MAAM;AAAA,EACrD;AAAA,EAEA,YAAY,UAAkB;AAC5B,UAAM,SAAS,KAAK,OAAO,MAAM,CAAC;AAClC,WAAO,OAAO,UAAU,CAAC;AAEzB,QAAI,KAAK,MAAM,SAAU,MAAK,MAAM,SAAS,OAAO,SAAS,IAAI,SAAS,MAAS;AAAA,EACrF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY,EAAE,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAO;AACxE,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,GAAG,MAAM;AACvC,YAAM,iBAAgB;AAAA,QAAC;AAAA;AAAA,UACrB,SAAS,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,UACrC,GAAG;AAAA;AAAA,MACN;AACA,UAAI;AACJ,UAAG,KAAK,MAAM,SAAS,OAAO;AAC5B,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,UAAU;AACrC,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,WACS,KAAK,MAAM,SAAS,QAAQ;AACnC,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,WAAW,MAAM,EAAE,IAAI,CAAAA,OAAK,CAACA,IAAG,WAAWA,EAAC,CAAC,CAAC;AACrF,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP;AAAA,YACA,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF,OACK;AACH,gBAAQ;AAAA,UAAC;AAAA;AAAA,YACP,OAAO;AAAA,YACP,UAAU,KAAK,YAAY,KAAK,MAAM,CAAC;AAAA,YACvC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA;AAAA,QACrD;AAAA,MACF;AAEA,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,OAAO,KAAK,MAAM;AAAA,UAElB,WAAU;AAAA,UAEV;AAAA,gCAAC,SAAI,WAAU,+BACZ,0BACH;AAAA,YACA,oBAAC,SAAI,WAAU,gCACZ,iBACH;AAAA;AAAA;AAAA,QARK;AAAA,MASP;AAAA,IACF,CAAC;AAED,WACE,qBAAC,SAAI,WAAU,kBACZ;AAAA;AAAA,MACD;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UAEb,YAAE,WAAW;AAAA;AAAA,MAChB;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,oBAAoB,gBAAgB,EAAE,yBAAyB;AACrE,eAAe;AAMf,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,mBAAmB;AAAA,QAE5B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,oBAAC,YAAS;AAAA;AAAA,QACnB;AAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b43f9efa2bc6409a39f030c91aca2fefba2121b9"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fr=function(){return l},l}Fr();class ple extends sr.Component{constructor(){super(...arguments);Pn(this,"addValue",(Fr().s[5]++,()=>{Fr().f[2]++;const t=(Fr().s[6]++,this.values.slice(0));if(Fr().s[7]++,this.props.type==="number")Fr().b[2][0]++,Fr().s[8]++,t.push(0);else if(Fr().b[2][1]++,Fr().s[9]++,this.props.type==="url")Fr().b[3][0]++,Fr().s[10]++,t.push("");else if(Fr().b[3][1]++,Fr().s[11]++,this.props.type==="enum"){Fr().b[4][0]++;const{fieldSpec:r}=(Fr().s[12]++,this.props),i=(Fr().s[13]++,Object.keys(r.values)[0]);Fr().s[14]++,t.push(i)}else Fr().b[4][1]++,Fr().s[15]++,t.push("");Fr().s[16]++,this.props.onChange?(Fr().b[5][0]++,Fr().s[17]++,this.props.onChange(t)):Fr().b[5][1]++}))}changeValue(t,r){Fr().f[0]++;const i=(Fr().s[0]++,this.values.slice(0));Fr().s[1]++,i[t]=r,Fr().s[2]++,this.props.onChange?(Fr().b[0][0]++,Fr().s[3]++,this.props.onChange(i)):Fr().b[0][1]++}get values(){return Fr().f[1]++,Fr().s[4]++,Fr().b[1][0]++,this.props.value||(Fr().b[1][1]++,this.props.default)||(Fr().b[1][2]++,[])}deleteValue(t){Fr().f[3]++;const r=(Fr().s[18]++,this.values.slice(0));Fr().s[19]++,r.splice(t,1),Fr().s[20]++,this.props.onChange?(Fr().b[6][0]++,Fr().s[21]++,this.props.onChange(r.length>0?(Fr().b[7][0]++,r):(Fr().b[7][1]++,void 0))):Fr().b[6][1]++}render(){Fr().f[4]++;const t=(Fr().s[22]++,this.props.t),r=(Fr().s[23]++,{t,i18n:this.props.i18n,tReady:this.props.tReady}),i=(Fr().s[24]++,this.values.map((s,l)=>{var v;Fr().f[5]++;const o=(Fr().s[25]++,le.jsx(mle,{onClick:this.deleteValue.bind(this,l),...r}));let p;if(Fr().s[26]++,this.props.type==="url")Fr().b[8][0]++,Fr().s[27]++,p=le.jsx($O,{value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Fr().b[9][0]++,this.props["aria-label"]||(Fr().b[9][1]++,this.props.label))});else if(Fr().b[8][1]++,Fr().s[28]++,this.props.type==="number")Fr().b[10][0]++,Fr().s[29]++,p=le.jsx(nm,{value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Fr().b[11][0]++,this.props["aria-label"]||(Fr().b[11][1]++,this.props.label))});else if(Fr().b[10][1]++,Fr().s[30]++,this.props.type==="enum"){Fr().b[12][0]++;const x=(Fr().s[31]++,Object.keys((v=this.props.fieldSpec)==null?void 0:v.values).map(B=>(Fr().f[6]++,Fr().s[32]++,[B,OO(B)])));Fr().s[33]++,p=le.jsx(VO,{options:x,value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Fr().b[13][0]++,this.props["aria-label"]||(Fr().b[13][1]++,this.props.label))})}else Fr().b[12][1]++,Fr().s[34]++,p=le.jsx(Pf,{value:s,onChange:this.changeValue.bind(this,l),"aria-label":(Fr().b[14][0]++,this.props["aria-label"]||(Fr().b[14][1]++,this.props.label))});return Fr().s[35]++,le.jsxs("div",{style:this.props.style,className:"maputnik-array-block",children:[le.jsx("div",{className:"maputnik-array-block-action",children:o}),le.jsx("div",{className:"maputnik-array-block-content",children:p})]},l)}));return Fr().s[36]++,le.jsxs("div",{className:"maputnik-array",children:[i,le.jsx(il,{className:"maputnik-array-add-value",onClick:this.addValue,children:t("Add value")})]})}}const xj=(Fr().s[37]++,Ws()(ple));class mle extends sr.Component{render(){Fr().f[7]++;const e=(Fr().s[38]++,this.props.t);return Fr().s[39]++,le.jsx(il,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove array item"),children:le.jsx(bO,{label:le.jsx(Ty,{})})})}}function fa(){var n="/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",e="cd16dc68fc42c219caf080518fd74984d4f8d81e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx",statementMap:{0:{start:{line:5,column:24},end:{line:7,column:3}},1:{start:{line:9,column:16},end:{line:9,column:60}},2:{start:{line:10,column:4},end:{line:14,column:5}},3:{start:{line:11,column:6},end:{line:11,column:28}},4:{start:{line:13,column:6},end:{line:13,column:17}},5:{start:{line:17,column:26},end:{line:17,column:46}},6:{start:{line:18,column:4},end:{line:18,column:34}},7:{start:{line:19,column:27},end:{line:19,column:92}},8:{start:{line:19,column:55},end:{line:19,column:67}},9:{start:{line:19,column:83},end:{line:19,column:91}},10:{start:{line:20,column:4},end:{line:20,column:40}},11:{start:{line:23,column:19},end:{line:39,column:6}},12:{start:{line:24,column:6},end:{line:38,column:8}},13:{start:{line:32,column:52},end:{line:32,column:58}},14:{start:{line:40,column:4},end:{line:40,column:87}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:15,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:16,column:2},end:{line:16,column:3}},loc:{start:{line:16,column:28},end:{line:21,column:3}},line:16},2:{name:"(anonymous_2)",decl:{start:{line:19,column:48},end:{line:19,column:49}},loc:{start:{line:19,column:55},end:{line:19,column:67}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:19,column:76},end:{line:19,column:77}},loc:{start:{line:19,column:83},end:{line:19,column:91}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:22,column:2},end:{line:22,column:3}},loc:{start:{line:22,column:11},end:{line:41,column:3}},line:22},5:{name:"(anonymous_5)",decl:{start:{line:23,column:35},end:{line:23,column:36}},loc:{start:{line:23,column:49},end:{line:39,column:5}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:32,column:45},end:{line:32,column:46}},loc:{start:{line:32,column:52},end:{line:32,column:58}},line:32}},branchMap:{0:{loc:{start:{line:9,column:16},end:{line:9,column:60}},type:"binary-expr",locations:[{start:{line:9,column:16},end:{line:9,column:32}},{start:{line:9,column:36},end:{line:9,column:54}},{start:{line:9,column:58},end:{line:9,column:60}}],line:9},1:{loc:{start:{line:10,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:14,column:5}},{start:{line:12,column:11},end:{line:14,column:5}}],line:10},2:{loc:{start:{line:30,column:28},end:{line:30,column:71}},type:"binary-expr",locations:[{start:{line:30,column:28},end:{line:30,column:52}},{start:{line:30,column:56},end:{line:30,column:71}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputFont.tsx"],names:[],mappings:"AA6CQ;AA7CR,OAAO,WAAW;AAClB,OAAO,uBAAuB;AAY9B,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,OAAO,eAAe;AAAA,IACpB,OAAO,CAAC;AAAA,EACV;AAAA,EAEA,IAAI,SAAS;AACX,UAAM,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,CAAC;AAGvD,QAAI,IAAI,IAAI,SAAO,CAAC,MAAM,IAAG;AAC3B,aAAO,IAAI,OAAO,EAAE;AAAA,IACtB,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EAEA,WAAW,KAAa,UAAkB;AACxC,UAAM,gBAAgB,KAAK,OAAO,MAAM,CAAC;AACzC,kBAAc,GAAG,IAAI;AACrB,UAAM,iBAAiB,cACpB,OAAO,OAAK,MAAM,MAAS,EAC3B,OAAO,OAAK,MAAM,EAAE;AAEvB,SAAK,MAAM,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,OAAO,IAAI,CAAC,OAAO,MAAM;AAC3C,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM;AAAA,cACnD;AAAA,cACA,SAAS,KAAK,MAAM,OAAO,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA,cAC1C,UAAU,KAAK,WAAW,KAAK,MAAM,CAAC;AAAA;AAAA,UACxC;AAAA;AAAA,QAPK;AAAA,MAQP;AAAA,IACF,CAAC;AAED,WACE,oBAAC,QAAG,WAAU,iBACX,kBACH;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cd16dc68fc42c219caf080518fd74984d4f8d81e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return fa=function(){return l},l}fa();class Mj extends sr.Component{get values(){fa().f[0]++;const e=(fa().s[1]++,fa().b[0][0]++,this.props.value||(fa().b[0][1]++,this.props.default)||(fa().b[0][2]++,[]));return fa().s[2]++,e[e.length-1]!==""?(fa().b[1][0]++,fa().s[3]++,e.concat("")):(fa().b[1][1]++,fa().s[4]++,e)}changeFont(e,t){fa().f[1]++;const r=(fa().s[5]++,this.values.slice(0));fa().s[6]++,r[e]=t;const i=(fa().s[7]++,r.filter(s=>(fa().f[2]++,fa().s[8]++,s!==void 0)).filter(s=>(fa().f[3]++,fa().s[9]++,s!=="")));fa().s[10]++,this.props.onChange(i)}render(){fa().f[4]++;const e=(fa().s[11]++,this.values.map((t,r)=>{var i;return fa().f[5]++,fa().s[12]++,le.jsx("li",{children:le.jsx(Ly,{"aria-label":(fa().b[2][0]++,this.props["aria-label"]||(fa().b[2][1]++,this.props.name)),value:t,options:(i=this.props.fonts)==null?void 0:i.map(s=>(fa().f[6]++,fa().s[13]++,[s,s])),onChange:this.changeFont.bind(this,r)})},r)}));return fa().s[14]++,le.jsx("ul",{className:"maputnik-font",children:e})}}Pn(Mj,"defaultProps",(fa().s[0]++,{fonts:[]}));function uo(){var n="/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",e="8a7e9c26497bbcdc9141a7bf10d3ed50f729d679",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx",statementMap:{0:{start:{line:13,column:23},end:{line:13,column:117}},1:{start:{line:16,column:24},end:{line:28,column:5}},2:{start:{line:26,column:30},end:{line:26,column:81}},3:{start:{line:29,column:4},end:{line:115,column:5}},4:{start:{line:31,column:8},end:{line:38,column:10}},5:{start:{line:40,column:24},end:{line:40,column:101}},6:{start:{line:40,column:82},end:{line:40,column:100}},7:{start:{line:41,column:8},end:{line:47,column:10}},8:{start:{line:52,column:8},end:{line:68,column:9}},9:{start:{line:53,column:26},end:{line:53,column:59}},10:{start:{line:54,column:10},end:{line:60,column:12}},11:{start:{line:58,column:42},end:{line:58,column:48}},12:{start:{line:62,column:10},end:{line:67,column:12}},13:{start:{line:70,column:8},end:{line:75,column:10}},14:{start:{line:77,column:8},end:{line:82,column:10}},15:{start:{line:84,column:8},end:{line:112,column:9}},16:{start:{line:85,column:10},end:{line:91,column:12}},17:{start:{line:93,column:10},end:{line:111,column:11}},18:{start:{line:94,column:12},end:{line:101,column:14}},19:{start:{line:103,column:12},end:{line:110,column:14}},20:{start:{line:114,column:8},end:{line:114,column:20}},21:{start:{line:118,column:4},end:{line:118,column:124}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:15},end:{line:116,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:26,column:16},end:{line:26,column:17}},loc:{start:{line:26,column:30},end:{line:26,column:81}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:40,column:75},end:{line:40,column:76}},loc:{start:{line:40,column:82},end:{line:40,column:100}},line:40},3:{name:"(anonymous_3)",decl:{start:{line:58,column:35},end:{line:58,column:36}},loc:{start:{line:58,column:42},end:{line:58,column:48}},line:58},4:{name:"(anonymous_4)",decl:{start:{line:117,column:2},end:{line:117,column:3}},loc:{start:{line:117,column:11},end:{line:119,column:3}},line:117}},branchMap:{0:{loc:{start:{line:29,column:4},end:{line:115,column:5}},type:"switch",locations:[{start:{line:30,column:6},end:{line:38,column:10}},{start:{line:39,column:6},end:{line:48,column:7}},{start:{line:49,column:6},end:{line:49,column:27}},{start:{line:50,column:6},end:{line:50,column:23}},{start:{line:51,column:6},end:{line:68,column:9}},{start:{line:69,column:6},end:{line:75,column:10}},{start:{line:76,column:6},end:{line:82,column:10}},{start:{line:83,column:6},end:{line:112,column:9}},{start:{line:113,column:6},end:{line:114,column:20}}],line:29},1:{loc:{start:{line:40,column:36},end:{line:40,column:69}},type:"binary-expr",locations:[{start:{line:40,column:36},end:{line:40,column:63}},{start:{line:40,column:67},end:{line:40,column:69}}],line:40},2:{loc:{start:{line:52,column:8},end:{line:68,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:68,column:9}},{start:{line:61,column:15},end:{line:68,column:9}}],line:52},3:{loc:{start:{line:53,column:26},end:{line:53,column:59}},type:"binary-expr",locations:[{start:{line:53,column:26},end:{line:53,column:53}},{start:{line:53,column:57},end:{line:53,column:59}}],line:53},4:{loc:{start:{line:84,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:84,column:8},end:{line:112,column:9}},{start:{line:92,column:15},end:{line:112,column:9}}],line:84},5:{loc:{start:{line:93,column:10},end:{line:111,column:11}},type:"if",locations:[{start:{line:93,column:10},end:{line:111,column:11}},{start:{line:102,column:17},end:{line:111,column:11}}],line:93}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0,0,0,0,0,0,0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/InputSpec.tsx"],names:[],mappings:"AAyDM;AAzDN,OAAO,WAA6B;AAEpC,OAAO,gBAAqC;AAC5C,OAAO,iBAAuC;AAC9C,OAAO,mBAA2C;AAClD,OAAO,iBAAuC;AAC9C,OAAO,gBAAqC;AAC5C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,uBAAmD;AAC1D,OAAO,eAAmC;AAC1C,OAAO,gBAAgB;AAEvB,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AA0BpH,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EAErE,aAAa;AACX,UAAM,cAAc;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,WAAW,KAAK,MAAM;AAAA,MACtB,OAAO,KAAK,MAAM;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,OAAO,KAAK,MAAM;AAAA,MAClB,OAAO,KAAK,MAAM;AAAA,MAClB,SAAS,KAAK,MAAM,WAAW;AAAA,MAC/B,MAAM,KAAK,MAAM;AAAA,MACjB,eAAe,sBAAsB,KAAK,MAAM;AAAA,MAChD,UAAU,CAAC,aAAmE,KAAK,MAAM,SAAU,KAAK,MAAM,WAAW,QAAQ;AAAA,MACjI,cAAc,KAAK,MAAM,YAAY;AAAA,IACvC;AACA,YAAO,KAAK,MAAM,WAAW,MAAM;AAAA,MACnC,KAAK;AAAU,eACb;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA,YACJ,KAAK,KAAK,MAAM,UAAU;AAAA,YAC1B,KAAK,KAAK,MAAM,UAAU;AAAA;AAAA,QAC5B;AAAA,MAEF,KAAK,QAAQ;AACX,cAAM,UAAU,OAAO,KAAK,KAAK,MAAM,UAAU,UAAU,CAAC,CAAC,EAAE,IAAI,OAAK,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AAE1F,eAAO;AAAA,UAAC;AAAA;AAAA,YACL,GAAG;AAAA,YACJ;AAAA;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,YAAI,eAAe,QAAQ,KAAK,MAAM,SAAU,KAAK,GAAG;AACtD,gBAAM,UAAU,KAAK,MAAM,UAAU,UAAU,CAAC;AAChD,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,SAAS,QAAQ,IAAI,OAAK,CAAC,GAAG,CAAC,CAAC;AAAA;AAAA,UAClC;AAAA,QACF,OAAO;AACL,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA;AAAA,UACN;AAAA,QACF;AAAA,MACF,KAAK;AAAS,eACZ;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AAAW,eACd;AAAA,UAAC;AAAA;AAAA,YACE,GAAG;AAAA;AAAA,QACN;AAAA,MAEF,KAAK;AACH,YAAG,KAAK,MAAM,cAAc,aAAa;AACvC,iBAAO;AAAA,YAAC;AAAA;AAAA,cACL,GAAG;AAAA,cACJ,OAAO,KAAK,MAAM,UAAU;AAAA;AAAA,UAC9B;AAAA,QACF,OAAO;AACL,cAAI,KAAK,MAAM,UAAU,QAAQ;AAC/B,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,MAAM,KAAK,MAAM,UAAU;AAAA,gBAC3B,QAAQ,KAAK,MAAM,UAAU;AAAA;AAAA,YAC/B;AAAA,UACF,OAAO;AACL,mBAAO;AAAA,cAAC;AAAA;AAAA,gBACL,GAAG;AAAA,gBACJ,WAAW,KAAK,MAAM;AAAA,gBACtB,MAAM,KAAK,MAAM,UAAU;AAAA;AAAA,YAC7B;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,SAAS;AACP,WACE,oBAAC,SAAI,eAAa,gBAAc,KAAK,MAAM,WACxC,eAAK,WAAW,GACnB;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a7e9c26497bbcdc9141a7bf10d3ed50f729d679"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return uo=function(){return l},l}uo();const gle=(uo().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);let cy=class extends sr.Component{childNodes(){var t,r;uo().f[0]++;const e=(uo().s[1]++,{error:this.props.error,fieldSpec:this.props.fieldSpec,label:this.props.label,action:this.props.action,style:this.props.style,value:this.props.value,default:(t=this.props.fieldSpec)==null?void 0:t.default,name:this.props.fieldName,"data-wd-key":"spec-field-input:"+this.props.fieldName,onChange:i=>(uo().f[1]++,uo().s[2]++,this.props.onChange(this.props.fieldName,i)),"aria-label":this.props["aria-label"]});switch(uo().s[3]++,(r=this.props.fieldSpec)==null?void 0:r.type){case"number":return uo().b[0][0]++,uo().s[4]++,le.jsx(nm,{...e,min:this.props.fieldSpec.minimum,max:this.props.fieldSpec.maximum});case"enum":uo().b[0][1]++;{const i=(uo().s[5]++,Object.keys((uo().b[1][0]++,this.props.fieldSpec.values||(uo().b[1][1]++,[]))).map(s=>(uo().f[2]++,uo().s[6]++,[s,OO(s)])));return uo().s[7]++,le.jsx(VO,{...e,options:i})}case"resolvedImage":uo().b[0][2]++;case"formatted":uo().b[0][3]++;case"string":if(uo().b[0][4]++,uo().s[8]++,gle.indexOf(this.props.fieldName)>=0){uo().b[2][0]++;const i=(uo().s[9]++,uo().b[3][0]++,this.props.fieldSpec.values||(uo().b[3][1]++,[]));return uo().s[10]++,le.jsx(Ly,{...e,options:i.map(s=>(uo().f[3]++,uo().s[11]++,[s,s]))})}else return uo().b[2][1]++,uo().s[12]++,le.jsx(Pf,{...e});case"color":return uo().b[0][5]++,uo().s[13]++,le.jsx(Cj,{...e});case"boolean":return uo().b[0][6]++,uo().s[14]++,le.jsx(qO,{...e});case"array":return uo().b[0][7]++,uo().s[15]++,this.props.fieldName==="text-font"?(uo().b[4][0]++,uo().s[16]++,le.jsx(Mj,{...e,fonts:this.props.fieldSpec.values})):(uo().b[4][1]++,uo().s[17]++,this.props.fieldSpec.length?(uo().b[5][0]++,uo().s[18]++,le.jsx(_j,{...e,type:this.props.fieldSpec.value,length:this.props.fieldSpec.length})):(uo().b[5][1]++,uo().s[19]++,le.jsx(xj,{...e,fieldSpec:this.props.fieldSpec,type:this.props.fieldSpec.value})));default:return uo().b[0][8]++,uo().s[20]++,null}}render(){return uo().f[4]++,uo().s[21]++,le.jsx("div",{"data-wd-key":"spec-field:"+this.props.fieldName,children:this.childNodes()})}};function rc(){var n="/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",e="81a841bc0059d656029a86501c08aa823d58e2d6",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx",statementMap:{0:{start:{line:9,column:4},end:{line:9,column:17}},1:{start:{line:10,column:4},end:{line:10,column:56}},2:{start:{line:11,column:4},end:{line:13,column:6}},3:{start:{line:15,column:16},end:{line:19,column:3}},4:{start:{line:16,column:4},end:{line:18,column:7}},5:{start:{line:21,column:4},end:{line:41,column:9}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:21},end:{line:14,column:3}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:15,column:16},end:{line:15,column:17}},loc:{start:{line:15,column:25},end:{line:19,column:3}},line:15},2:{name:"(anonymous_2)",decl:{start:{line:20,column:2},end:{line:20,column:3}},loc:{start:{line:20,column:11},end:{line:42,column:3}},line:20}},branchMap:{0:{loc:{start:{line:22,column:6},end:{line:29,column:10}},type:"binary-expr",locations:[{start:{line:22,column:6},end:{line:22,column:26}},{start:{line:22,column:46},end:{line:29,column:10}}],line:22},1:{loc:{start:{line:30,column:6},end:{line:30,column:130}},type:"binary-expr",locations:[{start:{line:30,column:6},end:{line:30,column:27}},{start:{line:30,column:47},end:{line:30,column:130}}],line:30},2:{loc:{start:{line:33,column:6},end:{line:40,column:7}},type:"binary-expr",locations:[{start:{line:33,column:6},end:{line:33,column:26}},{start:{line:33,column:46},end:{line:40,column:7}}],line:33},3:{loc:{start:{line:37,column:28},end:{line:37,column:60}},type:"cond-expr",locations:[{start:{line:37,column:49},end:{line:37,column:51}},{start:{line:37,column:54},end:{line:37,column:60}}],line:37}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/Fieldset.tsx"],names:[],mappings:"AAiCW,SAGD,KAHC;AAjCX,OAAO,WAAgD;AACvD,OAAO,mBAAmB;AAC1B,OAAO,SAAS;AAChB,OAAO,sBAAsB;AAY7B,qBAAqB,iBAAiB,MAAM,UAAwC;AAAA,EAClF;AAAA,EAEA,YAAa,OAAsB;AACjC,UAAM,KAAK;AACX,SAAK,WAAW,iBAAiB,iBAAiB;AAClD,SAAK,QAAQ;AAAA,MACX,SAAS;AAAA,IACX;AAAA,EACF;AAAA,EAEA,cAAc,CAAC,QAAiB;AAC9B,SAAK,SAAS;AAAA,MACZ,SAAS;AAAA,IACX,CAAC;AAAA,EACH;AAAA,EAEA,SAAU;AACR,WAAO,qBAAC,SAAI,WAAU,wBAAuB,MAAK,SAAQ,mBAAiB,KAAK,UAC7E;AAAA,WAAK,MAAM,aACV,oBAAC,SAAI,WAAU,8BACb;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,WAAW,KAAK,MAAM;AAAA;AAAA,MACxB,GACF;AAAA,MAED,CAAC,KAAK,MAAM,aACX,oBAAC,SAAI,WAAU,8BACZ,eAAK,MAAM,OACd;AAAA,MAEF,oBAAC,SAAI,WAAU,+BACZ,eAAK,MAAM,QACd;AAAA,MACA,oBAAC,SAAI,WAAU,gCACZ,eAAK,MAAM,UACd;AAAA,MACC,KAAK,MAAM,aACV;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,OAAO,EAAC,SAAS,KAAK,MAAM,UAAU,KAAK,OAAM;AAAA,UAEjD,8BAAC,OAAI,WAAW,KAAK,MAAM,WAAW;AAAA;AAAA,MACxC;AAAA,OAEJ;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"81a841bc0059d656029a86501c08aa823d58e2d6"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return rc=function(){return l},l}rc();class TC extends sr.Component{constructor(t){rc().f[0]++,rc().s[0]++;super(t);Pn(this,"_labelId");Pn(this,"onToggleDoc",(rc().s[3]++,t=>{rc().f[1]++,rc().s[4]++,this.setState({showDoc:t})}));rc().s[1]++,this._labelId=Sy("fieldset_label_"),rc().s[2]++,this.state={showDoc:!1}}render(){return rc().f[2]++,rc().s[5]++,le.jsxs("div",{className:"maputnik-input-block",role:"group","aria-labelledby":this._labelId,children:[(rc().b[0][0]++,this.props.fieldSpec&&(rc().b[0][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:le.jsx(bO,{label:this.props.label,onToggleDoc:this.onToggleDoc,fieldSpec:this.props.fieldSpec})}))),(rc().b[1][0]++,!this.props.fieldSpec&&(rc().b[1][1]++,le.jsx("div",{className:"maputnik-input-block-label",children:this.props.label}))),le.jsx("div",{className:"maputnik-input-block-action",children:this.props.action}),le.jsx("div",{className:"maputnik-input-block-content",children:this.props.children}),(rc().b[2][0]++,this.props.fieldSpec&&(rc().b[2][1]++,le.jsx("div",{className:"maputnik-doc-inline",style:{display:this.state.showDoc?(rc().b[3][0]++,""):(rc().b[3][1]++,"none")},children:le.jsx(xO,{fieldSpec:this.props.fieldSpec})})))]})}}function ea(){var n="/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",e="adadf49dc291f98804cd53f74e320ed51f276886",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx",statementMap:{0:{start:{line:6,column:16},end:{line:16,column:1}},1:{start:{line:7,column:15},end:{line:7,column:20}},2:{start:{line:8,column:27},end:{line:8,column:87}},3:{start:{line:9,column:17},end:{line:9,column:22}},4:{start:{line:10,column:15},end:{line:10,column:23}},5:{start:{line:11,column:23},end:{line:11,column:28}},6:{start:{line:12,column:16},end:{line:12,column:21}},7:{start:{line:13,column:16},end:{line:13,column:21}},8:{start:{line:14,column:19},end:{line:14,column:24}},9:{start:{line:15,column:17},end:{line:15,column:22}},10:{start:{line:19,column:22},end:{line:19,column:48}},11:{start:{line:20,column:24},end:{line:20,column:42}},12:{start:{line:22,column:4},end:{line:27,column:5}},13:{start:{line:23,column:6},end:{line:23,column:42}},14:{start:{line:25,column:6},end:{line:25,column:55}},15:{start:{line:26,column:6},end:{line:26,column:24}},16:{start:{line:28,column:4},end:{line:36,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:9},end:{line:7,column:10}},loc:{start:{line:7,column:15},end:{line:7,column:20}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:8,column:8},end:{line:8,column:9}},loc:{start:{line:8,column:27},end:{line:8,column:87}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:9,column:11},end:{line:9,column:12}},loc:{start:{line:9,column:17},end:{line:9,column:22}},line:9},3:{name:"(anonymous_3)",decl:{start:{line:10,column:9},end:{line:10,column:10}},loc:{start:{line:10,column:15},end:{line:10,column:23}},line:10},4:{name:"(anonymous_4)",decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:23},end:{line:11,column:28}},line:11},5:{name:"(anonymous_5)",decl:{start:{line:12,column:10},end:{line:12,column:11}},loc:{start:{line:12,column:16},end:{line:12,column:21}},line:12},6:{name:"(anonymous_6)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:16},end:{line:13,column:21}},line:13},7:{name:"(anonymous_7)",decl:{start:{line:14,column:13},end:{line:14,column:14}},loc:{start:{line:14,column:19},end:{line:14,column:24}},line:14},8:{name:"(anonymous_8)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:17},end:{line:15,column:22}},line:15},9:{name:"(anonymous_9)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:37,column:3}},line:18}},branchMap:{0:{loc:{start:{line:8,column:27},end:{line:8,column:87}},type:"cond-expr",locations:[{start:{line:8,column:71},end:{line:8,column:79}},{start:{line:8,column:82},end:{line:8,column:87}}],line:8},1:{loc:{start:{line:22,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:27,column:5}},{start:{line:24,column:11},end:{line:27,column:5}}],line:22}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/SpecField.tsx"],names:[],mappings:"AA0CM;AA1CN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,eAA0D;AACjE,OAAO,cAAc;AAGrB,MAAM,UAAU;AAAA,EACd,OAAO,MAAM;AAAA,EACb,MAAM,CAAC,EAAC,UAAS,MAAY,OAAO,KAAK,UAAU,MAAM,EAAE,UAAU,IAAI,WAAW;AAAA,EACpF,SAAS,MAAM;AAAA,EACf,OAAO,MAAM;AAAA,EACb,eAAe,MAAM;AAAA,EACrB,QAAQ,MAAM;AAAA,EACd,QAAQ,MAAM;AAAA,EACd,WAAW,MAAM;AAAA,EACjB,SAAS,MAAM;AACjB;AAMA,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,UAAM,YAAY,KAAK,MAAM,WAAW;AAExC,UAAM,cAAc,QAAQ,SAAU;AAEtC,QAAI;AACJ,QAAI,aAAa;AACf,kBAAY,YAAY,KAAK,KAAK;AAAA,IACpC,OACK;AACH,cAAQ,KAAK,yBAAyB,SAAS;AAC/C,kBAAY;AAAA,IACd;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM;AAAA,QAClB,QAAQ,KAAK,MAAM;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QAEtB,8BAAC,aAAW,GAAG,KAAK,OAAO;AAAA;AAAA,IAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"adadf49dc291f98804cd53f74e320ed51f276886"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ea=function(){return l},l}ea();const yle=(ea().s[0]++,{color:()=>(ea().f[0]++,ea().s[1]++,pa),enum:({fieldSpec:n})=>(ea().f[1]++,ea().s[2]++,Object.keys(n.values).length<=3?(ea().b[0][0]++,TC):(ea().b[0][1]++,pa)),boolean:()=>(ea().f[2]++,ea().s[3]++,pa),array:()=>(ea().f[3]++,ea().s[4]++,TC),resolvedImage:()=>(ea().f[4]++,ea().s[5]++,pa),number:()=>(ea().f[5]++,ea().s[6]++,pa),string:()=>(ea().f[6]++,ea().s[7]++,pa),formatted:()=>(ea().f[7]++,ea().s[8]++,pa),padding:()=>(ea().f[8]++,ea().s[9]++,pa)});class vle extends sr.Component{render(){var i;ea().f[9]++;const e=(ea().s[10]++,(i=this.props.fieldSpec)==null?void 0:i.type),t=(ea().s[11]++,yle[e]);let r;return ea().s[12]++,t?(ea().b[1][0]++,ea().s[13]++,r=t(this.props)):(ea().b[1][1]++,ea().s[14]++,console.warn("No such type for '%s'",e),ea().s[15]++,r=pa),ea().s[16]++,le.jsx(r,{label:this.props.label,action:this.props.action,fieldSpec:this.props.fieldSpec,children:le.jsx(cy,{...this.props})})}}function fd(){var n="/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",e="e12cc9e5c91261e7ee42544334f5ab56bdde4e3a",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:11,column:4},end:{line:48,column:5}},2:{start:{line:12,column:6},end:{line:20,column:8}},3:{start:{line:21,column:6},end:{line:29,column:8}},4:{start:{line:30,column:6},end:{line:40,column:7}},5:{start:{line:31,column:8},end:{line:39,column:10}},6:{start:{line:41,column:6},end:{line:45,column:11}},7:{start:{line:47,column:6},end:{line:47,column:77}},8:{start:{line:51,column:29},end:{line:51,column:76}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:49,column:3}},line:8}},branchMap:{0:{loc:{start:{line:11,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:48,column:5}},{start:{line:46,column:11},end:{line:48,column:5}}],line:11},1:{loc:{start:{line:30,column:6},end:{line:40,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:40,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:30}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_FunctionButtons.tsx"],names:[],mappings:"AA2BY,cAsBC,YAtBD;AA3BZ,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,aAAa,qBAAoB;AACzC,SAAQ,0BAAyB;AACjC,SAA0B,uBAAuB;AASjD,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,QAAI,qBAAqB,qBAAqB;AAE9C,QAAI,KAAK,MAAM,UAAU,WAAW,WAAW,SAAS,MAAM,GAAG;AAC/D,8BACE;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uBAAuB;AAAA,UAEhC,8BAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,SAAQ,GAAG,SAAQ,aAC1E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA;AAAA,MACF;AAGF,4BAAsB;AAAA,QAAC;AAAA;AAAA,UACrB,WAAU;AAAA,UACV,SAAS,KAAK,MAAM;AAAA,UACpB,OAAO,EAAE,uCAAuC;AAAA,UAEhD,8BAAC,eAAY;AAAA;AAAA,MACf;AAEA,UAAI,KAAK,MAAM,UAAU,eAAe,MAAM,eAAe;AAC3D,8BAAsB;AAAA,UAAC;AAAA;AAAA,YACrB,WAAU;AAAA,YACV,SAAS,KAAK,MAAM;AAAA,YACpB,OAAO,EAAE,mCAAmC;AAAA,YAE5C,8BAAC,iBAAc;AAAA;AAAA,QACjB;AAAA,MACF;AACA,aAAO,qBAAC,SACL;AAAA;AAAA,QACA;AAAA,QACA;AAAA,SACH;AAAA,IACF,OACK;AACH,aAAO,oBAAC,SAAK,iCAAsB;AAAA,IACrC;AAAA,EACF;AACF;AAEA,MAAM,uBAAuB,gBAAgB,EAAE,4BAA4B;AAC3E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e12cc9e5c91261e7ee42544334f5ab56bdde4e3a"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return fd=function(){return l},l}fd();class Cle extends sr.Component{render(){fd().f[0]++;const e=(fd().s[0]++,this.props.t);let t,r,i;return fd().s[1]++,this.props.fieldSpec.expression.parameters.includes("zoom")?(fd().b[0][0]++,fd().s[2]++,i=le.jsx(il,{className:"maputnik-make-zoom-function",onClick:this.props.onExpressionClick,title:e("Convert to expression"),children:le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"middle"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:kC})})}),fd().s[3]++,t=le.jsx(il,{className:"maputnik-make-zoom-function",onClick:this.props.onZoomClick,title:e("Convert property into a zoom function"),children:le.jsx(GV,{})}),fd().s[4]++,this.props.fieldSpec["property-type"]==="data-driven"?(fd().b[1][0]++,fd().s[5]++,r=le.jsx(il,{className:"maputnik-make-data-function",onClick:this.props.onDataClick,title:e("Convert property to data function"),children:le.jsx(QV,{})})):fd().b[1][1]++,fd().s[6]++,le.jsxs("div",{children:[i,r,t]})):(fd().b[0][1]++,fd().s[7]++,le.jsx("div",{children:i}))}}const _le=(fd().s[8]++,Ws()(Cle));function Lp(){var n="/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",e="60f6f0f35f3e44d7e7f08e2966cfff09ee69557d",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx",statementMap:{0:{start:{line:7,column:24},end:{line:9,column:3}},1:{start:{line:11,column:45},end:{line:11,column:55}},2:{start:{line:12,column:40},end:{line:20,column:5}},3:{start:{line:21,column:18},end:{line:21,column:53}},4:{start:{line:22,column:4},end:{line:31,column:6}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:32,column:3}},line:10}},branchMap:{0:{loc:{start:{line:28,column:34},end:{line:28,column:60}},type:"binary-expr",locations:[{start:{line:28,column:34},end:{line:28,column:54}},{start:{line:28,column:58},end:{line:28,column:60}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_SpecProperty.tsx"],names:[],mappings:"AA4BwB;AA5BxB,OAAO,WAAW;AAElB,OAAO,eAAiC;AACxC,OAAO,qBAAqB;AAE5B,OAAO,wBAAwB;AAe/B,qBAAqB,qBAAqB,MAAM,UAA6B;AAAA,EAC3E,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,QAAQ,WAAW,UAAS,IAAI,KAAK;AAE5C,UAAM,cAAc;AAAA,MAAC;AAAA;AAAA,QACnB,WAAW,KAAK,MAAM;AAAA,QACtB,aAAa,KAAK,MAAM;AAAA,QACxB,aAAa,KAAK,MAAM;AAAA,QACxB,mBAAmB,KAAK,MAAM;AAAA;AAAA,IAChC;AAEA,UAAM,QAAQ,OAAQ,YAAU,MAAI,SAAgB;AAEpD,WAAO;AAAA,MAAC;AAAA;AAAA,QACL,GAAG,KAAK;AAAA,QACT;AAAA,QACA,WAAW,KAAK,MAAM;AAAA,QACtB,OAAO,mBAAmB,KAAK,MAAM,aAAa,EAAE;AAAA,QACpD,QAAQ;AAAA;AAAA,IACV;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"60f6f0f35f3e44d7e7f08e2966cfff09ee69557d"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Lp=function(){return l},l}Lp();class wj extends sr.Component{render(){Lp().f[0]++;const{errors:e,fieldName:t,fieldType:r}=(Lp().s[1]++,this.props),i=(Lp().s[2]++,le.jsx(_le,{fieldSpec:this.props.fieldSpec,onZoomClick:this.props.onZoomClick,onDataClick:this.props.onDataClick,onExpressionClick:this.props.onExpressionClick})),s=(Lp().s[3]++,e[r+"."+t]);return Lp().s[4]++,le.jsx(vle,{...this.props,error:s,fieldSpec:this.props.fieldSpec,label:Wx((Lp().b[0][0]++,this.props.fieldName||(Lp().b[0][1]++,""))),action:i})}}Pn(wj,"defaultProps",(Lp().s[0]++,{errors:{}}));function dh(){var n="/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",e="e8906f642b33ab7d7a780fc0db870f7e4872d29c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts",statementMap:{0:{start:{line:2,column:12},end:{line:2,column:17}},1:{start:{line:3,column:12},end:{line:3,column:17}},2:{start:{line:4,column:2},end:{line:10,column:3}},3:{start:{line:5,column:4},end:{line:5,column:14}},4:{start:{line:6,column:9},end:{line:10,column:3}},5:{start:{line:7,column:4},end:{line:7,column:13}},6:{start:{line:9,column:4},end:{line:9,column:13}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:15},end:{line:1,column:16}},loc:{start:{line:1,column:36},end:{line:11,column:1}},line:1}},branchMap:{0:{loc:{start:{line:4,column:2},end:{line:10,column:3}},type:"if",locations:[{start:{line:4,column:2},end:{line:10,column:3}},{start:{line:6,column:9},end:{line:10,column:3}}],line:4},1:{loc:{start:{line:6,column:9},end:{line:10,column:3}},type:"if",locations:[{start:{line:6,column:9},end:{line:10,column:3}},{start:{line:8,column:9},end:{line:10,column:3}}],line:6}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/sort-numerically.ts"],names:[],mappings:"AAAA,wBAAwB,MAAuB,MAAsB;AACnE,QAAM,IAAI,CAAC;AACX,QAAM,IAAI,CAAC;AAEX,MAAG,IAAI,GAAG;AACR,WAAO;AAAA,EACT,WACQ,IAAI,GAAG;AACb,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e8906f642b33ab7d7a780fc0db870f7e4872d29c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dh=function(){return l},l}dh();function Sj(n,e){dh().f[0]++;const t=(dh().s[0]++,+n),r=(dh().s[1]++,+e);return dh().s[2]++,t<r?(dh().b[0][0]++,dh().s[3]++,-1):(dh().b[0][1]++,dh().s[4]++,t>r?(dh().b[1][0]++,dh().s[5]++,1):(dh().b[1][1]++,dh().s[6]++,0))}function op(){var n="/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",e="2f98128f0f990b67a049c58486c1fab4310fbcfa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts",statementMap:{0:{start:{line:2,column:2},end:{line:4,column:3}},1:{start:{line:3,column:4},end:{line:3,column:24}},2:{start:{line:5,column:19},end:{line:11,column:3}},3:{start:{line:12,column:2},end:{line:12,column:35}}},fnMap:{0:{name:"findDefaultFromSpec",decl:{start:{line:1,column:16},end:{line:1,column:35}},loc:{start:{line:1,column:42},end:{line:13,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:2},end:{line:4,column:3}},type:"if",locations:[{start:{line:2,column:2},end:{line:4,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:2},1:{loc:{start:{line:12,column:9},end:{line:12,column:34}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:28}},{start:{line:12,column:32},end:{line:12,column:34}}],line:12}},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/spec-helper.ts"],names:[],mappings:"AAGO,gBAAS,oBAAoB,MAAyE;AAC3G,MAAI,OAAO,UAAU,eAAe,KAAK,MAAM,SAAS,GAAG;AACzD,WAAO,KAAK;AAAA,EACd;AAEA,QAAM,WAAW;AAAA,IACf,SAAS;AAAA,IACT,UAAU;AAAA,IACV,WAAW;AAAA,IACX,UAAU;AAAA,IACV,SAAS,CAAC;AAAA,EACZ;AAEA,SAAO,SAAS,KAAK,IAAI,KAAK;AAChC;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f98128f0f990b67a049c58486c1fab4310fbcfa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return op=function(){return l},l}op();function _f(n){if(op().f[0]++,op().s[0]++,Object.prototype.hasOwnProperty.call(n,"default"))return op().b[0][0]++,op().s[1]++,n.default;op().b[0][1]++;const e=(op().s[2]++,{color:"#000000",string:"",boolean:!1,number:0,array:[]});return op().s[3]++,op().b[1][0]++,e[n.type]||(op().b[1][1]++,"")}function dy(){var n="/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",e="04a32613b456a577be3ef20dcd48d43233f27837",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:4},end:{line:17,column:6}},2:{start:{line:20,column:25},end:{line:20,column:68}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:18,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DeleteStopButton.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,SAAQ,gBAAe;AACvB,SAA0B,uBAAuB;AAQjD,MAAM,iCAAiC,MAAM,UAAyC;AAAA,EACpF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,SAAS,KAAK,MAAM;AAAA,QACpB,OAAO,EAAE,6BAA6B;AAAA,QAEtC,8BAAC,YAAS;AAAA;AAAA,IACZ;AAAA,EACF;AACF;AAEA,MAAM,mBAAmB,gBAAgB,EAAE,wBAAwB;AACnE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"04a32613b456a577be3ef20dcd48d43233f27837"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return dy=function(){return l},l}dy();class ble extends sr.Component{render(){dy().f[0]++;const e=(dy().s[0]++,this.props.t);return dy().s[1]++,le.jsx(il,{className:"maputnik-delete-stop",onClick:this.props.onClick,title:e("Remove zoom level from stop"),children:le.jsx(Ty,{})})}}const Ej=(dy().s[2]++,Ws()(ble));function hn(){var n="/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",e="97b6de35ac4a8f739cf06eabc39facf249622fab",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx",statementMap:{0:{start:{line:19,column:2},end:{line:28,column:3}},1:{start:{line:20,column:4},end:{line:27,column:7}},2:{start:{line:21,column:6},end:{line:26,column:7}},3:{start:{line:22,column:8},end:{line:24,column:9}},4:{start:{line:23,column:10},end:{line:23,column:33}},5:{start:{line:25,column:8},end:{line:25,column:39}},6:{start:{line:29,column:2},end:{line:29,column:17}},7:{start:{line:32,column:10},end:{line:34,column:3}},8:{start:{line:36,column:20},end:{line:36,column:55}},9:{start:{line:37,column:4},end:{line:41,column:5}},10:{start:{line:38,column:6},end:{line:40,column:9}},11:{start:{line:44,column:20},end:{line:44,column:45}},12:{start:{line:45,column:4},end:{line:49,column:5}},13:{start:{line:46,column:6},end:{line:48,column:8}},14:{start:{line:50,column:4},end:{line:50,column:16}},15:{start:{line:53,column:4},end:{line:55,column:5}},16:{start:{line:54,column:6},end:{line:54,column:27}},17:{start:{line:56,column:4},end:{line:58,column:5}},18:{start:{line:57,column:6},end:{line:57,column:24}},19:{start:{line:59,column:4},end:{line:59,column:25}},20:{start:{line:62,column:4},end:{line:66,column:5}},21:{start:{line:63,column:6},end:{line:63,column:83}},22:{start:{line:65,column:6},end:{line:65,column:53}},23:{start:{line:70,column:26},end:{line:75,column:70}},24:{start:{line:71,column:6},end:{line:74,column:8}},25:{start:{line:75,column:22},end:{line:75,column:69}},26:{start:{line:76,column:20},end:{line:76,column:22}},27:{start:{line:77,column:4},end:{line:79,column:7}},28:{start:{line:78,column:6},end:{line:78,column:30}},29:{start:{line:80,column:4},end:{line:82,column:7}},30:{start:{line:83,column:4},end:{line:83,column:50}},31:{start:{line:83,column:39},end:{line:83,column:48}},32:{start:{line:85,column:13},end:{line:105,column:3}},33:{start:{line:86,column:4},end:{line:103,column:5}},34:{start:{line:87,column:6},end:{line:90,column:8}},35:{start:{line:92,column:24},end:{line:92,column:61}},36:{start:{line:93,column:6},end:{line:102,column:8}},37:{start:{line:104,column:4},end:{line:104,column:42}},38:{start:{line:107,column:18},end:{line:107,column:56}},39:{start:{line:108,column:4},end:{line:114,column:6}},40:{start:{line:115,column:25},end:{line:115,column:53}},41:{start:{line:116,column:25},end:{line:119,column:5}},42:{start:{line:120,column:4},end:{line:120,column:54}},43:{start:{line:123,column:25},end:{line:126,column:5}},44:{start:{line:127,column:4},end:{line:129,column:5}},45:{start:{line:128,column:6},end:{line:128,column:34}},46:{start:{line:130,column:4},end:{line:130,column:60}},47:{start:{line:133,column:4},end:{line:140,column:5}},48:{start:{line:134,column:6},end:{line:134,column:42}},49:{start:{line:136,column:6},end:{line:139,column:9}},50:{start:{line:143,column:4},end:{line:147,column:5}},51:{start:{line:144,column:6},end:{line:144,column:43}},52:{start:{line:146,column:6},end:{line:146,column:40}},53:{start:{line:148,column:4},end:{line:148,column:58}},54:{start:{line:151,column:14},end:{line:151,column:26}},55:{start:{line:152,column:4},end:{line:154,column:5}},56:{start:{line:153,column:6},end:{line:153,column:78}},57:{start:{line:156,column:4},end:{line:204,column:5}},58:{start:{line:157,column:6},end:{line:203,column:9}},59:{start:{line:158,column:26},end:{line:158,column:77}},60:{start:{line:159,column:20},end:{line:159,column:40}},61:{start:{line:160,column:26},end:{line:160,column:79}},62:{start:{line:161,column:22},end:{line:161,column:29}},63:{start:{line:162,column:46},end:{line:162,column:122}},64:{start:{line:163,column:26},end:{line:168,column:9}},65:{start:{line:167,column:33},end:{line:167,column:97}},66:{start:{line:170,column:8},end:{line:174,column:9}},67:{start:{line:171,column:10},end:{line:171,column:73}},68:{start:{line:173,column:10},end:{line:173,column:73}},69:{start:{line:175,column:24},end:{line:175,column:28}},70:{start:{line:176,column:8},end:{line:187,column:9}},71:{start:{line:177,column:10},end:{line:186,column:15}},72:{start:{line:182,column:37},end:{line:182,column:101}},73:{start:{line:188,column:8},end:{line:202,column:18}},74:{start:{line:198,column:41},end:{line:198,column:110}},75:{start:{line:205,column:4},end:{line:307,column:12}},76:{start:{line:216,column:39},end:{line:216,column:67}},77:{start:{line:234,column:43},end:{line:234,column:68}},78:{start:{line:249,column:39},end:{line:249,column:83}},79:{start:{line:265,column:42},end:{line:265,column:85}},80:{start:{line:310,column:21},end:{line:310,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:17,column:9},end:{line:17,column:20}},loc:{start:{line:17,column:35},end:{line:30,column:1}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:20,column:30},end:{line:20,column:31}},loc:{start:{line:20,column:45},end:{line:27,column:5}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:22},end:{line:42,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:48},end:{line:51,column:3}},line:43},4:{name:"(anonymous_4)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:34},end:{line:60,column:3}},line:52},5:{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:34},end:{line:67,column:3}},line:61},6:{name:"(anonymous_6)",decl:{start:{line:69,column:2},end:{line:69,column:3}},loc:{start:{line:69,column:26},end:{line:84,column:3}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:70,column:36},end:{line:70,column:37}},loc:{start:{line:70,column:51},end:{line:75,column:5}},line:70},8:{name:"(anonymous_8)",decl:{start:{line:75,column:12},end:{line:75,column:13}},loc:{start:{line:75,column:22},end:{line:75,column:69}},line:75},9:{name:"(anonymous_9)",decl:{start:{line:77,column:26},end:{line:77,column:27}},loc:{start:{line:77,column:41},end:{line:79,column:5}},line:77},10:{name:"(anonymous_10)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:39},end:{line:83,column:48}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:85,column:13},end:{line:85,column:14}},loc:{start:{line:85,column:35},end:{line:105,column:3}},line:85},12:{name:"(anonymous_12)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:41},end:{line:121,column:3}},line:106},13:{name:"(anonymous_13)",decl:{start:{line:122,column:2},end:{line:122,column:3}},loc:{start:{line:122,column:23},end:{line:131,column:3}},line:122},14:{name:"(anonymous_14)",decl:{start:{line:132,column:2},end:{line:132,column:3}},loc:{start:{line:132,column:26},end:{line:141,column:3}},line:132},15:{name:"(anonymous_15)",decl:{start:{line:142,column:2},end:{line:142,column:3}},loc:{start:{line:142,column:40},end:{line:149,column:3}},line:142},16:{name:"(anonymous_16)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:308,column:3}},line:150},17:{name:"(anonymous_17)",decl:{start:{line:157,column:46},end:{line:157,column:47}},loc:{start:{line:157,column:61},end:{line:203,column:7}},line:157},18:{name:"(anonymous_18)",decl:{start:{line:167,column:20},end:{line:167,column:21}},loc:{start:{line:167,column:33},end:{line:167,column:97}},line:167},19:{name:"(anonymous_19)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:37},end:{line:182,column:101}},line:182},20:{name:"(anonymous_20)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:41},end:{line:198,column:110}},line:198},21:{name:"(anonymous_21)",decl:{start:{line:216,column:26},end:{line:216,column:27}},loc:{start:{line:216,column:39},end:{line:216,column:67}},line:216},22:{name:"(anonymous_22)",decl:{start:{line:234,column:26},end:{line:234,column:27}},loc:{start:{line:234,column:43},end:{line:234,column:68}},line:234},23:{name:"(anonymous_23)",decl:{start:{line:249,column:26},end:{line:249,column:27}},loc:{start:{line:249,column:39},end:{line:249,column:83}},line:249},24:{name:"(anonymous_24)",decl:{start:{line:265,column:26},end:{line:265,column:27}},loc:{start:{line:265,column:42},end:{line:265,column:85}},line:265}},branchMap:{0:{loc:{start:{line:19,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:19,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},1:{loc:{start:{line:19,column:6},end:{line:19,column:38}},type:"binary-expr",locations:[{start:{line:19,column:6},end:{line:19,column:17}},{start:{line:19,column:21},end:{line:19,column:38}}],line:19},2:{loc:{start:{line:21,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:21,column:6},end:{line:26,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:21},3:{loc:{start:{line:22,column:8},end:{line:24,column:9}},type:"if",locations:[{start:{line:22,column:8},end:{line:24,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},5:{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},6:{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:53},7:{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:62,column:4},end:{line:66,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:66,column:5}},{start:{line:64,column:11},end:{line:66,column:5}}],line:62},9:{loc:{start:{line:86,column:4},end:{line:103,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:103,column:5}},{start:{line:91,column:11},end:{line:103,column:5}}],line:86},10:{loc:{start:{line:92,column:24},end:{line:92,column:61}},type:"cond-expr",locations:[{start:{line:92,column:55},end:{line:92,column:57}},{start:{line:92,column:60},end:{line:92,column:61}}],line:92},11:{loc:{start:{line:107,column:18},end:{line:107,column:56}},type:"binary-expr",locations:[{start:{line:107,column:18},end:{line:107,column:50}},{start:{line:107,column:54},end:{line:107,column:56}}],line:107},12:{loc:{start:{line:111,column:14},end:{line:111,column:58}},type:"cond-expr",locations:[{start:{line:111,column:41},end:{line:111,column:42}},{start:{line:111,column:45},end:{line:111,column:58}}],line:111},13:{loc:{start:{line:127,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:127,column:4},end:{line:129,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:127},14:{loc:{start:{line:133,column:4},end:{line:140,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:140,column:5}},{start:{line:135,column:11},end:{line:140,column:5}}],line:133},15:{loc:{start:{line:133,column:8},end:{line:133,column:70}},type:"binary-expr",locations:[{start:{line:133,column:8},end:{line:133,column:33}},{start:{line:133,column:37},end:{line:133,column:70}}],line:133},16:{loc:{start:{line:143,column:4},end:{line:147,column:5}},type:"if",locations:[{start:{line:143,column:4},end:{line:147,column:5}},{start:{line:145,column:11},end:{line:147,column:5}}],line:143},17:{loc:{start:{line:152,column:4},end:{line:154,column:5}},type:"if",locations:[{start:{line:152,column:4},end:{line:154,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:152},18:{loc:{start:{line:156,column:4},end:{line:204,column:5}},type:"if",locations:[{start:{line:156,column:4},end:{line:204,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:156},19:{loc:{start:{line:158,column:26},end:{line:158,column:77}},type:"cond-expr",locations:[{start:{line:158,column:56},end:{line:158,column:68}},{start:{line:158,column:71},end:{line:158,column:77}}],line:158},20:{loc:{start:{line:160,column:26},end:{line:160,column:79}},type:"cond-expr",locations:[{start:{line:160,column:56},end:{line:160,column:69}},{start:{line:160,column:72},end:{line:160,column:79}}],line:160},21:{loc:{start:{line:170,column:8},end:{line:174,column:9}},type:"if",locations:[{start:{line:170,column:8},end:{line:174,column:9}},{start:{line:172,column:15},end:{line:174,column:9}}],line:170},22:{loc:{start:{line:176,column:8},end:{line:187,column:9}},type:"if",locations:[{start:{line:176,column:8},end:{line:187,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:176},23:{loc:{start:{line:224,column:8},end:{line:239,column:9}},type:"binary-expr",locations:[{start:{line:224,column:8},end:{line:224,column:45}},{start:{line:224,column:65},end:{line:239,column:9}}],line:224},24:{loc:{start:{line:255,column:8},end:{line:270,column:9}},type:"binary-expr",locations:[{start:{line:255,column:8},end:{line:255,column:18}},{start:{line:255,column:38},end:{line:270,column:9}}],line:255},25:{loc:{start:{line:271,column:8},end:{line:279,column:15}},type:"binary-expr",locations:[{start:{line:271,column:8},end:{line:271,column:18}},{start:{line:271,column:38},end:{line:279,column:15}}],line:271},26:{loc:{start:{line:281,column:10},end:{line:292,column:11}},type:"binary-expr",locations:[{start:{line:281,column:10},end:{line:281,column:20}},{start:{line:281,column:40},end:{line:292,column:11}}],line:281}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_DataProperty.tsx"],names:[],mappings:"AAqO8B,cA8Bf,YA9Be;AArO9B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AAEnB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAC5B,SAAQ,2BAA0B;AAClC,SAA0B,uBAAuB;AAEjD,OAAO,wBAAwB;AAC/B,OAAO,sBAAsB;AAI7B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI;AAEJ,MAAG,MAAM,SAAS,MAAM,MAAM,OAAO;AACnC,UAAM,MAAM,MAAM,QAAQ,CAAC,MAAM,QAAQ;AACvC,UAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAgCA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,eAAe,YAAY,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA;AAAA,EAGA,iBAAiB,OAAe;AAC9B,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,EAAE,IAAI,CAAC;AAGjE,UAAM,UAAU,CAAC;AACjB,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,WAAW,CAAC,WAAmB,UAAe;AAC5C,QAAI,MAAM,SAAS,YAAY;AAC7B,cAAQ;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,UAAU,MAAM;AAAA,MAClB;AAAA,IACF,OACK;AACH,YAAM,YAAY,MAAM,SAAS,gBAAgB,KAAK;AACtD,cAAQ;AAAA,QACN,UAAU;AAAA,QACV,MAAM,MAAM;AAAA;AAAA,QAEZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,UAC9E,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAgB,CAAC;AAAA,QACjF;AAAA,QACA,GAAG;AAAA,MACL;AAAA,IACF;AACA,SAAK,MAAM,SAAU,WAAW,KAAK;AAAA,EACvC;AAAA,EAEA,WAAW,WAAmB,UAAuD,OAAe;AAClG,UAAM,QAAQ,KAAK,MAAM,OAAO,MAAM,MAAM,CAAC,KAAK,CAAC;AAEnD,UAAM,SAAS,IAAI;AAAA,MACjB;AAAA,QACE,OAAO,SAAS;AAAA,QAChB,MAAO,SAAS,SAAS,SAAa,IAAI,SAAS;AAAA,MACrD;AAAA,MACA;AAAA,IACF;AAEA,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EAClD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,eAAe,SAAiB;AAC9B,QAAI,YAAY,iBAAiB,KAAK,MAAM,wBAAwB;AAClE,WAAK,MAAM,uBAAuB;AAAA,IACpC,OACK;AACH,WAAK,SAAS,KAAK,MAAM,WAAW;AAAA,QAClC,GAAG,KAAK,MAAM;AAAA,QACd,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,mBAAmB,UAAkC,SAAc;AACjE,QAAI,SAAS;AACX,WAAK,MAAM,MAAO,QAAQ,IAAI;AAAA,IAChC,OACK;AACH,aAAO,KAAK,MAAM,MAAO,QAAQ;AAAA,IACnC;AACA,SAAK,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM,KAAK;AAAA,EACtD;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,QAAI,OAAO,KAAK,MAAM,OAAO,SAAS,aAAa;AACjD,WAAK,MAAM,MAAO,OAAO,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA,IACzE;AAEA,QAAI;AACJ,QAAI,KAAK,MAAM,OAAO,OAAO;AAC3B,mBAAa,KAAK,MAAM,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQ;AACrD,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,OAAO;AAC/D,cAAM,MAAO,KAAK,MAAM,KAAK,GAAG;AAChC,cAAM,YAAY,OAAO,KAAK,CAAC,MAAM,WAAW,KAAK,CAAC,EAAE,QAAQ,KAAK,CAAC;AACtE,cAAM,QAAQ,KAAK,CAAC;AACpB,cAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAE3F,cAAM,YAAY;AAAA,UAChB,cAAc,EAAE,aAAa;AAAA,UAC7B,OAAO,EAAE,YAAY;AAAA,UACrB,OAAO;AAAA,UACP,UAAU,CAAC,YAAyC,KAAK,WAAW,KAAK,EAAE,MAAM,WAAW,OAAO,QAAkB,GAAG,KAAK;AAAA,QAC/H;AAEA,YAAI;AACJ,YAAG,KAAK,MAAM,OAAO,SAAS,eAAe;AAC3C,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C,OACK;AACH,sBAAY,oBAAC,eAAa,GAAG,WAAW;AAAA,QAC1C;AAEA,YAAI,YAAY;AAChB,YAAG,cAAc,QAAW;AAC1B,sBAAY,oBAAC,SACX;AAAA,YAAC;AAAA;AAAA,cACC,cAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU,aAAW,KAAK,WAAW,KAAK,EAAC,MAAM,SAAS,OAAO,UAAS,GAAG,KAAK;AAAA,cAClF,KAAK;AAAA,cACL,KAAK;AAAA;AAAA,UACP,GACF;AAAA,QACF;AAEA,eAAO,qBAAC,QACN;AAAA,8BAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACE,qBACH;AAAA,UACA,oBAAC,QACC;AAAA,YAAC;AAAA;AAAA,cACC,cAAY,EAAE,cAAc;AAAA,cAC5B,WAAW,KAAK,MAAM;AAAA,cACtB,WAAW,KAAK,MAAM;AAAA,cACtB;AAAA,cACA,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,KAAK,EAAC,MAAM,WAAW,OAAO,UAAS,GAAG,QAAkB;AAAA;AAAA,UACzG,GACF;AAAA,UACA,oBAAC,QACE,yBACH;AAAA,aAlBc,GAmBhB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAGnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,MAAO;AAAA,gBACzB,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAS;AAAA;AAAA,YACzD,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QACC,KAAK,MAAM,OAAO,SAAS,cAC1B;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAGf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAAkB;AAAA;AAAA,YAC/D,GACF;AAAA;AAAA,UATI;AAAA,QAUN;AAAA,QAEF;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YAGP,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,OAAO,EAAE,8CAA8C;AAAA,gBACvD,UAAU,aAAW,KAAK,mBAAmB,YAAY,OAAO;AAAA;AAAA,YAClE,GACF;AAAA;AAAA,UARI;AAAA,QASN;AAAA,QACC,cACC;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,SAAS;AAAA,YAGlB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,YAAY,KAAK,mBAAmB,WAAW,OAAO;AAAA;AAAA,YACtE;AAAA;AAAA,UAPI;AAAA,QAQN;AAAA,QAED,cACC,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,gCACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAI,YAAE,aAAa,GAAE;AAAA,YACtB,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QAEF,qBAAC,SAAI,WAAU,oBACZ;AAAA,wBACC;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"97b6de35ac4a8f739cf06eabc39facf249622fab"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return hn=function(){return l},l}hn();function ZK(n,e){hn().f[0]++;let t;return hn().s[0]++,hn().b[1][0]++,n.value&&(hn().b[1][1]++,n.value.stops)?(hn().b[0][0]++,hn().s[1]++,n.value.stops.forEach((r,i)=>{hn().f[1]++,hn().s[2]++,Object.prototype.hasOwnProperty.call(e.refs,i)?hn().b[2][1]++:(hn().b[2][0]++,hn().s[3]++,t?hn().b[3][1]++:(hn().b[3][0]++,hn().s[4]++,t={...e}),hn().s[5]++,t[i]=Sy("stop-"))})):hn().b[0][1]++,hn().s[6]++,t}class xle extends sr.Component{constructor(){super(...arguments);Pn(this,"state",(hn().s[7]++,{refs:{}}));Pn(this,"onChange",(hn().s[32]++,(t,r)=>{if(hn().f[11]++,hn().s[33]++,r.type==="identity")hn().b[9][0]++,hn().s[34]++,r={type:r.type,property:r.property};else{hn().b[9][1]++;const i=(hn().s[35]++,r.type==="categorical"?(hn().b[10][0]++,""):(hn().b[10][1]++,0));hn().s[36]++,r={property:"",type:r.type,stops:[[{zoom:6,value:i},_f(this.props.fieldSpec)],[{zoom:10,value:i},_f(this.props.fieldSpec)]],...r}}hn().s[37]++,this.props.onChange(t,r)}))}componentDidMount(){hn().f[2]++;const t=(hn().s[8]++,ZK(this.props,this.state));hn().s[9]++,t?(hn().b[4][0]++,hn().s[10]++,this.setState({refs:t})):hn().b[4][1]++}static getDerivedStateFromProps(t,r){hn().f[3]++;const i=(hn().s[11]++,ZK(t,r));return hn().s[12]++,i?(hn().b[5][0]++,hn().s[13]++,{refs:i}):(hn().b[5][1]++,hn().s[14]++,null)}getFieldFunctionType(t){return hn().f[4]++,hn().s[15]++,t.expression.interpolated?(hn().b[6][0]++,hn().s[16]++,"exponential"):(hn().b[6][1]++,hn().s[17]++,t.type==="number"?(hn().b[7][0]++,hn().s[18]++,"interval"):(hn().b[7][1]++,hn().s[19]++,"categorical"))}getDataFunctionTypes(t){return hn().f[5]++,hn().s[20]++,t.expression.interpolated?(hn().b[8][0]++,hn().s[21]++,["interpolate","categorical","interval","exponential","identity"]):(hn().b[8][1]++,hn().s[22]++,["categorical","interval","identity"])}orderStopsByZoom(t){hn().f[6]++;const r=(hn().s[23]++,t.map((s,l)=>(hn().f[7]++,hn().s[24]++,{ref:this.state.refs[l],data:s})).sort((s,l)=>(hn().f[8]++,hn().s[25]++,Sj(s.data[0].zoom,l.data[0].zoom)))),i=(hn().s[26]++,{});return hn().s[27]++,r.forEach((s,l)=>{hn().f[9]++,hn().s[28]++,i[l]=s.ref}),hn().s[29]++,this.setState({refs:i}),hn().s[30]++,r.map(s=>(hn().f[10]++,hn().s[31]++,s.data))}changeStop(t,r,i){var p;hn().f[12]++;const s=(hn().s[38]++,hn().b[11][0]++,((p=this.props.value)==null?void 0:p.stops.slice(0))||(hn().b[11][1]++,[]));hn().s[39]++,s[t]=[{value:r.value,zoom:r.zoom===void 0?(hn().b[12][0]++,0):(hn().b[12][1]++,r.zoom)},i];const l=(hn().s[40]++,this.orderStopsByZoom(s)),o=(hn().s[41]++,{...this.props.value,stops:l});hn().s[42]++,this.onChange(this.props.fieldName,o)}changeBase(t){hn().f[13]++;const r=(hn().s[43]++,{...this.props.value,base:t});hn().s[44]++,r.base===void 0?(hn().b[13][0]++,hn().s[45]++,delete r.base):hn().b[13][1]++,hn().s[46]++,this.props.onChange(this.props.fieldName,r)}changeDataType(t){hn().f[14]++,hn().s[47]++,hn().b[15][0]++,t==="interpolate"&&(hn().b[15][1]++,this.props.onChangeToZoomFunction)?(hn().b[14][0]++,hn().s[48]++,this.props.onChangeToZoomFunction()):(hn().b[14][1]++,hn().s[49]++,this.onChange(this.props.fieldName,{...this.props.value,type:t}))}changeDataProperty(t,r){hn().f[15]++,hn().s[50]++,r?(hn().b[16][0]++,hn().s[51]++,this.props.value[t]=r):(hn().b[16][1]++,hn().s[52]++,delete this.props.value[t]),hn().s[53]++,this.onChange(this.props.fieldName,this.props.value)}render(){var i,s,l,o,p,v,x,B;hn().f[16]++;const t=(hn().s[54]++,this.props.t);hn().s[55]++,typeof((i=this.props.value)==null?void 0:i.type)>"u"?(hn().b[17][0]++,hn().s[56]++,this.props.value.type=this.getFieldFunctionType(this.props.fieldSpec)):hn().b[17][1]++;let r;return hn().s[57]++,(s=this.props.value)!=null&&s.stops?(hn().b[18][0]++,hn().s[58]++,r=this.props.value.stops.map((T,P)=>{var ne,W;hn().f[17]++;const U=(hn().s[59]++,typeof T[0]=="object"?(hn().b[19][0]++,T[0].zoom):(hn().b[19][1]++,void 0)),j=(hn().s[60]++,this.state.refs[P]),N=(hn().s[61]++,typeof T[0]=="object"?(hn().b[20][0]++,T[0].value):(hn().b[20][1]++,T[0])),q=(hn().s[62]++,T[1]),H=(hn().s[63]++,le.jsx(Ej,{onClick:(ne=this.props.onDeleteStop)==null?void 0:ne.bind(this,P)})),oe=(hn().s[64]++,{"aria-label":t("Input value"),label:t("Data value"),value:N,onChange:ie=>(hn().f[18]++,hn().s[65]++,this.changeStop(P,{zoom:U,value:ie},q))});let te;hn().s[66]++,((W=this.props.value)==null?void 0:W.type)==="categorical"?(hn().b[21][0]++,hn().s[67]++,te=le.jsx(Pf,{...oe})):(hn().b[21][1]++,hn().s[68]++,te=le.jsx(nm,{...oe}));let V=(hn().s[69]++,null);return hn().s[70]++,U!==void 0?(hn().b[22][0]++,hn().s[71]++,V=le.jsx("div",{children:le.jsx(nm,{"aria-label":"Zoom",value:U,onChange:ie=>(hn().f[19]++,hn().s[72]++,this.changeStop(P,{zoom:ie,value:N},q)),min:0,max:22})})):hn().b[22][1]++,hn().s[73]++,le.jsxs("tr",{children:[le.jsx("td",{children:V}),le.jsx("td",{children:te}),le.jsx("td",{children:le.jsx(cy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:q,onChange:(ie,he)=>(hn().f[20]++,hn().s[74]++,this.changeStop(P,{zoom:U,value:N},he))})}),le.jsx("td",{children:H})]},j)})):hn().b[18][1]++,hn().s[75]++,le.jsx("div",{className:"maputnik-data-spec-block",children:le.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[le.jsx("legend",{children:Wx(this.props.fieldName)}),le.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[le.jsx(pa,{label:t("Function"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(Qg,{value:this.props.value.type,onChange:T=>(hn().f[21]++,hn().s[76]++,this.changeDataType(T)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})},"function"),(hn().b[23][0]++,((l=this.props.value)==null?void 0:l.type)!=="identity"&&(hn().b[23][1]++,le.jsx(pa,{label:t("Base"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(cy,{fieldName:"base",fieldSpec:qo.function.base,value:(o=this.props.value)==null?void 0:o.base,onChange:(T,P)=>(hn().f[22]++,hn().s[77]++,this.changeBase(P))})})},"base"))),le.jsx(pa,{label:"Property",children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(Pf,{value:(p=this.props.value)==null?void 0:p.property,title:t("Input a data property to base styles off of."),onChange:T=>(hn().f[23]++,hn().s[78]++,this.changeDataProperty("property",T))})})},"property"),(hn().b[24][0]++,r&&(hn().b[24][1]++,le.jsx(pa,{label:t("Default"),children:le.jsx(cy,{fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:(v=this.props.value)==null?void 0:v.default,onChange:(T,P)=>(hn().f[24]++,hn().s[79]++,this.changeDataProperty("default",P))})},"default"))),(hn().b[25][0]++,r&&(hn().b[25][1]++,le.jsx("div",{className:"maputnik-function-stop",children:le.jsxs("table",{className:"maputnik-function-stop-table",children:[le.jsx("caption",{children:t("Stops")}),le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:t("Zoom")}),le.jsx("th",{children:t("Input value")}),le.jsx("th",{rowSpan:2,children:t("Output value")})]})}),le.jsx("tbody",{children:r})]})}))),le.jsxs("div",{className:"maputnik-toolbox",children:[(hn().b[26][0]++,r&&(hn().b[26][1]++,le.jsxs(il,{className:"maputnik-add-stop",onClick:(x=this.props.onAddStop)==null?void 0:x.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:EO})})," ",t("Add stop")]}))),le.jsxs(il,{className:"maputnik-add-stop",onClick:(B=this.props.onExpressionClick)==null?void 0:B.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:kC})})," ",t("Convert to expression")]})]})]})]})})}}const Mle=(hn().s[80]++,Ws()(xle));function _r(){var n="/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",e="6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx",statementMap:{0:{start:{line:16,column:16},end:{line:16,column:18}},1:{start:{line:17,column:2},end:{line:28,column:3}},2:{start:{line:18,column:4},end:{line:27,column:7}},3:{start:{line:19,column:6},end:{line:26,column:7}},4:{start:{line:20,column:8},end:{line:22,column:9}},5:{start:{line:21,column:10},end:{line:21,column:33}},6:{start:{line:23,column:8},end:{line:23,column:39}},7:{start:{line:25,column:8},end:{line:25,column:39}},8:{start:{line:29,column:2},end:{line:29,column:17}},9:{start:{line:32,column:24},end:{line:34,column:3}},10:{start:{line:35,column:10},end:{line:37,column:3}},11:{start:{line:39,column:20},end:{line:39,column:55}},12:{start:{line:40,column:4},end:{line:44,column:5}},13:{start:{line:41,column:6},end:{line:43,column:9}},14:{start:{line:47,column:20},end:{line:47,column:45}},15:{start:{line:48,column:4},end:{line:52,column:5}},16:{start:{line:49,column:6},end:{line:51,column:8}},17:{start:{line:53,column:4},end:{line:53,column:16}},18:{start:{line:57,column:26},end:{line:62,column:60}},19:{start:{line:58,column:6},end:{line:61,column:8}},20:{start:{line:62,column:22},end:{line:62,column:59}},21:{start:{line:63,column:20},end:{line:63,column:22}},22:{start:{line:64,column:4},end:{line:66,column:7}},23:{start:{line:65,column:6},end:{line:65,column:30}},24:{start:{line:67,column:4},end:{line:69,column:7}},25:{start:{line:70,column:4},end:{line:70,column:50}},26:{start:{line:70,column:39},end:{line:70,column:48}},27:{start:{line:73,column:18},end:{line:73,column:49}},28:{start:{line:74,column:4},end:{line:74,column:41}},29:{start:{line:75,column:25},end:{line:75,column:53}},30:{start:{line:76,column:25},end:{line:79,column:5}},31:{start:{line:80,column:4},end:{line:80,column:60}},32:{start:{line:83,column:25},end:{line:86,column:5}},33:{start:{line:87,column:4},end:{line:89,column:5}},34:{start:{line:88,column:6},end:{line:88,column:34}},35:{start:{line:90,column:4},end:{line:90,column:60}},36:{start:{line:92,column:19},end:{line:96,column:3}},37:{start:{line:93,column:4},end:{line:95,column:5}},38:{start:{line:94,column:6},end:{line:94,column:46}},39:{start:{line:98,column:14},end:{line:98,column:26}},40:{start:{line:99,column:23},end:{line:132,column:6}},41:{start:{line:100,column:24},end:{line:100,column:31}},42:{start:{line:101,column:20},end:{line:101,column:27}},43:{start:{line:102,column:44},end:{line:102,column:120}},44:{start:{line:103,column:6},end:{line:131,column:8}},45:{start:{line:112,column:43},end:{line:112,column:87}},46:{start:{line:124,column:43},end:{line:124,column:88}},47:{start:{line:133,column:4},end:{line:201,column:12}},48:{start:{line:144,column:39},end:{line:144,column:67}},49:{start:{line:161,column:43},end:{line:161,column:68}},50:{start:{line:204,column:4},end:{line:208,column:5}},51:{start:{line:205,column:6},end:{line:205,column:83}},52:{start:{line:207,column:6},end:{line:207,column:29}},53:{start:{line:211,column:21},end:{line:211,column:60}}},fnMap:{0:{name:"setStopRefs",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:35},end:{line:30,column:1}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:18,column:30},end:{line:18,column:31}},loc:{start:{line:18,column:45},end:{line:27,column:5}},line:18},2:{name:"(anonymous_2)",decl:{start:{line:38,column:2},end:{line:38,column:3}},loc:{start:{line:38,column:22},end:{line:45,column:3}},line:38},3:{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:48},end:{line:54,column:3}},line:46},4:{name:"(anonymous_4)",decl:{start:{line:56,column:2},end:{line:56,column:3}},loc:{start:{line:56,column:26},end:{line:71,column:3}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:57,column:36},end:{line:57,column:37}},loc:{start:{line:57,column:51},end:{line:62,column:5}},line:57},6:{name:"(anonymous_6)",decl:{start:{line:62,column:12},end:{line:62,column:13}},loc:{start:{line:62,column:22},end:{line:62,column:59}},line:62},7:{name:"(anonymous_7)",decl:{start:{line:64,column:26},end:{line:64,column:27}},loc:{start:{line:64,column:41},end:{line:66,column:5}},line:64},8:{name:"(anonymous_8)",decl:{start:{line:70,column:29},end:{line:70,column:30}},loc:{start:{line:70,column:39},end:{line:70,column:48}},line:70},9:{name:"(anonymous_9)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:45},end:{line:81,column:3}},line:72},10:{name:"(anonymous_10)",decl:{start:{line:82,column:2},end:{line:82,column:3}},loc:{start:{line:82,column:23},end:{line:91,column:3}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:92,column:19},end:{line:92,column:20}},loc:{start:{line:92,column:29},end:{line:96,column:3}},line:92},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:11},end:{line:202,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:99,column:51},end:{line:99,column:52}},loc:{start:{line:99,column:66},end:{line:132,column:5}},line:99},14:{name:"(anonymous_14)",decl:{start:{line:112,column:26},end:{line:112,column:27}},loc:{start:{line:112,column:43},end:{line:112,column:87}},line:112},15:{name:"(anonymous_15)",decl:{start:{line:124,column:26},end:{line:124,column:27}},loc:{start:{line:124,column:43},end:{line:124,column:88}},line:124},16:{name:"(anonymous_16)",decl:{start:{line:144,column:26},end:{line:144,column:27}},loc:{start:{line:144,column:39},end:{line:144,column:67}},line:144},17:{name:"(anonymous_17)",decl:{start:{line:161,column:26},end:{line:161,column:27}},loc:{start:{line:161,column:43},end:{line:161,column:68}},line:161},18:{name:"(anonymous_18)",decl:{start:{line:203,column:2},end:{line:203,column:3}},loc:{start:{line:203,column:34},end:{line:209,column:3}},line:203}},branchMap:{0:{loc:{start:{line:17,column:2},end:{line:28,column:3}},type:"if",locations:[{start:{line:17,column:2},end:{line:28,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:17},1:{loc:{start:{line:17,column:6},end:{line:17,column:38}},type:"binary-expr",locations:[{start:{line:17,column:6},end:{line:17,column:17}},{start:{line:17,column:21},end:{line:17,column:38}}],line:17},2:{loc:{start:{line:19,column:6},end:{line:26,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:26,column:7}},{start:{line:24,column:13},end:{line:26,column:7}}],line:19},3:{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},4:{loc:{start:{line:40,column:4},end:{line:44,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:44,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},5:{loc:{start:{line:48,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:52,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:48},6:{loc:{start:{line:87,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:87,column:4},end:{line:89,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:87},7:{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:93},8:{loc:{start:{line:93,column:8},end:{line:93,column:67}},type:"binary-expr",locations:[{start:{line:93,column:8},end:{line:93,column:30}},{start:{line:93,column:34},end:{line:93,column:67}}],line:93},9:{loc:{start:{line:204,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:204,column:4},end:{line:208,column:5}},{start:{line:206,column:11},end:{line:208,column:5}}],line:204}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/_ZoomProperty.tsx"],names:[],mappings:"AA+J4B,cACf,YADe;AA/J5B,OAAO,WAAW;AAClB,SAAQ,oBAAoB,4BAA2B;AACvD,OAAO,YAAY;AACnB,SAA0B,uBAAuB;AAEjD,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAElB,OAAO,sBAAsB;AAC7B,OAAO,wBAAwB;AAE/B,OAAO,YAAY;AACnB,OAAO,qBAAqB;AAQ5B,SAAS,YAAY,OAAkC,OAA0B;AAE/E,MAAI,UAAmC,CAAC;AAExC,MAAG,MAAM,SAAU,MAAM,MAAwB,OAAO;AACtD,IAAC,MAAM,MAAwB,MAAM,QAAQ,CAAC,MAAM,QAAgB;AAClE,UAAG,OAAO,UAAU,eAAe,KAAK,CAAC,MAAM,MAAM,GAAG,GAAG;AACzD,YAAG,CAAC,SAAS;AACX,oBAAU,EAAC,GAAG,MAAK;AAAA,QACrB;AACA,gBAAQ,GAAG,IAAI,OAAO,OAAO;AAAA,MAC/B,OAAO;AACL,gBAAQ,GAAG,IAAI,MAAM,KAAK,GAAG;AAAA,MAC/B;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO;AACT;AA4BA,MAAM,6BAA6B,MAAM,UAAwD;AAAA,EAC/F,OAAO,eAAe;AAAA,IACpB,QAAQ,CAAC;AAAA,EACX;AAAA,EAEA,QAAQ;AAAA,IACN,MAAM,CAAC;AAAA,EACT;AAAA,EAEA,oBAAoB;AAClB,UAAM,UAAU,YAAY,KAAK,OAAO,KAAK,KAAK;AAElD,QAAG,SAAS;AACV,WAAK,SAAS;AAAA,QACZ,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAA4C,OAA0B;AACpG,UAAM,UAAU,YAAY,OAAO,KAAK;AACxC,QAAG,SAAS;AACV,aAAO;AAAA,QACL,MAAM;AAAA,MACR;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA;AAAA,EAGA,iBAAiB,OAA+B;AAC9C,UAAM,gBAAgB,MACnB,IAAI,CAAC,MAAM,QAAQ;AAClB,aAAO;AAAA,QACL,KAAK,KAAK,MAAM,KAAK,GAAG;AAAA,QACxB,MAAM;AAAA,MACR;AAAA,IACF,CAAC,EAEA,KAAK,CAAC,GAAG,MAAM,gBAAgB,EAAE,KAAK,CAAC,GAAI,EAAE,KAAK,CAAC,CAAE,CAAC;AAGzD,UAAM,UAAkC,CAAC;AACzC,kBACG,QAAQ,CAAC,MAAM,QAAO;AACrB,cAAQ,GAAG,IAAI,KAAK;AAAA,IACtB,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,MAAM;AAAA,IACR,CAAC;AAED,WAAO,cAAc,IAAI,CAAC,SAAS,KAAK,IAAI;AAAA,EAC9C;AAAA,EAEA,eAAe,WAAmB,UAA8B,OAAe;AAC7E,UAAM,QAAS,KAAK,MAAM,MAAwB,MAAM,MAAM,CAAC;AAC/D,UAAM,SAAS,IAAI,CAAC,UAAU,KAAK;AAEnC,UAAM,eAAe,KAAK,iBAAiB,KAAK;AAEhD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,OAAO;AAAA,IACT;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,WAAW,UAA8B;AACvC,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM;AAAA,IACR;AAEA,QAAI,aAAa,SAAS,QAAW;AACnC,aAAO,aAAa,MAAM;AAAA,IAC5B;AACA,SAAK,MAAM,SAAU,KAAK,MAAM,WAAW,YAAY;AAAA,EACzD;AAAA,EAEA,iBAAiB,CAAC,SAAiB;AACjC,QAAI,SAAS,iBAAiB,KAAK,MAAM,wBAAwB;AAC/D,WAAK,MAAM,uBAAuB,IAAI;AAAA,IACxC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,CAAC,MAAM,QAAQ;AAC5D,YAAM,YAAY,KAAK,CAAC;AACxB,YAAM,QAAQ,KAAK,CAAC;AACpB,YAAM,gBAAgB,oBAAC,oBAAiB,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,GAAG,GAAG;AAC3F,aAAO;AAAA,QAAC;AAAA;AAAA,UAGN;AAAA,gCAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,MAAM;AAAA,gBACpB,OAAO;AAAA,gBACP,UAAU,iBAAe,KAAK,eAAe,KAAK,aAAa,KAAK;AAAA,gBACpE,KAAK;AAAA,gBACL,KAAK;AAAA;AAAA,YACP,GACF;AAAA,YACA,oBAAC,QACC;AAAA,cAAC;AAAA;AAAA,gBACC,cAAY,EAAE,cAAc;AAAA,gBAC5B,WAAW,KAAK,MAAM;AAAA,gBACtB,WAAW,KAAK,MAAM;AAAA,gBACtB;AAAA,gBACA,UAAU,CAAC,GAAG,aAAa,KAAK,eAAe,KAAK,WAAW,QAAkB;AAAA;AAAA,YACnF,GACF;AAAA,YACA,oBAAC,QACE,yBACH;AAAA;AAAA;AAAA,QAtBK,GAAG,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;AAAA,MAuB5B;AAAA,IACF,CAAC;AAGD,WAAO,oBAAC,SAAI,WAAU,4BACpB,+BAAC,cAAS,WAAU,+BAClB;AAAA,0BAAC,YAAQ,6BAAmB,KAAK,MAAM,SAAS,GAAE;AAAA,MAClD,qBAAC,SAAI,WAAU,gCACb;AAAA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,UAAU;AAAA,YAEnB,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO;AAAA,gBACP,UAAU,CAAC,YAAoB,KAAK,eAAe,OAAO;AAAA,gBAC1D,OAAO,EAAE,yDAAyD;AAAA,gBAClE,SAAS,KAAK,qBAAqB,KAAK,MAAM,SAAU;AAAA;AAAA,YAC1D,GACF;AAAA;AAAA,QACF;AAAA,QACA;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,MAAM;AAAA,YAEf,8BAAC,SAAI,WAAU,qCACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAW;AAAA,gBACX,WAAW,OAAO,SAAS;AAAA,gBAC3B,OAAO,KAAK,MAAM,OAAO;AAAA,gBACzB,UAAU,CAAC,GAAG,aAAa,KAAK,WAAW,QAA8B;AAAA;AAAA,YAC3E,GACF;AAAA;AAAA,QACF;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,+BAAC,WAAM,WAAU,mEACf;AAAA,8BAAC,aAAS,YAAE,OAAO,GAAE;AAAA,UACrB,oBAAC,WACC,+BAAC,QACC;AAAA,gCAAC,QAAI,YAAE,MAAM,GAAE;AAAA,YACf,oBAAC,QAAG,SAAS,GAAI,YAAE,cAAc,GAAE;AAAA,aACrC,GACF;AAAA,UACA,oBAAC,WACE,sBACH;AAAA,WACF,GACF;AAAA,QACA,qBAAC,SAAI,WAAU,oBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,WAAW,KAAK,IAAI;AAAA,cAExC;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,sBAAsB,GACrD;AAAA,gBAAM;AAAA,gBAAE,EAAE,UAAU;AAAA;AAAA;AAAA,UACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,SAAS,KAAK,MAAM,mBAAmB,KAAK,IAAI;AAAA,cAEhD;AAAA,oCAAC,SAAI,OAAO,EAAC,OAAM,QAAQ,QAAO,QAAQ,eAAe,cAAa,GAAG,SAAQ,aAC/E,8BAAC,UAAK,MAAK,gBAAe,GAAG,oBAAoB,GACnD;AAAA,gBAAM;AAAA,gBAAE,EAAE,uBAAuB;AAAA;AAAA;AAAA,UACnC;AAAA,WACF;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAGlB;AACD,QAAI,UAAU,eAAe,MAAM,eAAe;AAChD,aAAO,CAAC,eAAe,eAAe,YAAY,eAAe,UAAU;AAAA,IAC7E,OACK;AACH,aAAO,CAAC,aAAa;AAAA,IACvB;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6a4c93b52ca21ec4b555a0d2906ee27fc49f34f8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return _r=function(){return l},l}_r();function XK(n,e){_r().f[0]++;let t=(_r().s[0]++,{});return _r().s[1]++,_r().b[1][0]++,n.value&&(_r().b[1][1]++,n.value.stops)?(_r().b[0][0]++,_r().s[2]++,n.value.stops.forEach((r,i)=>{_r().f[1]++,_r().s[3]++,Object.prototype.hasOwnProperty.call(!e.refs,i)?(_r().b[2][0]++,_r().s[4]++,t?_r().b[3][1]++:(_r().b[3][0]++,_r().s[5]++,t={...e}),_r().s[6]++,t[i]=Sy("stop-")):(_r().b[2][1]++,_r().s[7]++,t[i]=e.refs[i])})):_r().b[0][1]++,_r().s[8]++,t}class Bj extends sr.Component{constructor(){super(...arguments);Pn(this,"state",(_r().s[10]++,{refs:{}}));Pn(this,"changeDataType",(_r().s[36]++,t=>{_r().f[11]++,_r().s[37]++,_r().b[8][0]++,t!=="interpolate"&&(_r().b[8][1]++,this.props.onChangeToDataFunction)?(_r().b[7][0]++,_r().s[38]++,this.props.onChangeToDataFunction(t)):_r().b[7][1]++}))}componentDidMount(){_r().f[2]++;const t=(_r().s[11]++,XK(this.props,this.state));_r().s[12]++,t?(_r().b[4][0]++,_r().s[13]++,this.setState({refs:t})):_r().b[4][1]++}static getDerivedStateFromProps(t,r){_r().f[3]++;const i=(_r().s[14]++,XK(t,r));return _r().s[15]++,i?(_r().b[5][0]++,_r().s[16]++,{refs:i}):(_r().b[5][1]++,_r().s[17]++,null)}orderStopsByZoom(t){_r().f[4]++;const r=(_r().s[18]++,t.map((s,l)=>(_r().f[5]++,_r().s[19]++,{ref:this.state.refs[l],data:s})).sort((s,l)=>(_r().f[6]++,_r().s[20]++,Sj(s.data[0],l.data[0])))),i=(_r().s[21]++,{});return _r().s[22]++,r.forEach((s,l)=>{_r().f[7]++,_r().s[23]++,i[l]=s.ref}),_r().s[24]++,this.setState({refs:i}),_r().s[25]++,r.map(s=>(_r().f[8]++,_r().s[26]++,s.data))}changeZoomStop(t,r,i){_r().f[9]++;const s=(_r().s[27]++,this.props.value.stops.slice(0));_r().s[28]++,s[t]=[r,i];const l=(_r().s[29]++,this.orderStopsByZoom(s)),o=(_r().s[30]++,{...this.props.value,stops:l});_r().s[31]++,this.props.onChange(this.props.fieldName,o)}changeBase(t){_r().f[10]++;const r=(_r().s[32]++,{...this.props.value,base:t});_r().s[33]++,r.base===void 0?(_r().b[6][0]++,_r().s[34]++,delete r.base):_r().b[6][1]++,_r().s[35]++,this.props.onChange(this.props.fieldName,r)}render(){var i,s,l,o;_r().f[12]++;const t=(_r().s[39]++,this.props.t),r=(_r().s[40]++,(i=this.props.value)==null?void 0:i.stops.map((p,v)=>{var P;_r().f[13]++;const x=(_r().s[41]++,p[0]),B=(_r().s[42]++,p[1]),T=(_r().s[43]++,le.jsx(Ej,{onClick:(P=this.props.onDeleteStop)==null?void 0:P.bind(this,v)}));return _r().s[44]++,le.jsxs("tr",{children:[le.jsx("td",{children:le.jsx(nm,{"aria-label":t("Zoom"),value:x,onChange:U=>(_r().f[14]++,_r().s[45]++,this.changeZoomStop(v,U,B)),min:0,max:22})}),le.jsx("td",{children:le.jsx(cy,{"aria-label":t("Output value"),fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:B,onChange:(U,j)=>(_r().f[15]++,_r().s[46]++,this.changeZoomStop(v,x,j))})}),le.jsx("td",{children:T})]},`${p[0]}-${p[1]}`)}));return _r().s[47]++,le.jsx("div",{className:"maputnik-data-spec-block",children:le.jsxs("fieldset",{className:"maputnik-data-spec-property",children:[le.jsx("legend",{children:Wx(this.props.fieldName)}),le.jsxs("div",{className:"maputnik-data-fieldset-inner",children:[le.jsx(pa,{label:t("Function"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(Qg,{value:"interpolate",onChange:p=>(_r().f[16]++,_r().s[48]++,this.changeDataType(p)),title:t("Select a type of data scale (default is 'categorical')."),options:this.getDataFunctionTypes(this.props.fieldSpec)})})}),le.jsx(pa,{label:t("Base"),children:le.jsx("div",{className:"maputnik-data-spec-property-input",children:le.jsx(cy,{fieldName:"base",fieldSpec:qo.function.base,value:(s=this.props.value)==null?void 0:s.base,onChange:(p,v)=>(_r().f[17]++,_r().s[49]++,this.changeBase(v))})})}),le.jsx("div",{className:"maputnik-function-stop",children:le.jsxs("table",{className:"maputnik-function-stop-table maputnik-function-stop-table--zoom",children:[le.jsx("caption",{children:t("Stops")}),le.jsx("thead",{children:le.jsxs("tr",{children:[le.jsx("th",{children:t("Zoom")}),le.jsx("th",{rowSpan:2,children:t("Output value")})]})}),le.jsx("tbody",{children:r})]})}),le.jsxs("div",{className:"maputnik-toolbox",children:[le.jsxs(il,{className:"maputnik-add-stop",onClick:(l=this.props.onAddStop)==null?void 0:l.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:EO})})," ",t("Add stop")]}),le.jsxs(il,{className:"maputnik-add-stop",onClick:(o=this.props.onExpressionClick)==null?void 0:o.bind(this),children:[le.jsx("svg",{style:{width:"14px",height:"14px",verticalAlign:"text-bottom"},viewBox:"0 0 24 24",children:le.jsx("path",{fill:"currentColor",d:kC})})," ",t("Convert to expression")]})]})]})]})})}getDataFunctionTypes(t){return _r().f[18]++,_r().s[50]++,t["property-type"]==="data-driven"?(_r().b[9][0]++,_r().s[51]++,["interpolate","categorical","interval","exponential","identity"]):(_r().b[9][1]++,_r().s[52]++,["interpolate"])}}Pn(Bj,"defaultProps",(_r().s[9]++,{errors:{}}));const wle=(_r().s[53]++,Ws()(Bj));function Dt(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",e="36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:78}},1:{start:{line:13,column:2},end:{line:13,column:74}},2:{start:{line:16,column:2},end:{line:18,column:5}},3:{start:{line:17,column:4},end:{line:17,column:52}},4:{start:{line:21,column:2},end:{line:21,column:123}},5:{start:{line:24,column:2},end:{line:26,column:5}},6:{start:{line:25,column:4},end:{line:25,column:83}},7:{start:{line:29,column:2},end:{line:29,column:64}},8:{start:{line:32,column:16},end:{line:32,column:47}},9:{start:{line:33,column:2},end:{line:33,column:38}},10:{start:{line:36,column:2},end:{line:38,column:3}},11:{start:{line:37,column:4},end:{line:37,column:37}},12:{start:{line:39,column:2},end:{line:39,column:15}},13:{start:{line:42,column:2},end:{line:54,column:3}},14:{start:{line:43,column:4},end:{line:43,column:19}},15:{start:{line:44,column:9},end:{line:54,column:3}},16:{start:{line:45,column:4},end:{line:45,column:19}},17:{start:{line:46,column:9},end:{line:54,column:3}},18:{start:{line:47,column:4},end:{line:47,column:19}},19:{start:{line:48,column:9},end:{line:54,column:3}},20:{start:{line:49,column:4},end:{line:49,column:27}},21:{start:{line:50,column:9},end:{line:54,column:3}},22:{start:{line:51,column:4},end:{line:51,column:27}},23:{start:{line:53,column:4},end:{line:53,column:24}},24:{start:{line:58,column:4},end:{line:58,column:17}},25:{start:{line:59,column:4},end:{line:62,column:6}},26:{start:{line:65,column:4},end:{line:72,column:5}},27:{start:{line:66,column:6},end:{line:66,column:16}},28:{start:{line:68,column:6},end:{line:71,column:8}},29:{start:{line:75,column:4},end:{line:77,column:5}},30:{start:{line:76,column:6},end:{line:76,column:27}},31:{start:{line:78,column:4},end:{line:80,column:5}},32:{start:{line:79,column:6},end:{line:79,column:24}},33:{start:{line:81,column:4},end:{line:81,column:25}},34:{start:{line:83,column:12},end:{line:99,column:3}},35:{start:{line:84,column:18},end:{line:84,column:49}},36:{start:{line:85,column:21},end:{line:85,column:44}},37:{start:{line:86,column:4},end:{line:93,column:5}},38:{start:{line:87,column:6},end:{line:90,column:9}},39:{start:{line:92,column:6},end:{line:92,column:49}},40:{start:{line:94,column:25},end:{line:97,column:5}},41:{start:{line:98,column:4},end:{line:98,column:60}},42:{start:{line:100,column:21},end:{line:106,column:3}},43:{start:{line:101,column:37},end:{line:101,column:47}},44:{start:{line:102,column:4},end:{line:102,column:54}},45:{start:{line:103,column:4},end:{line:105,column:7}},46:{start:{line:107,column:15},end:{line:118,column:3}},47:{start:{line:108,column:18},end:{line:108,column:49}},48:{start:{line:109,column:4},end:{line:109,column:29}},49:{start:{line:110,column:23},end:{line:113,column:5}},50:{start:{line:114,column:4},end:{line:116,column:5}},51:{start:{line:115,column:6},end:{line:115,column:33}},52:{start:{line:117,column:4},end:{line:117,column:60}},53:{start:{line:119,column:21},end:{line:148,column:3}},54:{start:{line:120,column:22},end:{line:120,column:32}},55:{start:{line:122,column:4},end:{line:146,column:5}},56:{start:{line:123,column:6},end:{line:138,column:7}},57:{start:{line:124,column:8},end:{line:129,column:10}},58:{start:{line:127,column:12},end:{line:127,column:88}},59:{start:{line:131,column:8},end:{line:137,column:10}},60:{start:{line:140,column:6},end:{line:145,column:8}},61:{start:{line:147,column:4},end:{line:147,column:56}},62:{start:{line:149,column:19},end:{line:165,column:3}},63:{start:{line:150,column:33},end:{line:150,column:43}},64:{start:{line:151,column:4},end:{line:164,column:5}},65:{start:{line:152,column:6},end:{line:155,column:9}},66:{start:{line:156,column:6},end:{line:158,column:9}},67:{start:{line:159,column:11},end:{line:164,column:5}},68:{start:{line:160,column:6},end:{line:160,column:47}},69:{start:{line:161,column:6},end:{line:163,column:9}},70:{start:{line:166,column:12},end:{line:169,column:3}},71:{start:{line:167,column:33},end:{line:167,column:43}},72:{start:{line:168,column:4},end:{line:168,column:140}},73:{start:{line:170,column:19},end:{line:181,column:3}},74:{start:{line:171,column:33},end:{line:171,column:43}},75:{start:{line:173,column:4},end:{line:179,column:5}},76:{start:{line:174,column:6},end:{line:174,column:67}},77:{start:{line:175,column:11},end:{line:179,column:5}},78:{start:{line:176,column:6},end:{line:176,column:43}},79:{start:{line:178,column:6},end:{line:178,column:70}},80:{start:{line:180,column:4},end:{line:180,column:58}},81:{start:{line:182,column:21},end:{line:220,column:3}},82:{start:{line:183,column:25},end:{line:183,column:72}},83:{start:{line:184,column:22},end:{line:184,column:61}},84:{start:{line:185,column:22},end:{line:185,column:32}},85:{start:{line:187,column:4},end:{line:218,column:5}},86:{start:{line:188,column:6},end:{line:207,column:7}},87:{start:{line:189,column:8},end:{line:196,column:10}},88:{start:{line:194,column:12},end:{line:194,column:111}},89:{start:{line:198,column:8},end:{line:206,column:10}},90:{start:{line:209,column:6},end:{line:217,column:8}},91:{start:{line:219,column:4},end:{line:219,column:56}},92:{start:{line:221,column:18},end:{line:223,column:3}},93:{start:{line:222,column:4},end:{line:222,column:39}},94:{start:{line:224,column:20},end:{line:226,column:3}},95:{start:{line:225,column:4},end:{line:225,column:40}},96:{start:{line:228,column:25},end:{line:228,column:35}},97:{start:{line:229,column:22},end:{line:229,column:132}},98:{start:{line:231,column:4},end:{line:295,column:5}},99:{start:{line:232,column:6},end:{line:247,column:8}},100:{start:{line:248,column:11},end:{line:295,column:5}},101:{start:{line:249,column:6},end:{line:263,column:8}},102:{start:{line:264,column:11},end:{line:295,column:5}},103:{start:{line:265,column:6},end:{line:279,column:8}},104:{start:{line:281,column:6},end:{line:294,column:8}},105:{start:{line:296,column:4},end:{line:296,column:148}}},fnMap:{0:{name:"isLiteralExpression",decl:{start:{line:9,column:9},end:{line:9,column:28}},loc:{start:{line:9,column:36},end:{line:11,column:1}},line:9},1:{name:"isGetExpression",decl:{start:{line:12,column:9},end:{line:12,column:24}},loc:{start:{line:12,column:32},end:{line:14,column:1}},line:12},2:{name:"isZoomField",decl:{start:{line:15,column:9},end:{line:15,column:20}},loc:{start:{line:15,column:28},end:{line:19,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:168},end:{line:16,column:169}},loc:{start:{line:16,column:178},end:{line:18,column:3}},line:16},4:{name:"isIdentityProperty",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:35},end:{line:22,column:1}},line:20},5:{name:"isDataStopProperty",decl:{start:{line:23,column:9},end:{line:23,column:27}},loc:{start:{line:23,column:35},end:{line:27,column:1}},line:23},6:{name:"(anonymous_6)",decl:{start:{line:24,column:168},end:{line:24,column:169}},loc:{start:{line:24,column:178},end:{line:26,column:3}},line:24},7:{name:"isDataField",decl:{start:{line:28,column:9},end:{line:28,column:20}},loc:{start:{line:28,column:28},end:{line:30,column:1}},line:28},8:{name:"isPrimative",decl:{start:{line:31,column:9},end:{line:31,column:20}},loc:{start:{line:31,column:28},end:{line:34,column:1}},line:31},9:{name:"isArrayOfPrimatives",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:37},end:{line:40,column:1}},line:35},10:{name:"getDataType",decl:{start:{line:41,column:9},end:{line:41,column:20}},loc:{start:{line:41,column:44},end:{line:55,column:1}},line:41},11:{name:"(anonymous_11)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:21},end:{line:63,column:3}},line:57},12:{name:"(anonymous_12)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:48},end:{line:73,column:3}},line:64},13:{name:"(anonymous_13)",decl:{start:{line:74,column:2},end:{line:74,column:3}},loc:{start:{line:74,column:34},end:{line:82,column:3}},line:74},14:{name:"(anonymous_14)",decl:{start:{line:83,column:12},end:{line:83,column:13}},loc:{start:{line:83,column:18},end:{line:99,column:3}},line:83},15:{name:"(anonymous_15)",decl:{start:{line:100,column:21},end:{line:100,column:22}},loc:{start:{line:100,column:27},end:{line:106,column:3}},line:100},16:{name:"(anonymous_16)",decl:{start:{line:107,column:15},end:{line:107,column:16}},loc:{start:{line:107,column:28},end:{line:118,column:3}},line:107},17:{name:"(anonymous_17)",decl:{start:{line:119,column:21},end:{line:119,column:22}},loc:{start:{line:119,column:27},end:{line:148,column:3}},line:119},18:{name:"(anonymous_18)",decl:{start:{line:126,column:33},end:{line:126,column:34}},loc:{start:{line:126,column:43},end:{line:128,column:11}},line:126},19:{name:"(anonymous_19)",decl:{start:{line:149,column:19},end:{line:149,column:20}},loc:{start:{line:149,column:25},end:{line:165,column:3}},line:149},20:{name:"(anonymous_20)",decl:{start:{line:166,column:12},end:{line:166,column:13}},loc:{start:{line:166,column:18},end:{line:169,column:3}},line:166},21:{name:"(anonymous_21)",decl:{start:{line:170,column:19},end:{line:170,column:20}},loc:{start:{line:170,column:25},end:{line:181,column:3}},line:170},22:{name:"(anonymous_22)",decl:{start:{line:182,column:21},end:{line:182,column:22}},loc:{start:{line:182,column:27},end:{line:220,column:3}},line:182},23:{name:"(anonymous_23)",decl:{start:{line:193,column:33},end:{line:193,column:34}},loc:{start:{line:193,column:43},end:{line:195,column:11}},line:193},24:{name:"(anonymous_24)",decl:{start:{line:221,column:18},end:{line:221,column:19}},loc:{start:{line:221,column:24},end:{line:223,column:3}},line:221},25:{name:"(anonymous_25)",decl:{start:{line:224,column:20},end:{line:224,column:21}},loc:{start:{line:224,column:26},end:{line:226,column:3}},line:224},26:{name:"(anonymous_26)",decl:{start:{line:227,column:2},end:{line:227,column:3}},loc:{start:{line:227,column:11},end:{line:297,column:3}},line:227}},branchMap:{0:{loc:{start:{line:10,column:9},end:{line:10,column:77}},type:"binary-expr",locations:[{start:{line:10,column:9},end:{line:10,column:29}},{start:{line:10,column:33},end:{line:10,column:51}},{start:{line:10,column:55},end:{line:10,column:77}}],line:10},1:{loc:{start:{line:13,column:9},end:{line:13,column:73}},type:"binary-expr",locations:[{start:{line:13,column:9},end:{line:13,column:29}},{start:{line:13,column:33},end:{line:13,column:51}},{start:{line:13,column:55},end:{line:13,column:73}}],line:13},2:{loc:{start:{line:16,column:9},end:{line:18,column:4}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:34}},{start:{line:16,column:38},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:90}},{start:{line:16,column:94},end:{line:16,column:120}},{start:{line:16,column:124},end:{line:16,column:146}},{start:{line:16,column:150},end:{line:18,column:4}}],line:16},3:{loc:{start:{line:17,column:11},end:{line:17,column:51}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:30}},{start:{line:17,column:34},end:{line:17,column:51}}],line:17},4:{loc:{start:{line:21,column:9},end:{line:21,column:122}},type:"binary-expr",locations:[{start:{line:21,column:9},end:{line:21,column:34}},{start:{line:21,column:38},end:{line:21,column:63}},{start:{line:21,column:67},end:{line:21,column:122}}],line:21},5:{loc:{start:{line:24,column:9},end:{line:26,column:4}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:34}},{start:{line:24,column:38},end:{line:24,column:49}},{start:{line:24,column:53},end:{line:24,column:90}},{start:{line:24,column:94},end:{line:24,column:116}},{start:{line:24,column:120},end:{line:24,column:146}},{start:{line:24,column:150},end:{line:26,column:4}}],line:24},6:{loc:{start:{line:25,column:11},end:{line:25,column:82}},type:"binary-expr",locations:[{start:{line:25,column:11},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:51}},{start:{line:25,column:55},end:{line:25,column:82}}],line:25},7:{loc:{start:{line:29,column:9},end:{line:29,column:63}},type:"binary-expr",locations:[{start:{line:29,column:9},end:{line:29,column:34}},{start:{line:29,column:38},end:{line:29,column:63}}],line:29},8:{loc:{start:{line:36,column:2},end:{line:38,column:3}},type:"if",locations:[{start:{line:36,column:2},end:{line:38,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:36},9:{loc:{start:{line:41,column:28},end:{line:41,column:42}},type:"default-arg",locations:[{start:{line:41,column:40},end:{line:41,column:42}}],line:41},10:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:44,column:9},end:{line:54,column:3}}],line:42},11:{loc:{start:{line:44,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:44,column:9},end:{line:54,column:3}},{start:{line:46,column:9},end:{line:54,column:3}}],line:44},12:{loc:{start:{line:46,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:46,column:9},end:{line:54,column:3}},{start:{line:48,column:9},end:{line:54,column:3}}],line:46},13:{loc:{start:{line:46,column:13},end:{line:46,column:69}},type:"binary-expr",locations:[{start:{line:46,column:13},end:{line:46,column:39}},{start:{line:46,column:43},end:{line:46,column:69}}],line:46},14:{loc:{start:{line:48,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:48,column:9},end:{line:54,column:3}},{start:{line:50,column:9},end:{line:54,column:3}}],line:48},15:{loc:{start:{line:50,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:50,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:50},16:{loc:{start:{line:65,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:65,column:4},end:{line:72,column:5}},{start:{line:67,column:11},end:{line:72,column:5}}],line:65},17:{loc:{start:{line:75,column:4},end:{line:77,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:77,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},18:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},19:{loc:{start:{line:86,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:86,column:4},end:{line:93,column:5}},{start:{line:91,column:11},end:{line:93,column:5}}],line:86},20:{loc:{start:{line:114,column:4},end:{line:116,column:5}},type:"if",locations:[{start:{line:114,column:4},end:{line:116,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},21:{loc:{start:{line:122,column:4},end:{line:146,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:146,column:5}},{start:{line:139,column:11},end:{line:146,column:5}}],line:122},22:{loc:{start:{line:123,column:6},end:{line:138,column:7}},type:"if",locations:[{start:{line:123,column:6},end:{line:138,column:7}},{start:{line:130,column:13},end:{line:138,column:7}}],line:123},23:{loc:{start:{line:127,column:34},end:{line:127,column:86}},type:"binary-expr",locations:[{start:{line:127,column:34},end:{line:127,column:41}},{start:{line:127,column:45},end:{line:127,column:86}}],line:127},24:{loc:{start:{line:142,column:14},end:{line:142,column:64}},type:"binary-expr",locations:[{start:{line:142,column:14},end:{line:142,column:19}},{start:{line:142,column:23},end:{line:142,column:64}}],line:142},25:{loc:{start:{line:143,column:15},end:{line:143,column:65}},type:"binary-expr",locations:[{start:{line:143,column:15},end:{line:143,column:20}},{start:{line:143,column:24},end:{line:143,column:65}}],line:143},26:{loc:{start:{line:151,column:4},end:{line:164,column:5}},type:"if",locations:[{start:{line:151,column:4},end:{line:164,column:5}},{start:{line:159,column:11},end:{line:164,column:5}}],line:151},27:{loc:{start:{line:159,column:11},end:{line:164,column:5}},type:"if",locations:[{start:{line:159,column:11},end:{line:164,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:159},28:{loc:{start:{line:168,column:11},end:{line:168,column:139}},type:"binary-expr",locations:[{start:{line:168,column:11},end:{line:168,column:33}},{start:{line:168,column:37},end:{line:168,column:63}},{start:{line:168,column:67},end:{line:168,column:85}},{start:{line:168,column:89},end:{line:168,column:109}},{start:{line:168,column:113},end:{line:168,column:139}}],line:168},29:{loc:{start:{line:173,column:4},end:{line:179,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:179,column:5}},{start:{line:175,column:11},end:{line:179,column:5}}],line:173},30:{loc:{start:{line:173,column:8},end:{line:173,column:53}},type:"binary-expr",locations:[{start:{line:173,column:8},end:{line:173,column:33}},{start:{line:173,column:37},end:{line:173,column:53}}],line:173},31:{loc:{start:{line:175,column:11},end:{line:179,column:5}},type:"if",locations:[{start:{line:175,column:11},end:{line:179,column:5}},{start:{line:177,column:11},end:{line:179,column:5}}],line:175},32:{loc:{start:{line:178,column:31},end:{line:178,column:68}},type:"binary-expr",locations:[{start:{line:178,column:31},end:{line:178,column:36}},{start:{line:178,column:40},end:{line:178,column:68}}],line:178},33:{loc:{start:{line:184,column:22},end:{line:184,column:61}},type:"cond-expr",locations:[{start:{line:184,column:55},end:{line:184,column:57}},{start:{line:184,column:60},end:{line:184,column:61}}],line:184},34:{loc:{start:{line:187,column:4},end:{line:218,column:5}},type:"if",locations:[{start:{line:187,column:4},end:{line:218,column:5}},{start:{line:208,column:11},end:{line:218,column:5}}],line:187},35:{loc:{start:{line:188,column:6},end:{line:207,column:7}},type:"if",locations:[{start:{line:188,column:6},end:{line:207,column:7}},{start:{line:197,column:13},end:{line:207,column:7}}],line:188},36:{loc:{start:{line:194,column:57},end:{line:194,column:109}},type:"binary-expr",locations:[{start:{line:194,column:57},end:{line:194,column:64}},{start:{line:194,column:68},end:{line:194,column:109}}],line:194},37:{loc:{start:{line:214,column:42},end:{line:214,column:103}},type:"binary-expr",locations:[{start:{line:214,column:42},end:{line:214,column:58}},{start:{line:214,column:62},end:{line:214,column:103}}],line:214},38:{loc:{start:{line:215,column:43},end:{line:215,column:104}},type:"binary-expr",locations:[{start:{line:215,column:43},end:{line:215,column:59}},{start:{line:215,column:63},end:{line:215,column:104}}],line:215},39:{loc:{start:{line:229,column:22},end:{line:229,column:132}},type:"cond-expr",locations:[{start:{line:229,column:74},end:{line:229,column:101}},{start:{line:229,column:104},end:{line:229,column:132}}],line:229},40:{loc:{start:{line:231,column:4},end:{line:295,column:5}},type:"if",locations:[{start:{line:231,column:4},end:{line:295,column:5}},{start:{line:248,column:11},end:{line:295,column:5}}],line:231},41:{loc:{start:{line:248,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:248,column:11},end:{line:295,column:5}},{start:{line:264,column:11},end:{line:295,column:5}}],line:248},42:{loc:{start:{line:264,column:11},end:{line:295,column:5}},type:"if",locations:[{start:{line:264,column:11},end:{line:295,column:5}},{start:{line:280,column:11},end:{line:295,column:5}}],line:264}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},b:{0:[0,0,0],1:[0,0,0],2:[0,0,0,0,0,0],3:[0,0],4:[0,0,0],5:[0,0,0,0,0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0,0,0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldFunction.tsx"],names:[],mappings:"AAkVQ;AAlVR,OAAO,WAAW;AAElB,OAAO,kBAAkB;AACzB,OAAO,kBAA4B;AACnC,OAAO,kBAAkB;AACzB,OAAO,wBAAwB;AAC/B,SAAQ,YAAY,qBAAoB;AACxC,SAAQ,2BAA0B;AAGlC,SAAS,oBAAoB,OAAY;AACvC,SAAQ,MAAM,QAAQ,KAAK,KAAK,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AACrE;AAEA,SAAS,gBAAgB,OAAY;AACnC,SACE,MAAM,QAAQ,KAAK,KACnB,MAAM,WAAW,KACjB,MAAM,CAAC,MAAM;AAEjB;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,SAAS,KACrB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW;AAAA,EAEpB,CAAC;AAEL;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SAAS,cACf,OAAO,UAAU,eAAe,KAAK,OAAO,UAAU;AAE1D;AAEA,SAAS,mBAAmB,OAAY;AACtC,SACE,OAAO,UAAW,YAClB,MAAM,SACN,OAAO,MAAM,aAAc,eAC3B,MAAM,MAAM,SAAS,KACrB,MAAM,QAAQ,MAAM,KAAK,KACzB,MAAM,MAAM,MAAM,CAAC,SAAe;AAChC,WACE,MAAM,QAAQ,IAAI,KAClB,KAAK,WAAW,KAChB,OAAO,KAAK,CAAC,MAAO;AAAA,EAExB,CAAC;AAEL;AAEA,SAAS,YAAY,OAAY;AAC/B,SACE,mBAAmB,KAAK,KACxB,mBAAmB,KAAK;AAE5B;AAEA,SAAS,YAAY,OAAgD;AACnE,QAAM,QAAQ,CAAC,UAAU,WAAW,QAAQ;AAC5C,SAAO,MAAM,SAAS,OAAO,KAAM;AACrC;AAEA,SAAS,oBAAoB,QAAyD;AACpF,MAAI,MAAM,QAAQ,MAAM,GAAG;AACzB,WAAO,OAAO,MAAM,WAAW;AAAA,EACjC;AACA,SAAO;AACT;AAEA,SAAS,YAAY,OAAY,YAAU,CAAC,GAAU;AACpD,MAAI,UAAU,QAAW;AACvB,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,UAAU,SAAS,WAAW,oBAAoB,KAAK,GAAG;AACjE,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,WACS,YAAY,KAAK,GAAG;AAC3B,WAAO;AAAA,EACT,OACK;AACH,WAAO;AAAA,EACT;AACF;AAoBA,qBAAqB,sBAAsB,MAAM,UAAkD;AAAA,EACjG,YAAa,OAA2B;AACtC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MAClD,WAAW;AAAA,IACb;AAAA,EACF;AAAA,EAEA,OAAO,yBAAyB,OAAqC,OAA2B;AAE9F,QAAI,MAAM,WAAW;AACnB,aAAO,CAAC;AAAA,IACV,OACK;AACH,aAAO;AAAA,QACL,WAAW;AAAA,QACX,UAAU,YAAY,MAAM,OAAO,MAAM,SAAS;AAAA,MACpD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,qBAAqB,WAAgB;AACnC,QAAI,UAAU,WAAW,cAAc;AACrC,aAAO;AAAA,IACT;AACA,QAAI,UAAU,SAAS,UAAU;AAC/B,aAAO;AAAA,IACT;AACA,WAAO;AAAA,EACT;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,OAAO,SAAS,CAAC,MAAM,UAAU;AACnC,YAAM,KAAK;AAAA,QACT,EAAC,MAAM,SAAS,CAAC,EAAE,OAAO,GAAG,OAAO,SAAS,CAAC,EAAE,MAAK;AAAA,QACrD,SAAS,CAAC;AAAA,MACZ,CAAC;AAAA,IACH,OACK;AACH,YAAM,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAAA,IAC3C;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,WAAW,UAAS,IAAI,KAAK;AACpC,SAAK,MAAM,SAAS,WAAW,UAAU,OAAO;AAChD,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,aAAa,CAAC,YAAoB;AAChC,UAAM,QAAQ,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC;AAC5C,UAAM,OAAO,SAAS,CAAC;AAEvB,QAAI,eAAe;AAAA,MACjB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF;AAEA,QAAG,MAAM,WAAW,GAAG;AACrB,qBAAe,MAAM,CAAC,EAAE,CAAC;AAAA,IAC3B;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,YAAY;AAAA,EACxD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,EAAC,MAAK,IAAI,KAAK;AAErB,QAAI;AACJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,KAAK,CAAC,EAAE,MAAM,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC5E,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YAC7C,CAAC,IAAI,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAChD;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,OAAO;AAAA,UACL,CAAC,GAAG,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACtD,CAAC,IAAI,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QACzD;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAEhC,QAAI,gBAAgB,KAAK,GAAG;AAC1B,WAAK,MAAM,SAAS,WAAW;AAAA,QAC7B,QAAQ;AAAA,QACR,YAAY,MAAM,CAAC;AAAA,MACrB,CAAC;AACD,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH,WACS,oBAAoB,KAAK,GAAG;AACnC,WAAK,MAAM,SAAS,WAAW,MAAM,CAAC,CAAC;AACvC,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,UAAU,MAAM;AACd,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,WACE,gBAAgB,KAAK,KACrB,oBAAoB,KAAK,KACzB,YAAY,KAAK,KAChB,MAAM,QAAQ,KAAK,KAAK,UAAU,SAAS;AAAA,EAEhD;AAAA,EAEA,iBAAiB,MAAM;AACrB,UAAM,EAAC,OAAO,UAAS,IAAI,KAAK;AAChC,QAAI;AAEJ,QAAI,OAAO,UAAW,YAAY,WAAW,OAAO;AAClD,mBAAa,cAAc,gBAAgB,OAAO,SAAS;AAAA,IAC7D,WACS,mBAAmB,KAAK,GAAG;AAClC,mBAAa,CAAC,OAAO,MAAM,QAAQ;AAAA,IACrC,OACK;AACH,mBAAa,CAAC,WAAW,SAAS,KAAK,MAAM,UAAU,OAAO;AAAA,IAChE;AACA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,UAAU;AAAA,EACtD;AAAA,EAEA,mBAAmB,MAAM;AACvB,UAAM,eAAe,KAAK,qBAAqB,KAAK,MAAM,SAAS;AACnE,UAAM,YAAY,iBAAiB,gBAAgB,KAAK;AACxD,UAAM,EAAC,MAAK,IAAI,KAAK;AACrB,QAAI;AAEJ,QAAI,OAAO,UAAW,UAAU;AAC9B,UAAI,MAAM,OAAO;AACf,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO,MAAM,MAAM,IAAI,CAAC,SAAe;AACrC,mBAAO,CAAC,EAAC,MAAM,KAAK,CAAC,GAAG,OAAO,UAAS,GAAG,KAAK,CAAC,KAAK,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UACjG,CAAC;AAAA,QACH;AAAA,MACF,OACK;AACH,mBAAW;AAAA,UACT,UAAU;AAAA,UACV,MAAM;AAAA,UACN,MAAM,MAAM;AAAA,UACZ,OAAO;AAAA,YACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,YACvE,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC1E;AAAA,QACF;AAAA,MACF;AAAA,IACF,OACK;AACH,iBAAW;AAAA,QACT,UAAU;AAAA,QACV,MAAM;AAAA,QACN,MAAM,MAAM;AAAA,QACZ,OAAO;AAAA,UACL,CAAC,EAAC,MAAM,GAAG,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,UAC3F,CAAC,EAAC,MAAM,IAAI,OAAO,UAAS,GAAG,KAAK,MAAM,SAAS,oBAAoB,KAAK,MAAM,SAAS,CAAC;AAAA,QAC9F;AAAA,MACF;AAAA,IACF;AAEA,SAAK,MAAM,SAAS,KAAK,MAAM,WAAW,QAAQ;AAAA,EACpD;AAAA,EAEA,gBAAgB,MAAM;AACpB,SAAK,SAAS,EAAC,WAAW,KAAI,CAAC;AAAA,EACjC;AAAA,EAEA,kBAAkB,MAAM;AACtB,SAAK,SAAS,EAAC,WAAW,MAAK,CAAC;AAAA,EAClC;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,SAAQ,IAAI,KAAK;AACxB,UAAM,YAAY,KAAK,MAAM,UAAU,YAAY,KAAK,MAAM,QAAQ,8BAA8B;AACpG,QAAI;AAEJ,QAAI,aAAa,cAAc;AAC7B,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,MAAM,KAAK,MAAM,SAAS;AAAA,UAC7D,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA,UACb,UAAU,KAAK;AAAA,UACf,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,SAAS,KAAK;AAAA,UACd,QAAQ,KAAK;AAAA;AAAA,MACf;AAAA,IAEJ,WACS,aAAa,iBAAiB;AACrC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,WACS,aAAa,iBAAiB;AAErC,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,cAAc,KAAK;AAAA,UACnB,WAAW,KAAK;AAAA,UAChB,wBAAwB,KAAK;AAAA,UAC7B,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ,OACK;AACH,kBACE;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,KAAK,MAAM;AAAA,UACnB,UAAU,KAAK,MAAM,SAAS,KAAK,IAAI;AAAA,UACvC,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,WAAW,KAAK,MAAM;AAAA,UACtB,OAAO,KAAK,MAAM;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,aAAa,KAAK;AAAA,UAClB,mBAAmB,KAAK;AAAA;AAAA,MAC1B;AAAA,IAEJ;AACA,WAAO,oBAAC,SAAI,WAAW,WAAW,eAAa,0BAAwB,KAAK,MAAM,WAC/E,qBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"36be9049018d9eb4ab6b3a8eeeb8db87a4e7a5ee"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Dt=function(){return l},l}Dt();function JK(n){return Dt().f[0]++,Dt().s[0]++,Dt().b[0][0]++,Array.isArray(n)&&(Dt().b[0][1]++,n.length===2)&&(Dt().b[0][2]++,n[0]==="literal")}function eR(n){return Dt().f[1]++,Dt().s[1]++,Dt().b[1][0]++,Array.isArray(n)&&(Dt().b[1][1]++,n.length===2)&&(Dt().b[1][2]++,n[0]==="get")}function Sle(n){return Dt().f[2]++,Dt().s[2]++,Dt().b[2][0]++,typeof n=="object"&&(Dt().b[2][1]++,n.stops)&&(Dt().b[2][2]++,typeof n.property>"u")&&(Dt().b[2][3]++,Array.isArray(n.stops))&&(Dt().b[2][4]++,n.stops.length>1)&&(Dt().b[2][5]++,n.stops.every(e=>(Dt().f[3]++,Dt().s[3]++,Dt().b[3][0]++,Array.isArray(e)&&(Dt().b[3][1]++,e.length===2))))}function Oj(n){return Dt().f[4]++,Dt().s[4]++,Dt().b[4][0]++,typeof n=="object"&&(Dt().b[4][1]++,n.type==="identity")&&(Dt().b[4][2]++,Object.prototype.hasOwnProperty.call(n,"property"))}function Ele(n){return Dt().f[5]++,Dt().s[5]++,Dt().b[5][0]++,typeof n=="object"&&(Dt().b[5][1]++,n.stops)&&(Dt().b[5][2]++,typeof n.property<"u")&&(Dt().b[5][3]++,n.stops.length>1)&&(Dt().b[5][4]++,Array.isArray(n.stops))&&(Dt().b[5][5]++,n.stops.every(e=>(Dt().f[6]++,Dt().s[6]++,Dt().b[6][0]++,Array.isArray(e)&&(Dt().b[6][1]++,e.length===2)&&(Dt().b[6][2]++,typeof e[0]=="object"))))}function Ble(n){return Dt().f[7]++,Dt().s[7]++,Dt().b[7][0]++,Oj(n)||(Dt().b[7][1]++,Ele(n))}function HO(n){Dt().f[8]++;const e=(Dt().s[8]++,["string","boolean","number"]);return Dt().s[9]++,e.includes(typeof n)}function Ole(n){return Dt().f[9]++,Dt().s[10]++,Array.isArray(n)?(Dt().b[8][0]++,Dt().s[11]++,n.every(HO)):(Dt().b[8][1]++,Dt().s[12]++,!1)}function tR(n,e=(Dt().b[9][0]++,{})){return Dt().f[10]++,Dt().s[13]++,n===void 0?(Dt().b[10][0]++,Dt().s[14]++,"value"):(Dt().b[10][1]++,Dt().s[15]++,HO(n)?(Dt().b[11][0]++,Dt().s[16]++,"value"):(Dt().b[11][1]++,Dt().s[17]++,Dt().b[13][0]++,e.type==="array"&&(Dt().b[13][1]++,Ole(n))?(Dt().b[12][0]++,Dt().s[18]++,"value"):(Dt().b[12][1]++,Dt().s[19]++,Sle(n)?(Dt().b[14][0]++,Dt().s[20]++,"zoom_function"):(Dt().b[14][1]++,Dt().s[21]++,Ble(n)?(Dt().b[15][0]++,Dt().s[22]++,"data_function"):(Dt().b[15][1]++,Dt().s[23]++,"expression")))))}class Ile extends sr.Component{constructor(t){Dt().f[11]++,Dt().s[24]++;super(t);Pn(this,"addStop",(Dt().s[34]++,()=>{Dt().f[14]++;const t=(Dt().s[35]++,this.props.value.stops.slice(0)),r=(Dt().s[36]++,t[t.length-1]);Dt().s[37]++,typeof r[0]=="object"?(Dt().b[19][0]++,Dt().s[38]++,t.push([{zoom:r[0].zoom+1,value:r[0].value},r[1]])):(Dt().b[19][1]++,Dt().s[39]++,t.push([r[0]+1,r[1]]));const i=(Dt().s[40]++,{...this.props.value,stops:t});Dt().s[41]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"deleteExpression",(Dt().s[42]++,()=>{Dt().f[15]++;const{fieldSpec:t,fieldName:r}=(Dt().s[43]++,this.props);Dt().s[44]++,this.props.onChange(r,t.default),Dt().s[45]++,this.setState({dataType:"value"})}));Pn(this,"deleteStop",(Dt().s[46]++,t=>{Dt().f[16]++;const r=(Dt().s[47]++,this.props.value.stops.slice(0));Dt().s[48]++,r.splice(t,1);let i=(Dt().s[49]++,{...this.props.value,stops:r});Dt().s[50]++,r.length===1?(Dt().b[20][0]++,Dt().s[51]++,i=r[0][1]):Dt().b[20][1]++,Dt().s[52]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"makeZoomFunction",(Dt().s[53]++,()=>{Dt().f[17]++;const{value:t}=(Dt().s[54]++,this.props);let r;Dt().s[55]++,typeof t=="object"?(Dt().b[21][0]++,Dt().s[56]++,t.stops?(Dt().b[22][0]++,Dt().s[57]++,r={base:t.base,stops:t.stops.map(i=>(Dt().f[18]++,Dt().s[58]++,[i[0].zoom,(Dt().b[23][0]++,i[1]||(Dt().b[23][1]++,_f(this.props.fieldSpec)))]))}):(Dt().b[22][1]++,Dt().s[59]++,r={base:t.base,stops:[[6,_f(this.props.fieldSpec)],[10,_f(this.props.fieldSpec)]]})):(Dt().b[21][1]++,Dt().s[60]++,r={stops:[[6,(Dt().b[24][0]++,t||(Dt().b[24][1]++,_f(this.props.fieldSpec)))],[10,(Dt().b[25][0]++,t||(Dt().b[25][1]++,_f(this.props.fieldSpec)))]]}),Dt().s[61]++,this.props.onChange(this.props.fieldName,r)}));Pn(this,"undoExpression",(Dt().s[62]++,()=>{Dt().f[19]++;const{value:t,fieldName:r}=(Dt().s[63]++,this.props);Dt().s[64]++,eR(t)?(Dt().b[26][0]++,Dt().s[65]++,this.props.onChange(r,{type:"identity",property:t[1]}),Dt().s[66]++,this.setState({dataType:"value"})):(Dt().b[26][1]++,Dt().s[67]++,JK(t)?(Dt().b[27][0]++,Dt().s[68]++,this.props.onChange(r,t[1]),Dt().s[69]++,this.setState({dataType:"value"})):Dt().b[27][1]++)}));Pn(this,"canUndo",(Dt().s[70]++,()=>{Dt().f[20]++;const{value:t,fieldSpec:r}=(Dt().s[71]++,this.props);return Dt().s[72]++,Dt().b[28][0]++,eR(t)||(Dt().b[28][1]++,JK(t))||(Dt().b[28][2]++,HO(t))||(Dt().b[28][3]++,Array.isArray(t)&&(Dt().b[28][4]++,r.type==="array"))}));Pn(this,"makeExpression",(Dt().s[73]++,()=>{Dt().f[21]++;const{value:t,fieldSpec:r}=(Dt().s[74]++,this.props);let i;Dt().s[75]++,Dt().b[30][0]++,typeof t=="object"&&(Dt().b[30][1]++,"stops"in t)?(Dt().b[29][0]++,Dt().s[76]++,i=Zq.convertFunction(t,r)):(Dt().b[29][1]++,Dt().s[77]++,Oj(t)?(Dt().b[31][0]++,Dt().s[78]++,i=["get",t.property]):(Dt().b[31][1]++,Dt().s[79]++,i=["literal",(Dt().b[32][0]++,t||(Dt().b[32][1]++,this.props.fieldSpec.default))])),Dt().s[80]++,this.props.onChange(this.props.fieldName,i)}));Pn(this,"makeDataFunction",(Dt().s[81]++,()=>{Dt().f[22]++;const t=(Dt().s[82]++,this.getFieldFunctionType(this.props.fieldSpec)),r=(Dt().s[83]++,t==="categorical"?(Dt().b[33][0]++,""):(Dt().b[33][1]++,0)),{value:i}=(Dt().s[84]++,this.props);let s;Dt().s[85]++,typeof i=="object"?(Dt().b[34][0]++,Dt().s[86]++,i.stops?(Dt().b[35][0]++,Dt().s[87]++,s={property:"",type:t,base:i.base,stops:i.stops.map(l=>(Dt().f[23]++,Dt().s[88]++,[{zoom:l[0],value:r},(Dt().b[36][0]++,l[1]||(Dt().b[36][1]++,_f(this.props.fieldSpec)))]))}):(Dt().b[35][1]++,Dt().s[89]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},_f(this.props.fieldSpec)],[{zoom:10,value:r},_f(this.props.fieldSpec)]]})):(Dt().b[34][1]++,Dt().s[90]++,s={property:"",type:t,base:i.base,stops:[[{zoom:6,value:r},(Dt().b[37][0]++,this.props.value||(Dt().b[37][1]++,_f(this.props.fieldSpec)))],[{zoom:10,value:r},(Dt().b[38][0]++,this.props.value||(Dt().b[38][1]++,_f(this.props.fieldSpec)))]]}),Dt().s[91]++,this.props.onChange(this.props.fieldName,s)}));Pn(this,"onMarkEditing",(Dt().s[92]++,()=>{Dt().f[24]++,Dt().s[93]++,this.setState({isEditing:!0})}));Pn(this,"onUnmarkEditing",(Dt().s[94]++,()=>{Dt().f[25]++,Dt().s[95]++,this.setState({isEditing:!1})}));Dt().s[25]++,this.state={dataType:tR(t.value,t.fieldSpec),isEditing:!1}}static getDerivedStateFromProps(t,r){return Dt().f[12]++,Dt().s[26]++,r.isEditing?(Dt().b[16][0]++,Dt().s[27]++,{}):(Dt().b[16][1]++,Dt().s[28]++,{isEditing:!1,dataType:tR(t.value,t.fieldSpec)})}getFieldFunctionType(t){return Dt().f[13]++,Dt().s[29]++,t.expression.interpolated?(Dt().b[17][0]++,Dt().s[30]++,"exponential"):(Dt().b[17][1]++,Dt().s[31]++,t.type==="number"?(Dt().b[18][0]++,Dt().s[32]++,"interval"):(Dt().b[18][1]++,Dt().s[33]++,"categorical"))}render(){Dt().f[26]++;const{dataType:t}=(Dt().s[96]++,this.state),r=(Dt().s[97]++,this.props.fieldSpec.default===this.props.value?(Dt().b[39][0]++,"maputnik-default-property"):(Dt().b[39][1]++,"maputnik-modified-property"));let i;return Dt().s[98]++,t==="expression"?(Dt().b[40][0]++,Dt().s[99]++,i=le.jsx(Fz,{errors:this.props.errors,onChange:this.props.onChange.bind(this,this.props.fieldName),canUndo:this.canUndo,onUndo:this.undoExpression,onDelete:this.deleteExpression,fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onFocus:this.onMarkEditing,onBlur:this.onUnmarkEditing})):(Dt().b[40][1]++,Dt().s[100]++,t==="zoom_function"?(Dt().b[41][0]++,Dt().s[101]++,i=le.jsx(wle,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToDataFunction:this.makeDataFunction,onExpressionClick:this.makeExpression})):(Dt().b[41][1]++,Dt().s[102]++,t==="data_function"?(Dt().b[42][0]++,Dt().s[103]++,i=le.jsx(Mle,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onDeleteStop:this.deleteStop,onAddStop:this.addStop,onChangeToZoomFunction:this.makeZoomFunction,onExpressionClick:this.makeExpression})):(Dt().b[42][1]++,Dt().s[104]++,i=le.jsx(wj,{errors:this.props.errors,onChange:this.props.onChange.bind(this),fieldType:this.props.fieldType,fieldName:this.props.fieldName,fieldSpec:this.props.fieldSpec,value:this.props.value,onZoomClick:this.makeZoomFunction,onDataClick:this.makeDataFunction,onExpressionClick:this.makeExpression})))),Dt().s[105]++,le.jsx("div",{className:r,"data-wd-key":"spec-field-container:"+this.props.fieldName,children:i})}}function Ao(){var n="/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",e="411d3be261f729b266d6cb26884b34616b925c83",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx",statementMap:{0:{start:{line:4,column:23},end:{line:4,column:117}},1:{start:{line:6,column:20},end:{line:6,column:60}},2:{start:{line:7,column:16},end:{line:7,column:49}},3:{start:{line:8,column:20},end:{line:8,column:36}},4:{start:{line:9,column:2},end:{line:14,column:3}},5:{start:{line:10,column:4},end:{line:13,column:6}},6:{start:{line:15,column:2},end:{line:20,column:3}},7:{start:{line:16,column:4},end:{line:19,column:6}},8:{start:{line:21,column:2},end:{line:21,column:19}},9:{start:{line:24,column:16},end:{line:24,column:48}},10:{start:{line:25,column:2},end:{line:29,column:3}},11:{start:{line:26,column:4},end:{line:26,column:19}},12:{start:{line:28,column:4},end:{line:28,column:20}},13:{start:{line:32,column:21},end:{line:35,column:3}},14:{start:{line:33,column:18},end:{line:33,column:80}},15:{start:{line:34,column:4},end:{line:34,column:51}},16:{start:{line:37,column:23},end:{line:37,column:33}},17:{start:{line:38,column:19},end:{line:56,column:6}},18:{start:{line:39,column:24},end:{line:39,column:87}},19:{start:{line:40,column:20},end:{line:40,column:48}},20:{start:{line:41,column:21},end:{line:41,column:50}},21:{start:{line:42,column:25},end:{line:42,column:82}},22:{start:{line:43,column:24},end:{line:43,column:63}},23:{start:{line:44,column:6},end:{line:55,column:8}},24:{start:{line:57,column:4},end:{line:57,column:98}}},fnMap:{0:{name:"getFieldSpec",decl:{start:{line:5,column:9},end:{line:5,column:21}},loc:{start:{line:5,column:50},end:{line:22,column:1}},line:5},1:{name:"getGroupName",decl:{start:{line:23,column:9},end:{line:23,column:21}},loc:{start:{line:23,column:50},end:{line:30,column:1}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:45},end:{line:35,column:3}},line:32},3:{name:"(anonymous_3)",decl:{start:{line:36,column:2},end:{line:36,column:3}},loc:{start:{line:36,column:11},end:{line:58,column:3}},line:36},4:{name:"(anonymous_4)",decl:{start:{line:38,column:46},end:{line:38,column:47}},loc:{start:{line:38,column:61},end:{line:56,column:5}},line:38}},branchMap:{0:{loc:{start:{line:9,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:9,column:2},end:{line:14,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:9},1:{loc:{start:{line:15,column:2},end:{line:20,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:20,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:24,column:16},end:{line:24,column:48}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:42}},{start:{line:24,column:46},end:{line:24,column:48}}],line:24},3:{loc:{start:{line:25,column:2},end:{line:29,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:29,column:3}},{start:{line:27,column:9},end:{line:29,column:3}}],line:25},4:{loc:{start:{line:40,column:20},end:{line:40,column:48}},type:"binary-expr",locations:[{start:{line:40,column:20},end:{line:40,column:42}},{start:{line:40,column:46},end:{line:40,column:48}}],line:40},5:{loc:{start:{line:41,column:21},end:{line:41,column:50}},type:"binary-expr",locations:[{start:{line:41,column:21},end:{line:41,column:44}},{start:{line:41,column:48},end:{line:41,column:50}}],line:41},6:{loc:{start:{line:42,column:25},end:{line:42,column:82}},type:"cond-expr",locations:[{start:{line:42,column:46},end:{line:42,column:62}},{start:{line:42,column:65},end:{line:42,column:82}}],line:42},7:{loc:{start:{line:43,column:24},end:{line:43,column:63}},type:"cond-expr",locations:[{start:{line:43,column:45},end:{line:43,column:52}},{start:{line:43,column:55},end:{line:43,column:63}}],line:43}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/PropertyGroup.tsx"],names:[],mappings:"AA+Da;AA/Db,OAAO,WAAW;AAElB,OAAO,mBAAmB;AAG1B,MAAM,iBAAiB,CAAC,sBAAsB,gBAAgB,gBAAgB,0BAA0B,YAAY;AAIpH,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,YAAY,aAAa,MAAM,WAAW,SAAS;AACzD,QAAM,QAAQ,KAAK,YAAY,MAAM,SAAS;AAC9C,QAAM,YAAY,MAAM,SAAS;AACjC,MAAG,eAAe,QAAQ,SAAS,KAAK,GAAG;AACzC,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,MAAG,cAAc,aAAa;AAC5B,WAAO;AAAA,MACL,GAAG;AAAA,MACH,QAAQ,KAAK,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,aAAa,MAAW,WAAuC,WAAmB;AACzF,QAAM,QAAS,KAAK,WAAW,SAAS,KAAK,CAAC;AAC9C,MAAI,aAAa,OAAO;AACtB,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAUA,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,mBAAmB,CAAC,UAAkB,aAAkB;AACtD,UAAM,QAAQ,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,QAAQ;AAC3E,SAAK,MAAM,SAAS,OAAO,UAAU,QAAQ;AAAA,EAC/C;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,OAAM,IAAI,KAAK;AACtB,UAAM,SAAS,KAAK,MAAM,YAAY,IAAI,eAAa;AACrD,YAAM,YAAY,aAAa,KAAK,MAAM,MAAM,KAAK,MAAM,MAAM,MAAM,SAAS;AAEhF,YAAM,QAAQ,KAAK,MAAM,MAAM,SAAS,CAAC;AACzC,YAAM,SAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAC3C,YAAM,aAAa,aAAa,QAC5B,MAAM,SAA+B,IACrC,OAAO,SAAgC;AAC3C,YAAM,YAAY,aAAa,QAAQ,UAAU;AAEjD,aAAO;AAAA,QAAC;AAAA;AAAA,UACN;AAAA,UACA,UAAU,KAAK;AAAA,UAEf;AAAA,UACA,OAAO;AAAA,UACP;AAAA,UACA;AAAA;AAAA,QAJK;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,2BACnB,kBACH;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"411d3be261f729b266d6cb26884b34616b925c83"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ao=function(){return l},l}Ao();const kle=(Ao().s[0]++,["background-pattern","fill-pattern","line-pattern","fill-extrusion-pattern","icon-image"]);function Tle(n,e,t){Ao().f[0]++;const r=(Ao().s[1]++,Ij(n,e,t)),i=(Ao().s[2]++,n[r+"_"+e]),s=(Ao().s[3]++,i[t]);return Ao().s[4]++,kle.indexOf(t)>=0?(Ao().b[0][0]++,Ao().s[5]++,{...s,values:n.$root.sprite.values}):(Ao().b[0][1]++,Ao().s[6]++,t==="text-font"?(Ao().b[1][0]++,Ao().s[7]++,{...s,values:n.$root.glyphs.values}):(Ao().b[1][1]++,Ao().s[8]++,s))}function Ij(n,e,t){Ao().f[1]++;const r=(Ao().s[9]++,Ao().b[2][0]++,n["paint_"+e]||(Ao().b[2][1]++,{}));return Ao().s[10]++,t in r?(Ao().b[3][0]++,Ao().s[11]++,"paint"):(Ao().b[3][1]++,Ao().s[12]++,"layout")}class Ple extends sr.Component{constructor(){super(...arguments);Pn(this,"onPropertyChange",(Ao().s[13]++,(t,r)=>{Ao().f[2]++;const i=(Ao().s[14]++,Ij(this.props.spec,this.props.layer.type,t));Ao().s[15]++,this.props.onChange(i,t,r)}))}render(){Ao().f[3]++;const{errors:t}=(Ao().s[16]++,this.props),r=(Ao().s[17]++,this.props.groupFields.map(i=>{Ao().f[4]++;const s=(Ao().s[18]++,Tle(this.props.spec,this.props.layer.type,i)),l=(Ao().s[19]++,Ao().b[4][0]++,this.props.layer.paint||(Ao().b[4][1]++,{})),o=(Ao().s[20]++,Ao().b[5][0]++,this.props.layer.layout||(Ao().b[5][1]++,{})),p=(Ao().s[21]++,i in l?(Ao().b[6][0]++,l[i]):(Ao().b[6][1]++,o[i])),v=(Ao().s[22]++,i in l?(Ao().b[7][0]++,"paint"):(Ao().b[7][1]++,"layout"));return Ao().s[23]++,le.jsx(Ile,{errors:t,onChange:this.onPropertyChange,fieldName:i,value:p,fieldType:v,fieldSpec:s},i)}));return Ao().s[24]++,le.jsx("div",{className:"maputnik-property-group",children:r})}}var kS,nR;function Kle(){return nR||(nR=1,kS=function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=n,t.c=e,t.d=function(r,i,s){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:s})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var l in r)t.d(s,l,(function(o){return r[o]}).bind(null,l));return s},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=2)}([function(n,e){n.exports=yp()},function(n,e){n.exports=Na()},function(n,e,t){t.r(e);var r=t(1),i=t(0),s=function(){return(s=Object.assign||function(U){for(var j,N=1,q=arguments.length;N<q;N++)for(var H in j=arguments[N])Object.prototype.hasOwnProperty.call(j,H)&&(U[H]=j[H]);return U}).apply(this,arguments)},l=function(U,j){var N={};for(var q in U)Object.prototype.hasOwnProperty.call(U,q)&&j.indexOf(q)<0&&(N[q]=U[q]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function"){var H=0;for(q=Object.getOwnPropertySymbols(U);H<q.length;H++)j.indexOf(q[H])<0&&Object.prototype.propertyIsEnumerable.call(U,q[H])&&(N[q[H]]=U[q[H]])}return N},o=0,p=r.forwardRef(function(U,j){var N=U.title,q=N===void 0?null:N,H=U.description,oe=H===void 0?null:H,te=U.size,V=te===void 0?null:te,ne=U.color,W=ne===void 0?"currentColor":ne,ie=U.horizontal,he=ie===void 0?null:ie,fe=U.vertical,Ee=fe===void 0?null:fe,me=U.rotate,Me=me===void 0?null:me,De=U.spin,xe=De===void 0?null:De,At=U.style,Ze=At===void 0?{}:At,Xe=U.children,Ne=l(U,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);o++;var Se,Re=xe!==null&&xe,He=r.Children.map(Xe,function(Ft){var Tt=Ft;Re!==!0&&(Re=(xe===null?Tt.props.spin:xe)===!0);var Le=Tt.props.size;typeof V=="number"&&typeof Tt.props.size=="number"&&(Le=Tt.props.size/V);var Pe={size:Le,color:W===null?Tt.props.color:W,horizontal:he===null?Tt.props.horizontal:he,vertical:Ee===null?Tt.props.vertical:Ee,rotate:Me===null?Tt.props.rotate:Me,spin:xe===null?Tt.props.spin:xe,inStack:!0};return r.cloneElement(Tt,Pe)});V!==null&&(Ze.width=typeof V=="string"?V:1.5*V+"rem");var _t,Gt="stack_labelledby_"+o,yt="stack_describedby_"+o;if(q)Se=oe?Gt+" "+yt:Gt;else if(_t="presentation",oe)throw new Error("title attribute required when description is set");return r.createElement("svg",s({ref:j,viewBox:"0 0 24 24",style:Ze,role:_t,"aria-labelledby":Se},Ne),q&&r.createElement("title",{id:Gt},q),oe&&r.createElement("desc",{id:yt},oe),Re&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),He)});p.displayName="Stack",p.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},p.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var v=p;t.d(e,"Icon",function(){return P}),t.d(e,"Stack",function(){return v});var x=function(){return(x=Object.assign||function(U){for(var j,N=1,q=arguments.length;N<q;N++)for(var H in j=arguments[N])Object.prototype.hasOwnProperty.call(j,H)&&(U[H]=j[H]);return U}).apply(this,arguments)},B=function(U,j){var N={};for(var q in U)Object.prototype.hasOwnProperty.call(U,q)&&j.indexOf(q)<0&&(N[q]=U[q]);if(U!=null&&typeof Object.getOwnPropertySymbols=="function"){var H=0;for(q=Object.getOwnPropertySymbols(U);H<q.length;H++)j.indexOf(q[H])<0&&Object.prototype.propertyIsEnumerable.call(U,q[H])&&(N[q[H]]=U[q[H]])}return N},T=0,P=r.forwardRef(function(U,j){var N=U.path,q=U.id,H=q===void 0?++T:q,oe=U.title,te=oe===void 0?null:oe,V=U.description,ne=V===void 0?null:V,W=U.size,ie=W===void 0?null:W,he=U.color,fe=he===void 0?"currentColor":he,Ee=U.horizontal,me=Ee!==void 0&&Ee,Me=U.vertical,De=Me!==void 0&&Me,xe=U.rotate,At=xe===void 0?0:xe,Ze=U.spin,Xe=Ze!==void 0&&Ze,Ne=U.style,Se=Ne===void 0?{}:Ne,Re=U.inStack,He=Re!==void 0&&Re,_t=B(U,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),Gt={},yt=[];ie!==null&&(He?yt.push("scale("+ie+")"):(Se.width=typeof ie=="string"?ie:1.5*ie+"rem",Se.height=Se.width)),me&&yt.push("scaleX(-1)"),De&&yt.push("scaleY(-1)"),At!==0&&yt.push("rotate("+At+"deg)"),fe!==null&&(Gt.fill=fe);var Ft=r.createElement("path",x({d:N,style:Gt},He?_t:{})),Tt=Ft;yt.length>0&&(Se.transform=yt.join(" "),Se.transformOrigin="center",He&&(Tt=r.createElement("g",{style:Se},Ft,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var Le,Pe=Tt,Be=Xe===!0||typeof Xe!="number"?2:Xe,it=!He&&(me||De);if(Be<0&&(it=!it),Xe&&(Pe=r.createElement("g",{style:{animation:"spin"+(it?"-inverse":"")+" linear "+Math.abs(Be)+"s infinite",transformOrigin:"center"}},Tt,!(me||De||At!==0)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),He)return Pe;var Ct,ft="icon_labelledby_"+H,Lt="icon_describedby_"+H;if(te)Le=ne?ft+" "+Lt:ft;else if(Ct="presentation",ne)throw new Error("title attribute required when description is set");return r.createElement("svg",x({ref:j,viewBox:"0 0 24 24",style:Se,role:Ct,"aria-labelledby":Le},_t),te&&r.createElement("title",{id:ft},te),ne&&r.createElement("desc",{id:Lt},ne),!He&&Xe&&(it?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),Pe)});P.displayName="Icon",P.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},P.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},e.default=P}])),kS}var Rle=Kle();const rR=yl(Rle);function ty(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",e="2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:45,column:9}},1:{start:{line:22,column:27},end:{line:22,column:74}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:46,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:22,column:19},end:{line:22,column:20}},loc:{start:{line:22,column:27},end:{line:22,column:74}},line:22}},branchMap:{},s:{0:0,1:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditorGroup.tsx"],names:[],mappings:"AA+BQ,SACE,KADF;AA/BR,OAAO,WAAW;AAClB,OAAO,UAAU;AACjB;AAAA,EACE;AAAA,EACA;AAAA,OACK;AACP;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAaP,qBAAqB,yBAAyB,MAAM,UAAiC;AAAA,EACnF,SAAS;AACP,WAAO,qBAAC,iBAAc,MAAM,KAAK,MAAM,IACrC;AAAA;AAAA,QAAC;AAAA;AAAA,UAAqB,WAAU;AAAA,UAC9B,eAAa,wBAAsB,KAAK,MAAM,aAAa;AAAA,UAC3D,SAAS,QAAM,KAAK,MAAM,eAAe,CAAC,KAAK,MAAM,QAAQ;AAAA,UAE7D,+BAAC,uBAAoB,WAAU,uCAC7B;AAAA,gCAAC,UAAK,OAAO,EAAC,UAAU,EAAC,GAAI,eAAK,MAAM,OAAM;AAAA,YAC9C;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,MAAM;AAAA,gBACN,MAAM;AAAA,gBACN,WAAU;AAAA;AAAA,YACZ;AAAA,aACF;AAAA;AAAA,MACF;AAAA,MACA,oBAAC,sBACE,eAAK,MAAM,UACd;AAAA,OACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2f1dde9b3c8e927b8e8868bcb310eb3d6a65eb08"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ty=function(){return l},l}ty();class Dle extends sr.Component{render(){return ty().f[0]++,ty().s[0]++,le.jsxs(Bz,{uuid:this.props.id,children:[le.jsx(kz,{className:"maputnik-layer-editor-group","data-wd-key":"layer-editor-group:"+this.props["data-wd-key"],onClick:e=>(ty().f[1]++,ty().s[1]++,this.props.onActiveToggle(!this.props.isActive)),children:le.jsxs(toe,{className:"maputnik-layer-editor-group__button",children:[le.jsx("span",{style:{flexGrow:1},children:this.props.title}),le.jsx(rR,{path:_oe,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--up"}),le.jsx(rR,{path:Coe,size:1,className:"maputnik-layer-editor-group__button__icon maputnik-layer-editor-group__button__icon--down"})]})}),le.jsx(ooe,{children:this.props.children})]})}}function hy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",e="32f7af2e1a9dc4f673c1fba818006229f9fd6490",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMinZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"32f7af2e1a9dc4f673c1fba818006229f9fd6490"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return hy=function(){return l},l}hy();class Fle extends sr.Component{render(){hy().f[0]++;const e=(hy().s[0]++,this.props.t);return hy().s[1]++,le.jsx(pa,{label:e("Min Zoom"),fieldSpec:qo.layer.minzoom,error:this.props.error,"data-wd-key":"min-zoom",children:le.jsx(nm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:qo.layer.minzoom.minimum,max:qo.layer.minzoom.maximum,default:qo.layer.minzoom.minimum,"data-wd-key":"min-zoom.input"})})}}const Lle=(hy().s[2]++,Ws()(Fle));function fy(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",e="f706dc673f9397f2919007f4b702470461bf0f7c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx",statementMap:{0:{start:{line:9,column:14},end:{line:9,column:26}},1:{start:{line:10,column:4},end:{line:30,column:6}},2:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:11},end:{line:31,column:3}},line:8}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldMaxZoom.tsx"],names:[],mappings:"AAoBM;AApBN,OAAO,WAAW;AAElB,OAAO,YAAY;AACnB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QAAM,OAAO,EAAE,UAAU;AAAA,QAAG,WAAW,OAAO,MAAM;AAAA,QAC1D,OAAO,KAAK,MAAM;AAAA,QAClB,eAAY;AAAA,QAEZ;AAAA,UAAC;AAAA;AAAA,YACC,YAAY;AAAA,YACZ,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,KAAK,OAAO,MAAM,QAAQ;AAAA,YAC1B,SAAS,OAAO,MAAM,QAAQ;AAAA,YAC9B,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f706dc673f9397f2919007f4b702470461bf0f7c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return fy=function(){return l},l}fy();class Ule extends sr.Component{render(){fy().f[0]++;const e=(fy().s[0]++,this.props.t);return fy().s[1]++,le.jsx(pa,{label:e("Max Zoom"),fieldSpec:qo.layer.maxzoom,error:this.props.error,"data-wd-key":"max-zoom",children:le.jsx(nm,{allowRange:!0,value:this.props.value,onChange:this.props.onChange,min:qo.layer.maxzoom.minimum,max:qo.layer.maxzoom.maximum,default:qo.layer.maxzoom.maximum,"data-wd-key":"max-zoom.input"})})}}const zle=(fy().s[2]++,Ws()(Ule));function Mg(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",e="875d9bef6002e38aa0b5bf03af99ab4fc2308047",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx",statementMap:{0:{start:{line:8,column:14},end:{line:8,column:26}},1:{start:{line:9,column:22},end:{line:11,column:5}},2:{start:{line:12,column:4},end:{line:30,column:6}},3:{start:{line:33,column:21},end:{line:33,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:11},end:{line:31,column:3}},line:7}},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldComment.tsx"],names:[],mappings:"AAyBM;AAzBN,OAAO,WAAW;AAElB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,SAA0B,uBAAuB;AAQjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,YAAY;AAAA,MAChB,KAAK,EAAE,2EAA2E;AAAA,IACpF;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,UAAU;AAAA,QACnB;AAAA,QACA,eAAY;AAAA,QACZ,OAAO,KAAK,MAAM;AAAA,QAElB;AAAA,UAAC;AAAA;AAAA,YACC,OAAO;AAAA,YACP,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,KAAK,MAAM;AAAA,YACrB,SAAS,EAAE,YAAY;AAAA,YACvB,eAAY;AAAA;AAAA,QACd;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"875d9bef6002e38aa0b5bf03af99ab4fc2308047"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Mg=function(){return l},l}Mg();class jle extends sr.Component{render(){Mg().f[0]++;const e=(Mg().s[0]++,this.props.t),t=(Mg().s[1]++,{doc:e("Comments for the current layer. This is non-standard and not in the spec.")});return Mg().s[2]++,le.jsx(pa,{label:e("Comments"),fieldSpec:t,"data-wd-key":"layer-comment",error:this.props.error,children:le.jsx(Pf,{multi:!0,value:this.props.value,onChange:this.props.onChange,default:e("Comment..."),"data-wd-key":"layer-comment.input"})})}}const Nle=(Mg().s[3]++,Ws()(jle)),Wle={groups:[{title:"Paint properties",type:"properties",fields:["line-opacity","line-color","line-width","line-offset","line-blur","line-dasharray","line-pattern","line-translate","line-translate-anchor","line-gap-width"]},{title:"Layout properties",type:"properties",fields:["line-cap","line-join","line-miter-limit","line-round-limit"]}]},Gle={groups:[{title:"Paint properties",type:"properties",fields:["background-color","background-pattern","background-opacity"]}]},Qle={groups:[{title:"Paint properties",type:"properties",fields:["fill-opacity","fill-color","fill-antialias","fill-outline-color","fill-pattern","fill-translate","fill-translate-anchor"]}]},Yle={groups:[{title:"Paint properties",type:"properties",fields:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-blur","circle-radius","circle-stroke-width","circle-pitch-scale","circle-translate","circle-translate-anchor","circle-pitch-alignment"]}]},qle={groups:[{title:"General layout properties",type:"properties",fields:["symbol-placement","symbol-spacing","symbol-avoid-edges","symbol-z-order"]},{title:"Text layout properties",type:"properties",fields:["text-field","text-font","text-size","text-line-height","text-padding","text-allow-overlap","text-ignore-placement","text-pitch-alignment","text-rotation-alignment","text-max-width","text-letter-spacing","text-justify","text-anchor","text-max-angle","text-writing-mode","text-rotate","text-keep-upright","text-transform","text-offset","text-optional","text-variable-anchor","text-radial-offset"]},{title:"Icon layout properties",type:"properties",fields:["icon-image","icon-allow-overlap","icon-ignore-placement","icon-optional","icon-rotation-alignment","icon-size","icon-text-fit","icon-text-fit-padding","icon-rotate","icon-padding","icon-keep-upright","icon-offset","icon-anchor","icon-pitch-alignment"]},{title:"Text paint properties",type:"properties",fields:["text-color","text-opacity","text-halo-color","text-halo-width","text-halo-blur","text-translate","text-translate-anchor"]},{title:"Icon paint properties",type:"properties",fields:["icon-color","icon-opacity","icon-halo-color","icon-halo-width","icon-halo-blur","icon-translate","icon-translate-anchor"]}]},Vle={groups:[{title:"Paint properties",type:"properties",fields:["raster-opacity","raster-hue-rotate","raster-brightness-min","raster-brightness-max","raster-saturation","raster-contrast","raster-fade-duration","raster-resampling"]}]},$le={groups:[{title:"Paint properties",type:"properties",fields:["hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-shadow-color","hillshade-highlight-color","hillshade-accent-color"]}]},Hle={groups:[{title:"Paint properties",type:"properties",fields:["heatmap-radius","heatmap-weight","heatmap-intensity","heatmap-opacity"]}]},Zle={groups:[]},mb={line:Wle,background:Gle,fill:Qle,"fill-extrusion":{groups:[{title:"Paint properties",type:"properties",fields:["fill-extrusion-opacity","fill-extrusion-color","fill-extrusion-translate","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-height","fill-extrusion-base","fill-extrusion-vertical-gradient"]}]},circle:Yle,symbol:qle,raster:Vle,hillshade:$le,heatmap:Hle,invalid:Zle};function ny(){var n="/home/runner/work/maputnik/maputnik/src/libs/format.ts",e="c45fbfac66e994b59070a295e5a7f219cd5d66ac",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/format.ts",statementMap:{0:{start:{line:2,column:2},end:{line:2,column:50}}},fnMap:{0:{name:"formatLayerId",decl:{start:{line:1,column:16},end:{line:1,column:29}},loc:{start:{line:1,column:34},end:{line:3,column:1}},line:1}},branchMap:{0:{loc:{start:{line:2,column:9},end:{line:2,column:49}},type:"cond-expr",locations:[{start:{line:2,column:21},end:{line:2,column:37}},{start:{line:2,column:40},end:{line:2,column:49}}],line:2}},s:{0:0},f:{0:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/format.ts"],names:[],mappings:"AAAO,gBAAS,cAAe,IAAwB;AACrD,SAAO,OAAO,KAAK,mBAAmB,IAAI,EAAE;AAC9C;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c45fbfac66e994b59070a295e5a7f219cd5d66ac"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ny=function(){return l},l}ny();function kj(n){return ny().f[0]++,ny().s[0]++,n===""?(ny().b[0][0]++,"[empty_string]"):(ny().b[0][1]++,`'${n}'`)}function Kn(){var n="/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",e="555ef41c8141fe537bdb43523a4ef7ec4c287394",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx",statementMap:{0:{start:{line:23,column:2},end:{line:32,column:21}},1:{start:{line:26,column:6},end:{line:30,column:8}},2:{start:{line:35,column:21},end:{line:39,column:3}},3:{start:{line:40,column:22},end:{line:44,column:3}},4:{start:{line:45,column:22},end:{line:49,column:3}},5:{start:{line:50,column:2},end:{line:50,column:103}},6:{start:{line:53,column:24},end:{line:60,column:3}},7:{start:{line:61,column:29},end:{line:63,column:3}},8:{start:{line:65,column:4},end:{line:65,column:17}},9:{start:{line:66,column:25},end:{line:66,column:27}},10:{start:{line:67,column:4},end:{line:69,column:7}},11:{start:{line:68,column:6},end:{line:68,column:39}},12:{start:{line:70,column:4},end:{line:70,column:34}},13:{start:{line:73,column:29},end:{line:73,column:54}},14:{start:{line:74,column:4},end:{line:78,column:7}},15:{start:{line:75,column:6},end:{line:77,column:7}},16:{start:{line:76,column:8},end:{line:76,column:45}},17:{start:{line:79,column:4},end:{line:81,column:6}},18:{start:{line:84,column:4},end:{line:89,column:6}},19:{start:{line:92,column:4},end:{line:95,column:6}},20:{start:{line:98,column:32},end:{line:101,column:5}},21:{start:{line:102,column:4},end:{line:104,column:7}},22:{start:{line:107,column:18},end:{line:107,column:20}},23:{start:{line:108,column:4},end:{line:110,column:5}},24:{start:{line:109,column:6},end:{line:109,column:62}},25:{start:{line:111,column:35},end:{line:111,column:45}},26:{start:{line:112,column:22},end:{line:112,column:24}},27:{start:{line:113,column:4},end:{line:119,column:7}},28:{start:{line:114,column:6},end:{line:118,column:7}},29:{start:{line:115,column:8},end:{line:117,column:10}},30:{start:{line:121,column:18},end:{line:121,column:34}},31:{start:{line:122,column:4},end:{line:124,column:5}},32:{start:{line:123,column:6},end:{line:123,column:63}},33:{start:{line:125,column:4},end:{line:228,column:5}},34:{start:{line:127,column:8},end:{line:191,column:13}},35:{start:{line:134,column:35},end:{line:134,column:112}},36:{start:{line:143,column:37},end:{line:146,column:15}},37:{start:{line:155,column:31},end:{line:155,column:69}},38:{start:{line:164,column:31},end:{line:164,column:75}},39:{start:{line:172,column:31},end:{line:172,column:70}},40:{start:{line:180,column:31},end:{line:180,column:70}},41:{start:{line:188,column:31},end:{line:188,column:104}},42:{start:{line:193,column:8},end:{line:201,column:16}},43:{start:{line:199,column:29},end:{line:199,column:67}},44:{start:{line:203,column:8},end:{line:212,column:10}},45:{start:{line:214,column:8},end:{line:225,column:10}},46:{start:{line:219,column:14},end:{line:222,column:16}},47:{start:{line:227,column:8},end:{line:227,column:49}},48:{start:{line:231,column:4},end:{line:234,column:7}},49:{start:{line:237,column:14},end:{line:237,column:26}},50:{start:{line:238,column:21},end:{line:238,column:23}},51:{start:{line:239,column:22},end:{line:239,column:43}},52:{start:{line:240,column:19},end:{line:257,column:6}},53:{start:{line:241,column:6},end:{line:241,column:70}},54:{start:{line:243,column:22},end:{line:243,column:30}},55:{start:{line:244,column:6},end:{line:244,column:29}},56:{start:{line:245,column:6},end:{line:256,column:8}},57:{start:{line:258,column:20},end:{line:258,column:49}},58:{start:{line:259,column:18},end:{line:284,column:5}},59:{start:{line:262,column:23},end:{line:262,column:71}},60:{start:{line:266,column:23},end:{line:266,column:68}},61:{start:{line:270,column:23},end:{line:270,column:80}},62:{start:{line:276,column:23},end:{line:276,column:41}},63:{start:{line:282,column:23},end:{line:282,column:40}},64:{start:{line:286,column:6},end:{line:286,column:30}},65:{start:{line:287,column:6},end:{line:287,column:26}},66:{start:{line:289,column:4},end:{line:334,column:6}},67:{start:{line:316,column:33},end:{line:316,column:42}},68:{start:{line:317,column:20},end:{line:317,column:174}},69:{start:{line:337,column:20},end:{line:337,column:58}}},fnMap:{0:{name:"getLayoutForType",decl:{start:{line:22,column:9},end:{line:22,column:25}},loc:{start:{line:22,column:35},end:{line:33,column:1}},line:22},1:{name:"(anonymous_1)",decl:{start:{line:25,column:36},end:{line:25,column:37}},loc:{start:{line:25,column:47},end:{line:31,column:5}},line:25},2:{name:"layoutGroups",decl:{start:{line:34,column:9},end:{line:34,column:21}},loc:{start:{line:34,column:36},end:{line:51,column:1}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:54,column:20},end:{line:54,column:21}},loc:{start:{line:54,column:26},end:{line:55,column:5}},line:54},4:{name:"(anonymous_4)",decl:{start:{line:56,column:21},end:{line:56,column:22}},loc:{start:{line:56,column:27},end:{line:57,column:5}},line:56},5:{name:"(anonymous_5)",decl:{start:{line:58,column:22},end:{line:58,column:23}},loc:{start:{line:58,column:28},end:{line:59,column:5}},line:58},6:{name:"(anonymous_6)",decl:{start:{line:64,column:2},end:{line:64,column:3}},loc:{start:{line:64,column:21},end:{line:71,column:3}},line:64},7:{name:"(anonymous_7)",decl:{start:{line:67,column:57},end:{line:67,column:58}},loc:{start:{line:67,column:68},end:{line:69,column:5}},line:67},8:{name:"(anonymous_8)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:48},end:{line:82,column:3}},line:72},9:{name:"(anonymous_9)",decl:{start:{line:74,column:63},end:{line:74,column:64}},loc:{start:{line:74,column:74},end:{line:78,column:5}},line:74},10:{name:"(anonymous_10)",decl:{start:{line:83,column:2},end:{line:83,column:3}},loc:{start:{line:83,column:20},end:{line:90,column:3}},line:83},11:{name:"(anonymous_11)",decl:{start:{line:91,column:2},end:{line:91,column:3}},loc:{start:{line:91,column:44},end:{line:96,column:3}},line:91},12:{name:"(anonymous_12)",decl:{start:{line:97,column:2},end:{line:97,column:3}},loc:{start:{line:97,column:36},end:{line:105,column:3}},line:97},13:{name:"(anonymous_13)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:32},end:{line:229,column:3}},line:106},14:{name:"(anonymous_14)",decl:{start:{line:113,column:19},end:{line:113,column:20}},loc:{start:{line:113,column:30},end:{line:119,column:5}},line:113},15:{name:"(anonymous_15)",decl:{start:{line:134,column:24},end:{line:134,column:25}},loc:{start:{line:134,column:35},end:{line:134,column:112}},line:134},16:{name:"(anonymous_16)",decl:{start:{line:143,column:24},end:{line:143,column:25}},loc:{start:{line:143,column:37},end:{line:146,column:15}},line:143},17:{name:"(anonymous_17)",decl:{start:{line:155,column:24},end:{line:155,column:25}},loc:{start:{line:155,column:31},end:{line:155,column:69}},line:155},18:{name:"(anonymous_18)",decl:{start:{line:164,column:24},end:{line:164,column:25}},loc:{start:{line:164,column:31},end:{line:164,column:75}},line:164},19:{name:"(anonymous_19)",decl:{start:{line:172,column:24},end:{line:172,column:25}},loc:{start:{line:172,column:31},end:{line:172,column:70}},line:172},20:{name:"(anonymous_20)",decl:{start:{line:180,column:24},end:{line:180,column:25}},loc:{start:{line:180,column:31},end:{line:180,column:70}},line:180},21:{name:"(anonymous_21)",decl:{start:{line:188,column:24},end:{line:188,column:25}},loc:{start:{line:188,column:31},end:{line:188,column:104}},line:188},22:{name:"(anonymous_22)",decl:{start:{line:199,column:22},end:{line:199,column:23}},loc:{start:{line:199,column:29},end:{line:199,column:67}},line:199},23:{name:"(anonymous_23)",decl:{start:{line:218,column:22},end:{line:218,column:23}},loc:{start:{line:218,column:34},end:{line:223,column:13}},line:218},24:{name:"(anonymous_24)",decl:{start:{line:230,column:2},end:{line:230,column:3}},loc:{start:{line:230,column:20},end:{line:235,column:3}},line:230},25:{name:"(anonymous_25)",decl:{start:{line:236,column:2},end:{line:236,column:3}},loc:{start:{line:236,column:11},end:{line:335,column:3}},line:236},26:{name:"(anonymous_26)",decl:{start:{line:240,column:53},end:{line:240,column:54}},loc:{start:{line:240,column:64},end:{line:242,column:5}},line:240},27:{name:"(anonymous_27)",decl:{start:{line:242,column:11},end:{line:242,column:12}},loc:{start:{line:242,column:22},end:{line:257,column:5}},line:242},28:{name:"(anonymous_28)",decl:{start:{line:262,column:17},end:{line:262,column:18}},loc:{start:{line:262,column:23},end:{line:262,column:71}},line:262},29:{name:"(anonymous_29)",decl:{start:{line:266,column:17},end:{line:266,column:18}},loc:{start:{line:266,column:23},end:{line:266,column:68}},line:266},30:{name:"(anonymous_30)",decl:{start:{line:270,column:17},end:{line:270,column:18}},loc:{start:{line:270,column:23},end:{line:270,column:80}},line:270},31:{name:"(anonymous_31)",decl:{start:{line:276,column:17},end:{line:276,column:18}},loc:{start:{line:276,column:23},end:{line:276,column:41}},line:276},32:{name:"(anonymous_32)",decl:{start:{line:282,column:17},end:{line:282,column:18}},loc:{start:{line:282,column:23},end:{line:282,column:40}},line:282},33:{name:"handleSelection",decl:{start:{line:285,column:13},end:{line:285,column:28}},loc:{start:{line:285,column:40},end:{line:288,column:5}},line:285},34:{name:"(anonymous_34)",decl:{start:{line:315,column:147},end:{line:315,column:148}},loc:{start:{line:315,column:155},end:{line:318,column:19}},line:315}},branchMap:{0:{loc:{start:{line:23,column:9},end:{line:32,column:20}},type:"cond-expr",locations:[{start:{line:23,column:24},end:{line:32,column:3}},{start:{line:32,column:6},end:{line:32,column:20}}],line:23},1:{loc:{start:{line:75,column:6},end:{line:77,column:7}},type:"if",locations:[{start:{line:75,column:6},end:{line:77,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:75},2:{loc:{start:{line:108,column:4},end:{line:110,column:5}},type:"if",locations:[{start:{line:108,column:4},end:{line:110,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:108},3:{loc:{start:{line:114,column:6},end:{line:118,column:7}},type:"if",locations:[{start:{line:114,column:6},end:{line:118,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:114},4:{loc:{start:{line:114,column:10},end:{line:114,column:96}},type:"binary-expr",locations:[{start:{line:114,column:10},end:{line:114,column:22}},{start:{line:114,column:26},end:{line:114,column:55}},{start:{line:114,column:59},end:{line:114,column:96}}],line:114},5:{loc:{start:{line:122,column:4},end:{line:124,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:124,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:122},6:{loc:{start:{line:125,column:4},end:{line:228,column:5}},type:"switch",locations:[{start:{line:126,column:6},end:{line:191,column:13}},{start:{line:192,column:6},end:{line:201,column:16}},{start:{line:202,column:6},end:{line:212,column:10}},{start:{line:213,column:6},end:{line:225,column:10}},{start:{line:226,column:6},end:{line:227,column:49}}],line:125},7:{loc:{start:{line:149,column:10},end:{line:157,column:11}},type:"binary-expr",locations:[{start:{line:149,column:10},end:{line:149,column:48}},{start:{line:149,column:68},end:{line:157,column:11}}],line:149},8:{loc:{start:{line:158,column:10},end:{line:166,column:11}},type:"binary-expr",locations:[{start:{line:158,column:10},end:{line:158,column:93}},{start:{line:158,column:113},end:{line:166,column:11}}],line:158},9:{loc:{start:{line:188,column:83},end:{line:188,column:103}},type:"cond-expr",locations:[{start:{line:188,column:93},end:{line:188,column:99}},{start:{line:188,column:102},end:{line:188,column:103}}],line:188},10:{loc:{start:{line:241,column:15},end:{line:241,column:68}},type:"binary-expr",locations:[{start:{line:241,column:15},end:{line:241,column:41}},{start:{line:241,column:45},end:{line:241,column:68}}],line:241},11:{loc:{start:{line:258,column:20},end:{line:258,column:49}},type:"binary-expr",locations:[{start:{line:258,column:20},end:{line:258,column:43}},{start:{line:258,column:47},end:{line:258,column:49}}],line:258},12:{loc:{start:{line:269,column:14},end:{line:269,column:67}},type:"cond-expr",locations:[{start:{line:269,column:46},end:{line:269,column:55}},{start:{line:269,column:58},end:{line:269,column:67}}],line:269}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0],5:[0,0],6:[0,0,0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/LayerEditor.tsx"],names:["layer","layout"],mappings:"AA2KyB,SA2EL,UA1Ed,KADmB;AA3KzB,OAAO,WAAuB;AAC9B,OAAO,eAAe;AACtB,SAAS,SAAS,QAAQ,MAAM,gBAAgB;AAChD,SAAQ,iBAAgB;AACxB,SAAQ,kBAAiB;AAGzB,OAAO,eAAe;AACtB,OAAO,kBAAkB;AACzB,OAAO,mBAAmB;AAC1B,OAAO,sBAAsB;AAC7B,OAAO,eAAe;AACtB,OAAO,aAAa;AACpB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,kBAAkB;AACzB,OAAO,iBAAiB;AACxB,OAAO,sBAAsB;AAC7B,SAAS,YAAY,sBAAsB;AAC3C,OAAO,YAAY;AACnB,SAAQ,qBAAoB;AAC5B,SAA0B,uBAAuB;AAIjD,SAAS,iBAAiB,MAAkC,GAAc;AACxE,SAAO,OAAO,IAAI,IAAI;AAAA,IACpB,GAAG,OAAO,IAAI;AAAA,IACd,QAAQ,OAAO,IAAI,EAAE,OAAO,IAAI,WAAS;AACvC,aAAO;AAAA,QACL,GAAG;AAAA,QACH,IAAI,MAAM,MAAM,QAAQ,MAAM,GAAG;AAAA,QACjC,OAAO,EAAE,MAAM,KAAK;AAAA,MACtB;AAAA,IACF,CAAC;AAAA,EACH,IAAI,OAAO;AACb;AAEA,SAAS,aAAa,WAAuC,GAA8E;AACzI,QAAM,aAAa;AAAA,IACjB,IAAI;AAAA,IACJ,OAAO,EAAE,OAAO;AAAA,IAChB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,QAAQ;AAAA,IACjB,MAAM;AAAA,EACR;AACA,QAAM,cAAc;AAAA,IAClB,IAAI;AAAA,IACJ,OAAO,EAAE,aAAa;AAAA,IACtB,MAAM;AAAA,EACR;AACA,SAAO,CAAC,YAAY,WAAW,EAC5B,OAAO,iBAAiB,WAAW,CAAC,EAAE,MAAM,EAC5C,OAAO,CAAC,WAAW,CAAC;AACzB;AAwBA,MAAM,4BAA4B,MAAM,UAAsD;AAAA,EAC5F,OAAO,eAAe;AAAA,IACpB,gBAAgB,MAAM;AAAA,IAAC;AAAA,IACvB,iBAAiB,MAAM;AAAA,IAAC;AAAA,IACxB,kBAAkB,MAAM;AAAA,IAAC;AAAA,EAC3B;AAAA,EAEA,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,YAAY,OAAiC;AAC3C,UAAM,KAAK;AAGX,UAAM,eAAyC,CAAC;AAChD,iBAAa,KAAK,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,QAAQ,WAAS;AAC5D,mBAAa,MAAM,KAAK,IAAI;AAAA,IAC9B,CAAC;AAED,SAAK,QAAQ,EAAE,aAAa;AAAA,EAC9B;AAAA,EAEA,OAAO,yBAAyB,OAA2C,OAAyB;AAClG,UAAM,mBAAmB,EAAE,GAAG,MAAM,aAAa;AAEjD,qBAAiB,MAAM,MAAM,MAAM,MAAM,CAAC,EAAE,OAAO,QAAQ,WAAS;AAClE,UAAG,EAAE,MAAM,SAAS,mBAAmB;AACrC,yBAAiB,MAAM,KAAK,IAAI;AAAA,MAClC;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF;AAAA,EAEA,kBAAmB;AACjB,WAAO;AAAA,MACL,eAAe;AAAA,QACb,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,eAAe,OAAwC,UAAkB,UAAe;AACtF,SAAK,MAAM;AAAA,MACT,KAAK,MAAM;AAAA,MACX,eAAe,KAAK,MAAM,OAAO,OAAO,UAAU,QAAQ;AAAA,IAC5D;AAAA,EACF;AAAA,EAEA,cAAc,YAAoB,QAAiB;AACjD,UAAM,sBAAsB;AAAA,MAC1B,GAAG,KAAK,MAAM;AAAA,MACd,CAAC,UAAU,GAAG;AAAA,IAChB;AACA,SAAK,SAAS;AAAA,MACZ,cAAc;AAAA,IAChB,CAAC;AAAA,EACH;AAAA,EAEA,gBAAgB,MAAc,QAAgC;AAC5D,QAAI,UAAU;AACd,QAAG,KAAK,MAAM,MAAM,UAAU;AAC5B,gBAAW,KAAK,MAAM,MAAM,SAAiB,kBAAkB;AAAA,IACjE;AACA,UAAM,EAAC,QAAQ,WAAU,IAAI,KAAK;AAElC,UAAM,YAAwE,CAAC;AAC/E,WAAQ,QAAQ,WAAS;AACvB,UACE,MAAM,UACN,MAAM,OAAO,SAAS,WACtB,MAAM,OAAO,KAAK,SAAS,YAC3B;AACA,kBAAU,MAAM,OAAO,KAAK,GAAG,IAAI;AAAA,UACjC,SAAS,MAAM,OAAO,KAAK;AAAA,QAC7B;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AACJ,UAAM,QAAQ,KAAK,MAAM;AACzB,QAAG,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,MAAM,MAAM,GAAG;AACzE,uBAAkB,KAAK,MAAM,QAAQ,MAAM,MAAM,EAAU;AAAA,IAC7D;AAEA,YAAO,MAAM;AAAA,MACb,KAAK;AAAS,eAAO,qBAAC,SACpB;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,OAAM;AAAA,cACN,OAAO,UAAU;AAAA,cACjB,UAAU,WAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK,MAAM,MAAM,IAAI,KAAK;AAAA;AAAA,UACjG;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,aAAW,KAAK,MAAM;AAAA,gBAC9B,KAAK,MAAM;AAAA,gBACX,WAAW,KAAK,MAAM,OAAO,OAAO;AAAA,cACtC;AAAA;AAAA,UACF;AAAA,UACC,KAAK,MAAM,MAAM,SAAS,gBAAgB;AAAA,YAAC;AAAA;AAAA,cAC1C,OAAO,UAAU;AAAA,cACjB,WAAW,OAAO,KAAK,KAAK,MAAM,OAAQ;AAAA,cAC1C,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,UACtD;AAAA,UAEC,CAAC,cAAc,UAAU,aAAa,SAAS,EAAE,QAAQ,KAAK,MAAM,MAAM,IAAI,IAAI,KACjF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU,cAAc;AAAA,cAC/B;AAAA,cACA,OAAQ,KAAK,MAAM,MAAc,cAAc;AAAA,cAC/C,UAAU,OAAK,KAAK,eAAe,MAAM,gBAAgB,CAAC;AAAA;AAAA,UAC5D;AAAA,UAEF;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO,KAAK,MAAM,MAAM;AAAA,cACxB,UAAU,OAAK,KAAK,eAAe,MAAM,WAAW,CAAC;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,UAAU;AAAA,cACjB,OAAO;AAAA,cACP,UAAU,OAAK,KAAK,eAAe,YAAY,oBAAoB,KAAK,KAAM,SAAY,CAAC;AAAA;AAAA,UAC7F;AAAA,WACF;AAAA,MACA,KAAK;AAAU,eAAO,oBAAC,SACrB,8BAAC,SAAI,WAAU,kCACb;AAAA,UAAC;AAAA;AAAA,YACC,QAAQ;AAAA,YACR,QAAS,KAAK,MAAM,MAAc;AAAA,YAClC,YAAY,KAAK,MAAM,aAAc,KAAK,MAAM,MAAc,cAAc,CAAC;AAAA,YAC7E,UAAU,OAAK,KAAK,eAAe,MAAM,UAAU,CAAC;AAAA;AAAA,QACtD,GACF,GACF;AAAA,MACA,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,QAAQ;AAAA,YACR,OAAO,KAAK,MAAM;AAAA,YAClB,aAAa;AAAA,YACb,MAAM,KAAK,MAAM;AAAA,YACjB,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,QACzC;AAAA,MACF,KAAK;AACH,eAAO;AAAA,UAAC;AAAA;AAAA,YACN,OAAO,KAAK,MAAM;AAAA,YAClB,UAAU,CAACA,WAAU;AACnB,mBAAK,MAAM;AAAA,gBACT,KAAK,MAAM;AAAA,gBACXA;AAAA,cACF;AAAA,YACF;AAAA;AAAA,QACF;AAAA,MACF;AAAS,eAAO,gCAAE;AAAA,IAClB;AAAA,EACF;AAAA,EAEA,UAAU,QAAgB;AACxB,SAAK,MAAM,YAAY;AAAA,MACrB,UAAU,KAAK,MAAM;AAAA,MACrB,UAAU,KAAK,MAAM,aAAW;AAAA,IAClC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAErB,UAAM,WAAqB,CAAC;AAC5B,UAAM,YAAY,KAAK,MAAM,MAAM;AACnC,UAAM,SAAS,aAAa,WAAW,CAAC,EAAE,OAAO,WAAS;AACxD,aAAO,EAAE,cAAc,gBAAgB,MAAM,SAAS;AAAA,IACxD,CAAC,EAAE,IAAI,WAAS;AACd,YAAM,UAAU,MAAM;AACtB,eAAS,KAAK,OAAO;AACrB,aAAO;AAAA,QAAC;AAAA;AAAA,UACN,eAAa,MAAM;AAAA,UACnB,IAAI;AAAA,UAEJ,OAAO,MAAM;AAAA,UACb,UAAU,KAAK,MAAM,aAAa,MAAM,KAAK;AAAA,UAC7C,gBAAgB,KAAK,cAAc,KAAK,MAAM,MAAM,KAAK;AAAA,UAExD,eAAK,gBAAgB,MAAM,MAAM,MAAM,MAAM;AAAA;AAAA,QALzC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAMC,UAAS,KAAK,MAAM,MAAM,UAAU,CAAC;AAE3C,UAAM,QAAkF;AAAA,MACtF,QAAQ;AAAA,QACN,MAAM,EAAE,QAAQ;AAAA,QAChB,SAAS,MAAM,KAAK,MAAM,eAAe,KAAK,MAAM,UAAU;AAAA,MAChE;AAAA,MACA,WAAW;AAAA,QACT,MAAM,EAAE,WAAW;AAAA,QACnB,SAAS,MAAM,KAAK,MAAM,YAAY,KAAK,MAAM,UAAU;AAAA,MAC7D;AAAA,MACA,MAAM;AAAA,QACJ,MAAOA,QAAO,eAAe,SAAU,EAAE,MAAM,IAAI,EAAE,MAAM;AAAA,QAC3D,SAAS,MAAM,KAAK,MAAM,wBAAwB,KAAK,MAAM,UAAU;AAAA,MACzE;AAAA,MACA,aAAa;AAAA,QACX,MAAM,EAAE,eAAe;AAAA;AAAA,QAEvB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,EAAE;AAAA,MAClC;AAAA,MACA,eAAe;AAAA,QACb,MAAM,EAAE,iBAAiB;AAAA;AAAA,QAEzB,UAAU,KAAK,MAAM;AAAA,QACrB,SAAS,MAAM,KAAK,UAAU,CAAE;AAAA,MAClC;AAAA,IACF;AAEA,aAAS,gBAAgB,IAAY,OAA6B;AAChE,YAAM,gBAAgB;AACtB,YAAM,EAAE,EAAE,QAAQ;AAAA,IACpB;AAEA,WAAO;AAAA,MAAC;AAAA;AAAA,QAAQ,WAAU;AAAA,QACxB,MAAK;AAAA,QACL,cAAY,EAAE,cAAc;AAAA,QAE5B;AAAA,8BAAC,YACC,+BAAC,SAAI,WAAU,gBACb;AAAA,gCAAC,QAAG,WAAU,uBACX,YAAE,sBAAsB,EAAE,SAAS,cAAc,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,GAC1E;AAAA,YACA,oBAAC,SAAI,WAAU,sBACb;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,aAAa;AAAA,gBACb,kBAAkB;AAAA,gBAElB;AAAA;AAAA,oBAAC;AAAA;AAAA,sBACC,IAAG;AAAA,sBACH,eAAY;AAAA,sBACZ,WAAU;AAAA,sBACV,OAAO;AAAA,sBACP,8BAAC,cAAW,WAAU,0BAAyB;AAAA;AAAA,kBACjD;AAAA,kBACA,oBAAC,QACC,8BAAC,QAAG,WAAU,mBACX,iBAAO,KAAK,KAAK,EAAE,IAAI,CAAC,OAAO;AAC9B,0BAAM,OAAO,MAAM,EAAE;AACrB,2BAAO,oBAAC,QACN,8BAAC,YAAS,OAAO,IAAI,WAAU,yBAC5B,eAAK,MACR,KAHc,EAIhB;AAAA,kBACF,CAAC,GACH,GACF;AAAA;AAAA;AAAA,YACF,GACF;AAAA,aACF,GAEF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,uBAAuB;AAAA,cACvB,mBAAmB;AAAA,cACnB,aAAa;AAAA,cAEZ;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"555ef41c8141fe537bdb43523a4ef7ec4c287394"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Kn=function(){return l},l}Kn();function Tj(n,e){return Kn().f[0]++,Kn().s[0]++,mb[n]?(Kn().b[0][0]++,{...mb[n],groups:mb[n].groups.map(t=>(Kn().f[1]++,Kn().s[1]++,{...t,id:t.title.replace(/ /g,"_"),title:e(t.title)}))}):(Kn().b[0][1]++,mb.invalid)}function iR(n,e){Kn().f[2]++;const t=(Kn().s[2]++,{id:"layer",title:e("Layer"),type:"layer"}),r=(Kn().s[3]++,{id:"filter",title:e("Filter"),type:"filter"}),i=(Kn().s[4]++,{id:"jsoneditor",title:e("JSON Editor"),type:"jsoneditor"});return Kn().s[5]++,[t,r].concat(Tj(n,e).groups).concat([i])}class L6 extends sr.Component{constructor(e){Kn().f[6]++,Kn().s[8]++,super(e);const t=(Kn().s[9]++,{});Kn().s[10]++,iR(this.props.layer.type,e.t).forEach(r=>{Kn().f[7]++,Kn().s[11]++,t[r.title]=!0}),Kn().s[12]++,this.state={editorGroups:t}}static getDerivedStateFromProps(e,t){Kn().f[8]++;const r=(Kn().s[13]++,{...t.editorGroups});return Kn().s[14]++,Tj(e.layer.type,e.t).groups.forEach(i=>{Kn().f[9]++,Kn().s[15]++,i.title in r?Kn().b[1][1]++:(Kn().b[1][0]++,Kn().s[16]++,r[i.title]=!0)}),Kn().s[17]++,{editorGroups:r}}getChildContext(){return Kn().f[10]++,Kn().s[18]++,{reactIconBase:{size:14,color:"#8e8e8e"}}}changeProperty(e,t,r){Kn().f[11]++,Kn().s[19]++,this.props.onLayerChanged(this.props.layerIndex,mie(this.props.layer,e,t,r))}onGroupToggle(e,t){Kn().f[12]++;const r=(Kn().s[20]++,{...this.state.editorGroups,[e]:t});Kn().s[21]++,this.setState({editorGroups:r})}renderGroupType(e,t){Kn().f[13]++;let r=(Kn().s[22]++,"");Kn().s[23]++,this.props.layer.metadata?(Kn().b[2][0]++,Kn().s[24]++,r=this.props.layer.metadata["maputnik:comment"]):Kn().b[2][1]++;const{errors:i,layerIndex:s}=(Kn().s[25]++,this.props),l=(Kn().s[26]++,{});Kn().s[27]++,i.forEach(v=>{Kn().f[14]++,Kn().s[28]++,Kn().b[4][0]++,v.parsed&&(Kn().b[4][1]++,v.parsed.type==="layer")&&(Kn().b[4][2]++,v.parsed.data.index==s)?(Kn().b[3][0]++,Kn().s[29]++,l[v.parsed.data.key]={message:v.parsed.data.message}):Kn().b[3][1]++});let o;const p=(Kn().s[30]++,this.props.layer);switch(Kn().s[31]++,Object.prototype.hasOwnProperty.call(this.props.sources,p.source)?(Kn().b[5][0]++,Kn().s[32]++,o=this.props.sources[p.source].layers):Kn().b[5][1]++,Kn().s[33]++,e){case"layer":return Kn().b[6][0]++,Kn().s[34]++,le.jsxs("div",{children:[le.jsx(pz,{value:this.props.layer.id,wdKey:"layer-editor.layer-id",error:l.id,onChange:v=>(Kn().f[15]++,Kn().s[35]++,this.props.onLayerIdChange(this.props.layerIndex,this.props.layer.id,v))}),le.jsx(fz,{disabled:!0,error:l.type,value:this.props.layer.type,onChange:v=>(Kn().f[16]++,Kn().s[36]++,this.props.onLayerChanged(this.props.layerIndex,pie(this.props.layer,v)))}),(Kn().b[7][0]++,this.props.layer.type!=="background"&&(Kn().b[7][1]++,le.jsx(gz,{error:l.source,sourceIds:Object.keys(this.props.sources),value:this.props.layer.source,onChange:v=>(Kn().f[17]++,Kn().s[37]++,this.changeProperty(null,"source",v))}))),(Kn().b[8][0]++,["background","raster","hillshade","heatmap"].indexOf(this.props.layer.type)<0&&(Kn().b[8][1]++,le.jsx(vz,{error:l["source-layer"],sourceLayerIds:o,value:this.props.layer["source-layer"],onChange:v=>(Kn().f[18]++,Kn().s[38]++,this.changeProperty(null,"source-layer",v))}))),le.jsx(Lle,{error:l.minzoom,value:this.props.layer.minzoom,onChange:v=>(Kn().f[19]++,Kn().s[39]++,this.changeProperty(null,"minzoom",v))}),le.jsx(zle,{error:l.maxzoom,value:this.props.layer.maxzoom,onChange:v=>(Kn().f[20]++,Kn().s[40]++,this.changeProperty(null,"maxzoom",v))}),le.jsx(Nle,{error:l.comment,value:r,onChange:v=>(Kn().f[21]++,Kn().s[41]++,this.changeProperty("metadata","maputnik:comment",v==""?(Kn().b[9][0]++,void 0):(Kn().b[9][1]++,v)))})]});case"filter":return Kn().b[6][1]++,Kn().s[42]++,le.jsx("div",{children:le.jsx("div",{className:"maputnik-filter-editor-wrapper",children:le.jsx(Koe,{errors:l,filter:this.props.layer.filter,properties:this.props.vectorLayers[this.props.layer["source-layer"]],onChange:v=>(Kn().f[22]++,Kn().s[43]++,this.changeProperty(null,"filter",v))})})});case"properties":return Kn().b[6][2]++,Kn().s[44]++,le.jsx(Ple,{errors:l,layer:this.props.layer,groupFields:t,spec:this.props.spec,onChange:this.changeProperty.bind(this)});case"jsoneditor":return Kn().b[6][3]++,Kn().s[45]++,le.jsx(SO,{layer:this.props.layer,onChange:v=>{Kn().f[23]++,Kn().s[46]++,this.props.onLayerChanged(this.props.layerIndex,v)}});default:return Kn().b[6][4]++,Kn().s[47]++,le.jsx(le.Fragment,{})}}moveLayer(e){Kn().f[24]++,Kn().s[48]++,this.props.onMoveLayer({oldIndex:this.props.layerIndex,newIndex:this.props.layerIndex+e})}render(){Kn().f[25]++;const e=(Kn().s[49]++,this.props.t),t=(Kn().s[50]++,[]),r=(Kn().s[51]++,this.props.layer.type),i=(Kn().s[52]++,iR(r,e).filter(p=>(Kn().f[26]++,Kn().s[53]++,Kn().b[10][0]++,!(r==="background"&&(Kn().b[10][1]++,p.type==="source")))).map(p=>{Kn().f[27]++;const v=(Kn().s[54]++,p.id);return Kn().s[55]++,t.push(v),Kn().s[56]++,le.jsx(Dle,{"data-wd-key":p.title,id:v,title:p.title,isActive:this.state.editorGroups[p.title],onActiveToggle:this.onGroupToggle.bind(this,p.title),children:this.renderGroupType(p.type,p.fields)},v)})),s=(Kn().s[57]++,Kn().b[11][0]++,this.props.layer.layout||(Kn().b[11][1]++,{})),l=(Kn().s[58]++,{delete:{text:e("Delete"),handler:()=>(Kn().f[28]++,Kn().s[59]++,this.props.onLayerDestroy(this.props.layerIndex))},duplicate:{text:e("Duplicate"),handler:()=>(Kn().f[29]++,Kn().s[60]++,this.props.onLayerCopy(this.props.layerIndex))},hide:{text:s.visibility==="none"?(Kn().b[12][0]++,e("Show")):(Kn().b[12][1]++,e("Hide")),handler:()=>(Kn().f[30]++,Kn().s[61]++,this.props.onLayerVisibilityToggle(this.props.layerIndex))},moveLayerUp:{text:e("Move layer up"),disabled:this.props.isFirstLayer,handler:()=>(Kn().f[31]++,Kn().s[62]++,this.moveLayer(-1))},moveLayerDown:{text:e("Move layer down"),disabled:this.props.isLastLayer,handler:()=>(Kn().f[32]++,Kn().s[63]++,this.moveLayer(1))}});function o(p,v){Kn().f[33]++,Kn().s[64]++,v.stopPropagation(),Kn().s[65]++,l[p].handler()}return Kn().s[66]++,le.jsxs("section",{className:"maputnik-layer-editor",role:"main","aria-label":e("Layer editor"),children:[le.jsx("header",{children:le.jsxs("div",{className:"layer-header",children:[le.jsx("h2",{className:"layer-header__title",children:e("Layer: {{layerId}}",{layerId:kj(this.props.layer.id)})}),le.jsx("div",{className:"layer-header__info",children:le.jsxs(Ab.Wrapper,{className:"more-menu",onSelection:o,closeOnSelection:!1,children:[le.jsx(Ab.Button,{id:"skip-target-layer-editor","data-wd-key":"skip-target-layer-editor",className:"more-menu__button",title:"Layer options",children:le.jsx(ZV,{className:"more-menu__button__svg"})}),le.jsx(Ab.Menu,{children:le.jsx("ul",{className:"more-menu__menu",children:Object.keys(l).map(p=>{Kn().f[34]++;const v=(Kn().s[67]++,l[p]);return Kn().s[68]++,le.jsx("li",{children:le.jsx(Ab.MenuItem,{value:p,className:"more-menu__menu__item",children:v.text})},p)})})})]})})]})}),le.jsx(Nie,{allowMultipleExpanded:!0,allowZeroExpanded:!0,preExpanded:t,children:i})]})}}Pn(L6,"defaultProps",(Kn().s[6]++,{onLayerChanged:()=>{Kn().f[3]++},onLayerIdChange:()=>{Kn().f[4]++},onLayerDestroyed:()=>{Kn().f[5]++}})),Pn(L6,"childContextTypes",(Kn().s[7]++,{reactIconBase:pi.object}));const Xle=(Kn().s[69]++,Ws()(L6));var oR=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))},Jle=function(){function n(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return n}(),eue=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),tue=function(){function n(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"}return n}(),nue=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),rue=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),iue=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,oue=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,sR=3,sue=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",iue]],aR=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function aue(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new rue:typeof navigator<"u"?uue(navigator.userAgent):cue()}function lue(n){return n!==""&&sue.reduce(function(e,t){var r=t[0],i=t[1];if(e)return e;var s=i.exec(n);return!!s&&[r,s]},!1)}function uue(n){var e=lue(n);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new nue;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<sR&&(i=oR(oR([],i,!0),due(sR-i.length),!0)):i=[];var s=i.join("."),l=Aue(n),o=oue.exec(n);return o&&o[1]?new tue(t,s,l,o[1]):new Jle(t,s,l)}function Aue(n){for(var e=0,t=aR.length;e<t;e++){var r=aR[e],i=r[0],s=r[1],l=s.exec(n);if(l)return i}return null}function cue(){var n=typeof process<"u"&&process.version;return n?new eue(process.version.slice(1)):null}function due(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}const hue="maputnik",fue="2.1.1",pue="A MapLibre GL visual style editor",mue="module",gue="''",yue={start:"vite",build:"tsc && vite build --base=/maputnik/","build-desktop":"tsc && vite build --base=/ && cd desktop && make","i18n:refresh":"i18next 'src/**/*.{ts,tsx,js,jsx}'",lint:"eslint",test:"cypress run","cy:open":"cypress open","lint-css":'stylelint "src/styles/*.scss"',"sort-styles":"jq 'sort_by(.id)' src/config/styles.json > tmp.json && mv tmp.json src/config/styles.json"},vue={type:"git",url:"https://github.com/maplibre/maputnik"},Cue="Lukas Martinelli",_ue="MIT",bue="https://github.com/maplibre/maputnik#readme",xue={"@mapbox/mapbox-gl-rtl-text":"^0.3.0","@maplibre/maplibre-gl-geocoder":"^1.8.0","@maplibre/maplibre-gl-inspect":"^1.7.1","@maplibre/maplibre-gl-style-spec":"^23.1.0","@mdi/js":"^7.4.47","@mdi/react":"^1.6.1","@prantlf/jsonlint":"^16.0.0","array-move":"^4.0.0",buffer:"^6.0.3",classnames:"^2.5.1",codemirror:"^5.65.19",color:"^5.0.0","detect-browser":"^5.3.0",events:"^3.3.0","file-saver":"^2.0.5",i18next:"^24.2.3","i18next-browser-languagedetector":"^8.0.4","i18next-resources-to-backend":"^1.2.1","json-stringify-pretty-compact":"^4.0.0","json-to-ast":"^2.1.0",lodash:"^4.17.21","lodash.capitalize":"^4.2.1","lodash.clamp":"^4.0.3","lodash.clonedeep":"^4.5.0","lodash.get":"^4.4.2","lodash.isequal":"^4.5.0","lodash.throttle":"^4.1.1","maplibre-gl":"^5.3.0","maputnik-design":"github:maputnik/design#172b06c",ol:"^10.5.0","ol-mapbox-style":"^12.5.0",pmtiles:"^4.3.0","prop-types":"^15.8.1",react:"^18.2.0","react-accessible-accordion":"^5.0.0","react-aria-menubutton":"^7.0.3","react-aria-modal":"^5.0.2","react-autobind":"^1.0.6","react-autocomplete":"^1.8.1","react-collapse":"^5.1.1","react-color":"^2.19.3","react-dom":"^18.2.0","react-file-reader-input":"^2.0.0","react-i18next":"^15.4.1","react-icon-base":"^2.1.2","react-icons":"^5.5.0","react-sortable-hoc":"^2.0.0","reconnecting-websocket":"^4.4.0",slugify:"^1.6.6","string-hash":"^1.1.3",url:"^0.11.4"},Mue={esversion:6},wue={extends:"stylelint-config-recommended-scss",rules:{"no-descending-specificity":null,"media-feature-name-no-unknown":[!0,{ignoreMediaFeatureNames:["prefers-reduced-motion"]}]}},Sue={"@cypress/code-coverage":"^3.14.0","@eslint/js":"^9.23.0","@istanbuljs/nyc-config-typescript":"^1.0.2","@rollup/plugin-replace":"^6.0.2","@shellygo/cypress-test-utils":"^4.1.16","@types/codemirror":"^5.60.15","@types/color":"^4.2.0","@types/cors":"^2.8.17","@types/file-saver":"^2.0.7","@types/geojson":"^7946.0.16","@types/json-to-ast":"^2.1.4","@types/lodash.capitalize":"^4.2.9","@types/lodash.clamp":"^4.0.9","@types/lodash.clonedeep":"^4.5.9","@types/lodash.get":"^4.4.9","@types/lodash.isequal":"^4.5.8","@types/lodash.throttle":"^4.1.9","@types/randomcolor":"^0.5.9","@types/react":"^18.2.67","@types/react-aria-menubutton":"^6.2.14","@types/react-aria-modal":"^5.0.0","@types/react-autocomplete":"^1.8.11","@types/react-collapse":"^5.0.4","@types/react-color":"^3.0.13","@types/react-dom":"^18.2.22","@types/react-file-reader-input":"^2.0.4","@types/react-icon-base":"^2.1.6","@types/string-hash":"^1.1.3","@types/uuid":"^10.0.0","@types/wicg-file-system-access":"^2023.10.6","@vitejs/plugin-react":"^4.3.4",cors:"^2.8.5",cypress:"^14.3.0","cypress-plugin-tab":"^1.0.5",eslint:"^9.24.0","eslint-plugin-react":"^7.37.5","eslint-plugin-react-hooks":"^5.2.0","eslint-plugin-react-refresh":"^0.4.19","i18next-parser":"^9.3.0",istanbul:"^0.4.5","istanbul-lib-coverage":"^3.2.2",postcss:"^8.5.1","react-hot-loader":"^4.13.1",sass:"^1.86.3",stylelint:"^16.18.0","stylelint-config-recommended-scss":"^14.1.0","stylelint-scss":"^6.11.1",typescript:"^5.8.3","typescript-eslint":"^8.29.1",uuid:"^11.1.0",vite:"^6.2.6","vite-plugin-istanbul":"^7.0.0"},lR={name:hue,version:fue,description:pue,type:mue,main:gue,scripts:yue,repository:vue,author:Cue,license:_ue,homepage:bue,dependencies:xue,jshintConfig:Mue,stylelint:wue,devDependencies:Sue},Eue="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20100%20100'%3e%3cg%20class='map'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--map__main'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line1'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line2'%20fill='none'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--map__line3'%20fill='none'%3e%3c/use%3e%3c/g%3e%3cg%20class='palette'%3e%3cuse%20xlink:href='%23ref-1--palette__main'%20fill='%23fff'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__inner'%20fill='none'%20stroke='%23000'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle5'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle4'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle3'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle2'%20fill='%234eba6f'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle1'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--palette__circle0'%20fill='%234eba6f'%3e%3c/use%3e%3c/g%3e%3cg%20class='brush'%20stroke='%23000'%3e%3cuse%20xlink:href='%23ref-1--brush__bottom'%20fill='%23f7c44c'%3e%3c/use%3e%3cuse%20xlink:href='%23ref-1--brush__top'%20fill='%23fff'%3e%3c/use%3e%3c/g%3e%3cdefs%3e%3cpath%20id='ref-1--map__main'%20stroke-width='2.366'%20stroke-linejoin='round'%20d='M18.84%207.717l15.44%207.542%2015.75-7.762%2015.7%207.857L81.005%207.67%2096.31%2054.052%2073.598%2062.12%2050.93%2053.872l-25.1%208.066-22.668-8.066z'%3e%3c/path%3e%3cpath%20id='ref-1--map__line1'%20d='M65.556%2015.07l7.647%2046.838'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line2'%20d='M50.261%207.422l.717%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--map__line3'%20d='M34.011%2015.07l-8.603%2046.6'%20stroke-width='1.104'%3e%3c/path%3e%3cpath%20id='ref-1--palette__main'%20stroke-width='2.3'%20d='M47.352%2030.887c7.993.226%2016.934%209.725%2017.954%2015.25%201.02%205.527-.743%2011.125-4.298%2013.875-3.554%202.75-8.6%202.905-8.723%208.302-.097%204.237%208.457%208.5%208.088%2015.653-.406%207.857-15.508%2013.15-30.943%206.102-8.556-3.906-14.249-13.653-13.385-26.238C16.833%2052.334%2022.32%2043.658%2027.382%2039c5.977-5.503%2011.977-8.337%2019.97-8.112z'%3e%3c/path%3e%3ccircle%20id='ref-1--palette__inner'%20stroke-width='2.3'%20cx='41.873'%20cy='61.901'%20r='6.389'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle5'%20cy='44.56'%20cx='54.347'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle4'%20cx='40.443'%20cy='41.555'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle3'%20r='4.336'%20cy='51.102'%20cx='29.651'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle2'%20cx='25.293'%20cy='65.836'%20r='4.336'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle1'%20r='4.336'%20cy='79.326'%20cx='32.764'%3e%3c/circle%3e%3ccircle%20id='ref-1--palette__circle0'%20cx='46.669'%20cy='80.571'%20r='4.336'%3e%3c/circle%3e%3cpath%20id='ref-1--brush__bottom'%20d='M76.333%2089.333c-1.645-9.794-4.375-35.26-4.32-37.887.056-2.627%202.52-4.34%205.36-4.317%202.842.022%205.098%201.87%205.314%204.27.107%201.2-1.576%2028.06-2.318%2037.844-.332%204.374-3.31%204.413-4.036.09z'%20stroke-width='2.3'%20stroke-linejoin='round'%3e%3c/path%3e%3cpath%20id='ref-1--brush__top'%20stroke-linejoin='round'%20stroke-width='2.3'%20d='M77.184%2026.428s-5.621%207.02-5.621%2011.978c0%204.957%202.206%206.878%205.81%206.878%203.606%200%205.148-1.708%205.29-6.736.142-5.028-5.479-12.12-5.479-12.12z'%3e%3c/path%3e%3c/defs%3e%3c/svg%3e";function Yi(){var n="/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",e="7ffd82d4f3aa9239b1c505abaafac5bdb522b791",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx",statementMap:{0:{start:{line:18,column:16},end:{line:18,column:24}},1:{start:{line:19,column:41},end:{line:19,column:89}},2:{start:{line:22,column:4},end:{line:22,column:107}},3:{start:{line:27,column:4},end:{line:37,column:6}},4:{start:{line:42,column:4},end:{line:49,column:6}},5:{start:{line:54,column:4},end:{line:62,column:6}},6:{start:{line:66,column:10},end:{line:74,column:3}},7:{start:{line:76,column:4},end:{line:76,column:34}},8:{start:{line:79,column:4},end:{line:79,column:40}},9:{start:{line:81,column:11},end:{line:88,column:3}},10:{start:{line:82,column:4},end:{line:87,column:5}},11:{start:{line:83,column:6},end:{line:83,column:59}},12:{start:{line:85,column:17},end:{line:85,column:65}},13:{start:{line:86,column:6},end:{line:86,column:17}},14:{start:{line:90,column:14},end:{line:90,column:26}},15:{start:{line:91,column:18},end:{line:127,column:5}},16:{start:{line:128,column:24},end:{line:130,column:6}},17:{start:{line:129,column:6},end:{line:129,column:45}},18:{start:{line:131,column:4},end:{line:249,column:12}},19:{start:{line:142,column:33},end:{line:142,column:58}},20:{start:{line:151,column:33},end:{line:151,column:60}},21:{start:{line:160,column:33},end:{line:160,column:51}},22:{start:{line:212,column:33},end:{line:212,column:69}},23:{start:{line:215,column:38},end:{line:215,column:59}},24:{start:{line:216,column:20},end:{line:216,column:157}},25:{start:{line:218,column:115},end:{line:218,column:148}},26:{start:{line:219,column:20},end:{line:219,column:133}},27:{start:{line:235,column:33},end:{line:235,column:74}},28:{start:{line:238,column:18},end:{line:238,column:94}},29:{start:{line:252,column:19},end:{line:252,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:21,column:2},end:{line:21,column:3}},loc:{start:{line:21,column:11},end:{line:23,column:3}},line:21},1:{name:"(anonymous_1)",decl:{start:{line:26,column:2},end:{line:26,column:3}},loc:{start:{line:26,column:11},end:{line:38,column:3}},line:26},2:{name:"(anonymous_2)",decl:{start:{line:41,column:2},end:{line:41,column:3}},loc:{start:{line:41,column:11},end:{line:50,column:3}},line:41},3:{name:"(anonymous_3)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:63,column:3}},line:53},4:{name:"(anonymous_4)",decl:{start:{line:75,column:2},end:{line:75,column:3}},loc:{start:{line:75,column:23},end:{line:77,column:3}},line:75},5:{name:"(anonymous_5)",decl:{start:{line:78,column:2},end:{line:78,column:3}},loc:{start:{line:78,column:28},end:{line:80,column:3}},line:78},6:{name:"(anonymous_6)",decl:{start:{line:81,column:11},end:{line:81,column:12}},loc:{start:{line:81,column:23},end:{line:88,column:3}},line:81},7:{name:"(anonymous_7)",decl:{start:{line:89,column:2},end:{line:89,column:3}},loc:{start:{line:89,column:11},end:{line:250,column:3}},line:89},8:{name:"(anonymous_8)",decl:{start:{line:128,column:35},end:{line:128,column:36}},loc:{start:{line:128,column:45},end:{line:130,column:5}},line:128},9:{name:"(anonymous_9)",decl:{start:{line:142,column:25},end:{line:142,column:26}},loc:{start:{line:142,column:33},end:{line:142,column:58}},line:142},10:{name:"(anonymous_10)",decl:{start:{line:151,column:25},end:{line:151,column:26}},loc:{start:{line:151,column:33},end:{line:151,column:60}},line:151},11:{name:"(anonymous_11)",decl:{start:{line:160,column:25},end:{line:160,column:26}},loc:{start:{line:160,column:33},end:{line:160,column:51}},line:160},12:{name:"(anonymous_12)",decl:{start:{line:212,column:26},end:{line:212,column:27}},loc:{start:{line:212,column:33},end:{line:212,column:69}},line:212},13:{name:"(anonymous_13)",decl:{start:{line:215,column:31},end:{line:215,column:32}},loc:{start:{line:215,column:38},end:{line:215,column:59}},line:215},14:{name:"(anonymous_14)",decl:{start:{line:215,column:65},end:{line:215,column:66}},loc:{start:{line:215,column:75},end:{line:217,column:19}},line:215},15:{name:"(anonymous_15)",decl:{start:{line:218,column:108},end:{line:218,column:109}},loc:{start:{line:218,column:115},end:{line:218,column:148}},line:218},16:{name:"(anonymous_16)",decl:{start:{line:218,column:154},end:{line:218,column:155}},loc:{start:{line:218,column:164},end:{line:220,column:19}},line:218},17:{name:"(anonymous_17)",decl:{start:{line:235,column:26},end:{line:235,column:27}},loc:{start:{line:235,column:33},end:{line:235,column:74}},line:235},18:{name:"(anonymous_18)",decl:{start:{line:237,column:65},end:{line:237,column:66}},loc:{start:{line:237,column:83},end:{line:239,column:17}},line:237}},branchMap:{0:{loc:{start:{line:82,column:4},end:{line:87,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:87,column:5}},{start:{line:84,column:11},end:{line:87,column:5}}],line:82}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppToolbar.tsx"],names:[],mappings:"AA+BW,cAyLG,YAzLH;AA/BX,OAAO,WAAW;AAClB,OAAO,gBAAgB;AACvB,SAAQ,cAAa;AAErB;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AACP,OAAO,aAAa;AAEpB,OAAO,kBAAkB;AACzB,SAAS,uBAAwC;AACjD,SAAS,0BAA0B;AAGnC,MAAM,UAAU,OAAO;AACvB,MAAM,mCAAmC,CAAC,UAAU,SAAS,EAAE,QAAQ,QAAS,IAAI,IAAI;AAQxF,MAAM,iBAAiB,MAAM,UAAyB;AAAA,EACpD,SAAS;AACP,WAAO,oBAAC,UAAK,WAAU,sBAAsB,eAAK,MAAM,UAAS;AAAA,EACnE;AACF;AASA,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAW,WAAW,yBAAyB,KAAK,MAAM,SAAS;AAAA,QACnE,MAAM,KAAK,MAAM;AAAA,QACjB,KAAI;AAAA,QACJ,QAAO;AAAA,QACP,eAAY;AAAA,QAEX,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAOA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QAEvB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAQA,MAAM,sBAAsB,MAAM,UAA8B;AAAA,EAC9D,SAAS;AACP,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,WAAU;AAAA,QACV,eAAa,KAAK,MAAM;AAAA,QACxB,SAAS,KAAK,MAAM;AAAA,QAEnB,eAAK,MAAM;AAAA;AAAA,IACd;AAAA,EACF;AACF;AAmBA,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,QAAQ;AAAA,IACN,QAAQ;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN,KAAK;AAAA,MACL,QAAQ;AAAA,IACV;AAAA,EACF;AAAA,EAEA,gBAAgB,KAAe;AAC7B,SAAK,MAAM,cAAc,GAAG;AAAA,EAC9B;AAAA,EAEA,qBAAqB,KAAa;AAChC,SAAK,MAAM,KAAK,eAAe,GAAG;AAAA,EACpC;AAAA,EAEA,SAAS,CAAC,WAAmB;AAC3B,QAAI,WAAW,OAAO;AACpB,MAAC,SAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,IAC5E,OACK;AACH,YAAM,KAAK,SAAS,cAAc,kBAAgB,MAAM;AACxD,SAAG,MAAM;AAAA,IACX;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,QAAQ;AAAA,MACZ;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,KAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,SAAS;AAAA,QAClB,UAAU,KAAK,MAAM,aAAa;AAAA,MACpC;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,qBAAqB;AAAA,QAC9B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,mBAAmB;AAAA,QAC5B,UAAU,CAAC;AAAA,MACb;AAAA,MACA;AAAA,QACE,IAAI;AAAA,QACJ,OAAO;AAAA,QACP,OAAO,EAAE,sBAAsB;AAAA,QAC/B,UAAU,CAAC;AAAA,MACb;AAAA,IACF;AAEA,UAAM,cAAc,MAAM,KAAK,CAAC,SAAS;AACvC,aAAO,KAAK,OAAO,KAAK,MAAM;AAAA,IAChC,CAAC;AAED,WAAO,oBAAC,SAAI,WAAU,oBACpB,+BAAC,SAAI,WAAU,2BACb;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UAGV;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,YAAY;AAAA,gBAEtC,YAAE,aAAa;AAAA;AAAA,YAClB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,cAAc;AAAA,gBAExC,YAAE,cAAc;AAAA;AAAA,YACnB;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,eAAY;AAAA,gBACZ,WAAU;AAAA,gBACV,SAAS,QAAM,KAAK,OAAO,KAAK;AAAA,gBAE/B,YAAE,UAAU;AAAA;AAAA,YACf;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,QAAO;AAAA,gBACP,KAAI;AAAA,gBACJ,MAAK;AAAA,gBAEL;AAAA,sCAAC,SAAI,KAAK,cAAc,KAAK,EAAE,oBAAoB,GAAG;AAAA,kBACtD,qBAAC,QACC;AAAA,wCAAC,UAAK,WAAU,yBAAyB,kBAAQ,MAAK;AAAA,oBACtD,qBAAC,UAAK,WAAU,4BAA2B;AAAA;AAAA,sBAAE,QAAQ;AAAA,uBAAQ;AAAA,qBAC/D;AAAA;AAAA;AAAA,YACF;AAAA;AAAA;AAAA,MACF;AAAA,MACA,qBAAC,SAAI,WAAU,6BAA4B,MAAK,cAAa,cAAW,WACtE;AAAA,6BAAC,iBAAc,OAAM,YAAW,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,MAAM,GACjF;AAAA,8BAAC,mBAAgB;AAAA,UACjB,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,cAAa,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,QAAQ,GACrF;AAAA,8BAAC,UAAO;AAAA,UACR,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,QACA,qBAAC,iBAAc,OAAM,eAAc,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,SAAS,GACvF;AAAA,8BAAC,YAAS;AAAA,UACV,oBAAC,YAAU,YAAE,cAAc,GAAE;AAAA,WAC/B;AAAA,QACA,qBAAC,iBAAc,OAAM,gBAAe,SAAS,KAAK,MAAM,cAAc,KAAK,MAAM,UAAU,GACzF;AAAA,8BAAC,cAAW;AAAA,UACZ,oBAAC,YAAU,YAAE,gBAAgB,GAAE;AAAA,WACjC;AAAA,QAEA,qBAAC,iBAAc,OAAM,eACnB;AAAA,8BAAC,gBAAa;AAAA,UACd,qBAAC,YAAU;AAAA,cAAE,MAAM;AAAA,YACjB;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,gBAAgB,EAAE,OAAO,KAAiB;AAAA,gBAChE,OAAO,aAAa;AAAA,gBAEnB;AAAA,wBAAM,OAAO,OAAK,EAAE,UAAU,SAAS,EAAE,IAAI,CAAC,SAAS;AACtD,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAAU,eAAa,KAAK,IAC9E,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC;AAAA,kBACD,oBAAC,cAAS,OAAO,EAAE,qBAAqB,GACrC,gBAAM,OAAO,OAAK,EAAE,UAAU,qBAAqB,EAAE,IAAI,CAAC,SAAS;AAClE,2BACE,oBAAC,YAAqB,OAAO,KAAK,IAAI,UAAU,KAAK,UAClD,eAAK,SADK,KAAK,EAElB;AAAA,kBAEJ,CAAC,GACH;AAAA;AAAA;AAAA,YACF;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,iBAAc,OAAM,gBACnB;AAAA,8BAAC,cAAW;AAAA,UACZ,qBAAC,YAAS;AAAA;AAAA,YACR;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,eAAY;AAAA,gBACZ,UAAU,CAAC,MAAM,KAAK,qBAAqB,EAAE,OAAO,KAAK;AAAA,gBACzD,OAAO,KAAK,MAAM,KAAK;AAAA,gBAEtB,iBAAO,QAAQ,kBAAkB,EAAE,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM;AACxD,yBACE,oBAAC,YAAkB,OAAO,MACvB,kBADU,IAEb;AAAA,gBAEJ,CAAC;AAAA;AAAA,YACH;AAAA,aACF;AAAA,WACF;AAAA,QAEA,qBAAC,eAAY,MAAM,6CACjB;AAAA,8BAAC,iBAAc;AAAA,UACf,oBAAC,YAAU,YAAE,MAAM,GAAE;AAAA,WACvB;AAAA,SACF;AAAA,OACF,GACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7ffd82d4f3aa9239b1c505abaafac5bdb522b791"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Yi=function(){return l},l}Yi();const Bue=(Yi().s[0]++,aue()),gb=(Yi().s[1]++,["chrome","firefox"].indexOf(Bue.name)>-1);class ug extends sr.Component{render(){return Yi().f[0]++,Yi().s[2]++,le.jsx("span",{className:"maputnik-icon-text",children:this.props.children})}}class Oue extends sr.Component{render(){return Yi().f[1]++,Yi().s[3]++,le.jsx("a",{className:em("maputnik-toolbar-link",this.props.className),href:this.props.href,rel:"noopener noreferrer",target:"_blank","data-wd-key":"toolbar:link",children:this.props.children})}}class uR extends sr.Component{render(){return Yi().f[2]++,Yi().s[4]++,le.jsx("div",{className:"maputnik-toolbar-select","data-wd-key":this.props.wdKey,children:this.props.children})}}class yb extends sr.Component{render(){return Yi().f[3]++,Yi().s[5]++,le.jsx("button",{className:"maputnik-toolbar-action","data-wd-key":this.props.wdKey,onClick:this.props.onClick,children:this.props.children})}}class Iue extends sr.Component{constructor(){super(...arguments);Pn(this,"state",(Yi().s[6]++,{isOpen:{settings:!1,sources:!1,open:!1,add:!1,export:!1}}));Pn(this,"onSkip",(Yi().s[9]++,t=>{if(Yi().f[6]++,Yi().s[10]++,t==="map")Yi().b[0][0]++,Yi().s[11]++,document.querySelector(".maplibregl-canvas").focus();else{Yi().b[0][1]++;const r=(Yi().s[12]++,document.querySelector("#skip-target-"+t));Yi().s[13]++,r.focus()}}))}handleSelection(t){Yi().f[4]++,Yi().s[7]++,this.props.onSetMapState(t)}handleLanguageChange(t){Yi().f[5]++,Yi().s[8]++,this.props.i18n.changeLanguage(t)}render(){Yi().f[7]++;const t=(Yi().s[14]++,this.props.t),r=(Yi().s[15]++,[{id:"map",group:"general",title:t("Map")},{id:"inspect",group:"general",title:t("Inspect"),disabled:this.props.renderer==="ol"},{id:"filter-deuteranopia",group:"color-accessibility",title:t("Deuteranopia filter"),disabled:!gb},{id:"filter-protanopia",group:"color-accessibility",title:t("Protanopia filter"),disabled:!gb},{id:"filter-tritanopia",group:"color-accessibility",title:t("Tritanopia filter"),disabled:!gb},{id:"filter-achromatopsia",group:"color-accessibility",title:t("Achromatopsia filter"),disabled:!gb}]),i=(Yi().s[16]++,r.find(s=>(Yi().f[8]++,Yi().s[17]++,s.id===this.props.mapState)));return Yi().s[18]++,le.jsx("nav",{className:"maputnik-toolbar",children:le.jsxs("div",{className:"maputnik-toolbar__inner",children:[le.jsxs("div",{className:"maputnik-toolbar-logo-container",children:[le.jsx("button",{"data-wd-key":"root:skip:layer-list",className:"maputnik-toolbar-skip",onClick:s=>(Yi().f[9]++,Yi().s[19]++,this.onSkip("layer-list")),children:t("Layers list")}),le.jsx("button",{"data-wd-key":"root:skip:layer-editor",className:"maputnik-toolbar-skip",onClick:s=>(Yi().f[10]++,Yi().s[20]++,this.onSkip("layer-editor")),children:t("Layer editor")}),le.jsx("button",{"data-wd-key":"root:skip:map-view",className:"maputnik-toolbar-skip",onClick:s=>(Yi().f[11]++,Yi().s[21]++,this.onSkip("map")),children:t("Map view")}),le.jsxs("a",{className:"maputnik-toolbar-logo",target:"blank",rel:"noreferrer noopener",href:"https://github.com/maplibre/maputnik",children:[le.jsx("img",{src:Eue,alt:t("Maputnik on GitHub")}),le.jsxs("h1",{children:[le.jsx("span",{className:"maputnik-toolbar-name",children:lR.name}),le.jsxs("span",{className:"maputnik-toolbar-version",children:["v",lR.version]})]})]})]}),le.jsxs("div",{className:"maputnik-toolbar__actions",role:"navigation","aria-label":"Toolbar",children:[le.jsxs(yb,{wdKey:"nav:open",onClick:this.props.onToggleModal.bind(this,"open"),children:[le.jsx(LV,{}),le.jsx(ug,{children:t("Open")})]}),le.jsxs(yb,{wdKey:"nav:export",onClick:this.props.onToggleModal.bind(this,"export"),children:[le.jsx($E,{}),le.jsx(ug,{children:t("Save")})]}),le.jsxs(yb,{wdKey:"nav:sources",onClick:this.props.onToggleModal.bind(this,"sources"),children:[le.jsx(YV,{}),le.jsx(ug,{children:t("Data Sources")})]}),le.jsxs(yb,{wdKey:"nav:settings",onClick:this.props.onToggleModal.bind(this,"settings"),children:[le.jsx(UV,{}),le.jsx(ug,{children:t("Style Settings")})]}),le.jsxs(uR,{wdKey:"nav:inspect",children:[le.jsx(PV,{}),le.jsxs(ug,{children:[t("View"),le.jsxs("select",{className:"maputnik-select","data-wd-key":"maputnik-select",onChange:s=>(Yi().f[12]++,Yi().s[22]++,this.handleSelection(s.target.value)),value:i==null?void 0:i.id,children:[r.filter(s=>(Yi().f[13]++,Yi().s[23]++,s.group==="general")).map(s=>(Yi().f[14]++,Yi().s[24]++,le.jsx("option",{value:s.id,disabled:s.disabled,"data-wd-key":s.id,children:s.title},s.id))),le.jsx("optgroup",{label:t("Color accessibility"),children:r.filter(s=>(Yi().f[15]++,Yi().s[25]++,s.group==="color-accessibility")).map(s=>(Yi().f[16]++,Yi().s[26]++,le.jsx("option",{value:s.id,disabled:s.disabled,children:s.title},s.id)))})]})]})]}),le.jsxs(uR,{wdKey:"nav:language",children:[le.jsx(FV,{}),le.jsxs(ug,{children:["Language",le.jsx("select",{className:"maputnik-select","data-wd-key":"maputnik-lang-select",onChange:s=>(Yi().f[17]++,Yi().s[27]++,this.handleLanguageChange(s.target.value)),value:this.props.i18n.language,children:Object.entries(RD).map(([s,l])=>(Yi().f[18]++,Yi().s[28]++,le.jsx("option",{value:s,children:l},s)))})]})]}),le.jsxs(Oue,{href:"https://github.com/maplibre/maputnik/wiki",children:[le.jsx(KV,{}),le.jsx(ug,{children:t("Help")})]})]})]})})}}const kue=(Yi().s[29]++,Ws()(Iue));function O2(){var n="/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",e="d17a642b15310eb6111b086bd920c67ec86a8271",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:113}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:11},end:{line:6,column:3}},line:4}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ScrollContainer.tsx"],names:[],mappings:"AAQW;AARX,OAAO,WAAW;AAMlB,qBAAqB,wBAAwB,MAAM,UAAgC;AAAA,EACjF,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,6BACnB,eAAK,MAAM,UACd;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d17a642b15310eb6111b086bd920c67ec86a8271"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return O2=function(){return l},l}O2();class Tue extends sr.Component{render(){return O2().f[0]++,O2().s[0]++,le.jsx("div",{className:"maputnik-scroll-container",children:this.props.children})}}function ap(){var n="/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",e="1ee946cae22aef585acbff88e7256312e8bd0812",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx",statementMap:{0:{start:{line:7,column:29},end:{line:9,column:3}},1:{start:{line:11,column:4},end:{line:13,column:6}},2:{start:{line:16,column:4},end:{line:16,column:46}},3:{start:{line:17,column:4},end:{line:26,column:9}},4:{start:{line:29,column:18},end:{line:29,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:20},end:{line:14,column:3}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:27,column:3}},line:15}},branchMap:{0:{loc:{start:{line:24,column:6},end:{line:24,column:123}},type:"binary-expr",locations:[{start:{line:24,column:6},end:{line:24,column:23}},{start:{line:24,column:43},end:{line:24,column:123}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppLayout.tsx"],names:[],mappings:"AA8BM,SACE,KADF;AA9BN,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,qBAAqB;AAC5B,SAA0B,uBAAuB;AAWjD,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,OAAO,oBAAoB;AAAA,IACzB,eAAe,UAAU;AAAA,EAC3B;AAAA,EAEA,kBAAkB;AAChB,WAAO;AAAA,MACL,eAAe,EAAE,MAAM,GAAG;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,SAAS;AACP,aAAS,KAAK,MAAM,KAAK,MAAM,KAAK,IAAI;AAExC,WAAO,qBAAC,SAAI,WAAU,mBACnB;AAAA,WAAK,MAAM;AAAA,MACZ,qBAAC,SAAI,WAAU,wBACb;AAAA,4BAAC,SAAI,WAAU,wBACZ,eAAK,MAAM,WACd;AAAA,QACA,oBAAC,SAAI,WAAU,0BACb,8BAAC,mBACE,eAAK,MAAM,aACd,GACF;AAAA,QACC,KAAK,MAAM;AAAA,SACd;AAAA,MACC,KAAK,MAAM,UAAU,oBAAC,SAAI,WAAU,0BAClC,eAAK,MAAM,QACd;AAAA,MAEC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1ee946cae22aef585acbff88e7256312e8bd0812"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ap=function(){return l},l}ap();class Pj extends sr.Component{getChildContext(){return ap().f[0]++,ap().s[1]++,{reactIconBase:{size:14}}}render(){return ap().f[1]++,ap().s[2]++,document.body.dir=this.props.i18n.dir(),ap().s[3]++,le.jsxs("div",{className:"maputnik-layout",children:[this.props.toolbar,le.jsxs("div",{className:"maputnik-layout-main",children:[le.jsx("div",{className:"maputnik-layout-list",children:this.props.layerList}),le.jsx("div",{className:"maputnik-layout-drawer",children:le.jsx(Tue,{children:this.props.layerEditor})}),this.props.map]}),(ap().b[0][0]++,this.props.bottom&&(ap().b[0][1]++,le.jsx("div",{className:"maputnik-layout-bottom",children:this.props.bottom}))),this.props.modals]})}}Pn(Pj,"childContextTypes",(ap().s[0]++,{reactIconBase:pi.object}));const Pue=(ap().s[4]++,Ws()(Pj));function ml(){var n="/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",e="79207020c1a6a62db4f3db3338a49c0819045455",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx",statementMap:{0:{start:{line:6,column:24},end:{line:9,column:3}},1:{start:{line:11,column:38},end:{line:11,column:48}},2:{start:{line:12,column:19},end:{line:40,column:6}},3:{start:{line:14,column:6},end:{line:38,column:7}},4:{start:{line:15,column:27},end:{line:15,column:32}},5:{start:{line:16,column:24},end:{line:16,column:73}},6:{start:{line:17,column:8},end:{line:35,column:13}},7:{start:{line:30,column:31},end:{line:30,column:74}},8:{start:{line:37,column:8},end:{line:37,column:32}},9:{start:{line:39,column:6},end:{line:39,column:120}},10:{start:{line:41,column:18},end:{line:43,column:6}},11:{start:{line:42,column:6},end:{line:42,column:68}},12:{start:{line:44,column:4},end:{line:47,column:9}},13:{start:{line:50,column:24},end:{line:50,column:66}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:25},end:{line:8,column:5}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:48,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:42},end:{line:12,column:43}},loc:{start:{line:12,column:58},end:{line:40,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:31},end:{line:30,column:74}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:41,column:40},end:{line:41,column:41}},loc:{start:{line:41,column:50},end:{line:43,column:5}},line:41}},branchMap:{0:{loc:{start:{line:14,column:6},end:{line:38,column:7}},type:"if",locations:[{start:{line:14,column:6},end:{line:38,column:7}},{start:{line:36,column:13},end:{line:38,column:7}}],line:14},1:{loc:{start:{line:14,column:10},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:14,column:10},end:{line:14,column:22}},{start:{line:14,column:26},end:{line:14,column:55}}],line:14},2:{loc:{start:{line:24,column:10},end:{line:34,column:14}},type:"binary-expr",locations:[{start:{line:24,column:10},end:{line:24,column:50}},{start:{line:24,column:70},end:{line:34,column:14}}],line:24}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/AppMessagePanel.tsx"],names:[],mappings:"AA4BY,SAIE,UAHM,KADR;AA5BZ,OAAO,WAAW;AAClB,SAAQ,qBAAoB;AAE5B,SAAS,OAAwB,uBAAuB;AAWxD,MAAM,gCAAgC,MAAM,UAAwC;AAAA,EAClF,OAAO,eAAe;AAAA,IACpB,eAAe,MAAM;AAAA,IAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,mBAAkB,IAAI,KAAK;AACrC,UAAM,SAAS,KAAK,MAAM,QAAQ,IAAI,CAAC,OAAY,QAAQ;AACzD,UAAI;AACJ,UAAI,MAAM,UAAU,MAAM,OAAO,SAAS,SAAS;AACjD,cAAM,EAAC,OAAM,IAAI;AACjB,cAAM,UAAU,KAAK,MAAM,UAAU,OAAO,OAAO,KAAK,KAAK,EAAE;AAC/D,kBACE,iCACE;AAAA,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAM,wBAAc,OAAO,GAAE;AAAA,YAAO;AAAA,YAAG,OAAO,KAAK;AAAA,aAC5D;AAAA,UACC,uBAAuB,OAAO,KAAK,SAClC,iCAAE;AAAA;AAAA,YAEA;AAAA,cAAC;AAAA;AAAA,gBACC,WAAU;AAAA,gBACV,SAAS,MAAM,KAAK,MAAM,cAAe,OAAO,KAAK,KAAK;AAAA,gBAEzD,YAAE,iBAAiB;AAAA;AAAA,YACtB;AAAA,aACF;AAAA,WAEJ;AAAA,MAEJ,OACK;AACH,kBAAU,MAAM;AAAA,MAClB;AACA,aAAO,oBAAC,OAAqB,WAAU,gCACpC,qBADY,WAAS,GAExB;AAAA,IACF,CAAC;AAED,UAAM,QAAQ,KAAK,MAAM,OAAO,IAAI,CAAC,GAAG,MAAM;AAC5C,aAAO,oBAAC,OAAmB,eAAZ,UAAQ,CAAM;AAAA,IAC/B,CAAC;AAED,WAAO,qBAAC,SAAI,WAAU,0BACnB;AAAA;AAAA,MACA;AAAA,OACH;AAAA,EACF;AACF;AAEA,MAAM,kBAAkB,gBAAgB,EAAE,uBAAuB;AACjE,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"79207020c1a6a62db4f3db3338a49c0819045455"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ml=function(){return l},l}ml();class Kj extends sr.Component{render(){var s,l;ml().f[1]++;const{t:e,selectedLayerIndex:t}=(ml().s[1]++,this.props),r=(ml().s[2]++,(s=this.props.errors)==null?void 0:s.map((o,p)=>{var x;ml().f[2]++;let v;if(ml().s[3]++,ml().b[1][0]++,o.parsed&&(ml().b[1][1]++,o.parsed.type==="layer")){ml().b[0][0]++;const{parsed:B}=(ml().s[4]++,o),T=(ml().s[5]++,(x=this.props.mapStyle)==null?void 0:x.layers[B.data.index].id);ml().s[6]++,v=le.jsxs(le.Fragment,{children:[le.jsxs(E0,{t:e,children:["Layer ",le.jsx("span",{children:kj(T)}),": ",B.data.message]}),(ml().b[2][0]++,t!==B.data.index&&(ml().b[2][1]++,le.jsxs(le.Fragment,{children:["",le.jsx("button",{className:"maputnik-message-panel__switch-button",onClick:()=>(ml().f[3]++,ml().s[7]++,this.props.onLayerSelect(B.data.index)),children:e("switch to layer")})]})))]})}else ml().b[0][1]++,ml().s[8]++,v=o.message;return ml().s[9]++,le.jsx("p",{className:"maputnik-message-panel-error",children:v},"error-"+p)})),i=(ml().s[10]++,(l=this.props.infos)==null?void 0:l.map((o,p)=>(ml().f[4]++,ml().s[11]++,le.jsx("p",{children:o},"info-"+p))));return ml().s[12]++,le.jsxs("div",{className:"maputnik-message-panel",children:[r,i]})}}Pn(Kj,"defaultProps",(ml().s[0]++,{onLayerSelect:()=>{ml().f[0]++}}));const Kue=(ml().s[13]++,Ws()(Kj));function I2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",e="a416dfabb7eaa48bd0505cf98cb9c66326bca3ec",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:165}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldArray.tsx"],names:[],mappings:"AAcM;AAdN,OAAO,WAAW;AAClB,OAAO,gBAAwD;AAC/D,OAAO,cAAc;AASrB,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a416dfabb7eaa48bd0505cf98cb9c66326bca3ec"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return I2=function(){return l},l}I2();class k2 extends sr.Component{render(){return I2().f[0]++,I2().s[0]++,le.jsx(TC,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(_j,{...this.props})})}}function T2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",e="4931f85d3ebf1a60a85ac9883e78e028b7a388d8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldNumber.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAC5C,OAAO,WAAW;AAWlB,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4931f85d3ebf1a60a85ac9883e78e028b7a388d8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return T2=function(){return l},l}T2();class up extends sr.Component{render(){return T2().f[0]++,T2().s[0]++,le.jsx(pa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(nm,{...this.props})})}}function P2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",e="37d7b9547efb8875177dbe7a186e7965cd9eb1c0",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldString.tsx"],names:[],mappings:"AAeM;AAfN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAU5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAO,GAC/B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"37d7b9547efb8875177dbe7a186e7965cd9eb1c0"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return P2=function(){return l},l}P2();class jp extends sr.Component{render(){return P2().f[0]++,P2().s[0]++,le.jsx(pa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(Pf,{...this.props})})}}function K2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",e="a176a83ddcea7ca7f45b0bf957355a9e0c40a3af",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:160}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldUrl.tsx"],names:[],mappings:"AAiBQ;AAjBR,OAAO,WAAW;AAClB,OAAO,cAAgD;AACvD,OAAO,WAAW;AAWlB,qBAAqB,iBAAiB,MAAM,UAAyB;AAAA,EACnE,SAAU;AACR,WACE,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WACpD,8BAAC,YAAU,GAAG,KAAK,OAAO,GAC5B;AAAA,EAEJ;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a176a83ddcea7ca7f45b0bf957355a9e0c40a3af"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return K2=function(){return l},l}K2();class Ey extends sr.Component{render(){return K2().f[0]++,K2().s[0]++,le.jsx(pa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx($O,{...this.props})})}}function R2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",e="ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:163}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldSelect.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,iBAAqC;AAW5C,qBAAqB,oBAAoB,MAAM,UAA4B;AAAA,EACzE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,eAAa,GAAG,KAAK,OAAM,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ed4136288b91381a6bd6755cdb2ea1dcf45e2f6b"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return R2=function(){return l},l}R2();class e3 extends sr.Component{render(){return R2().f[0]++,R2().s[0]++,le.jsx(pa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(Qg,{...this.props})})}}function D2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",e="5745e67ee75c0f352c022256ef8bf31e8fa7367f",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:164}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldEnum.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,eAAiC;AACxC,OAAO,cAAc;AAWrB,qBAAqB,kBAAkB,MAAM,UAA0B;AAAA,EACrE,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC9D,8BAAC,aAAW,GAAG,KAAK,OAAO,GAC7B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5745e67ee75c0f352c022256ef8bf31e8fa7367f"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return D2=function(){return l},l}D2();class Rue extends sr.Component{render(){return D2().f[0]++,D2().s[0]++,le.jsx(TC,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(VO,{...this.props})})}}function F2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",e="4d9e98bd5e7819496a7ef6b66981b81e318fe1bf",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:162}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldColor.tsx"],names:[],mappings:"AAgBM;AAhBN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,gBAAmC;AAW1C,qBAAqB,mBAAmB,MAAM,UAA2B;AAAA,EACvE,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAAO,WAAW,KAAK,MAAM,WAC3D,8BAAC,cAAY,GAAG,KAAK,OAAO,GAC9B;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4d9e98bd5e7819496a7ef6b66981b81e318fe1bf"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return F2=function(){return l},l}F2();class Due extends sr.Component{render(){return F2().f[0]++,F2().s[0]++,le.jsx(pa,{label:this.props.label,fieldSpec:this.props.fieldSpec,children:le.jsx(Cj,{...this.props})})}}function PC(){var n="/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",e="3f2b222219042b3cb4a75b927d846ca17e6201aa",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts",statementMap:{0:{start:{line:1,column:13},end:{line:26,column:2}},1:{start:{line:1,column:21},end:{line:26,column:1}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:1,column:13},end:{line:1,column:14}},loc:{start:{line:1,column:21},end:{line:26,column:1}},line:1}},branchMap:{},s:{0:0,1:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/field-spec-additional.ts"],names:[],mappings:"AAEA,MAAM,OAAO,CAAC,OAAkB;AAAA,EAC9B,UAAU;AAAA,IACR,uBAAuB;AAAA,MACrB,OAAO,EAAE,uBAAuB;AAAA,MAChC,KAAK,EAAE,yCAAyC;AAAA,MAChD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,4BAA4B;AAAA,MAC1B,OAAO,EAAE,4BAA4B;AAAA,MACrC,KAAK,EAAE,iDAAiD;AAAA,MACxD,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,qBAAqB;AAAA,MACnB,OAAO,EAAE,qBAAqB;AAAA,MAC9B,KAAK,EAAE,0BAA0B;AAAA,MACjC,QAAQ;AAAA,MACR,gBAAgB,EAAE,YAAY;AAAA,IAChC;AAAA,IACA,gBAAgB;AAAA,MACd,OAAO,EAAE,gBAAgB;AAAA,MACzB,KAAK,EAAE,sDAAsD;AAAA,IAC/D;AAAA,EACF;AACF;AAEA,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3f2b222219042b3cb4a75b927d846ca17e6201aa"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return PC=function(){return l},l}PC();PC().s[0]++;const Rj=n=>(PC().f[0]++,PC().s[1]++,{maputnik:{maptiler_access_token:{label:n("MapTiler Access Token"),doc:n("Public access token for MapTiler Cloud."),docUrl:"https://docs.maptiler.com/cloud/api/authentication-key/",docUrlLinkText:n("Learn More")},thunderforest_access_token:{label:n("Thunderforest Access Token"),doc:n("Public access token for Thunderforest services."),docUrl:"https://www.thunderforest.com/docs/apikeys/",docUrlLinkText:n("Learn More")},stadia_access_token:{label:n("Stadia Maps API Key"),doc:n("API key for Stadia Maps."),docUrl:"https://docs.stadiamaps.com/authentication/",docUrlLinkText:n("Learn More")},style_renderer:{label:n("Style Renderer"),doc:n("Choose the default Maputnik renderer for this style.")}}});function Li(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",e="2bfcb2bc337b915a29f70f26bbf03f5047260e49",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx",statementMap:{0:{start:{line:16,column:23},end:{line:18,column:5}},1:{start:{line:19,column:4},end:{line:23,column:5}},2:{start:{line:20,column:6},end:{line:20,column:34}},3:{start:{line:22,column:6},end:{line:22,column:35}},4:{start:{line:24,column:4},end:{line:27,column:7}},5:{start:{line:30,column:18},end:{line:32,column:5}},6:{start:{line:33,column:4},end:{line:37,column:5}},7:{start:{line:34,column:6},end:{line:34,column:29}},8:{start:{line:36,column:6},end:{line:36,column:30}},9:{start:{line:38,column:4},end:{line:41,column:7}},10:{start:{line:44,column:20},end:{line:46,column:5}},11:{start:{line:47,column:4},end:{line:51,column:5}},12:{start:{line:48,column:6},end:{line:48,column:31}},13:{start:{line:50,column:6},end:{line:50,column:32}},14:{start:{line:52,column:4},end:{line:55,column:7}},15:{start:{line:58,column:25},end:{line:60,column:5}},16:{start:{line:61,column:4},end:{line:65,column:5}},17:{start:{line:62,column:6},end:{line:62,column:36}},18:{start:{line:64,column:6},end:{line:64,column:37}},19:{start:{line:66,column:4},end:{line:66,column:44}},20:{start:{line:69,column:21},end:{line:69,column:55}},21:{start:{line:70,column:54},end:{line:70,column:64}},22:{start:{line:71,column:16},end:{line:71,column:38}},23:{start:{line:72,column:18},end:{line:72,column:49}},24:{start:{line:73,column:23},end:{line:73,column:59}},25:{start:{line:74,column:20},end:{line:74,column:53}},26:{start:{line:75,column:4},end:{line:295,column:6}},27:{start:{line:298,column:22},end:{line:298,column:62}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:44},end:{line:28,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:39},end:{line:42,column:3}},line:29},2:{name:"(anonymous_2)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:41},end:{line:56,column:3}},line:43},3:{name:"(anonymous_3)",decl:{start:{line:57,column:2},end:{line:57,column:3}},loc:{start:{line:57,column:39},end:{line:67,column:3}},line:57},4:{name:"(anonymous_4)",decl:{start:{line:68,column:2},end:{line:68,column:3}},loc:{start:{line:68,column:11},end:{line:296,column:3}},line:68}},branchMap:{0:{loc:{start:{line:19,column:4},end:{line:23,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:23,column:5}},{start:{line:21,column:11},end:{line:23,column:5}}],line:19},1:{loc:{start:{line:33,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:33,column:4},end:{line:37,column:5}},{start:{line:35,column:11},end:{line:37,column:5}}],line:33},2:{loc:{start:{line:47,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:51,column:5}},{start:{line:49,column:11},end:{line:51,column:5}}],line:47},3:{loc:{start:{line:61,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:61,column:4},end:{line:65,column:5}},{start:{line:63,column:11},end:{line:65,column:5}}],line:61},4:{loc:{start:{line:69,column:21},end:{line:69,column:55}},type:"binary-expr",locations:[{start:{line:69,column:21},end:{line:69,column:49}},{start:{line:69,column:53},end:{line:69,column:55}}],line:69},5:{loc:{start:{line:72,column:18},end:{line:72,column:49}},type:"binary-expr",locations:[{start:{line:72,column:18},end:{line:72,column:43}},{start:{line:72,column:47},end:{line:72,column:49}}],line:72},6:{loc:{start:{line:73,column:23},end:{line:73,column:59}},type:"binary-expr",locations:[{start:{line:73,column:23},end:{line:73,column:53}},{start:{line:73,column:57},end:{line:73,column:59}}],line:73},7:{loc:{start:{line:74,column:20},end:{line:74,column:53}},type:"binary-expr",locations:[{start:{line:74,column:20},end:{line:74,column:47}},{start:{line:74,column:51},end:{line:74,column:53}}],line:74},8:{loc:{start:{line:160,column:21},end:{line:160,column:42}},type:"binary-expr",locations:[{start:{line:160,column:21},end:{line:160,column:36}},{start:{line:160,column:40},end:{line:160,column:42}}],line:160},9:{loc:{start:{line:289,column:21},end:{line:289,column:62}},type:"binary-expr",locations:[{start:{line:289,column:21},end:{line:289,column:50}},{start:{line:289,column:54},end:{line:289,column:62}}],line:289}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSettings.tsx"],names:[],mappings:"AA+GM,SACE,KADF;AA/GN,OAAO,WAAW;AAClB,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,gBAAgB;AACvB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,eAAe;AACtB,OAAO,gBAAgB;AACvB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAUhC,MAAM,8BAA8B,MAAM,UAAsC;AAAA,EAC9E,yBAAyB,UAAyC,OAA2B;AAC3F,UAAM,aAAa;AAAA,MACjB,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,WAAW,QAAQ;AAAA,IAC5B,OACK;AACH,iBAAW,QAAQ,IAAI;AAAA,IACzB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAAoC,OAAY;AAClE,UAAM,QAAQ;AAAA,MACZ,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,MAAM,QAAQ;AAAA,IACvB,OACK;AAEH,YAAM,QAAQ,IAAI;AAAA,IACpB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,UAAsC,OAAY;AACtE,UAAM,UAAU;AAAA,MACd,GAAG,KAAK,MAAM,SAAS;AAAA,IACzB;AAEA,QAAI,UAAU,QAAW;AACvB,aAAO,QAAQ,QAAQ;AAAA,IACzB,OACK;AAEH,cAAQ,QAAQ,IAAI;AAAA,IACtB;AAEA,SAAK,MAAM,eAAe;AAAA,MACxB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,oBAAoB,UAA8C,OAAY;AAC5E,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,IAChB;AAEA,QAAI,UAAU,QAAW;AAEvB,aAAO,aAAa,QAAQ;AAAA,IAC9B,OACK;AAEH,mBAAa,QAAQ,IAAI;AAAA,IAC3B;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAEA,SAAS;AACP,UAAM,WAAW,KAAK,MAAM,SAAS,YAAY,CAAC;AAClD,UAAM,EAAC,GAAG,0BAA0B,SAAQ,IAAI,KAAK;AACrD,UAAM,MAAM,oBAAoB,CAAC;AAEjC,UAAM,QAAQ,KAAK,MAAM,SAAS,SAAS,CAAC;AAC5C,UAAM,aAAa,KAAK,MAAM,SAAS,cAAc,CAAC;AACtD,UAAM,UAAU,KAAK,MAAM,SAAS,WAAW,CAAC;AAEhD,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,gBAAgB;AAAA,QAEzB,+BAAC,SAAI,WAAU,kBACb;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,EAAC,KAAK,EAAE,6DAA6D,EAAC;AAAA,cACjF,eAAY;AAAA,cACZ,OAAQ,KAAK,MAAM,SAAiB;AAAA,cACpC,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,EAAE,YAAY;AAAA,cACrB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,YAAY;AAAA,cACrB,WAAW,OAAO,MAAM;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,KAAK,MAAM,SAAS;AAAA,cAC3B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,cAC1C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,oCAAoC;AAAA,cACpD,UAAU,yBAAyB,KAAK,MAAM,oCAAoC;AAAA;AAAA,UACpF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,cAC/C,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,qCAAqC;AAAA,cACrD,UAAU,yBAAyB,KAAK,MAAM,qCAAqC;AAAA;AAAA,UACrF;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,cACxC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,OAAO,SAAS,8BAA8B;AAAA,cAC9C,UAAU,yBAAyB,KAAK,MAAM,8BAA8B;AAAA;AAAA,UAC9E;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,QAAQ;AAAA,cACjB,WAAW,OAAO,MAAM;AAAA,cACxB,QAAQ;AAAA,cACR,MAAK;AAAA,cACL,OAAO,SAAS,UAAU,CAAC;AAAA,cAC3B,SAAS,CAAC,GAAG,CAAC;AAAA,cACd,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,MAAM;AAAA,cACf,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS;AAAA,cACT,UAAU,KAAK,oBAAoB,KAAK,MAAM,MAAM;AAAA;AAAA,UACtD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,SAAS;AAAA,cAClB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,QAAQ;AAAA,cAC9B,UAAU,KAAK,oBAAoB,KAAK,MAAM,SAAS;AAAA;AAAA,UACzD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,OAAO;AAAA,cAChB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,SAAS;AAAA,cAChB,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,cAAc;AAAA,cACvB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,cAC/C,SAAS,OAAO,MAAM,OAAO;AAAA,cAC7B,UAAU,KAAK,oBAAoB,KAAK,MAAM,QAAQ;AAAA;AAAA,UACxD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,aAAa;AAAA,cACtB,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,MAAM;AAAA,cAC5B,UAAU,KAAK,oBAAoB,KAAK,MAAM,OAAO;AAAA;AAAA,UACvD;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,iBAAiB;AAAA,cAC1B,WAAW,OAAO,MAAM;AAAA,cACxB,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,UAAU;AAAA,cAChC,UAAU,KAAK,oBAAoB,KAAK,MAAM,WAAW;AAAA;AAAA,UAC3D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,MAAM;AAAA,cACxB,MAAK;AAAA,cACL,QAAQ,OAAO,MAAM,SAAS;AAAA,cAC9B,OAAO,MAAM;AAAA,cACb,SAAS,OAAO,MAAM,SAAS;AAAA,cAC/B,UAAU,KAAK,oBAAoB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,gBAAgB;AAAA,cACzB,WAAW,OAAO,QAAQ;AAAA,cAC1B,eAAY;AAAA,cACZ,OAAO,QAAQ;AAAA,cACf,UAAU,KAAK,sBAAsB,KAAK,MAAM,QAAQ;AAAA;AAAA,UAC1D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,sBAAsB;AAAA,cAC/B,WAAW,OAAO,QAAQ;AAAA,cAC1B,OAAO,QAAQ;AAAA,cACf,SAAS,OAAO,QAAQ,aAAa;AAAA,cACrC,UAAU,KAAK,sBAAsB,KAAK,MAAM,cAAc;AAAA;AAAA,UAChE;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,kBAAkB;AAAA,cAC3B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,MAAM;AAAA,cACjC,UAAU,KAAK,yBAAyB,KAAK,MAAM,OAAO;AAAA;AAAA,UAC5D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,qBAAqB;AAAA,cAC9B,WAAW,OAAO,WAAW;AAAA,cAC7B,OAAO,WAAW;AAAA,cAClB,SAAS,OAAO,WAAW,SAAS;AAAA,cACpC,UAAU,KAAK,yBAAyB,KAAK,MAAM,UAAU;AAAA;AAAA,UAC/D;AAAA,UAEA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,IAAI,SAAS,eAAe;AAAA,cACnC,WAAW,IAAI,SAAS;AAAA,cACxB,eAAY;AAAA,cACZ,SAAS;AAAA,gBACP,CAAC,UAAU,eAAe;AAAA,gBAC1B,CAAC,MAAM,EAAE,4BAA4B,CAAC;AAAA,cACxC;AAAA,cACA,OAAO,SAAS,mBAAmB,KAAK;AAAA,cACxC,UAAU,yBAAyB,KAAK,MAAM,mBAAmB;AAAA;AAAA,UACnE;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,gBAAgB,gBAAgB,EAAE,qBAAqB;AAC7D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2bfcb2bc337b915a29f70f26bbf03f5047260e49"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Li=function(){return l},l}Li();class Fue extends sr.Component{changeTransitionProperty(e,t){Li().f[0]++;const r=(Li().s[0]++,{...this.props.mapStyle.transition});Li().s[1]++,t===void 0?(Li().b[0][0]++,Li().s[2]++,delete r[e]):(Li().b[0][1]++,Li().s[3]++,r[e]=t),Li().s[4]++,this.props.onStyleChanged({...this.props.mapStyle,transition:r})}changeLightProperty(e,t){Li().f[1]++;const r=(Li().s[5]++,{...this.props.mapStyle.light});Li().s[6]++,t===void 0?(Li().b[1][0]++,Li().s[7]++,delete r[e]):(Li().b[1][1]++,Li().s[8]++,r[e]=t),Li().s[9]++,this.props.onStyleChanged({...this.props.mapStyle,light:r})}changeTerrainProperty(e,t){Li().f[2]++;const r=(Li().s[10]++,{...this.props.mapStyle.terrain});Li().s[11]++,t===void 0?(Li().b[2][0]++,Li().s[12]++,delete r[e]):(Li().b[2][1]++,Li().s[13]++,r[e]=t),Li().s[14]++,this.props.onStyleChanged({...this.props.mapStyle,terrain:r})}changeStyleProperty(e,t){Li().f[3]++;const r=(Li().s[15]++,{...this.props.mapStyle});Li().s[16]++,t===void 0?(Li().b[3][0]++,Li().s[17]++,delete r[e]):(Li().b[3][1]++,Li().s[18]++,r[e]=t),Li().s[19]++,this.props.onStyleChanged(r)}render(){Li().f[4]++;const e=(Li().s[20]++,Li().b[4][0]++,this.props.mapStyle.metadata||(Li().b[4][1]++,{})),{t,onChangeMetadataProperty:r,mapStyle:i}=(Li().s[21]++,this.props),s=(Li().s[22]++,Rj(t)),l=(Li().s[23]++,Li().b[5][0]++,this.props.mapStyle.light||(Li().b[5][1]++,{})),o=(Li().s[24]++,Li().b[6][0]++,this.props.mapStyle.transition||(Li().b[6][1]++,{})),p=(Li().s[25]++,Li().b[7][0]++,this.props.mapStyle.terrain||(Li().b[7][1]++,{}));return Li().s[26]++,le.jsx(L0,{"data-wd-key":"modal:settings",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:t("Style Settings"),children:le.jsxs("div",{className:"modal:settings",children:[le.jsx(jp,{label:t("Name"),fieldSpec:qo.$root.name,"data-wd-key":"modal:settings.name",value:this.props.mapStyle.name,onChange:this.changeStyleProperty.bind(this,"name")}),le.jsx(jp,{label:t("Owner"),fieldSpec:{doc:t("Owner ID of the style. Used by Mapbox or future style APIs.")},"data-wd-key":"modal:settings.owner",value:this.props.mapStyle.owner,onChange:this.changeStyleProperty.bind(this,"owner")}),le.jsx(Ey,{fieldSpec:qo.$root.sprite,label:t("Sprite URL"),"data-wd-key":"modal:settings.sprite",value:this.props.mapStyle.sprite,onChange:this.changeStyleProperty.bind(this,"sprite")}),le.jsx(Ey,{label:t("Glyphs URL"),fieldSpec:qo.$root.glyphs,"data-wd-key":"modal:settings.glyphs",value:this.props.mapStyle.glyphs,onChange:this.changeStyleProperty.bind(this,"glyphs")}),le.jsx(jp,{label:s.maputnik.maptiler_access_token.label,fieldSpec:s.maputnik.maptiler_access_token,"data-wd-key":"modal:settings.maputnik:openmaptiles_access_token",value:e["maputnik:openmaptiles_access_token"],onChange:r.bind(this,"maputnik:openmaptiles_access_token")}),le.jsx(jp,{label:s.maputnik.thunderforest_access_token.label,fieldSpec:s.maputnik.thunderforest_access_token,"data-wd-key":"modal:settings.maputnik:thunderforest_access_token",value:e["maputnik:thunderforest_access_token"],onChange:r.bind(this,"maputnik:thunderforest_access_token")}),le.jsx(jp,{label:s.maputnik.stadia_access_token.label,fieldSpec:s.maputnik.stadia_access_token,"data-wd-key":"modal:settings.maputnik:stadia_access_token",value:e["maputnik:stadia_access_token"],onChange:r.bind(this,"maputnik:stadia_access_token")}),le.jsx(k2,{label:t("Center"),fieldSpec:qo.$root.center,length:2,type:"number",value:(Li().b[8][0]++,i.center||(Li().b[8][1]++,[])),default:[0,0],onChange:this.changeStyleProperty.bind(this,"center")}),le.jsx(up,{label:t("Zoom"),fieldSpec:qo.$root.zoom,value:i.zoom,default:0,onChange:this.changeStyleProperty.bind(this,"zoom")}),le.jsx(up,{label:t("Bearing"),fieldSpec:qo.$root.bearing,value:i.bearing,default:qo.$root.bearing.default,onChange:this.changeStyleProperty.bind(this,"bearing")}),le.jsx(up,{label:t("Pitch"),fieldSpec:qo.$root.pitch,value:i.pitch,default:qo.$root.pitch.default,onChange:this.changeStyleProperty.bind(this,"pitch")}),le.jsx(Rue,{label:t("Light anchor"),fieldSpec:qo.light.anchor,name:"light-anchor",value:l.anchor,options:Object.keys(qo.light.anchor.values),default:qo.light.anchor.default,onChange:this.changeLightProperty.bind(this,"anchor")}),le.jsx(Due,{label:t("Light color"),fieldSpec:qo.light.color,value:l.color,default:qo.light.color.default,onChange:this.changeLightProperty.bind(this,"color")}),le.jsx(up,{label:t("Light intensity"),fieldSpec:qo.light.intensity,value:l.intensity,default:qo.light.intensity.default,onChange:this.changeLightProperty.bind(this,"intensity")}),le.jsx(k2,{label:t("Light position"),fieldSpec:qo.light.position,type:"number",length:qo.light.position.length,value:l.position,default:qo.light.position.default,onChange:this.changeLightProperty.bind(this,"position")}),le.jsx(jp,{label:t("Terrain source"),fieldSpec:qo.terrain.source,"data-wd-key":"modal:settings.maputnik:terrain_source",value:p.source,onChange:this.changeTerrainProperty.bind(this,"source")}),le.jsx(up,{label:t("Terrain exaggeration"),fieldSpec:qo.terrain.exaggeration,value:p.exaggeration,default:qo.terrain.exaggeration.default,onChange:this.changeTerrainProperty.bind(this,"exaggeration")}),le.jsx(up,{label:t("Transition delay"),fieldSpec:qo.transition.delay,value:o.delay,default:qo.transition.delay.default,onChange:this.changeTransitionProperty.bind(this,"delay")}),le.jsx(up,{label:t("Transition duration"),fieldSpec:qo.transition.duration,value:o.duration,default:qo.transition.duration.default,onChange:this.changeTransitionProperty.bind(this,"duration")}),le.jsx(e3,{label:s.maputnik.style_renderer.label,fieldSpec:s.maputnik.style_renderer,"data-wd-key":"modal:settings.maputnik:renderer",options:[["mlgljs","MapLibreGL JS"],["ol",t("Open Layers (experimental)")]],value:(Li().b[9][0]++,e["maputnik:renderer"]||(Li().b[9][1]++,"mlgljs")),onChange:r.bind(this,"maputnik:renderer")})]})})}}const Lue=(Li().s[27]++,Ws()(Fue));var Tb={exports:{}},Uue=Tb.exports,AR;function zue(){return AR||(AR=1,function(n,e){(function(t,r,i){n.exports=i(),n.exports.default=i()})("slugify",Uue,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),r=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function i(s,l){if(typeof s!="string")throw new Error("slugify: string argument expected");l=typeof l=="string"?{replacement:l}:l||{};var o=r[l.locale]||{},p=l.replacement===void 0?"-":l.replacement,v=l.trim===void 0?!0:l.trim,x=s.normalize().split("").reduce(function(B,T){var P=o[T];return P===void 0&&(P=t[T]),P===void 0&&(P=T),P===p&&(P=" "),B+P.replace(l.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return l.strict&&(x=x.replace(/[^A-Za-z0-9\s]/g,"")),v&&(x=x.trim()),x=x.replace(/\s+/g,p),l.lower&&(x=x.toLowerCase()),x}return i.extend=function(s){Object.assign(t,s)},i})}(Tb)),Tb.exports}var jue=zue();const Nue=yl(jue);var Pb={exports:{}},Wue=Pb.exports,cR;function Gue(){return cR||(cR=1,function(n,e){(function(t,r){r()})(Wue,function(){function t(v,x){return typeof x>"u"?x={autoBom:!1}:typeof x!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),x={autoBom:!x}),x.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(v.type)?new Blob(["\uFEFF",v],{type:v.type}):v}function r(v,x,B){var T=new XMLHttpRequest;T.open("GET",v),T.responseType="blob",T.onload=function(){p(T.response,x,B)},T.onerror=function(){console.error("could not download file")},T.send()}function i(v){var x=new XMLHttpRequest;x.open("HEAD",v,!1);try{x.send()}catch{}return 200<=x.status&&299>=x.status}function s(v){try{v.dispatchEvent(new MouseEvent("click"))}catch{var x=document.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),v.dispatchEvent(x)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof window=="object"&&window.global===window?window:void 0,o=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),p=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(v,x,B){var T=l.URL||l.webkitURL,P=document.createElement("a");x=x||v.name||"download",P.download=x,P.rel="noopener",typeof v=="string"?(P.href=v,P.origin===location.origin?s(P):i(P.href)?r(v,x,B):s(P,P.target="_blank")):(P.href=T.createObjectURL(v),setTimeout(function(){T.revokeObjectURL(P.href)},4e4),setTimeout(function(){s(P)},0))}:"msSaveOrOpenBlob"in navigator?function(v,x,B){if(x=x||v.name||"download",typeof v!="string")navigator.msSaveOrOpenBlob(t(v,B),x);else if(i(v))r(v,x,B);else{var T=document.createElement("a");T.href=v,T.target="_blank",setTimeout(function(){s(T)})}}:function(v,x,B,T){if(T=T||open("","_blank"),T&&(T.document.title=T.document.body.innerText="downloading..."),typeof v=="string")return r(v,x,B);var P=v.type==="application/octet-stream",U=/constructor/i.test(l.HTMLElement)||l.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||P&&U||o)&&typeof FileReader<"u"){var N=new FileReader;N.onloadend=function(){var oe=N.result;oe=j?oe:oe.replace(/^data:[^;]*;/,"data:attachment/file;"),T?T.location.href=oe:location=oe,T=null},N.readAsDataURL(v)}else{var q=l.URL||l.webkitURL,H=q.createObjectURL(v);T?T.location=H:location.href=H,T=null,setTimeout(function(){q.revokeObjectURL(H)},4e4)}});l.saveAs=p.saveAs=p,n.exports=p})}(Pb)),Pb.exports}var dR=Gue();const Que="5.3.0",Yue="get_your_own_OpIi9ZULNHzrESv6T2vL",que="b71f7f0ba4064f5eb9e903859a9cf5c6",Dj={openmaptiles:Yue,thunderforest:que};function cr(){var n="/home/runner/work/maputnik/maputnik/src/libs/style.ts",e="c162664fcb147ac7caff0efb860cd8a0c7d435d1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/style.ts",statementMap:{0:{start:{line:3,column:19},end:{line:7,column:2}},1:{start:{line:9,column:2},end:{line:9,column:52}},2:{start:{line:12,column:2},end:{line:15,column:3}},3:{start:{line:13,column:4},end:{line:13,column:28}},4:{start:{line:14,column:4},end:{line:14,column:17}},5:{start:{line:16,column:2},end:{line:16,column:15}},6:{start:{line:19,column:24},end:{line:23,column:4}},7:{start:{line:20,column:25},end:{line:20,column:37}},8:{start:{line:21,column:4},end:{line:21,column:36}},9:{start:{line:22,column:4},end:{line:22,column:24}},10:{start:{line:24,column:2},end:{line:27,column:4}},11:{start:{line:30,column:2},end:{line:33,column:4}},12:{start:{line:36,column:2},end:{line:36,column:69}},13:{start:{line:39,column:2},end:{line:43,column:3}},14:{start:{line:39,column:15},end:{line:39,column:16}},15:{start:{line:40,column:4},end:{line:42,column:5}},16:{start:{line:41,column:6},end:{line:41,column:15}},17:{start:{line:44,column:2},end:{line:44,column:14}},18:{start:{line:47,column:19},end:{line:47,column:42}},19:{start:{line:48,column:20},end:{line:48,column:67}},20:{start:{line:49,column:2},end:{line:51,column:3}},21:{start:{line:50,column:4},end:{line:50,column:37}},22:{start:{line:52,column:2},end:{line:52,column:21}},23:{start:{line:55,column:17},end:{line:55,column:45}},24:{start:{line:56,column:2},end:{line:56,column:31}},25:{start:{line:56,column:15},end:{line:56,column:31}},26:{start:{line:57,column:2},end:{line:57,column:57}},27:{start:{line:57,column:41},end:{line:57,column:57}},28:{start:{line:58,column:23},end:{line:58,column:33}},29:{start:{line:59,column:2},end:{line:63,column:3}},30:{start:{line:60,column:4},end:{line:60,column:37}},31:{start:{line:61,column:9},end:{line:63,column:3}},32:{start:{line:62,column:4},end:{line:62,column:30}},33:{start:{line:64,column:22},end:{line:64,column:68}},34:{start:{line:65,column:2},end:{line:67,column:3}},35:{start:{line:66,column:4},end:{line:66,column:20}},36:{start:{line:69,column:2},end:{line:73,column:3}},37:{start:{line:70,column:4},end:{line:70,column:55}},38:{start:{line:72,column:4},end:{line:72,column:57}},39:{start:{line:74,column:25},end:{line:80,column:3}},40:{start:{line:81,column:23},end:{line:84,column:3}},41:{start:{line:85,column:2},end:{line:85,column:22}},42:{start:{line:88,column:21},end:{line:88,column:29}},43:{start:{line:89,column:2},end:{line:91,column:5}},44:{start:{line:90,column:4},end:{line:90,column:76}},45:{start:{line:92,column:2},end:{line:100,column:3}},46:{start:{line:93,column:27},end:{line:93,column:73}},47:{start:{line:94,column:4},end:{line:99,column:5}},48:{start:{line:95,column:6},end:{line:98,column:8}},49:{start:{line:101,column:2},end:{line:101,column:22}},50:{start:{line:104,column:26},end:{line:106,column:3}},51:{start:{line:107,column:2},end:{line:107,column:63}},52:{start:{line:108,column:2},end:{line:108,column:64}},53:{start:{line:109,column:2},end:{line:109,column:57}},54:{start:{line:110,column:2},end:{line:113,column:4}}},fnMap:{0:{name:"generateId",decl:{start:{line:8,column:9},end:{line:8,column:19}},loc:{start:{line:8,column:22},end:{line:10,column:1}},line:8},1:{name:"ensureHasId",decl:{start:{line:11,column:9},end:{line:11,column:20}},loc:{start:{line:11,column:28},end:{line:17,column:1}},line:11},2:{name:"ensureHasNoInteractive",decl:{start:{line:18,column:9},end:{line:18,column:31}},loc:{start:{line:18,column:39},end:{line:28,column:1}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:19,column:41},end:{line:19,column:42}},loc:{start:{line:19,column:52},end:{line:23,column:3}},line:19},4:{name:"ensureHasNoRefs",decl:{start:{line:29,column:9},end:{line:29,column:24}},loc:{start:{line:29,column:32},end:{line:34,column:1}},line:29},5:{name:"ensureStyleValidity",decl:{start:{line:35,column:9},end:{line:35,column:28}},loc:{start:{line:35,column:36},end:{line:37,column:1}},line:35},6:{name:"indexOfLayer",decl:{start:{line:38,column:9},end:{line:38,column:21}},loc:{start:{line:38,column:39},end:{line:45,column:1}},line:38},7:{name:"getAccessToken",decl:{start:{line:46,column:9},end:{line:46,column:23}},loc:{start:{line:46,column:52},end:{line:53,column:1}},line:46},8:{name:"replaceSourceAccessToken",decl:{start:{line:54,column:9},end:{line:54,column:33}},loc:{start:{line:54,column:67},end:{line:86,column:1}},line:54},9:{name:"replaceAccessTokens",decl:{start:{line:87,column:9},end:{line:87,column:28}},loc:{start:{line:87,column:50},end:{line:102,column:1}},line:87},10:{name:"(anonymous_10)",decl:{start:{line:89,column:40},end:{line:89,column:41}},loc:{start:{line:89,column:56},end:{line:91,column:3}},line:89},11:{name:"stripAccessTokens",decl:{start:{line:103,column:9},end:{line:103,column:26}},loc:{start:{line:103,column:37},end:{line:114,column:1}},line:103}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:15,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:15,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},1:{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:35}}],line:12},2:{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:40},3:{loc:{start:{line:47,column:19},end:{line:47,column:42}},type:"binary-expr",locations:[{start:{line:47,column:19},end:{line:47,column:36}},{start:{line:47,column:40},end:{line:47,column:42}}],line:47},4:{loc:{start:{line:49,column:2},end:{line:51,column:3}},type:"if",locations:[{start:{line:49,column:2},end:{line:51,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:49,column:6},end:{line:49,column:40}},type:"binary-expr",locations:[{start:{line:49,column:6},end:{line:49,column:24}},{start:{line:49,column:28},end:{line:49,column:40}}],line:49},6:{loc:{start:{line:54,column:56},end:{line:54,column:65}},type:"default-arg",locations:[{start:{line:54,column:63},end:{line:54,column:65}}],line:54},7:{loc:{start:{line:56,column:2},end:{line:56,column:31}},type:"if",locations:[{start:{line:56,column:2},end:{line:56,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},8:{loc:{start:{line:57,column:2},end:{line:57,column:57}},type:"if",locations:[{start:{line:57,column:2},end:{line:57,column:57}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},9:{loc:{start:{line:57,column:6},end:{line:57,column:39}},type:"binary-expr",locations:[{start:{line:57,column:6},end:{line:57,column:24}},{start:{line:57,column:28},end:{line:57,column:39}}],line:57},10:{loc:{start:{line:59,column:2},end:{line:63,column:3}},type:"if",locations:[{start:{line:59,column:2},end:{line:63,column:3}},{start:{line:61,column:9},end:{line:63,column:3}}],line:59},11:{loc:{start:{line:59,column:6},end:{line:59,column:89}},type:"binary-expr",locations:[{start:{line:59,column:6},end:{line:59,column:46}},{start:{line:59,column:50},end:{line:59,column:89}}],line:59},12:{loc:{start:{line:61,column:9},end:{line:63,column:3}},type:"if",locations:[{start:{line:61,column:9},end:{line:63,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:61},13:{loc:{start:{line:61,column:13},end:{line:61,column:70}},type:"binary-expr",locations:[{start:{line:61,column:13},end:{line:61,column:28}},{start:{line:61,column:32},end:{line:61,column:70}}],line:61},14:{loc:{start:{line:65,column:2},end:{line:67,column:3}},type:"if",locations:[{start:{line:65,column:2},end:{line:67,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:65},15:{loc:{start:{line:69,column:2},end:{line:73,column:3}},type:"if",locations:[{start:{line:69,column:2},end:{line:73,column:3}},{start:{line:71,column:9},end:{line:73,column:3}}],line:69},16:{loc:{start:{line:87,column:39},end:{line:87,column:48}},type:"default-arg",locations:[{start:{line:87,column:46},end:{line:87,column:48}}],line:87},17:{loc:{start:{line:92,column:2},end:{line:100,column:3}},type:"if",locations:[{start:{line:92,column:2},end:{line:100,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:92},18:{loc:{start:{line:92,column:6},end:{line:92,column:114}},type:"binary-expr",locations:[{start:{line:92,column:6},end:{line:92,column:21}},{start:{line:92,column:26},end:{line:92,column:69}},{start:{line:92,column:73},end:{line:92,column:113}}],line:92},19:{loc:{start:{line:94,column:4},end:{line:99,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:99,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:94}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0],17:[0,0],18:[0,0,0],19:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/style.ts"],names:[],mappings:"AAAA,SAAQ,mBAAkB;AAE1B,OAAO,YAAY;AAGnB,MAAM,aAAa,oBAAoB;AAAA,EACrC,SAAS;AAAA,EACT,SAAS,CAAC;AAAA,EACV,QAAQ,CAAC;AACX,CAAC;AAED,SAAS,aAAa;AACpB,SAAO,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAClD;AAEA,SAAS,YAAY,OAAkF;AACrG,MAAG,EAAE,QAAQ,UAAU,CAAC,MAAM,IAAI;AAChC,UAAM,KAAK,WAAW;AACtB,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,SAAS,uBAAuB,OAA0C;AACxE,QAAM,gBAAgB,MAAM,OAAO,IAAI,WAAS;AAC9C,UAAM,eAA2D,EAAE,GAAG,MAAM;AAC5E,WAAO,aAAa;AACpB,WAAO;AAAA,EACT,CAAC;AAED,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ;AAAA,EACV;AACF;AAEA,SAAS,gBAAgB,OAA0C;AACjE,SAAO;AAAA,IACL,GAAG;AAAA,IACH,QAAQ,YAAY,MAAM,MAAM;AAAA,EAClC;AACF;AAEA,SAAS,oBAAoB,OAAgE;AAC3F,SAAO,uBAAuB,gBAAgB,YAAY,KAAK,CAAC,CAAC;AACnE;AAEA,SAAS,aAAa,QAA8B,SAAiB;AACnE,WAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACtC,QAAG,OAAO,CAAC,EAAE,OAAO,SAAS;AAC3B,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,eAAe,YAAoB,UAA8B,MAAiC;AACzG,QAAM,WAAW,SAAS,YAAY,CAAC;AACvC,MAAI,cAAc,SAAS,YAAY,UAAU,eAAe;AAEhE,MAAG,KAAK,iBAAiB,CAAC,aAAa;AACrC,kBAAc,OAAO,UAAiC;AAAA,EACxD;AAEA,SAAO;AACT;AAEA,SAAS,yBAAyB,UAA8B,YAAoB,OAAK,CAAC,GAAG;AAC3F,QAAM,SAAS,SAAS,QAAQ,UAAU;AAC1C,MAAG,CAAC,OAAQ,QAAO;AACnB,MAAG,EAAE,SAAS,WAAW,CAAC,OAAO,IAAK,QAAO;AAE7C,MAAI,iBAAiB;AACrB,MAAG,eAAe,6BAA6B,eAAe,0BAA0B;AACtF,qBAAiB;AAAA,EACnB,WACU,SAAS,UAAW,OAAO,KAAK,MAAM,mBAAmB,GAAG;AAGpE,qBAAiB;AAAA,EACnB;AAEA,QAAM,cAAc,eAAe,gBAAgB,UAAU,IAAI;AAEjE,MAAG,CAAC,aAAa;AAEf,WAAO;AAAA,EACT;AAEA,MAAI;AACJ,MAAI,kBAAkB,UAAU;AAI9B,gBAAY,GAAG,OAAO,GAAG,YAAY,WAAW;AAAA,EAClD,OAAO;AACL,gBAAY,OAAO,IAAI,QAAQ,SAAS,WAAW;AAAA,EACrD;AAEA,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,UAAU,GAAG;AAAA,MACZ,GAAG;AAAA,MACH,KAAK;AAAA,IACP;AAAA,EACF;AACA,QAAM,eAAe;AAAA,IACnB,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACA,SAAO;AACT;AAEA,SAAS,oBAAoB,UAA8B,OAAK,CAAC,GAAG;AAClE,MAAI,eAAe;AAEnB,SAAO,KAAK,SAAS,OAAO,EAAE,QAAQ,CAAC,eAAe;AACpD,mBAAe,yBAAyB,cAAc,YAAY,IAAI;AAAA,EACxE,CAAC;AAED,MAAI,SAAS,WAAW,SAAS,OAAO,MAAM,oBAAoB,KAAK,SAAS,OAAO,MAAM,iBAAiB,IAAI;AAChH,UAAM,iBAAiB,eAAe,gBAAgB,UAAU,IAAI;AACpE,QAAI,gBAAgB;AAClB,qBAAe;AAAA,QACb,GAAG;AAAA,QACH,QAAQ,SAAS,OAAO,QAAQ,SAAS,cAAc;AAAA,MACzD;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBAAkB,UAA8B;AACvD,QAAM,kBAAkB;AAAA,IACtB,GAAG,SAAS;AAAA,EACd;AACA,SAAO,gBAAgB,oCAAoC;AAC3D,SAAO,gBAAgB,qCAAqC;AAC5D,SAAO,gBAAgB,8BAA8B;AACrD,SAAO;AAAA,IACL,GAAG;AAAA,IACH,UAAU;AAAA,EACZ;AACF;AAEA,eAAe;AAAA,EACb;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c162664fcb147ac7caff0efb860cd8a0c7d435d1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return cr=function(){return l},l}cr();const Vue=(cr().s[0]++,Lj({version:8,sources:{},layers:[]}));function Fj(){return cr().f[0]++,cr().s[1]++,Math.random().toString(36).substring(2,9)}function $ue(n){return cr().f[1]++,cr().s[2]++,cr().b[1][0]++,!("id"in n)||(cr().b[1][1]++,!n.id)?(cr().b[0][0]++,cr().s[3]++,n.id=Fj(),cr().s[4]++,n):(cr().b[0][1]++,cr().s[5]++,n)}function Hue(n){cr().f[2]++;const e=(cr().s[6]++,n.layers.map(t=>{cr().f[3]++;const r=(cr().s[7]++,{...t});return cr().s[8]++,delete r.interactive,cr().s[9]++,r}));return cr().s[10]++,{...n,layers:e}}function Zue(n){return cr().f[4]++,cr().s[11]++,{...n,layers:V6(n.layers)}}function Lj(n){return cr().f[5]++,cr().s[12]++,Hue(Zue($ue(n)))}function Xue(n,e){cr().f[6]++,cr().s[13]++;for(let t=(cr().s[14]++,0);t<n.length;t++){if(cr().s[15]++,n[t].id===e)return cr().b[2][0]++,cr().s[16]++,t;cr().b[2][1]++}return cr().s[17]++,null}function ZO(n,e,t){cr().f[7]++;const r=(cr().s[18]++,cr().b[3][0]++,e.metadata||(cr().b[3][1]++,{}));let i=(cr().s[19]++,r[`maputnik:${n}_access_token`]);return cr().s[20]++,cr().b[5][0]++,t.allowFallback&&(cr().b[5][1]++,!i)?(cr().b[4][0]++,cr().s[21]++,i=Dj[n]):cr().b[4][1]++,cr().s[22]++,i}function Jue(n,e,t=(cr().b[6][0]++,{})){var v;cr().f[8]++;const r=(cr().s[23]++,n.sources[e]);if(cr().s[24]++,r)cr().b[7][1]++;else return cr().b[7][0]++,cr().s[25]++,n;if(cr().s[26]++,cr().b[9][0]++,!("url"in r)||(cr().b[9][1]++,!r.url))return cr().b[8][0]++,cr().s[27]++,n;cr().b[8][1]++;let i=(cr().s[28]++,e);cr().s[29]++,cr().b[11][0]++,e==="thunderforest_transport"||(cr().b[11][1]++,e==="thunderforest_outdoors")?(cr().b[10][0]++,cr().s[30]++,i="thunderforest"):(cr().b[10][1]++,cr().s[31]++,cr().b[13][0]++,"url"in r&&(cr().b[13][1]++,(v=r.url)==null?void 0:v.match(/\.stadiamaps\.com/))?(cr().b[12][0]++,cr().s[32]++,i="stadia"):cr().b[12][1]++);const s=(cr().s[33]++,ZO(i,n,t));if(cr().s[34]++,s)cr().b[14][1]++;else return cr().b[14][0]++,cr().s[35]++,n;let l;cr().s[36]++,i=="stadia"?(cr().b[15][0]++,cr().s[37]++,l=`${r.url}?api_key=${s}`):(cr().b[15][1]++,cr().s[38]++,l=r.url.replace("{key}",s));const o=(cr().s[39]++,{...n.sources,[e]:{...r,url:l}}),p=(cr().s[40]++,{...n,sources:o});return cr().s[41]++,p}function eAe(n,e=(cr().b[16][0]++,{})){cr().f[9]++;let t=(cr().s[42]++,n);if(cr().s[43]++,Object.keys(n.sources).forEach(r=>{cr().f[10]++,cr().s[44]++,t=Jue(t,r,e)}),cr().s[45]++,cr().b[18][0]++,n.glyphs&&(cr().b[18][1]++,n.glyphs.match(/\.tilehosting\.com/)||(cr().b[18][2]++,n.glyphs.match(/\.maptiler\.com/)))){cr().b[17][0]++;const r=(cr().s[46]++,ZO("openmaptiles",n,e));cr().s[47]++,r?(cr().b[19][0]++,cr().s[48]++,t={...t,glyphs:n.glyphs.replace("{key}",r)}):cr().b[19][1]++}else cr().b[17][1]++;return cr().s[49]++,t}function tAe(n){cr().f[11]++;const e=(cr().s[50]++,{...n.metadata});return cr().s[51]++,delete e["maputnik:openmaptiles_access_token"],cr().s[52]++,delete e["maputnik:thunderforest_access_token"],cr().s[53]++,delete e["maputnik:stadia_access_token"],cr().s[54]++,{...n,metadata:e}}const _c={ensureStyleValidity:Lj,emptyStyle:Vue,indexOfLayer:Xue,generateId:Fj,getAccessToken:ZO,replaceAccessTokens:eAe,stripAccessTokens:tAe};function Gr(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",e="66cf81ab709608eec5a644a6a17a019c5afe48ce",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx",statementMap:{0:{start:{line:14,column:28},end:{line:14,column:35}},1:{start:{line:15,column:36},end:{line:15,column:83}},2:{start:{line:18,column:4},end:{line:22,column:6}},3:{start:{line:25,column:4},end:{line:33,column:5}},4:{start:{line:26,column:6},end:{line:30,column:9}},5:{start:{line:32,column:6},end:{line:32,column:36}},6:{start:{line:36,column:23},end:{line:36,column:44}},7:{start:{line:37,column:22},end:{line:37,column:69}},8:{start:{line:38,column:17},end:{line:62,column:1}},9:{start:{line:63,column:17},end:{line:63,column:70}},10:{start:{line:64,column:23},end:{line:64,column:40}},11:{start:{line:65,column:4},end:{line:65,column:39}},12:{start:{line:68,column:23},end:{line:68,column:44}},13:{start:{line:69,column:4},end:{line:74,column:5}},14:{start:{line:70,column:19},end:{line:70,column:85}},15:{start:{line:71,column:25},end:{line:71,column:42}},16:{start:{line:72,column:6},end:{line:72,column:41}},17:{start:{line:73,column:6},end:{line:73,column:13}},18:{start:{line:75,column:21},end:{line:75,column:42}},19:{start:{line:76,column:4},end:{line:80,column:5}},20:{start:{line:77,column:6},end:{line:77,column:49}},21:{start:{line:78,column:6},end:{line:78,column:45}},22:{start:{line:79,column:6},end:{line:79,column:37}},23:{start:{line:79,column:30},end:{line:79,column:37}},24:{start:{line:81,column:21},end:{line:81,column:54}},25:{start:{line:82,column:4},end:{line:82,column:37}},26:{start:{line:83,column:4},end:{line:83,column:27}},27:{start:{line:84,column:4},end:{line:84,column:30}},28:{start:{line:87,column:23},end:{line:87,column:44}},29:{start:{line:88,column:23},end:{line:88,column:52}},30:{start:{line:89,column:4},end:{line:89,column:43}},31:{start:{line:90,column:4},end:{line:90,column:35}},32:{start:{line:90,column:28},end:{line:90,column:35}},33:{start:{line:91,column:21},end:{line:91,column:54}},34:{start:{line:92,column:4},end:{line:92,column:37}},35:{start:{line:93,column:4},end:{line:93,column:27}},36:{start:{line:94,column:4},end:{line:94,column:30}},37:{start:{line:97,column:23},end:{line:105,column:5}},38:{start:{line:106,column:23},end:{line:106,column:66}},39:{start:{line:107,column:4},end:{line:107,column:43}},40:{start:{line:108,column:4},end:{line:108,column:22}},41:{start:{line:111,column:25},end:{line:117,column:5}},42:{start:{line:118,column:4},end:{line:118,column:44}},43:{start:{line:121,column:14},end:{line:121,column:26}},44:{start:{line:122,column:16},end:{line:122,column:38}},45:{start:{line:123,column:4},end:{line:179,column:6}},46:{start:{line:182,column:20},end:{line:182,column:58}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:17,column:2},end:{line:17,column:3}},loc:{start:{line:17,column:19},end:{line:23,column:3}},line:17},1:{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:15},end:{line:34,column:3}},line:24},2:{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:15},end:{line:66,column:3}},line:35},3:{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:20},end:{line:85,column:3}},line:67},4:{name:"(anonymous_4)",decl:{start:{line:86,column:2},end:{line:86,column:3}},loc:{start:{line:86,column:22},end:{line:95,column:3}},line:86},5:{name:"(anonymous_5)",decl:{start:{line:96,column:2},end:{line:96,column:3}},loc:{start:{line:96,column:27},end:{line:109,column:3}},line:96},6:{name:"(anonymous_6)",decl:{start:{line:110,column:2},end:{line:110,column:3}},loc:{start:{line:110,column:42},end:{line:119,column:3}},line:110},7:{name:"(anonymous_7)",decl:{start:{line:120,column:2},end:{line:120,column:3}},loc:{start:{line:120,column:11},end:{line:180,column:3}},line:120}},branchMap:{0:{loc:{start:{line:25,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:33,column:5}},{start:{line:31,column:11},end:{line:33,column:5}}],line:25},1:{loc:{start:{line:37,column:22},end:{line:37,column:69}},type:"binary-expr",locations:[{start:{line:37,column:22},end:{line:37,column:46}},{start:{line:37,column:50},end:{line:37,column:69}}],line:37},2:{loc:{start:{line:69,column:4},end:{line:74,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:74,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:69},3:{loc:{start:{line:76,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76},4:{loc:{start:{line:79,column:6},end:{line:79,column:37}},type:"if",locations:[{start:{line:79,column:6},end:{line:79,column:37}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:79},5:{loc:{start:{line:90,column:4},end:{line:90,column:35}},type:"if",locations:[{start:{line:90,column:4},end:{line:90,column:35}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:90},6:{loc:{start:{line:140,column:24},end:{line:140,column:58}},type:"binary-expr",locations:[{start:{line:140,column:24},end:{line:140,column:52}},{start:{line:140,column:56},end:{line:140,column:58}}],line:140},7:{loc:{start:{line:149,column:24},end:{line:149,column:58}},type:"binary-expr",locations:[{start:{line:149,column:24},end:{line:149,column:52}},{start:{line:149,column:56},end:{line:149,column:58}}],line:149},8:{loc:{start:{line:158,column:24},end:{line:158,column:58}},type:"binary-expr",locations:[{start:{line:158,column:24},end:{line:158,column:52}},{start:{line:158,column:56},end:{line:158,column:58}}],line:158},9:{loc:{start:{line:168,column:12},end:{line:171,column:16}},type:"binary-expr",locations:[{start:{line:168,column:12},end:{line:168,column:39}},{start:{line:168,column:59},end:{line:171,column:16}}],line:168}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalExport.tsx"],names:[],mappings:"AAoKQ,cAKA,YALA;AApKR,OAAO,WAAW;AAClB,OAAO,aAAa;AACpB,SAAQ,cAAa;AACrB,SAAQ,eAAc;AACtB,SAAQ,cAAa;AAErB,SAAQ,OAAO,cAAa;AAC5B,SAAyB,uBAAsB;AAE/C,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,yBAAyB;AAGhC,MAAM,sBAAsB;AAC5B,MAAM,8BAA8B,OAAO,OAAO,uBAAuB;AAazE,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAE1E,iBAAiB;AACf,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,MAAM,oBAAoB,KAAK,MAAM,QAAQ;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,QAAI,KAAK,MAAM,SAAS,MAAM;AAC5B,aAAO,QAAQ,KAAK,MAAM,SAAS,MAAM;AAAA,QACvC,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAO;AAAA,MACT,CAAC;AAAA,IACH,OAAO;AACL,aAAO,KAAK,MAAM,SAAS;AAAA,IAC7B;AAAA,EACF;AAAA,EAEA,aAAa;AACX,UAAM,aAAa,KAAK,eAAe;AACvC,UAAM,YAAY,KAAK,MAAM,SAAS,QAAQ,KAAK,MAAM,EAAE,KAAK;AAChE,UAAM,OAAO;AAAA;AAAA;AAAA;AAAA,WAIN,SAAS;AAAA;AAAA,+CAE2B,mBAAmB;AAAA,8CACpB,mBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAW/C,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQxB,UAAM,OAAO,IAAI,KAAK,CAAC,IAAI,GAAG,EAAC,MAAM,0BAAyB,CAAC;AAC/D,UAAM,aAAa,KAAK,WAAW;AACnC,WAAO,MAAM,aAAa,OAAO;AAAA,EACnC;AAAA,EAEA,MAAM,YAAY;AAChB,UAAM,aAAa,KAAK,eAAe;AAIvC,QAAI,CAAC,6BAA6B;AAChC,YAAM,OAAO,IAAI,KAAK,CAAC,UAAU,GAAG,EAAC,MAAM,iCAAgC,CAAC;AAC5E,YAAM,aAAa,KAAK,WAAW;AACnC,aAAO,MAAM,aAAa,OAAO;AACjC;AAAA,IACF;AAEA,QAAI,aAAa,KAAK,MAAM;AAC5B,QAAI,cAAc,MAAM;AACtB,mBAAa,MAAM,KAAK,iBAAiB;AACzC,WAAK,MAAM,gBAAgB,UAAU;AACrC,UAAI,cAAc,KAAM;AAAA,IAC1B;AAEA,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,cAAc;AAClB,UAAM,aAAa,KAAK,eAAe;AAEvC,UAAM,aAAa,MAAM,KAAK,iBAAiB;AAC/C,SAAK,MAAM,gBAAgB,UAAU;AACrC,QAAI,cAAc,KAAM;AAExB,UAAM,WAAW,MAAM,WAAW,eAAe;AACjD,UAAM,SAAS,MAAM,UAAU;AAC/B,UAAM,SAAS,MAAM;AACrB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,MAAM,mBAAyD;AAC7D,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAC,oBAAoB,CAAC,OAAO,EAAC;AAAA,QACxC;AAAA,MACF;AAAA,MACA,eAAe,KAAK,WAAW;AAAA,IACjC;AAEA,UAAM,aAAa,MAAM,OAAO,mBAAmB,UAAU;AAC7D,SAAK,MAAM,gBAAgB,UAAU;AACrC,WAAO;AAAA,EACT;AAAA,EAEA,uBAAuB,UAAkB,OAAY;AACnD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AACA,SAAK,MAAM,eAAe,YAAY;AAAA,EACxC;AAAA,EAGA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,MAAM,oBAAoB,CAAC;AACjC,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,YAAY;AAAA,QACrB,WAAU;AAAA,QAGV,+BAAC,aAAQ,WAAU,0BACjB;AAAA,8BAAC,QAAI,YAAE,YAAY,GAAE;AAAA,UACrB,oBAAC,OACE,YAAE,uCAAuC,GAC5C;AAAA,UAEA,qBAAC,SACC;AAAA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,sBAAsB;AAAA,gBAC1C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,oCAAoC;AAAA,gBACvF,UAAU,KAAK,uBAAuB,KAAK,MAAM,oCAAoC;AAAA;AAAA,YACvF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,2BAA2B;AAAA,gBAC/C,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,qCAAqC;AAAA,gBACxF,UAAU,KAAK,uBAAuB,KAAK,MAAM,qCAAqC;AAAA;AAAA,YACxF;AAAA,YACA;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,IAAI,SAAS,oBAAoB;AAAA,gBACxC,WAAW,IAAI,SAAS;AAAA,gBACxB,QAAQ,KAAK,MAAM,SAAS,YAAY,CAAC,GAAU,8BAA8B;AAAA,gBACjF,UAAU,KAAK,uBAAuB,KAAK,MAAM,8BAA8B;AAAA;AAAA,YACjF;AAAA,aACF;AAAA,UAEA,qBAAC,SAAI,WAAU,iCACb;AAAA,iCAAC,eAAY,SAAS,KAAK,UAAU,KAAK,IAAI,GAC5C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,MAAM;AAAA,eACX;AAAA,YACC,+BACC,qBAAC,eAAY,SAAS,KAAK,YAAY,KAAK,IAAI,GAC9C;AAAA,kCAAC,UAAM;AAAA,cACN,EAAE,SAAS;AAAA,eACd;AAAA,YAGF,qBAAC,eAAY,SAAS,KAAK,WAAW,KAAK,IAAI,GAC7C;AAAA,kCAAC,SAAK;AAAA,cACL,EAAE,aAAa;AAAA,eAClB;AAAA,aACF;AAAA,WACF;AAAA;AAAA,IAEF;AAAA,EACF;AACF;AAEA,MAAM,cAAc,gBAAgB,EAAE,mBAAmB;AACzD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"66cf81ab709608eec5a644a6a17a019c5afe48ce"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Gr=function(){return l},l}Gr();const hR=(Gr().s[0]++,Que),fR=(Gr().s[1]++,typeof window.showSaveFilePicker=="function");class nAe extends sr.Component{tokenizedStyle(){return Gr().f[0]++,Gr().s[2]++,FF(_c.stripAccessTokens(_c.replaceAccessTokens(this.props.mapStyle)))}exportName(){return Gr().f[1]++,Gr().s[3]++,this.props.mapStyle.name?(Gr().b[0][0]++,Gr().s[4]++,Nue(this.props.mapStyle.name,{replacement:"_",remove:/[*\-+~.()'"!:]/g,lower:!0})):(Gr().b[0][1]++,Gr().s[5]++,this.props.mapStyle.id)}createHtml(){Gr().f[2]++;const e=(Gr().s[6]++,this.tokenizedStyle()),t=(Gr().s[7]++,Gr().b[1][0]++,this.props.mapStyle.name||(Gr().b[1][1]++,this.props.t("Map"))),r=(Gr().s[8]++,`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${t}</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://unpkg.com/maplibre-gl@${hR}/dist/maplibre-gl.js"><\/script>
  <link href="https://unpkg.com/maplibre-gl@${hR}/dist/maplibre-gl.css" rel="stylesheet" />
  <style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
      const map = new maplibregl.Map({
         container: 'map',
         style: ${e},
      });
      map.addControl(new maplibregl.NavigationControl());
  <\/script>
</body>
</html>
`),i=(Gr().s[9]++,new Blob([r],{type:"text/html;charset=utf-8"})),s=(Gr().s[10]++,this.exportName());Gr().s[11]++,dR.saveAs(i,s+".html")}async saveStyle(){Gr().f[3]++;const e=(Gr().s[12]++,this.tokenizedStyle());if(Gr().s[13]++,fR)Gr().b[2][1]++;else{Gr().b[2][0]++;const i=(Gr().s[14]++,new Blob([e],{type:"application/json;charset=utf-8"})),s=(Gr().s[15]++,this.exportName());Gr().s[16]++,dR.saveAs(i,s+".json"),Gr().s[17]++;return}let t=(Gr().s[18]++,this.props.fileHandle);if(Gr().s[19]++,t==null)if(Gr().b[3][0]++,Gr().s[20]++,t=await this.createFileHandle(),Gr().s[21]++,this.props.onSetFileHandle(t),Gr().s[22]++,t==null){Gr().b[4][0]++,Gr().s[23]++;return}else Gr().b[4][1]++;else Gr().b[3][1]++;const r=(Gr().s[24]++,await t.createWritable());Gr().s[25]++,await r.write(e),Gr().s[26]++,await r.close(),Gr().s[27]++,this.props.onOpenToggle()}async saveStyleAs(){Gr().f[4]++;const e=(Gr().s[28]++,this.tokenizedStyle()),t=(Gr().s[29]++,await this.createFileHandle());if(Gr().s[30]++,this.props.onSetFileHandle(t),Gr().s[31]++,t==null){Gr().b[5][0]++,Gr().s[32]++;return}else Gr().b[5][1]++;const r=(Gr().s[33]++,await t.createWritable());Gr().s[34]++,await r.write(e),Gr().s[35]++,await r.close(),Gr().s[36]++,this.props.onOpenToggle()}async createFileHandle(){Gr().f[5]++;const e=(Gr().s[37]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],suggestedName:this.exportName()}),t=(Gr().s[38]++,await window.showSaveFilePicker(e));return Gr().s[39]++,this.props.onSetFileHandle(t),Gr().s[40]++,t}changeMetadataProperty(e,t){Gr().f[6]++;const r=(Gr().s[41]++,{...this.props.mapStyle,metadata:{...this.props.mapStyle.metadata,[e]:t}});Gr().s[42]++,this.props.onStyleChanged(r)}render(){Gr().f[7]++;const e=(Gr().s[43]++,this.props.t),t=(Gr().s[44]++,Rj(e));return Gr().s[45]++,le.jsx(L0,{"data-wd-key":"modal:export",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Save Style"),className:"maputnik-export-modal",children:le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Save Style")}),le.jsx("p",{children:e("Save the JSON style to your computer.")}),le.jsxs("div",{children:[le.jsx(jp,{label:t.maputnik.maptiler_access_token.label,fieldSpec:t.maputnik.maptiler_access_token,value:(Gr().b[6][0]++,this.props.mapStyle.metadata||(Gr().b[6][1]++,{}))["maputnik:openmaptiles_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:openmaptiles_access_token")}),le.jsx(jp,{label:t.maputnik.thunderforest_access_token.label,fieldSpec:t.maputnik.thunderforest_access_token,value:(Gr().b[7][0]++,this.props.mapStyle.metadata||(Gr().b[7][1]++,{}))["maputnik:thunderforest_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:thunderforest_access_token")}),le.jsx(jp,{label:t.maputnik.stadia_access_token.label,fieldSpec:t.maputnik.stadia_access_token,value:(Gr().b[8][0]++,this.props.mapStyle.metadata||(Gr().b[8][1]++,{}))["maputnik:stadia_access_token"],onChange:this.changeMetadataProperty.bind(this,"maputnik:stadia_access_token")})]}),le.jsxs("div",{className:"maputnik-modal-export-buttons",children:[le.jsxs(il,{onClick:this.saveStyle.bind(this),children:[le.jsx($E,{}),e("Save")]}),(Gr().b[9][0]++,fR&&(Gr().b[9][1]++,le.jsxs(il,{onClick:this.saveStyleAs.bind(this),children:[le.jsx($E,{}),e("Save as")]}))),le.jsxs(il,{onClick:this.createHtml.bind(this),children:[le.jsx(qV,{}),e("Create HTML")]})]})]})})}}const rAe=(Gr().s[46]++,Ws()(nAe));function L2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",e="950dd35e62562a3439b74678b95f406e749c6958",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:139}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldDynamicArray.tsx"],names:[],mappings:"AAWM;AAXN,OAAO,WAAW;AAClB,OAAO,uBAA2E;AAClF,OAAO,cAAc;AAMrB,qBAAqB,0BAA0B,MAAM,UAAkC;AAAA,EACrF,SAAS;AACP,WAAO,oBAAC,YAAS,OAAO,KAAK,MAAM,OACjC,8BAAC,qBAAmB,GAAG,KAAK,OAAO,GACrC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"950dd35e62562a3439b74678b95f406e749c6958"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return L2=function(){return l},l}L2();class Uj extends sr.Component{render(){return L2().f[0]++,L2().s[0]++,le.jsx(TC,{label:this.props.label,children:le.jsx(xj,{...this.props})})}}function U2(){var n="/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",e="a27c35e986d22656fa80c276efb67df518853ac2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx",statementMap:{0:{start:{line:7,column:4},end:{line:7,column:132}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:8,column:3}},line:6}},branchMap:{},s:{0:0},f:{0:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/FieldCheckbox.tsx"],names:[],mappings:"AAaM;AAbN,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,OAAO,mBAAyC;AAQhD,qBAAqB,sBAAsB,MAAM,UAA8B;AAAA,EAC7E,SAAS;AACP,WAAO,oBAAC,SAAM,OAAO,KAAK,MAAM,OAC9B,8BAAC,iBAAe,GAAG,KAAK,OAAO,GACjC;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a27c35e986d22656fa80c276efb67df518853ac2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return U2=function(){return l},l}U2();class iAe extends sr.Component{render(){return U2().f[0]++,U2().s[0]++,le.jsx(pa,{label:this.props.label,children:le.jsx(qO,{...this.props})})}}function Qn(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",e="dab453a2f232d0ad88af178ab26f5244dd676038",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx",statementMap:{0:{start:{line:15,column:14},end:{line:15,column:26}},1:{start:{line:16,column:4},end:{line:30,column:9}},2:{start:{line:23,column:29},end:{line:26,column:12}},3:{start:{line:35,column:4},end:{line:38,column:7}},4:{start:{line:41,column:18},end:{line:41,column:47}},5:{start:{line:42,column:4},end:{line:51,column:6}},6:{start:{line:54,column:14},end:{line:54,column:26}},7:{start:{line:55,column:4},end:{line:99,column:9}},8:{start:{line:66,column:32},end:{line:69,column:12}},9:{start:{line:80,column:33},end:{line:83,column:12}},10:{start:{line:92,column:33},end:{line:95,column:12}},11:{start:{line:102,column:27},end:{line:107,column:1}},12:{start:{line:102,column:34},end:{line:107,column:1}},13:{start:{line:110,column:14},end:{line:110,column:26}},14:{start:{line:111,column:24},end:{line:118,column:5}},15:{start:{line:112,column:26},end:{line:112,column:64}},16:{start:{line:113,column:6},end:{line:113,column:29}},17:{start:{line:114,column:6},end:{line:117,column:9}},18:{start:{line:119,column:4},end:{line:146,column:9}},19:{start:{line:126,column:29},end:{line:129,column:12}},20:{start:{line:133,column:8},end:{line:144,column:10}},21:{start:{line:141,column:31},end:{line:141,column:52}},22:{start:{line:151,column:14},end:{line:151,column:26}},23:{start:{line:152,column:24},end:{line:159,column:5}},24:{start:{line:153,column:26},end:{line:153,column:64}},25:{start:{line:154,column:6},end:{line:154,column:29}},26:{start:{line:155,column:6},end:{line:158,column:9}},27:{start:{line:160,column:23},end:{line:165,column:5}},28:{start:{line:161,column:6},end:{line:164,column:9}},29:{start:{line:166,column:4},end:{line:192,column:9}},30:{start:{line:179,column:8},end:{line:190,column:10}},31:{start:{line:187,column:31},end:{line:187,column:52}},32:{start:{line:197,column:14},end:{line:197,column:26}},33:{start:{line:198,column:4},end:{line:209,column:6}},34:{start:{line:204,column:28},end:{line:207,column:10}},35:{start:{line:214,column:14},end:{line:214,column:26}},36:{start:{line:215,column:4},end:{line:247,column:9}},37:{start:{line:227,column:12},end:{line:230,column:15}},38:{start:{line:240,column:12},end:{line:243,column:15}},39:{start:{line:252,column:14},end:{line:252,column:26}},40:{start:{line:253,column:4},end:{line:268,column:9}},41:{start:{line:261,column:29},end:{line:264,column:12}},42:{start:{line:273,column:14},end:{line:273,column:26}},43:{start:{line:274,column:24},end:{line:280,column:5}},44:{start:{line:281,column:4},end:{line:345,column:5}},45:{start:{line:283,column:8},end:{line:283,column:79}},46:{start:{line:285,column:8},end:{line:285,column:85}},47:{start:{line:287,column:8},end:{line:287,column:77}},48:{start:{line:289,column:8},end:{line:289,column:76}},49:{start:{line:291,column:8},end:{line:291,column:77}},50:{start:{line:293,column:8},end:{line:305,column:13}},51:{start:{line:298,column:36},end:{line:301,column:14}},52:{start:{line:307,column:8},end:{line:307,column:77}},53:{start:{line:309,column:8},end:{line:336,column:13}},54:{start:{line:315,column:38},end:{line:318,column:16}},55:{start:{line:329,column:38},end:{line:332,column:16}},56:{start:{line:338,column:8},end:{line:338,column:76}},57:{start:{line:340,column:8},end:{line:340,column:74}},58:{start:{line:342,column:8},end:{line:342,column:74}},59:{start:{line:344,column:8},end:{line:344,column:20}},60:{start:{line:348,column:31},end:{line:348,column:80}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:31,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:29},end:{line:26,column:12}},line:23},2:{name:"(anonymous_2)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:24},end:{line:39,column:3}},line:34},3:{name:"(anonymous_3)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:19},end:{line:52,column:3}},line:40},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:11},end:{line:100,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:66,column:20},end:{line:66,column:21}},loc:{start:{line:66,column:32},end:{line:69,column:12}},line:66},6:{name:"(anonymous_6)",decl:{start:{line:80,column:20},end:{line:80,column:21}},loc:{start:{line:80,column:33},end:{line:83,column:12}},line:80},7:{name:"(anonymous_7)",decl:{start:{line:92,column:20},end:{line:92,column:21}},loc:{start:{line:92,column:33},end:{line:95,column:12}},line:92},8:{name:"(anonymous_8)",decl:{start:{line:102,column:27},end:{line:102,column:28}},loc:{start:{line:102,column:34},end:{line:107,column:1}},line:102},9:{name:"(anonymous_9)",decl:{start:{line:109,column:2},end:{line:109,column:3}},loc:{start:{line:109,column:11},end:{line:147,column:3}},line:109},10:{name:"(anonymous_10)",decl:{start:{line:111,column:24},end:{line:111,column:25}},loc:{start:{line:111,column:38},end:{line:118,column:5}},line:111},11:{name:"(anonymous_11)",decl:{start:{line:126,column:20},end:{line:126,column:21}},loc:{start:{line:126,column:29},end:{line:129,column:12}},line:126},12:{name:"(anonymous_12)",decl:{start:{line:132,column:32},end:{line:132,column:33}},loc:{start:{line:132,column:57},end:{line:145,column:7}},line:132},13:{name:"(anonymous_13)",decl:{start:{line:141,column:22},end:{line:141,column:23}},loc:{start:{line:141,column:31},end:{line:141,column:52}},line:141},14:{name:"(anonymous_14)",decl:{start:{line:150,column:2},end:{line:150,column:3}},loc:{start:{line:150,column:11},end:{line:193,column:3}},line:150},15:{name:"(anonymous_15)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:38},end:{line:159,column:5}},line:152},16:{name:"(anonymous_16)",decl:{start:{line:160,column:23},end:{line:160,column:24}},loc:{start:{line:160,column:33},end:{line:165,column:5}},line:160},17:{name:"(anonymous_17)",decl:{start:{line:178,column:32},end:{line:178,column:33}},loc:{start:{line:178,column:57},end:{line:191,column:7}},line:178},18:{name:"(anonymous_18)",decl:{start:{line:187,column:22},end:{line:187,column:23}},loc:{start:{line:187,column:31},end:{line:187,column:52}},line:187},19:{name:"(anonymous_19)",decl:{start:{line:196,column:2},end:{line:196,column:3}},loc:{start:{line:196,column:11},end:{line:210,column:3}},line:196},20:{name:"(anonymous_20)",decl:{start:{line:204,column:18},end:{line:204,column:19}},loc:{start:{line:204,column:28},end:{line:207,column:10}},line:204},21:{name:"(anonymous_21)",decl:{start:{line:213,column:2},end:{line:213,column:3}},loc:{start:{line:213,column:11},end:{line:248,column:3}},line:213},22:{name:"(anonymous_22)",decl:{start:{line:226,column:20},end:{line:226,column:21}},loc:{start:{line:226,column:30},end:{line:231,column:11}},line:226},23:{name:"(anonymous_23)",decl:{start:{line:239,column:20},end:{line:239,column:21}},loc:{start:{line:239,column:33},end:{line:244,column:11}},line:239},24:{name:"(anonymous_24)",decl:{start:{line:251,column:2},end:{line:251,column:3}},loc:{start:{line:251,column:11},end:{line:269,column:3}},line:251},25:{name:"(anonymous_25)",decl:{start:{line:261,column:20},end:{line:261,column:21}},loc:{start:{line:261,column:29},end:{line:264,column:12}},line:261},26:{name:"(anonymous_26)",decl:{start:{line:272,column:2},end:{line:272,column:3}},loc:{start:{line:272,column:11},end:{line:346,column:3}},line:272},27:{name:"(anonymous_27)",decl:{start:{line:298,column:22},end:{line:298,column:23}},loc:{start:{line:298,column:36},end:{line:301,column:14}},line:298},28:{name:"(anonymous_28)",decl:{start:{line:315,column:24},end:{line:315,column:25}},loc:{start:{line:315,column:38},end:{line:318,column:16}},line:315},29:{name:"(anonymous_29)",decl:{start:{line:329,column:24},end:{line:329,column:25}},loc:{start:{line:329,column:38},end:{line:332,column:16}},line:329}},branchMap:{0:{loc:{start:{line:41,column:18},end:{line:41,column:47}},type:"binary-expr",locations:[{start:{line:41,column:18},end:{line:41,column:41}},{start:{line:41,column:45},end:{line:41,column:47}}],line:41},1:{loc:{start:{line:79,column:17},end:{line:79,column:47}},type:"binary-expr",locations:[{start:{line:79,column:17},end:{line:79,column:42}},{start:{line:79,column:46},end:{line:79,column:47}}],line:79},2:{loc:{start:{line:91,column:17},end:{line:91,column:48}},type:"binary-expr",locations:[{start:{line:91,column:17},end:{line:91,column:42}},{start:{line:91,column:46},end:{line:91,column:48}}],line:91},3:{loc:{start:{line:263,column:17},end:{line:263,column:72}},type:"cond-expr",locations:[{start:{line:263,column:48},end:{line:263,column:51}},{start:{line:263,column:54},end:{line:263,column:72}}],line:263},4:{loc:{start:{line:281,column:4},end:{line:345,column:5}},type:"switch",locations:[{start:{line:282,column:6},end:{line:283,column:79}},{start:{line:284,column:6},end:{line:285,column:85}},{start:{line:286,column:6},end:{line:287,column:77}},{start:{line:288,column:6},end:{line:289,column:76}},{start:{line:290,column:6},end:{line:291,column:77}},{start:{line:292,column:6},end:{line:305,column:13}},{start:{line:306,column:6},end:{line:307,column:77}},{start:{line:308,column:6},end:{line:336,column:13}},{start:{line:337,column:6},end:{line:338,column:76}},{start:{line:339,column:6},end:{line:340,column:74}},{start:{line:341,column:6},end:{line:342,column:74}},{start:{line:343,column:6},end:{line:344,column:20}}],line:281},5:{loc:{start:{line:302,column:19},end:{line:302,column:86}},type:"binary-expr",locations:[{start:{line:302,column:19},end:{line:302,column:45}},{start:{line:302,column:49},end:{line:302,column:86}}],line:302},6:{loc:{start:{line:319,column:21},end:{line:319,column:92}},type:"binary-expr",locations:[{start:{line:319,column:21},end:{line:319,column:47}},{start:{line:319,column:51},end:{line:319,column:92}}],line:319},7:{loc:{start:{line:333,column:21},end:{line:333,column:92}},type:"binary-expr",locations:[{start:{line:333,column:21},end:{line:333,column:47}},{start:{line:333,column:51},end:{line:333,column:92}}],line:333}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSourcesTypeEditor.tsx"],names:[],mappings:"AA2BW,SACL,KADK;AA3BX,OAAO,WAAW;AAClB,SAAQ,cAAa;AACrB,OAAO,WAAW;AAClB,OAAO,cAAc;AACrB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,uBAAuB;AAC9B,OAAO,gBAAgB;AACvB,OAAO,eAAe;AACtB,OAAO,mBAAmB;AAC1B,SAA0B,uBAAuB;AAcjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,cAAc;AAAA,UACvB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAaA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,eAAe,OAAiB;AAC9B,SAAK,MAAM,SAAS;AAAA,MAClB,GAAG,KAAK,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB;AACf,UAAM,QAAQ,KAAK,MAAM,OAAO,SAAS,CAAC;AAC1C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,KAAK,MAAM,EAAE,UAAU;AAAA,QAC9B,WAAW,OAAO,cAAc;AAAA,QAChC,MAAK;AAAA,QACL,OAAO;AAAA,QACP,UAAU,KAAK,eAAe,KAAK,IAAI;AAAA;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACL;AAAA,WAAK,eAAe;AAAA,MACrB;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,SAAS;AAAA,YACP,CAAC,OAAO,mCAAmC;AAAA,YAC3C,CAAC,OAAO,yBAAyB;AAAA,UACnC;AAAA,UACA,UAAU,YAAU,KAAK,MAAM,SAAS;AAAA,YACtC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA,UACD,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,UAAU;AAAA,UACnB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO,WAAW;AAAA,UACpC,UAAU,aAAW,KAAK,MAAM,SAAS;AAAA,YACvC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EAEF;AACF;AAEA,MAAM,qBAAyE,CAAC,MAAO;AAAA,EACrF,EAAE,OAAO,EAAE,gBAAgB,GAAG,KAAK,WAAW;AAAA,EAC9C,EAAE,OAAO,EAAE,iBAAiB,GAAG,KAAK,YAAY;AAAA,EAChD,EAAE,OAAO,EAAE,oBAAoB,GAAG,KAAK,eAAe;AAAA,EACtD,EAAE,OAAO,EAAE,mBAAmB,GAAG,KAAK,cAAc;AACtD;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,SAAO,KAAK,MAAM,SAAS;AAAA,YACnC,GAAG,KAAK,MAAM;AAAA,YACd;AAAA,UACF,CAAC;AAAA;AAAA,MACH;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AAUA,MAAM,0BAA0B,MAAM,UAAkC;AAAA,EACtE,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc,CAAC,KAAa,QAA0B;AAC1D,YAAM,cAAc,KAAK,MAAM,OAAO,YAAY,MAAM,CAAC;AACzD,kBAAY,GAAG,IAAI;AAEnB,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAmB;AACrC,WAAK,MAAM,SAAS;AAAA,QAClB,GAAG,KAAK,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,OAAO,aAAa;AAAA,UAC/B,MAAK;AAAA,UACL,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,SAAS,CAAC;AAAA,UACV,UAAU;AAAA;AAAA,MACZ;AAAA,MACC,mBAAmB,CAAC,EAAE,IAAI,CAAC,EAAC,OAAO,IAAG,GAAG,QAAQ;AAChD,eACE;AAAA,UAAC;AAAA;AAAA,YACC;AAAA,YAEA,QAAQ;AAAA,YACR,MAAK;AAAA,YACL,OAAO,KAAK,MAAM,OAAO,YAAY,GAAG;AAAA,YACxC,SAAS,CAAC,GAAG,CAAC;AAAA,YACd,UAAU,CAAC,QAA0B,YAAY,KAAK,GAAG;AAAA;AAAA,UALpD;AAAA,QAMP;AAAA,MAEJ,CAAC;AAAA,OACH;AAAA,EACF;AACF;AASA,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,OAAO,EAAE,aAAa;AAAA,QACtB,WAAW,OAAO,eAAe;AAAA,QACjC,OAAO,KAAK,MAAM,OAAO;AAAA,QACzB,UAAU,UAAQ,KAAK,MAAM,SAAS;AAAA,UACpC,GAAG,KAAK,MAAM;AAAA,UACd;AAAA,QACF,CAAC;AAAA;AAAA,IACH;AAAA,EACF;AACF;AAUA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA,0BAAC,SAAM,OAAO,EAAE,SAAS,GAAG,WAAW,OAAO,eAAe,MAC3D;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,WAAW;AAAA,UACX,MAAM;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,UACN,UAAU,UAAQ;AAChB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF,GACF;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,SAAS;AAAA,UAClB,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,UAAU,aAAW;AACnB,iBAAK,MAAM,SAAS;AAAA,cAClB,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,UACH;AAAA;AAAA,MACF;AAAA,OACF;AAAA,EACF;AACF;AAUA,MAAM,4BAA4B,MAAM,UAAoC;AAAA,EAC1E,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SACN;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW,OAAO,cAAc;AAAA,UAChC,OAAO,KAAK,MAAM,OAAO;AAAA,UACzB,eAAY;AAAA,UACZ,UAAU,CAAC,QAAgB,KAAK,MAAM,SAAS;AAAA,YAC7C,GAAG,KAAK,MAAM;AAAA,YACd,KAAK,IAAI,WAAW,YAAY,IAAI,MAAM,aAAa,GAAG;AAAA,UAC5D,CAAC;AAAA;AAAA,MACH;AAAA,MACC,KAAK,MAAM;AAAA,OACd;AAAA,EACF;AACF;AAQA,MAAM,uCAAuC,MAAM,UAA+C;AAAA,EAChG,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,cAAc;AAAA,MAClB,QAAQ,KAAK,MAAM;AAAA,MACnB,UAAU,KAAK,MAAM;AAAA,MACrB,GAAG,KAAK,MAAM;AAAA,MACd,MAAM,KAAK,MAAM;AAAA,MACjB,QAAQ,KAAK,MAAM;AAAA,IACrB;AACA,YAAO,KAAK,MAAM,MAAM;AAAA,MACxB,KAAK;AAAe,eAAO,oBAAC,0BAAwB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAgB,eAAO,oBAAC,gCAA8B,GAAG,aAAa;AAAA,MAC3E,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACjE,KAAK;AAAmB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MACtE,KAAK;AAAe,eAAO,oBAAC,uBAAqB,GAAG,aAClD;AAAA,UAAC;AAAA;AAAA,YACC,OAAO,EAAE,WAAW;AAAA,YACpB,WAAW,OAAO,cAAc;AAAA,YAChC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,cACxC,GAAG,KAAK,MAAM;AAAA,cACd;AAAA,YACF,CAAC;AAAA,YACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,cAAc,SAAS;AAAA,YACnE,eAAY;AAAA;AAAA,QACd,GACF;AAAA,MACA,KAAK;AAAuB,eAAO,oBAAC,wBAAsB,GAAG,aAAa;AAAA,MAC1E,KAAK;AAAsB,eAAO,qBAAC,uBAAqB,GAAG,aACzD;AAAA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,WAAW;AAAA,cACpB,WAAW,OAAO,kBAAkB;AAAA,cACpC,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA,cACvE,eAAY;AAAA;AAAA,UACd;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,OAAO,EAAE,UAAU;AAAA,cACnB,WAAW,OAAO,kBAAkB;AAAA,cACpC,SAAS,OAAO,KAAK,OAAO,kBAAkB,SAAS,MAAM;AAAA,cAC7D,UAAU,cAAY,KAAK,MAAM,SAAS;AAAA,gBACxC,GAAG,KAAK,MAAM;AAAA,gBACd;AAAA,cACF,CAAC;AAAA,cACD,OAAO,KAAK,MAAM,OAAO,YAAY,OAAO,kBAAkB,SAAS;AAAA;AAAA,UACzE;AAAA,WACF;AAAA,MACA,KAAK;AAAkB,eAAO,oBAAC,uBAAqB,GAAG,aAAa;AAAA,MACpE,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD,KAAK;AAAS,eAAO,oBAAC,qBAAmB,GAAG,aAAa;AAAA,MACzD;AAAS,eAAO;AAAA,IAChB;AAAA,EACF;AACF;AAEA,MAAM,yBAAyB,gBAAgB,EAAE,8BAA8B;AAC/E,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dab453a2f232d0ad88af178ab26f5244dd676038"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Qn=function(){return l},l}Qn();class TS extends sr.Component{render(){Qn().f[0]++;const e=(Qn().s[0]++,this.props.t);return Qn().s[1]++,le.jsxs("div",{children:[le.jsx(Ey,{label:e("TileJSON URL"),fieldSpec:ks.source_vector.url,value:this.props.source.url,onChange:t=>(Qn().f[1]++,Qn().s[2]++,this.props.onChange({...this.props.source,url:t}))}),this.props.children]})}}class PS extends sr.Component{changeTileUrls(e){Qn().f[2]++,Qn().s[3]++,this.props.onChange({...this.props.source,tiles:e})}renderTileUrls(){Qn().f[3]++;const e=(Qn().s[4]++,Qn().b[0][0]++,this.props.source.tiles||(Qn().b[0][1]++,[]));return Qn().s[5]++,le.jsx(Uj,{label:this.props.t("Tile URL"),fieldSpec:ks.source_vector.tiles,type:"url",value:e,onChange:this.changeTileUrls.bind(this)})}render(){Qn().f[4]++;const e=(Qn().s[6]++,this.props.t);return Qn().s[7]++,le.jsxs("div",{children:[this.renderTileUrls(),le.jsx(e3,{label:e("Scheme Type"),fieldSpec:ks.source_vector.scheme,options:[["xyz","xyz (Slippy map tilenames scheme)"],["tms","tms (OSGeo spec scheme)"]],onChange:t=>(Qn().f[5]++,Qn().s[8]++,this.props.onChange({...this.props.source,scheme:t})),value:this.props.source.scheme,"data-wd-key":"modal:sources.add.scheme_type"}),le.jsx(up,{label:e("Min Zoom"),fieldSpec:ks.source_vector.minzoom,value:(Qn().b[1][0]++,this.props.source.minzoom||(Qn().b[1][1]++,0)),onChange:t=>(Qn().f[6]++,Qn().s[9]++,this.props.onChange({...this.props.source,minzoom:t}))}),le.jsx(up,{label:e("Max Zoom"),fieldSpec:ks.source_vector.maxzoom,value:(Qn().b[2][0]++,this.props.source.maxzoom||(Qn().b[2][1]++,22)),onChange:t=>(Qn().f[7]++,Qn().s[10]++,this.props.onChange({...this.props.source,maxzoom:t}))}),this.props.children]})}}Qn().s[11]++;const zj=n=>(Qn().f[8]++,Qn().s[12]++,[{label:n("Coord top left"),key:"top left"},{label:n("Coord top right"),key:"top right"},{label:n("Coord bottom right"),key:"bottom right"},{label:n("Coord bottom left"),key:"bottom left"}]);class oAe extends sr.Component{render(){Qn().f[9]++;const e=(Qn().s[13]++,this.props.t);Qn().s[14]++;const t=(r,i)=>{Qn().f[10]++;const s=(Qn().s[15]++,this.props.source.coordinates.slice(0));Qn().s[16]++,s[r]=i,Qn().s[17]++,this.props.onChange({...this.props.source,coordinates:s})};return Qn().s[18]++,le.jsxs("div",{children:[le.jsx(Ey,{label:e("Image URL"),fieldSpec:ks.source_image.url,value:this.props.source.url,onChange:r=>(Qn().f[11]++,Qn().s[19]++,this.props.onChange({...this.props.source,url:r}))}),zj(e).map(({label:r,key:i},s)=>(Qn().f[12]++,Qn().s[20]++,le.jsx(k2,{label:r,length:2,type:"number",value:this.props.source.coordinates[s],default:[0,0],onChange:l=>(Qn().f[13]++,Qn().s[21]++,t(s,l))},i)))]})}}class sAe extends sr.Component{render(){Qn().f[14]++;const e=(Qn().s[22]++,this.props.t);Qn().s[23]++;const t=(i,s)=>{Qn().f[15]++;const l=(Qn().s[24]++,this.props.source.coordinates.slice(0));Qn().s[25]++,l[i]=s,Qn().s[26]++,this.props.onChange({...this.props.source,coordinates:l})};Qn().s[27]++;const r=i=>{Qn().f[16]++,Qn().s[28]++,this.props.onChange({...this.props.source,urls:i})};return Qn().s[29]++,le.jsxs("div",{children:[le.jsx(Uj,{label:e("Video URL"),fieldSpec:ks.source_video.urls,type:"string",value:this.props.source.urls,default:[],onChange:r}),zj(e).map(({label:i,key:s},l)=>(Qn().f[17]++,Qn().s[30]++,le.jsx(k2,{label:i,length:2,type:"number",value:this.props.source.coordinates[l],default:[0,0],onChange:o=>(Qn().f[18]++,Qn().s[31]++,t(l,o))},s)))]})}}class aAe extends sr.Component{render(){Qn().f[19]++;const e=(Qn().s[32]++,this.props.t);return Qn().s[33]++,le.jsx(Ey,{label:e("GeoJSON URL"),fieldSpec:ks.source_geojson.data,value:this.props.source.data,onChange:t=>(Qn().f[20]++,Qn().s[34]++,this.props.onChange({...this.props.source,data:t}))})}}class lAe extends sr.Component{render(){Qn().f[21]++;const e=(Qn().s[35]++,this.props.t);return Qn().s[36]++,le.jsxs("div",{children:[le.jsx(pa,{label:e("GeoJSON"),fieldSpec:ks.source_geojson.data,children:le.jsx(SO,{layer:this.props.source.data,maxHeight:200,mode:{name:"javascript",json:!0},lint:!0,onChange:t=>{Qn().f[22]++,Qn().s[37]++,this.props.onChange({...this.props.source,data:t})}})}),le.jsx(iAe,{label:e("Cluster"),value:this.props.source.cluster,onChange:t=>{Qn().f[23]++,Qn().s[38]++,this.props.onChange({...this.props.source,cluster:t})}})]})}}class uAe extends sr.Component{render(){Qn().f[24]++;const e=(Qn().s[39]++,this.props.t);return Qn().s[40]++,le.jsxs("div",{children:[le.jsx(Ey,{label:e("PMTiles URL"),fieldSpec:ks.source_vector.url,value:this.props.source.url,"data-wd-key":"modal:sources.add.source_url",onChange:t=>(Qn().f[25]++,Qn().s[41]++,this.props.onChange({...this.props.source,url:t.startsWith("pmtiles://")?(Qn().b[3][0]++,t):(Qn().b[3][1]++,`pmtiles://${t}`)}))}),this.props.children]})}}class AAe extends sr.Component{render(){Qn().f[26]++;const e=(Qn().s[42]++,this.props.t),t=(Qn().s[43]++,{source:this.props.source,onChange:this.props.onChange,t:this.props.t,i18n:this.props.i18n,tReady:this.props.tReady});switch(Qn().s[44]++,this.props.mode){case"geojson_url":return Qn().b[4][0]++,Qn().s[45]++,le.jsx(aAe,{...t});case"geojson_json":return Qn().b[4][1]++,Qn().s[46]++,le.jsx(lAe,{...t});case"tilejson_vector":return Qn().b[4][2]++,Qn().s[47]++,le.jsx(TS,{...t});case"tile_vector":return Qn().b[4][3]++,Qn().s[48]++,le.jsx(PS,{...t});case"tilejson_raster":return Qn().b[4][4]++,Qn().s[49]++,le.jsx(TS,{...t});case"tile_raster":return Qn().b[4][5]++,Qn().s[50]++,le.jsx(PS,{...t,children:le.jsx(up,{label:e("Tile Size"),fieldSpec:ks.source_raster.tileSize,onChange:r=>(Qn().f[27]++,Qn().s[51]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Qn().b[5][0]++,this.props.source.tileSize||(Qn().b[5][1]++,ks.source_raster.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"})});case"tilejson_raster-dem":return Qn().b[4][6]++,Qn().s[52]++,le.jsx(TS,{...t});case"tilexyz_raster-dem":return Qn().b[4][7]++,Qn().s[53]++,le.jsxs(PS,{...t,children:[le.jsx(up,{label:e("Tile Size"),fieldSpec:ks.source_raster_dem.tileSize,onChange:r=>(Qn().f[28]++,Qn().s[54]++,this.props.onChange({...this.props.source,tileSize:r})),value:(Qn().b[6][0]++,this.props.source.tileSize||(Qn().b[6][1]++,ks.source_raster_dem.tileSize.default)),"data-wd-key":"modal:sources.add.tile_size"}),le.jsx(e3,{label:e("Encoding"),fieldSpec:ks.source_raster_dem.encoding,options:Object.keys(ks.source_raster_dem.encoding.values),onChange:r=>(Qn().f[29]++,Qn().s[55]++,this.props.onChange({...this.props.source,encoding:r})),value:(Qn().b[7][0]++,this.props.source.encoding||(Qn().b[7][1]++,ks.source_raster_dem.encoding.default))})]});case"pmtiles_vector":return Qn().b[4][8]++,Qn().s[56]++,le.jsx(uAe,{...t});case"image":return Qn().b[4][9]++,Qn().s[57]++,le.jsx(oAe,{...t});case"video":return Qn().b[4][10]++,Qn().s[58]++,le.jsx(sAe,{...t});default:return Qn().b[4][11]++,Qn().s[59]++,null}}}const jj=(Qn().s[60]++,Ws()(AAe));function pp(){var n="/home/runner/work/maputnik/maputnik/src/libs/source.ts",e="315b9927ffd3b5bf51669bb9e53779783a451930",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/source.ts",statementMap:{0:{start:{line:2,column:27},end:{line:2,column:50}},1:{start:{line:3,column:2},end:{line:3,column:36}},2:{start:{line:4,column:2},end:{line:7,column:4}},3:{start:{line:10,column:2},end:{line:10,column:50}},4:{start:{line:13,column:25},end:{line:16,column:3}},5:{start:{line:17,column:2},end:{line:20,column:4}}},fnMap:{0:{name:"deleteSource",decl:{start:{line:1,column:16},end:{line:1,column:28}},loc:{start:{line:1,column:49},end:{line:8,column:1}},line:1},1:{name:"addSource",decl:{start:{line:9,column:16},end:{line:9,column:25}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},2:{name:"changeSource",decl:{start:{line:12,column:16},end:{line:12,column:28}},loc:{start:{line:12,column:57},end:{line:21,column:1}},line:12}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/source.ts"],names:[],mappings:"AAEO,gBAAS,aAAa,UAA8B,UAAkB;AAC3E,QAAM,mBAAmB,EAAE,GAAG,SAAS,QAAO;AAC9C,SAAO,iBAAiB,QAAQ;AAChC,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;AAGO,gBAAS,UAAU,UAA8B,UAAkB,QAA6B;AACrG,SAAO,aAAa,UAAU,UAAU,MAAM;AAChD;AAEO,gBAAS,aAAa,UAA8B,UAAkB,QAA6B;AACxG,QAAM,iBAAiB;AAAA,IACrB,GAAG,SAAS;AAAA,IACZ,CAAC,QAAQ,GAAG;AAAA,EACd;AACA,SAAO;AAAA,IACL,GAAG;AAAA,IACH,SAAS;AAAA,EACX;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"315b9927ffd3b5bf51669bb9e53779783a451930"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return pp=function(){return l},l}pp();function cAe(n,e){pp().f[0]++;const t=(pp().s[0]++,{...n.sources});return pp().s[1]++,delete t[e],pp().s[2]++,{...n,sources:t}}function pR(n,e,t){return pp().f[1]++,pp().s[3]++,Nj(n,e,t)}function Nj(n,e,t){pp().f[2]++;const r=(pp().s[4]++,{...n.sources,[e]:t});return pp().s[5]++,{...n,sources:r}}const dAe={type:"vector",url:"https://api.maptiler.com/tiles/v3-openmaptiles/tiles.json?key={key}",title:"OpenMapTiles v3"},hAe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.transport-v2.json?apikey={key}",title:"Thunderforest Transport v2"},fAe={type:"vector",url:"https://tile.thunderforest.com/thunderforest.outdoors-v2.json?apikey={key}",title:"Thunderforest Outdoors v2"},pAe={type:"vector",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/data/vector/open-zoomstack/config.json",title:"OS Open Zoomstack v2"},mR={openmaptiles:dAe,thunderforest_transport:hAe,thunderforest_outdoors:fAe,open_zoomstack:pAe};function An(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",e="1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx",statementMap:{0:{start:{line:16,column:4},end:{line:33,column:9}},1:{start:{line:20,column:23},end:{line:20,column:57}},2:{start:{line:37,column:2},end:{line:40,column:3}},3:{start:{line:38,column:4},end:{line:38,column:43}},4:{start:{line:38,column:22},end:{line:38,column:43}},5:{start:{line:39,column:4},end:{line:39,column:29}},6:{start:{line:41,column:2},end:{line:44,column:3}},7:{start:{line:42,column:4},end:{line:42,column:50}},8:{start:{line:42,column:22},end:{line:42,column:50}},9:{start:{line:43,column:4},end:{line:43,column:33}},10:{start:{line:45,column:2},end:{line:49,column:3}},11:{start:{line:46,column:4},end:{line:46,column:43}},12:{start:{line:46,column:22},end:{line:46,column:43}},13:{start:{line:47,column:4},end:{line:47,column:83}},14:{start:{line:47,column:59},end:{line:47,column:83}},15:{start:{line:48,column:4},end:{line:48,column:29}},16:{start:{line:50,column:2},end:{line:56,column:3}},17:{start:{line:51,column:4},end:{line:55,column:5}},18:{start:{line:52,column:6},end:{line:52,column:27}},19:{start:{line:54,column:6},end:{line:54,column:28}},20:{start:{line:57,column:2},end:{line:59,column:3}},21:{start:{line:58,column:4},end:{line:58,column:19}},22:{start:{line:60,column:2},end:{line:62,column:3}},23:{start:{line:61,column:4},end:{line:61,column:19}},24:{start:{line:63,column:2},end:{line:63,column:14}},25:{start:{line:67,column:14},end:{line:67,column:26}},26:{start:{line:68,column:4},end:{line:94,column:9}},27:{start:{line:80,column:27},end:{line:80,column:67}},28:{start:{line:99,column:4},end:{line:99,column:17}},29:{start:{line:100,column:4},end:{line:104,column:6}},30:{start:{line:107,column:19},end:{line:107,column:50}},31:{start:{line:108,column:25},end:{line:108,column:40}},32:{start:{line:109,column:4},end:{line:192,column:5}},33:{start:{line:111,column:8},end:{line:114,column:10}},34:{start:{line:116,column:8},end:{line:119,column:10}},35:{start:{line:121,column:8},end:{line:125,column:10}},36:{start:{line:127,column:8},end:{line:130,column:10}},37:{start:{line:132,column:8},end:{line:138,column:10}},38:{start:{line:140,column:8},end:{line:143,column:10}},39:{start:{line:145,column:8},end:{line:152,column:10}},40:{start:{line:154,column:8},end:{line:157,column:10}},41:{start:{line:159,column:8},end:{line:165,column:10}},42:{start:{line:167,column:8},end:{line:176,column:10}},43:{start:{line:178,column:8},end:{line:189,column:10}},44:{start:{line:191,column:8},end:{line:191,column:18}},45:{start:{line:194,column:10},end:{line:197,column:3}},46:{start:{line:195,column:33},end:{line:195,column:43}},47:{start:{line:196,column:4},end:{line:196,column:39}},48:{start:{line:198,column:19},end:{line:200,column:3}},49:{start:{line:199,column:4},end:{line:199,column:30}},50:{start:{line:202,column:14},end:{line:202,column:26}},51:{start:{line:203,column:32},end:{line:205,column:5}},52:{start:{line:206,column:4},end:{line:257,column:9}},53:{start:{line:213,column:27},end:{line:213,column:57}},54:{start:{line:235,column:30},end:{line:235,column:87}},55:{start:{line:262,column:27},end:{line:262,column:40}},56:{start:{line:263,column:4},end:{line:263,column:35}},57:{start:{line:264,column:4},end:{line:264,column:26}},58:{start:{line:267,column:28},end:{line:267,column:38}},59:{start:{line:268,column:22},end:{line:268,column:77}},60:{start:{line:269,column:26},end:{line:282,column:6}},61:{start:{line:270,column:21},end:{line:270,column:47}},62:{start:{line:271,column:6},end:{line:281,column:8}},63:{start:{line:276,column:29},end:{line:276,column:93}},64:{start:{line:277,column:26},end:{line:277,column:85}},65:{start:{line:283,column:27},end:{line:295,column:6}},66:{start:{line:283,column:75},end:{line:283,column:106}},67:{start:{line:284,column:21},end:{line:284,column:44}},68:{start:{line:285,column:6},end:{line:294,column:8}},69:{start:{line:291,column:26},end:{line:291,column:107}},70:{start:{line:296,column:4},end:{line:326,column:6}},71:{start:{line:319,column:45},end:{line:319,column:109}},72:{start:{line:329,column:21},end:{line:329,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:11},end:{line:34,column:3}},line:15},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:57}},line:20},2:{name:"editorMode",decl:{start:{line:36,column:9},end:{line:36,column:19}},loc:{start:{line:36,column:28},end:{line:64,column:1}},line:36},3:{name:"(anonymous_3)",decl:{start:{line:66,column:2},end:{line:66,column:3}},loc:{start:{line:66,column:11},end:{line:95,column:3}},line:66},4:{name:"(anonymous_4)",decl:{start:{line:80,column:21},end:{line:80,column:22}},loc:{start:{line:80,column:27},end:{line:80,column:67}},line:80},5:{name:"(anonymous_5)",decl:{start:{line:98,column:2},end:{line:98,column:3}},loc:{start:{line:98,column:21},end:{line:105,column:3}},line:98},6:{name:"(anonymous_6)",decl:{start:{line:106,column:2},end:{line:106,column:3}},loc:{start:{line:106,column:22},end:{line:193,column:3}},line:106},7:{name:"(anonymous_7)",decl:{start:{line:194,column:10},end:{line:194,column:11}},loc:{start:{line:194,column:16},end:{line:197,column:3}},line:194},8:{name:"(anonymous_8)",decl:{start:{line:198,column:19},end:{line:198,column:20}},loc:{start:{line:198,column:31},end:{line:200,column:3}},line:198},9:{name:"(anonymous_9)",decl:{start:{line:201,column:2},end:{line:201,column:3}},loc:{start:{line:201,column:11},end:{line:258,column:3}},line:201},10:{name:"(anonymous_10)",decl:{start:{line:213,column:20},end:{line:213,column:21}},loc:{start:{line:213,column:27},end:{line:213,column:57}},line:213},11:{name:"(anonymous_11)",decl:{start:{line:235,column:20},end:{line:235,column:21}},loc:{start:{line:235,column:30},end:{line:235,column:87}},line:235},12:{name:"(anonymous_12)",decl:{start:{line:261,column:2},end:{line:261,column:3}},loc:{start:{line:261,column:21},end:{line:265,column:3}},line:261},13:{name:"(anonymous_13)",decl:{start:{line:266,column:2},end:{line:266,column:3}},loc:{start:{line:266,column:11},end:{line:327,column:3}},line:266},14:{name:"(anonymous_14)",decl:{start:{line:269,column:60},end:{line:269,column:61}},loc:{start:{line:269,column:74},end:{line:282,column:5}},line:269},15:{name:"(anonymous_15)",decl:{start:{line:276,column:20},end:{line:276,column:21}},loc:{start:{line:276,column:29},end:{line:276,column:93}},line:276},16:{name:"(anonymous_16)",decl:{start:{line:277,column:20},end:{line:277,column:21}},loc:{start:{line:277,column:26},end:{line:277,column:85}},line:277},17:{name:"(anonymous_17)",decl:{start:{line:283,column:61},end:{line:283,column:62}},loc:{start:{line:283,column:75},end:{line:283,column:106}},line:283},18:{name:"(anonymous_18)",decl:{start:{line:283,column:112},end:{line:283,column:113}},loc:{start:{line:283,column:126},end:{line:295,column:5}},line:283},19:{name:"(anonymous_19)",decl:{start:{line:291,column:20},end:{line:291,column:21}},loc:{start:{line:291,column:26},end:{line:291,column:107}},line:291},20:{name:"(anonymous_20)",decl:{start:{line:319,column:23},end:{line:319,column:24}},loc:{start:{line:319,column:45},end:{line:319,column:109}},line:319}},branchMap:{0:{loc:{start:{line:37,column:2},end:{line:40,column:3}},type:"if",locations:[{start:{line:37,column:2},end:{line:40,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:37},1:{loc:{start:{line:38,column:4},end:{line:38,column:43}},type:"if",locations:[{start:{line:38,column:4},end:{line:38,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:38},2:{loc:{start:{line:41,column:2},end:{line:44,column:3}},type:"if",locations:[{start:{line:41,column:2},end:{line:44,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:41},3:{loc:{start:{line:42,column:4},end:{line:42,column:50}},type:"if",locations:[{start:{line:42,column:4},end:{line:42,column:50}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:42},4:{loc:{start:{line:45,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:45,column:2},end:{line:49,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:45},5:{loc:{start:{line:46,column:4},end:{line:46,column:43}},type:"if",locations:[{start:{line:46,column:4},end:{line:46,column:43}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:46},6:{loc:{start:{line:47,column:4},end:{line:47,column:83}},type:"if",locations:[{start:{line:47,column:4},end:{line:47,column:83}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:47},7:{loc:{start:{line:47,column:8},end:{line:47,column:57}},type:"binary-expr",locations:[{start:{line:47,column:8},end:{line:47,column:18}},{start:{line:47,column:22},end:{line:47,column:57}}],line:47},8:{loc:{start:{line:50,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:50,column:2},end:{line:56,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:50},9:{loc:{start:{line:51,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:55,column:5}},{start:{line:53,column:11},end:{line:55,column:5}}],line:51},10:{loc:{start:{line:57,column:2},end:{line:59,column:3}},type:"if",locations:[{start:{line:57,column:2},end:{line:59,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:57},11:{loc:{start:{line:60,column:2},end:{line:62,column:3}},type:"if",locations:[{start:{line:60,column:2},end:{line:62,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:60},12:{loc:{start:{line:107,column:19},end:{line:107,column:50}},type:"binary-expr",locations:[{start:{line:107,column:19},end:{line:107,column:44}},{start:{line:107,column:48},end:{line:107,column:50}}],line:107},13:{loc:{start:{line:107,column:20},end:{line:107,column:36}},type:"binary-expr",locations:[{start:{line:107,column:20},end:{line:107,column:30}},{start:{line:107,column:34},end:{line:107,column:36}}],line:107},14:{loc:{start:{line:109,column:4},end:{line:192,column:5}},type:"switch",locations:[{start:{line:110,column:6},end:{line:114,column:10}},{start:{line:115,column:6},end:{line:119,column:10}},{start:{line:120,column:6},end:{line:125,column:10}},{start:{line:126,column:6},end:{line:130,column:10}},{start:{line:131,column:6},end:{line:138,column:10}},{start:{line:139,column:6},end:{line:143,column:10}},{start:{line:144,column:6},end:{line:152,column:10}},{start:{line:153,column:6},end:{line:157,column:10}},{start:{line:158,column:6},end:{line:165,column:10}},{start:{line:166,column:6},end:{line:176,column:10}},{start:{line:177,column:6},end:{line:189,column:10}},{start:{line:190,column:6},end:{line:191,column:18}}],line:109},15:{loc:{start:{line:123,column:19},end:{line:123,column:42}},type:"binary-expr",locations:[{start:{line:123,column:19},end:{line:123,column:33}},{start:{line:123,column:37},end:{line:123,column:42}}],line:123},16:{loc:{start:{line:129,column:15},end:{line:129,column:72}},type:"binary-expr",locations:[{start:{line:129,column:15},end:{line:129,column:25}},{start:{line:129,column:29},end:{line:129,column:72}}],line:129},17:{loc:{start:{line:134,column:17},end:{line:134,column:80}},type:"binary-expr",locations:[{start:{line:134,column:17},end:{line:134,column:29}},{start:{line:134,column:33},end:{line:134,column:80}}],line:134},18:{loc:{start:{line:135,column:19},end:{line:135,column:38}},type:"binary-expr",locations:[{start:{line:135,column:19},end:{line:135,column:33}},{start:{line:135,column:37},end:{line:135,column:38}}],line:135},19:{loc:{start:{line:136,column:19},end:{line:136,column:39}},type:"binary-expr",locations:[{start:{line:136,column:19},end:{line:136,column:33}},{start:{line:136,column:37},end:{line:136,column:39}}],line:136},20:{loc:{start:{line:137,column:18},end:{line:137,column:40}},type:"binary-expr",locations:[{start:{line:137,column:18},end:{line:137,column:31}},{start:{line:137,column:35},end:{line:137,column:40}}],line:137},21:{loc:{start:{line:142,column:15},end:{line:142,column:72}},type:"binary-expr",locations:[{start:{line:142,column:15},end:{line:142,column:25}},{start:{line:142,column:29},end:{line:142,column:72}}],line:142},22:{loc:{start:{line:147,column:17},end:{line:147,column:80}},type:"binary-expr",locations:[{start:{line:147,column:17},end:{line:147,column:29}},{start:{line:147,column:33},end:{line:147,column:80}}],line:147},23:{loc:{start:{line:148,column:19},end:{line:148,column:38}},type:"binary-expr",locations:[{start:{line:148,column:19},end:{line:148,column:33}},{start:{line:148,column:37},end:{line:148,column:38}}],line:148},24:{loc:{start:{line:149,column:19},end:{line:149,column:39}},type:"binary-expr",locations:[{start:{line:149,column:19},end:{line:149,column:33}},{start:{line:149,column:37},end:{line:149,column:39}}],line:149},25:{loc:{start:{line:150,column:18},end:{line:150,column:40}},type:"binary-expr",locations:[{start:{line:150,column:18},end:{line:150,column:31}},{start:{line:150,column:35},end:{line:150,column:40}}],line:150},26:{loc:{start:{line:151,column:20},end:{line:151,column:42}},type:"binary-expr",locations:[{start:{line:151,column:20},end:{line:151,column:35}},{start:{line:151,column:39},end:{line:151,column:42}}],line:151},27:{loc:{start:{line:156,column:15},end:{line:156,column:72}},type:"binary-expr",locations:[{start:{line:156,column:15},end:{line:156,column:25}},{start:{line:156,column:29},end:{line:156,column:72}}],line:156},28:{loc:{start:{line:161,column:17},end:{line:161,column:80}},type:"binary-expr",locations:[{start:{line:161,column:17},end:{line:161,column:29}},{start:{line:161,column:33},end:{line:161,column:80}}],line:161},29:{loc:{start:{line:162,column:19},end:{line:162,column:38}},type:"binary-expr",locations:[{start:{line:162,column:19},end:{line:162,column:33}},{start:{line:162,column:37},end:{line:162,column:38}}],line:162},30:{loc:{start:{line:163,column:19},end:{line:163,column:39}},type:"binary-expr",locations:[{start:{line:163,column:19},end:{line:163,column:33}},{start:{line:163,column:37},end:{line:163,column:39}}],line:163},31:{loc:{start:{line:164,column:20},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:20},end:{line:164,column:35}},{start:{line:164,column:39},end:{line:164,column:42}}],line:164}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0,0,0,0,0,0,0,0,0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalSources.tsx"],names:[],mappings:"AAgCU,cACA,YADA;AAhCV,OAAO,WAAW;AAClB,SAAQ,oBAAoB,gBAAe;AAC3C,OAAO,YAAY;AAEnB,SAA0B,uBAAuB;AAEjD,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,iBAAiB;AACxB,OAAO,4BAA4C;AAEnD,OAAO,WAAW;AAClB,SAAS,cAAc,WAAW,oBAAoB;AACtD,OAAO,mBAAmB;AAU1B,MAAM,qBAAqB,MAAM,UAA6B;AAAA,EAC5D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,0BACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,EAAE;AAAA,QAEhD;AAAA,+BAAC,SAAI,WAAU,+BACb;AAAA,gCAAC,OAAE,WAAU,+BAA+B,eAAK,MAAM,OAAM;AAAA,YAC7D,qBAAC,OAAE,WAAU,6BAA4B;AAAA;AAAA,cAAE,KAAK,MAAM;AAAA,eAAG;AAAA,aAC3D;AAAA,UACA,oBAAC,UAAK,WAAU,kBAAiB;AAAA,UACjC,oBAAC,sBAAmB;AAAA;AAAA;AAAA,IACtB,GACF;AAAA,EACF;AACF;AAEA,SAAS,WAAW,QAA6B;AAC/C,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,cAAc;AAC/B,QAAG,OAAO,MAAO,QAAO;AACxB,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,UAAU;AAC3B,QAAG,OAAO,MAAO,QAAO;AACxB,QAAG,OAAO,OAAO,OAAO,IAAI,WAAW,YAAY,EAAG,QAAO;AAC7D,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,WAAW;AAC5B,QAAI,OAAO,OAAO,SAAU,UAAU;AACpC,aAAO;AAAA,IACT,OACK;AACH,aAAO;AAAA,IACT;AAAA,EACF;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,MAAG,OAAO,SAAS,SAAS;AAC1B,WAAO;AAAA,EACT;AACA,SAAO;AACT;AASA,MAAM,qCAAqC,MAAM,UAA6C;AAAA,EAC5F,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO,qBAAC,SAAI,WAAU,sCACpB;AAAA,2BAAC,SAAI,WAAU,6CACb;AAAA,6BAAC,UAAK,WAAU,gDAA+C;AAAA;AAAA,UAAE,KAAK,MAAM;AAAA,WAAS;AAAA,QACrF,oBAAC,UAAK,WAAU,kBAAiB;AAAA,QACjC;AAAA,UAAC;AAAA;AAAA,YACC,cAAY,EAAE,gCAAgC,EAAC,UAAU,KAAK,MAAM,SAAQ,CAAC;AAAA,YAC7E,WAAU;AAAA,YACV,SAAS,MAAK,KAAK,MAAM,SAAS,KAAK,MAAM,QAAQ;AAAA,YACrD,OAAO,EAAC,iBAAiB,cAAa;AAAA,YAEtC,8BAAC,YAAS;AAAA;AAAA,QACZ;AAAA,SACF;AAAA,MACA,oBAAC,SAAI,WAAU,8CACb;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,MAAM,WAAW,KAAK,MAAM,MAAM;AAAA,UAClC,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB,GACF;AAAA,OACF;AAAA,EACF;AACF;AAYA,MAAM,kBAAkB,MAAM,UAA0C;AAAA,EACtE,YAAY,OAAuB;AACjC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,MAAM;AAAA,MACN,UAAU,MAAM,WAAW;AAAA,MAC3B,QAAQ,KAAK,cAAc,iBAAiB;AAAA,IAC9C;AAAA,EACF;AAAA,EAEA,cAAc,MAAuC;AACnD,UAAM,UAAU,KAAK,SAAS,CAAC,GAAG,UAAU,CAAC;AAC7C,UAAM,EAAC,SAAQ,IAAI,OAAO;AAE1B,YAAO,MAAM;AAAA,MACb,KAAK;AAAkB,eAAO;AAAA,UAC5B,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,QAClB;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,MAAM,GAAG,QAAQ;AAAA,QACnB;AAAA,MACA,KAAK;AAAgB,eAAO;AAAA,UAC1B,MAAM;AAAA,UACN,SAAU,OAAsC,WAAW;AAAA,UAC3D,MAAM;AAAA,QACR;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,QAC1D;AAAA,MACA,KAAK;AAAmB,eAAO;AAAA,UAC7B,MAAM;AAAA,UACN,KAAM,OAAqC,OAAO,GAAG,QAAQ;AAAA,QAC/D;AAAA,MACA,KAAK;AAAe,eAAO;AAAA,UACzB,MAAM;AAAA,UACN,OAAQ,OAAqC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACpG,SAAU,OAAqC,WAAW;AAAA,UAC1D,SAAU,OAAqC,WAAW;AAAA,UAC1D,QAAS,OAAqC,UAAU;AAAA,UACxD,UAAW,OAAqC,YAAY;AAAA,QAC9D;AAAA,MACA,KAAK;AAAuB,eAAO;AAAA,UACjC,MAAM;AAAA,UACN,KAAM,OAAwC,OAAO,GAAG,QAAQ;AAAA,QAClE;AAAA,MACA,KAAK;AAAsB,eAAO;AAAA,UAChC,MAAM;AAAA,UACN,OAAQ,OAAwC,SAAS,CAAC,GAAG,QAAQ,kCAAkC;AAAA,UACvG,SAAU,OAAwC,WAAW;AAAA,UAC7D,SAAU,OAAwC,WAAW;AAAA,UAC7D,UAAW,OAAwC,YAAY;AAAA,QACjE;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,KAAK,GAAG,QAAQ;AAAA,UAChB,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA,KAAK;AAAS,eAAO;AAAA,UACnB,MAAM;AAAA,UACN,MAAM;AAAA,YACJ,GAAG,QAAQ;AAAA,UACb;AAAA,UACA,aAAa;AAAA,YACX,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,YACJ,CAAC,GAAE,CAAC;AAAA,UACN;AAAA,QACF;AAAA,MACA;AAAS,eAAO,CAAC;AAAA,IACjB;AAAA,EACF;AAAA,EAEA,QAAQ,MAAM;AACZ,UAAM,EAAC,QAAQ,SAAQ,IAAI,KAAK;AAChC,SAAK,MAAM,MAAM,UAAU,MAAM;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,WAAgC;AAChD,SAAK,SAAS,EAAC,OAAM,CAAC;AAAA,EACxB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AAQrB,UAAM,sBAAsB;AAAA,MAC1B,KAAK,OAAO,cAAc,KAAK;AAAA,IACjC;AAEA,WAAO,qBAAC,SAAI,WAAU,uBACpB;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,WAAW;AAAA,UACpB,WAAW,EAAC,KAAK,EAAE,wFAAwF,EAAC;AAAA,UAC5G,OAAO,KAAK,MAAM;AAAA,UAClB,UAAU,CAAC,MAAc,KAAK,SAAS,EAAE,UAAU,EAAC,CAAC;AAAA,UACrD,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,OAAO,EAAE,aAAa;AAAA,UACtB,WAAW;AAAA,UACX,SAAS;AAAA,YACP,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;AAAA,YACpC,CAAC,eAAe,EAAE,eAAe,CAAC;AAAA,YAClC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,mBAAmB,EAAE,uBAAuB,CAAC;AAAA,YAC9C,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAAA,YACvC,CAAC,uBAAuB,EAAE,2BAA2B,CAAC;AAAA,YACtD,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;AAAA,YACjD,CAAC,kBAAkB,EAAE,kBAAkB,CAAC;AAAA,YACxC,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,YACpB,CAAC,SAAS,EAAE,OAAO,CAAC;AAAA,UACtB;AAAA,UACA,UAAU,UAAQ,KAAK,SAAS,EAAC,MAA0B,QAAQ,KAAK,cAAc,IAAkB,EAAC,CAAC;AAAA,UAC1G,OAAO,KAAK,MAAM;AAAA,UAClB,eAAY;AAAA;AAAA,MACd;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,UAAU,KAAK;AAAA,UACf,MAAM,KAAK,MAAM;AAAA,UACjB,QAAQ,KAAK,MAAM;AAAA;AAAA,MACrB;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACC,WAAU;AAAA,UACV,SAAS,KAAK;AAAA,UACd,eAAY;AAAA,UAEX,YAAE,YAAY;AAAA;AAAA,MACjB;AAAA,OACF;AAAA,EACF;AACF;AASA,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,WAAW,QAAqE;AAC9E,UAAM,iBAAiB,EAAC,GAAG,OAAM;AACjC,WAAO,eAAe,OAAO;AAC7B,WAAO;AAAA,EACT;AAAA,EAEA,SAAS;AACP,UAAM,EAAC,GAAG,SAAQ,IAAI,KAAK;AAC3B,UAAM,YAAY,EAAC,GAAG,MAAM,KAAK,MAAM,MAAM,QAAQ,KAAK,MAAM,OAAM;AACtE,UAAM,gBAAgB,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,cAAY;AAClE,YAAM,SAAS,SAAS,QAAQ,QAAQ;AACxC,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN;AAAA,UACA;AAAA,UACA,UAAU,CAAC,QAA6B,KAAK,MAAM,eAAe,aAAa,UAAU,UAAU,GAAG,CAAC;AAAA,UACvG,UAAU,MAAM,KAAK,MAAM,eAAe,aAAa,UAAU,QAAQ,CAAC;AAAA,UACzE,GAAG;AAAA;AAAA,QALC;AAAA,MAMP;AAAA,IACF,CAAC;AAED,UAAM,iBAAiB,OAAO,KAAK,aAAa,EAAE,OAAO,CAAC,aAAqB,EAAE,YAAY,SAAS,QAAQ,EAAE,IAAI,CAAC,aAAqB;AACxI,YAAM,SAAS,cAAc,QAAsC;AACnE,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,IAAI;AAAA,UACJ,MAAM,OAAO;AAAA,UACb,OAAO,OAAO;AAAA,UACd,UAAU,MAAM,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,KAAK,WAAW,MAAM,CAAC,CAAC;AAAA;AAAA,QAJ3F;AAAA,MAKP;AAAA,IACF,CAAC;AAED,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,SAAS;AAAA,QAElB;AAAA,+BAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACxB;AAAA,aACH;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,sBAAsB,GAAE;AAAA,YAC/B,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,YACA,oBAAC,SAAI,WAAU,2BAA0B,OAAO,EAAC,UAAU,IAAG,GAC3D,0BACH;AAAA,aACF;AAAA,UAEA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,YACzB,oBAAC,OAAG,YAAE,8FAA8F,GAAE;AAAA,YACtG;AAAA,cAAC;AAAA;AAAA,gBACC,OAAO,CAAC,UAAkB,WAAgC,KAAK,MAAM,eAAe,UAAU,UAAU,UAAU,MAAM,CAAC;AAAA,gBACxH,GAAG;AAAA;AAAA,YACN;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1a321f05fdc2b3edcde8eeb4fd25459ef69ddd1e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return An=function(){return l},l}An();class mAe extends sr.Component{render(){return An().f[0]++,An().s[0]++,le.jsx("div",{className:"maputnik-public-source",children:le.jsxs(il,{className:"maputnik-public-source-select",onClick:()=>(An().f[1]++,An().s[1]++,this.props.onSelect(this.props.id)),children:[le.jsxs("div",{className:"maputnik-public-source-info",children:[le.jsx("p",{className:"maputnik-public-source-name",children:this.props.title}),le.jsxs("p",{className:"maputnik-public-source-id",children:["#",this.props.id]})]}),le.jsx("span",{className:"maputnik-space"}),le.jsx(jF,{})]})})}}function gAe(n){return An().f[2]++,An().s[2]++,n.type==="raster"?(An().b[0][0]++,An().s[3]++,n.tiles?(An().b[1][0]++,An().s[4]++,"tile_raster"):(An().b[1][1]++,An().s[5]++,"tilejson_raster")):(An().b[0][1]++,An().s[6]++,n.type==="raster-dem"?(An().b[2][0]++,An().s[7]++,n.tiles?(An().b[3][0]++,An().s[8]++,"tilexyz_raster-dem"):(An().b[3][1]++,An().s[9]++,"tilejson_raster-dem")):(An().b[2][1]++,An().s[10]++,n.type==="vector"?(An().b[4][0]++,An().s[11]++,n.tiles?(An().b[5][0]++,An().s[12]++,"tile_vector"):(An().b[5][1]++,An().s[13]++,An().b[7][0]++,n.url&&(An().b[7][1]++,n.url.startsWith("pmtiles://"))?(An().b[6][0]++,An().s[14]++,"pmtiles_vector"):(An().b[6][1]++,An().s[15]++,"tilejson_vector"))):(An().b[4][1]++,An().s[16]++,n.type==="geojson"?(An().b[8][0]++,An().s[17]++,typeof n.data=="string"?(An().b[9][0]++,An().s[18]++,"geojson_url"):(An().b[9][1]++,An().s[19]++,"geojson_json")):(An().b[8][1]++,An().s[20]++,n.type==="image"?(An().b[10][0]++,An().s[21]++,"image"):(An().b[10][1]++,An().s[22]++,n.type==="video"?(An().b[11][0]++,An().s[23]++,"video"):(An().b[11][1]++,An().s[24]++,null))))))}class yAe extends sr.Component{render(){An().f[3]++;const e=(An().s[25]++,this.props.t);return An().s[26]++,le.jsxs("div",{className:"maputnik-active-source-type-editor",children:[le.jsxs("div",{className:"maputnik-active-source-type-editor-header",children:[le.jsxs("span",{className:"maputnik-active-source-type-editor-header-id",children:["#",this.props.sourceId]}),le.jsx("span",{className:"maputnik-space"}),le.jsx(il,{"aria-label":e("Remove '{{sourceId}}' source",{sourceId:this.props.sourceId}),className:"maputnik-active-source-type-editor-header-delete",onClick:()=>(An().f[4]++,An().s[27]++,this.props.onDelete(this.props.sourceId)),style:{backgroundColor:"transparent"},children:le.jsx(Ty,{})})]}),le.jsx("div",{className:"maputnik-active-source-type-editor-content",children:le.jsx(jj,{onChange:this.props.onChange,mode:gAe(this.props.source),source:this.props.source})})]})}}class vAe extends sr.Component{constructor(t){An().f[5]++,An().s[28]++;super(t);Pn(this,"onAdd",(An().s[45]++,()=>{An().f[7]++;const{source:t,sourceId:r}=(An().s[46]++,this.state);An().s[47]++,this.props.onAdd(r,t)}));Pn(this,"onChangeSource",(An().s[48]++,t=>{An().f[8]++,An().s[49]++,this.setState({source:t})}));An().s[29]++,this.state={mode:"tilejson_vector",sourceId:_c.generateId(),source:this.defaultSource("tilejson_vector")}}defaultSource(t){An().f[6]++;const r=(An().s[30]++,An().b[12][0]++,(An().b[13][0]++,this.state||(An().b[13][1]++,{})).source||(An().b[12][1]++,{})),{protocol:i}=(An().s[31]++,window.location);switch(An().s[32]++,t){case"pmtiles_vector":return An().b[14][0]++,An().s[33]++,{type:"vector",url:`${i}//localhost:3000/file.pmtiles`};case"geojson_url":return An().b[14][1]++,An().s[34]++,{type:"geojson",data:`${i}//localhost:3000/geojson.json`};case"geojson_json":return An().b[14][2]++,An().s[35]++,{type:"geojson",cluster:(An().b[15][0]++,r.cluster||(An().b[15][1]++,!1)),data:""};case"tilejson_vector":return An().b[14][3]++,An().s[36]++,{type:"vector",url:(An().b[16][0]++,r.url||(An().b[16][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_vector":return An().b[14][4]++,An().s[37]++,{type:"vector",tiles:(An().b[17][0]++,r.tiles||(An().b[17][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.pbf`])),minzoom:(An().b[18][0]++,r.minzoom||(An().b[18][1]++,0)),maxzoom:(An().b[19][0]++,r.maxzoom||(An().b[19][1]++,14)),scheme:(An().b[20][0]++,r.scheme||(An().b[20][1]++,"xyz"))};case"tilejson_raster":return An().b[14][5]++,An().s[38]++,{type:"raster",url:(An().b[21][0]++,r.url||(An().b[21][1]++,`${i}//localhost:3000/tilejson.json`))};case"tile_raster":return An().b[14][6]++,An().s[39]++,{type:"raster",tiles:(An().b[22][0]++,r.tiles||(An().b[22][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(An().b[23][0]++,r.minzoom||(An().b[23][1]++,0)),maxzoom:(An().b[24][0]++,r.maxzoom||(An().b[24][1]++,14)),scheme:(An().b[25][0]++,r.scheme||(An().b[25][1]++,"xyz")),tileSize:(An().b[26][0]++,r.tileSize||(An().b[26][1]++,512))};case"tilejson_raster-dem":return An().b[14][7]++,An().s[40]++,{type:"raster-dem",url:(An().b[27][0]++,r.url||(An().b[27][1]++,`${i}//localhost:3000/tilejson.json`))};case"tilexyz_raster-dem":return An().b[14][8]++,An().s[41]++,{type:"raster-dem",tiles:(An().b[28][0]++,r.tiles||(An().b[28][1]++,[`${i}//localhost:3000/{x}/{y}/{z}.png`])),minzoom:(An().b[29][0]++,r.minzoom||(An().b[29][1]++,0)),maxzoom:(An().b[30][0]++,r.maxzoom||(An().b[30][1]++,14)),tileSize:(An().b[31][0]++,r.tileSize||(An().b[31][1]++,512))};case"image":return An().b[14][9]++,An().s[42]++,{type:"image",url:`${i}//localhost:3000/image.png`,coordinates:[[0,0],[0,0],[0,0],[0,0]]};case"video":return An().b[14][10]++,An().s[43]++,{type:"video",urls:[`${i}//localhost:3000/movie.mp4`],coordinates:[[0,0],[0,0],[0,0],[0,0]]};default:return An().b[14][11]++,An().s[44]++,{}}}render(){An().f[9]++;const t=(An().s[50]++,this.props.t),r=(An().s[51]++,{doc:qo.source_vector.type.doc});return An().s[52]++,le.jsxs("div",{className:"maputnik-add-source",children:[le.jsx(jp,{label:t("Source ID"),fieldSpec:{doc:t("Unique ID that identifies the source and is used in the layer to reference the source.")},value:this.state.sourceId,onChange:i=>(An().f[10]++,An().s[53]++,this.setState({sourceId:i})),"data-wd-key":"modal:sources.add.source_id"}),le.jsx(e3,{label:t("Source Type"),fieldSpec:r,options:[["geojson_json",t("GeoJSON (JSON)")],["geojson_url",t("GeoJSON (URL)")],["tilejson_vector",t("Vector (TileJSON URL)")],["tile_vector",t("Vector (Tile URLs)")],["tilejson_raster",t("Raster (TileJSON URL)")],["tile_raster",t("Raster (Tile URLs)")],["tilejson_raster-dem",t("Raster DEM (TileJSON URL)")],["tilexyz_raster-dem",t("Raster DEM (XYZ URLs)")],["pmtiles_vector",t("Vector (PMTiles)")],["image",t("Image")],["video",t("Video")]],onChange:i=>(An().f[11]++,An().s[54]++,this.setState({mode:i,source:this.defaultSource(i)})),value:this.state.mode,"data-wd-key":"modal:sources.add.source_type"}),le.jsx(jj,{onChange:this.onChangeSource,mode:this.state.mode,source:this.state.source}),le.jsx(il,{className:"maputnik-add-source-button",onClick:this.onAdd,"data-wd-key":"modal:sources.add.add_source",children:t("Add Source")})]})}}class CAe extends sr.Component{stripTitle(e){An().f[12]++;const t=(An().s[55]++,{...e});return An().s[56]++,delete t.title,An().s[57]++,t}render(){An().f[13]++;const{t:e,mapStyle:t}=(An().s[58]++,this.props),r=(An().s[59]++,{t:e,i18n:this.props.i18n,tReady:this.props.tReady}),i=(An().s[60]++,Object.keys(t.sources).map(l=>{An().f[14]++;const o=(An().s[61]++,t.sources[l]);return An().s[62]++,le.jsx(yAe,{sourceId:l,source:o,onChange:p=>(An().f[15]++,An().s[63]++,this.props.onStyleChanged(Nj(t,l,p))),onDelete:()=>(An().f[16]++,An().s[64]++,this.props.onStyleChanged(cAe(t,l))),...r},l)})),s=(An().s[65]++,Object.keys(mR).filter(l=>(An().f[17]++,An().s[66]++,!(l in t.sources))).map(l=>{An().f[18]++;const o=(An().s[67]++,mR[l]);return An().s[68]++,le.jsx(mAe,{id:l,type:o.type,title:o.title,onSelect:()=>(An().f[19]++,An().s[69]++,this.props.onStyleChanged(pR(t,l,this.stripTitle(o))))},l)}));return An().s[70]++,le.jsxs(L0,{"data-wd-key":"modal:sources",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Sources"),children:[le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Active Sources")}),i]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Choose Public Source")}),le.jsx("p",{children:e("Add one of the publicly available sources to your style.")}),le.jsx("div",{className:"maputnik-public-sources",style:{maxWidth:500},children:s})]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:e("Add New Source")}),le.jsx("p",{children:e("Add a new source to your style. You can only choose the source type and id at creation time!")}),le.jsx(vAe,{onAdd:(l,o)=>(An().f[20]++,An().s[71]++,this.props.onStyleChanged(pR(t,l,o))),...r})]})]})}}const _Ae=(An().s[72]++,Ws()(CAe));var vb={},gR;function bAe(){if(gR)return vb;gR=1,Object.defineProperty(vb,"__esModule",{value:!0});var n=Object.assign||function(U){for(var j=1;j<arguments.length;j++){var N=arguments[j];for(var q in N)Object.prototype.hasOwnProperty.call(N,q)&&(U[q]=N[q])}return U},e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},t=function(){function U(j,N){for(var q=0;q<N.length;q++){var H=N[q];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(j,H.key,H)}}return function(j,N,q){return N&&U(j.prototype,N),q&&U(j,q),j}}(),r=Na(),i=p(r),s=RC(),l=o(s);function o(U){return U&&U.__esModule?U:{default:U}}function p(U){if(U&&U.__esModule)return U;var j={};if(U!=null)for(var N in U)Object.prototype.hasOwnProperty.call(U,N)&&(j[N]=U[N]);return j.default=U,j}function v(U,j){var N={};for(var q in U)j.indexOf(q)>=0||Object.prototype.hasOwnProperty.call(U,q)&&(N[q]=U[q]);return N}function x(U,j){if(!(U instanceof j))throw new TypeError("Cannot call a class as a function")}function B(U,j){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:U}function T(U,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);U.prototype=Object.create(j&&j.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(U,j):U.__proto__=j)}var P=function(U){T(j,U);function j(N){x(this,j);var q=B(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,N));q.handleChange=function(oe){var te=Array.prototype.slice.call(oe.target.files),V=(q.props.as||"url").toLowerCase();Promise.all(te.map(function(ne){return new Promise(function(W,ie){var he=new FileReader;switch(he.onload=function(fe){W([fe,ne])},V){case"binary":{he.readAsBinaryString(ne);break}case"buffer":{he.readAsArrayBuffer(ne);break}case"text":{he.readAsText(ne);break}case"url":{he.readAsDataURL(ne);break}}})})).then(function(ne){q.props.onChange(oe,ne)})},q.triggerInput=function(){var oe=l.default.findDOMNode(q._reactFileReaderInput);oe&&oe.click()};var H=(typeof window>"u"?"undefined":e(window))==="object"?window:{};return(!H.File||!H.FileReader||!H.FileList||!H.Blob)&&console.warn("[react-file-reader-input] Some file APIs detected as not supported. File reader functionality may not fully work."),q}return t(j,[{key:"render",value:function(){var q=this,H=this.props;H.as;var oe=H.children,te=H.style,V=v(H,["as","children","style"]),ne=oe?{position:"absolute",top:"-9999px"}:{};return i.createElement("div",{className:"_react-file-reader-input",onClick:this.triggerInput,style:te},i.createElement("input",n({},V,{type:"file",ref:function(ie){q._reactFileReaderInput=ie},onChange:this.handleChange,onClick:function(){q._reactFileReaderInput.value=null},style:ne})),oe)}}]),j}(i.Component);return vb.default=P,vb}var xAe=bAe();const MAe=yl(xAe);function hh(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",e="8092b056f21d597f3cd7d476fbebca118ff97879",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx",statementMap:{0:{start:{line:8,column:4},end:{line:8,column:24}},1:{start:{line:11,column:14},end:{line:11,column:26}},2:{start:{line:12,column:4},end:{line:29,column:6}},3:{start:{line:20,column:26},end:{line:20,column:42}},4:{start:{line:23,column:28},end:{line:23,column:49}},5:{start:{line:26,column:137},end:{line:26,column:159}},6:{start:{line:32,column:21},end:{line:32,column:60}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:2},end:{line:7,column:3}},loc:{start:{line:7,column:21},end:{line:9,column:3}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:10,column:2},end:{line:10,column:3}},loc:{start:{line:10,column:11},end:{line:30,column:3}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:20,column:19},end:{line:20,column:20}},loc:{start:{line:20,column:26},end:{line:20,column:42}},line:20},3:{name:"(anonymous_3)",decl:{start:{line:23,column:22},end:{line:23,column:23}},loc:{start:{line:23,column:28},end:{line:23,column:49}},line:23},4:{name:"(anonymous_4)",decl:{start:{line:26,column:130},end:{line:26,column:131}},loc:{start:{line:26,column:137},end:{line:26,column:159}},line:26}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalLoading.tsx"],names:[],mappings:"AAuBW,SAWL,KAXK;AAvBX,OAAO,WAAW;AAElB,OAAO,iBAAiB;AACxB,OAAO,WAAW;AAClB,SAA0B,uBAAuB;AAWjD,MAAM,6BAA6B,MAAM,UAAqC;AAAA,EAC5E,gBAAgB,GAAU;AAExB,MAAE,gBAAgB;AAAA,EACpB;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,oBAAoB;AAAA,QACpB,eAAe;AAAA;AAAA,UAEb,SAAS,CAAC,MAAa,cAAc,CAAC;AAAA,QACxC;AAAA,QACA,OAAO,KAAK,MAAM;AAAA,QAClB,cAAc,MAAM,KAAK,MAAM,SAAS;AAAA,QAExC;AAAA,8BAAC,OACE,eAAK,MAAM,SACd;AAAA,UACA,oBAAC,OAAE,WAAU,4BACX,8BAAC,eAAY,SAAS,CAAC,MAAM,KAAK,MAAM,SAAS,CAAC,GAC/C,YAAE,QAAQ,GACb,GACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,eAAe,gBAAgB,EAAE,oBAAoB;AAC3D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8092b056f21d597f3cd7d476fbebca118ff97879"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return hh=function(){return l},l}hh();class wAe extends sr.Component{underlayOnClick(e){hh().f[0]++,hh().s[0]++,e.stopPropagation()}render(){hh().f[1]++;const e=(hh().s[1]++,this.props.t);return hh().s[2]++,le.jsxs(L0,{"data-wd-key":"modal:loading",isOpen:this.props.isOpen,underlayClickExits:!1,underlayProps:{onClick:t=>(hh().f[2]++,hh().s[3]++,underlayProps(t))},title:this.props.title,onOpenToggle:()=>(hh().f[3]++,hh().s[4]++,this.props.onCancel()),children:[le.jsx("p",{children:this.props.message}),le.jsx("p",{className:"maputnik-dialog__buttons",children:le.jsx(il,{onClick:t=>(hh().f[4]++,hh().s[5]++,this.props.onCancel(t)),children:e("Cancel")})})]})}}const SAe=(hh().s[6]++,Ws()(wAe)),Wj=[{id:"0-empty-style",title:"Empty Style",url:"https://cdn.jsdelivr.net/gh/maputnik/editor@9cf74ca405d2be0608b57db8109cf3a6af5b9f49/src/config/empty-style.json",thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAQAAAAHDYbIAAAAEUlEQVR42mP8/58BDhiJ4wAA974H/U5Xe1oAAAAASUVORK5CYII="},{id:"americana",title:"Americana",url:"https://americanamap.org/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/23fa75ad-63e6-43f5-8837-03cdb0428bac"},{id:"dark-matter",title:"Dark Matter",url:"https://cdn.jsdelivr.net/gh/openmaptiles/dark-matter-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/dark-matter.png"},{id:"maptiler-basic-gl-style",title:"MapTiler Basic",url:"https://cdn.jsdelivr.net/gh/openmaptiles/klokantech-basic-gl-style@v1.10/style.json",thumbnail:"https://maputnik.github.io/thumbnails/klokantech-basic.png"},{id:"maptiler-toner-gl-style",title:"Toner",url:"https://cdn.jsdelivr.net/gh/openmaptiles/toner-gl-style@v1.0/style.json",thumbnail:"https://maputnik.github.io/thumbnails/toner.png"},{id:"os-zoomstack-light",title:"Zoomstack Light",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-light/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-light.png"},{id:"os-zoomstack-night",title:"Zoomstack Night",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-night/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-night.png"},{id:"os-zoomstack-outdoor",title:"Zoomstack Outdoor",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-outdoor/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-outdoor.png"},{id:"os-zoomstack-road",title:"Zoomstack Road",url:"https://s3-eu-west-1.amazonaws.com/tiles.os.uk/v2/styles/open-zoomstack-road/style.json",thumbnail:"https://maputnik.github.io/thumbnails/os-zoomstack-road.png"},{id:"osm-bright",title:"OSM Bright",url:"https://cdn.jsdelivr.net/gh/openmaptiles/osm-bright-gl-style@v1.11/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-bright.png"},{id:"osm-liberty",title:"OSM Liberty",url:"https://maputnik.github.io/osm-liberty/style.json",thumbnail:"https://maputnik.github.io/thumbnails/osm-liberty.png"},{id:"osm-openmaptiles",title:"OSM OpenMapTiles",url:"https://api.maptiler.com/maps/openstreetmap/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",thumbnail:"https://openmaptiles.org/img/styles/openmaptiles.png"},{id:"positron",title:"Positron",url:"https://cdn.jsdelivr.net/gh/openmaptiles/positron-gl-style@v1.9/style.json",thumbnail:"https://maputnik.github.io/thumbnails/positron.png"},{id:"protomaps-light",title:"Protomaps Light",url:"https://api.protomaps.com/styles/v4/light/en.json?key=d828297496b11844",thumbnail:"https://github.com/user-attachments/assets/911f9765-4a7d-4736-9ec0-f2d4c90ae587"},{id:"stadia-outdoors",title:"Stadia Outdoors",url:"https://tiles.stadiamaps.com/styles/outdoors.json",thumbnail:"https://tiles.stadiamaps.com/static/outdoors.png?size=480x320&center=47.350259,8.49035&zoom=16"},{id:"versatiles-colorful",title:"Versatiles Colorful",url:"https://tiles.versatiles.org/assets/styles/colorful/style.json",thumbnail:"https://github.com/maplibre/maputnik/assets/649392/6cd69818-c541-46e4-a920-65fb4f654931"}];function Ar(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",e="29ff9eb08a4518c25ccd9ea0089ac05d05f682b1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx",statementMap:{0:{start:{line:15,column:4},end:{line:38,column:9}},1:{start:{line:20,column:23},end:{line:20,column:58}},2:{start:{line:43,column:4},end:{line:43,column:17}},3:{start:{line:44,column:4},end:{line:46,column:6}},4:{start:{line:49,column:4},end:{line:51,column:7}},5:{start:{line:54,column:4},end:{line:54,column:31}},6:{start:{line:54,column:11},end:{line:54,column:31}},7:{start:{line:55,column:4},end:{line:61,column:5}},8:{start:{line:56,column:6},end:{line:56,column:39}},9:{start:{line:57,column:6},end:{line:60,column:9}},10:{start:{line:63,column:18},end:{line:100,column:3}},11:{start:{line:64,column:4},end:{line:64,column:22}},12:{start:{line:65,column:19},end:{line:65,column:24}},13:{start:{line:66,column:4},end:{line:91,column:7}},14:{start:{line:70,column:6},end:{line:70,column:29}},15:{start:{line:72,column:6},end:{line:74,column:7}},16:{start:{line:73,column:8},end:{line:73,column:15}},17:{start:{line:75,column:6},end:{line:78,column:9}},18:{start:{line:79,column:23},end:{line:79,column:54}},19:{start:{line:80,column:6},end:{line:80,column:48}},20:{start:{line:81,column:6},end:{line:81,column:39}},21:{start:{line:82,column:6},end:{line:82,column:26}},22:{start:{line:84,column:6},end:{line:88,column:9}},23:{start:{line:89,column:6},end:{line:89,column:25}},24:{start:{line:90,column:6},end:{line:90,column:61}},25:{start:{line:92,column:4},end:{line:99,column:7}},26:{start:{line:95,column:10},end:{line:95,column:26}},27:{start:{line:101,column:16},end:{line:104,column:3}},28:{start:{line:102,column:4},end:{line:102,column:23}},29:{start:{line:103,column:4},end:{line:103,column:44}},30:{start:{line:105,column:15},end:{line:132,column:3}},31:{start:{line:106,column:4},end:{line:106,column:22}},32:{start:{line:107,column:23},end:{line:115,column:5}},33:{start:{line:116,column:25},end:{line:116,column:68}},34:{start:{line:117,column:17},end:{line:117,column:43}},35:{start:{line:118,column:20},end:{line:118,column:37}},36:{start:{line:120,column:4},end:{line:127,column:5}},37:{start:{line:121,column:6},end:{line:121,column:37}},38:{start:{line:123,column:6},end:{line:125,column:9}},39:{start:{line:126,column:6},end:{line:126,column:13}},40:{start:{line:128,column:4},end:{line:128,column:51}},41:{start:{line:129,column:4},end:{line:129,column:49}},42:{start:{line:130,column:4},end:{line:130,column:24}},43:{start:{line:131,column:4},end:{line:131,column:16}},44:{start:{line:135,column:18},end:{line:155,column:3}},45:{start:{line:136,column:21},end:{line:136,column:29}},46:{start:{line:137,column:19},end:{line:137,column:35}},47:{start:{line:138,column:4},end:{line:138,column:22}},48:{start:{line:139,column:4},end:{line:139,column:37}},49:{start:{line:140,column:4},end:{line:153,column:6}},50:{start:{line:142,column:6},end:{line:149,column:7}},51:{start:{line:143,column:8},end:{line:143,column:48}},52:{start:{line:145,column:8},end:{line:147,column:11}},53:{start:{line:148,column:8},end:{line:148,column:15}},54:{start:{line:150,column:6},end:{line:150,column:53}},55:{start:{line:151,column:6},end:{line:151,column:39}},56:{start:{line:152,column:6},end:{line:152,column:26}},57:{start:{line:154,column:4},end:{line:154,column:50}},58:{start:{line:154,column:28},end:{line:154,column:49}},59:{start:{line:157,column:4},end:{line:159,column:7}},60:{start:{line:160,column:4},end:{line:160,column:22}},61:{start:{line:161,column:4},end:{line:161,column:30}},62:{start:{line:163,column:16},end:{line:167,column:3}},63:{start:{line:164,column:4},end:{line:166,column:7}},64:{start:{line:169,column:14},end:{line:169,column:26}},65:{start:{line:170,column:25},end:{line:181,column:6}},66:{start:{line:171,column:6},end:{line:180,column:8}},67:{start:{line:183,column:4},end:{line:188,column:5}},68:{start:{line:184,column:6},end:{line:187,column:11}},69:{start:{line:186,column:61},end:{line:186,column:78}},70:{start:{line:189,column:4},end:{line:267,column:9}},71:{start:{line:195,column:30},end:{line:195,column:49}},72:{start:{line:263,column:27},end:{line:263,column:56}},73:{start:{line:270,column:18},end:{line:270,column:54}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:11},end:{line:39,column:3}},line:14},1:{name:"(anonymous_1)",decl:{start:{line:20,column:17},end:{line:20,column:18}},loc:{start:{line:20,column:23},end:{line:20,column:58}},line:20},2:{name:"(anonymous_2)",decl:{start:{line:42,column:2},end:{line:42,column:3}},loc:{start:{line:42,column:21},end:{line:47,column:3}},line:42},3:{name:"(anonymous_3)",decl:{start:{line:48,column:2},end:{line:48,column:3}},loc:{start:{line:48,column:15},end:{line:52,column:3}},line:48},4:{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:27},end:{line:62,column:3}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:63,column:18},end:{line:63,column:19}},loc:{start:{line:63,column:32},end:{line:100,column:3}},line:63},6:{name:"(anonymous_6)",decl:{start:{line:69,column:12},end:{line:69,column:13}},loc:{start:{line:69,column:31},end:{line:71,column:5}},line:69},7:{name:"(anonymous_7)",decl:{start:{line:71,column:12},end:{line:71,column:13}},loc:{start:{line:71,column:22},end:{line:83,column:5}},line:71},8:{name:"(anonymous_8)",decl:{start:{line:83,column:13},end:{line:83,column:14}},loc:{start:{line:83,column:22},end:{line:91,column:5}},line:83},9:{name:"(anonymous_9)",decl:{start:{line:94,column:15},end:{line:94,column:16}},loc:{start:{line:94,column:26},end:{line:96,column:9}},line:94},10:{name:"(anonymous_10)",decl:{start:{line:101,column:16},end:{line:101,column:17}},loc:{start:{line:101,column:23},end:{line:104,column:3}},line:101},11:{name:"(anonymous_11)",decl:{start:{line:105,column:15},end:{line:105,column:16}},loc:{start:{line:105,column:27},end:{line:132,column:3}},line:105},12:{name:"(anonymous_12)",decl:{start:{line:135,column:18},end:{line:135,column:19}},loc:{start:{line:135,column:38},end:{line:155,column:3}},line:135},13:{name:"(anonymous_13)",decl:{start:{line:140,column:20},end:{line:140,column:21}},loc:{start:{line:140,column:27},end:{line:153,column:5}},line:140},14:{name:"(anonymous_14)",decl:{start:{line:154,column:21},end:{line:154,column:22}},loc:{start:{line:154,column:28},end:{line:154,column:49}},line:154},15:{name:"(anonymous_15)",decl:{start:{line:156,column:2},end:{line:156,column:3}},loc:{start:{line:156,column:17},end:{line:162,column:3}},line:156},16:{name:"(anonymous_16)",decl:{start:{line:163,column:16},end:{line:163,column:17}},loc:{start:{line:163,column:25},end:{line:167,column:3}},line:163},17:{name:"(anonymous_17)",decl:{start:{line:168,column:2},end:{line:168,column:3}},loc:{start:{line:168,column:11},end:{line:268,column:3}},line:168},18:{name:"(anonymous_18)",decl:{start:{line:170,column:42},end:{line:170,column:43}},loc:{start:{line:170,column:54},end:{line:181,column:5}},line:170},19:{name:"(anonymous_19)",decl:{start:{line:186,column:55},end:{line:186,column:56}},loc:{start:{line:186,column:61},end:{line:186,column:78}},line:186},20:{name:"(anonymous_20)",decl:{start:{line:195,column:24},end:{line:195,column:25}},loc:{start:{line:195,column:30},end:{line:195,column:49}},line:195},21:{name:"(anonymous_21)",decl:{start:{line:263,column:20},end:{line:263,column:21}},loc:{start:{line:263,column:27},end:{line:263,column:56}},line:263}},branchMap:{0:{loc:{start:{line:54,column:4},end:{line:54,column:31}},type:"if",locations:[{start:{line:54,column:4},end:{line:54,column:31}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:54},1:{loc:{start:{line:55,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:55,column:4},end:{line:61,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:72,column:6},end:{line:74,column:7}},type:"if",locations:[{start:{line:72,column:6},end:{line:74,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:72},3:{loc:{start:{line:183,column:4},end:{line:188,column:5}},type:"if",locations:[{start:{line:183,column:4},end:{line:188,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:183},4:{loc:{start:{line:202,column:53},end:{line:217,column:21}},type:"cond-expr",locations:[{start:{line:202,column:119},end:{line:213,column:15}},{start:{line:213,column:34},end:{line:217,column:21}}],line:202}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalOpen.tsx"],names:["style"],mappings:"AA6BQ,SACE,KADF;AA7BR,OAAO,WAA0B;AACjC,SAAQ,oBAAmB;AAC3B,SAAQ,0BAAyB;AACjC,OAAO,qBAAiC;AACxC,SAAS,OAAwB,uBAAuB;AAExD,OAAO,kBAAkB;AACzB,OAAO,WAAW;AAClB,OAAO,iBAAiB;AACxB,OAAO,cAAc;AAErB,OAAO,WAAW;AAClB,OAAO,kBAAkB;AASzB,MAAM,oBAAoB,MAAM,UAA4B;AAAA,EAC1D,SAAS;AACP,WAAO,oBAAC,SAAI,WAAU,yBACpB;AAAA,MAAC;AAAA;AAAA,QACC,WAAU;AAAA,QACV,cAAY,KAAK,MAAM;AAAA,QACvB,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,MAAM,GAAG;AAAA,QAEjD;AAAA,+BAAC,SAAI,WAAU,gCACb;AAAA,gCAAC,SAAK,eAAK,MAAM,OAAM;AAAA,YACvB,oBAAC,UAAK,WAAU,kBAAiB;AAAA,YACjC,oBAAC,sBAAmB;AAAA,aACtB;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAU;AAAA,cACV,OAAO;AAAA,gBACL,iBAAiB,OAAO,KAAK,MAAM,YAAY;AAAA,cACjD;AAAA;AAAA,UACD;AAAA;AAAA;AAAA,IACH,GACF;AAAA,EACF;AACF;AAgBA,MAAM,0BAA0B,MAAM,UAAkD;AAAA,EACtF,YAAY,OAA+B;AACzC,UAAM,KAAK;AACX,SAAK,QAAQ;AAAA,MACX,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAa;AACX,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,sBAAsB,GAAU;AAE9B,QAAG,EAAG,GAAE,gBAAgB;AAExB,QAAG,KAAK,MAAM,eAAe;AAC3B,WAAK,MAAM,cAAc,MAAM;AAC/B,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,aAAqB;AACpC,SAAK,WAAW;AAEhB,QAAI,WAAoB;AAExB,UAAM,UAAU;AAAA,MACd,MAAM;AAAA,MACN,aAAa;AAAA,IACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,UAAG,UAAU;AACX;AAAA,MACF;AAEA,WAAK,SAAS;AAAA,QACZ,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AAED,YAAM,WAAW,MAAM,oBAAoB,IAAI;AAC/C,cAAQ,IAAI,iBAAiB,SAAS,EAAE;AACxC,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB,CAAC,EACA,MAAM,CAAC,QAAQ;AACd,WAAK,SAAS;AAAA,QACZ,OAAO,oBAAoB,QAAQ;AAAA,QACnC,eAAe;AAAA,QACf,kBAAkB;AAAA,MACpB,CAAC;AACD,cAAQ,MAAM,GAAG;AACjB,cAAQ,KAAK,gCAAgC,QAAQ;AAAA,IACvD,CAAC;AAEH,SAAK,SAAS;AAAA,MACZ,eAAe;AAAA,QACb,OAAO,WAAW;AAChB,qBAAW;AAAA,QACb;AAAA,MACF;AAAA,MACA,kBAAkB;AAAA,IACpB,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,MAAkC;AAC/C,MAAE,eAAe;AACjB,SAAK,cAAc,KAAK,MAAM,QAAQ;AAAA,EACxC;AAAA,EAEA,aAAa,YAAY;AACvB,SAAK,WAAW;AAEhB,UAAM,aAAoC;AAAA,MACxC,OAAO;AAAA,QACL;AAAA,UACE,aAAa;AAAA,UACb,QAAQ,EAAE,oBAAoB,CAAC,OAAO,EAAE;AAAA,QAC1C;AAAA,MACF;AAAA,MACA,UAAU;AAAA,IACZ;AAEA,UAAM,CAAC,UAAU,IAAI,MAAM,OAAO,mBAAmB,UAAU;AAC/D,UAAM,OAAO,MAAM,WAAW,QAAQ;AACtC,UAAM,UAAU,MAAM,KAAK,KAAK;AAEhC,QAAI;AACJ,QAAI;AACF,iBAAW,KAAK,MAAM,OAAO;AAAA,IAC/B,SAAS,KAAK;AACZ,WAAK,SAAS;AAAA,QACZ,OAAQ,IAAc,SAAS;AAAA,MACjC,CAAC;AACD;AAAA,IACF;AACA,eAAW,MAAM,oBAAoB,QAAQ;AAE7C,SAAK,MAAM,YAAY,UAAU,UAAU;AAC3C,SAAK,aAAa;AAClB,WAAO;AAAA,EACT;AAAA;AAAA;AAAA,EAIA,gBAAgB,OAAO,GAAQ,UAAoB;AACjD,UAAM,CAAC,EAAE,IAAI,IAAI,MAAM,CAAC;AACxB,UAAM,SAAS,IAAI,WAAW;AAC9B,SAAK,WAAW;AAEhB,WAAO,WAAW,MAAM,OAAO;AAC/B,WAAO,SAAS,OAAK;AACnB,UAAI;AACJ,UAAI;AACF,mBAAW,KAAK,MAAM,EAAE,QAAQ,MAAgB;AAAA,MAClD,SACM,KAAK;AACT,aAAK,SAAS;AAAA,UACZ,OAAQ,IAAc,SAAS;AAAA,QACjC,CAAC;AACD;AAAA,MACF;AACA,iBAAW,MAAM,oBAAoB,QAAQ;AAC7C,WAAK,MAAM,YAAY,QAAQ;AAC/B,WAAK,aAAa;AAAA,IACpB;AACA,WAAO,UAAU,OAAK,QAAQ,IAAI,EAAE,MAAM;AAAA,EAC5C;AAAA,EAEA,eAAe;AACb,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AACD,SAAK,WAAW;AAChB,SAAK,MAAM,aAAa;AAAA,EAC1B;AAAA,EAEA,cAAc,CAAC,QAAgB;AAC7B,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,eAAe,aAAa,IAAI,CAAAA,WAAS;AAC7C,aAAO;AAAA,QAAC;AAAA;AAAA,UAEN,KAAKA,OAAM;AAAA,UACX,OAAOA,OAAM;AAAA,UACb,cAAcA,OAAM;AAAA,UACpB,UAAU,KAAK;AAAA;AAAA,QAJVA,OAAM;AAAA,MAKb;AAAA,IACF,CAAC;AAED,QAAI;AACJ,QAAG,KAAK,MAAM,OAAO;AACnB,qBACE,qBAAC,SAAI,WAAU,wBACZ;AAAA,aAAK,MAAM;AAAA,QACZ,oBAAC,OAAE,MAAK,KAAI,SAAS,MAAM,KAAK,WAAW,GAAG,WAAU,8BAA6B,eAAC;AAAA,SACxF;AAAA,IAEJ;AAEA,WACE,qBAAC,SACC;AAAA;AAAA,QAAC;AAAA;AAAA,UACC,eAAY;AAAA,UACZ,QAAQ,KAAK,MAAM;AAAA,UACnB,cAAc,MAAM,KAAK,aAAa;AAAA,UACtC,OAAO,EAAE,YAAY;AAAA,UAEpB;AAAA;AAAA,YACD,qBAAC,aAAQ,WAAU,0BACjB;AAAA,kCAAC,QAAI,YAAE,kBAAkB,GAAE;AAAA,cAC3B,oBAAC,OAAG,YAAE,6CAA6C,GAAE;AAAA,cACrD,oBAAC,SACE,iBAAO,OAAO,uBAAuB,aACpC;AAAA,gBAAC;AAAA;AAAA,kBACC,WAAU;AAAA,kBACV,SAAS,KAAK;AAAA,kBAAY;AAAA,wCAAC,gBAAY;AAAA,oBAAE;AAAA,oBAAE,EAAE,YAAY;AAAA;AAAA;AAAA,cAC3D,IAEA,oBAAC,mBAAgB,UAAU,KAAK,eAAe,UAAU,IAAI,cAAY,EAAE,YAAY,GACrF,+BAAC,eAAY,WAAU,0BAAyB;AAAA,oCAAC,gBAAa;AAAA,gBAAE;AAAA,gBAAE,EAAE,YAAY;AAAA,iBAAE,GACpF,GAEJ;AAAA,eACF;AAAA,YAEA,oBAAC,aAAQ,WAAU,0BACjB,+BAAC,UAAK,UAAU,KAAK,aACnB;AAAA,kCAAC,QAAI,YAAE,eAAe,GAAE;AAAA,cACxB,oBAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,gBACkC,oBAAC,OAAE,MAAK,2BAA0B,QAAO,UAAS,KAAI,uBAAsB,0BAAY;AAAA,gBAAI;AAAA,iBAC3I,GACF;AAAA,cACA;AAAA,gBAAC;AAAA;AAAA,kBACC,cAAY,EAAE,WAAW;AAAA,kBACzB,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,SAAS,EAAE,cAAc;AAAA,kBACzB,OAAO,KAAK,MAAM;AAAA,kBAClB,SAAS,KAAK;AAAA,kBACd,UAAU,KAAK;AAAA;AAAA,cACjB;AAAA,cACA,oBAAC,SACC;AAAA,gBAAC;AAAA;AAAA,kBACC,eAAY;AAAA,kBACZ,MAAK;AAAA,kBACL,WAAU;AAAA,kBACV,UAAU,KAAK,MAAM,SAAS,SAAS;AAAA,kBACxC;AAAA;AAAA,cAAa,GAChB;AAAA,eACF,GACF;AAAA,YAEA,qBAAC,aAAQ,WAAU,yDACjB;AAAA,kCAAC,QAAI,YAAE,gBAAgB,GAAE;AAAA,cACzB,oBAAC,OACE,YAAE,0DAA0D,GAC/D;AAAA,cACA,oBAAC,SAAI,WAAU,oCACZ,wBACH;AAAA,eACF;AAAA;AAAA;AAAA,MACF;AAAA,MAEA;AAAA,QAAC;AAAA;AAAA,UACC,QAAQ,CAAC,CAAC,KAAK,MAAM;AAAA,UACrB,OAAO,EAAE,eAAe;AAAA,UACxB,UAAU,CAAC,MAAa,KAAK,sBAAsB,CAAC;AAAA,UACpD,SAAS,EAAE,2BAA2B,EAAE,YAAY,KAAK,MAAM,iBAAiB,CAAC;AAAA;AAAA,MACnF;AAAA,OACF;AAAA,EAEJ;AACF;AAEA,MAAM,YAAY,gBAAgB,EAAE,iBAAiB;AACrD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"29ff9eb08a4518c25ccd9ea0089ac05d05f682b1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ar=function(){return l},l}Ar();class EAe extends sr.Component{render(){return Ar().f[0]++,Ar().s[0]++,le.jsx("div",{className:"maputnik-public-style",children:le.jsxs(il,{className:"maputnik-public-style-button","aria-label":this.props.title,onClick:()=>(Ar().f[1]++,Ar().s[1]++,this.props.onSelect(this.props.url)),children:[le.jsxs("div",{className:"maputnik-public-style-header",children:[le.jsx("div",{children:this.props.title}),le.jsx("span",{className:"maputnik-space"}),le.jsx(jF,{})]}),le.jsx("div",{className:"maputnik-public-style-thumbnail",style:{backgroundImage:`url(${this.props.thumbnailUrl})`}})]})})}}class BAe extends sr.Component{constructor(t){Ar().f[2]++,Ar().s[2]++;super(t);Pn(this,"onStyleSelect",(Ar().s[10]++,t=>{Ar().f[5]++,Ar().s[11]++,this.clearError();let r=(Ar().s[12]++,!1);Ar().s[13]++,fetch(t,{mode:"cors",credentials:"same-origin"}).then(function(i){return Ar().f[6]++,Ar().s[14]++,i.json()}).then(i=>{if(Ar().f[7]++,Ar().s[15]++,r){Ar().b[2][0]++,Ar().s[16]++;return}else Ar().b[2][1]++;Ar().s[17]++,this.setState({activeRequest:null,activeRequestUrl:null});const s=(Ar().s[18]++,_c.ensureStyleValidity(i));Ar().s[19]++,console.log("Loaded style ",s.id),Ar().s[20]++,this.props.onStyleOpen(s),Ar().s[21]++,this.onOpenToggle()}).catch(i=>{Ar().f[8]++,Ar().s[22]++,this.setState({error:`Failed to load: '${t}'`,activeRequest:null,activeRequestUrl:null}),Ar().s[23]++,console.error(i),Ar().s[24]++,console.warn("Could not open the style URL",t)}),Ar().s[25]++,this.setState({activeRequest:{abort:function(){Ar().f[9]++,Ar().s[26]++,r=!0}},activeRequestUrl:t})}));Pn(this,"onSubmitUrl",(Ar().s[27]++,t=>{Ar().f[10]++,Ar().s[28]++,t.preventDefault(),Ar().s[29]++,this.onStyleSelect(this.state.styleUrl)}));Pn(this,"onOpenFile",(Ar().s[30]++,async()=>{Ar().f[11]++,Ar().s[31]++,this.clearError();const t=(Ar().s[32]++,{types:[{description:"json",accept:{"application/json":[".json"]}}],multiple:!1}),[r]=(Ar().s[33]++,await window.showOpenFilePicker(t)),i=(Ar().s[34]++,await r.getFile()),s=(Ar().s[35]++,await i.text());let l;Ar().s[36]++;try{Ar().s[37]++,l=JSON.parse(s)}catch(o){Ar().s[38]++,this.setState({error:o.toString()}),Ar().s[39]++;return}return Ar().s[40]++,l=_c.ensureStyleValidity(l),Ar().s[41]++,this.props.onStyleOpen(l,r),Ar().s[42]++,this.onOpenToggle(),Ar().s[43]++,i}));Pn(this,"onFileChanged",(Ar().s[44]++,async(t,r)=>{Ar().f[12]++;const[,i]=(Ar().s[45]++,r[0]),s=(Ar().s[46]++,new FileReader);Ar().s[47]++,this.clearError(),Ar().s[48]++,s.readAsText(i,"UTF-8"),Ar().s[49]++,s.onload=l=>{var p;Ar().f[13]++;let o;Ar().s[50]++;try{Ar().s[51]++,o=JSON.parse((p=l.target)==null?void 0:p.result)}catch(v){Ar().s[52]++,this.setState({error:v.toString()}),Ar().s[53]++;return}Ar().s[54]++,o=_c.ensureStyleValidity(o),Ar().s[55]++,this.props.onStyleOpen(o),Ar().s[56]++,this.onOpenToggle()},Ar().s[57]++,s.onerror=l=>(Ar().f[14]++,Ar().s[58]++,console.log(l.target))}));Pn(this,"onChangeUrl",(Ar().s[62]++,t=>{Ar().f[16]++,Ar().s[63]++,this.setState({styleUrl:t})}));Ar().s[3]++,this.state={styleUrl:""}}clearError(){Ar().f[3]++,Ar().s[4]++,this.setState({error:null})}onCancelActiveRequest(t){Ar().f[4]++,Ar().s[5]++,t?(Ar().b[0][0]++,Ar().s[6]++,t.stopPropagation()):Ar().b[0][1]++,Ar().s[7]++,this.state.activeRequest?(Ar().b[1][0]++,Ar().s[8]++,this.state.activeRequest.abort(),Ar().s[9]++,this.setState({activeRequest:null,activeRequestUrl:null})):Ar().b[1][1]++}onOpenToggle(){Ar().f[15]++,Ar().s[59]++,this.setState({styleUrl:""}),Ar().s[60]++,this.clearError(),Ar().s[61]++,this.props.onOpenToggle()}render(){Ar().f[17]++;const t=(Ar().s[64]++,this.props.t),r=(Ar().s[65]++,Wj.map(s=>(Ar().f[18]++,Ar().s[66]++,le.jsx(EAe,{url:s.url,title:s.title,thumbnailUrl:s.thumbnail,onSelect:this.onStyleSelect},s.id))));let i;return Ar().s[67]++,this.state.error?(Ar().b[3][0]++,Ar().s[68]++,i=le.jsxs("div",{className:"maputnik-modal-error",children:[this.state.error,le.jsx("a",{href:"#",onClick:()=>(Ar().f[19]++,Ar().s[69]++,this.clearError()),className:"maputnik-modal-error-close",children:""})]})):Ar().b[3][1]++,Ar().s[70]++,le.jsxs("div",{children:[le.jsxs(L0,{"data-wd-key":"modal:open",isOpen:this.props.isOpen,onOpenToggle:()=>(Ar().f[20]++,Ar().s[71]++,this.onOpenToggle()),title:t("Open Style"),children:[i,le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:t("Open local Style")}),le.jsx("p",{children:t("Open a local JSON style from your computer.")}),le.jsx("div",{children:typeof window.showOpenFilePicker=="function"?(Ar().b[4][0]++,le.jsxs(il,{className:"maputnik-big-button",onClick:this.onOpenFile,children:[le.jsx(P7,{})," ",t("Open Style")]})):(Ar().b[4][1]++,le.jsx(MAe,{onChange:this.onFileChanged,tabIndex:-1,"aria-label":t("Open Style"),children:le.jsxs(il,{className:"maputnik-upload-button",children:[le.jsx(P7,{})," ",t("Open Style")]})}))})]}),le.jsx("section",{className:"maputnik-modal-section",children:le.jsxs("form",{onSubmit:this.onSubmitUrl,children:[le.jsx("h1",{children:t("Load from URL")}),le.jsx("p",{children:le.jsxs(E0,{t,children:["Load from a URL. Note that the URL must have ",le.jsx("a",{href:"https://enable-cors.org",target:"_blank",rel:"noopener noreferrer",children:"CORS enabled"}),"."]})}),le.jsx($O,{"aria-label":t("Style URL"),"data-wd-key":"modal:open.url.input",type:"text",className:"maputnik-input",default:t("Enter URL..."),value:this.state.styleUrl,onInput:this.onChangeUrl,onChange:this.onChangeUrl}),le.jsx("div",{children:le.jsx(il,{"data-wd-key":"modal:open.url.button",type:"submit",className:"maputnik-big-button",disabled:this.state.styleUrl.length<1,children:"Load from URL"})})]})}),le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-section--shrink",children:[le.jsx("h1",{children:t("Gallery Styles")}),le.jsx("p",{children:t("Open one of the publicly available styles to start from.")}),le.jsx("div",{className:"maputnik-style-gallery-container",children:r})]})]}),le.jsx(SAe,{isOpen:!!this.state.activeRequest,title:t("Loading style"),onCancel:s=>(Ar().f[21]++,Ar().s[72]++,this.onCancelActiveRequest(s)),message:t("Loading: {{requestUrl}}",{requestUrl:this.state.activeRequestUrl})})]})}}const OAe=(Ar().s[73]++,Ws()(BAe));function xf(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",e="2fa0c1760625a188da3b2788fa0924b96bb7f3e1",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx",statementMap:{0:{start:{line:7,column:14},end:{line:7,column:26}},1:{start:{line:8,column:17},end:{line:41,column:5}},2:{start:{line:42,column:25},end:{line:115,column:5}},3:{start:{line:116,column:4},end:{line:145,column:6}},4:{start:{line:130,column:12},end:{line:133,column:22}},5:{start:{line:137,column:12},end:{line:141,column:22}},6:{start:{line:148,column:23},end:{line:148,column:64}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:146,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:129,column:57},end:{line:129,column:58}},loc:{start:{line:129,column:72},end:{line:134,column:11}},line:129},2:{name:"(anonymous_2)",decl:{start:{line:136,column:65},end:{line:136,column:66}},loc:{start:{line:136,column:80},end:{line:142,column:11}},line:136}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalShortcuts.tsx"],names:[],mappings:"AAiBa,SAwCA,UAxCA,KAwCA,YAxCA;AAjBb,OAAO,WAAW;AAClB,SAAS,OAAwB,uBAAuB;AAExD,OAAO,WAAW;AASlB,MAAM,+BAA+B,MAAM,UAAuC;AAAA,EAChF,SAAS;AACP,UAAM,IAAI,KAAK,MAAM;AACrB,UAAM,OAAO;AAAA,MACX;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,YAAY;AAAA,MACtB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,cAAc;AAAA,MACxB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,oBAAoB;AAAA,MAC9B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,sBAAsB;AAAA,MAChC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,gBAAgB;AAAA,MAC1B;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,WAAW;AAAA,MACrB;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,aAAa;AAAA,MACvB;AAAA,IACF;AAGA,UAAM,eAAe;AAAA,MACnB;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,eAAC;AAAA,QACX,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,eAAC;AAAA,WAAM;AAAA,QACtC,MAAM,EAAE,+BAAgC;AAAA,MAC1C;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,gBAAE;AAAA,QACZ,MAAM,EAAE,uBAAwB;AAAA,MAClC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,kBAAI;AAAA,QACd,MAAM,EAAE,yBAA0B;AAAA,MACpC;AAAA,MACA;AAAA,QACE,KAAK,oBAAC,SAAI,mBAAK;AAAA,QACf,MAAM,EAAE,0BAA2B;AAAA,MACrC;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,mBAAK;AAAA,WAAM;AAAA,QAC1C,MAAM,EAAE,sCAAuC;AAAA,MACjD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,sCAAsC;AAAA,MAChD;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,gBAAE;AAAA,WAAM;AAAA,QACvC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,MACA;AAAA,QACE,KAAK,iCAAE;AAAA,8BAAC,SAAI,mBAAK;AAAA,UAAM;AAAA,UAAG,oBAAC,SAAI,kBAAI;AAAA,WAAM;AAAA,QACzC,MAAM,EAAE,mCAAmC;AAAA,MAC7C;AAAA,IACF;AAGA,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,WAAW;AAAA,QAEpB,+BAAC,aAAQ,WAAU,mDACjB;AAAA,8BAAC,OACC,+BAAC,SAAM,GAAM;AAAA;AAAA,YACL,oBAAC,UAAK,iBAAG;AAAA,YAAO;AAAA,aACxB,GACF;AAAA,UACA,oBAAC,QACE,eAAK,IAAI,CAAC,MAAM,QAAQ;AACvB,mBAAO,qBAAC,SAAc,WAAU,sCAC9B;AAAA,kCAAC,QAAmB,eAAK,OAAhB,OAAK,GAAe;AAAA,cAC7B,oBAAC,QAAmB,eAAK,QAAhB,OAAK,GAAgB;AAAA,iBAFf,GAGjB;AAAA,UACF,CAAC,GACH;AAAA,UACA,oBAAC,OAAG,YAAE,8DAA8D,GAAE;AAAA,UACtE,oBAAC,QACE,uBAAa,IAAI,CAAC,MAAM,QAAQ;AAC/B,mBAAO,qBAAC,QACN;AAAA,kCAAC,UAAM,eAAK,KAAI;AAAA,cAAO;AAAA,cAAE,KAAK;AAAA,iBADhB,GAEhB;AAAA,UACF,CAAC,GACH;AAAA,WACF;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,iBAAiB,gBAAgB,EAAE,sBAAsB;AAC/D,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2fa0c1760625a188da3b2788fa0924b96bb7f3e1"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return xf=function(){return l},l}xf();class IAe extends sr.Component{render(){xf().f[0]++;const e=(xf().s[0]++,this.props.t),t=(xf().s[1]++,[{key:le.jsx("kbd",{children:"?"}),text:e("Shortcuts menu")},{key:le.jsx("kbd",{children:"o"}),text:e("Open modal")},{key:le.jsx("kbd",{children:"e"}),text:e("Export modal")},{key:le.jsx("kbd",{children:"d"}),text:e("Data Sources modal")},{key:le.jsx("kbd",{children:"s"}),text:e("Style Settings modal")},{key:le.jsx("kbd",{children:"i"}),text:e("Toggle inspect")},{key:le.jsx("kbd",{children:"m"}),text:e("Focus map")},{key:le.jsx("kbd",{children:"!"}),text:e("Debug modal")}]),r=(xf().s[2]++,[{key:le.jsx("kbd",{children:"+"}),text:e("Increase the zoom level by 1.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"+"})]}),text:e("Increase the zoom level by 2.")},{key:le.jsx("kbd",{children:"-"}),text:e("Decrease the zoom level by 1.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"-"})]}),text:e("Decrease the zoom level by 2.")},{key:le.jsx("kbd",{children:"Up"}),text:e("Pan up by 100 pixels.")},{key:le.jsx("kbd",{children:"Down"}),text:e("Pan down by 100 pixels.")},{key:le.jsx("kbd",{children:"Left"}),text:e("Pan left by 100 pixels.")},{key:le.jsx("kbd",{children:"Right"}),text:e("Pan right by 100 pixels.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Right"})]}),text:e("Increase the rotation by 15 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Left"})]}),text:e("Decrease the rotation by 15 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Up"})]}),text:e("Increase the pitch by 10 degrees.")},{key:le.jsxs(le.Fragment,{children:[le.jsx("kbd",{children:"Shift"})," + ",le.jsx("kbd",{children:"Down"})]}),text:e("Decrease the pitch by 10 degrees.")}]);return xf().s[3]++,le.jsx(L0,{"data-wd-key":"modal:shortcuts",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Shortcuts"),children:le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[le.jsx("p",{children:le.jsxs(E0,{t:e,children:["Press ",le.jsx("code",{children:"ESC"})," to lose focus of any active elements, then press one of:"]})}),le.jsx("dl",{children:t.map((i,s)=>(xf().f[1]++,xf().s[4]++,le.jsxs("div",{className:"maputnik-modal-shortcuts__shortcut",children:[le.jsx("dt",{children:i.key},"dt"+s),le.jsx("dd",{children:i.text},"dd"+s)]},s)))}),le.jsx("p",{children:e("If the Map is in focused you can use the following shortcuts")}),le.jsx("ul",{children:r.map((i,s)=>(xf().f[2]++,xf().s[5]++,le.jsxs("li",{children:[le.jsx("span",{children:i.key})," ",i.text]},s)))})]})})}}const kAe=(xf().s[6]++,Ws()(IAe));function hA(){var n="/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",e="a1d210f2dd55b03f0e8aae655258e8184b2d45b3",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx",statementMap:{0:{start:{line:7,column:27},end:{line:7,column:37}},1:{start:{line:8,column:20},end:{line:8,column:48}},2:{start:{line:9,column:19},end:{line:9,column:49}},3:{start:{line:10,column:19},end:{line:10,column:49}},4:{start:{line:11,column:4},end:{line:53,column:6}},5:{start:{line:22,column:14},end:{line:26,column:27}},6:{start:{line:23,column:96},end:{line:23,column:153}},7:{start:{line:29,column:14},end:{line:33,column:27}},8:{start:{line:30,column:96},end:{line:30,column:153}},9:{start:{line:56,column:19},end:{line:56,column:56}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:11},end:{line:54,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:21,column:140},end:{line:21,column:141}},loc:{start:{line:21,column:156},end:{line:27,column:13}},line:21},2:{name:"(anonymous_2)",decl:{start:{line:23,column:89},end:{line:23,column:90}},loc:{start:{line:23,column:96},end:{line:23,column:153}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:28,column:136},end:{line:28,column:137}},loc:{start:{line:28,column:152},end:{line:34,column:13}},line:28},4:{name:"(anonymous_4)",decl:{start:{line:30,column:89},end:{line:30,column:90}},loc:{start:{line:30,column:96},end:{line:30,column:153}},line:30}},branchMap:{0:{loc:{start:{line:21,column:12},end:{line:27,column:17}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:44}},{start:{line:21,column:64},end:{line:27,column:17}}],line:21},1:{loc:{start:{line:28,column:12},end:{line:34,column:17}},type:"binary-expr",locations:[{start:{line:28,column:12},end:{line:28,column:40}},{start:{line:28,column:60},end:{line:34,column:17}}],line:28}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/ModalDebug.tsx"],names:[],mappings:"AAuCQ,cAKQ,YALR;AAvCR,OAAO,WAAW;AAElB,SAAS,OAAwB,uBAAuB;AACxD,OAAO,WAAW;AAqBlB,MAAM,2BAA2B,MAAM,UAAmC;AAAA,EACxE,SAAS;AACP,UAAM,EAAC,GAAG,QAAO,IAAI,KAAK;AAE1B,UAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,IAAE;AACzC,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAC9C,UAAM,SAAS,CAAE,QAAQ,OAAO,IAAK,QAAQ,CAAC;AAE9C,WAAO;AAAA,MAAC;AAAA;AAAA,QACN,eAAY;AAAA,QACZ,QAAQ,KAAK,MAAM;AAAA,QACnB,cAAc,KAAK,MAAM;AAAA,QACzB,OAAO,EAAE,OAAO;AAAA,QAEhB;AAAA,+BAAC,aAAQ,WAAU,mDACjB;AAAA,gCAAC,QAAI,YAAE,SAAS,GAAE;AAAA,YACjB,KAAK,MAAM,aAAa,YACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,YAED,KAAK,MAAM,aAAa,QACvB,oBAAC,QACE,iBAAO,QAAQ,KAAK,MAAM,sBAAuB,EAAE,IAAI,CAAC,CAAC,KAAK,GAAG,MAAM;AACtE,qBAAO,oBAAC,QACN,+BAAC,WACC;AAAA,oCAAC,WAAM,MAAK,YAAW,SAAS,KAAK,UAAU,CAAC,MAAM,KAAK,MAAM,wBAAwB,KAAK,EAAE,OAAO,OAAO,GAAG;AAAA,gBAAE;AAAA,gBAAE;AAAA,iBACvH,KAHc,GAIhB;AAAA,YACF,CAAC,GACH;AAAA,aAEJ;AAAA,UACA,qBAAC,aAAQ,WAAU,0BACjB;AAAA,gCAAC,QAAG,mBAAK;AAAA,YACT,oBAAC,OACC,+BAAC,SAAM,GACL;AAAA;AAAA,gBAAC;AAAA;AAAA,kBACC,QAAO;AAAA,kBACP,KAAI;AAAA,kBACJ,MAAM,sCAAsC,OAAO,IAAI,MAAM,IAAI,MAAM;AAAA,kBACxE;AAAA;AAAA,cAED;AAAA,cAAI;AAAA,eACN,GACF;AAAA,aACF;AAAA;AAAA;AAAA,IACF;AAAA,EACF;AACF;AAEA,MAAM,aAAa,gBAAgB,EAAE,kBAAkB;AACvD,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a1d210f2dd55b03f0e8aae655258e8184b2d45b3"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return hA=function(){return l},l}hA();class TAe extends sr.Component{render(){hA().f[0]++;const{t:e,mapView:t}=(hA().s[0]++,this.props),r=(hA().s[1]++,Math.round(t.zoom)+1),i=(hA().s[2]++,+t.center.lng.toFixed(5)),s=(hA().s[3]++,+t.center.lat.toFixed(5));return hA().s[4]++,le.jsxs(L0,{"data-wd-key":"modal:debug",isOpen:this.props.isOpen,onOpenToggle:this.props.onOpenToggle,title:e("Debug"),children:[le.jsxs("section",{className:"maputnik-modal-section maputnik-modal-shortcuts",children:[le.jsx("h1",{children:e("Options")}),(hA().b[0][0]++,this.props.renderer==="mlgljs"&&(hA().b[0][1]++,le.jsx("ul",{children:Object.entries(this.props.maplibreGlDebugOptions).map(([l,o])=>(hA().f[1]++,hA().s[5]++,le.jsx("li",{children:le.jsxs("label",{children:[le.jsx("input",{type:"checkbox",checked:o,onChange:p=>(hA().f[2]++,hA().s[6]++,this.props.onChangeMaplibreGlDebug(l,p.target.checked))})," ",l]})},l)))}))),(hA().b[1][0]++,this.props.renderer==="ol"&&(hA().b[1][1]++,le.jsx("ul",{children:Object.entries(this.props.openlayersDebugOptions).map(([l,o])=>(hA().f[3]++,hA().s[7]++,le.jsx("li",{children:le.jsxs("label",{children:[le.jsx("input",{type:"checkbox",checked:o,onChange:p=>(hA().f[4]++,hA().s[8]++,this.props.onChangeOpenlayersDebug(l,p.target.checked))})," ",l]})},l)))})))]}),le.jsxs("section",{className:"maputnik-modal-section",children:[le.jsx("h1",{children:"Links"}),le.jsx("p",{children:le.jsxs(E0,{t:e,children:[le.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:`https://www.openstreetmap.org/#map=${r}/${s}/${i}`,children:"Open in OSM"}),"  Opens the current view on openstreetmap.org"]})})]})]})}}const PAe=(hA().s[9]++,Ws()(TAe));var Ag={},jv={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var KAe=jv.exports,yR;function RAe(){return yR||(yR=1,function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=!n.nodeType&&n,s=typeof window=="object"&&window;(s.global===s||s.window===s||s.self===s)&&(t=s);var l,o=2147483647,p=36,v=1,x=26,B=38,T=700,P=72,U=128,j="-",N=/^xn--/,q=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,oe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},te=p-v,V=Math.floor,ne=String.fromCharCode,W;function ie(Se){throw new RangeError(oe[Se])}function he(Se,Re){for(var He=Se.length,_t=[];He--;)_t[He]=Re(Se[He]);return _t}function fe(Se,Re){var He=Se.split("@"),_t="";He.length>1&&(_t=He[0]+"@",Se=He[1]),Se=Se.replace(H,".");var Gt=Se.split("."),yt=he(Gt,Re).join(".");return _t+yt}function Ee(Se){for(var Re=[],He=0,_t=Se.length,Gt,yt;He<_t;)Gt=Se.charCodeAt(He++),Gt>=55296&&Gt<=56319&&He<_t?(yt=Se.charCodeAt(He++),(yt&64512)==56320?Re.push(((Gt&1023)<<10)+(yt&1023)+65536):(Re.push(Gt),He--)):Re.push(Gt);return Re}function me(Se){return he(Se,function(Re){var He="";return Re>65535&&(Re-=65536,He+=ne(Re>>>10&1023|55296),Re=56320|Re&1023),He+=ne(Re),He}).join("")}function Me(Se){return Se-48<10?Se-22:Se-65<26?Se-65:Se-97<26?Se-97:p}function De(Se,Re){return Se+22+75*(Se<26)-((Re!=0)<<5)}function xe(Se,Re,He){var _t=0;for(Se=He?V(Se/T):Se>>1,Se+=V(Se/Re);Se>te*x>>1;_t+=p)Se=V(Se/te);return V(_t+(te+1)*Se/(Se+B))}function At(Se){var Re=[],He=Se.length,_t,Gt=0,yt=U,Ft=P,Tt,Le,Pe,Be,it,Ct,ft,Lt,Zt;for(Tt=Se.lastIndexOf(j),Tt<0&&(Tt=0),Le=0;Le<Tt;++Le)Se.charCodeAt(Le)>=128&&ie("not-basic"),Re.push(Se.charCodeAt(Le));for(Pe=Tt>0?Tt+1:0;Pe<He;){for(Be=Gt,it=1,Ct=p;Pe>=He&&ie("invalid-input"),ft=Me(Se.charCodeAt(Pe++)),(ft>=p||ft>V((o-Gt)/it))&&ie("overflow"),Gt+=ft*it,Lt=Ct<=Ft?v:Ct>=Ft+x?x:Ct-Ft,!(ft<Lt);Ct+=p)Zt=p-Lt,it>V(o/Zt)&&ie("overflow"),it*=Zt;_t=Re.length+1,Ft=xe(Gt-Be,_t,Be==0),V(Gt/_t)>o-yt&&ie("overflow"),yt+=V(Gt/_t),Gt%=_t,Re.splice(Gt++,0,yt)}return me(Re)}function Ze(Se){var Re,He,_t,Gt,yt,Ft,Tt,Le,Pe,Be,it,Ct=[],ft,Lt,Zt,Rt;for(Se=Ee(Se),ft=Se.length,Re=U,He=0,yt=P,Ft=0;Ft<ft;++Ft)it=Se[Ft],it<128&&Ct.push(ne(it));for(_t=Gt=Ct.length,Gt&&Ct.push(j);_t<ft;){for(Tt=o,Ft=0;Ft<ft;++Ft)it=Se[Ft],it>=Re&&it<Tt&&(Tt=it);for(Lt=_t+1,Tt-Re>V((o-He)/Lt)&&ie("overflow"),He+=(Tt-Re)*Lt,Re=Tt,Ft=0;Ft<ft;++Ft)if(it=Se[Ft],it<Re&&++He>o&&ie("overflow"),it==Re){for(Le=He,Pe=p;Be=Pe<=yt?v:Pe>=yt+x?x:Pe-yt,!(Le<Be);Pe+=p)Rt=Le-Be,Zt=p-Be,Ct.push(ne(De(Be+Rt%Zt,0))),Le=V(Rt/Zt);Ct.push(ne(De(Le,0))),yt=xe(He,Lt,_t==Gt),He=0,++_t}++He,++Re}return Ct.join("")}function Xe(Se){return fe(Se,function(Re){return N.test(Re)?At(Re.slice(4).toLowerCase()):Re})}function Ne(Se){return fe(Se,function(Re){return q.test(Re)?"xn--"+Ze(Re):Re})}if(l={version:"1.4.1",ucs2:{decode:Ee,encode:me},decode:At,encode:Ze,toASCII:Ne,toUnicode:Xe},r&&i)if(n.exports==r)i.exports=l;else for(W in l)l.hasOwnProperty(W)&&(r[W]=l[W]);else t.punycode=l})(KAe)}(jv,jv.exports)),jv.exports}var KS,vR;function zy(){return vR||(vR=1,KS=TypeError),KS}const DAe={},FAe=Object.freeze(Object.defineProperty({__proto__:null,default:DAe},Symbol.toStringTag,{value:"Module"})),LAe=j6(FAe);var RS,CR;function t3(){if(CR)return RS;CR=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=i&&s&&typeof s.get=="function"?s.get:null,o=i&&Set.prototype.forEach,p=typeof WeakMap=="function"&&WeakMap.prototype,v=p?WeakMap.prototype.has:null,x=typeof WeakSet=="function"&&WeakSet.prototype,B=x?WeakSet.prototype.has:null,T=typeof WeakRef=="function"&&WeakRef.prototype,P=T?WeakRef.prototype.deref:null,U=Boolean.prototype.valueOf,j=Object.prototype.toString,N=Function.prototype.toString,q=String.prototype.match,H=String.prototype.slice,oe=String.prototype.replace,te=String.prototype.toUpperCase,V=String.prototype.toLowerCase,ne=RegExp.prototype.test,W=Array.prototype.concat,ie=Array.prototype.join,he=Array.prototype.slice,fe=Math.floor,Ee=typeof BigInt=="function"?BigInt.prototype.valueOf:null,me=Object.getOwnPropertySymbols,Me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,De=typeof Symbol=="function"&&typeof Symbol.iterator=="object",xe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===De||!0)?Symbol.toStringTag:null,At=Object.prototype.propertyIsEnumerable,Ze=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function($e){return $e.__proto__}:null);function Xe($e,ae){if($e===1/0||$e===-1/0||$e!==$e||$e&&$e>-1e3&&$e<1e3||ne.call(/e/,ae))return ae;var Ce=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof $e=="number"){var f=$e<0?-fe(-$e):fe($e);if(f!==$e){var je=String(f),qe=H.call(ae,je.length+1);return oe.call(je,Ce,"$&_")+"."+oe.call(oe.call(qe,/([0-9]{3})/g,"$&_"),/_$/,"")}}return oe.call(ae,Ce,"$&_")}var Ne=LAe,Se=Ne.custom,Re=ft(Se)?Se:null,He={__proto__:null,double:'"',single:"'"},_t={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};RS=function $e(ae,Ce,f,je){var qe=Ce||{};if(Rt(qe,"quoteStyle")&&!Rt(He,qe.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Rt(qe,"maxStringLength")&&(typeof qe.maxStringLength=="number"?qe.maxStringLength<0&&qe.maxStringLength!==1/0:qe.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Je=Rt(qe,"customInspect")?qe.customInspect:!0;if(typeof Je!="boolean"&&Je!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Rt(qe,"indent")&&qe.indent!==null&&qe.indent!=="	"&&!(parseInt(qe.indent,10)===qe.indent&&qe.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Rt(qe,"numericSeparator")&&typeof qe.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ut=qe.numericSeparator;if(typeof ae>"u")return"undefined";if(ae===null)return"null";if(typeof ae=="boolean")return ae?"true":"false";if(typeof ae=="string")return tr(ae,qe);if(typeof ae=="number"){if(ae===0)return 1/0/ae>0?"0":"-0";var dt=String(ae);return ut?Xe(ae,dt):dt}if(typeof ae=="bigint"){var Qt=String(ae)+"n";return ut?Xe(ae,Qt):Qt}var Wt=typeof qe.depth>"u"?5:qe.depth;if(typeof f>"u"&&(f=0),f>=Wt&&Wt>0&&typeof ae=="object")return Ft(ae)?"[Array]":"[Object]";var jt=Ht(qe,f);if(typeof je>"u")je=[];else if(rn(je,ae)>=0)return"[Circular]";function tn(Ts,xs,aa){if(xs&&(je=he.call(je),je.push(xs)),aa){var ps={depth:qe.depth};return Rt(qe,"quoteStyle")&&(ps.quoteStyle=qe.quoteStyle),$e(Ts,ps,f+1,je)}return $e(Ts,qe,f+1,je)}if(typeof ae=="function"&&!Le(ae)){var Dn=qn(ae),Fn=nr(ae,tn);return"[Function"+(Dn?": "+Dn:" (anonymous)")+"]"+(Fn.length>0?" { "+ie.call(Fn,", ")+" }":"")}if(ft(ae)){var on=De?oe.call(String(ae),/^(Symbol\(.*\))_[^)]*$/,"$1"):Me.call(ae);return typeof ae=="object"&&!De?ce(on):on}if(gr(ae)){for(var Sr="<"+V.call(String(ae.nodeName)),Hn=ae.attributes||[],xr=0;xr<Hn.length;xr++)Sr+=" "+Hn[xr].name+"="+Gt(yt(Hn[xr].value),"double",qe);return Sr+=">",ae.childNodes&&ae.childNodes.length&&(Sr+="..."),Sr+="</"+V.call(String(ae.nodeName))+">",Sr}if(Ft(ae)){if(ae.length===0)return"[]";var qr=nr(ae,tn);return jt&&!St(qr)?"["+sn(qr,jt)+"]":"[ "+ie.call(qr,", ")+" ]"}if(Pe(ae)){var Bn=nr(ae,tn);return!("cause"in Error.prototype)&&"cause"in ae&&!At.call(ae,"cause")?"{ ["+String(ae)+"] "+ie.call(W.call("[cause]: "+tn(ae.cause),Bn),", ")+" }":Bn.length===0?"["+String(ae)+"]":"{ ["+String(ae)+"] "+ie.call(Bn,", ")+" }"}if(typeof ae=="object"&&Je){if(Re&&typeof ae[Re]=="function"&&Ne)return Ne(ae,{depth:Wt-f});if(Je!=="symbol"&&typeof ae.inspect=="function")return ae.inspect()}if(ar(ae)){var $n=[];return r&&r.call(ae,function(Ts,xs){$n.push(tn(xs,ae,!0)+" => "+tn(Ts,ae))}),rt("Map",t.call(ae),$n,jt)}if(zn(ae)){var Yn=[];return o&&o.call(ae,function(Ts){Yn.push(tn(Ts,ae))}),rt("Set",l.call(ae),Yn,jt)}if(kn(ae))return pe("WeakMap");if(br(ae))return pe("WeakSet");if(mn(ae))return pe("WeakRef");if(it(ae))return ce(tn(Number(ae)));if(Lt(ae))return ce(tn(Ee.call(ae)));if(Ct(ae))return ce(U.call(ae));if(Be(ae))return ce(tn(String(ae)));if(typeof window<"u"&&ae===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ae===globalThis||typeof window<"u"&&ae===window)return"{ [object globalThis] }";if(!Tt(ae)&&!Le(ae)){var Qr=nr(ae,tn),co=Ze?Ze(ae)===Object.prototype:ae instanceof Object||ae.constructor===Object,ma=ae instanceof Object?"":"null prototype",Mr=!co&&xe&&Object(ae)===ae&&xe in ae?H.call(_n(ae),8,-1):ma?"Object":"",wi=co||typeof ae.constructor!="function"?"":ae.constructor.name?ae.constructor.name+" ":"",Zi=wi+(Mr||ma?"["+ie.call(W.call([],Mr||[],ma||[]),": ")+"] ":"");return Qr.length===0?Zi+"{}":jt?Zi+"{"+sn(Qr,jt)+"}":Zi+"{ "+ie.call(Qr,", ")+" }"}return String(ae)};function Gt($e,ae,Ce){var f=Ce.quoteStyle||ae,je=He[f];return je+$e+je}function yt($e){return oe.call(String($e),/"/g,"&quot;")}function Ft($e){return _n($e)==="[object Array]"&&(!xe||!(typeof $e=="object"&&xe in $e))}function Tt($e){return _n($e)==="[object Date]"&&(!xe||!(typeof $e=="object"&&xe in $e))}function Le($e){return _n($e)==="[object RegExp]"&&(!xe||!(typeof $e=="object"&&xe in $e))}function Pe($e){return _n($e)==="[object Error]"&&(!xe||!(typeof $e=="object"&&xe in $e))}function Be($e){return _n($e)==="[object String]"&&(!xe||!(typeof $e=="object"&&xe in $e))}function it($e){return _n($e)==="[object Number]"&&(!xe||!(typeof $e=="object"&&xe in $e))}function Ct($e){return _n($e)==="[object Boolean]"&&(!xe||!(typeof $e=="object"&&xe in $e))}function ft($e){if(De)return $e&&typeof $e=="object"&&$e instanceof Symbol;if(typeof $e=="symbol")return!0;if(!$e||typeof $e!="object"||!Me)return!1;try{return Me.call($e),!0}catch{}return!1}function Lt($e){if(!$e||typeof $e!="object"||!Ee)return!1;try{return Ee.call($e),!0}catch{}return!1}var Zt=Object.prototype.hasOwnProperty||function($e){return $e in this};function Rt($e,ae){return Zt.call($e,ae)}function _n($e){return j.call($e)}function qn($e){if($e.name)return $e.name;var ae=q.call(N.call($e),/^function\s*([\w$]+)/);return ae?ae[1]:null}function rn($e,ae){if($e.indexOf)return $e.indexOf(ae);for(var Ce=0,f=$e.length;Ce<f;Ce++)if($e[Ce]===ae)return Ce;return-1}function ar($e){if(!t||!$e||typeof $e!="object")return!1;try{t.call($e);try{l.call($e)}catch{return!0}return $e instanceof Map}catch{}return!1}function kn($e){if(!v||!$e||typeof $e!="object")return!1;try{v.call($e,v);try{B.call($e,B)}catch{return!0}return $e instanceof WeakMap}catch{}return!1}function mn($e){if(!P||!$e||typeof $e!="object")return!1;try{return P.call($e),!0}catch{}return!1}function zn($e){if(!l||!$e||typeof $e!="object")return!1;try{l.call($e);try{t.call($e)}catch{return!0}return $e instanceof Set}catch{}return!1}function br($e){if(!B||!$e||typeof $e!="object")return!1;try{B.call($e,B);try{v.call($e,v)}catch{return!0}return $e instanceof WeakSet}catch{}return!1}function gr($e){return!$e||typeof $e!="object"?!1:typeof HTMLElement<"u"&&$e instanceof HTMLElement?!0:typeof $e.nodeName=="string"&&typeof $e.getAttribute=="function"}function tr($e,ae){if($e.length>ae.maxStringLength){var Ce=$e.length-ae.maxStringLength,f="... "+Ce+" more character"+(Ce>1?"s":"");return tr(H.call($e,0,ae.maxStringLength),ae)+f}var je=_t[ae.quoteStyle||"single"];je.lastIndex=0;var qe=oe.call(oe.call($e,je,"\\$1"),/[\x00-\x1f]/g,Ge);return Gt(qe,"single",ae)}function Ge($e){var ae=$e.charCodeAt(0),Ce={8:"b",9:"t",10:"n",12:"f",13:"r"}[ae];return Ce?"\\"+Ce:"\\x"+(ae<16?"0":"")+te.call(ae.toString(16))}function ce($e){return"Object("+$e+")"}function pe($e){return $e+" { ? }"}function rt($e,ae,Ce,f){var je=f?sn(Ce,f):ie.call(Ce,", ");return $e+" ("+ae+") {"+je+"}"}function St($e){for(var ae=0;ae<$e.length;ae++)if(rn($e[ae],`
`)>=0)return!1;return!0}function Ht($e,ae){var Ce;if($e.indent==="	")Ce="	";else if(typeof $e.indent=="number"&&$e.indent>0)Ce=ie.call(Array($e.indent+1)," ");else return null;return{base:Ce,prev:ie.call(Array(ae+1),Ce)}}function sn($e,ae){if($e.length===0)return"";var Ce=`
`+ae.prev+ae.base;return Ce+ie.call($e,","+Ce)+`
`+ae.prev}function nr($e,ae){var Ce=Ft($e),f=[];if(Ce){f.length=$e.length;for(var je=0;je<$e.length;je++)f[je]=Rt($e,je)?ae($e[je],$e):""}var qe=typeof me=="function"?me($e):[],Je;if(De){Je={};for(var ut=0;ut<qe.length;ut++)Je["$"+qe[ut]]=qe[ut]}for(var dt in $e)Rt($e,dt)&&(Ce&&String(Number(dt))===dt&&dt<$e.length||De&&Je["$"+dt]instanceof Symbol||(ne.call(/[^\w$]/,dt)?f.push(ae(dt,$e)+": "+ae($e[dt],$e)):f.push(dt+": "+ae($e[dt],$e))));if(typeof me=="function")for(var Qt=0;Qt<qe.length;Qt++)At.call($e,qe[Qt])&&f.push("["+ae(qe[Qt])+"]: "+ae($e[qe[Qt]],$e));return f}return RS}var DS,_R;function UAe(){if(_R)return DS;_R=1;var n=t3(),e=zy(),t=function(o,p,v){for(var x=o,B;(B=x.next)!=null;x=B)if(B.key===p)return x.next=B.next,v||(B.next=o.next,o.next=B),B},r=function(o,p){if(o){var v=t(o,p);return v&&v.value}},i=function(o,p,v){var x=t(o,p);x?x.value=v:o.next={key:p,next:o.next,value:v}},s=function(o,p){return o?!!t(o,p):!1},l=function(o,p){if(o)return t(o,p,!0)};return DS=function(){var p,v={assert:function(x){if(!v.has(x))throw new e("Side channel does not contain "+n(x))},delete:function(x){var B=p&&p.next,T=l(p,x);return T&&B&&B===T&&(p=void 0),!!T},get:function(x){return r(p,x)},has:function(x){return s(p,x)},set:function(x,B){p||(p={next:void 0}),i(p,x,B)}};return v},DS}var FS,bR;function Gj(){return bR||(bR=1,FS=Object),FS}var LS,xR;function zAe(){return xR||(xR=1,LS=Error),LS}var US,MR;function jAe(){return MR||(MR=1,US=EvalError),US}var zS,wR;function NAe(){return wR||(wR=1,zS=RangeError),zS}var jS,SR;function WAe(){return SR||(SR=1,jS=ReferenceError),jS}var NS,ER;function GAe(){return ER||(ER=1,NS=SyntaxError),NS}var WS,BR;function QAe(){return BR||(BR=1,WS=URIError),WS}var GS,OR;function YAe(){return OR||(OR=1,GS=Math.abs),GS}var QS,IR;function qAe(){return IR||(IR=1,QS=Math.floor),QS}var YS,kR;function VAe(){return kR||(kR=1,YS=Math.max),YS}var qS,TR;function $Ae(){return TR||(TR=1,qS=Math.min),qS}var VS,PR;function HAe(){return PR||(PR=1,VS=Math.pow),VS}var $S,KR;function ZAe(){return KR||(KR=1,$S=Math.round),$S}var HS,RR;function XAe(){return RR||(RR=1,HS=Number.isNaN||function(e){return e!==e}),HS}var ZS,DR;function JAe(){if(DR)return ZS;DR=1;var n=XAe();return ZS=function(t){return n(t)||t===0?t:t<0?-1:1},ZS}var XS,FR;function ece(){return FR||(FR=1,XS=Object.getOwnPropertyDescriptor),XS}var JS,LR;function Qj(){if(LR)return JS;LR=1;var n=ece();if(n)try{n([],"length")}catch{n=null}return JS=n,JS}var eE,UR;function tce(){if(UR)return eE;UR=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return eE=n,eE}var tE,zR;function nce(){return zR||(zR=1,tE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),tE}var nE,jR;function rce(){if(jR)return nE;jR=1;var n=typeof Symbol<"u"&&Symbol,e=nce();return nE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},nE}var rE,NR;function Yj(){return NR||(NR=1,rE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),rE}var iE,WR;function qj(){if(WR)return iE;WR=1;var n=Gj();return iE=n.getPrototypeOf||null,iE}var oE,GR;function ice(){if(GR)return oE;GR=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(p,v){for(var x=[],B=0;B<p.length;B+=1)x[B]=p[B];for(var T=0;T<v.length;T+=1)x[T+p.length]=v[T];return x},s=function(p,v){for(var x=[],B=v,T=0;B<p.length;B+=1,T+=1)x[T]=p[B];return x},l=function(o,p){for(var v="",x=0;x<o.length;x+=1)v+=o[x],x+1<o.length&&(v+=p);return v};return oE=function(p){var v=this;if(typeof v!="function"||e.apply(v)!==r)throw new TypeError(n+v);for(var x=s(arguments,1),B,T=function(){if(this instanceof B){var q=v.apply(this,i(x,arguments));return Object(q)===q?q:this}return v.apply(p,i(x,arguments))},P=t(0,v.length-x.length),U=[],j=0;j<P;j++)U[j]="$"+j;if(B=Function("binder","return function ("+l(U,",")+"){ return binder.apply(this,arguments); }")(T),v.prototype){var N=function(){};N.prototype=v.prototype,B.prototype=new N,N.prototype=null}return B},oE}var sE,QR;function n3(){if(QR)return sE;QR=1;var n=ice();return sE=Function.prototype.bind||n,sE}var aE,YR;function XO(){return YR||(YR=1,aE=Function.prototype.call),aE}var lE,qR;function Vj(){return qR||(qR=1,lE=Function.prototype.apply),lE}var uE,VR;function oce(){return VR||(VR=1,uE=typeof Reflect<"u"&&Reflect&&Reflect.apply),uE}var AE,$R;function sce(){if($R)return AE;$R=1;var n=n3(),e=Vj(),t=XO(),r=oce();return AE=r||n.call(t,e),AE}var cE,HR;function $j(){if(HR)return cE;HR=1;var n=n3(),e=zy(),t=XO(),r=sce();return cE=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},cE}var dE,ZR;function ace(){if(ZR)return dE;ZR=1;var n=$j(),e=Qj(),t;try{t=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return dE=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,dE}var hE,XR;function lce(){if(XR)return hE;XR=1;var n=Yj(),e=qj(),t=ace();return hE=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,hE}var fE,JR;function uce(){if(JR)return fE;JR=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=n3();return fE=t.call(n,e),fE}var pE,eD;function JO(){if(eD)return pE;eD=1;var n,e=Gj(),t=zAe(),r=jAe(),i=NAe(),s=WAe(),l=GAe(),o=zy(),p=QAe(),v=YAe(),x=qAe(),B=VAe(),T=$Ae(),P=HAe(),U=ZAe(),j=JAe(),N=Function,q=function(Pe){try{return N('"use strict"; return ('+Pe+").constructor;")()}catch{}},H=Qj(),oe=tce(),te=function(){throw new o},V=H?function(){try{return arguments.callee,te}catch{try{return H(arguments,"callee").get}catch{return te}}}():te,ne=rce()(),W=lce(),ie=qj(),he=Yj(),fe=Vj(),Ee=XO(),me={},Me=typeof Uint8Array>"u"||!W?n:W(Uint8Array),De={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":ne&&W?W([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":me,"%AsyncGenerator%":me,"%AsyncGeneratorFunction%":me,"%AsyncIteratorPrototype%":me,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":N,"%GeneratorFunction%":me,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ne&&W?W(W([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ne||!W?n:W(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":H,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ne||!W?n:W(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ne&&W?W(""[Symbol.iterator]()):n,"%Symbol%":ne?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":V,"%TypedArray%":Me,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":Ee,"%Function.prototype.apply%":fe,"%Object.defineProperty%":oe,"%Object.getPrototypeOf%":ie,"%Math.abs%":v,"%Math.floor%":x,"%Math.max%":B,"%Math.min%":T,"%Math.pow%":P,"%Math.round%":U,"%Math.sign%":j,"%Reflect.getPrototypeOf%":he};if(W)try{null.error}catch(Pe){var xe=W(W(Pe));De["%Error.prototype%"]=xe}var At=function Pe(Be){var it;if(Be==="%AsyncFunction%")it=q("async function () {}");else if(Be==="%GeneratorFunction%")it=q("function* () {}");else if(Be==="%AsyncGeneratorFunction%")it=q("async function* () {}");else if(Be==="%AsyncGenerator%"){var Ct=Pe("%AsyncGeneratorFunction%");Ct&&(it=Ct.prototype)}else if(Be==="%AsyncIteratorPrototype%"){var ft=Pe("%AsyncGenerator%");ft&&W&&(it=W(ft.prototype))}return De[Be]=it,it},Ze={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Xe=n3(),Ne=uce(),Se=Xe.call(Ee,Array.prototype.concat),Re=Xe.call(fe,Array.prototype.splice),He=Xe.call(Ee,String.prototype.replace),_t=Xe.call(Ee,String.prototype.slice),Gt=Xe.call(Ee,RegExp.prototype.exec),yt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ft=/\\(\\)?/g,Tt=function(Be){var it=_t(Be,0,1),Ct=_t(Be,-1);if(it==="%"&&Ct!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(Ct==="%"&&it!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var ft=[];return He(Be,yt,function(Lt,Zt,Rt,_n){ft[ft.length]=Rt?He(_n,Ft,"$1"):Zt||Lt}),ft},Le=function(Be,it){var Ct=Be,ft;if(Ne(Ze,Ct)&&(ft=Ze[Ct],Ct="%"+ft[0]+"%"),Ne(De,Ct)){var Lt=De[Ct];if(Lt===me&&(Lt=At(Ct)),typeof Lt>"u"&&!it)throw new o("intrinsic "+Be+" exists, but is not available. Please file an issue!");return{alias:ft,name:Ct,value:Lt}}throw new l("intrinsic "+Be+" does not exist!")};return pE=function(Be,it){if(typeof Be!="string"||Be.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof it!="boolean")throw new o('"allowMissing" argument must be a boolean');if(Gt(/^%?[^%]*%?$/,Be)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ct=Tt(Be),ft=Ct.length>0?Ct[0]:"",Lt=Le("%"+ft+"%",it),Zt=Lt.name,Rt=Lt.value,_n=!1,qn=Lt.alias;qn&&(ft=qn[0],Re(Ct,Se([0,1],qn)));for(var rn=1,ar=!0;rn<Ct.length;rn+=1){var kn=Ct[rn],mn=_t(kn,0,1),zn=_t(kn,-1);if((mn==='"'||mn==="'"||mn==="`"||zn==='"'||zn==="'"||zn==="`")&&mn!==zn)throw new l("property names with quotes must have matching quotes");if((kn==="constructor"||!ar)&&(_n=!0),ft+="."+kn,Zt="%"+ft+"%",Ne(De,Zt))Rt=De[Zt];else if(Rt!=null){if(!(kn in Rt)){if(!it)throw new o("base intrinsic for "+Be+" exists, but the property is not available.");return}if(H&&rn+1>=Ct.length){var br=H(Rt,kn);ar=!!br,ar&&"get"in br&&!("originalValue"in br.get)?Rt=br.get:Rt=Rt[kn]}else ar=Ne(Rt,kn),Rt=Rt[kn];ar&&!_n&&(De[Zt]=Rt)}}return Rt},pE}var mE,tD;function Hj(){if(tD)return mE;tD=1;var n=JO(),e=$j(),t=e([n("%String.prototype.indexOf%")]);return mE=function(i,s){var l=n(i,!!s);return typeof l=="function"&&t(i,".prototype.")>-1?e([l]):l},mE}var gE,nD;function Zj(){if(nD)return gE;nD=1;var n=JO(),e=Hj(),t=t3(),r=zy(),i=n("%Map%",!0),s=e("Map.prototype.get",!0),l=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),p=e("Map.prototype.delete",!0),v=e("Map.prototype.size",!0);return gE=!!i&&function(){var B,T={assert:function(P){if(!T.has(P))throw new r("Side channel does not contain "+t(P))},delete:function(P){if(B){var U=p(B,P);return v(B)===0&&(B=void 0),U}return!1},get:function(P){if(B)return s(B,P)},has:function(P){return B?o(B,P):!1},set:function(P,U){B||(B=new i),l(B,P,U)}};return T},gE}var yE,rD;function Ace(){if(rD)return yE;rD=1;var n=JO(),e=Hj(),t=t3(),r=Zj(),i=zy(),s=n("%WeakMap%",!0),l=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),p=e("WeakMap.prototype.has",!0),v=e("WeakMap.prototype.delete",!0);return yE=s?function(){var B,T,P={assert:function(U){if(!P.has(U))throw new i("Side channel does not contain "+t(U))},delete:function(U){if(s&&U&&(typeof U=="object"||typeof U=="function")){if(B)return v(B,U)}else if(r&&T)return T.delete(U);return!1},get:function(U){return s&&U&&(typeof U=="object"||typeof U=="function")&&B?l(B,U):T&&T.get(U)},has:function(U){return s&&U&&(typeof U=="object"||typeof U=="function")&&B?p(B,U):!!T&&T.has(U)},set:function(U,j){s&&U&&(typeof U=="object"||typeof U=="function")?(B||(B=new s),o(B,U,j)):r&&(T||(T=r()),T.set(U,j))}};return P}:r,yE}var vE,iD;function cce(){if(iD)return vE;iD=1;var n=zy(),e=t3(),t=UAe(),r=Zj(),i=Ace(),s=i||r||t;return vE=function(){var o,p={assert:function(v){if(!p.has(v))throw new n("Side channel does not contain "+e(v))},delete:function(v){return!!o&&o.delete(v)},get:function(v){return o&&o.get(v)},has:function(v){return!!o&&o.has(v)},set:function(v,x){o||(o=s()),o.set(v,x)}};return p},vE}var CE,oD;function e8(){if(oD)return CE;oD=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return CE={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},CE}var _E,sD;function Xj(){if(sD)return _E;sD=1;var n=e8(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var N=[],q=0;q<256;++q)N.push("%"+((q<16?"0":"")+q.toString(16)).toUpperCase());return N}(),i=function(q){for(;q.length>1;){var H=q.pop(),oe=H.obj[H.prop];if(t(oe)){for(var te=[],V=0;V<oe.length;++V)typeof oe[V]<"u"&&te.push(oe[V]);H.obj[H.prop]=te}}},s=function(q,H){for(var oe=H&&H.plainObjects?{__proto__:null}:{},te=0;te<q.length;++te)typeof q[te]<"u"&&(oe[te]=q[te]);return oe},l=function N(q,H,oe){if(!H)return q;if(typeof H!="object"&&typeof H!="function"){if(t(q))q.push(H);else if(q&&typeof q=="object")(oe&&(oe.plainObjects||oe.allowPrototypes)||!e.call(Object.prototype,H))&&(q[H]=!0);else return[q,H];return q}if(!q||typeof q!="object")return[q].concat(H);var te=q;return t(q)&&!t(H)&&(te=s(q,oe)),t(q)&&t(H)?(H.forEach(function(V,ne){if(e.call(q,ne)){var W=q[ne];W&&typeof W=="object"&&V&&typeof V=="object"?q[ne]=N(W,V,oe):q.push(V)}else q[ne]=V}),q):Object.keys(H).reduce(function(V,ne){var W=H[ne];return e.call(V,ne)?V[ne]=N(V[ne],W,oe):V[ne]=W,V},te)},o=function(q,H){return Object.keys(H).reduce(function(oe,te){return oe[te]=H[te],oe},q)},p=function(N,q,H){var oe=N.replace(/\+/g," ");if(H==="iso-8859-1")return oe.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(oe)}catch{return oe}},v=1024,x=function(q,H,oe,te,V){if(q.length===0)return q;var ne=q;if(typeof q=="symbol"?ne=Symbol.prototype.toString.call(q):typeof q!="string"&&(ne=String(q)),oe==="iso-8859-1")return escape(ne).replace(/%u[0-9a-f]{4}/gi,function(Me){return"%26%23"+parseInt(Me.slice(2),16)+"%3B"});for(var W="",ie=0;ie<ne.length;ie+=v){for(var he=ne.length>=v?ne.slice(ie,ie+v):ne,fe=[],Ee=0;Ee<he.length;++Ee){var me=he.charCodeAt(Ee);if(me===45||me===46||me===95||me===126||me>=48&&me<=57||me>=65&&me<=90||me>=97&&me<=122||V===n.RFC1738&&(me===40||me===41)){fe[fe.length]=he.charAt(Ee);continue}if(me<128){fe[fe.length]=r[me];continue}if(me<2048){fe[fe.length]=r[192|me>>6]+r[128|me&63];continue}if(me<55296||me>=57344){fe[fe.length]=r[224|me>>12]+r[128|me>>6&63]+r[128|me&63];continue}Ee+=1,me=65536+((me&1023)<<10|he.charCodeAt(Ee)&1023),fe[fe.length]=r[240|me>>18]+r[128|me>>12&63]+r[128|me>>6&63]+r[128|me&63]}W+=fe.join("")}return W},B=function(q){for(var H=[{obj:{o:q},prop:"o"}],oe=[],te=0;te<H.length;++te)for(var V=H[te],ne=V.obj[V.prop],W=Object.keys(ne),ie=0;ie<W.length;++ie){var he=W[ie],fe=ne[he];typeof fe=="object"&&fe!==null&&oe.indexOf(fe)===-1&&(H.push({obj:ne,prop:he}),oe.push(fe))}return i(H),q},T=function(q){return Object.prototype.toString.call(q)==="[object RegExp]"},P=function(q){return!q||typeof q!="object"?!1:!!(q.constructor&&q.constructor.isBuffer&&q.constructor.isBuffer(q))},U=function(q,H){return[].concat(q,H)},j=function(q,H){if(t(q)){for(var oe=[],te=0;te<q.length;te+=1)oe.push(H(q[te]));return oe}return H(q)};return _E={arrayToObject:s,assign:o,combine:U,compact:B,decode:p,encode:x,isBuffer:P,isRegExp:T,maybeMap:j,merge:l},_E}var bE,aD;function dce(){if(aD)return bE;aD=1;var n=cce(),e=Xj(),t=e8(),r=Object.prototype.hasOwnProperty,i={brackets:function(N){return N+"[]"},comma:"comma",indices:function(N,q){return N+"["+q+"]"},repeat:function(N){return N}},s=Array.isArray,l=Array.prototype.push,o=function(j,N){l.apply(j,s(N)?N:[N])},p=Date.prototype.toISOString,v=t.default,x={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:v,formatter:t.formatters[v],indices:!1,serializeDate:function(N){return p.call(N)},skipNulls:!1,strictNullHandling:!1},B=function(N){return typeof N=="string"||typeof N=="number"||typeof N=="boolean"||typeof N=="symbol"||typeof N=="bigint"},T={},P=function j(N,q,H,oe,te,V,ne,W,ie,he,fe,Ee,me,Me,De,xe,At,Ze){for(var Xe=N,Ne=Ze,Se=0,Re=!1;(Ne=Ne.get(T))!==void 0&&!Re;){var He=Ne.get(N);if(Se+=1,typeof He<"u"){if(He===Se)throw new RangeError("Cyclic object value");Re=!0}typeof Ne.get(T)>"u"&&(Se=0)}if(typeof he=="function"?Xe=he(q,Xe):Xe instanceof Date?Xe=me(Xe):H==="comma"&&s(Xe)&&(Xe=e.maybeMap(Xe,function(Zt){return Zt instanceof Date?me(Zt):Zt})),Xe===null){if(V)return ie&&!xe?ie(q,x.encoder,At,"key",Me):q;Xe=""}if(B(Xe)||e.isBuffer(Xe)){if(ie){var _t=xe?q:ie(q,x.encoder,At,"key",Me);return[De(_t)+"="+De(ie(Xe,x.encoder,At,"value",Me))]}return[De(q)+"="+De(String(Xe))]}var Gt=[];if(typeof Xe>"u")return Gt;var yt;if(H==="comma"&&s(Xe))xe&&ie&&(Xe=e.maybeMap(Xe,ie)),yt=[{value:Xe.length>0?Xe.join(",")||null:void 0}];else if(s(he))yt=he;else{var Ft=Object.keys(Xe);yt=fe?Ft.sort(fe):Ft}var Tt=W?String(q).replace(/\./g,"%2E"):String(q),Le=oe&&s(Xe)&&Xe.length===1?Tt+"[]":Tt;if(te&&s(Xe)&&Xe.length===0)return Le+"[]";for(var Pe=0;Pe<yt.length;++Pe){var Be=yt[Pe],it=typeof Be=="object"&&Be&&typeof Be.value<"u"?Be.value:Xe[Be];if(!(ne&&it===null)){var Ct=Ee&&W?String(Be).replace(/\./g,"%2E"):String(Be),ft=s(Xe)?typeof H=="function"?H(Le,Ct):Le:Le+(Ee?"."+Ct:"["+Ct+"]");Ze.set(N,Se);var Lt=n();Lt.set(T,Ze),o(Gt,j(it,ft,H,oe,te,V,ne,W,H==="comma"&&xe&&s(Xe)?null:ie,he,fe,Ee,me,Me,De,xe,At,Lt))}}return Gt},U=function(N){if(!N)return x;if(typeof N.allowEmptyArrays<"u"&&typeof N.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof N.encodeDotInKeys<"u"&&typeof N.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(N.encoder!==null&&typeof N.encoder<"u"&&typeof N.encoder!="function")throw new TypeError("Encoder has to be a function.");var q=N.charset||x.charset;if(typeof N.charset<"u"&&N.charset!=="utf-8"&&N.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var H=t.default;if(typeof N.format<"u"){if(!r.call(t.formatters,N.format))throw new TypeError("Unknown format option provided.");H=N.format}var oe=t.formatters[H],te=x.filter;(typeof N.filter=="function"||s(N.filter))&&(te=N.filter);var V;if(N.arrayFormat in i?V=N.arrayFormat:"indices"in N?V=N.indices?"indices":"repeat":V=x.arrayFormat,"commaRoundTrip"in N&&typeof N.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var ne=typeof N.allowDots>"u"?N.encodeDotInKeys===!0?!0:x.allowDots:!!N.allowDots;return{addQueryPrefix:typeof N.addQueryPrefix=="boolean"?N.addQueryPrefix:x.addQueryPrefix,allowDots:ne,allowEmptyArrays:typeof N.allowEmptyArrays=="boolean"?!!N.allowEmptyArrays:x.allowEmptyArrays,arrayFormat:V,charset:q,charsetSentinel:typeof N.charsetSentinel=="boolean"?N.charsetSentinel:x.charsetSentinel,commaRoundTrip:!!N.commaRoundTrip,delimiter:typeof N.delimiter>"u"?x.delimiter:N.delimiter,encode:typeof N.encode=="boolean"?N.encode:x.encode,encodeDotInKeys:typeof N.encodeDotInKeys=="boolean"?N.encodeDotInKeys:x.encodeDotInKeys,encoder:typeof N.encoder=="function"?N.encoder:x.encoder,encodeValuesOnly:typeof N.encodeValuesOnly=="boolean"?N.encodeValuesOnly:x.encodeValuesOnly,filter:te,format:H,formatter:oe,serializeDate:typeof N.serializeDate=="function"?N.serializeDate:x.serializeDate,skipNulls:typeof N.skipNulls=="boolean"?N.skipNulls:x.skipNulls,sort:typeof N.sort=="function"?N.sort:null,strictNullHandling:typeof N.strictNullHandling=="boolean"?N.strictNullHandling:x.strictNullHandling}};return bE=function(j,N){var q=j,H=U(N),oe,te;typeof H.filter=="function"?(te=H.filter,q=te("",q)):s(H.filter)&&(te=H.filter,oe=te);var V=[];if(typeof q!="object"||q===null)return"";var ne=i[H.arrayFormat],W=ne==="comma"&&H.commaRoundTrip;oe||(oe=Object.keys(q)),H.sort&&oe.sort(H.sort);for(var ie=n(),he=0;he<oe.length;++he){var fe=oe[he],Ee=q[fe];H.skipNulls&&Ee===null||o(V,P(Ee,fe,ne,W,H.allowEmptyArrays,H.strictNullHandling,H.skipNulls,H.encodeDotInKeys,H.encode?H.encoder:null,H.filter,H.sort,H.allowDots,H.serializeDate,H.format,H.formatter,H.encodeValuesOnly,H.charset,ie))}var me=V.join(H.delimiter),Me=H.addQueryPrefix===!0?"?":"";return H.charsetSentinel&&(H.charset==="iso-8859-1"?Me+="utf8=%26%2310003%3B&":Me+="utf8=%E2%9C%93&"),me.length>0?Me+me:""},bE}var xE,lD;function hce(){if(lD)return xE;lD=1;var n=Xj(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},i=function(T){return T.replace(/&#(\d+);/g,function(P,U){return String.fromCharCode(parseInt(U,10))})},s=function(T,P,U){if(T&&typeof T=="string"&&P.comma&&T.indexOf(",")>-1)return T.split(",");if(P.throwOnLimitExceeded&&U>=P.arrayLimit)throw new RangeError("Array limit exceeded. Only "+P.arrayLimit+" element"+(P.arrayLimit===1?"":"s")+" allowed in an array.");return T},l="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",p=function(P,U){var j={__proto__:null},N=U.ignoreQueryPrefix?P.replace(/^\?/,""):P;N=N.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var q=U.parameterLimit===1/0?void 0:U.parameterLimit,H=N.split(U.delimiter,U.throwOnLimitExceeded?q+1:q);if(U.throwOnLimitExceeded&&H.length>q)throw new RangeError("Parameter limit exceeded. Only "+q+" parameter"+(q===1?"":"s")+" allowed.");var oe=-1,te,V=U.charset;if(U.charsetSentinel)for(te=0;te<H.length;++te)H[te].indexOf("utf8=")===0&&(H[te]===o?V="utf-8":H[te]===l&&(V="iso-8859-1"),oe=te,te=H.length);for(te=0;te<H.length;++te)if(te!==oe){var ne=H[te],W=ne.indexOf("]="),ie=W===-1?ne.indexOf("="):W+1,he,fe;ie===-1?(he=U.decoder(ne,r.decoder,V,"key"),fe=U.strictNullHandling?null:""):(he=U.decoder(ne.slice(0,ie),r.decoder,V,"key"),fe=n.maybeMap(s(ne.slice(ie+1),U,t(j[he])?j[he].length:0),function(me){return U.decoder(me,r.decoder,V,"value")})),fe&&U.interpretNumericEntities&&V==="iso-8859-1"&&(fe=i(String(fe))),ne.indexOf("[]=")>-1&&(fe=t(fe)?[fe]:fe);var Ee=e.call(j,he);Ee&&U.duplicates==="combine"?j[he]=n.combine(j[he],fe):(!Ee||U.duplicates==="last")&&(j[he]=fe)}return j},v=function(T,P,U,j){var N=0;if(T.length>0&&T[T.length-1]==="[]"){var q=T.slice(0,-1).join("");N=Array.isArray(P)&&P[q]?P[q].length:0}for(var H=j?P:s(P,U,N),oe=T.length-1;oe>=0;--oe){var te,V=T[oe];if(V==="[]"&&U.parseArrays)te=U.allowEmptyArrays&&(H===""||U.strictNullHandling&&H===null)?[]:n.combine([],H);else{te=U.plainObjects?{__proto__:null}:{};var ne=V.charAt(0)==="["&&V.charAt(V.length-1)==="]"?V.slice(1,-1):V,W=U.decodeDotInKeys?ne.replace(/%2E/g,"."):ne,ie=parseInt(W,10);!U.parseArrays&&W===""?te={0:H}:!isNaN(ie)&&V!==W&&String(ie)===W&&ie>=0&&U.parseArrays&&ie<=U.arrayLimit?(te=[],te[ie]=H):W!=="__proto__"&&(te[W]=H)}H=te}return H},x=function(P,U,j,N){if(P){var q=j.allowDots?P.replace(/\.([^.[]+)/g,"[$1]"):P,H=/(\[[^[\]]*])/,oe=/(\[[^[\]]*])/g,te=j.depth>0&&H.exec(q),V=te?q.slice(0,te.index):q,ne=[];if(V){if(!j.plainObjects&&e.call(Object.prototype,V)&&!j.allowPrototypes)return;ne.push(V)}for(var W=0;j.depth>0&&(te=oe.exec(q))!==null&&W<j.depth;){if(W+=1,!j.plainObjects&&e.call(Object.prototype,te[1].slice(1,-1))&&!j.allowPrototypes)return;ne.push(te[1])}if(te){if(j.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+j.depth+" and strictDepth is true");ne.push("["+q.slice(te.index)+"]")}return v(ne,U,j,N)}},B=function(P){if(!P)return r;if(typeof P.allowEmptyArrays<"u"&&typeof P.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof P.decodeDotInKeys<"u"&&typeof P.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(P.decoder!==null&&typeof P.decoder<"u"&&typeof P.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof P.charset<"u"&&P.charset!=="utf-8"&&P.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof P.throwOnLimitExceeded<"u"&&typeof P.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var U=typeof P.charset>"u"?r.charset:P.charset,j=typeof P.duplicates>"u"?r.duplicates:P.duplicates;if(j!=="combine"&&j!=="first"&&j!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var N=typeof P.allowDots>"u"?P.decodeDotInKeys===!0?!0:r.allowDots:!!P.allowDots;return{allowDots:N,allowEmptyArrays:typeof P.allowEmptyArrays=="boolean"?!!P.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof P.allowPrototypes=="boolean"?P.allowPrototypes:r.allowPrototypes,allowSparse:typeof P.allowSparse=="boolean"?P.allowSparse:r.allowSparse,arrayLimit:typeof P.arrayLimit=="number"?P.arrayLimit:r.arrayLimit,charset:U,charsetSentinel:typeof P.charsetSentinel=="boolean"?P.charsetSentinel:r.charsetSentinel,comma:typeof P.comma=="boolean"?P.comma:r.comma,decodeDotInKeys:typeof P.decodeDotInKeys=="boolean"?P.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof P.decoder=="function"?P.decoder:r.decoder,delimiter:typeof P.delimiter=="string"||n.isRegExp(P.delimiter)?P.delimiter:r.delimiter,depth:typeof P.depth=="number"||P.depth===!1?+P.depth:r.depth,duplicates:j,ignoreQueryPrefix:P.ignoreQueryPrefix===!0,interpretNumericEntities:typeof P.interpretNumericEntities=="boolean"?P.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof P.parameterLimit=="number"?P.parameterLimit:r.parameterLimit,parseArrays:P.parseArrays!==!1,plainObjects:typeof P.plainObjects=="boolean"?P.plainObjects:r.plainObjects,strictDepth:typeof P.strictDepth=="boolean"?!!P.strictDepth:r.strictDepth,strictNullHandling:typeof P.strictNullHandling=="boolean"?P.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof P.throwOnLimitExceeded=="boolean"?P.throwOnLimitExceeded:!1}};return xE=function(T,P){var U=B(P);if(T===""||T===null||typeof T>"u")return U.plainObjects?{__proto__:null}:{};for(var j=typeof T=="string"?p(T,U):T,N=U.plainObjects?{__proto__:null}:{},q=Object.keys(j),H=0;H<q.length;++H){var oe=q[H],te=x(oe,j[oe],U,typeof T=="string");N=n.merge(N,te,U)}return U.allowSparse===!0?N:n.compact(N)},xE}var ME,uD;function fce(){if(uD)return ME;uD=1;var n=dce(),e=hce(),t=e8();return ME={formats:t,parse:e,stringify:n},ME}var AD;function pce(){if(AD)return Ag;AD=1;var n=RAe();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],l=["{","}","|","\\","^","`"].concat(s),o=["'"].concat(l),p=["%","/","?",";","#"].concat(o),v=["/","?","#"],x=255,B=/^[+a-z0-9A-Z_-]{0,63}$/,T=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,P={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},N=fce();function q(V,ne,W){if(V&&typeof V=="object"&&V instanceof e)return V;var ie=new e;return ie.parse(V,ne,W),ie}e.prototype.parse=function(V,ne,W){if(typeof V!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof V);var ie=V.indexOf("?"),he=ie!==-1&&ie<V.indexOf("#")?"?":"#",fe=V.split(he),Ee=/\\/g;fe[0]=fe[0].replace(Ee,"/"),V=fe.join(he);var me=V;if(me=me.trim(),!W&&V.split("#").length===1){var Me=i.exec(me);if(Me)return this.path=me,this.href=me,this.pathname=Me[1],Me[2]?(this.search=Me[2],ne?this.query=N.parse(this.search.substr(1)):this.query=this.search.substr(1)):ne&&(this.search="",this.query={}),this}var De=t.exec(me);if(De){De=De[0];var xe=De.toLowerCase();this.protocol=xe,me=me.substr(De.length)}if(W||De||me.match(/^\/\/[^@/]+@[^@/]+/)){var At=me.substr(0,2)==="//";At&&!(De&&U[De])&&(me=me.substr(2),this.slashes=!0)}if(!U[De]&&(At||De&&!j[De])){for(var Ze=-1,Xe=0;Xe<v.length;Xe++){var Ne=me.indexOf(v[Xe]);Ne!==-1&&(Ze===-1||Ne<Ze)&&(Ze=Ne)}var Se,Re;Ze===-1?Re=me.lastIndexOf("@"):Re=me.lastIndexOf("@",Ze),Re!==-1&&(Se=me.slice(0,Re),me=me.slice(Re+1),this.auth=decodeURIComponent(Se)),Ze=-1;for(var Xe=0;Xe<p.length;Xe++){var Ne=me.indexOf(p[Xe]);Ne!==-1&&(Ze===-1||Ne<Ze)&&(Ze=Ne)}Ze===-1&&(Ze=me.length),this.host=me.slice(0,Ze),me=me.slice(Ze),this.parseHost(),this.hostname=this.hostname||"";var He=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!He)for(var _t=this.hostname.split(/\./),Xe=0,Gt=_t.length;Xe<Gt;Xe++){var yt=_t[Xe];if(yt&&!yt.match(B)){for(var Ft="",Tt=0,Le=yt.length;Tt<Le;Tt++)yt.charCodeAt(Tt)>127?Ft+="x":Ft+=yt[Tt];if(!Ft.match(B)){var Pe=_t.slice(0,Xe),Be=_t.slice(Xe+1),it=yt.match(T);it&&(Pe.push(it[1]),Be.unshift(it[2])),Be.length&&(me="/"+Be.join(".")+me),this.hostname=Pe.join(".");break}}}this.hostname.length>x?this.hostname="":this.hostname=this.hostname.toLowerCase(),He||(this.hostname=n.toASCII(this.hostname));var Ct=this.port?":"+this.port:"",ft=this.hostname||"";this.host=ft+Ct,this.href+=this.host,He&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),me[0]!=="/"&&(me="/"+me))}if(!P[xe])for(var Xe=0,Gt=o.length;Xe<Gt;Xe++){var Lt=o[Xe];if(me.indexOf(Lt)!==-1){var Zt=encodeURIComponent(Lt);Zt===Lt&&(Zt=escape(Lt)),me=me.split(Lt).join(Zt)}}var Rt=me.indexOf("#");Rt!==-1&&(this.hash=me.substr(Rt),me=me.slice(0,Rt));var _n=me.indexOf("?");if(_n!==-1?(this.search=me.substr(_n),this.query=me.substr(_n+1),ne&&(this.query=N.parse(this.query)),me=me.slice(0,_n)):ne&&(this.search="",this.query={}),me&&(this.pathname=me),j[xe]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Ct=this.pathname||"",qn=this.search||"";this.path=Ct+qn}return this.href=this.format(),this};function H(V){return typeof V=="string"&&(V=q(V)),V instanceof e?V.format():e.prototype.format.call(V)}e.prototype.format=function(){var V=this.auth||"";V&&(V=encodeURIComponent(V),V=V.replace(/%3A/i,":"),V+="@");var ne=this.protocol||"",W=this.pathname||"",ie=this.hash||"",he=!1,fe="";this.host?he=V+this.host:this.hostname&&(he=V+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(he+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(fe=N.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Ee=this.search||fe&&"?"+fe||"";return ne&&ne.substr(-1)!==":"&&(ne+=":"),this.slashes||(!ne||j[ne])&&he!==!1?(he="//"+(he||""),W&&W.charAt(0)!=="/"&&(W="/"+W)):he||(he=""),ie&&ie.charAt(0)!=="#"&&(ie="#"+ie),Ee&&Ee.charAt(0)!=="?"&&(Ee="?"+Ee),W=W.replace(/[?#]/g,function(me){return encodeURIComponent(me)}),Ee=Ee.replace("#","%23"),ne+he+W+Ee+ie};function oe(V,ne){return q(V,!1,!0).resolve(ne)}e.prototype.resolve=function(V){return this.resolveObject(q(V,!1,!0)).format()};function te(V,ne){return V?q(V,!1,!0).resolveObject(ne):ne}return e.prototype.resolveObject=function(V){if(typeof V=="string"){var ne=new e;ne.parse(V,!1,!0),V=ne}for(var W=new e,ie=Object.keys(this),he=0;he<ie.length;he++){var fe=ie[he];W[fe]=this[fe]}if(W.hash=V.hash,V.href==="")return W.href=W.format(),W;if(V.slashes&&!V.protocol){for(var Ee=Object.keys(V),me=0;me<Ee.length;me++){var Me=Ee[me];Me!=="protocol"&&(W[Me]=V[Me])}return j[W.protocol]&&W.hostname&&!W.pathname&&(W.pathname="/",W.path=W.pathname),W.href=W.format(),W}if(V.protocol&&V.protocol!==W.protocol){if(!j[V.protocol]){for(var De=Object.keys(V),xe=0;xe<De.length;xe++){var At=De[xe];W[At]=V[At]}return W.href=W.format(),W}if(W.protocol=V.protocol,!V.host&&!U[V.protocol]){for(var Gt=(V.pathname||"").split("/");Gt.length&&!(V.host=Gt.shift()););V.host||(V.host=""),V.hostname||(V.hostname=""),Gt[0]!==""&&Gt.unshift(""),Gt.length<2&&Gt.unshift(""),W.pathname=Gt.join("/")}else W.pathname=V.pathname;if(W.search=V.search,W.query=V.query,W.host=V.host||"",W.auth=V.auth,W.hostname=V.hostname||V.host,W.port=V.port,W.pathname||W.search){var Ze=W.pathname||"",Xe=W.search||"";W.path=Ze+Xe}return W.slashes=W.slashes||V.slashes,W.href=W.format(),W}var Ne=W.pathname&&W.pathname.charAt(0)==="/",Se=V.host||V.pathname&&V.pathname.charAt(0)==="/",Re=Se||Ne||W.host&&V.pathname,He=Re,_t=W.pathname&&W.pathname.split("/")||[],Gt=V.pathname&&V.pathname.split("/")||[],yt=W.protocol&&!j[W.protocol];if(yt&&(W.hostname="",W.port=null,W.host&&(_t[0]===""?_t[0]=W.host:_t.unshift(W.host)),W.host="",V.protocol&&(V.hostname=null,V.port=null,V.host&&(Gt[0]===""?Gt[0]=V.host:Gt.unshift(V.host)),V.host=null),Re=Re&&(Gt[0]===""||_t[0]==="")),Se)W.host=V.host||V.host===""?V.host:W.host,W.hostname=V.hostname||V.hostname===""?V.hostname:W.hostname,W.search=V.search,W.query=V.query,_t=Gt;else if(Gt.length)_t||(_t=[]),_t.pop(),_t=_t.concat(Gt),W.search=V.search,W.query=V.query;else if(V.search!=null){if(yt){W.host=_t.shift(),W.hostname=W.host;var Ft=W.host&&W.host.indexOf("@")>0?W.host.split("@"):!1;Ft&&(W.auth=Ft.shift(),W.hostname=Ft.shift(),W.host=W.hostname)}return W.search=V.search,W.query=V.query,(W.pathname!==null||W.search!==null)&&(W.path=(W.pathname?W.pathname:"")+(W.search?W.search:"")),W.href=W.format(),W}if(!_t.length)return W.pathname=null,W.search?W.path="/"+W.search:W.path=null,W.href=W.format(),W;for(var Tt=_t.slice(-1)[0],Le=(W.host||V.host||_t.length>1)&&(Tt==="."||Tt==="..")||Tt==="",Pe=0,Be=_t.length;Be>=0;Be--)Tt=_t[Be],Tt==="."?_t.splice(Be,1):Tt===".."?(_t.splice(Be,1),Pe++):Pe&&(_t.splice(Be,1),Pe--);if(!Re&&!He)for(;Pe--;Pe)_t.unshift("..");Re&&_t[0]!==""&&(!_t[0]||_t[0].charAt(0)!=="/")&&_t.unshift(""),Le&&_t.join("/").substr(-1)!=="/"&&_t.push("");var it=_t[0]===""||_t[0]&&_t[0].charAt(0)==="/";if(yt){W.hostname=it?"":_t.length?_t.shift():"",W.host=W.hostname;var Ft=W.host&&W.host.indexOf("@")>0?W.host.split("@"):!1;Ft&&(W.auth=Ft.shift(),W.hostname=Ft.shift(),W.host=W.hostname)}return Re=Re||W.host&&_t.length,Re&&!it&&_t.unshift(""),_t.length>0?W.pathname=_t.join("/"):(W.pathname=null,W.path=null),(W.pathname!==null||W.search!==null)&&(W.path=(W.pathname?W.pathname:"")+(W.search?W.search:"")),W.auth=V.auth||W.auth,W.slashes=W.slashes||V.slashes,W.href=W.format(),W},e.prototype.parseHost=function(){var V=this.host,ne=r.exec(V);ne&&(ne=ne[0],ne!==":"&&(this.port=ne.substr(1)),V=V.substr(0,V.length-ne.length)),V&&(this.hostname=V)},Ag.parse=q,Ag.resolve=oe,Ag.resolveObject=te,Ag.format=H,Ag.Url=e,Ag}var mce=pce();const cD=yl(mce);function fs(){var n="/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",e="370277aff056c0894d7ae34686219318414cc635",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/metadata.ts",statementMap:{0:{start:{line:3,column:2},end:{line:16,column:5}},1:{start:{line:7,column:4},end:{line:9,column:5}},2:{start:{line:8,column:6},end:{line:8,column:60}},3:{start:{line:10,column:4},end:{line:10,column:27}},4:{start:{line:12,column:4},end:{line:12,column:13}},5:{start:{line:14,column:4},end:{line:14,column:95}},6:{start:{line:15,column:4},end:{line:15,column:21}},7:{start:{line:19,column:2},end:{line:19,column:34}},8:{start:{line:19,column:20},end:{line:19,column:34}},9:{start:{line:20,column:17},end:{line:20,column:42}},10:{start:{line:21,column:23},end:{line:21,column:57}},11:{start:{line:22,column:2},end:{line:26,column:3}},12:{start:{line:23,column:4},end:{line:23,column:41}},13:{start:{line:25,column:4},end:{line:25,column:69}},14:{start:{line:27,column:14},end:{line:27,column:35}},15:{start:{line:28,column:2},end:{line:28,column:24}},16:{start:{line:31,column:2},end:{line:31,column:30}},17:{start:{line:31,column:16},end:{line:31,column:30}},18:{start:{line:32,column:14},end:{line:32,column:31}},19:{start:{line:33,column:2},end:{line:33,column:57}},20:{start:{line:33,column:32},end:{line:33,column:55}}},fnMap:{0:{name:"loadJSON",decl:{start:{line:2,column:9},end:{line:2,column:17}},loc:{start:{line:2,column:41},end:{line:17,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:6,column:10},end:{line:6,column:11}},loc:{start:{line:6,column:24},end:{line:11,column:3}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:20},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:11},end:{line:13,column:12}},loc:{start:{line:13,column:17},end:{line:16,column:3}},line:13},4:{name:"downloadGlyphsMetadata",decl:{start:{line:18,column:16},end:{line:18,column:38}},loc:{start:{line:18,column:56},end:{line:29,column:1}},line:18},5:{name:"downloadSpriteMetadata",decl:{start:{line:30,column:16},end:{line:30,column:38}},loc:{start:{line:30,column:52},end:{line:34,column:1}},line:30},6:{name:"(anonymous_6)",decl:{start:{line:33,column:20},end:{line:33,column:21}},loc:{start:{line:33,column:32},end:{line:33,column:55}},line:33}},branchMap:{0:{loc:{start:{line:7,column:4},end:{line:9,column:5}},type:"if",locations:[{start:{line:7,column:4},end:{line:9,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:7},1:{loc:{start:{line:19,column:2},end:{line:19,column:34}},type:"if",locations:[{start:{line:19,column:2},end:{line:19,column:34}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:19},2:{loc:{start:{line:22,column:2},end:{line:26,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:26,column:3}},{start:{line:24,column:9},end:{line:26,column:3}}],line:22},3:{loc:{start:{line:31,column:2},end:{line:31,column:30}},type:"if",locations:[{start:{line:31,column:2},end:{line:31,column:30}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:31}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/metadata.ts"],names:[],mappings:"AAAA,OAAO,YAAY;AAEnB,SAAS,SAAS,KAAa,cAAmB,IAA8B;AAC9E,QAAM,KAAK;AAAA,IACT,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,CAAC,aAAa;AAClB,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,iCAAiC,GAAG;AAAA,IACtD;AACA,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,OAAG,IAAI;AAAA,EACT,CAAC,EACA,MAAM,MAAM;AACX,YAAQ,KAAK,+BAA+B,MAAM,2BAA2B,YAAY;AACzF,OAAG,YAAY;AAAA,EACjB,CAAC;AACL;AAEO,gBAAS,uBAAuB,aAAqB,IAA8B;AACxF,MAAG,CAAC,YAAa,QAAO,GAAG,CAAC,CAAC;AAI7B,QAAM,SAAS,OAAO,MAAM,WAAW;AACvC,QAAM,eAAe;AACrB,MAAG,OAAO,aAAa,cAAc;AACnC,WAAO,WAAW;AAAA,EACpB,OAAO;AACL,WAAO,WAAW,OAAO,SAAU,QAAQ,cAAc,OAAO;AAAA,EAClE;AACA,QAAM,MAAM,OAAO,OAAO,MAAM;AAEhC,WAAS,KAAK,CAAC,GAAG,EAAE;AACtB;AAEO,gBAAS,uBAAuB,SAAiB,IAA8B;AACpF,MAAG,CAAC,QAAS,QAAO,GAAG,CAAC,CAAC;AACzB,QAAM,MAAM,UAAU;AACtB,WAAS,KAAK,CAAC,GAAG,YAAU,GAAG,OAAO,KAAK,MAAM,CAAC,CAAC;AACrD;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"370277aff056c0894d7ae34686219318414cc635"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return fs=function(){return l},l}fs();function Jj(n,e,t){fs().f[0]++,fs().s[0]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(r=>{if(fs().f[1]++,fs().s[1]++,r.ok)fs().b[0][1]++;else throw fs().b[0][0]++,fs().s[2]++,new Error("Failed to load metadata for "+n);return fs().s[3]++,r.json()}).then(r=>{fs().f[2]++,fs().s[4]++,t(r)}).catch(()=>{fs().f[3]++,fs().s[5]++,console.warn("Can not load metadata for "+n+", using default value "+e),fs().s[6]++,t(e)})}function gce(n,e){if(fs().f[4]++,fs().s[7]++,n)fs().b[1][1]++;else return fs().b[1][0]++,fs().s[8]++,e([]);const t=(fs().s[9]++,cD.parse(n)),r=(fs().s[10]++,"/%7Bfontstack%7D/%7Brange%7D.pbf");fs().s[11]++,t.pathname===r?(fs().b[2][0]++,fs().s[12]++,t.pathname="/fontstacks.json"):(fs().b[2][1]++,fs().s[13]++,t.pathname=t.pathname.replace(r,".json"));const i=(fs().s[14]++,cD.format(t));fs().s[15]++,Jj(i,[],e)}function yce(n,e){if(fs().f[5]++,fs().s[16]++,n)fs().b[3][1]++;else return fs().b[3][0]++,fs().s[17]++,e([]);const t=(fs().s[18]++,n+".json");fs().s[19]++,Jj(t,{},r=>(fs().f[6]++,fs().s[20]++,e(Object.keys(r))))}function oc(){var n="/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",e="16cd8175e865a1f27680600ab24a4fbadf5fb4b2",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts",statementMap:{0:{start:{line:3,column:21},end:{line:3,column:50}},1:{start:{line:4,column:2},end:{line:4,column:46}},2:{start:{line:7,column:2},end:{line:7,column:41}},3:{start:{line:8,column:2},end:{line:18,column:5}},4:{start:{line:12,column:4},end:{line:12,column:27}},5:{start:{line:14,column:4},end:{line:14,column:40}},6:{start:{line:16,column:4},end:{line:16,column:60}},7:{start:{line:17,column:4},end:{line:17,column:25}},8:{start:{line:21,column:21},end:{line:21,column:50}},9:{start:{line:22,column:2},end:{line:22,column:42}},10:{start:{line:23,column:2},end:{line:23,column:73}}},fnMap:{0:{name:"initialStyleUrl",decl:{start:{line:2,column:16},end:{line:2,column:31}},loc:{start:{line:2,column:34},end:{line:5,column:1}},line:2},1:{name:"loadStyleUrl",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:43},end:{line:19,column:1}},line:6},2:{name:"(anonymous_2)",decl:{start:{line:11,column:10},end:{line:11,column:11}},loc:{start:{line:11,column:29},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:13,column:10},end:{line:13,column:11}},loc:{start:{line:13,column:25},end:{line:15,column:3}},line:13},4:{name:"(anonymous_4)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:22},end:{line:18,column:3}},line:15},5:{name:"removeStyleQuerystring",decl:{start:{line:20,column:16},end:{line:20,column:38}},loc:{start:{line:20,column:41},end:{line:24,column:1}},line:20}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/urlopen.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAEX,gBAAS,kBAAkB;AAChC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,SAAO,WAAW,aAAa,IAAI,OAAO;AAC5C;AAEO,gBAAS,aAAa,UAAkB,IAA8B;AAC3E,UAAQ,IAAI,iBAAiB,QAAQ;AACrC,QAAM,UAAU;AAAA,IACd,MAAM;AAAA,IACN,aAAa;AAAA,EACf,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,WAAO,SAAS,KAAK;AAAA,EACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,OAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,EACpC,CAAC,EACA,MAAM,WAAW;AAChB,YAAQ,KAAK,iCAAiC,QAAQ;AACtD,OAAG,MAAM,UAAU;AAAA,EACrB,CAAC;AACL;AAEO,gBAAS,yBAAyB;AACvC,QAAM,aAAa,IAAI,IAAI,OAAO,SAAS,IAAI;AAC/C,aAAW,aAAa,OAAO,OAAO;AACtC,SAAO,QAAQ,aAAa,CAAC,GAAG,SAAS,OAAO,WAAW,SAAS,CAAC;AACvE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"16cd8175e865a1f27680600ab24a4fbadf5fb4b2"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return oc=function(){return l},l}oc();function vce(){oc().f[0]++;const n=(oc().s[0]++,new URL(window.location.href));return oc().s[1]++,n.searchParams.get("style")}function eN(n,e){oc().f[1]++,oc().s[2]++,console.log("Loading style",n),oc().s[3]++,fetch(n,{mode:"cors",credentials:"same-origin"}).then(function(t){return oc().f[2]++,oc().s[4]++,t.json()}).then(function(t){oc().f[3]++,oc().s[5]++,e(_c.ensureStyleValidity(t))}).catch(function(){oc().f[4]++,oc().s[6]++,console.warn("Could not fetch default style",n),oc().s[7]++,e(_c.emptyStyle)})}function dD(){oc().f[5]++;const n=(oc().s[8]++,new URL(window.location.href));oc().s[9]++,n.searchParams.delete("style"),oc().s[10]++,window.history.replaceState({},document.title,n.toString())}function Gd(){var n="/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",e="f92fa2abb31199d99fd3ae02d967dc6702faf862",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts",statementMap:{0:{start:{line:3,column:18},end:{line:3,column:47}},1:{start:{line:4,column:2},end:{line:4,column:70}},2:{start:{line:4,column:30},end:{line:4,column:68}},3:{start:{line:7,column:2},end:{line:7,column:71}},4:{start:{line:7,column:58},end:{line:7,column:69}},5:{start:{line:10,column:2},end:{line:10,column:71}},6:{start:{line:10,column:58},end:{line:10,column:69}}},fnMap:{0:{name:"diffMessages",decl:{start:{line:2,column:9},end:{line:2,column:21}},loc:{start:{line:2,column:47},end:{line:5,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:4,column:21},end:{line:4,column:22}},loc:{start:{line:4,column:30},end:{line:4,column:68}},line:4},2:{name:"undoMessages",decl:{start:{line:6,column:16},end:{line:6,column:28}},loc:{start:{line:6,column:54},end:{line:8,column:1}},line:6},3:{name:"(anonymous_3)",decl:{start:{line:7,column:51},end:{line:7,column:52}},loc:{start:{line:7,column:58},end:{line:7,column:69}},line:7},4:{name:"redoMessages",decl:{start:{line:9,column:16},end:{line:9,column:28}},loc:{start:{line:9,column:54},end:{line:11,column:1}},line:9},5:{name:"(anonymous_5)",decl:{start:{line:10,column:51},end:{line:10,column:52}},loc:{start:{line:10,column:58},end:{line:10,column:69}},line:10}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/diffmessage.ts"],names:[],mappings:"AAAA,SAAQ,YAAW;AAGnB,SAAS,aAAa,aAAiC,YAAgC;AACrF,QAAM,UAAU,KAAK,aAAa,UAAU;AAC5C,SAAO,QAAQ,IAAI,SAAO,IAAI,UAAU,MAAM,IAAI,KAAK,KAAK,GAAG,CAAC;AAClE;AAEO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;AACO,gBAAS,aAAa,aAAiC,YAAgC;AAC5F,SAAO,aAAa,aAAa,UAAU,EAAE,IAAI,OAAK,UAAU,CAAC;AACnE;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f92fa2abb31199d99fd3ae02d967dc6702faf862"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Gd=function(){return l},l}Gd();function tN(n,e){Gd().f[0]++;const t=(Gd().s[0]++,XQ(n,e));return Gd().s[1]++,t.map(r=>(Gd().f[1]++,Gd().s[2]++,r.command+" "+r.args.join(" ")))}function Cce(n,e){return Gd().f[2]++,Gd().s[3]++,tN(n,e).map(t=>(Gd().f[3]++,Gd().s[4]++,"Undo "+t))}function _ce(n,e){return Gd().f[4]++,Gd().s[5]++,tN(n,e).map(t=>(Gd().f[5]++,Gd().s[6]++,"Redo "+t))}function mi(){var n="/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",e="d0461aebf8a7391762efd074af8c5c2674087e64",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts",statementMap:{0:{start:{line:4,column:22},end:{line:4,column:32}},1:{start:{line:5,column:20},end:{line:5,column:27}},2:{start:{line:6,column:20},end:{line:9,column:1}},3:{start:{line:10,column:24},end:{line:10,column:44}},4:{start:{line:12,column:2},end:{line:12,column:36}},5:{start:{line:15,column:17},end:{line:15,column:19}},6:{start:{line:16,column:2},end:{line:21,column:3}},7:{start:{line:16,column:15},end:{line:16,column:16}},8:{start:{line:17,column:16},end:{line:17,column:42}},9:{start:{line:18,column:4},end:{line:20,column:5}},10:{start:{line:19,column:6},end:{line:19,column:32}},11:{start:{line:22,column:2},end:{line:22,column:16}},12:{start:{line:25,column:16},end:{line:25,column:30}},13:{start:{line:26,column:2},end:{line:26,column:86}},14:{start:{line:29,column:2},end:{line:31,column:3}},15:{start:{line:30,column:4},end:{line:30,column:41}},16:{start:{line:32,column:16},end:{line:32,column:30}},17:{start:{line:33,column:18},end:{line:33,column:26}},18:{start:{line:34,column:2},end:{line:34,column:17}},19:{start:{line:37,column:2},end:{line:37,column:57}},20:{start:{line:47,column:4},end:{line:47,column:40}},21:{start:{line:50,column:4},end:{line:50,column:13}},22:{start:{line:54,column:4},end:{line:59,column:5}},23:{start:{line:54,column:17},end:{line:54,column:18}},24:{start:{line:55,column:18},end:{line:55,column:44}},25:{start:{line:56,column:6},end:{line:58,column:7}},26:{start:{line:57,column:8},end:{line:57,column:44}},27:{start:{line:63,column:4},end:{line:63,column:65}},28:{start:{line:63,column:37},end:{line:63,column:65}},29:{start:{line:64,column:20},end:{line:64,column:67}},30:{start:{line:65,column:22},end:{line:65,column:68}},31:{start:{line:66,column:4},end:{line:66,column:52}},32:{start:{line:66,column:19},end:{line:66,column:52}},33:{start:{line:67,column:4},end:{line:67,column:25}},34:{start:{line:71,column:4},end:{line:71,column:51}},35:{start:{line:72,column:16},end:{line:72,column:37}},36:{start:{line:73,column:4},end:{line:73,column:63}},37:{start:{line:74,column:4},end:{line:74,column:65}},38:{start:{line:75,column:4},end:{line:75,column:20}}},fnMap:{0:{name:"loadDefaultStyle",decl:{start:{line:11,column:16},end:{line:11,column:32}},loc:{start:{line:11,column:37},end:{line:13,column:1}},line:11},1:{name:"loadStoredStyles",decl:{start:{line:14,column:9},end:{line:14,column:25}},loc:{start:{line:14,column:28},end:{line:23,column:1}},line:14},2:{name:"isStyleKey",decl:{start:{line:24,column:9},end:{line:24,column:19}},loc:{start:{line:24,column:25},end:{line:27,column:1}},line:24},3:{name:"fromKey",decl:{start:{line:28,column:9},end:{line:28,column:16}},loc:{start:{line:28,column:22},end:{line:35,column:1}},line:28},4:{name:"styleKey",decl:{start:{line:36,column:9},end:{line:36,column:17}},loc:{start:{line:36,column:27},end:{line:38,column:1}},line:36},5:{name:"(anonymous_5)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:16},end:{line:48,column:3}},line:46},6:{name:"(anonymous_6)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:11},end:{line:51,column:3}},line:49},7:{name:"(anonymous_7)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:10},end:{line:60,column:3}},line:53},8:{name:"(anonymous_8)",decl:{start:{line:62,column:2},end:{line:62,column:3}},loc:{start:{line:62,column:18},end:{line:68,column:3}},line:62},9:{name:"(anonymous_9)",decl:{start:{line:70,column:2},end:{line:70,column:3}},loc:{start:{line:70,column:17},end:{line:76,column:3}},line:70}},branchMap:{0:{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:18},1:{loc:{start:{line:26,column:9},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:9},end:{line:26,column:27}},{start:{line:26,column:31},end:{line:26,column:57}},{start:{line:26,column:61},end:{line:26,column:85}}],line:26},2:{loc:{start:{line:29,column:2},end:{line:31,column:3}},type:"if",locations:[{start:{line:29,column:2},end:{line:31,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:29},3:{loc:{start:{line:56,column:6},end:{line:58,column:7}},type:"if",locations:[{start:{line:56,column:6},end:{line:58,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:56},4:{loc:{start:{line:63,column:4},end:{line:63,column:65}},type:"if",locations:[{start:{line:63,column:4},end:{line:63,column:65}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:63},5:{loc:{start:{line:66,column:4},end:{line:66,column:52}},type:"if",locations:[{start:{line:66,column:4},end:{line:66,column:52}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:66}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0},b:{0:[0,0],1:[0,0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/stylestore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,oBAAmB;AAC3B,OAAO,mBAAmB;AAG1B,MAAM,gBAAgB;AACtB,MAAM,cAAc;AACpB,MAAM,cAAc;AAAA,EAClB,QAAQ,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AAAA,EAChD,aAAa,CAAC,eAAe,cAAc,EAAE,KAAK,GAAG;AACvD;AAEA,MAAM,kBAAkB,cAAc,CAAC,EAAE;AAGlC,gBAAS,iBAAiB,IAA8B;AAC7D,eAAa,iBAAiB,EAAE;AAClC;AAGA,SAAS,mBAAmB;AAC1B,QAAM,SAAS,CAAC;AAChB,WAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,UAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,QAAG,WAAW,GAAI,GAAG;AACnB,aAAO,KAAK,QAAQ,GAAI,CAAC;AAAA,IAC3B;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,WAAW,KAAa;AAC/B,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,SAAO,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM,iBAAiB,MAAM,CAAC,MAAM;AAC1E;AAGA,SAAS,QAAQ,KAAa;AAC5B,MAAG,CAAC,WAAW,GAAG,GAAG;AACnB,UAAM;AAAA,EACR;AAEA,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,QAAM,UAAU,MAAM,CAAC;AACvB,SAAO;AACT;AAGA,SAAS,SAAS,SAAiB;AACjC,SAAO,CAAC,eAAe,aAAa,OAAO,EAAE,KAAK,GAAG;AACvD;AAGO,aAAM,WAAW;AAAA;AAAA;AAAA;AAAA,EAItB;AAAA;AAAA;AAAA,EAIA,cAAc;AACZ,SAAK,YAAY,iBAAiB;AAAA,EACpC;AAAA,EAEA,KAAK,IAA8B;AACjC,OAAG,IAAI;AAAA,EACT;AAAA;AAAA,EAGA,QAAQ;AACN,aAAS,IAAI,GAAG,IAAI,OAAO,aAAa,QAAQ,KAAK;AACnD,YAAM,MAAM,OAAO,aAAa,IAAI,CAAC;AACrC,UAAG,IAAI,WAAW,aAAa,GAAG;AAChC,eAAO,aAAa,WAAW,GAAG;AAAA,MACpC;AAAA,IACF;AAAA,EACF;AAAA;AAAA,EAGA,YAAY,IAA8B;AACxC,QAAG,KAAK,UAAU,WAAW,EAAG,QAAO,iBAAiB,EAAE;AAC1D,UAAM,UAAU,OAAO,aAAa,QAAQ,YAAY,MAAM;AAC9D,UAAM,YAAY,OAAO,aAAa,QAAQ,SAAS,OAAO,CAAC;AAE/D,QAAG,UAAW,QAAO,GAAG,KAAK,MAAM,SAAS,CAAC;AAC7C,qBAAiB,EAAE;AAAA,EACrB;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,eAAW,MAAM,oBAAoB,QAAQ;AAC7C,UAAM,MAAM,SAAS,SAAS,EAAE;AAChC,WAAO,aAAa,QAAQ,KAAK,KAAK,UAAU,QAAQ,CAAC;AACzD,WAAO,aAAa,QAAQ,YAAY,QAAQ,SAAS,EAAE;AAC3D,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d0461aebf8a7391762efd074af8c5c2674087e64"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return mi=function(){return l},l}mi();const KC=(mi().s[0]++,"maputnik"),nN=(mi().s[1]++,"style"),hD=(mi().s[2]++,{latest:[KC,"latest_style"].join(":"),accessToken:[KC,"access_token"].join(":")}),bce=(mi().s[3]++,Wj[0].url);function fD(n){mi().f[0]++,mi().s[4]++,eN(bce,n)}function xce(){mi().f[1]++;const n=(mi().s[5]++,[]);mi().s[6]++;for(let e=(mi().s[7]++,0);e<window.localStorage.length;e++){const t=(mi().s[8]++,window.localStorage.key(e));mi().s[9]++,rN(t)?(mi().b[0][0]++,mi().s[10]++,n.push(Mce(t))):mi().b[0][1]++}return mi().s[11]++,n}function rN(n){mi().f[2]++;const e=(mi().s[12]++,n.split(":"));return mi().s[13]++,mi().b[1][0]++,e.length===3&&(mi().b[1][1]++,e[0]===KC)&&(mi().b[1][2]++,e[1]===nN)}function Mce(n){if(mi().f[3]++,mi().s[14]++,rN(n))mi().b[2][1]++;else throw mi().b[2][0]++,mi().s[15]++,"Key is not a valid style key";const e=(mi().s[16]++,n.split(":")),t=(mi().s[17]++,e[2]);return mi().s[18]++,t}function pD(n){return mi().f[4]++,mi().s[19]++,[KC,nN,n].join(":")}class mD{constructor(){Pn(this,"mapStyles");mi().f[5]++,mi().s[20]++,this.mapStyles=xce()}init(e){mi().f[6]++,mi().s[21]++,e(null)}purge(){mi().f[7]++,mi().s[22]++;for(let e=(mi().s[23]++,0);e<window.localStorage.length;e++){const t=(mi().s[24]++,window.localStorage.key(e));mi().s[25]++,t.startsWith(KC)?(mi().b[3][0]++,mi().s[26]++,window.localStorage.removeItem(t)):mi().b[3][1]++}}latestStyle(e){if(mi().f[8]++,mi().s[27]++,this.mapStyles.length===0)return mi().b[4][0]++,mi().s[28]++,fD(e);mi().b[4][1]++;const t=(mi().s[29]++,window.localStorage.getItem(hD.latest)),r=(mi().s[30]++,window.localStorage.getItem(pD(t)));if(mi().s[31]++,r)return mi().b[5][0]++,mi().s[32]++,e(JSON.parse(r));mi().b[5][1]++,mi().s[33]++,fD(e)}save(e){mi().f[9]++,mi().s[34]++,e=_c.ensureStyleValidity(e);const t=(mi().s[35]++,pD(e.id));return mi().s[36]++,window.localStorage.setItem(t,JSON.stringify(e)),mi().s[37]++,window.localStorage.setItem(hD.latest,e.id),mi().s[38]++,e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var U6=function(n,e){return U6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},U6(n,e)};function iN(n,e){U6(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function wce(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function Sce(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(o){l={error:o}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return s}function Ece(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Sce(arguments[e]));return n}var oN=function(){function n(e,t){this.target=t,this.type=e}return n}(),Bce=function(n){iN(e,n);function e(t,r){var i=n.call(this,"error",r)||this;return i.message=t.message,i.error=t,i}return e}(oN),Oce=function(n){iN(e,n);function e(t,r,i){t===void 0&&(t=1e3),r===void 0&&(r="");var s=n.call(this,"close",i)||this;return s.wasClean=!0,s.code=t,s.reason=r,s}return e}(oN);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var Ice=function(){if(typeof WebSocket<"u")return WebSocket},kce=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},cg={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},Tce=function(){function n(e,t,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(s){i._debug("open event");var l=i._options.minUptime,o=l===void 0?cg.minUptime:l;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},o),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(p){return i._ws.send(p)}),i._messageQueue=[],i.onopen&&i.onopen(s),i._listeners.open.forEach(function(p){return i._callEventListener(s,p)})},this._handleMessage=function(s){i._debug("message event"),i.onmessage&&i.onmessage(s),i._listeners.message.forEach(function(l){return i._callEventListener(s,l)})},this._handleError=function(s){i._debug("error event",s.message),i._disconnect(void 0,s.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(s),i._debug("exec error listeners"),i._listeners.error.forEach(function(l){return i._callEventListener(s,l)}),i._connect()},this._handleClose=function(s){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(s),i._listeners.close.forEach(function(l){return i._callEventListener(s,l)})},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,r){return typeof r=="string"?t+=r.length:r instanceof Blob?t+=r.size:t+=r.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=t===void 0?cg.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,r,i=this._listeners[e.type];if(i)try{for(var s=wce(i),l=s.next();!l.done;l=s.next()){var o=l.value;this._callEventListener(e,o)}}catch(p){t={error:p}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,Ece(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=t===void 0?cg.reconnectionDelayGrowFactor:t,i=e.minReconnectionDelay,s=i===void 0?cg.minReconnectionDelay:i,l=e.maxReconnectionDelay,o=l===void 0?cg.maxReconnectionDelay:l,p=0;return this._retryCount>0&&(p=s*Math.pow(r,this._retryCount-1),p>o&&(p=o)),this._debug("next delay",p),p},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,r=t.maxRetries,i=r===void 0?cg.maxRetries:r,s=t.connectionTimeout,l=s===void 0?cg.connectionTimeout:s,o=t.WebSocket,p=o===void 0?Ice():o;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!kce(p))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(v){e._closeCalled||(e._debug("connect",{url:v,protocols:e._protocols}),e._ws=e._protocols?new p(v,e._protocols):new p(v),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},l))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new Bce(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new Oce(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n}();function Ci(){var n="/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",e="fa2411bec13fe7a0c74835456fb0c60c3fdde9e5",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/apistore.ts",statementMap:{0:{start:{line:7,column:18},end:{line:7,column:24}},1:{start:{line:10,column:4},end:{line:11,column:7}},2:{start:{line:12,column:17},end:{line:12,column:36}},3:{start:{line:13,column:17},end:{line:13,column:41}},4:{start:{line:14,column:4},end:{line:14,column:45}},5:{start:{line:15,column:4},end:{line:15,column:50}},6:{start:{line:16,column:4},end:{line:16,column:37}},7:{start:{line:19,column:4},end:{line:30,column:7}},8:{start:{line:22,column:6},end:{line:22,column:29}},9:{start:{line:24,column:23},end:{line:24,column:27}},10:{start:{line:25,column:6},end:{line:25,column:39}},11:{start:{line:26,column:6},end:{line:26,column:32}},12:{start:{line:27,column:6},end:{line:27,column:15}},13:{start:{line:29,column:6},end:{line:29,column:52}},14:{start:{line:33,column:23},end:{line:33,column:67}},15:{start:{line:34,column:4},end:{line:45,column:6}},16:{start:{line:35,column:6},end:{line:35,column:26}},17:{start:{line:35,column:19},end:{line:35,column:26}},18:{start:{line:36,column:6},end:{line:36,column:52}},19:{start:{line:37,column:24},end:{line:37,column:40}},20:{start:{line:38,column:6},end:{line:42,column:7}},21:{start:{line:39,column:8},end:{line:39,column:41}},22:{start:{line:41,column:8},end:{line:41,column:27}},23:{start:{line:43,column:27},end:{line:43,column:65}},24:{start:{line:44,column:6},end:{line:44,column:44}},25:{start:{line:48,column:4},end:{line:58,column:5}},26:{start:{line:49,column:6},end:{line:55,column:9}},27:{start:{line:52,column:8},end:{line:52,column:31}},28:{start:{line:54,column:8},end:{line:54,column:44}},29:{start:{line:57,column:6},end:{line:57,column:92}},30:{start:{line:62,column:22},end:{line:66,column:5}},31:{start:{line:67,column:15},end:{line:67,column:26}},32:{start:{line:68,column:4},end:{line:77,column:7}},33:{start:{line:76,column:6},end:{line:76,column:38}},34:{start:{line:76,column:17},end:{line:76,column:38}},35:{start:{line:78,column:4},end:{line:78,column:20}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:20},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:58},end:{line:10,column:59}},loc:{start:{line:10,column:64},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:11},end:{line:31,column:3}},line:18},3:{name:"(anonymous_3)",decl:{start:{line:21,column:12},end:{line:21,column:13}},loc:{start:{line:21,column:26},end:{line:23,column:5}},line:21},4:{name:"(anonymous_4)",decl:{start:{line:23,column:12},end:{line:23,column:13}},loc:{start:{line:23,column:22},end:{line:28,column:5}},line:23},5:{name:"(anonymous_5)",decl:{start:{line:28,column:13},end:{line:28,column:14}},loc:{start:{line:28,column:19},end:{line:30,column:5}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:32,column:2},end:{line:32,column:3}},loc:{start:{line:32,column:23},end:{line:46,column:3}},line:32},7:{name:"(anonymous_7)",decl:{start:{line:34,column:27},end:{line:34,column:28}},loc:{start:{line:34,column:34},end:{line:45,column:5}},line:34},8:{name:"(anonymous_8)",decl:{start:{line:47,column:2},end:{line:47,column:3}},loc:{start:{line:47,column:18},end:{line:59,column:3}},line:47},9:{name:"(anonymous_9)",decl:{start:{line:51,column:14},end:{line:51,column:15}},loc:{start:{line:51,column:33},end:{line:53,column:7}},line:51},10:{name:"(anonymous_10)",decl:{start:{line:53,column:14},end:{line:53,column:15}},loc:{start:{line:53,column:29},end:{line:55,column:7}},line:53},11:{name:"(anonymous_11)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:17},end:{line:79,column:3}},line:61},12:{name:"(anonymous_12)",decl:{start:{line:75,column:13},end:{line:75,column:14}},loc:{start:{line:75,column:29},end:{line:77,column:5}},line:75}},branchMap:{0:{loc:{start:{line:10,column:30},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:30},end:{line:10,column:53}},{start:{line:10,column:58},end:{line:11,column:5}}],line:10},1:{loc:{start:{line:12,column:17},end:{line:12,column:36}},type:"binary-expr",locations:[{start:{line:12,column:17},end:{line:12,column:26}},{start:{line:12,column:30},end:{line:12,column:36}}],line:12},2:{loc:{start:{line:13,column:17},end:{line:13,column:41}},type:"binary-expr",locations:[{start:{line:13,column:17},end:{line:13,column:26}},{start:{line:13,column:30},end:{line:13,column:41}}],line:13},3:{loc:{start:{line:35,column:6},end:{line:35,column:26}},type:"if",locations:[{start:{line:35,column:6},end:{line:35,column:26}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:35},4:{loc:{start:{line:48,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:48,column:4},end:{line:58,column:5}},{start:{line:56,column:11},end:{line:58,column:5}}],line:48},5:{loc:{start:{line:76,column:6},end:{line:76,column:38}},type:"if",locations:[{start:{line:76,column:6},end:{line:76,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:76}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/apistore.ts"],names:[],mappings:"AAAA,OAAO,WAAW;AAClB,SAAQ,cAAa;AAErB,OAAO,2BAA2B;AAQ3B,aAAM,cAAc;AAAA,EAEzB;AAAA,EACA;AAAA,EACA,gBAAoC;AAAA,EACpC;AAAA,EAEA,YAAY,MAA4B;AACtC,SAAK,qBAAqB,KAAK,uBAAuB,MAAM;AAAA,IAAC;AAC7D,UAAM,OAAO,KAAK,QAAQ;AAC1B,UAAM,OAAO,KAAK,QAAQ;AAC1B,SAAK,WAAW,UAAU,IAAI,IAAI,IAAI;AACtC,SAAK,eAAe,QAAQ,IAAI,IAAI,IAAI;AACxC,SAAK,OAAO,KAAK,KAAK,KAAK,IAAI;AAAA,EACjC;AAAA,EAEA,KAAK,IAA8B;AACjC,UAAM,KAAK,WAAW,WAAW;AAAA,MAC/B,MAAM;AAAA,IACR,CAAC,EACE,KAAK,CAAC,aAAc;AACnB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,CAAC,SAAS;AACd,YAAM,WAAW;AACjB,WAAK,gBAAgB,SAAS,CAAC;AAC/B,WAAK,mBAAmB;AACxB,SAAG,IAAI;AAAA,IACT,CAAC,EACA,MAAM,MAAM;AACX,SAAG,IAAI,MAAM,8BAA8B,CAAC;AAAA,IAC9C,CAAC;AAAA,EACL;AAAA,EAEA,qBAAqB;AACnB,UAAM,aAAa,IAAI,sBAAsB,KAAK,YAAY;AAC9D,eAAW,YAAY,OAAK;AAC1B,UAAG,CAAC,EAAE,KAAM;AACZ,cAAQ,IAAI,gCAAgC;AAC5C,UAAI,cAAc,MAAM;AACxB,UAAI;AACF,sBAAc,KAAK,MAAM,EAAE,IAAI;AAAA,MACjC,SAAQ,KAAK;AACX,gBAAQ,MAAM,GAAG;AAAA,MACnB;AACA,YAAM,eAAe,MAAM,oBAAoB,WAAW;AAC1D,WAAK,mBAAmB,YAAY;AAAA,IACtC;AAAA,EACF;AAAA,EAEA,YAAY,IAA8B;AACxC,QAAG,KAAK,eAAe;AACrB,YAAM,KAAK,WAAW,aAAa,KAAK,eAAe;AAAA,QACrD,MAAM;AAAA,MACR,CAAC,EACE,KAAK,SAAS,UAAU;AACvB,eAAO,SAAS,KAAK;AAAA,MACvB,CAAC,EACA,KAAK,SAAS,MAAM;AACnB,WAAG,MAAM,oBAAoB,IAAI,CAAC;AAAA,MACpC,CAAC;AAAA,IACL,OAAO;AACL,YAAM,IAAI,MAAM,oEAAoE;AAAA,IACtF;AAAA,EACF;AAAA;AAAA,EAGA,KAAK,UAA+C;AAClD,UAAM,YAAY;AAAA,MAChB,MAAM;AAAA,QACJ,MAAM,oBAAoB,QAAQ;AAAA,MACpC;AAAA,IACF;AAEA,UAAM,KAAK,SAAS;AACpB,UAAM,KAAK,WAAW,aAAa,IAAI;AAAA,MACrC,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,SAAS;AAAA,QACP,gBAAgB;AAAA,MAClB;AAAA,MACA,MAAM;AAAA,IACR,CAAC,EACE,MAAM,SAAS,OAAO;AACrB,UAAG,MAAO,SAAQ,MAAM,KAAK;AAAA,IAC/B,CAAC;AACH,WAAO;AAAA,EACT;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fa2411bec13fe7a0c74835456fb0c60c3fdde9e5"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Ci=function(){return l},l}Ci();class Pce{constructor(e){Pn(this,"localUrl");Pn(this,"websocketUrl");Pn(this,"latestStyleId",(Ci().s[0]++,void 0));Pn(this,"onLocalStyleChange");Ci().f[0]++,Ci().s[1]++,this.onLocalStyleChange=(Ci().b[0][0]++,e.onLocalStyleChange||(Ci().b[0][1]++,()=>{Ci().f[1]++}));const t=(Ci().s[2]++,Ci().b[1][0]++,e.port||(Ci().b[1][1]++,"8000")),r=(Ci().s[3]++,Ci().b[2][0]++,e.host||(Ci().b[2][1]++,"localhost"));Ci().s[4]++,this.localUrl=`http://${r}:${t}`,Ci().s[5]++,this.websocketUrl=`ws://${r}:${t}/ws`,Ci().s[6]++,this.init=this.init.bind(this)}init(e){Ci().f[2]++,Ci().s[7]++,fetch(this.localUrl+"/styles",{mode:"cors"}).then(t=>(Ci().f[3]++,Ci().s[8]++,t.json())).then(t=>{Ci().f[4]++;const r=(Ci().s[9]++,t);Ci().s[10]++,this.latestStyleId=r[0],Ci().s[11]++,this.notifyLocalChanges(),Ci().s[12]++,e(null)}).catch(()=>{Ci().f[5]++,Ci().s[13]++,e(new Error("Can not connect to style API"))})}notifyLocalChanges(){Ci().f[6]++;const e=(Ci().s[14]++,new Tce(this.websocketUrl));Ci().s[15]++,e.onmessage=t=>{if(Ci().f[7]++,Ci().s[16]++,t.data)Ci().b[3][1]++;else{Ci().b[3][0]++,Ci().s[17]++;return}Ci().s[18]++,console.log("Received style update from API");let r=(Ci().s[19]++,_c.emptyStyle);Ci().s[20]++;try{Ci().s[21]++,r=JSON.parse(t.data)}catch(s){Ci().s[22]++,console.error(s)}const i=(Ci().s[23]++,_c.ensureStyleValidity(r));Ci().s[24]++,this.onLocalStyleChange(i)}}latestStyle(e){if(Ci().f[8]++,Ci().s[25]++,this.latestStyleId)Ci().b[4][0]++,Ci().s[26]++,fetch(this.localUrl+"/styles/"+this.latestStyleId,{mode:"cors"}).then(function(t){return Ci().f[9]++,Ci().s[27]++,t.json()}).then(function(t){Ci().f[10]++,Ci().s[28]++,e(_c.ensureStyleValidity(t))});else throw Ci().b[4][1]++,Ci().s[29]++,new Error("No latest style available. You need to init the api backend first.")}save(e){Ci().f[11]++;const t=(Ci().s[30]++,FF(_c.stripAccessTokens(_c.replaceAccessTokens(e)))),r=(Ci().s[31]++,e.id);return Ci().s[32]++,fetch(this.localUrl+"/styles/"+r,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"},body:t}).catch(function(i){Ci().f[12]++,Ci().s[33]++,i?(Ci().b[5][0]++,Ci().s[34]++,console.error(i)):Ci().b[5][1]++}),Ci().s[35]++,e}}function Bl(){var n="/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",e="9277d165d3b1fd7c235a1faab33cf41596d9966e",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/revisions.ts",statementMap:{0:{start:{line:5,column:4},end:{line:5,column:38}},1:{start:{line:6,column:4},end:{line:6,column:50}},2:{start:{line:9,column:4},end:{line:9,column:53}},3:{start:{line:12,column:4},end:{line:12,column:43}},4:{start:{line:15,column:4},end:{line:15,column:66}},5:{start:{line:16,column:4},end:{line:16,column:34}},6:{start:{line:17,column:4},end:{line:17,column:22}},7:{start:{line:20,column:4},end:{line:22,column:5}},8:{start:{line:21,column:6},end:{line:21,column:24}},9:{start:{line:23,column:4},end:{line:23,column:24}},10:{start:{line:26,column:4},end:{line:28,column:5}},11:{start:{line:27,column:6},end:{line:27,column:24}},12:{start:{line:29,column:4},end:{line:29,column:24}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:37},end:{line:7,column:3}},line:4},1:{name:"(anonymous_1)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:15},end:{line:10,column:3}},line:8},2:{name:"(anonymous_2)",decl:{start:{line:11,column:2},end:{line:11,column:3}},loc:{start:{line:11,column:16},end:{line:13,column:3}},line:11},3:{name:"(anonymous_3)",decl:{start:{line:14,column:2},end:{line:14,column:3}},loc:{start:{line:14,column:24},end:{line:18,column:3}},line:14},4:{name:"(anonymous_4)",decl:{start:{line:19,column:2},end:{line:19,column:3}},loc:{start:{line:19,column:9},end:{line:24,column:3}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:25,column:2},end:{line:25,column:3}},loc:{start:{line:25,column:9},end:{line:30,column:3}},line:25}},branchMap:{0:{loc:{start:{line:4,column:14},end:{line:4,column:35}},type:"default-arg",locations:[{start:{line:4,column:33},end:{line:4,column:35}}],line:4},1:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:20},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/revisions.ts"],names:[],mappings:"AAEO,aAAM,cAAc;AAAA,EACzB;AAAA,EACA;AAAA,EAGA,YAAY,mBAAiB,CAAC,GAAG;AAC/B,SAAK,YAAY;AACjB,SAAK,aAAa,iBAAiB,SAAS;AAAA,EAC9C;AAAA,EAEA,IAAI,SAAS;AACX,WAAO,KAAK,UAAU,KAAK,UAAU,SAAS,CAAC;AAAA,EACjD;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,KAAK,UAAU,KAAK,UAAU;AAAA,EACvC;AAAA,EAEA,YAAY,UAA6C;AAGvD,SAAK,YAAY,KAAK,UAAU,MAAM,GAAG,KAAK,aAAa,CAAC;AAE5D,SAAK,UAAU,KAAK,QAAQ;AAC5B,SAAK;AAAA,EAEP;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,GAAG;AACtB,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,OAAO;AACL,QAAG,KAAK,aAAa,KAAK,UAAU,SAAS,GAAG;AAC9C,WAAK;AAAA,IACP;AACA,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9277d165d3b1fd7c235a1faab33cf41596d9966e"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Bl=function(){return l},l}Bl();class Kce{constructor(e=(Bl().b[0][0]++,[])){Pn(this,"revisions");Pn(this,"currentIdx");Bl().f[0]++,Bl().s[0]++,this.revisions=e,Bl().s[1]++,this.currentIdx=e.length-1}get latest(){return Bl().f[1]++,Bl().s[2]++,this.revisions[this.revisions.length-1]}get current(){return Bl().f[2]++,Bl().s[3]++,this.revisions[this.currentIdx]}addRevision(e){Bl().f[3]++,Bl().s[4]++,this.revisions=this.revisions.slice(0,this.currentIdx+1),Bl().s[5]++,this.revisions.push(e),Bl().s[6]++,this.currentIdx++}undo(){return Bl().f[4]++,Bl().s[7]++,this.currentIdx>0?(Bl().b[1][0]++,Bl().s[8]++,this.currentIdx--):Bl().b[1][1]++,Bl().s[9]++,this.current}redo(){return Bl().f[5]++,Bl().s[10]++,this.currentIdx<this.revisions.length-1?(Bl().b[2][0]++,Bl().s[11]++,this.currentIdx++):Bl().b[2][1]++,Bl().s[12]++,this.current}}var wE,gD;function Rce(){if(gD)return wE;gD=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,p=typeof window=="object"&&window&&window.Object===Object&&window,v=typeof self=="object"&&self&&self.Object===Object&&self,x=p||v||Function("return this")(),B=Object.prototype,T=B.toString,P=Math.max,U=Math.min,j=function(){return x.Date.now()};function N(ne,W,ie){var he,fe,Ee,me,Me,De,xe=0,At=!1,Ze=!1,Xe=!0;if(typeof ne!="function")throw new TypeError(n);W=V(W)||0,H(ie)&&(At=!!ie.leading,Ze="maxWait"in ie,Ee=Ze?P(V(ie.maxWait)||0,W):Ee,Xe="trailing"in ie?!!ie.trailing:Xe);function Ne(Le){var Pe=he,Be=fe;return he=fe=void 0,xe=Le,me=ne.apply(Be,Pe),me}function Se(Le){return xe=Le,Me=setTimeout(_t,W),At?Ne(Le):me}function Re(Le){var Pe=Le-De,Be=Le-xe,it=W-Pe;return Ze?U(it,Ee-Be):it}function He(Le){var Pe=Le-De,Be=Le-xe;return De===void 0||Pe>=W||Pe<0||Ze&&Be>=Ee}function _t(){var Le=j();if(He(Le))return Gt(Le);Me=setTimeout(_t,Re(Le))}function Gt(Le){return Me=void 0,Xe&&he?Ne(Le):(he=fe=void 0,me)}function yt(){Me!==void 0&&clearTimeout(Me),xe=0,he=De=fe=Me=void 0}function Ft(){return Me===void 0?me:Gt(j())}function Tt(){var Le=j(),Pe=He(Le);if(he=arguments,fe=this,De=Le,Pe){if(Me===void 0)return Se(De);if(Ze)return Me=setTimeout(_t,W),Ne(De)}return Me===void 0&&(Me=setTimeout(_t,W)),me}return Tt.cancel=yt,Tt.flush=Ft,Tt}function q(ne,W,ie){var he=!0,fe=!0;if(typeof ne!="function")throw new TypeError(n);return H(ie)&&(he="leading"in ie?!!ie.leading:he,fe="trailing"in ie?!!ie.trailing:fe),N(ne,W,{leading:he,maxWait:W,trailing:fe})}function H(ne){var W=typeof ne;return!!ne&&(W=="object"||W=="function")}function oe(ne){return!!ne&&typeof ne=="object"}function te(ne){return typeof ne=="symbol"||oe(ne)&&T.call(ne)==t}function V(ne){if(typeof ne=="number")return ne;if(te(ne))return e;if(H(ne)){var W=typeof ne.valueOf=="function"?ne.valueOf():ne;ne=H(W)?W+"":W}if(typeof ne!="string")return ne===0?ne:+ne;ne=ne.replace(r,"");var ie=s.test(ne);return ie||l.test(ne)?o(ne.slice(2),ie?2:8):i.test(ne)?e:+ne}return wE=q,wE}var Dce=Rce();const Fce=yl(Dce);var Nv={exports:{}};Nv.exports;var yD;function Lce(){return yD||(yD=1,function(n,e){var t=200,r="__lodash_hash_undefined__",i=1,s=2,l=9007199254740991,o="[object Arguments]",p="[object Array]",v="[object AsyncFunction]",x="[object Boolean]",B="[object Date]",T="[object Error]",P="[object Function]",U="[object GeneratorFunction]",j="[object Map]",N="[object Number]",q="[object Null]",H="[object Object]",oe="[object Promise]",te="[object Proxy]",V="[object RegExp]",ne="[object Set]",W="[object String]",ie="[object Symbol]",he="[object Undefined]",fe="[object WeakMap]",Ee="[object ArrayBuffer]",me="[object DataView]",Me="[object Float32Array]",De="[object Float64Array]",xe="[object Int8Array]",At="[object Int16Array]",Ze="[object Int32Array]",Xe="[object Uint8Array]",Ne="[object Uint8ClampedArray]",Se="[object Uint16Array]",Re="[object Uint32Array]",He=/[\\^$.*+?()[\]{}|]/g,_t=/^\[object .+?Constructor\]$/,Gt=/^(?:0|[1-9]\d*)$/,yt={};yt[Me]=yt[De]=yt[xe]=yt[At]=yt[Ze]=yt[Xe]=yt[Ne]=yt[Se]=yt[Re]=!0,yt[o]=yt[p]=yt[Ee]=yt[x]=yt[me]=yt[B]=yt[T]=yt[P]=yt[j]=yt[N]=yt[H]=yt[V]=yt[ne]=yt[W]=yt[fe]=!1;var Ft=typeof window=="object"&&window&&window.Object===Object&&window,Tt=typeof self=="object"&&self&&self.Object===Object&&self,Le=Ft||Tt||Function("return this")(),Pe=e&&!e.nodeType&&e,Be=Pe&&!0&&n&&!n.nodeType&&n,it=Be&&Be.exports===Pe,Ct=it&&Ft.process,ft=function(){try{return Ct&&Ct.binding&&Ct.binding("util")}catch{}}(),Lt=ft&&ft.isTypedArray;function Zt(ee,Oe){for(var st=-1,$t=ee==null?0:ee.length,Ir=0,Vn=[];++st<$t;){var Zr=ee[st];Oe(Zr,st,ee)&&(Vn[Ir++]=Zr)}return Vn}function Rt(ee,Oe){for(var st=-1,$t=Oe.length,Ir=ee.length;++st<$t;)ee[Ir+st]=Oe[st];return ee}function _n(ee,Oe){for(var st=-1,$t=ee==null?0:ee.length;++st<$t;)if(Oe(ee[st],st,ee))return!0;return!1}function qn(ee,Oe){for(var st=-1,$t=Array(ee);++st<ee;)$t[st]=Oe(st);return $t}function rn(ee){return function(Oe){return ee(Oe)}}function ar(ee,Oe){return ee.has(Oe)}function kn(ee,Oe){return ee==null?void 0:ee[Oe]}function mn(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function($t,Ir){st[++Oe]=[Ir,$t]}),st}function zn(ee,Oe){return function(st){return ee(Oe(st))}}function br(ee){var Oe=-1,st=Array(ee.size);return ee.forEach(function($t){st[++Oe]=$t}),st}var gr=Array.prototype,tr=Function.prototype,Ge=Object.prototype,ce=Le["__core-js_shared__"],pe=tr.toString,rt=Ge.hasOwnProperty,St=function(){var ee=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),Ht=Ge.toString,sn=RegExp("^"+pe.call(rt).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nr=it?Le.Buffer:void 0,$e=Le.Symbol,ae=Le.Uint8Array,Ce=Ge.propertyIsEnumerable,f=gr.splice,je=$e?$e.toStringTag:void 0,qe=Object.getOwnPropertySymbols,Je=nr?nr.isBuffer:void 0,ut=zn(Object.keys,Object),dt=ls(Le,"DataView"),Qt=ls(Le,"Map"),Wt=ls(Le,"Promise"),jt=ls(Le,"Set"),tn=ls(Le,"WeakMap"),Dn=ls(Object,"create"),Fn=Fo(dt),on=Fo(Qt),Sr=Fo(Wt),Hn=Fo(jt),xr=Fo(tn),qr=$e?$e.prototype:void 0,Bn=qr?qr.valueOf:void 0;function $n(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var $t=ee[Oe];this.set($t[0],$t[1])}}function Yn(){this.__data__=Dn?Dn(null):{},this.size=0}function Qr(ee){var Oe=this.has(ee)&&delete this.__data__[ee];return this.size-=Oe?1:0,Oe}function co(ee){var Oe=this.__data__;if(Dn){var st=Oe[ee];return st===r?void 0:st}return rt.call(Oe,ee)?Oe[ee]:void 0}function ma(ee){var Oe=this.__data__;return Dn?Oe[ee]!==void 0:rt.call(Oe,ee)}function Mr(ee,Oe){var st=this.__data__;return this.size+=this.has(ee)?0:1,st[ee]=Dn&&Oe===void 0?r:Oe,this}$n.prototype.clear=Yn,$n.prototype.delete=Qr,$n.prototype.get=co,$n.prototype.has=ma,$n.prototype.set=Mr;function wi(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var $t=ee[Oe];this.set($t[0],$t[1])}}function Zi(){this.__data__=[],this.size=0}function Ts(ee){var Oe=this.__data__,st=lr(Oe,ee);if(st<0)return!1;var $t=Oe.length-1;return st==$t?Oe.pop():f.call(Oe,st,1),--this.size,!0}function xs(ee){var Oe=this.__data__,st=lr(Oe,ee);return st<0?void 0:Oe[st][1]}function aa(ee){return lr(this.__data__,ee)>-1}function ps(ee,Oe){var st=this.__data__,$t=lr(st,ee);return $t<0?(++this.size,st.push([ee,Oe])):st[$t][1]=Oe,this}wi.prototype.clear=Zi,wi.prototype.delete=Ts,wi.prototype.get=xs,wi.prototype.has=aa,wi.prototype.set=ps;function bi(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.clear();++Oe<st;){var $t=ee[Oe];this.set($t[0],$t[1])}}function Il(){this.size=0,this.__data__={hash:new $n,map:new(Qt||wi),string:new $n}}function kl(ee){var Oe=ti(this,ee).delete(ee);return this.size-=Oe?1:0,Oe}function io(ee){return ti(this,ee).get(ee)}function vl(ee){return ti(this,ee).has(ee)}function ol(ee,Oe){var st=ti(this,ee),$t=st.size;return st.set(ee,Oe),this.size+=st.size==$t?0:1,this}bi.prototype.clear=Il,bi.prototype.delete=kl,bi.prototype.get=io,bi.prototype.has=vl,bi.prototype.set=ol;function bo(ee){var Oe=-1,st=ee==null?0:ee.length;for(this.__data__=new bi;++Oe<st;)this.add(ee[Oe])}function Kr(ee){return this.__data__.set(ee,r),this}function Wa(ee){return this.__data__.has(ee)}bo.prototype.add=bo.prototype.push=Kr,bo.prototype.has=Wa;function Vo(ee){var Oe=this.__data__=new wi(ee);this.size=Oe.size}function Gs(){this.__data__=new wi,this.size=0}function Ye(ee){var Oe=this.__data__,st=Oe.delete(ee);return this.size=Oe.size,st}function xt(ee){return this.__data__.get(ee)}function yn(ee){return this.__data__.has(ee)}function Zn(ee,Oe){var st=this.__data__;if(st instanceof wi){var $t=st.__data__;if(!Qt||$t.length<t-1)return $t.push([ee,Oe]),this.size=++st.size,this;st=this.__data__=new bi($t)}return st.set(ee,Oe),this.size=st.size,this}Vo.prototype.clear=Gs,Vo.prototype.delete=Ye,Vo.prototype.get=xt,Vo.prototype.has=yn,Vo.prototype.set=Zn;function dn(ee,Oe){var st=ga(ee),$t=!st&&Mo(ee),Ir=!st&&!$t&&Ga(ee),Vn=!st&&!$t&&!Ir&&jl(ee),Zr=st||$t||Ir||Vn,di=Zr?qn(ee.length,String):[],Br=di.length;for(var Rr in ee)rt.call(ee,Rr)&&!(Zr&&(Rr=="length"||Ir&&(Rr=="offset"||Rr=="parent")||Vn&&(Rr=="buffer"||Rr=="byteLength"||Rr=="byteOffset")||Do(Rr,Br)))&&di.push(Rr);return di}function lr(ee,Oe){for(var st=ee.length;st--;)if(es(ee[st][0],Oe))return st;return-1}function Pi(ee,Oe,st){var $t=Oe(ee);return ga(ee)?$t:Rt($t,st(ee))}function xo(ee){return ee==null?ee===void 0?he:q:je&&je in Object(ee)?ka(ee):No(ee)}function as(ee){return Hr(ee)&&xo(ee)==o}function la(ee,Oe,st,$t,Ir){return ee===Oe?!0:ee==null||Oe==null||!Hr(ee)&&!Hr(Oe)?ee!==ee&&Oe!==Oe:Wu(ee,Oe,st,$t,la,Ir)}function Wu(ee,Oe,st,$t,Ir,Vn){var Zr=ga(ee),di=ga(Oe),Br=Zr?p:ho(ee),Rr=di?p:ho(Oe);Br=Br==o?H:Br,Rr=Rr==o?H:Rr;var Vi=Br==H,Wo=Rr==H,si=Br==Rr;if(si&&Ga(ee)){if(!Ga(Oe))return!1;Zr=!0,Vi=!1}if(si&&!Vi)return Vn||(Vn=new Vo),Zr||jl(ee)?na(ee,Oe,st,$t,Ir,Vn):Ms(ee,Oe,Br,st,$t,Ir,Vn);if(!(st&i)){var zr=Vi&&rt.call(ee,"__wrapped__"),Ui=Wo&&rt.call(Oe,"__wrapped__");if(zr||Ui){var Gi=zr?ee.value():ee,$o=Ui?Oe.value():Oe;return Vn||(Vn=new Vo),Ir(Gi,$o,st,$t,Vn)}}return si?(Vn||(Vn=new Vo),Mu(ee,Oe,st,$t,Ir,Vn)):!1}function ei(ee){if(!Hi(ee)||Qs(ee))return!1;var Oe=ao(ee)?sn:_t;return Oe.test(Fo(ee))}function ki(ee){return Hr(ee)&&sl(ee.length)&&!!yt[xo(ee)]}function zl(ee){if(!ra(ee))return ut(ee);var Oe=[];for(var st in Object(ee))rt.call(ee,st)&&st!="constructor"&&Oe.push(st);return Oe}function na(ee,Oe,st,$t,Ir,Vn){var Zr=st&i,di=ee.length,Br=Oe.length;if(di!=Br&&!(Zr&&Br>di))return!1;var Rr=Vn.get(ee);if(Rr&&Vn.get(Oe))return Rr==Oe;var Vi=-1,Wo=!0,si=st&s?new bo:void 0;for(Vn.set(ee,Oe),Vn.set(Oe,ee);++Vi<di;){var zr=ee[Vi],Ui=Oe[Vi];if($t)var Gi=Zr?$t(Ui,zr,Vi,Oe,ee,Vn):$t(zr,Ui,Vi,ee,Oe,Vn);if(Gi!==void 0){if(Gi)continue;Wo=!1;break}if(si){if(!_n(Oe,function($o,ua){if(!ar(si,ua)&&(zr===$o||Ir(zr,$o,st,$t,Vn)))return si.push(ua)})){Wo=!1;break}}else if(!(zr===Ui||Ir(zr,Ui,st,$t,Vn))){Wo=!1;break}}return Vn.delete(ee),Vn.delete(Oe),Wo}function Ms(ee,Oe,st,$t,Ir,Vn,Zr){switch(st){case me:if(ee.byteLength!=Oe.byteLength||ee.byteOffset!=Oe.byteOffset)return!1;ee=ee.buffer,Oe=Oe.buffer;case Ee:return!(ee.byteLength!=Oe.byteLength||!Vn(new ae(ee),new ae(Oe)));case x:case B:case N:return es(+ee,+Oe);case T:return ee.name==Oe.name&&ee.message==Oe.message;case V:case W:return ee==Oe+"";case j:var di=mn;case ne:var Br=$t&i;if(di||(di=br),ee.size!=Oe.size&&!Br)return!1;var Rr=Zr.get(ee);if(Rr)return Rr==Oe;$t|=s,Zr.set(ee,Oe);var Vi=na(di(ee),di(Oe),$t,Ir,Vn,Zr);return Zr.delete(ee),Vi;case ie:if(Bn)return Bn.call(ee)==Bn.call(Oe)}return!1}function Mu(ee,Oe,st,$t,Ir,Vn){var Zr=st&i,di=Si(ee),Br=di.length,Rr=Si(Oe),Vi=Rr.length;if(Br!=Vi&&!Zr)return!1;for(var Wo=Br;Wo--;){var si=di[Wo];if(!(Zr?si in Oe:rt.call(Oe,si)))return!1}var zr=Vn.get(ee);if(zr&&Vn.get(Oe))return zr==Oe;var Ui=!0;Vn.set(ee,Oe),Vn.set(Oe,ee);for(var Gi=Zr;++Wo<Br;){si=di[Wo];var $o=ee[si],ua=Oe[si];if($t)var Ys=Zr?$t(ua,$o,si,Oe,ee,Vn):$t($o,ua,si,ee,Oe,Vn);if(!(Ys===void 0?$o===ua||Ir($o,ua,st,$t,Vn):Ys)){Ui=!1;break}Gi||(Gi=si=="constructor")}if(Ui&&!Gi){var wu=ee.constructor,qs=Oe.constructor;wu!=qs&&"constructor"in ee&&"constructor"in Oe&&!(typeof wu=="function"&&wu instanceof wu&&typeof qs=="function"&&qs instanceof qs)&&(Ui=!1)}return Vn.delete(ee),Vn.delete(Oe),Ui}function Si(ee){return Pi(ee,Wi,Us)}function ti(ee,Oe){var st=ee.__data__;return Gu(Oe)?st[typeof Oe=="string"?"string":"hash"]:st.map}function ls(ee,Oe){var st=kn(ee,Oe);return ei(st)?st:void 0}function ka(ee){var Oe=rt.call(ee,je),st=ee[je];try{ee[je]=void 0;var $t=!0}catch{}var Ir=Ht.call(ee);return $t&&(Oe?ee[je]=st:delete ee[je]),Ir}var Us=qe?function(ee){return ee==null?[]:(ee=Object(ee),Zt(qe(ee),function(Oe){return Ce.call(ee,Oe)}))}:oo,ho=xo;(dt&&ho(new dt(new ArrayBuffer(1)))!=me||Qt&&ho(new Qt)!=j||Wt&&ho(Wt.resolve())!=oe||jt&&ho(new jt)!=ne||tn&&ho(new tn)!=fe)&&(ho=function(ee){var Oe=xo(ee),st=Oe==H?ee.constructor:void 0,$t=st?Fo(st):"";if($t)switch($t){case Fn:return me;case on:return j;case Sr:return oe;case Hn:return ne;case xr:return fe}return Oe});function Do(ee,Oe){return Oe=Oe??l,!!Oe&&(typeof ee=="number"||Gt.test(ee))&&ee>-1&&ee%1==0&&ee<Oe}function Gu(ee){var Oe=typeof ee;return Oe=="string"||Oe=="number"||Oe=="symbol"||Oe=="boolean"?ee!=="__proto__":ee===null}function Qs(ee){return!!St&&St in ee}function ra(ee){var Oe=ee&&ee.constructor,st=typeof Oe=="function"&&Oe.prototype||Ge;return ee===st}function No(ee){return Ht.call(ee)}function Fo(ee){if(ee!=null){try{return pe.call(ee)}catch{}try{return ee+""}catch{}}return""}function es(ee,Oe){return ee===Oe||ee!==ee&&Oe!==Oe}var Mo=as(function(){return arguments}())?as:function(ee){return Hr(ee)&&rt.call(ee,"callee")&&!Ce.call(ee,"callee")},ga=Array.isArray;function zs(ee){return ee!=null&&sl(ee.length)&&!ao(ee)}var Ga=Je||Ki;function Ta(ee,Oe){return la(ee,Oe)}function ao(ee){if(!Hi(ee))return!1;var Oe=xo(ee);return Oe==P||Oe==U||Oe==v||Oe==te}function sl(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=l}function Hi(ee){var Oe=typeof ee;return ee!=null&&(Oe=="object"||Oe=="function")}function Hr(ee){return ee!=null&&typeof ee=="object"}var jl=Lt?rn(Lt):ki;function Wi(ee){return zs(ee)?dn(ee):zl(ee)}function oo(){return[]}function Ki(){return!1}n.exports=Ta}(Nv,Nv.exports)),Nv.exports}var Uce=Lce();const z6=yl(Uce);function Fi(){var n="/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",e="77d2098743f5a64765174c6e14fc4dc25f900f6c",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts",statementMap:{0:{start:{line:10,column:4},end:{line:11,column:7}},1:{start:{line:12,column:4},end:{line:13,column:7}},2:{start:{line:14,column:4},end:{line:14,column:23}},3:{start:{line:15,column:4},end:{line:15,column:28}},4:{start:{line:16,column:4},end:{line:16,column:90}},5:{start:{line:19,column:28},end:{line:19,column:48}},6:{start:{line:20,column:4},end:{line:22,column:7}},7:{start:{line:21,column:6},end:{line:21,column:88}},8:{start:{line:23,column:4},end:{line:25,column:5}},9:{start:{line:24,column:6},end:{line:24,column:42}},10:{start:{line:26,column:4},end:{line:26,column:48}},11:{start:{line:29,column:33},end:{line:29,column:58}},12:{start:{line:30,column:4},end:{line:43,column:7}},13:{start:{line:31,column:6},end:{line:42,column:9}},14:{start:{line:32,column:32},end:{line:32,column:71}},15:{start:{line:33,column:23},end:{line:33,column:53}},16:{start:{line:34,column:8},end:{line:40,column:11}},17:{start:{line:35,column:10},end:{line:39,column:13}},18:{start:{line:36,column:40},end:{line:36,column:75}},19:{start:{line:37,column:12},end:{line:37,column:71}},20:{start:{line:38,column:12},end:{line:38,column:64}},21:{start:{line:41,column:8},end:{line:41,column:60}},22:{start:{line:44,column:4},end:{line:46,column:5}},23:{start:{line:45,column:6},end:{line:45,column:52}},24:{start:{line:50,column:4},end:{line:50,column:25}},25:{start:{line:53,column:4},end:{line:53,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:25},end:{line:17,column:3}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:10,column:52},end:{line:10,column:53}},loc:{start:{line:10,column:58},end:{line:11,column:5}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:12,column:62},end:{line:12,column:63}},loc:{start:{line:12,column:68},end:{line:13,column:5}},line:12},3:{name:"(anonymous_3)",decl:{start:{line:18,column:2},end:{line:18,column:3}},loc:{start:{line:18,column:18},end:{line:27,column:3}},line:18},4:{name:"(anonymous_4)",decl:{start:{line:20,column:48},end:{line:20,column:49}},loc:{start:{line:20,column:62},end:{line:22,column:5}},line:20},5:{name:"(anonymous_5)",decl:{start:{line:28,column:2},end:{line:28,column:3}},loc:{start:{line:28,column:32},end:{line:47,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:30,column:39},end:{line:30,column:40}},loc:{start:{line:30,column:53},end:{line:43,column:5}},line:30},7:{name:"(anonymous_7)",decl:{start:{line:31,column:46},end:{line:31,column:47}},loc:{start:{line:31,column:65},end:{line:42,column:7}},line:31},8:{name:"(anonymous_8)",decl:{start:{line:34,column:58},end:{line:34,column:59}},loc:{start:{line:34,column:71},end:{line:40,column:9}},line:34},9:{name:"(anonymous_9)",decl:{start:{line:35,column:50},end:{line:35,column:51}},loc:{start:{line:35,column:68},end:{line:39,column:11}},line:35},10:{name:"(anonymous_10)",decl:{start:{line:49,column:2},end:{line:49,column:3}},loc:{start:{line:49,column:16},end:{line:51,column:3}},line:49},11:{name:"(anonymous_11)",decl:{start:{line:52,column:2},end:{line:52,column:3}},loc:{start:{line:52,column:21},end:{line:54,column:3}},line:52}},branchMap:{0:{loc:{start:{line:9,column:14},end:{line:9,column:23}},type:"default-arg",locations:[{start:{line:9,column:21},end:{line:9,column:23}}],line:9},1:{loc:{start:{line:10,column:27},end:{line:11,column:6}},type:"binary-expr",locations:[{start:{line:10,column:27},end:{line:10,column:47}},{start:{line:10,column:52},end:{line:11,column:5}}],line:10},2:{loc:{start:{line:12,column:32},end:{line:13,column:6}},type:"binary-expr",locations:[{start:{line:12,column:32},end:{line:12,column:57}},{start:{line:12,column:62},end:{line:13,column:5}}],line:12},3:{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:23},4:{loc:{start:{line:31,column:7},end:{line:31,column:36}},type:"binary-expr",locations:[{start:{line:31,column:7},end:{line:31,column:30}},{start:{line:31,column:34},end:{line:31,column:36}}],line:31},5:{loc:{start:{line:32,column:32},end:{line:32,column:71}},type:"binary-expr",locations:[{start:{line:32,column:32},end:{line:32,column:65}},{start:{line:32,column:69},end:{line:32,column:71}}],line:32},6:{loc:{start:{line:36,column:40},end:{line:36,column:75}},type:"binary-expr",locations:[{start:{line:36,column:40},end:{line:36,column:69}},{start:{line:36,column:73},end:{line:36,column:75}}],line:36},7:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/layerwatcher.ts"],names:[],mappings:"AAAA,OAAO,cAAc;AACrB,OAAO,aAAa;AAUpB,qBAAqB,aAAa;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAA4B,CAAC,GAAG;AAC1C,SAAK,kBAAkB,KAAK,oBAAoB,MAAM;AAAA,IAAC;AACvD,SAAK,uBAAuB,KAAK,yBAAyB,MAAM;AAAA,IAAC;AAEjE,SAAK,WAAW,CAAC;AACjB,SAAK,gBAAgB,CAAC;AAKtB,SAAK,oCAAoC,SAAS,KAAK,0BAA0B,GAAI;AAAA,EACvF;AAAA,EAEA,WAAW,KAAU;AACnB,UAAM,kBAAkB,EAAE,GAAG,KAAK,SAAS;AAE3C,WAAO,KAAK,IAAI,MAAM,YAAY,EAAE,QAAQ,cAAY;AAGtD,WAAK,SAAS,QAAQ,IAAI,IAAI,MAAM,aAAa,QAAQ,EAAE,QAAQ;AAAA,IACrE,CAAC;AAED,QAAG,CAAC,QAAQ,iBAAiB,KAAK,QAAQ,GAAG;AAC3C,WAAK,gBAAgB,KAAK,QAAQ;AAAA,IACpC;AAEA,SAAK,kCAAkC,GAAG;AAAA,EAC5C;AAAA,EAEA,yBAAyB,KAAU;AACjC,UAAM,uBAAuB,EAAE,GAAG,KAAK,cAAc;AAErD,WAAO,KAAK,KAAK,QAAQ,EAAE,QAAQ,cAAY;AAC7C,OAAC,KAAK,SAAS,QAAQ,KAAK,CAAC,GAAG,QAAQ,mBAAiB;AACvD,cAAM,kBAAkB,KAAK,cAAc,aAAa,KAAK,CAAC;AAC9D,cAAM,SAAS,EAAE,aAAa,cAAc;AAC5C,YAAI,oBAAoB,UAAU,MAAa,EAAE,QAAQ,aAAW;AAClE,iBAAO,KAAK,QAAQ,UAAU,EAAE,QAAQ,kBAAgB;AACtD,kBAAM,sBAAsB,gBAAgB,YAAY,KAAK,CAAC;AAC9D,gCAAoB,QAAQ,WAAW,YAAY,CAAC,IAAI,CAAC;AACzD,4BAAgB,YAAY,IAAI;AAAA,UAClC,CAAC;AAAA,QACH,CAAC;AAED,aAAK,cAAc,aAAa,IAAI;AAAA,MACtC,CAAC;AAAA,IACH,CAAC;AAED,QAAG,CAAC,QAAQ,sBAAsB,KAAK,aAAa,GAAG;AACrD,WAAK,qBAAqB,KAAK,aAAa;AAAA,IAC9C;AAAA,EAEF;AAAA;AAAA,EAGA,IAAI,UAAU;AACZ,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,eAAe;AACjB,WAAO,KAAK;AAAA,EACd;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"77d2098743f5a64765174c6e14fc4dc25f900f6c"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return Fi=function(){return l},l}Fi();class zce{constructor(e=(Fi().b[0][0]++,{})){Pn(this,"onSourcesChange");Pn(this,"onVectorLayersChange");Pn(this,"throttledAnalyzeVectorLayerFields");Pn(this,"_sources");Pn(this,"_vectorLayers");Fi().f[0]++,Fi().s[0]++,this.onSourcesChange=(Fi().b[1][0]++,e.onSourcesChange||(Fi().b[1][1]++,()=>{Fi().f[1]++})),Fi().s[1]++,this.onVectorLayersChange=(Fi().b[2][0]++,e.onVectorLayersChange||(Fi().b[2][1]++,()=>{Fi().f[2]++})),Fi().s[2]++,this._sources={},Fi().s[3]++,this._vectorLayers={},Fi().s[4]++,this.throttledAnalyzeVectorLayerFields=Fce(this.analyzeVectorLayerFields,5e3)}analyzeMap(e){Fi().f[3]++;const t=(Fi().s[5]++,{...this._sources});Fi().s[6]++,Object.keys(e.style.sourceCaches).forEach(r=>{Fi().f[4]++,Fi().s[7]++,this._sources[r]=e.style.sourceCaches[r]._source.vectorLayerIds}),Fi().s[8]++,z6(t,this._sources)?Fi().b[3][1]++:(Fi().b[3][0]++,Fi().s[9]++,this.onSourcesChange(this._sources)),Fi().s[10]++,this.throttledAnalyzeVectorLayerFields(e)}analyzeVectorLayerFields(e){Fi().f[5]++;const t=(Fi().s[11]++,{...this._vectorLayers});Fi().s[12]++,Object.keys(this._sources).forEach(r=>{Fi().f[6]++,Fi().s[13]++,(Fi().b[4][0]++,this._sources[r]||(Fi().b[4][1]++,[])).forEach(i=>{Fi().f[7]++;const s=(Fi().s[14]++,Fi().b[5][0]++,this._vectorLayers[i]||(Fi().b[5][1]++,{})),l=(Fi().s[15]++,{sourceLayer:i});Fi().s[16]++,e.querySourceFeatures(r,l).forEach(o=>{Fi().f[8]++,Fi().s[17]++,Object.keys(o.properties).forEach(p=>{Fi().f[9]++;const v=(Fi().s[18]++,Fi().b[6][0]++,s[p]||(Fi().b[6][1]++,{}));Fi().s[19]++,v[o.properties[p]]={},Fi().s[20]++,s[p]=v})}),Fi().s[21]++,this._vectorLayers[i]=s})}),Fi().s[22]++,z6(t,this._vectorLayers)?Fi().b[7][1]++:(Fi().b[7][0]++,Fi().s[23]++,this.onVectorLayersChange(this._vectorLayers))}get sources(){return Fi().f[10]++,Fi().s[24]++,this._sources}get vectorLayers(){return Fi().f[11]++,Fi().s[25]++,this._vectorLayers}}function ta(){var n="/home/runner/work/maputnik/maputnik/src/libs/debug.ts",e="f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/libs/debug.ts",statementMap:{0:{start:{line:1,column:19},end:{line:1,column:21}},1:{start:{line:3,column:13},end:{line:3,column:55}},2:{start:{line:4,column:18},end:{line:4,column:33}},3:{start:{line:5,column:2},end:{line:9,column:3}},4:{start:{line:6,column:4},end:{line:6,column:42}},5:{start:{line:8,column:4},end:{line:8,column:17}},6:{start:{line:12,column:2},end:{line:12,column:91}},7:{start:{line:15,column:2},end:{line:17,column:3}},8:{start:{line:16,column:4},end:{line:16,column:19}},9:{start:{line:18,column:2},end:{line:18,column:54}},10:{start:{line:19,column:2},end:{line:19,column:37}},11:{start:{line:22,column:2},end:{line:24,column:3}},12:{start:{line:23,column:4},end:{line:23,column:19}},13:{start:{line:25,column:2},end:{line:27,column:3}},14:{start:{line:26,column:4},end:{line:26,column:38}},15:{start:{line:29,column:12},end:{line:33,column:1}},16:{start:{line:34,column:0},end:{line:34,column:19}}},fnMap:{0:{name:"enabled",decl:{start:{line:2,column:9},end:{line:2,column:16}},loc:{start:{line:2,column:19},end:{line:10,column:1}},line:2},1:{name:"genErr",decl:{start:{line:11,column:9},end:{line:11,column:15}},loc:{start:{line:11,column:18},end:{line:13,column:1}},line:11},2:{name:"set",decl:{start:{line:14,column:9},end:{line:14,column:12}},loc:{start:{line:14,column:36},end:{line:20,column:1}},line:14},3:{name:"get",decl:{start:{line:21,column:9},end:{line:21,column:12}},loc:{start:{line:21,column:29},end:{line:28,column:1}},line:21}},branchMap:{0:{loc:{start:{line:5,column:2},end:{line:9,column:3}},type:"if",locations:[{start:{line:5,column:2},end:{line:9,column:3}},{start:{line:7,column:9},end:{line:9,column:3}}],line:5},1:{loc:{start:{line:15,column:2},end:{line:17,column:3}},type:"if",locations:[{start:{line:15,column:2},end:{line:17,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:15},2:{loc:{start:{line:18,column:26},end:{line:18,column:53}},type:"binary-expr",locations:[{start:{line:18,column:26},end:{line:18,column:47}},{start:{line:18,column:51},end:{line:18,column:53}}],line:18},3:{loc:{start:{line:22,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:22,column:2},end:{line:24,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},4:{loc:{start:{line:25,column:2},end:{line:27,column:3}},type:"if",locations:[{start:{line:25,column:2},end:{line:27,column:3}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/libs/debug.ts"],names:[],mappings:"AAMA,MAAM,aAAyB,CAAC;AAEhC,SAAS,UAAU;AACjB,QAAM,KAAK,IAAI,IAAI,OAAO,SAAS,IAAI,EAAE;AACzC,QAAM,UAAU,GAAG,IAAI,OAAO;AAC9B,MAAG,SAAS;AACV,WAAO,CAAC,CAAC,QAAQ,MAAM,aAAa;AAAA,EACtC,OACK;AACH,WAAO;AAAA,EACT;AACF;AAEA,SAAS,SAAS;AAChB,SAAO,IAAI,MAAM,sEAAsE;AACzF;AAEA,SAAS,IAAI,WAA6B,KAAa,OAAY;AACjE,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,aAAW,SAAS,IAAI,WAAW,SAAS,KAAK,CAAC;AAClD,aAAW,SAAS,EAAE,GAAG,IAAI;AAC/B;AAEA,SAAS,IAAI,WAA6B,KAAa;AACrD,MAAG,CAAC,QAAQ,GAAG;AACb,UAAM,OAAO;AAAA,EACf;AACA,MAAG,OAAO,UAAU,eAAe,KAAK,YAAY,SAAS,GAAG;AAC9D,WAAO,WAAW,SAAS,EAAE,GAAG;AAAA,EAClC;AACF;AAEA,MAAM,MAAM;AAAA,EACV;AAAA,EACA;AAAA,EACA;AACF;AAEC,OAAe,QAAQ;AACxB,eAAe;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f3fc52390a8e0125df8ac2b3d3c29ba103bd1c39"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return ta=function(){return l},l}ta();const nC=(ta().s[0]++,{});function t8(){ta().f[0]++;const n=(ta().s[1]++,new URL(window.location.href).searchParams),e=(ta().s[2]++,n.get("debug"));return ta().s[3]++,e?(ta().b[0][0]++,ta().s[4]++,!!e.match(/^(|1|true)$/)):(ta().b[0][1]++,ta().s[5]++,!1)}function sN(){return ta().f[1]++,ta().s[6]++,new Error("Debug not enabled, enable by appending '?debug' to your query string")}function jce(n,e,t){if(ta().f[2]++,ta().s[7]++,t8())ta().b[1][1]++;else throw ta().b[1][0]++,ta().s[8]++,sN();ta().s[9]++,nC[n]=(ta().b[2][0]++,nC[n]||(ta().b[2][1]++,{})),ta().s[10]++,nC[n][e]=t}function Nce(n,e){if(ta().f[3]++,ta().s[11]++,t8())ta().b[3][1]++;else throw ta().b[3][0]++,ta().s[12]++,sN();if(ta().s[13]++,Object.prototype.hasOwnProperty.call(nC,n))return ta().b[4][0]++,ta().s[14]++,nC[n][e];ta().b[4][1]++}const fg=(ta().s[15]++,{enabled:t8,get:Nce,set:jce});ta().s[16]++;window.debug=fg;function we(){var n="/home/runner/work/maputnik/maputnik/src/components/App.tsx",e="bafcb93873c2a71cab2bdafeb2ce6a3195766cd8",t=globalThis,r="__coverage__",i={path:"/home/runner/work/maputnik/maputnik/src/components/App.tsx",statementMap:{0:{start:{line:37,column:0},end:{line:37,column:30}},1:{start:{line:39,column:29},end:{line:39,column:60}},2:{start:{line:40,column:26},end:{line:40,column:54}},3:{start:{line:41,column:31},end:{line:41,column:64}},4:{start:{line:42,column:2},end:{line:54,column:3}},5:{start:{line:43,column:24},end:{line:43,column:95}},6:{start:{line:44,column:4},end:{line:46,column:5}},7:{start:{line:45,column:6},end:{line:45,column:47}},8:{start:{line:47,column:9},end:{line:54,column:3}},9:{start:{line:48,column:24},end:{line:48,column:96}},10:{start:{line:49,column:4},end:{line:51,column:5}},11:{start:{line:50,column:6},end:{line:50,column:47}},12:{start:{line:53,column:4},end:{line:53,column:15}},13:{start:{line:57,column:2},end:{line:66,column:4}},14:{start:{line:73,column:4},end:{line:73,column:17}},15:{start:{line:74,column:4},end:{line:74,column:19}},16:{start:{line:75,column:4},end:{line:75,column:45}},17:{start:{line:76,column:19},end:{line:76,column:75}},18:{start:{line:77,column:15},end:{line:77,column:38}},19:{start:{line:78,column:4},end:{line:80,column:5}},20:{start:{line:79,column:6},end:{line:79,column:34}},21:{start:{line:81,column:4},end:{line:85,column:7}},22:{start:{line:82,column:40},end:{line:82,column:86}},23:{start:{line:86,column:22},end:{line:137,column:5}},24:{start:{line:90,column:10},end:{line:90,column:40}},25:{start:{line:96,column:10},end:{line:96,column:35}},26:{start:{line:102,column:10},end:{line:102,column:37}},27:{start:{line:108,column:10},end:{line:108,column:38}},28:{start:{line:114,column:10},end:{line:114,column:39}},29:{start:{line:120,column:10},end:{line:122,column:12}},30:{start:{line:128,column:10},end:{line:128,column:63}},31:{start:{line:134,column:10},end:{line:134,column:36}},32:{start:{line:138,column:4},end:{line:151,column:7}},33:{start:{line:139,column:6},end:{line:150,column:7}},34:{start:{line:140,column:8},end:{line:140,column:24}},35:{start:{line:141,column:8},end:{line:141,column:30}},36:{start:{line:142,column:13},end:{line:150,column:7}},37:{start:{line:143,column:25},end:{line:145,column:10}},38:{start:{line:144,column:10},end:{line:144,column:41}},39:{start:{line:146,column:8},end:{line:149,column:9}},40:{start:{line:147,column:10},end:{line:147,column:44}},41:{start:{line:148,column:10},end:{line:148,column:29}},42:{start:{line:152,column:21},end:{line:152,column:38}},43:{start:{line:153,column:4},end:{line:172,column:5}},44:{start:{line:154,column:6},end:{line:154,column:41}},45:{start:{line:155,column:6},end:{line:155,column:74}},46:{start:{line:155,column:43},end:{line:155,column:72}},47:{start:{line:156,column:6},end:{line:156,column:31}},48:{start:{line:158,column:6},end:{line:160,column:7}},49:{start:{line:159,column:8},end:{line:159,column:33}},50:{start:{line:161,column:6},end:{line:171,column:9}},51:{start:{line:162,column:8},end:{line:165,column:9}},52:{start:{line:163,column:10},end:{line:163,column:74}},53:{start:{line:164,column:10},end:{line:164,column:45}},54:{start:{line:166,column:8},end:{line:166,column:104}},55:{start:{line:166,column:50},end:{line:166,column:102}},56:{start:{line:167,column:8},end:{line:170,column:9}},57:{start:{line:168,column:10},end:{line:168,column:63}},58:{start:{line:169,column:10},end:{line:169,column:69}},59:{start:{line:173,column:4},end:{line:176,column:5}},60:{start:{line:174,column:6},end:{line:174,column:65}},61:{start:{line:175,column:6},end:{line:175,column:59}},62:{start:{line:177,column:4},end:{line:211,column:6}},63:{start:{line:212,column:4},end:{line:214,column:7}},64:{start:{line:213,column:35},end:{line:213,column:69}},65:{start:{line:216,column:19},end:{line:234,column:3}},66:{start:{line:217,column:4},end:{line:233,column:5}},67:{start:{line:218,column:6},end:{line:224,column:7}},68:{start:{line:219,column:8},end:{line:219,column:27}},69:{start:{line:220,column:8},end:{line:220,column:22}},70:{start:{line:221,column:13},end:{line:224,column:7}},71:{start:{line:222,column:8},end:{line:222,column:27}},72:{start:{line:223,column:8},end:{line:223,column:22}},73:{start:{line:226,column:6},end:{line:232,column:7}},74:{start:{line:227,column:8},end:{line:227,column:27}},75:{start:{line:228,column:8},end:{line:228,column:22}},76:{start:{line:229,column:13},end:{line:232,column:7}},77:{start:{line:230,column:8},end:{line:230,column:27}},78:{start:{line:231,column:8},end:{line:231,column:22}},79:{start:{line:236,column:4},end:{line:236,column:60}},80:{start:{line:239,column:4},end:{line:239,column:63}},81:{start:{line:242,column:4},end:{line:242,column:40}},82:{start:{line:245,column:21},end:{line:245,column:55}},83:{start:{line:246,column:24},end:{line:246,column:93}},84:{start:{line:247,column:21},end:{line:247,column:110}},85:{start:{line:248,column:4},end:{line:250,column:7}},86:{start:{line:249,column:6},end:{line:249,column:80}},87:{start:{line:253,column:4},end:{line:255,column:7}},88:{start:{line:254,column:6},end:{line:254,column:80}},89:{start:{line:257,column:29},end:{line:271,column:3}},90:{start:{line:258,column:4},end:{line:262,column:5}},91:{start:{line:259,column:6},end:{line:261,column:9}},92:{start:{line:263,column:25},end:{line:269,column:5}},93:{start:{line:270,column:4},end:{line:270,column:38}},94:{start:{line:272,column:19},end:{line:395,column:3}},95:{start:{line:273,column:4},end:{line:278,column:6}},96:{start:{line:279,column:4},end:{line:281,column:5}},97:{start:{line:280,column:6},end:{line:280,column:71}},98:{start:{line:282,column:4},end:{line:284,column:5}},99:{start:{line:283,column:6},end:{line:283,column:71}},100:{start:{line:285,column:4},end:{line:289,column:5}},101:{start:{line:286,column:6},end:{line:288,column:7}},102:{start:{line:287,column:8},end:{line:287,column:63}},103:{start:{line:290,column:4},end:{line:292,column:5}},104:{start:{line:291,column:6},end:{line:291,column:44}},105:{start:{line:293,column:19},end:{line:293,column:51}},106:{start:{line:294,column:24},end:{line:294,column:26}},107:{start:{line:295,column:4},end:{line:306,column:5}},108:{start:{line:296,column:26},end:{line:296,column:42}},109:{start:{line:297,column:6},end:{line:305,column:9}},110:{start:{line:298,column:8},end:{line:303,column:9}},111:{start:{line:299,column:24},end:{line:301,column:11}},112:{start:{line:302,column:10},end:{line:302,column:34}},113:{start:{line:304,column:8},end:{line:304,column:40}},114:{start:{line:307,column:25},end:{line:358,column:6}},115:{start:{line:308,column:23},end:{line:308,column:109}},116:{start:{line:309,column:6},end:{line:322,column:7}},117:{start:{line:310,column:35},end:{line:310,column:43}},118:{start:{line:311,column:8},end:{line:321,column:10}},119:{start:{line:323,column:33},end:{line:323,column:100}},120:{start:{line:324,column:6},end:{line:337,column:7}},121:{start:{line:325,column:35},end:{line:325,column:53}},122:{start:{line:326,column:8},end:{line:336,column:10}},123:{start:{line:338,column:25},end:{line:338,column:88}},124:{start:{line:339,column:6},end:{line:357,column:7}},125:{start:{line:340,column:52},end:{line:340,column:62}},126:{start:{line:341,column:20},end:{line:341,column:78}},127:{start:{line:342,column:8},end:{line:352,column:10}},128:{start:{line:354,column:8},end:{line:356,column:10}},129:{start:{line:359,column:24},end:{line:359,column:30}},130:{start:{line:360,column:4},end:{line:374,column:5}},131:{start:{line:361,column:6},end:{line:361,column:42}},132:{start:{line:362,column:6},end:{line:373,column:9}},133:{start:{line:363,column:28},end:{line:363,column:33}},134:{start:{line:364,column:8},end:{line:372,column:9}},135:{start:{line:365,column:10},end:{line:371,column:11}},136:{start:{line:366,column:28},end:{line:366,column:49}},137:{start:{line:367,column:30},end:{line:367,column:69}},138:{start:{line:368,column:12},end:{line:368,column:44}},139:{start:{line:370,column:12},end:{line:370,column:30}},140:{start:{line:375,column:4},end:{line:377,column:5}},141:{start:{line:376,column:6},end:{line:376,column:40}},142:{start:{line:378,column:4},end:{line:380,column:5}},143:{start:{line:379,column:6},end:{line:379,column:40}},144:{start:{line:381,column:4},end:{line:383,column:5}},145:{start:{line:382,column:6},end:{line:382,column:47}},146:{start:{line:384,column:4},end:{line:386,column:5}},147:{start:{line:385,column:6},end:{line:385,column:31}},148:{start:{line:387,column:4},end:{line:394,column:7}},149:{start:{line:392,column:6},end:{line:392,column:26}},150:{start:{line:393,column:6},end:{line:393,column:27}},151:{start:{line:396,column:11},end:{line:403,column:3}},152:{start:{line:397,column:24},end:{line:397,column:49}},153:{start:{line:398,column:21},end:{line:398,column:67}},154:{start:{line:399,column:4},end:{line:399,column:61}},155:{start:{line:400,column:4},end:{line:402,column:7}},156:{start:{line:404,column:11},end:{line:411,column:3}},157:{start:{line:405,column:24},end:{line:405,column:49}},158:{start:{line:406,column:21},end:{line:406,column:67}},159:{start:{line:407,column:4},end:{line:407,column:61}},160:{start:{line:408,column:4},end:{line:410,column:7}},161:{start:{line:412,column:16},end:{line:426,column:3}},162:{start:{line:413,column:33},end:{line:413,column:37}},163:{start:{line:414,column:17},end:{line:414,column:43}},164:{start:{line:415,column:4},end:{line:415,column:53}},165:{start:{line:416,column:4},end:{line:416,column:53}},166:{start:{line:417,column:4},end:{line:417,column:38}},167:{start:{line:417,column:31},end:{line:417,column:38}},168:{start:{line:418,column:4},end:{line:422,column:5}},169:{start:{line:419,column:6},end:{line:421,column:9}},170:{start:{line:423,column:4},end:{line:423,column:29}},171:{start:{line:424,column:4},end:{line:424,column:49}},172:{start:{line:425,column:4},end:{line:425,column:32}},173:{start:{line:427,column:19},end:{line:433,column:3}},174:{start:{line:428,column:25},end:{line:431,column:5}},175:{start:{line:432,column:4},end:{line:432,column:38}},176:{start:{line:434,column:19},end:{line:439,column:3}},177:{start:{line:435,column:19},end:{line:435,column:45}},178:{start:{line:436,column:28},end:{line:436,column:43}},179:{start:{line:437,column:4},end:{line:437,column:37}},180:{start:{line:438,column:4},end:{line:438,column:41}},181:{start:{line:440,column:16},end:{line:447,column:3}},182:{start:{line:441,column:19},end:{line:441,column:45}},183:{start:{line:442,column:26},end:{line:442,column:41}},184:{start:{line:443,column:24},end:{line:443,column:55}},185:{start:{line:444,column:4},end:{line:444,column:46}},186:{start:{line:445,column:4},end:{line:445,column:48}},187:{start:{line:446,column:4},end:{line:446,column:39}},188:{start:{line:448,column:28},end:{line:457,column:3}},189:{start:{line:449,column:19},end:{line:449,column:45}},190:{start:{line:450,column:26},end:{line:450,column:41}},191:{start:{line:451,column:18},end:{line:451,column:45}},192:{start:{line:452,column:26},end:{line:452,column:70}},193:{start:{line:453,column:4},end:{line:453,column:88}},194:{start:{line:454,column:4},end:{line:454,column:33}},195:{start:{line:455,column:4},end:{line:455,column:33}},196:{start:{line:456,column:4},end:{line:456,column:39}},197:{start:{line:458,column:20},end:{line:465,column:3}},198:{start:{line:459,column:26},end:{line:459,column:61}},199:{start:{line:460,column:4},end:{line:463,column:6}},200:{start:{line:464,column:4},end:{line:464,column:39}},201:{start:{line:466,column:19},end:{line:470,column:3}},202:{start:{line:467,column:26},end:{line:467,column:61}},203:{start:{line:468,column:4},end:{line:468,column:33}},204:{start:{line:469,column:4},end:{line:469,column:39}},205:{start:{line:471,column:16},end:{line:475,column:3}},206:{start:{line:472,column:4},end:{line:474,column:27}},207:{start:{line:476,column:21},end:{line:490,column:3}},208:{start:{line:477,column:21},end:{line:477,column:44}},209:{start:{line:478,column:4},end:{line:489,column:5}},210:{start:{line:479,column:27},end:{line:485,column:7}},211:{start:{line:486,column:6},end:{line:486,column:26}},212:{start:{line:488,column:6},end:{line:488,column:22}},213:{start:{line:491,column:14},end:{line:495,column:3}},214:{start:{line:492,column:4},end:{line:492,column:34}},215:{start:{line:493,column:4},end:{line:493,column:47}},216:{start:{line:494,column:4},end:{line:494,column:34}},217:{start:{line:497,column:23},end:{line:497,column:25}},218:{start:{line:498,column:4},end:{line:538,column:5}},219:{start:{line:499,column:6},end:{line:537,column:7}},220:{start:{line:500,column:8},end:{line:503,column:10}},221:{start:{line:504,column:18},end:{line:504,column:25}},222:{start:{line:505,column:8},end:{line:509,column:9}},223:{start:{line:506,column:10},end:{line:506,column:62}},224:{start:{line:508,column:10},end:{line:508,column:63}},225:{start:{line:510,column:32},end:{line:523,column:9}},226:{start:{line:511,column:10},end:{line:513,column:11}},227:{start:{line:512,column:12},end:{line:512,column:19}},228:{start:{line:514,column:26},end:{line:516,column:12}},229:{start:{line:517,column:10},end:{line:519,column:11}},230:{start:{line:518,column:12},end:{line:518,column:47}},231:{start:{line:520,column:10},end:{line:522,column:13}},232:{start:{line:524,column:8},end:{line:534,column:9}},233:{start:{line:525,column:10},end:{line:527,column:13}},234:{start:{line:525,column:69},end:{line:525,column:90}},235:{start:{line:526,column:12},end:{line:526,column:74}},236:{start:{line:529,column:10},end:{line:533,column:13}},237:{start:{line:531,column:32},end:{line:531,column:47}},238:{start:{line:531,column:64},end:{line:531,column:85}},239:{start:{line:532,column:12},end:{line:532,column:74}},240:{start:{line:536,column:8},end:{line:536,column:86}},241:{start:{line:539,column:4},end:{line:544,column:5}},242:{start:{line:540,column:6},end:{line:540,column:39}},243:{start:{line:541,column:6},end:{line:543,column:9}},244:{start:{line:547,column:21},end:{line:547,column:55}},245:{start:{line:548,column:4},end:{line:548,column:53}},246:{start:{line:550,column:16},end:{line:554,column:3}},247:{start:{line:551,column:4},end:{line:553,column:7}},248:{start:{line:556,column:40},end:{line:556,column:50}},249:{start:{line:557,column:21},end:{line:568,column:5}},250:{start:{line:560,column:8},end:{line:562,column:11}},251:{start:{line:565,column:8},end:{line:565,column:44}},252:{start:{line:566,column:8},end:{line:566,column:28}},253:{start:{line:569,column:21},end:{line:569,column:40}},254:{start:{line:571,column:4},end:{line:593,column:5}},255:{start:{line:572,column:6},end:{line:580,column:8}},256:{start:{line:582,column:6},end:{line:592,column:8}},257:{start:{line:595,column:4},end:{line:597,column:5}},258:{start:{line:596,column:6},end:{line:596,column:63}},259:{start:{line:598,column:25},end:{line:598,column:27}},260:{start:{line:599,column:4},end:{line:601,column:5}},261:{start:{line:600,column:6},end:{line:600,column:52}},262:{start:{line:602,column:4},end:{line:602,column:160}},263:{start:{line:604,column:18},end:{line:622,column:3}},264:{start:{line:605,column:43},end:{line:605,column:53}},265:{start:{line:606,column:35},end:{line:606,column:45}},266:{start:{line:607,column:16},end:{line:607,column:38}},267:{start:{line:608,column:20},end:{line:608,column:50}},268:{start:{line:609,column:4},end:{line:609,column:70}},269:{start:{line:610,column:23},end:{line:610,column:122}},270:{start:{line:610,column:66},end:{line:610,column:91}},271:{start:{line:610,column:109},end:{line:610,column:121}},272:{start:{line:611,column:4},end:{line:615,column:5}},273:{start:{line:612,column:6},end:{line:612,column:58}},274:{start:{line:614,column:6},end:{line:614,column:39}},275:{start:{line:616,column:4},end:{line:620,column:5}},276:{start:{line:617,column:6},end:{line:617,column:38}},277:{start:{line:618,column:11},end:{line:620,column:5}},278:{start:{line:619,column:6},end:{line:619,column:46}},279:{start:{line:621,column:4},end:{line:621,column:71}},280:{start:{line:623,column:27},end:{line:668,column:3}},281:{start:{line:624,column:16},end:{line:624,column:38}},282:{start:{line:625,column:23},end:{line:625,column:52}},283:{start:{line:626,column:4},end:{line:638,column:5}},284:{start:{line:627,column:21},end:{line:627,column:42}},285:{start:{line:628,column:23},end:{line:628,column:25}},286:{start:{line:629,column:6},end:{line:631,column:9}},287:{start:{line:630,column:8},end:{line:630,column:35}},288:{start:{line:632,column:6},end:{line:637,column:9}},289:{start:{line:639,column:17},end:{line:639,column:45}},290:{start:{line:640,column:4},end:{line:642,column:5}},291:{start:{line:641,column:6},end:{line:641,column:29}},292:{start:{line:643,column:17},end:{line:643,column:46}},293:{start:{line:644,column:4},end:{line:667,column:5}},294:{start:{line:645,column:6},end:{line:666,column:7}},295:{start:{line:646,column:22},end:{line:646,column:37}},296:{start:{line:647,column:46},end:{line:650,column:9}},297:{start:{line:651,column:20},end:{line:651,column:24}},298:{start:{line:652,column:8},end:{line:657,column:9}},299:{start:{line:653,column:33},end:{line:653,column:63}},300:{start:{line:654,column:10},end:{line:656,column:11}},301:{start:{line:655,column:12},end:{line:655,column:26}},302:{start:{line:658,column:8},end:{line:663,column:9}},303:{start:{line:659,column:10},end:{line:662,column:13}},304:{start:{line:665,column:8},end:{line:665,column:26}},305:{start:{line:669,column:18},end:{line:674,column:3}},306:{start:{line:670,column:4},end:{line:673,column:27}},307:{start:{line:676,column:4},end:{line:681,column:27}},308:{start:{line:684,column:4},end:{line:684,column:60}},309:{start:{line:687,column:4},end:{line:687,column:34}},310:{start:{line:689,column:28},end:{line:696,column:3}},311:{start:{line:690,column:4},end:{line:695,column:7}},312:{start:{line:697,column:28},end:{line:704,column:3}},313:{start:{line:698,column:4},end:{line:703,column:7}},314:{start:{line:706,column:19},end:{line:706,column:51}},315:{start:{line:707,column:26},end:{line:707,column:92}},316:{start:{line:708,column:36},end:{line:721,column:5}},317:{start:{line:722,column:38},end:{line:736,column:5}},318:{start:{line:737,column:24},end:{line:756,column:14}},319:{start:{line:757,column:24},end:{line:767,column:14}},320:{start:{line:768,column:35},end:{line:828,column:8}},321:{start:{line:829,column:4},end:{line:839,column:6}}},fnMap:{0:{name:"setFetchAccessToken",decl:{start:{line:38,column:9},end:{line:38,column:28}},loc:{start:{line:38,column:44},end:{line:55,column:1}},line:38},1:{name:"updateRootSpec",decl:{start:{line:56,column:9},end:{line:56,column:23}},loc:{start:{line:56,column:52},end:{line:67,column:1}},line:56},2:{name:"(anonymous_2)",decl:{start:{line:72,column:2},end:{line:72,column:3}},loc:{start:{line:72,column:21},end:{line:215,column:3}},line:72},3:{name:"(anonymous_3)",decl:{start:{line:82,column:26},end:{line:82,column:27}},loc:{start:{line:82,column:40},end:{line:82,column:86}},line:82},4:{name:"(anonymous_4)",decl:{start:{line:89,column:17},end:{line:89,column:18}},loc:{start:{line:89,column:23},end:{line:91,column:9}},line:89},5:{name:"(anonymous_5)",decl:{start:{line:95,column:17},end:{line:95,column:18}},loc:{start:{line:95,column:23},end:{line:97,column:9}},line:95},6:{name:"(anonymous_6)",decl:{start:{line:101,column:17},end:{line:101,column:18}},loc:{start:{line:101,column:23},end:{line:103,column:9}},line:101},7:{name:"(anonymous_7)",decl:{start:{line:107,column:17},end:{line:107,column:18}},loc:{start:{line:107,column:23},end:{line:109,column:9}},line:107},8:{name:"(anonymous_8)",decl:{start:{line:113,column:17},end:{line:113,column:18}},loc:{start:{line:113,column:23},end:{line:115,column:9}},line:113},9:{name:"(anonymous_9)",decl:{start:{line:119,column:17},end:{line:119,column:18}},loc:{start:{line:119,column:23},end:{line:123,column:9}},line:119},10:{name:"(anonymous_10)",decl:{start:{line:127,column:17},end:{line:127,column:18}},loc:{start:{line:127,column:23},end:{line:129,column:9}},line:127},11:{name:"(anonymous_11)",decl:{start:{line:133,column:17},end:{line:133,column:18}},loc:{start:{line:133,column:23},end:{line:135,column:9}},line:133},12:{name:"(anonymous_12)",decl:{start:{line:138,column:44},end:{line:138,column:45}},loc:{start:{line:138,column:51},end:{line:151,column:5}},line:138},13:{name:"(anonymous_13)",decl:{start:{line:143,column:40},end:{line:143,column:41}},loc:{start:{line:143,column:55},end:{line:145,column:9}},line:143},14:{name:"(anonymous_14)",decl:{start:{line:155,column:29},end:{line:155,column:30}},loc:{start:{line:155,column:43},end:{line:155,column:72}},line:155},15:{name:"(anonymous_15)",decl:{start:{line:161,column:27},end:{line:161,column:28}},loc:{start:{line:161,column:36},end:{line:171,column:7}},line:161},16:{name:"(anonymous_16)",decl:{start:{line:166,column:36},end:{line:166,column:37}},loc:{start:{line:166,column:50},end:{line:166,column:102}},line:166},17:{name:"(anonymous_17)",decl:{start:{line:213,column:28},end:{line:213,column:29}},loc:{start:{line:213,column:35},end:{line:213,column:69}},line:213},18:{name:"(anonymous_18)",decl:{start:{line:216,column:19},end:{line:216,column:20}},loc:{start:{line:216,column:26},end:{line:234,column:3}},line:216},19:{name:"(anonymous_19)",decl:{start:{line:235,column:2},end:{line:235,column:3}},loc:{start:{line:235,column:22},end:{line:237,column:3}},line:235},20:{name:"(anonymous_20)",decl:{start:{line:238,column:2},end:{line:238,column:3}},loc:{start:{line:238,column:25},end:{line:240,column:3}},line:238},21:{name:"(anonymous_21)",decl:{start:{line:241,column:2},end:{line:241,column:3}},loc:{start:{line:241,column:27},end:{line:243,column:3}},line:241},22:{name:"(anonymous_22)",decl:{start:{line:244,column:2},end:{line:244,column:3}},loc:{start:{line:244,column:27},end:{line:251,column:3}},line:244},23:{name:"(anonymous_23)",decl:{start:{line:248,column:37},end:{line:248,column:38}},loc:{start:{line:248,column:48},end:{line:250,column:5}},line:248},24:{name:"(anonymous_24)",decl:{start:{line:252,column:2},end:{line:252,column:3}},loc:{start:{line:252,column:23},end:{line:256,column:3}},line:252},25:{name:"(anonymous_25)",decl:{start:{line:253,column:36},end:{line:253,column:37}},loc:{start:{line:253,column:47},end:{line:255,column:5}},line:253},26:{name:"(anonymous_26)",decl:{start:{line:257,column:29},end:{line:257,column:30}},loc:{start:{line:257,column:50},end:{line:271,column:3}},line:257},27:{name:"(anonymous_27)",decl:{start:{line:272,column:19},end:{line:272,column:20}},loc:{start:{line:272,column:44},end:{line:395,column:3}},line:272},28:{name:"(anonymous_28)",decl:{start:{line:297,column:30},end:{line:297,column:31}},loc:{start:{line:297,column:48},end:{line:305,column:7}},line:297},29:{name:"(anonymous_29)",decl:{start:{line:307,column:56},end:{line:307,column:57}},loc:{start:{line:307,column:67},end:{line:358,column:5}},line:307},30:{name:"(anonymous_30)",decl:{start:{line:362,column:21},end:{line:362,column:22}},loc:{start:{line:362,column:32},end:{line:373,column:7}},line:362},31:{name:"(anonymous_31)",decl:{start:{line:391,column:7},end:{line:391,column:8}},loc:{start:{line:391,column:13},end:{line:394,column:5}},line:391},32:{name:"(anonymous_32)",decl:{start:{line:396,column:11},end:{line:396,column:12}},loc:{start:{line:396,column:17},end:{line:403,column:3}},line:396},33:{name:"(anonymous_33)",decl:{start:{line:404,column:11},end:{line:404,column:12}},loc:{start:{line:404,column:17},end:{line:411,column:3}},line:404},34:{name:"(anonymous_34)",decl:{start:{line:412,column:16},end:{line:412,column:17}},loc:{start:{line:412,column:26},end:{line:426,column:3}},line:412},35:{name:"(anonymous_35)",decl:{start:{line:427,column:19},end:{line:427,column:20}},loc:{start:{line:427,column:38},end:{line:433,column:3}},line:427},36:{name:"(anonymous_36)",decl:{start:{line:434,column:19},end:{line:434,column:20}},loc:{start:{line:434,column:30},end:{line:439,column:3}},line:434},37:{name:"(anonymous_37)",decl:{start:{line:440,column:16},end:{line:440,column:17}},loc:{start:{line:440,column:27},end:{line:447,column:3}},line:440},38:{name:"(anonymous_38)",decl:{start:{line:448,column:28},end:{line:448,column:29}},loc:{start:{line:448,column:39},end:{line:457,column:3}},line:448},39:{name:"(anonymous_39)",decl:{start:{line:458,column:20},end:{line:458,column:21}},loc:{start:{line:458,column:46},end:{line:465,column:3}},line:458},40:{name:"(anonymous_40)",decl:{start:{line:466,column:19},end:{line:466,column:20}},loc:{start:{line:466,column:37},end:{line:470,column:3}},line:466},41:{name:"(anonymous_41)",decl:{start:{line:471,column:16},end:{line:471,column:17}},loc:{start:{line:471,column:30},end:{line:475,column:3}},line:471},42:{name:"(anonymous_42)",decl:{start:{line:476,column:21},end:{line:476,column:22}},loc:{start:{line:476,column:35},end:{line:490,column:3}},line:476},43:{name:"(anonymous_43)",decl:{start:{line:491,column:14},end:{line:491,column:15}},loc:{start:{line:491,column:40},end:{line:495,column:3}},line:491},44:{name:"(anonymous_44)",decl:{start:{line:496,column:2},end:{line:496,column:3}},loc:{start:{line:496,column:17},end:{line:545,column:3}},line:496},45:{name:"(anonymous_45)",decl:{start:{line:510,column:32},end:{line:510,column:33}},loc:{start:{line:510,column:42},end:{line:523,column:9}},line:510},46:{name:"(anonymous_46)",decl:{start:{line:525,column:59},end:{line:525,column:60}},loc:{start:{line:525,column:69},end:{line:525,column:90}},line:525},47:{name:"(anonymous_47)",decl:{start:{line:525,column:98},end:{line:525,column:99}},loc:{start:{line:525,column:107},end:{line:527,column:11}},line:525},48:{name:"(anonymous_48)",decl:{start:{line:531,column:18},end:{line:531,column:19}},loc:{start:{line:531,column:32},end:{line:531,column:47}},line:531},49:{name:"(anonymous_49)",decl:{start:{line:531,column:54},end:{line:531,column:55}},loc:{start:{line:531,column:64},end:{line:531,column:85}},line:531},50:{name:"(anonymous_50)",decl:{start:{line:531,column:93},end:{line:531,column:94}},loc:{start:{line:531,column:102},end:{line:533,column:11}},line:531},51:{name:"(anonymous_51)",decl:{start:{line:546,column:2},end:{line:546,column:3}},loc:{start:{line:546,column:17},end:{line:549,column:3}},line:546},52:{name:"(anonymous_52)",decl:{start:{line:550,column:16},end:{line:550,column:17}},loc:{start:{line:550,column:29},end:{line:554,column:3}},line:550},53:{name:"(anonymous_53)",decl:{start:{line:555,column:2},end:{line:555,column:3}},loc:{start:{line:555,column:16},end:{line:603,column:3}},line:555},54:{name:"(anonymous_54)",decl:{start:{line:559,column:27},end:{line:559,column:28}},loc:{start:{line:559,column:42},end:{line:563,column:7}},line:559},55:{name:"(anonymous_55)",decl:{start:{line:564,column:20},end:{line:564,column:21}},loc:{start:{line:564,column:27},end:{line:567,column:7}},line:564},56:{name:"(anonymous_56)",decl:{start:{line:604,column:18},end:{line:604,column:19}},loc:{start:{line:604,column:24},end:{line:622,column:3}},line:604},57:{name:"(anonymous_57)",decl:{start:{line:610,column:50},end:{line:610,column:51}},loc:{start:{line:610,column:66},end:{line:610,column:91}},line:610},58:{name:"(anonymous_58)",decl:{start:{line:610,column:100},end:{line:610,column:101}},loc:{start:{line:610,column:109},end:{line:610,column:121}},line:610},59:{name:"(anonymous_59)",decl:{start:{line:623,column:27},end:{line:623,column:28}},loc:{start:{line:623,column:41},end:{line:668,column:3}},line:623},60:{name:"(anonymous_60)",decl:{start:{line:629,column:21},end:{line:629,column:22}},loc:{start:{line:629,column:36},end:{line:631,column:7}},line:629},61:{name:"(anonymous_61)",decl:{start:{line:669,column:18},end:{line:669,column:19}},loc:{start:{line:669,column:29},end:{line:674,column:3}},line:669},62:{name:"(anonymous_62)",decl:{start:{line:675,column:2},end:{line:675,column:3}},loc:{start:{line:675,column:29},end:{line:682,column:3}},line:675},63:{name:"(anonymous_63)",decl:{start:{line:683,column:2},end:{line:683,column:3}},loc:{start:{line:683,column:25},end:{line:685,column:3}},line:683},64:{name:"(anonymous_64)",decl:{start:{line:686,column:2},end:{line:686,column:3}},loc:{start:{line:686,column:30},end:{line:688,column:3}},line:686},65:{name:"(anonymous_65)",decl:{start:{line:689,column:28},end:{line:689,column:29}},loc:{start:{line:689,column:44},end:{line:696,column:3}},line:689},66:{name:"(anonymous_66)",decl:{start:{line:697,column:28},end:{line:697,column:29}},loc:{start:{line:697,column:44},end:{line:704,column:3}},line:697},67:{name:"(anonymous_67)",decl:{start:{line:705,column:2},end:{line:705,column:3}},loc:{start:{line:705,column:11},end:{line:840,column:3}},line:705}},branchMap:{0:{loc:{start:{line:42,column:2},end:{line:54,column:3}},type:"if",locations:[{start:{line:42,column:2},end:{line:54,column:3}},{start:{line:47,column:9},end:{line:54,column:3}}],line:42},1:{loc:{start:{line:42,column:6},end:{line:42,column:43}},type:"binary-expr",locations:[{start:{line:42,column:6},end:{line:42,column:24}},{start:{line:42,column:28},end:{line:42,column:43}}],line:42},2:{loc:{start:{line:44,column:4},end:{line:46,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:46,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:44},3:{loc:{start:{line:47,column:9},end:{line:54,column:3}},type:"if",locations:[{start:{line:47,column:9},end:{line:54,column:3}},{start:{line:52,column:9},end:{line:54,column:3}}],line:47},4:{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:49},5:{loc:{start:{line:78,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:80,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:78},6:{loc:{start:{line:78,column:8},end:{line:78,column:89}},type:"binary-expr",locations:[{start:{line:78,column:8},end:{line:78,column:20}},{start:{line:78,column:25},end:{line:78,column:54}},{start:{line:78,column:58},end:{line:78,column:88}}],line:78},7:{loc:{start:{line:121,column:12},end:{line:121,column:61}},type:"cond-expr",locations:[{start:{line:121,column:44},end:{line:121,column:53}},{start:{line:121,column:56},end:{line:121,column:61}}],line:121},8:{loc:{start:{line:139,column:6},end:{line:150,column:7}},type:"if",locations:[{start:{line:139,column:6},end:{line:150,column:7}},{start:{line:142,column:13},end:{line:150,column:7}}],line:139},9:{loc:{start:{line:142,column:13},end:{line:150,column:7}},type:"if",locations:[{start:{line:142,column:13},end:{line:150,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:142},10:{loc:{start:{line:142,column:17},end:{line:142,column:88}},type:"binary-expr",locations:[{start:{line:142,column:17},end:{line:142,column:44}},{start:{line:142,column:48},end:{line:142,column:88}}],line:142},11:{loc:{start:{line:146,column:8},end:{line:149,column:9}},type:"if",locations:[{start:{line:146,column:8},end:{line:149,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:146},12:{loc:{start:{line:153,column:4},end:{line:172,column:5}},type:"if",locations:[{start:{line:153,column:4},end:{line:172,column:5}},{start:{line:157,column:11},end:{line:172,column:5}}],line:153},13:{loc:{start:{line:153,column:8},end:{line:153,column:104}},type:"binary-expr",locations:[{start:{line:153,column:8},end:{line:153,column:16}},{start:{line:153,column:20},end:{line:153,column:104}}],line:153},14:{loc:{start:{line:158,column:6},end:{line:160,column:7}},type:"if",locations:[{start:{line:158,column:6},end:{line:160,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:158},15:{loc:{start:{line:162,column:8},end:{line:165,column:9}},type:"if",locations:[{start:{line:162,column:8},end:{line:165,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:162},16:{loc:{start:{line:167,column:8},end:{line:170,column:9}},type:"if",locations:[{start:{line:167,column:8},end:{line:170,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:167},17:{loc:{start:{line:173,column:4},end:{line:176,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:176,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:173},18:{loc:{start:{line:217,column:4},end:{line:233,column:5}},type:"if",locations:[{start:{line:217,column:4},end:{line:233,column:5}},{start:{line:225,column:11},end:{line:233,column:5}}],line:217},19:{loc:{start:{line:218,column:6},end:{line:224,column:7}},type:"if",locations:[{start:{line:218,column:6},end:{line:224,column:7}},{start:{line:221,column:13},end:{line:224,column:7}}],line:218},20:{loc:{start:{line:218,column:10},end:{line:218,column:53}},type:"binary-expr",locations:[{start:{line:218,column:10},end:{line:218,column:19}},{start:{line:218,column:23},end:{line:218,column:33}},{start:{line:218,column:37},end:{line:218,column:53}}],line:218},21:{loc:{start:{line:221,column:13},end:{line:224,column:7}},type:"if",locations:[{start:{line:221,column:13},end:{line:224,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:221},22:{loc:{start:{line:221,column:17},end:{line:221,column:46}},type:"binary-expr",locations:[{start:{line:221,column:17},end:{line:221,column:26}},{start:{line:221,column:30},end:{line:221,column:46}}],line:221},23:{loc:{start:{line:226,column:6},end:{line:232,column:7}},type:"if",locations:[{start:{line:226,column:6},end:{line:232,column:7}},{start:{line:229,column:13},end:{line:232,column:7}}],line:226},24:{loc:{start:{line:226,column:10},end:{line:226,column:39}},type:"binary-expr",locations:[{start:{line:226,column:10},end:{line:226,column:19}},{start:{line:226,column:23},end:{line:226,column:39}}],line:226},25:{loc:{start:{line:229,column:13},end:{line:232,column:7}},type:"if",locations:[{start:{line:229,column:13},end:{line:232,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:229},26:{loc:{start:{line:229,column:17},end:{line:229,column:46}},type:"binary-expr",locations:[{start:{line:229,column:17},end:{line:229,column:26}},{start:{line:229,column:30},end:{line:229,column:46}}],line:229},27:{loc:{start:{line:245,column:21},end:{line:245,column:55}},type:"binary-expr",locations:[{start:{line:245,column:21},end:{line:245,column:49}},{start:{line:245,column:53},end:{line:245,column:55}}],line:245},28:{loc:{start:{line:246,column:24},end:{line:246,column:93}},type:"binary-expr",locations:[{start:{line:246,column:24},end:{line:246,column:70}},{start:{line:246,column:74},end:{line:246,column:93}}],line:246},29:{loc:{start:{line:247,column:21},end:{line:247,column:110}},type:"cond-expr",locations:[{start:{line:247,column:55},end:{line:247,column:96}},{start:{line:247,column:99},end:{line:247,column:110}}],line:247},30:{loc:{start:{line:258,column:4},end:{line:262,column:5}},type:"if",locations:[{start:{line:258,column:4},end:{line:262,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:258},31:{loc:{start:{line:258,column:8},end:{line:258,column:123}},type:"binary-expr",locations:[{start:{line:258,column:8},end:{line:258,column:40}},{start:{line:258,column:44},end:{line:258,column:123}}],line:258},32:{loc:{start:{line:272,column:30},end:{line:272,column:39}},type:"default-arg",locations:[{start:{line:272,column:37},end:{line:272,column:39}}],line:272},33:{loc:{start:{line:279,column:4},end:{line:281,column:5}},type:"if",locations:[{start:{line:279,column:4},end:{line:281,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:279},34:{loc:{start:{line:279,column:8},end:{line:279,column:62}},type:"binary-expr",locations:[{start:{line:279,column:8},end:{line:279,column:23}},{start:{line:279,column:27},end:{line:279,column:62}}],line:279},35:{loc:{start:{line:282,column:4},end:{line:284,column:5}},type:"if",locations:[{start:{line:282,column:4},end:{line:284,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:282},36:{loc:{start:{line:282,column:8},end:{line:282,column:62}},type:"binary-expr",locations:[{start:{line:282,column:8},end:{line:282,column:23}},{start:{line:282,column:27},end:{line:282,column:62}}],line:282},37:{loc:{start:{line:286,column:6},end:{line:288,column:7}},type:"if",locations:[{start:{line:286,column:6},end:{line:288,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:286},38:{loc:{start:{line:286,column:10},end:{line:286,column:69}},type:"binary-expr",locations:[{start:{line:286,column:10},end:{line:286,column:16}},{start:{line:286,column:20},end:{line:286,column:35}},{start:{line:286,column:39},end:{line:286,column:69}}],line:286},39:{loc:{start:{line:290,column:4},end:{line:292,column:5}},type:"if",locations:[{start:{line:290,column:4},end:{line:292,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:290},40:{loc:{start:{line:293,column:19},end:{line:293,column:51}},type:"binary-expr",locations:[{start:{line:293,column:19},end:{line:293,column:45}},{start:{line:293,column:49},end:{line:293,column:51}}],line:293},41:{loc:{start:{line:295,column:4},end:{line:306,column:5}},type:"if",locations:[{start:{line:295,column:4},end:{line:306,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:295},42:{loc:{start:{line:295,column:8},end:{line:295,column:35}},type:"binary-expr",locations:[{start:{line:295,column:8},end:{line:295,column:16}},{start:{line:295,column:20},end:{line:295,column:35}}],line:295},43:{loc:{start:{line:298,column:8},end:{line:303,column:9}},type:"if",locations:[{start:{line:298,column:8},end:{line:303,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:298},44:{loc:{start:{line:298,column:12},end:{line:298,column:56}},type:"binary-expr",locations:[{start:{line:298,column:12},end:{line:298,column:27}},{start:{line:298,column:31},end:{line:298,column:56}}],line:298},45:{loc:{start:{line:309,column:6},end:{line:322,column:7}},type:"if",locations:[{start:{line:309,column:6},end:{line:322,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:309},46:{loc:{start:{line:324,column:6},end:{line:337,column:7}},type:"if",locations:[{start:{line:324,column:6},end:{line:337,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:324},47:{loc:{start:{line:339,column:6},end:{line:357,column:7}},type:"if",locations:[{start:{line:339,column:6},end:{line:357,column:7}},{start:{line:353,column:13},end:{line:357,column:7}}],line:339},48:{loc:{start:{line:341,column:20},end:{line:341,column:78}},type:"cond-expr",locations:[{start:{line:341,column:40},end:{line:341,column:67}},{start:{line:341,column:70},end:{line:341,column:78}}],line:341},49:{loc:{start:{line:341,column:20},end:{line:341,column:37}},type:"binary-expr",locations:[{start:{line:341,column:20},end:{line:341,column:25}},{start:{line:341,column:29},end:{line:341,column:37}}],line:341},50:{loc:{start:{line:360,column:4},end:{line:374,column:5}},type:"if",locations:[{start:{line:360,column:4},end:{line:374,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:360},51:{loc:{start:{line:364,column:8},end:{line:372,column:9}},type:"if",locations:[{start:{line:364,column:8},end:{line:372,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:364},52:{loc:{start:{line:375,column:4},end:{line:377,column:5}},type:"if",locations:[{start:{line:375,column:4},end:{line:377,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:375},53:{loc:{start:{line:378,column:4},end:{line:380,column:5}},type:"if",locations:[{start:{line:378,column:4},end:{line:380,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:378},54:{loc:{start:{line:381,column:4},end:{line:383,column:5}},type:"if",locations:[{start:{line:381,column:4},end:{line:383,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:381},55:{loc:{start:{line:384,column:4},end:{line:386,column:5}},type:"if",locations:[{start:{line:384,column:4},end:{line:386,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:384},56:{loc:{start:{line:417,column:4},end:{line:417,column:38}},type:"if",locations:[{start:{line:417,column:4},end:{line:417,column:38}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:417},57:{loc:{start:{line:418,column:4},end:{line:422,column:5}},type:"if",locations:[{start:{line:418,column:4},end:{line:422,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:418},58:{loc:{start:{line:452,column:26},end:{line:452,column:70}},type:"cond-expr",locations:[{start:{line:452,column:46},end:{line:452,column:65}},{start:{line:452,column:68},end:{line:452,column:70}}],line:452},59:{loc:{start:{line:453,column:31},end:{line:453,column:87}},type:"cond-expr",locations:[{start:{line:453,column:69},end:{line:453,column:78}},{start:{line:453,column:81},end:{line:453,column:87}}],line:453},60:{loc:{start:{line:477,column:21},end:{line:477,column:44}},type:"binary-expr",locations:[{start:{line:477,column:21},end:{line:477,column:38}},{start:{line:477,column:42},end:{line:477,column:44}}],line:477},61:{loc:{start:{line:478,column:4},end:{line:489,column:5}},type:"if",locations:[{start:{line:478,column:4},end:{line:489,column:5}},{start:{line:487,column:11},end:{line:489,column:5}}],line:478},62:{loc:{start:{line:499,column:6},end:{line:537,column:7}},type:"if",locations:[{start:{line:499,column:6},end:{line:537,column:7}},{start:{line:535,column:13},end:{line:537,column:7}}],line:499},63:{loc:{start:{line:499,column:10},end:{line:499,column:149}},type:"binary-expr",locations:[{start:{line:499,column:10},end:{line:499,column:72}},{start:{line:499,column:76},end:{line:499,column:97}},{start:{line:499,column:101},end:{line:499,column:149}}],line:499},64:{loc:{start:{line:511,column:10},end:{line:513,column:11}},type:"if",locations:[{start:{line:511,column:10},end:{line:513,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:511},65:{loc:{start:{line:524,column:8},end:{line:534,column:9}},type:"if",locations:[{start:{line:524,column:8},end:{line:534,column:9}},{start:{line:528,column:15},end:{line:534,column:9}}],line:524},66:{loc:{start:{line:536,column:26},end:{line:536,column:85}},type:"binary-expr",locations:[{start:{line:536,column:26},end:{line:536,column:49}},{start:{line:536,column:53},end:{line:536,column:85}}],line:536},67:{loc:{start:{line:539,column:4},end:{line:544,column:5}},type:"if",locations:[{start:{line:539,column:4},end:{line:544,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:539},68:{loc:{start:{line:547,column:21},end:{line:547,column:55}},type:"binary-expr",locations:[{start:{line:547,column:21},end:{line:547,column:49}},{start:{line:547,column:53},end:{line:547,column:55}}],line:547},69:{loc:{start:{line:548,column:11},end:{line:548,column:52}},type:"binary-expr",locations:[{start:{line:548,column:11},end:{line:548,column:40}},{start:{line:548,column:44},end:{line:548,column:52}}],line:548},70:{loc:{start:{line:558,column:16},end:{line:558,column:41}},type:"binary-expr",locations:[{start:{line:558,column:16},end:{line:558,column:29}},{start:{line:558,column:33},end:{line:558,column:41}}],line:558},71:{loc:{start:{line:571,column:4},end:{line:593,column:5}},type:"if",locations:[{start:{line:571,column:4},end:{line:593,column:5}},{start:{line:581,column:11},end:{line:593,column:5}}],line:571},72:{loc:{start:{line:595,column:4},end:{line:597,column:5}},type:"if",locations:[{start:{line:595,column:4},end:{line:597,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:595},73:{loc:{start:{line:599,column:4},end:{line:601,column:5}},type:"if",locations:[{start:{line:599,column:4},end:{line:601,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:599},74:{loc:{start:{line:610,column:66},end:{line:610,column:91}},type:"cond-expr",locations:[{start:{line:610,column:81},end:{line:610,column:84}},{start:{line:610,column:87},end:{line:610,column:91}}],line:610},75:{loc:{start:{line:611,column:4},end:{line:615,column:5}},type:"if",locations:[{start:{line:611,column:4},end:{line:615,column:5}},{start:{line:613,column:11},end:{line:615,column:5}}],line:611},76:{loc:{start:{line:616,column:4},end:{line:620,column:5}},type:"if",locations:[{start:{line:616,column:4},end:{line:620,column:5}},{start:{line:618,column:11},end:{line:620,column:5}}],line:616},77:{loc:{start:{line:618,column:11},end:{line:620,column:5}},type:"if",locations:[{start:{line:618,column:11},end:{line:620,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:618},78:{loc:{start:{line:626,column:4},end:{line:638,column:5}},type:"if",locations:[{start:{line:626,column:4},end:{line:638,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:626},79:{loc:{start:{line:626,column:8},end:{line:626,column:39}},type:"binary-expr",locations:[{start:{line:626,column:8},end:{line:626,column:18}},{start:{line:626,column:22},end:{line:626,column:39}}],line:626},80:{loc:{start:{line:640,column:4},end:{line:642,column:5}},type:"if",locations:[{start:{line:640,column:4},end:{line:642,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:640},81:{loc:{start:{line:640,column:8},end:{line:640,column:27}},type:"binary-expr",locations:[{start:{line:640,column:8},end:{line:640,column:12}},{start:{line:640,column:16},end:{line:640,column:27}}],line:640},82:{loc:{start:{line:644,column:4},end:{line:667,column:5}},type:"if",locations:[{start:{line:644,column:4},end:{line:667,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:644},83:{loc:{start:{line:652,column:8},end:{line:657,column:9}},type:"if",locations:[{start:{line:652,column:8},end:{line:657,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:652},84:{loc:{start:{line:654,column:10},end:{line:656,column:11}},type:"if",locations:[{start:{line:654,column:10},end:{line:656,column:11}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:654},85:{loc:{start:{line:658,column:8},end:{line:663,column:9}},type:"if",locations:[{start:{line:658,column:8},end:{line:663,column:9}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:658},86:{loc:{start:{line:706,column:19},end:{line:706,column:51}},type:"binary-expr",locations:[{start:{line:706,column:19},end:{line:706,column:45}},{start:{line:706,column:49},end:{line:706,column:51}}],line:706},87:{loc:{start:{line:707,column:26},end:{line:707,column:92}},type:"cond-expr",locations:[{start:{line:707,column:46},end:{line:707,column:83}},{start:{line:707,column:86},end:{line:707,column:92}}],line:707},88:{loc:{start:{line:737,column:24},end:{line:756,column:14}},type:"cond-expr",locations:[{start:{line:737,column:56},end:{line:756,column:5}},{start:{line:756,column:8},end:{line:756,column:14}}],line:737},89:{loc:{start:{line:757,column:24},end:{line:767,column:14}},type:"cond-expr",locations:[{start:{line:757,column:97},end:{line:767,column:5}},{start:{line:767,column:8},end:{line:767,column:14}}],line:757}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0,183:0,184:0,185:0,186:0,187:0,188:0,189:0,190:0,191:0,192:0,193:0,194:0,195:0,196:0,197:0,198:0,199:0,200:0,201:0,202:0,203:0,204:0,205:0,206:0,207:0,208:0,209:0,210:0,211:0,212:0,213:0,214:0,215:0,216:0,217:0,218:0,219:0,220:0,221:0,222:0,223:0,224:0,225:0,226:0,227:0,228:0,229:0,230:0,231:0,232:0,233:0,234:0,235:0,236:0,237:0,238:0,239:0,240:0,241:0,242:0,243:0,244:0,245:0,246:0,247:0,248:0,249:0,250:0,251:0,252:0,253:0,254:0,255:0,256:0,257:0,258:0,259:0,260:0,261:0,262:0,263:0,264:0,265:0,266:0,267:0,268:0,269:0,270:0,271:0,272:0,273:0,274:0,275:0,276:0,277:0,278:0,279:0,280:0,281:0,282:0,283:0,284:0,285:0,286:0,287:0,288:0,289:0,290:0,291:0,292:0,293:0,294:0,295:0,296:0,297:0,298:0,299:0,300:0,301:0,302:0,303:0,304:0,305:0,306:0,307:0,308:0,309:0,310:0,311:0,312:0,313:0,314:0,315:0,316:0,317:0,318:0,319:0,320:0,321:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0],33:[0,0],34:[0,0],35:[0,0],36:[0,0],37:[0,0],38:[0,0,0],39:[0,0],40:[0,0],41:[0,0],42:[0,0],43:[0,0],44:[0,0],45:[0,0],46:[0,0],47:[0,0],48:[0,0],49:[0,0],50:[0,0],51:[0,0],52:[0,0],53:[0,0],54:[0,0],55:[0,0],56:[0,0],57:[0,0],58:[0,0],59:[0,0],60:[0,0],61:[0,0],62:[0,0],63:[0,0,0],64:[0,0],65:[0,0],66:[0,0],67:[0,0],68:[0,0],69:[0,0],70:[0,0],71:[0,0],72:[0,0],73:[0,0],74:[0,0],75:[0,0],76:[0,0],77:[0,0],78:[0,0],79:[0,0],80:[0,0],81:[0,0],82:[0,0],83:[0,0],84:[0,0],85:[0,0],86:[0,0],87:[0,0],88:[0,0],89:[0,0]},inputSourceMap:{version:3,file:null,sources:["/home/runner/work/maputnik/maputnik/src/components/App.tsx"],names:["shortcut","mapStyle"],mappings:"AA+uBmB,SAAA,KAkNA,YAlNA;AA9uBnB,OAAO,cAAc;AACrB,OAAO,WAAW;AAClB,OAAO,eAAe;AACtB,OAAO,WAAW;AAClB,OAAO,YAAY;AACnB,OAAO,SAAS;AAChB,SAAQ,aAAY;AACpB,SAAQ,wBAAuB;AAC/B,OAAO,UAAU;AACjB,SAAS,eAAe;AAExB,SAAQ,QAAQ,wBAAuB;AAEvC,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B,OAAO,eAAe;AACtB,OAAO,iBAAiB;AACxB,OAAO,gBAA8B;AACrC,OAAO,eAAe;AACtB,OAAO,kBAAkB;AAEzB,OAAO,mBAAmB;AAC1B,OAAO,iBAAiB;AACxB,OAAO,kBAAkB;AACzB,OAAO,eAAe;AACtB,OAAO,oBAAoB;AAC3B,OAAO,gBAAgB;AAEvB,SAAQ,wBAAwB,8BAA6B;AAC7D,OAAO,WAAW;AAClB,SAAS,iBAAiB,cAAc,8BAA8B;AACtE,SAAS,cAAc,oBAAoB;AAC3C,SAAS,kBAAkB;AAC3B,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAC9B,OAAO,kBAAkB;AACzB,OAAO,YAAY;AACnB,OAAO,aAAa;AACpB,OAAO,WAAW;AAKlB,OAAO,SAAS,OAAO;AAEvB,SAAS,oBAAoB,KAAa,UAA8B;AAChE,QAAA,qBAAqB,IAAI,MAAM,oBAAoB;AACnD,QAAA,kBAAkB,IAAI,MAAM,iBAAiB;AAC7C,QAAA,uBAAuB,IAAI,MAAM,sBAAsB;AAC7D,MAAI,sBAAsB,iBAAiB;AACnC,UAAA,cAAc,MAAM,eAAe,gBAAgB,UAAU,EAAC,eAAe,KAAI,CAAC;AACxF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,WACS,sBAAsB;AACvB,UAAA,cAAc,MAAM,eAAe,iBAAiB,UAAU,EAAC,eAAe,KAAI,CAAC;AACzF,QAAI,aAAa;AACR,aAAA,IAAI,QAAQ,SAAS,WAAW;AAAA,IACzC;AAAA,EACF,OACK;AACI,WAAA;AAAA,EACT;AACF;AAEA,SAAS,eAAe,MAAW,WAAmB,WAAgB;AAC7D,SAAA;AAAA,IACL,GAAG;AAAA,IACH,OAAO;AAAA,MACL,GAAG,KAAK;AAAA,MACR,CAAC,SAAS,GAAG;AAAA,QACX,GAAG,KAAK,MAAM,SAAS;AAAA,QACvB,QAAQ;AAAA,MACV;AAAA,IACF;AAAA,EACF;AACF;AAyDA,qBAAqB,YAAY,MAAM,UAAyB;AAAA,EAC9D;AAAA,EACA;AAAA,EACA;AAAA,EAEA,YAAY,OAAY;AACtB,UAAM,KAAK;AACX,aAAS,IAAI;AAER,SAAA,gBAAgB,IAAI,cAAc;AACjC,UAAA,SAAS,IAAI,gBAAgB,OAAO,SAAS,OAAO,UAAU,CAAC,CAAC;AAClE,QAAA,OAAO,OAAO,IAAI,WAAW;AAC7B,QAAA,QAAQ,SAAS,OAAO,SAAS,SAAS,QAAQ,OAAO,SAAS,SAAS,QAAQ;AACrF,aAAO,OAAO,SAAS;AAAA,IACzB;AACK,SAAA,aAAa,IAAI,cAAc;AAAA,MAClC,oBAAoB,cAAY,KAAK,eAAe,UAAU,EAAC,MAAM,MAAK,CAAC;AAAA,MAC3E;AAAA,MACA,MAAM,OAAO,IAAI,WAAW;AAAA,IAC9B,CAAC;AAGD,UAAM,YAAY;AAAA,MAChB;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,MAAM;AAAA,QACzB;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,QAAQ;AAAA,QAC3B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,UAAU;AAAA,QAC7B;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACR,eAAA;AAAA,YACH,KAAK,MAAM,aAAa,QAAQ,YAAY;AAAA,UAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACZ,mBAAS,cAAc,oBAAoB,EAAwB,MAAM;AAAA,QAC5E;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,SAAS,MAAM;AACb,eAAK,YAAY,OAAO;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,aAAS,KAAK,iBAAiB,SAAS,CAAC,MAAM;AAC1C,UAAA,EAAE,QAAQ,UAAU;AACpB,UAAE,OAAuB,KAAK;AAC/B,iBAAS,KAAK,MAAM;AAAA,MACtB,WACQ,KAAK,MAAM,OAAO,aAAa,SAAS,kBAAkB,SAAS,MAAM;AAC/E,cAAM,WAAW,UAAU,KAAK,CAACA,cAAa;AACpCA,iBAAAA,UAAS,QAAQ,EAAE;AAAA,QAC7B,CAAC;AAED,YAAG,UAAU;AACN,eAAA,SAAS,aAAa,KAAK;AAChC,mBAAS,QAAQ;AAAA,QACnB;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,WAAW,gBAAgB;AACjC,QAAG,YAAY,OAAO,QAAQ,0BAA0B,WAAW,+BAA+B,GAAG;AAC9F,WAAA,aAAa,IAAI,WAAW;AACjC,mBAAa,UAAU,CAAA,aAAY,KAAK,eAAe,QAAQ,CAAC;AACzC,6BAAA;AAAA,IACzB,OAAO;AACL,UAAG,UAAU;AACY,+BAAA;AAAA,MACzB;AACK,WAAA,WAAW,KAAK,CAAO,QAAA;AAC1B,YAAG,KAAK;AACN,kBAAQ,IAAI,kDAAkD;AACzD,eAAA,aAAa,IAAI,WAAW;AAAA,QACnC;AACK,aAAA,WAAW,YAAY,CAAA,aAAY,KAAK,eAAe,UAAU,EAAC,aAAa,KAAI,CAAC,CAAC;AAEvF,YAAA,MAAM,QAAQ,GAAG;AAClB,gBAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AACnD,gBAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AAAA,QAC3D;AAAA,MACF,CAAC;AAAA,IACH;AAEG,QAAA,MAAM,QAAQ,GAAG;AAClB,YAAM,IAAI,YAAY,iBAAiB,KAAK,aAAa;AACzD,YAAM,IAAI,YAAY,cAAc,KAAK,UAAU;AAAA,IACrD;AAEA,SAAK,QAAQ;AAAA,MACX,QAAQ,CAAC;AAAA,MACT,OAAO,CAAC;AAAA,MACR,UAAU,MAAM;AAAA,MAChB,oBAAoB;AAAA,MACpB,SAAS,CAAC;AAAA,MACV,cAAc,CAAC;AAAA,MACf,UAAU;AAAA,MACV,MAAM;AAAA,MACN,SAAS;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,UACN,KAAK;AAAA,UACL,KAAK;AAAA,QACP;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA;AAAA,QAER,OAAO;AAAA,MACT;AAAA,MACA,wBAAwB;AAAA,QACtB,oBAAoB;AAAA,QACpB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,MACzB;AAAA,MACA,wBAAwB;AAAA,QACtB,cAAc;AAAA,MAChB;AAAA,MACA,YAAY;AAAA,IACd;AAEK,SAAA,eAAe,IAAI,aAAa;AAAA,MACnC,sBAAsB,CAAK,MAAA,KAAK,SAAS,EAAE,cAAc,EAAE,CAAC;AAAA,IAC9D,CAAC;AAAA,EACH;AAAA,EAEA,iBAAiB,CAAC,MAAqB;AACrC,QAAG,UAAU,SAAS,YAAY,EAAE,QAAQ,KAAK,KAAK,GAAG;AACvD,UAAG,EAAE,WAAW,EAAE,YAAY,EAAE,YAAY,IAAI;AAC9C,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF,OACK;AACH,UAAG,EAAE,WAAW,EAAE,YAAY,IAAI;AAChC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd,WACQ,EAAE,WAAW,EAAE,YAAY,IAAI;AACrC,UAAE,eAAe;AACjB,aAAK,OAAO;AAAA,MACd;AAAA,IACF;AAAA,EACF;AAAA,EAEA,oBAAoB;AACX,WAAA,iBAAiB,WAAW,KAAK,cAAc;AAAA,EACxD;AAAA,EAEA,uBAAuB;AACd,WAAA,oBAAoB,WAAW,KAAK,cAAc;AAAA,EAC3D;AAAA,EAEA,UAAU,eAAkD;AACrD,SAAA,WAAW,KAAK,aAAa;AAAA,EACpC;AAAA,EAEA,YAAY,aAAqB;AAC/B,UAAM,WAAoC,KAAK,MAAM,SAAS,YAAY,CAAC;AAC3E,UAAM,cAAc,SAAS,oCAAoC,KAAK,OAAO;AAEvE,UAAA,WAAY,OAAO,gBAAgB,WAAW,YAAY,QAAQ,SAAS,WAAW,IAAG;AAC/F,2BAAuB,UAAU,CAAS,UAAA;AACnC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,YAAY,SAAiB;AAC3B,2BAAuB,SAAS,CAAS,UAAA;AAClC,WAAA,SAAS,EAAE,MAAM,eAAe,KAAK,MAAM,MAAM,UAAU,KAAK,EAAC,CAAC;AAAA,IACzE,CAAC;AAAA,EACH;AAAA,EAEA,2BAA2B,CAAC,UAAkB,UAAe;AAE3D,QACE,aAAa,uBACb,UAAU,IAAI,KAAK,MAAM,UAAU,CAAC,YAAY,mBAAmB,GAAG,QAAQ,GAC9E;AACA,WAAK,SAAS;AAAA,QACZ,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAEA,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,UAAU;AAAA,QACR,GAAI,KAAK,MAAM,SAAiB;AAAA,QAChC,CAAC,QAAQ,GAAG;AAAA,MACd;AAAA,IACF;AAEA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAA6C,OAAyB,CAAC,MAAM;AACtF,WAAA;AAAA,MACL,MAAM;AAAA,MACN,aAAa;AAAA,MACb,aAAa;AAAA,MACb,GAAG;AAAA,IACL;AAKA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEA,QAAI,SAAS,UAAU,OAAO,SAAS,WAAW,UAAU;AAC1D,eAAS,SAAS,oBAAoB,SAAS,QAAQ,QAAQ;AAAA,IACjE;AAEW,eAAA,CAAC,WAAW,MAAM,KAAK,OAAO,QAAQ,SAAS,OAAO,GAAG;AAClE,UAAI,UAAU,SAAS,UAAU,OAAO,OAAO,QAAQ,UAAU;AAC/D,eAAO,MAAM,oBAAoB,OAAO,KAAK,QAAQ;AAAA,MACvD;AAAA,IACF;AAGA,QAAI,KAAK,aAAa;AACpB,WAAK,uBAAuB,QAAQ;AAAA,IACtC;AAEA,UAAM,SAA4B,iBAAiB,QAAQ,KAAK,CAAC;AAIjE,UAAM,cAA2C,CAAC;AAC9C,QAAA,YAAY,SAAS,QAAQ;AACzB,YAAA,cAAc,IAAI,OAAO,IAAI;AACnC,eAAS,OAAO,QAAQ,CAAC,OAAO,UAAU;AACxC,YAAI,MAAM,OAAO,MAAM,YAAY,IAAI,MAAM,EAAE,GAAG;AAChD,gBAAM,QAAQ,IAAI;AAAA,YAChB,UAAU,KAAK;AAAA,UACjB;AACA,sBAAY,KAAK,KAAK;AAAA,QACxB;AACY,oBAAA,IAAI,MAAM,IAAI,IAAI;AAAA,MAChC,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,YAAY,OAAO,MAAM,EAAE,IAAI,CAAS,UAAA;AAE3D,YAAM,WAAW,MAAM,QAAQ,MAAM,iEAAiE;AACtG,UAAI,UAAU;AACZ,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAGA,YAAM,qBAAqB,MAAM,QAAQ,MAAM,8CAA8C;AAC7F,UAAI,oBAAoB;AACtB,cAAM,CAAC,EAAE,OAAO,OAAO,IAAI;AACpB,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB,KAAK;AAAA,cACL;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAEA,YAAM,aAAa,MAAM,QAAQ,MAAM,0CAA0C;AACjF,UAAI,YAAY;AACd,cAAM,CAAC,EAAE,OAAO,OAAO,UAAU,OAAO,IAAI;AACtC,cAAA,MAAO,SAAS,WAAY,CAAC,OAAO,QAAQ,EAAE,KAAK,GAAG,IAAI;AACzD,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,UACf,QAAQ;AAAA,YACN,MAAM;AAAA,YACN,MAAM;AAAA,cACJ,OAAO,SAAS,OAAO,EAAE;AAAA,cACzB;AAAA,cACA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF,OACK;AACI,eAAA;AAAA,UACL,SAAS,MAAM;AAAA,QACjB;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,gBAAgD;AAChD,QAAA,OAAO,SAAS,GAAG;AACrB,sBAAgB,UAAU,QAAQ;AAElC,aAAO,QAAQ,CAAS,UAAA;AAChB,cAAA,EAAC,QAAO,IAAI;AAClB,YAAI,SAAS;AACP,cAAA;AACF,kBAAM,UAAU,QAAQ,MAAM,GAAG,EAAE,CAAC;AAEpC,kBAAM,YAAY,QAAQ,MAAM,qBAAqB,EAAG,CAAC;AACzD,kBAAM,eAAe,SAAS;AAAA,UAChC,SACO,KAAK;AACV,oBAAQ,KAAK,GAAG;AAAA,UAClB;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AACA,QAAG,SAAS,WAAW,KAAK,MAAM,SAAS,QAAQ;AAC5C,WAAA,YAAY,SAAS,MAAgB;AAAA,IAC5C;AAEA,QAAI,KAAK,aAAa;AACf,WAAA,cAAc,YAAY,QAAQ;AAAA,IACzC;AACA,QAAI,KAAK,MAAM;AACb,WAAK,UAAU,QAA6C;AAAA,IAC9D;AAEA,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,IACV,GAAG,MAAM;AACP,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACrB,CAAC;AAAA,EAEH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAE5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAM;AACP,UAAA,cAAc,KAAK,cAAc,KAAK;AAC5C,UAAM,WAAW,aAAa,KAAK,MAAM,UAAU,WAAW;AAC9D,SAAK,eAAe,aAAa,EAAC,aAAa,MAAK,CAAC;AACrD,SAAK,SAAS;AAAA,MACZ,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAAA,EAEA,cAAc,CAAC,SAAkB;AAC3B,QAAA,EAAE,UAAU,SAAS,IAAI;AACzB,QAAA,SAAS,KAAK,MAAM,SAAS;AACjC,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,eAAW,MAAM,UAAU,GAAG,OAAO,SAAO,CAAC;AAC7C,QAAG,aAAa,SAAU;AAEtB,QAAA,aAAa,KAAK,MAAM,oBAAoB;AAC9C,WAAK,SAAS;AAAA,QACZ,oBAAoB;AAAA,MACtB,CAAC;AAAA,IACH;AAES,aAAA,OAAO,MAAM,CAAC;AACN,qBAAA,QAAQ,UAAU,QAAQ;AAC3C,SAAK,eAAe,MAAM;AAAA,EAC5B;AAAA,EAEA,iBAAiB,CAAC,kBAAwC;AACxD,UAAM,eAAe;AAAA,MACnB,GAAG,KAAK,MAAM;AAAA,MACd,QAAQ;AAAA,IACV;AACA,SAAK,eAAe,YAAY;AAAA,EAClC;AAAA,EAEA,iBAAiB,CAAC,UAAkB;AAC5B,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,kBAAkB,OAAO,MAAM,CAAC;AACtB,oBAAA,OAAO,OAAO,CAAC;AAC/B,SAAK,eAAe,eAAe;AAAA,EACrC;AAAA,EAEA,cAAc,CAAC,UAAkB;AACzB,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,cAAc,UAAU,cAAc,KAAK,CAAC;AACtC,gBAAA,KAAK,YAAY,KAAK;AACpB,kBAAA,OAAO,OAAO,GAAG,WAAW;AAC1C,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,0BAA0B,CAAC,UAAkB;AACrC,UAAA,SAAS,KAAK,MAAM,SAAS;AAC7B,UAAA,gBAAgB,OAAO,MAAM,CAAC;AAEpC,UAAM,QAAQ,EAAE,GAAG,cAAc,KAAK,EAAE;AAClC,UAAA,gBAAgB,YAAY,QAAQ,EAAC,GAAG,MAAM,OAAM,IAAI,CAAC;AAC/D,kBAAc,aAAa,cAAc,eAAe,SAAS,YAAY;AAE7E,UAAM,SAAS;AACf,kBAAc,KAAK,IAAI;AACvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAGA,kBAAkB,CAAC,OAAe,QAAgB,UAAkB;AAClE,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAAA,MACrB,GAAG,cAAc,KAAK;AAAA,MACtB,IAAI;AAAA,IACN;AAEA,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,iBAAiB,CAAC,OAAe,UAA8B;AAC7D,UAAM,gBAAgB,KAAK,MAAM,SAAS,OAAO,MAAM,CAAC;AACxD,kBAAc,KAAK,IAAI;AAEvB,SAAK,eAAe,aAAa;AAAA,EACnC;AAAA,EAEA,cAAc,CAAC,aAAuB;AACpC,SAAK,SAAS;AAAA,MACZ,UAAU;AAAA,IACZ,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,mBAAmB,CAAC,aAAgD;AAC5D,UAAA,WAAoC,SAAS,YAAY,CAAC;AAC7D,QAAA,SAAS,mBAAmB,MAAM,QAAW;AAC9C,YAAM,eAAe;AAAA,QACnB,GAAG;AAAA,QACH,UAAU;AAAA,UACR,GAAG,SAAS;AAAA,UACZ,qBAAqB;AAAA,QACvB;AAAA,MACF;AACO,aAAA;AAAA,IACT,OAAO;AACE,aAAA;AAAA,IACT;AAAA,EACF;AAAA,EAEA,YAAY,CAAC,UAA6C,eAA4C;AAC/F,SAAA,SAAS,EAAC,WAAsB,CAAC;AAC3B,eAAA,KAAK,iBAAiB,QAAQ;AACzC,SAAK,eAAe,QAAQ;AAAA,EAC9B;AAAA,EAEA,eAAe;AACb,UAAM,aAAmC,CAAC;AAEhC,eAAA,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,MAAM,SAAS,OAAO,GAAG;AACnE,UACE,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,SAAS,GAAG,KAC7D,IAAI,SAAS,YACb,OAAO,UAAU,eAAe,KAAK,KAAK,KAAK,GAC/C;AACA,mBAAW,GAAG,IAAI;AAAA,UAChB,MAAM,IAAI;AAAA,UACV,QAAQ,CAAC;AAAA,QACX;AAEA,YAAI,MAAM,IAAI;AAEV,YAAA;AACF,gBAAM,oBAAoB,KAAM,KAAK,MAAM,QAAQ;AAAA,QACrD,SAAQ,KAAK;AACH,kBAAA,KAAK,mCAAmC,GAAG;AAAA,QACrD;AAEM,cAAA,kBAAkB,CAAC,SAAa;AACpC,cAAG,CAAC,OAAO,UAAU,eAAe,KAAK,MAAM,eAAe,GAAG;AAC/D;AAAA,UACF;AAGA,gBAAM,UAAU,OAAO,OAAO,CAAC,GAAG;AAAA,YAChC,CAAC,GAAG,GAAG,KAAK,MAAM,QAAQ,GAAG;AAAA,UAC/B,CAAC;AAES,qBAAA,SAAS,KAAK,eAAe;AACpC,oBAAQ,GAAG,EAAU,OAAO,KAAK,MAAM,EAAE;AAAA,UAC5C;AAEA,eAAK,SAAS;AAAA,YACZ;AAAA,UACF,CAAC;AAAA,QACH;AAEI,YAAA,IAAK,WAAW,YAAY,GAAG;AAChC,cAAI,QAAQ,IAAK,OAAO,EAAE,CAAC,EAAG,YAAY,EAAE,EAC1C,KAAK,CAAQ,SAAA,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL,OAAO;AACL,gBAAM,KAAM;AAAA,YACV,MAAM;AAAA,UACR,CAAC,EACE,KAAK,CAAA,aAAY,SAAS,KAAK,CAAC,EAChC,KAAK,UAAQ,gBAAgB,IAAI,CAAC,EAClC,MAAM,CAAO,QAAA;AACJ,oBAAA,MAAM,sCAAsC,KAAK,GAAG;AAAA,UAC9D,CAAC;AAAA,QACL;AAAA,MACF,OACK;AACQ,mBAAA,GAAG,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,KAAK,MAAM,SAAS,QAAQ,GAAG;AAAA,MAC9E;AAAA,IACF;AAEA,QAAG,CAAC,QAAQ,KAAK,MAAM,SAAS,UAAU,GAAG;AAC3C,cAAQ,MAAM,iBAAiB;AAC/B,WAAK,SAAS;AAAA,QACZ,SAAS;AAAA,MACX,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EAEA,eAAgB;AACd,UAAM,WAAmC,KAAK,MAAM,SAAS,YAAY,CAAC;AACnE,WAAA,SAAS,mBAAmB,KAAK;AAAA,EAC1C;AAAA,EAEA,cAAc,CAAC,YAMT;AACJ,SAAK,SAAS;AAAA,MACZ;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,cAAc;AACZ,UAAM,EAAC,UAAU,cAAa,IAAI,KAAK;AAEvC,UAAM,WAAW;AAAA,MACf,UAAW,iBAAiB;AAAA,MAC5B,qBAAqB,CAACC,cAAiC;AAC9C,eAAA,MAAM,oBAAoBA,WAAU;AAAA,UACzC,eAAe;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,cAAc,CAAC,MAAkB;AAC1B,aAAA,aAAa,WAAW,EAAE,GAAG;AAClC,aAAK,aAAa;AAAA,MACpB;AAAA,IACF;AAEM,UAAA,WAAW,KAAK,aAAa;AAE/B,QAAA;AAGJ,QAAG,aAAa,MAAM;AACP,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACX,GAAG;AAAA,UACJ,UAAU,KAAK;AAAA,UACf,cAAc,KAAK,MAAM,uBAAuB;AAAA,UAChD,eAAe,KAAK;AAAA,QAAA;AAAA,MACtB;AAAA,IACF,OAAO;AAEQ,mBAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UAAe,GAAG;AAAA,UAC9B,UAAU,KAAK;AAAA,UACf,SAAS,KAAK,MAAM;AAAA,UACpB,oBAAoB,KAAK,MAAM,aAAa;AAAA,UAC5C,kBAAkB,KAAK,MAAM,SAAS,OAAO,KAAK,MAAM,kBAAkB;AAAA,UAC1E,eAAe,KAAK;AAAA,QAAA;AAAA,MAAe;AAAA,IACvC;AAEI,QAAA;AACJ,QAAG,KAAK,MAAM,SAAS,MAAM,UAAU,GAAG;AACxC,mBAAa,KAAK,MAAM,SAAS,QAAQ,YAAY,EAAE;AAAA,IACzD;AACA,UAAM,eAAkC,CAAC;AACzC,QAAI,YAAY;AACD,mBAAA,SAAS,SAAS,UAAU;AAAA,IAC3C;AAEO,WAAA,oBAAC,SAAI,OAAO,cAAc,WAAU,2BAA0B,eAAY,sBAC9E,UACH,WAAA,CAAA;AAAA,EACF;AAAA,EAEA,gBAAgB,MAAM;AACpB,UAAM,EAAC,UAAU,UAAU,OAAM,IAAI,KAAK;AACpC,UAAA,EAAC,mBAAkB,IAAI,KAAK;AAClC,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,UAAU,KAAK,KAAK,UAAU,QAAQ,CAAC;AAC7C,QAAI,aAAa,IAAI,SAAS,GAAG,OAAO,IAAI,kBAAkB,EAAE;AAEhE,UAAM,aAAa,OAAO,QAAQ,MAAM,EACrC,IAAI,CAAC,CAAC,KAAK,GAAG,MAAO,QAAQ,OAAO,MAAM,IAAK,EAC/C,OAAO,CAAA,QAAO,QAAQ,IAAI;AAEzB,QAAA,WAAW,SAAS,GAAG;AACzB,UAAI,aAAa,IAAI,SAAS,WAAW,KAAK,GAAG,CAAC;AAAA,IACpD,OACK;AACC,UAAA,aAAa,OAAO,OAAO;AAAA,IACjC;AAEA,QAAI,aAAa,OAAO;AAClB,UAAA,aAAa,OAAO,MAAM;AAAA,IAChC,WACS,aAAa,WAAW;AAC3B,UAAA,aAAa,IAAI,QAAQ,SAAS;AAAA,IACxC;AAEA,YAAQ,aAAa,EAAC,mBAAkB,GAAG,YAAY,IAAI,IAAI;AAAA,EACjE;AAAA,EAEA,yBAAyB,CAAC,aAAiC;AACzD,UAAM,MAAM,IAAI,IAAI,SAAS,IAAI;AACjC,UAAM,aAAa,IAAI,aAAa,IAAI,OAAO;AAE3C,QAAA,cAAc,eAAe,IAAI;AAC7B,YAAA,SAAS,WAAW,MAAM,GAAG;AACnC,YAAM,WAAqC,CAAC;AAC5C,aAAO,QAAQ,CAAa,cAAA;AAC1B,iBAAS,SAAS,IAAI;AAAA,MACxB,CAAC;AAED,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,UACN,GAAG,KAAK,MAAM;AAAA,UACd,GAAG;AAAA,QACL;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,MAAM;AACpC,QAAA,QAAQ,SAAS,IAAI;AACvB,WAAK,YAAY,IAAgB;AAAA,IACnC;AAEA,UAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzC,QAAI,MAAM;AACJ,UAAA;AACI,cAAA,QAAQ,KAAK,MAAM,GAAG;AACtB,cAAA,CAAC,SAAS,kBAAkB,IAAI;AAAA,UACpC,MAAM,CAAC;AAAA,UACP,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,QACvB;AAEA,YAAI,QAAQ;AACZ,YAAI,YAAY,KAAK;AACnB,gBAAM,iBAAiB,KAAK,KAAK,UAAU,QAAQ,CAAC;AACpD,cAAI,mBAAmB,SAAS,SAAS,EAAE,GAAG;AACpC,oBAAA;AAAA,UACV;AAAA,QACF;AACA,YAAI,OAAO;AACT,eAAK,SAAS;AAAA,YACZ;AAAA,YACA,yBAAyB,SAAS,OAAO,kBAAkB,EAAE;AAAA,UAC/D,CAAC;AAAA,QACH;AAAA,MACF,SACO,KAAK;AACV,gBAAQ,KAAK,GAAG;AAAA,MAClB;AAAA,IACF;AAAA,EACF;AAAA,EAEA,gBAAgB,CAAC,UAAkB;AACjC,SAAK,SAAS;AAAA,MACZ,oBAAoB;AAAA,MACpB,yBAAyB,KAAK,MAAM,SAAS,OAAO,KAAK,EAAE;AAAA,IAC7D,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,SAAS,WAAqC,OAAgB;AAC5D,SAAK,SAAS;AAAA,MACZ,QAAQ;AAAA,QACN,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,SAAS,GAAG;AAAA,MACf;AAAA,IACF,GAAG,KAAK,aAAa;AAAA,EACvB;AAAA,EAEA,YAAY,WAAqC;AAC/C,SAAK,SAAS,WAAW,CAAC,KAAK,MAAM,OAAO,SAAS,CAAC;AAAA,EACxD;AAAA,EAEA,gBAAgB,YAAyC;AAClD,SAAA,SAAS,EAAC,WAAsB,CAAC;AAAA,EACxC;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAmB;AAC3F,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,0BAA0B,CAAC,KAA+C,UAAe;AACvF,SAAK,SAAS;AAAA,MACZ,wBAAwB;AAAA,QACtB,GAAG,KAAK,MAAM;AAAA,QACd,CAAC,GAAG,GAAG;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EAEA,SAAS;AACP,UAAM,SAAS,KAAK,MAAM,SAAS,UAAU,CAAC;AACxC,UAAA,gBAAgB,OAAO,SAAS,IAAI,OAAO,KAAK,MAAM,kBAAkB,IAAI;AAElF,UAAM,UAAU;AAAA,MAAC;AAAA,MAAA;AAAA,QACf,UAAU,KAAK,aAAa;AAAA,QAC5B,UAAU,KAAK,MAAM;AAAA,QACrB,UAAU,KAAK,MAAM;AAAA,QACrB,oBAAoB,KAAK,MAAM,aAAa;AAAA,QAC5C,SAAS,KAAK,MAAM;AAAA,QACpB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,eAAe,KAAK;AAAA,QACpB,eAAe,KAAK,YAAY,KAAK,IAAI;AAAA,MAAA;AAAA,IAC3C;AAEA,UAAM,YAAY;AAAA,MAAC;AAAA,MAAA;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,gBAAgB,KAAK;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,oBAAoB,KAAK,MAAM;AAAA,QAC/B;AAAA,QACA,SAAS,KAAK,MAAM;AAAA,QACpB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,IACrB;AAEA,UAAM,cAAc,gBAAgB;AAAA,MAAC;AAAA,MAAA;AAAA,QAEnC,OAAO;AAAA,QACP,YAAY,KAAK,MAAM;AAAA,QACvB,cAAc,KAAK,MAAM,qBAAqB;AAAA,QAC9C,aAAa,KAAK,MAAM,uBAAuB,KAAK,MAAM,SAAS,OAAO,SAAO;AAAA,QACjF,SAAS,KAAK,MAAM;AAAA,QACpB,cAAc,KAAK,MAAM;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,QACjB,aAAa,KAAK;AAAA,QAClB,gBAAgB,KAAK;AAAA,QACrB,gBAAgB,KAAK;AAAA,QACrB,aAAa,KAAK;AAAA,QAClB,yBAAyB,KAAK;AAAA,QAC9B,iBAAiB,KAAK;AAAA,QACtB,QAAQ,KAAK,MAAM;AAAA,MAAA;AAAA,MAdd,KAAK,MAAM;AAAA,IAelB,IAAK;AAEC,UAAA,cAAe,KAAK,MAAM,OAAO,SAAS,KAAK,MAAM,MAAM,SAAU,IAAI;AAAA,MAAC;AAAA,MAAA;AAAA,QAC9E,cAAc;AAAA,QACd,oBAAoB,KAAK,MAAM;AAAA,QAC/B,eAAe,KAAK;AAAA,QACpB,UAAU,KAAK,MAAM;AAAA,QACrB,QAAQ,KAAK,MAAM;AAAA,QACnB,OAAO,KAAK,MAAM;AAAA,MAAA;AAAA,IACpB,IAAK;AAGC,UAAA,8BAAU,OACd,EAAA,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,aAAa;AAAA,UAC5B,wBAAwB,KAAK,MAAM;AAAA,UACnC,wBAAwB,KAAK,MAAM;AAAA,UACnC,yBAAyB,KAAK;AAAA,UAC9B,yBAAyB,KAAK;AAAA,UAC9B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,OAAO;AAAA,UACjD,SAAS,KAAK,MAAM;AAAA,QAAA;AAAA,MACtB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,WAAW;AAAA,QAAA;AAAA,MACvD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,0BAA0B,KAAK;AAAA,UAC/B,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,UAAU;AAAA,QAAA;AAAA,MACtD;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,QAAQ;AAAA,UAClD,YAAY,KAAK,MAAM;AAAA,UACvB,iBAAiB,KAAK;AAAA,QAAA;AAAA,MACxB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,aAAa,KAAK;AAAA,UAClB,cAAc,KAAK,YAAY,KAAK,MAAM,MAAM;AAAA,UAChD,YAAY,KAAK,MAAM;AAAA,QAAA;AAAA,MACzB;AAAA,MACA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,UAAU,KAAK,MAAM;AAAA,UACrB,gBAAgB,KAAK;AAAA,UACrB,QAAQ,KAAK,MAAM,OAAO;AAAA,UAC1B,cAAc,KAAK,YAAY,KAAK,MAAM,SAAS;AAAA,QAAA;AAAA,MACrD;AAAA,IACF,EAAA,CAAA;AAEO,WAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA,KAAK,KAAK,YAAY;AAAA,QACtB,QAAQ;AAAA,QACR;AAAA,MAAA;AAAA,IACF;AAAA,EACF;AACF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bafcb93873c2a71cab2bdafeb2ce6a3195766cd8"},s=t[r]||(t[r]={});(!s[n]||s[n].hash!==e)&&(s[n]=i);var l=s[n];return we=function(){return l},l}we();we().s[0]++;window.Buffer=vG.Buffer;function Cb(n,e){we().f[0]++;const t=(we().s[1]++,n.match(/\.tilehosting\.com/)),r=(we().s[2]++,n.match(/\.maptiler\.com/)),i=(we().s[3]++,n.match(/\.thunderforest\.com/));if(we().s[4]++,we().b[1][0]++,t||(we().b[1][1]++,r)){we().b[0][0]++;const s=(we().s[5]++,_c.getAccessToken("openmaptiles",e,{allowFallback:!0}));if(we().s[6]++,s)return we().b[2][0]++,we().s[7]++,n.replace("{key}",s);we().b[2][1]++}else if(we().b[0][1]++,we().s[8]++,i){we().b[3][0]++;const s=(we().s[9]++,_c.getAccessToken("thunderforest",e,{allowFallback:!0}));if(we().s[10]++,s)return we().b[4][0]++,we().s[11]++,n.replace("{key}",s);we().b[4][1]++}else return we().b[3][1]++,we().s[12]++,n}function vD(n,e,t){return we().f[1]++,we().s[13]++,{...n,$root:{...n.$root,[e]:{...n.$root[e],values:t}}}}class Wce extends sr.Component{constructor(t){we().f[2]++,we().s[14]++;super(t);Pn(this,"revisionStore");Pn(this,"styleStore");Pn(this,"layerWatcher");Pn(this,"handleKeyPress",(we().s[65]++,t=>{we().f[18]++,we().s[66]++,navigator.platform.toUpperCase().indexOf("MAC")>=0?(we().b[18][0]++,we().s[67]++,we().b[20][0]++,t.metaKey&&(we().b[20][1]++,t.shiftKey)&&(we().b[20][2]++,t.keyCode===90)?(we().b[19][0]++,we().s[68]++,t.preventDefault(),we().s[69]++,this.onRedo()):(we().b[19][1]++,we().s[70]++,we().b[22][0]++,t.metaKey&&(we().b[22][1]++,t.keyCode===90)?(we().b[21][0]++,we().s[71]++,t.preventDefault(),we().s[72]++,this.onUndo()):we().b[21][1]++)):(we().b[18][1]++,we().s[73]++,we().b[24][0]++,t.ctrlKey&&(we().b[24][1]++,t.keyCode===90)?(we().b[23][0]++,we().s[74]++,t.preventDefault(),we().s[75]++,this.onUndo()):(we().b[23][1]++,we().s[76]++,we().b[26][0]++,t.ctrlKey&&(we().b[26][1]++,t.keyCode===89)?(we().b[25][0]++,we().s[77]++,t.preventDefault(),we().s[78]++,this.onRedo()):we().b[25][1]++))}));Pn(this,"onChangeMetadataProperty",(we().s[89]++,(t,r)=>{we().f[26]++,we().s[90]++,we().b[31][0]++,t==="maputnik:renderer"&&(we().b[31][1]++,r!==bG(this.state.mapStyle,["metadata","maputnik:renderer"],"mlgljs"))?(we().b[30][0]++,we().s[91]++,this.setState({mapState:"map"})):we().b[30][1]++;const i=(we().s[92]++,{...this.state.mapStyle,metadata:{...this.state.mapStyle.metadata,[t]:r}});we().s[93]++,this.onStyleChanged(i)}));Pn(this,"onStyleChanged",(we().s[94]++,(t,r=(we().b[32][0]++,{}))=>{we().f[27]++,we().s[95]++,r={save:!0,addRevision:!0,initialLoad:!1,...r},we().s[96]++,we().b[34][0]++,t.glyphs&&(we().b[34][1]++,typeof t.glyphs=="string")?(we().b[33][0]++,we().s[97]++,t.glyphs=Cb(t.glyphs,t)):we().b[33][1]++,we().s[98]++,we().b[36][0]++,t.sprite&&(we().b[36][1]++,typeof t.sprite=="string")?(we().b[35][0]++,we().s[99]++,t.sprite=Cb(t.sprite,t)):we().b[35][1]++,we().s[100]++;for(const[p,v]of Object.entries(t.sources))we().s[101]++,we().b[38][0]++,v&&(we().b[38][1]++,"url"in v)&&(we().b[38][2]++,typeof v.url=="string")?(we().b[37][0]++,we().s[102]++,v.url=Cb(v.url,t)):we().b[37][1]++;we().s[103]++,r.initialLoad?(we().b[39][0]++,we().s[104]++,this.getInitialStateFromUrl(t)):we().b[39][1]++;const i=(we().s[105]++,we().b[40][0]++,Kf(t)||(we().b[40][1]++,[])),s=(we().s[106]++,[]);if(we().s[107]++,we().b[42][0]++,t&&(we().b[42][1]++,t.layers)){we().b[41][0]++;const p=(we().s[108]++,new window.Map);we().s[109]++,t.layers.forEach((v,x)=>{if(we().f[28]++,we().s[110]++,we().b[44][0]++,v.id===""&&(we().b[44][1]++,p.has(v.id))){we().b[43][0]++;const B=(we().s[111]++,new Error(`layers[${x}]: duplicate layer id [empty_string], previously used`));we().s[112]++,s.push(B)}else we().b[43][1]++;we().s[113]++,p.set(v.id,!0)})}else we().b[41][1]++;const l=(we().s[114]++,s.concat(i).map(p=>{we().f[29]++;const v=(we().s[115]++,p.message.match(/layers\[(\d+)\]: (duplicate layer id "?(.*)"?, previously used)/));if(we().s[116]++,v){we().b[45][0]++;const[,T,P]=(we().s[117]++,v);return we().s[118]++,{message:p.message,parsed:{type:"layer",data:{index:parseInt(T,10),key:"id",message:P}}}}else we().b[45][1]++;const x=(we().s[119]++,p.message.match(/layers\[(\d+)\]: (source "(?:.*)" not found)/));if(we().s[120]++,x){we().b[46][0]++;const[,T,P]=(we().s[121]++,x);return we().s[122]++,{message:p.message,parsed:{type:"layer",data:{index:parseInt(T,10),key:"source",message:P}}}}else we().b[46][1]++;const B=(we().s[123]++,p.message.match(/layers\[(\d+)\]\.(?:(\S+)\.)?(\S+): (.*)/));if(we().s[124]++,B){we().b[47][0]++;const[,T,P,U,j]=(we().s[125]++,B),N=(we().s[126]++,we().b[49][0]++,P&&(we().b[49][1]++,U)?(we().b[48][0]++,[P,U].join(".")):(we().b[48][1]++,U));return we().s[127]++,{message:p.message,parsed:{type:"layer",data:{index:parseInt(T,10),key:N,message:j}}}}else return we().b[47][1]++,we().s[128]++,{message:p.message}}));let o=(we().s[129]++,void 0);we().s[130]++,i.length>0?(we().b[50][0]++,we().s[131]++,o=U8(t),we().s[132]++,i.forEach(p=>{we().f[30]++;const{message:v}=(we().s[133]++,p);if(we().s[134]++,v){we().b[51][0]++,we().s[135]++;try{const x=(we().s[136]++,v.split(":")[0]),B=(we().s[137]++,x.match(/^\S+?\[\d+\]\.[^[]+/)[0]);we().s[138]++,j2.unset(o,B)}catch(x){we().s[139]++,console.warn(x)}}else we().b[51][1]++})):we().b[50][1]++,we().s[140]++,t.glyphs!==this.state.mapStyle.glyphs?(we().b[52][0]++,we().s[141]++,this.updateFonts(t.glyphs)):we().b[52][1]++,we().s[142]++,t.sprite!==this.state.mapStyle.sprite?(we().b[53][0]++,we().s[143]++,this.updateIcons(t.sprite)):we().b[53][1]++,we().s[144]++,r.addRevision?(we().b[54][0]++,we().s[145]++,this.revisionStore.addRevision(t)):we().b[54][1]++,we().s[146]++,r.save?(we().b[55][0]++,we().s[147]++,this.saveStyle(t)):we().b[55][1]++,we().s[148]++,this.setState({mapStyle:t,dirtyMapStyle:o,errors:l},()=>{we().f[31]++,we().s[149]++,this.fetchSources(),we().s[150]++,this.setStateInUrl()})}));Pn(this,"onUndo",(we().s[151]++,()=>{we().f[32]++;const t=(we().s[152]++,this.revisionStore.undo()),r=(we().s[153]++,Cce(this.state.mapStyle,t));we().s[154]++,this.onStyleChanged(t,{addRevision:!1}),we().s[155]++,this.setState({infos:r})}));Pn(this,"onRedo",(we().s[156]++,()=>{we().f[33]++;const t=(we().s[157]++,this.revisionStore.redo()),r=(we().s[158]++,_ce(this.state.mapStyle,t));we().s[159]++,this.onStyleChanged(t,{addRevision:!1}),we().s[160]++,this.setState({infos:r})}));Pn(this,"onMoveLayer",(we().s[161]++,t=>{we().f[34]++;let{oldIndex:r,newIndex:i}=(we().s[162]++,t),s=(we().s[163]++,this.state.mapStyle.layers);if(we().s[164]++,r=j8(r,0,s.length-1),we().s[165]++,i=j8(i,0,s.length-1),we().s[166]++,r===i){we().b[56][0]++,we().s[167]++;return}else we().b[56][1]++;we().s[168]++,r===this.state.selectedLayerIndex?(we().b[57][0]++,we().s[169]++,this.setState({selectedLayerIndex:i})):we().b[57][1]++,we().s[170]++,s=s.slice(0),we().s[171]++,wG(s,r,i),we().s[172]++,this.onLayersChange(s)}));Pn(this,"onLayersChange",(we().s[173]++,t=>{we().f[35]++;const r=(we().s[174]++,{...this.state.mapStyle,layers:t});we().s[175]++,this.onStyleChanged(r)}));Pn(this,"onLayerDestroy",(we().s[176]++,t=>{we().f[36]++;const r=(we().s[177]++,this.state.mapStyle.layers),i=(we().s[178]++,r.slice(0));we().s[179]++,i.splice(t,1),we().s[180]++,this.onLayersChange(i)}));Pn(this,"onLayerCopy",(we().s[181]++,t=>{we().f[37]++;const r=(we().s[182]++,this.state.mapStyle.layers),i=(we().s[183]++,r.slice(0)),s=(we().s[184]++,U8(i[t]));we().s[185]++,s.id=s.id+"-copy",we().s[186]++,i.splice(t,0,s),we().s[187]++,this.onLayersChange(i)}));Pn(this,"onLayerVisibilityToggle",(we().s[188]++,t=>{we().f[38]++;const r=(we().s[189]++,this.state.mapStyle.layers),i=(we().s[190]++,r.slice(0)),s=(we().s[191]++,{...i[t]}),l=(we().s[192]++,"layout"in s?(we().b[58][0]++,{...s.layout}):(we().b[58][1]++,{}));we().s[193]++,l.visibility=l.visibility==="none"?(we().b[59][0]++,"visible"):(we().b[59][1]++,"none"),we().s[194]++,s.layout=l,we().s[195]++,i[t]=s,we().s[196]++,this.onLayersChange(i)}));Pn(this,"onLayerIdChange",(we().s[197]++,(t,r,i)=>{we().f[39]++;const s=(we().s[198]++,this.state.mapStyle.layers.slice(0));we().s[199]++,s[t]={...s[t],id:i},we().s[200]++,this.onLayersChange(s)}));Pn(this,"onLayerChanged",(we().s[201]++,(t,r)=>{we().f[40]++;const i=(we().s[202]++,this.state.mapStyle.layers.slice(0));we().s[203]++,i[t]=r,we().s[204]++,this.onLayersChange(i)}));Pn(this,"setMapState",(we().s[205]++,t=>{we().f[41]++,we().s[206]++,this.setState({mapState:t},this.setStateInUrl)}));Pn(this,"setDefaultValues",(we().s[207]++,t=>{we().f[42]++;const r=(we().s[208]++,we().b[60][0]++,t.metadata||(we().b[60][1]++,{}));if(we().s[209]++,r["maputnik:renderer"]===void 0){we().b[61][0]++;const i=(we().s[210]++,{...t,metadata:{...t.metadata,"maputnik:renderer":"mlgljs"}});return we().s[211]++,i}else return we().b[61][1]++,we().s[212]++,t}));Pn(this,"openStyle",(we().s[213]++,(t,r)=>{we().f[43]++,we().s[214]++,this.setState({fileHandle:r}),we().s[215]++,t=this.setDefaultValues(t),we().s[216]++,this.onStyleChanged(t)}));Pn(this,"onMapChange",(we().s[246]++,t=>{we().f[52]++,we().s[247]++,this.setState({mapView:t})}));Pn(this,"setStateInUrl",(we().s[263]++,()=>{we().f[56]++;const{mapState:t,mapStyle:r,isOpen:i}=(we().s[264]++,this.state),{selectedLayerIndex:s}=(we().s[265]++,this.state),l=(we().s[266]++,new URL(location.href)),o=(we().s[267]++,V8(JSON.stringify(r)));we().s[268]++,l.searchParams.set("layer",`${o}~${s}`);const p=(we().s[269]++,Object.entries(i).map(([v,x])=>(we().f[57]++,we().s[270]++,x===!0?(we().b[74][0]++,v):(we().b[74][1]++,null))).filter(v=>(we().f[58]++,we().s[271]++,v!==null)));we().s[272]++,p.length>0?(we().b[75][0]++,we().s[273]++,l.searchParams.set("modal",p.join(","))):(we().b[75][1]++,we().s[274]++,l.searchParams.delete("modal")),we().s[275]++,t==="map"?(we().b[76][0]++,we().s[276]++,l.searchParams.delete("view")):(we().b[76][1]++,we().s[277]++,t==="inspect"?(we().b[77][0]++,we().s[278]++,l.searchParams.set("view","inspect")):we().b[77][1]++),we().s[279]++,history.replaceState({selectedLayerIndex:s},"Maputnik",l.href)}));Pn(this,"getInitialStateFromUrl",(we().s[280]++,t=>{we().f[59]++;const r=(we().s[281]++,new URL(location.href)),i=(we().s[282]++,r.searchParams.get("modal"));if(we().s[283]++,we().b[79][0]++,i&&(we().b[79][1]++,i!=="")){we().b[78][0]++;const o=(we().s[284]++,i.split(",")),p=(we().s[285]++,{});we().s[286]++,o.forEach(v=>{we().f[60]++,we().s[287]++,p[v]=!0}),we().s[288]++,this.setState({isOpen:{...this.state.isOpen,...p}})}else we().b[78][1]++;const s=(we().s[289]++,r.searchParams.get("view"));we().s[290]++,we().b[81][0]++,s&&(we().b[81][1]++,s!=="")?(we().b[80][0]++,we().s[291]++,this.setMapState(s)):we().b[80][1]++;const l=(we().s[292]++,r.searchParams.get("layer"));if(we().s[293]++,l){we().b[82][0]++,we().s[294]++;try{const o=(we().s[295]++,l.split("~")),[p,v]=(we().s[296]++,[o[0],parseInt(o[1],10)]);let x=(we().s[297]++,!0);if(we().s[298]++,p!=="-"){we().b[83][0]++;const B=(we().s[299]++,V8(JSON.stringify(t)));we().s[300]++,B!==parseInt(p,10)?(we().b[84][0]++,we().s[301]++,x=!1):we().b[84][1]++}else we().b[83][1]++;we().s[302]++,x?(we().b[85][0]++,we().s[303]++,this.setState({selectedLayerIndex:v,selectedLayerOriginalId:t.layers[v].id})):we().b[85][1]++}catch(o){we().s[304]++,console.warn(o)}}else we().b[82][1]++}));Pn(this,"onLayerSelect",(we().s[305]++,t=>{we().f[61]++,we().s[306]++,this.setState({selectedLayerIndex:t,selectedLayerOriginalId:this.state.mapStyle.layers[t].id},this.setStateInUrl)}));Pn(this,"onChangeOpenlayersDebug",(we().s[310]++,(t,r)=>{we().f[65]++,we().s[311]++,this.setState({openlayersDebugOptions:{...this.state.openlayersDebugOptions,[t]:r}})}));Pn(this,"onChangeMaplibreGlDebug",(we().s[312]++,(t,r)=>{we().f[66]++,we().s[313]++,this.setState({maplibreGlDebugOptions:{...this.state.maplibreGlDebugOptions,[t]:r}})}));we().s[15]++,AG(this),we().s[16]++,this.revisionStore=new Kce;const r=(we().s[17]++,new URLSearchParams(window.location.search.substring(1)));let i=(we().s[18]++,r.get("localport"));we().s[19]++,we().b[6][0]++,i==null&&(we().b[6][1]++,window.location.port!=="80")&&(we().b[6][2]++,window.location.port!=="443")?(we().b[5][0]++,we().s[20]++,i=window.location.port):we().b[5][1]++,we().s[21]++,this.styleStore=new Pce({onLocalStyleChange:o=>(we().f[3]++,we().s[22]++,this.onStyleChanged(o,{save:!1})),port:i,host:r.get("localhost")});const s=(we().s[23]++,[{key:"?",handler:()=>{we().f[4]++,we().s[24]++,this.toggleModal("shortcuts")}},{key:"o",handler:()=>{we().f[5]++,we().s[25]++,this.toggleModal("open")}},{key:"e",handler:()=>{we().f[6]++,we().s[26]++,this.toggleModal("export")}},{key:"d",handler:()=>{we().f[7]++,we().s[27]++,this.toggleModal("sources")}},{key:"s",handler:()=>{we().f[8]++,we().s[28]++,this.toggleModal("settings")}},{key:"i",handler:()=>{we().f[9]++,we().s[29]++,this.setMapState(this.state.mapState==="map"?(we().b[7][0]++,"inspect"):(we().b[7][1]++,"map"))}},{key:"m",handler:()=>{we().f[10]++,we().s[30]++,document.querySelector(".maplibregl-canvas").focus()}},{key:"!",handler:()=>{we().f[11]++,we().s[31]++,this.toggleModal("debug")}}]);we().s[32]++,document.body.addEventListener("keyup",o=>{if(we().f[12]++,we().s[33]++,o.key==="Escape")we().b[8][0]++,we().s[34]++,o.target.blur(),we().s[35]++,document.body.focus();else if(we().b[8][1]++,we().s[36]++,we().b[10][0]++,this.state.isOpen.shortcuts||(we().b[10][1]++,document.activeElement===document.body)){we().b[9][0]++;const p=(we().s[37]++,s.find(v=>(we().f[13]++,we().s[38]++,v.key===o.key)));we().s[39]++,p?(we().b[11][0]++,we().s[40]++,this.setModal("shortcuts",!1),we().s[41]++,p.handler()):we().b[11][1]++}else we().b[9][1]++});const l=(we().s[42]++,vce());we().s[43]++,we().b[13][0]++,l&&(we().b[13][1]++,window.confirm("Load style from URL: "+l+" and discard current changes?"))?(we().b[12][0]++,we().s[44]++,this.styleStore=new mD,we().s[45]++,eN(l,o=>(we().f[14]++,we().s[46]++,this.onStyleChanged(o))),we().s[47]++,dD()):(we().b[12][1]++,we().s[48]++,l?(we().b[14][0]++,we().s[49]++,dD()):we().b[14][1]++,we().s[50]++,this.styleStore.init(o=>{we().f[15]++,we().s[51]++,o?(we().b[15][0]++,we().s[52]++,console.log("Falling back to local storage for storing styles"),we().s[53]++,this.styleStore=new mD):we().b[15][1]++,we().s[54]++,this.styleStore.latestStyle(p=>(we().f[16]++,we().s[55]++,this.onStyleChanged(p,{initialLoad:!0}))),we().s[56]++,fg.enabled()?(we().b[16][0]++,we().s[57]++,fg.set("maputnik","styleStore",this.styleStore),we().s[58]++,fg.set("maputnik","revisionStore",this.revisionStore)):we().b[16][1]++})),we().s[59]++,fg.enabled()?(we().b[17][0]++,we().s[60]++,fg.set("maputnik","revisionStore",this.revisionStore),we().s[61]++,fg.set("maputnik","styleStore",this.styleStore)):we().b[17][1]++,we().s[62]++,this.state={errors:[],infos:[],mapStyle:_c.emptyStyle,selectedLayerIndex:0,sources:{},vectorLayers:{},mapState:"map",spec:ks,mapView:{zoom:0,center:{lng:0,lat:0}},isOpen:{settings:!1,sources:!1,open:!1,shortcuts:!1,export:!1,debug:!1},maplibreGlDebugOptions:{showTileBoundaries:!1,showCollisionBoxes:!1,showOverdrawInspector:!1},openlayersDebugOptions:{debugToolbox:!1},fileHandle:null},we().s[63]++,this.layerWatcher=new zce({onVectorLayersChange:o=>(we().f[17]++,we().s[64]++,this.setState({vectorLayers:o}))})}componentDidMount(){we().f[19]++,we().s[79]++,window.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){we().f[20]++,we().s[80]++,window.removeEventListener("keydown",this.handleKeyPress)}saveStyle(t){we().f[21]++,we().s[81]++,this.styleStore.save(t)}updateFonts(t){we().f[22]++;const r=(we().s[82]++,we().b[27][0]++,this.state.mapStyle.metadata||(we().b[27][1]++,{})),i=(we().s[83]++,we().b[28][0]++,r["maputnik:openmaptiles_access_token"]||(we().b[28][1]++,Dj.openmaptiles)),s=(we().s[84]++,typeof t=="string"?(we().b[29][0]++,t.replace("{key}",i)):(we().b[29][1]++,t));we().s[85]++,gce(s,l=>{we().f[23]++,we().s[86]++,this.setState({spec:vD(this.state.spec,"glyphs",l)})})}updateIcons(t){we().f[24]++,we().s[87]++,yce(t,r=>{we().f[25]++,we().s[88]++,this.setState({spec:vD(this.state.spec,"sprite",r)})})}fetchSources(){we().f[44]++;const t=(we().s[217]++,{});we().s[218]++;for(const[r,i]of Object.entries(this.state.mapStyle.sources))if(we().s[219]++,we().b[63][0]++,!Object.prototype.hasOwnProperty.call(this.state.sources,r)&&(we().b[63][1]++,i.type==="vector")&&(we().b[63][2]++,Object.prototype.hasOwnProperty.call(i,"url"))){we().b[62][0]++,we().s[220]++,t[r]={type:i.type,layers:[]};let s=(we().s[221]++,i.url);we().s[222]++;try{we().s[223]++,s=Cb(s,this.state.mapStyle)}catch(o){we().s[224]++,console.warn("Failed to setFetchAccessToken: ",o)}we().s[225]++;const l=o=>{if(we().f[45]++,we().s[226]++,Object.prototype.hasOwnProperty.call(o,"vector_layers"))we().b[64][1]++;else{we().b[64][0]++,we().s[227]++;return}const p=(we().s[228]++,Object.assign({},{[r]:this.state.sources[r]}));we().s[229]++;for(const v of o.vector_layers)we().s[230]++,p[r].layers.push(v.id);we().s[231]++,this.setState({sources:p})};we().s[232]++,s.startsWith("pmtiles://")?(we().b[65][0]++,we().s[233]++,new KE(s.substr(10)).getTileJson("").then(o=>(we().f[46]++,we().s[234]++,l(o))).catch(o=>{we().f[47]++,we().s[235]++,console.error("Failed to process sources for '%s'",s,o)})):(we().b[65][1]++,we().s[236]++,fetch(s,{mode:"cors"}).then(o=>(we().f[48]++,we().s[237]++,o.json())).then(o=>(we().f[49]++,we().s[238]++,l(o))).catch(o=>{we().f[50]++,we().s[239]++,console.error("Failed to process sources for '%s'",s,o)}))}else we().b[62][1]++,we().s[240]++,t[r]=(we().b[66][0]++,this.state.sources[r]||(we().b[66][1]++,this.state.mapStyle.sources[r]));we().s[241]++,z6(this.state.sources,t)?we().b[67][1]++:(we().b[67][0]++,we().s[242]++,console.debug("Setting sources"),we().s[243]++,this.setState({sources:t}))}_getRenderer(){we().f[51]++;const t=(we().s[244]++,we().b[68][0]++,this.state.mapStyle.metadata||(we().b[68][1]++,{}));return we().s[245]++,we().b[69][0]++,t["maputnik:renderer"]||(we().b[69][1]++,"mlgljs")}mapRenderer(){we().f[53]++;const{mapStyle:t,dirtyMapStyle:r}=(we().s[248]++,this.state),i=(we().s[249]++,{mapStyle:(we().b[70][0]++,r||(we().b[70][1]++,t)),replaceAccessTokens:v=>(we().f[54]++,we().s[250]++,_c.replaceAccessTokens(v,{allowFallback:!0})),onDataChange:v=>{we().f[55]++,we().s[251]++,this.layerWatcher.analyzeMap(v.map),we().s[252]++,this.fetchSources()}}),s=(we().s[253]++,this._getRenderer());let l;we().s[254]++,s==="ol"?(we().b[71][0]++,we().s[255]++,l=le.jsx(rne,{...i,onChange:this.onMapChange,debugToolbox:this.state.openlayersDebugOptions.debugToolbox,onLayerSelect:this.onLayerSelect})):(we().b[71][1]++,we().s[256]++,l=le.jsx(N$,{...i,onChange:this.onMapChange,options:this.state.maplibreGlDebugOptions,inspectModeEnabled:this.state.mapState==="inspect",highlightedLayer:this.state.mapStyle.layers[this.state.selectedLayerIndex],onLayerSelect:this.onLayerSelect}));let o;we().s[257]++,this.state.mapState.match(/^filter-/)?(we().b[72][0]++,we().s[258]++,o=this.state.mapState.replace(/^filter-/,"")):we().b[72][1]++;const p=(we().s[259]++,{});return we().s[260]++,o?(we().b[73][0]++,we().s[261]++,p.filter=`url('#${o}')`):we().b[73][1]++,we().s[262]++,le.jsx("div",{style:p,className:"maputnik-map__container","data-wd-key":"maplibre:container",children:l})}setModal(t,r){we().f[62]++,we().s[307]++,this.setState({isOpen:{...this.state.isOpen,[t]:r}},this.setStateInUrl)}toggleModal(t){we().f[63]++,we().s[308]++,this.setModal(t,!this.state.isOpen[t])}onSetFileHandle(t){we().f[64]++,we().s[309]++,this.setState({fileHandle:t})}render(){we().f[67]++;const t=(we().s[314]++,we().b[86][0]++,this.state.mapStyle.layers||(we().b[86][1]++,[])),r=(we().s[315]++,t.length>0?(we().b[87][0]++,t[this.state.selectedLayerIndex]):(we().b[87][1]++,void 0)),i=(we().s[316]++,le.jsx(kue,{renderer:this._getRenderer(),mapState:this.state.mapState,mapStyle:this.state.mapStyle,inspectModeEnabled:this.state.mapState==="inspect",sources:this.state.sources,onStyleChanged:this.onStyleChanged,onStyleOpen:this.onStyleChanged,onSetMapState:this.setMapState,onToggleModal:this.toggleModal.bind(this)})),s=(we().s[317]++,le.jsx(Cie,{onMoveLayer:this.onMoveLayer,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayersChange:this.onLayersChange,onLayerSelect:this.onLayerSelect,selectedLayerIndex:this.state.selectedLayerIndex,layers:t,sources:this.state.sources,errors:this.state.errors})),l=(we().s[318]++,r?(we().b[88][0]++,le.jsx(Xle,{layer:r,layerIndex:this.state.selectedLayerIndex,isFirstLayer:this.state.selectedLayerIndex<1,isLastLayer:this.state.selectedLayerIndex===this.state.mapStyle.layers.length-1,sources:this.state.sources,vectorLayers:this.state.vectorLayers,spec:this.state.spec,onMoveLayer:this.onMoveLayer,onLayerChanged:this.onLayerChanged,onLayerDestroy:this.onLayerDestroy,onLayerCopy:this.onLayerCopy,onLayerVisibilityToggle:this.onLayerVisibilityToggle,onLayerIdChange:this.onLayerIdChange,errors:this.state.errors},this.state.selectedLayerOriginalId)):(we().b[88][1]++,void 0)),o=(we().s[319]++,this.state.errors.length+this.state.infos.length>0?(we().b[89][0]++,le.jsx(Kue,{currentLayer:r,selectedLayerIndex:this.state.selectedLayerIndex,onLayerSelect:this.onLayerSelect,mapStyle:this.state.mapStyle,errors:this.state.errors,infos:this.state.infos})):(we().b[89][1]++,void 0)),p=(we().s[320]++,le.jsxs("div",{children:[le.jsx(PAe,{renderer:this._getRenderer(),maplibreGlDebugOptions:this.state.maplibreGlDebugOptions,openlayersDebugOptions:this.state.openlayersDebugOptions,onChangeMaplibreGlDebug:this.onChangeMaplibreGlDebug,onChangeOpenlayersDebug:this.onChangeOpenlayersDebug,isOpen:this.state.isOpen.debug,onOpenToggle:this.toggleModal.bind(this,"debug"),mapView:this.state.mapView}),le.jsx(kAe,{isOpen:this.state.isOpen.shortcuts,onOpenToggle:this.toggleModal.bind(this,"shortcuts")}),le.jsx(Lue,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,onChangeMetadataProperty:this.onChangeMetadataProperty,isOpen:this.state.isOpen.settings,onOpenToggle:this.toggleModal.bind(this,"settings")}),le.jsx(rAe,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.export,onOpenToggle:this.toggleModal.bind(this,"export"),fileHandle:this.state.fileHandle,onSetFileHandle:this.onSetFileHandle}),le.jsx(OAe,{isOpen:this.state.isOpen.open,onStyleOpen:this.openStyle,onOpenToggle:this.toggleModal.bind(this,"open"),fileHandle:this.state.fileHandle}),le.jsx(_Ae,{mapStyle:this.state.mapStyle,onStyleChanged:this.onStyleChanged,isOpen:this.state.isOpen.sources,onOpenToggle:this.toggleModal.bind(this,"sources")})]}));return we().s[321]++,le.jsx(Pue,{toolbar:i,layerList:s,layerEditor:l,map:this.mapRenderer(),bottom:o,modals:p})}}const Gce=ZN.createRoot(document.querySelector("#app"));Gce.render(le.jsx(EE.Provider,{value:{className:"react-icons"},children:le.jsx(Wce,{})}));document.querySelector(".loading").style.display="none";
//# sourceMappingURL=index-Bys9Wjhl.js.map
